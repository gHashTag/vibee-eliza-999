# üö® LSP (Language Server Protocol) - –ë—ã—Å—Ç—Ä—ã–π –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫

## üéØ –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

LSP (Language Server Protocol) - —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ TypeScript/JavaScript –∫–æ–¥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –í –ø—Ä–æ–µ–∫—Ç–µ VIBEE –∞–≥–µ–Ω—Ç—ã **–ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò** –∏—Å–ø–æ–ª—å–∑—É—é—Ç LSP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

### 1Ô∏è‚É£ **–ü–ï–†–ï–î —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ª—é–±–æ–≥–æ .ts/.tsx —Ñ–∞–π–ª–∞:**

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
1. –ü—Ä–æ—á–∏—Ç–∞–π —Ñ–∞–π–ª: Read /path/to/file.ts
2. –ü—Ä–æ–≤–µ—Ä—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É: mcp__cclsp__get_diagnostics
3. –¢–æ–ª—å–∫–æ –ø–æ—Ç–æ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π
```

### 2Ô∏è‚É£ **–ü—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏—è):**

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
1. –ù–∞–π–¥–∏ –≤—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: mcp__cclsp__find_references
2. Preview –∏–∑–º–µ–Ω–µ–Ω–∏–π: mcp__cclsp__rename_symbol (dry_run: true)
3. –ü—Ä–∏–º–µ–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è: mcp__cclsp__rename_symbol
4. –ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç: mcp__cclsp__get_diagnostics
```

### 3Ô∏è‚É£ **–ü—Ä–∏ –ø–æ–∏—Å–∫–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π:**

```bash
# –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π:
mcp__cclsp__find_definition
```

## üõ†Ô∏è –î–æ—Å—Ç—É–ø–Ω—ã–µ LSP –ö–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |
|---------|------------|---------------------|
| `mcp__cclsp__find_definition` | –ù–∞–π—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞ | `mcp__cclsp__find_definition(file_path: "src/character.ts", symbol_name: "character")` |
| `mcp__cclsp__find_references` | –ù–∞–π—Ç–∏ –≤—Å–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã | `mcp__cclsp__find_references(symbol_name: "character")` |
| `mcp__cclsp__rename_symbol` | –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª | `mcp__cclsp__rename_symbol(new_name: "vibeCharacter", dry_run: true)` |
| `mcp__cclsp__get_diagnostics` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏ | `mcp__cclsp__get_diagnostics(file_path: "src/index.ts")` |

## üìã –†–∞–±–æ—á–∏–µ –ü—Ä–æ—Ü–µ—Å—Å—ã (Workflows)

### üîç **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–æ–¥—É**

```typescript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: "–ì–¥–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è generateImage?"
// –û—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞:

–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –∫–æ–¥...
‚Üí mcp__cclsp__find_definition(
    file_path: "plugin-vibe-face-avatar/src/services/imageGenerationService.ts",
    symbol_name: "generateImage"
  )
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–∞–π–¥–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞ —Å—Ç—Ä–æ–∫–µ 45
```

### ‚úèÔ∏è **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**

```typescript
// –ù—É–∂–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é userId –≤ telegramId
// –û—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞:

–°–Ω–∞—á–∞–ª–∞ –Ω–∞–π–¥—É –≤—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è...
‚Üí mcp__cclsp__find_references(symbol_name: "userId")
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–∞–π–¥–µ–Ω–æ 12 –º–µ—Å—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–¢–µ–ø–µ—Ä—å preview –∏–∑–º–µ–Ω–µ–Ω–∏–π...
‚Üí mcp__cclsp__rename_symbol(
    new_name: "telegramId",
    dry_run: true
  )
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–∫–∞–∑–∞–Ω—ã –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

–ü—Ä–∏–º–µ–Ω—è—é –∏–∑–º–µ–Ω–µ–Ω–∏—è...
‚Üí mcp__cclsp__rename_symbol(new_name: "telegramId")
// ‚úÖ –ì–æ—Ç–æ–≤–æ!
```

### üêõ **–û—Ç–ª–∞–¥–∫–∞**

```typescript
// –û—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ
// –û—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞:

–ü—Ä–æ–≤–µ—Ä—è—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É...
‚Üí mcp__cclsp__get_diagnostics(file_path: "src/character.ts")
// –†–µ–∑—É–ª—å—Ç–∞—Ç: 0 –æ—à–∏–±–æ–∫, 2 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–æ–¥...
‚Üí mcp__cclsp__find_definition(symbol_name: "functionWithError")
‚Üí mcp__cclsp__find_references(symbol_name: "functionWithError")
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–∞–π–¥–µ–Ω—ã –≤—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ü—Ä–∞–≤–∏–ª–∞

### ‚ùå **–ù–ò–ö–û–ì–î–ê –ù–ï –î–ï–õ–ê–ô:**

1. ‚ùå –ù–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π .ts/.tsx —Ñ–∞–π–ª –±–µ–∑ `get_diagnostics`
2. ‚ùå –ù–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–π –±–µ–∑ `find_references` + dry_run
3. ‚ùå –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. ‚ùå –ù–µ –º–µ–Ω—è–π —Ç–∏–ø—ã –±–µ–∑ –∞–Ω–∞–ª–∏–∑–∞ —á–µ—Ä–µ–∑ LSP

### ‚úÖ **–í–°–ï–ì–î–ê –î–ï–õ–ê–ô:**

1. ‚úÖ `get_diagnostics` –ø–µ—Ä–µ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
2. ‚úÖ `find_references` –ø—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
3. ‚úÖ dry_run –ø–µ—Ä–µ–¥ `rename_symbol`
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üé≠ –ê–≥–µ–Ω—Ç—ã –∏ LSP

| –ê–≥–µ–Ω—Ç | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å LSP |
|-------|------------------|
| **üëë vibe-lead** | –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤—Å–µ—Ö, —Å–ª–µ–¥–∏—Ç –∑–∞ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –ø—Ä–∞–≤–∏–ª |
| **üíª vibe-coder** | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ LSP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã |
| **üé≠ vibe-critic** | `get_diagnostics` –ø—Ä–∏ —Ä–µ–≤—å—é, `find_references` –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –±–∞–≥–æ–≤ |
| **üß™ vibe-tester** | `find_definition` –ø–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º —Ç–µ—Å—Ç–æ–≤ |
| **üìã vibe-spec** | `find_definition`/`find_references` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ |

## üìä –ü—Ä–∏–º–µ—Ä—ã –û—Ç—á–µ—Ç–æ–≤ LSP

### ‚úÖ –£—Å–ø–µ—à–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```json
{
  "status": "success",
  "file": "src/character.ts",
  "errors": 0,
  "warnings": 0,
  "hints": 0,
  "message": "No diagnostics found. The file is healthy! ‚úÖ"
}
```

### ‚ö†Ô∏è –ù–∞–π–¥–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

```json
{
  "status": "warning",
  "file": "src/index.ts",
  "errors": 2,
  "warnings": 1,
  "hints": 3,
  "issues": [
    {
      "line": 15,
      "type": "error",
      "message": "Type 'string | undefined' is not assignable to type 'string'"
    }
  ]
}
```

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ –°—Å—ã–ª–æ—á–∫–∏

- **–ü—Ä–∞–≤–∏–ª–∞ LSP**: `.claude/lsp-rules.json`
- **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤**: `.claude/agents/*.md`
- **LSP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: `.claude/cclsp.json`

---

## üí° –ë—ã—Å—Ç—Ä—ã–µ –°–æ–≤–µ—Ç—ã

1. **üí¨ –ï—Å–ª–∏ —Å–ø—Ä–æ—Å—è—Ç** "–≥–¥–µ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è?" ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π `find_definition`
2. **üîÑ –ï—Å–ª–∏ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç** "–≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è?" ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π `find_references`
3. **üìù –ï—Å–ª–∏ –Ω—É–∂–Ω–æ** –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å ‚Üí `find_references` ‚Üí `rename_symbol` (dry_run) ‚Üí `rename_symbol`
4. **üêõ –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞** ‚Üí `get_diagnostics`

---

**üéâ LSP –¥–µ–ª–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É VIBEE –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π!**

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π LSP –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å TypeScript/JavaScript –∫–æ–¥–æ–º! üöÄ
