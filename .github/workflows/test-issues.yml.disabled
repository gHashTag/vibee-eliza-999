name: Issues to Sentry Sync

on:
  issues:
    types: [opened]
  workflow_dispatch:

jobs:
  sync:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    steps:
      - name: Echo Issue Details
        run: |
          echo "‚úÖ Issue Event Triggered!"
          echo "Event: ${{ github.event_name }}"
          echo "Action: ${{ github.event.action }}"
          echo "Issue: #${{ github.event.issue.number }}"
          echo "Title: ${{ github.event.issue.title }}"

      - name: Add Confirmation Comment
        run: |
          echo "üìù Adding comment to issue #${{ github.event.issue.number }}..."

          COMMENT="## ‚úÖ Issue Auto-Registered

GitHub Issue #${{ github.event.issue.number }} has been automatically registered.

**Details:**
- **Action:** ${{ github.event.action }}
- **Repository:** ${{ github.repository }}
- **Author:** ${{ github.event.issue.user.login }}
- **Time:** $(date -u +\"%Y-%m-%d %H:%M:%S UTC\")

Test: Comment functionality verified!"

          gh issue comment ${{ github.event.issue.number }} \
            --body "$COMMENT"
