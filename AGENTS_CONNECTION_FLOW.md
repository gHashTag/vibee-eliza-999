# ğŸ”Œ ĞŸĞĞ¢ĞĞš ĞŸĞĞ”ĞšĞ›Ğ®Ğ§Ğ•ĞĞ˜Ğ¯ ĞĞ“Ğ•ĞĞ¢ĞĞ’ - ĞŸĞĞ›ĞĞĞ• ĞĞ‘ĞªĞ¯Ğ¡ĞĞ•ĞĞ˜Ğ•

> Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ğ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¾Ğ³Ğ¾, ĞºĞ°Ğº Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ÑÑ‚ÑÑ Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ÑÑ‚ÑÑ Ğ² ElizaOS

---

## ğŸ“Š ĞĞ‘Ğ©ĞĞ¯ Ğ¡Ğ¥Ğ•ĞœĞ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ĞšĞĞœĞĞĞ”Ğ: elizaos start                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  packages/cli/src/commands/    â”‚
        â”‚  start/index.ts                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                               â”‚
        â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ --character   â”‚            â”‚ Ğ‘Ğ•Ğ— --character   â”‚
â”‚ (JSON Ñ„Ğ°Ğ¹Ğ»Ñ‹)  â”‚            â”‚ (TypeScript)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                              â”‚
        â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ loadCharacter    â”‚        â”‚ loadProject(cwd)    â”‚
â”‚ TryPath()        â”‚        â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                              â”‚
        â”‚                              â–¼
        â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚ Ğ˜Ñ‰ĞµÑ‚ package.json   â”‚
        â”‚                    â”‚ Ğ§Ğ¸Ñ‚Ğ°ĞµÑ‚ "main"       â”‚
        â”‚                    â”‚ Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ  â”‚
        â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                              â”‚
        â”‚                              â–¼
        â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚ Ğ˜Ñ‰ĞµÑ‚ default export â”‚
        â”‚                    â”‚ Ñ Ğ¼Ğ°ÑÑĞ¸Ğ²Ğ¾Ğ¼ agents   â”‚
        â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  AgentServer.start()          â”‚
        â”‚  packages/server/src/index.ts â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  server.startAgents()         â”‚
        â”‚  - ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¸     â”‚
        â”‚  - Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ sqlPlugin        â”‚
        â”‚  - Ğ¨Ğ¸Ñ„Ñ€ÑƒĞµÑ‚ ÑĞµĞºÑ€ĞµÑ‚Ñ‹            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  elizaOS.addAgents()          â”‚
        â”‚  packages/core/src/runtime.ts  â”‚
        â”‚  - Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ñ‹        â”‚
        â”‚  - Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ AgentRuntime        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  elizaOS.startAgents()        â”‚
        â”‚  - Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ runtime     â”‚
        â”‚  - Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  database.createAgent()      â”‚
        â”‚  - Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ² Ğ‘Ğ”             â”‚
        â”‚  - Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² agents    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Ğ”Ğ•Ğ¢ĞĞ›Ğ¬ĞĞ«Ğ™ Ğ ĞĞ—Ğ‘ĞĞ 

### 1ï¸âƒ£ Ğ¢ĞĞ§ĞšĞ Ğ’Ğ¥ĞĞ”Ğ: `elizaos start`

**Ğ¤Ğ°Ğ¹Ğ»**: `packages/cli/src/commands/start/index.ts`

```typescript
// ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ Ğ·Ğ´ĞµÑÑŒ
export const start = new Command()
  .name('start')
  .option('--character <paths...>', 'Character file(s) to use')
  .action(async (options) => {
    // ...
  });
```

**Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚:**
1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ñ„Ğ»Ğ°Ğ³Ğ° `--character`
2. Ğ•ÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ â†’ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ JSON Ñ„Ğ°Ğ¹Ğ»Ñ‹
3. Ğ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚ â†’ Ğ¿Ñ‹Ñ‚Ğ°ĞµÑ‚ÑÑ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ TypeScript Ğ¿Ñ€Ğ¾ĞµĞºÑ‚

---

### 2ï¸âƒ£ Ğ—ĞĞ“Ğ Ğ£Ğ—ĞšĞ JSON ĞĞ“Ğ•ĞĞ¢ĞĞ’ (Character Files)

**Ğ•ÑĞ»Ğ¸ ÑƒĞºĞ°Ğ·Ğ°Ğ½ `--character packages/agents/vibeeAgent.json`:**

```typescript
// packages/cli/src/commands/start/index.ts:93-118
if (options.character && options.character.length > 0) {
  for (const charPath of options.character) {
    const character = await loadCharacterTryPath(resolvedPath);
    characters.push(character);
  }
}
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ `loadCharacterTryPath()`:**
- **Ğ¤Ğ°Ğ¹Ğ»**: `packages/server/src/loader.ts:263-335`
- Ğ˜Ñ‰ĞµÑ‚ Ñ„Ğ°Ğ¹Ğ» Ğ² Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²Ğµ Ğ¼ĞµÑÑ‚:
  1. Ğ£ĞºĞ°Ğ·Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¿ÑƒÑ‚ÑŒ (Ğ°Ğ±ÑĞ¾Ğ»ÑÑ‚Ğ½Ñ‹Ğ¹ Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚Ğ½Ğ¾ÑĞ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹)
  2. `process.cwd()` (Ñ‚ĞµĞºÑƒÑ‰Ğ°Ñ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ)
  3. `process.cwd()/../..` (Ğ½Ğ° 2 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ Ğ²Ñ‹ÑˆĞµ)
  4. `process.cwd()/agent/`
  5. `__dirname/characters/`
  6. Ğ˜ Ñ‚Ğ°Ğº Ğ´Ğ°Ğ»ĞµĞµ...

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚**: ĞœĞ°ÑÑĞ¸Ğ² `Character[]`

---

### 3ï¸âƒ£ Ğ—ĞĞ“Ğ Ğ£Ğ—ĞšĞ TYPESCRIPT ĞĞ“Ğ•ĞĞ¢ĞĞ’ (Project Agents)

**Ğ•ÑĞ»Ğ¸ `--character` ĞĞ• ÑƒĞºĞ°Ğ·Ğ°Ğ½:**

```typescript
// packages/cli/src/commands/start/index.ts:119-146
if (dirInfo.hasPackageJson && dirInfo.type !== 'non-elizaos-dir') {
  logger.info('No character files specified, attempting to load project agents...');
  const project = await loadProject(cwd);
  
  if (project.agents && project.agents.length > 0) {
    projectAgents = project.agents;
  }
}
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ `loadProject()`:**
- **Ğ¤Ğ°Ğ¹Ğ»**: `packages/cli/src/project.ts:134-338`

**ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸:**

1. **Ğ§Ğ¸Ñ‚Ğ°ĞµÑ‚ `package.json`:**
   ```typescript
   const packageJson = JSON.parse(fs.readFileSync(path.join(dir, 'package.json'), 'utf8'));
   const main = packageJson.main; // ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: "dist/index.js"
   ```

2. **Ğ˜Ñ‰ĞµÑ‚ entry point Ğ² Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞµ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ°:**
   ```typescript
   const entryPoints = [
     path.join(dir, main),           // "dist/index.js"
     path.join(dir, 'dist/index.js'),
     path.join(dir, 'src/index.ts'),
     path.join(dir, 'src/index.js'),
     path.join(dir, 'index.ts'),
     path.join(dir, 'index.js'),
   ];
   ```

3. **Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ:**
   ```typescript
   const importUrl = 'file://' + importPath;
   projectModule = await import(importUrl);
   ```

4. **Ğ˜Ñ‰ĞµÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ² Ğ¼Ğ¾Ğ´ÑƒĞ»Ğµ:**

   **Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ A: Default export Ñ Ğ¼Ğ°ÑÑĞ¸Ğ²Ğ¾Ğ¼ agents** â­ Ğ Ğ•ĞšĞĞœĞ•ĞĞ”Ğ£Ğ•Ğ¢Ğ¡Ğ¯
   ```typescript
   // src/index.ts
   const project: Project = {
     agents: [vibeeAgent, kolsAgent],
   };
   export default project;
   ```
   
   **Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ B: Named exports**
   ```typescript
   // src/index.ts
   export const vibeeAgent: ProjectAgent = { ... };
   export const kolsAgent: ProjectAgent = { ... };
   ```

5. **Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ `Project` Ğ¾Ğ±ÑŠĞµĞºÑ‚:**
   ```typescript
   return {
     agents: [vibeeAgent, kolsAgent],
     dir: '/path/to/project',
   };
   ```

---

### 4ï¸âƒ£ ĞŸĞĞ”Ğ“ĞĞ¢ĞĞ’ĞšĞ ĞšĞĞĞ¤Ğ˜Ğ“Ğ£Ğ ĞĞ¦Ğ˜Ğ™

**Ğ¤Ğ°Ğ¹Ğ»**: `packages/cli/src/commands/start/index.ts:148-155`

```typescript
const agentConfigs = projectAgents?.length
  ? projectAgents.map((pa) => ({
      character: pa.character,
      plugins: Array.isArray(pa.plugins) ? pa.plugins : [],
      init: pa.init,
    }))
  : characters?.map((character) => ({ character })) || [];
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚**: Ğ•Ğ´Ğ¸Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²:
```typescript
{
  character: Character,
  plugins?: Plugin[],
  init?: (runtime) => Promise<void>
}[]
```

---

### 5ï¸âƒ£ Ğ—ĞĞŸĞ£Ğ¡Ğš Ğ¡Ğ•Ğ Ğ’Ğ•Ğ Ğ

**Ğ¤Ğ°Ğ¹Ğ»**: `packages/cli/src/commands/start/index.ts:158-164`

```typescript
const server = new AgentServer();
await server.start({
  port: options.port,
  dataDir: process.env.PGLITE_DATA_DIR,
  postgresUrl: process.env.POSTGRES_URL,
  agents: agentConfigs,  // â† ĞŸĞµÑ€ĞµĞ´Ğ°ĞµĞ¼ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
});
```

---

### 6ï¸âƒ£ Ğ˜ĞĞ˜Ğ¦Ğ˜ĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯ Ğ¡Ğ•Ğ Ğ’Ğ•Ğ Ğ

**Ğ¤Ğ°Ğ¹Ğ»**: `packages/server/src/index.ts:616+`

```typescript
private async initializeServer(config?: ServerConfig) {
  // 1. Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ Express app
  this.app = express();
  
  // 2. ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ middleware
  // 3. ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
  // 4. Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ API routes
  // 5. ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ WebSocket
}
```

---

### 7ï¸âƒ£ Ğ—ĞĞŸĞ£Ğ¡Ğš ĞĞ“Ğ•ĞĞ¢ĞĞ’

**Ğ¤Ğ°Ğ¹Ğ»**: `packages/server/src/index.ts:208-273`

```typescript
public async startAgents(agents: Array<{...}>) {
  // 1. ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
  const agentConfigs = agents.map((agent) => {
    agent.character.id ??= stringToUuid(agent.character.name);
    
    // ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½ÑĞµÑ‚ Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ñ‹
    const allPlugins = [
      ...(agent.character.plugins || []),
      ...(agent.plugins || []),
      sqlPlugin,  // â† Ğ’ÑĞµĞ³Ğ´Ğ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ SQL Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½
    ];
    
    return {
      character: encryptedCharacter(agent.character),  // â† Ğ¨Ğ¸Ñ„Ñ€ÑƒĞµÑ‚ ÑĞµĞºÑ€ĞµÑ‚Ñ‹
      plugins: allPlugins,
      init: agent.init,
    };
  });
  
  // 2. Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ² ElizaOS
  const agentIds = await this.elizaOS.addAgents(agentConfigs);
  
  // 3. Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
  await this.elizaOS.startAgents(agentIds);
  
  // 4. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ² Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
  for (const id of agentIds) {
    const runtime = this.elizaOS.getAgent(id);
    if (this.database) {
      const existingAgent = await this.database.getAgent(runtime.agentId);
      if (!existingAgent) {
        await this.database.createAgent({
          ...runtime.character,
          id: runtime.agentId,
        });
      }
    }
  }
}
```

---

## ğŸ“ Ğ“Ğ”Ğ• Ğ¥Ğ ĞĞĞ¯Ğ¢Ğ¡Ğ¯ ĞĞ“Ğ•ĞĞ¢Ğ«

### TypeScript Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ (PRODUCTION)

```
my-project/
â”œâ”€â”€ package.json          # "main": "dist/index.js"
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts          # â­ Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Project
â”‚   â””â”€â”€ agents/           # â­ ĞĞ³ĞµĞ½Ñ‚Ñ‹ Ğ·Ğ´ĞµÑÑŒ
â”‚       â”œâ”€â”€ vibeeAgent.ts
â”‚       â”œâ”€â”€ kolsAgent.ts
â”‚       â””â”€â”€ index.ts
â””â”€â”€ dist/
    â””â”€â”€ index.js          # Ğ¡ĞºĞ¾Ğ¼Ğ¿Ğ¸Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´
```

**ĞšĞ°Ğº Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ:**
1. `loadProject()` Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ `package.json.main` â†’ `"dist/index.js"`
2. Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ `dist/index.js` (Ğ¸Ğ»Ğ¸ `src/index.ts` ĞµÑĞ»Ğ¸ dist Ğ½ĞµÑ‚)
3. Ğ˜Ñ‰ĞµÑ‚ `default.agents` Ğ¸Ğ»Ğ¸ named exports
4. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¼Ğ°ÑÑĞ¸Ğ² `ProjectAgent[]`

### JSON Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ (Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)

```
packages/agents/
â”œâ”€â”€ vibeeAgent.json
â””â”€â”€ kolsAgent.json
```

**ĞšĞ°Ğº Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ:**
1. Ğ£ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿ÑƒÑ‚ÑŒ: `--character packages/agents/vibeeAgent.json`
2. `loadCharacterTryPath()` Ğ¸Ñ‰ĞµÑ‚ Ñ„Ğ°Ğ¹Ğ»
3. ĞŸĞ°Ñ€ÑĞ¸Ñ‚ JSON â†’ `Character`
4. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ `Character[]`

---

## âœ… ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ ĞŸĞĞ”ĞšĞ›Ğ®Ğ§Ğ•ĞĞ˜Ğ¯

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° 1: TypeScript Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹

**Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°:**
```bash
cd my-project
ls -la src/
# Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ: index.ts Ğ¸/Ğ¸Ğ»Ğ¸ agents/
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° `package.json`:**
```json
{
  "main": "dist/index.js"  // â† Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ
}
```

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° `src/index.ts`:**
```typescript
// Ğ”Ğ¾Ğ»Ğ¶ĞµĞ½ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Project Ñ agents
const project: Project = {
  agents: [vibeeAgent, kolsAgent],
};
export default project;
```

**Ğ—Ğ°Ğ¿ÑƒÑĞº:**
```bash
cd my-project
elizaos start  # Ğ”Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸
```

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° 2: JSON Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹

**ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ°:**
```bash
ls -la packages/agents/
# Ğ”Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ: vibeeAgent.json, kolsAgent.json
```

**Ğ—Ğ°Ğ¿ÑƒÑĞº:**
```bash
elizaos start --character packages/agents/vibeeAgent.json
```

---

## ğŸ”§ ĞĞ¢Ğ›ĞĞ”ĞšĞ

### Ğ›Ğ¾Ğ³Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸

**TypeScript Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹:**
```
Info No character files specified, attempting to load project agents...
Info Loaded project from /path/to/project/dist/index.js
Info Found 2 agent(s) in project configuration
Info Loaded character: VIBEE
Info Loaded character: KOLs
```

**JSON Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹:**
```
Info Successfully loaded character: VIBEE
Info Successfully loaded character: KOLs
```

### Ğ¢Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹

1. **"No agents found in project"**
   - âŒ `src/index.ts` Ğ½Ğµ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ `Project` Ñ `agents`
   - âœ… ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ: `export default { agents: [...] }`

2. **"Could not find project entry point"**
   - âŒ ĞĞµÑ‚ `package.json.main` Ğ¸Ğ»Ğ¸ Ñ„Ğ°Ğ¹Ğ» Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚
   - âœ… ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ: `package.json` â†’ `"main": "dist/index.js"`

3. **"Character file not found"**
   - âŒ Ğ¤Ğ°Ğ¹Ğ» Ğ½Ğµ Ğ² `packages/agents/`
   - âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹: `--character packages/agents/vibeeAgent.json`

---

## ğŸ“š Ğ¡Ğ¡Ğ«Ğ›ĞšĞ˜ ĞĞ ĞšĞĞ”

- **ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° start**: `packages/cli/src/commands/start/index.ts`
- **Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°**: `packages/cli/src/project.ts:134-338`
- **Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° JSON**: `packages/server/src/loader.ts:263-335`
- **Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²**: `packages/server/src/index.ts:208-273`
- **ElizaOS runtime**: `packages/core/src/runtime.ts`

---

**ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ**: 2025-11-29



