# üöÄ Fly.io Deployment Guide - VIBEE

## –ü—Ä–æ–±–ª–µ–º–∞: –°–∞–π—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

–ï—Å–ª–∏ —Å–∞–π—Ç https://vibee-eliza-999-prod.fly.dev/ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã

1. **–£–±—Ä–∞–Ω Sentry –∏–∑ CLI**
   - –£–¥–∞–ª–µ–Ω `instrument.js` –∏–º–ø–æ—Ä—Ç –∏–∑ `packages/cli/src/index.ts`
   - –£–±—Ä–∞–Ω—ã error handlers —Å Sentry
   - –£–ø—Ä–æ—â–µ–Ω entry point

2. **–£–ø—Ä–æ—â–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è fly.toml**
   - –£–¥–∞–ª–µ–Ω—ã UDP –ø–æ—Ä—Ç—ã (50000)
   - –£–≤–µ–ª–∏—á–µ–Ω restart_limit –¥–æ 3
   - –£–ø—Ä–æ—â–µ–Ω—ã TCP checks

3. **–£–ø—Ä–æ—â–µ–Ω Dockerfile**
   - –£–±—Ä–∞–Ω EXPOSE 50000-50100/udp
   - –¢–æ–ª—å–∫–æ HTTP –ø–æ—Ä—Ç 3000

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å fly CLI
brew install flyctl

# –õ–æ–≥–∏–Ω
flyctl auth login

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
flyctl status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
flyctl logs

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
flyctl restart
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ health check

```bash
# HTTP –∑–∞–ø—Ä–æ—Å
curl https://vibee-eliza-999-prod.fly.dev/

# Health check endpoint
curl https://vibee-eliza-999-prod.fly.dev/api/health
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
flyctl secrets list

# –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç
flyctl secrets set OPENAI_API_KEY=sk-...

# –î–ª—è production –Ω—É–∂–Ω—ã:
# - OPENAI_API_KEY –∏–ª–∏ ANTHROPIC_API_KEY
# - INFISICAL_CLIENT_ID
# - INFISICAL_CLIENT_SECRET
# - TELEGRAM_BOT_TOKEN (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
```

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã:**
- 502 Bad Gateway
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ constantly restarting

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
flyctl logs

# –ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
# - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
# - –û—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ (Sentry, imports)
# - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π PORT
```

### 2. Health check fails

**–°–∏–º–ø—Ç–æ–º—ã:**
- TCP checks —Ñ–µ–π–ª—è—Ç—Å—è
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- –°–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç –∏–∑ `PORT` env (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3000)
- –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/healthz` –∏–ª–∏ `/api/health`
- –ù–µ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–∞–º–∏

### 3. Dist —Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã

**–°–∏–º–ø—Ç–æ–º—ã:**
- "Cannot find module"
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
bun run build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å dist —Ñ–∞–π–ª—ã
ls -la packages/cli/dist/
ls -la packages/server/dist/

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
bun run build --filter=@elizaos/cli
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

- [ ] –ö–æ–¥ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ: `bun run build`
- [ ] –£–±—Ä–∞–Ω—ã –≤—Å–µ Sentry imports
- [ ] fly.toml –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] Dockerfile –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç UDP –ø–æ—Ä—Ç—ã
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Fly.io
- [ ] Health check endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ HTTP –∑–∞–ø—Ä–æ—Å—ã

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```bash
# –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
flyctl status

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
flyctl logs -f

# SSH –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
flyctl ssh console

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
flyctl metrics

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
flyctl restart

# Deploy —Å --no-cache
flyctl deploy --no-cache
```

## üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. ‚úÖ HTTP: https://vibee-eliza-999-prod.fly.dev/
2. ‚úÖ API: https://vibee-eliza-999-prod.fly.dev/api/agents
3. ‚úÖ Health: https://vibee-eliza-999-prod.fly.dev/healthz

–ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - —É–≤–∏–¥–∏—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ElizaOS!

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `flyctl logs`
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –≤—Å–µ—Ö env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health check endpoint
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `flyctl restart`

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-11-24
