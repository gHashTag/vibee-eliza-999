# –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï
## –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–¥–µ–ª-–∫–ª—É–±–æ–º "Padel World Club"

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è](#1-–æ–±—â–∏–µ-—Å–≤–µ–¥–µ–Ω–∏—è)
2. [–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Ü–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã](#2-–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ-–∏-—Ü–µ–ª–∏-—Å–∏—Å—Ç–µ–º—ã)
3. [–û–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã](#3-–æ–ø–∏—Å–∞–Ω–∏–µ-—Å–∏—Å—Ç–µ–º—ã)
4. [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#4-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
5. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#5-—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
6. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#6-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
7. [–ú–æ–¥—É–ª–∏ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#7-–º–æ–¥—É–ª–∏-–∏-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
8. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#8-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
9. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#9-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
10. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#10-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
11. [–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å](#11-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å-–∏-–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å)
12. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#12-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
13. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#13-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## 1. –û–ë–©–ò–ï –°–í–ï–î–ï–ù–ò–Ø

### 1.1 –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
**Padel World Club** - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–¥–µ–ª-–∫–ª—É–±–æ–º —Å –≥–æ–ª–æ—Å–æ–≤—ã–º AI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

### 1.2 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –∑–∞–¥–∞–Ω–∏–µ–º –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–¥–µ–ª-–∫–ª—É–±–æ–º, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã.

### 1.3 –¢–µ—Ä–º–∏–Ω—ã –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- **Padel** - –≤–∏–¥ —Å–ø–æ—Ä—Ç–∞, –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ç–µ–Ω–Ω–∏—Å–∞ –∏ —Å–∫–≤–æ—à–∞
- **–ö–æ—Ä—Ç** - –∏–≥—Ä–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞ –¥–ª—è –ø–∞–¥–µ–ª
- **–°–ª–æ—Ç** - –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ—Ä—Ç–∞
- **Daily Game** - —Å–∏—Å—Ç–µ–º–∞ –≥—Ä—É–ø–ø–æ–≤—ã—Ö –∏–≥—Ä, –æ—Ä–≥–∞–Ω–∏–∑—É–µ–º—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
- **Telegram Bot** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–µ Telegram
- **Inngest** - —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –∏ —Å–æ–±—ã—Ç–∏–π
- **Webhook** - –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### 1.4 –û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
- **–¢–∏–ø —Å–∏—Å—Ç–µ–º—ã**: Web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + Telegram Bot
- **–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è**: –í–ª–∞–¥–µ–ª—å—Ü—ã –ø–∞–¥–µ–ª-–∫–ª—É–±–æ–≤, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã, –∏–≥—Ä–æ–∫–∏
- **–ú–∞—Å—à—Ç–∞–±**: –û—Ç –º–∞–ª—ã—Ö –∫–ª—É–±–æ–≤ (2-4 –∫–æ—Ä—Ç–∞) –¥–æ –∫—Ä—É–ø–Ω—ã—Ö —Ü–µ–Ω—Ç—Ä–æ–≤ (10+ –∫–æ—Ä—Ç–æ–≤)
- **–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**: –†—É—Å—Å–∫–∏–π, –ê–Ω–≥–ª–∏–π—Å–∫–∏–π, –ò–≤—Ä–∏—Ç (–º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å)

---

## 2. –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï –ò –¶–ï–õ–ò –°–ò–°–¢–ï–ú–´

### 2.1 –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏
1. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** - —É–ø—Ä–æ—â–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ—Ä—Ç–æ–≤
2. **–ì–æ–ª–æ—Å–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞–º–∏** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã
4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å** - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è –±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏–π
5. **–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∞—è** - Daily Game –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º—å—é–Ω–∏—Ç–∏

### 2.2 –ë–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á–∏
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ—Ä—Ç–æ–≤
- –°–Ω–∏–∂–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∏–∑–¥–µ—Ä–∂–µ–∫
- –£–ª—É—á—à–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä—É—Ç–∏–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

### 2.3 –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è

#### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∫–ª—É–±–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
- –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–ª–∞—Ç–µ–∂–µ–π
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π

#### –ò–≥—Ä–æ–∫–∏
- –ë—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ì–æ–ª–æ—Å–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω—è–º–∏
- –£—á–∞—Å—Ç–∏–µ –≤ Daily Game

---

## 3. –û–ü–ò–°–ê–ù–ò–ï –°–ò–°–¢–ï–ú–´

### 3.1 –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
Padel World Club - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–¥–µ–ª-–∫–ª—É–±–æ–º, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º event-driven –ø–æ–¥—Ö–æ–¥–∞. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- **Telegram Bot** —Å AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **REST API** –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª—É–±–æ–º
- **–°–∏—Å—Ç–µ–º—É –ø–ª–∞—Ç–µ–∂–µ–π** —á–µ—Ä–µ–∑ Telegram Stars –∏ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- **Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** –Ω–∞ –±–∞–∑–µ Inngest
- **Real-time –∞–Ω–∞–ª–∏—Ç–∏–∫—É** –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 3.2 –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

#### üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π AI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ —á–µ—Ä–µ–∑ OpenAI Whisper
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–º–µ—Ä–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é GPT-4
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–∞—Ö

#### üìÖ –£–º–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ–∏—Å–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º
- –ë—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –æ–¥–∏–Ω –∫–ª–∏–∫
- –ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (React Big Calendar)
- Telegram Mini App –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞

#### üéÆ Daily Game - –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞
- –ê–¥–º–∏–Ω—ã —Å–æ–∑–¥–∞—é—Ç –∏–≥—Ä–æ–≤—ã–µ –ø–ª–∞–Ω—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø –∏–≥—Ä–æ–∫–æ–≤
- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

#### üí≥ –ì–∏–±–∫–∏–µ –ø–ª–∞—Ç–µ–∂–∏
- Telegram Stars (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –≤–∞–ª—é—Ç–∞)
- –ù–∞–ª–∏—á–Ω—ã–µ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º —á–µ–∫–æ–º
- –ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥
- –ê–¥–º–∏–Ω—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

---

## 4. –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

### 4.1 –ú–æ–¥—É–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

#### FR-AUTH-001: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Bot
- –°–±–æ—Ä –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–∏–º—è, username, —è–∑—ã–∫)
- –í—ã–±–æ—Ä –∏–≥—Ä–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è (–Ω–æ–≤–∏—á–æ–∫, —Å—Ä–µ–¥–Ω–∏–π, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π, –ø—Ä–æ)
- –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### FR-AUTH-002: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ Telegram ID
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ —á–µ—Ä–µ–∑ Redis
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 4.2 –ú–æ–¥—É–ª—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

#### FR-BOOK-001: –ü–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –∫–æ—Ä—Ç–∞ (–ø–∞–¥–µ–ª/—Ç–µ–Ω–Ω–∏—Å)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (60/90/120 –º–∏–Ω—É—Ç)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ (—Å–µ–≥–æ–¥–Ω—è/–∑–∞–≤—Ç—Ä–∞)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—Ç–∞
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### FR-BOOK-002: –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –í—ã–±–æ—Ä –∫–æ—Ä—Ç–∞, –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏
- –£–∫–∞–∑–∞–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –°—Ç–∞—Ç—É—Å: "pending_payment"

#### FR-BOOK-003: –ì–æ–ª–æ—Å–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ó–∞–≥—Ä—É–∑–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ –∏–∑ Telegram
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Ç–µ–∫—Å—Ç (Whisper API)
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –Ω–∞–º–µ—Ä–µ–Ω–∏—è (GPT-4)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –¥–∞—Ç–∞, –≤—Ä–µ–º—è, —Ç–∏–ø –∫–æ—Ä—Ç–∞, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

#### FR-BOOK-004: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –±—Ä–æ–Ω–µ–π
- –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò—Å—Ç–æ—Ä–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

#### FR-BOOK-005: –ö–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- React Big Calendar –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞
- Telegram Mini App –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –∫–æ—Ä—Ç–æ–≤
- –ë—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

### 4.3 –ú–æ–¥—É–ª—å –ø–ª–∞—Ç–µ–∂–µ–π

#### FR-PAY-001: Telegram Stars
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–∞ –≤ Telegram
- –û–±—Ä–∞–±–æ—Ç–∫–∞ pre_checkout_query
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ successful_payment
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

#### FR-PAY-002: –û–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏
- –í—ã–±–æ—Ä –æ–ø–ª–∞—Ç—ã –Ω–∞–ª–∏—á–Ω—ã–º–∏
- –ó–∞–ø—Ä–æ—Å –Ω–∞ –∑–∞–≥—Ä—É–∑–∫—É —á–µ–∫–∞
- –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ–∫–∞ –∞–¥–º–∏–Ω–∞–º
- –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

#### FR-PAY-003: –ê–¥–º–∏–Ω—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- –ü—Ä–æ—Å–º–æ—Ç—Ä —á–µ–∫–æ–≤ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ö–Ω–æ–ø–∫–∏ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" / "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞

#### FR-PAY-004: –¢–∞–π–º–∞—É—Ç—ã –ø–ª–∞—Ç–µ–∂–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞ —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ —Ç–∞–π–º–∞—É—Ç–∞
- –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Å–ª–æ—Ç–∞ –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã

### 4.4 –ú–æ–¥—É–ª—å Daily Game

#### FR-DAILY-001: –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö –ø–ª–∞–Ω–æ–≤ (–ê–¥–º–∏–Ω)
- –í–∏–∑–∞—Ä–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞–Ω–∞
- –í—ã–±–æ—Ä –¥–∞—Ç—ã, –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ä—Ç–∞
- –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è –∏–≥—Ä—ã
- –£–∫–∞–∑–∞–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞

#### FR-DAILY-002: –†–∞—Å—Å—ã–ª–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é –∏–≥—Ä—ã
- Inline-–∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ª–æ—Ç–∞
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

#### FR-DAILY-003: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø
- –í—ã–±–æ—Ä —Å–ª–æ—Ç–∞ –∏–≥—Ä–æ–∫–æ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (4 —á–µ–ª–æ–≤–µ–∫–∞)
- –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–∞ —á–µ–ª–æ–≤–µ–∫–∞

#### FR-DAILY-004: –û–ø–ª–∞—Ç–∞ Daily Game
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –æ–±—ã—á–Ω–æ–π –æ–ø–ª–∞—Ç–µ
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ callback_data –¥–ª—è Daily Game
- –ê–¥–º–∏–Ω—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á–µ–∫–æ–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≥—Ä—É–ø–ø—ã

### 4.5 –ú–æ–¥—É–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

#### FR-ADMIN-001: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä—Ç–∞–º–∏
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–æ—Ä—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–±–æ—á–∏—Ö —á–∞—Å–æ–≤
- –¶–µ–Ω–æ–≤–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

#### FR-ADMIN-002: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∞–º–∏
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
- –¶–µ–Ω–æ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –°–∫–∏–¥–∫–∏ –∏ –∞–∫—Ü–∏–∏
- –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å (THB, USD, Stars)

#### FR-ADMIN-003: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- Dashboard —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∫–æ—Ä—Ç–æ–≤
- –û—Ç—á–µ—Ç—ã –ø–æ –ø–ª–∞—Ç–µ–∂–∞–º
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π

#### FR-ADMIN-004: Daily Game —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
- –°—Ç–∞—Ç—É—Å –≥—Ä—É–ø–ø
- –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
- –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫

### 4.6 –ú–æ–¥—É–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### FR-NOTIF-001: Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ–± –æ–ø–ª–∞—Ç–µ
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã
- –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- Daily Game –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

#### FR-NOTIF-002: –ê–¥–º–∏–Ω—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ù–æ–≤—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ß–µ–∫–∏ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- –û—Ç—á–µ—Ç—ã –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### 4.7 –ú–æ–¥—É–ª—å –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏

#### FR-I18N-001: –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ, –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ, –∏–≤—Ä–∏—Ç–∞
- –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –ø–æ Telegram
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã —è–∑—ã–∫–∞
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞—Ç –∏ –≤—Ä–µ–º–µ–Ω–∏

### 4.8 –ú–æ–¥—É–ª—å —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

#### FR-SYS-001: –ö–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/start` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- –ë—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ú–æ–∏ –±—Ä–æ–Ω–∏
- –ü–æ–º–æ—â—å

#### FR-SYS-002: –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
- `/admin_daily_game` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–æ–≤
- `/admin_daily_status` - —Å—Ç–∞—Ç—É—Å –≥—Ä—É–ø–ø
- `/debug_performance` - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

---

## 5. –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

### 5.1 –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

#### Backend
- **Runtime**: Bun v1.0+ (–±—ã—Å—Ç—Ä–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Node.js)
- **Framework**: Express.js v5.1.0
- **TypeScript**: v5.9.2 (—Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è)
- **Database**: PostgreSQL (—á–µ—Ä–µ–∑ Neon serverless)
- **ORM**: Drizzle ORM v0.44.5
- **Cache**: Redis (–¥–ª—è —Å–µ—Å—Å–∏–π –∏ –∫—ç—à–∞)

#### AI & ML
- **OpenAI API**: v5.1.1
  - GPT-4 –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏–π
  - Whisper –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏
- **AI SDK**: Vercel AI SDK v5.0.23

#### Messaging
- **Telegram Bot**: Telegraf v4.16.3
- **Bot Framework**: Custom PadelBot class

#### Background Jobs
- **Inngest**: v3.40.1
  - Event-driven —Ñ—É–Ω–∫—Ü–∏–∏
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è retry –ª–æ–≥–∏–∫–∞
  - –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

#### Frontend (–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å)
- **React**: v18.2.0
- **React Big Calendar**: v1.8.2
- **Moment.js**: v2.29.4

#### DevOps & Infrastructure
- **Deployment**: Railway (production)
- **CI/CD**: GitHub Actions
- **Monitoring**: Custom health checks
- **Containerization**: Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 5.2 –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### API Response Time
- GET –∑–∞–ø—Ä–æ—Å—ã: < 200ms
- POST –∑–∞–ø—Ä–æ—Å—ã: < 500ms
- Telegram webhook: < 3 —Å–µ–∫—É–Ω–¥—ã
- Voice processing: < 15 —Å–µ–∫—É–Ω–¥

#### Throughput
- –û–±—Ä–∞–±–æ—Ç–∫–∞ 100+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- 1000+ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –≤ –¥–µ–Ω—å
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 10,000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### Availability
- Uptime: 99.5%
- Graceful degradation –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- Automatic retry –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### 5.3 –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- Telegram ID –∫–∞–∫ primary identifier
- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- Session management —á–µ—Ä–µ–∑ Redis

#### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- Role-based access (admin, user)
- Telegram ID verification
- Admin commands protection

#### Data Protection
- HTTPS –¥–ª—è –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- Encrypted secrets –≤ .env
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Zod)
- SQL injection prevention (parametrized queries)

### 5.4 –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏

#### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- Stateless API design
- Database connection pooling
- Redis –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

#### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª—è—Ö
- Lazy loading –¥–∞–Ω–Ω—ã—Ö

---

## 6. –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´

### 6.1 –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    CLIENT LAYER                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ   Telegram   ‚îÇ  ‚îÇ   Web App    ‚îÇ  ‚îÇ  Admin Panel ‚îÇ ‚îÇ
‚îÇ  ‚îÇ     Bot      ‚îÇ  ‚îÇ  Mini App    ‚îÇ  ‚îÇ   Calendar   ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   API GATEWAY                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ    Express.js + CORS + Rate Limiting             ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                APPLICATION LAYER                        ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ  Telegram Bot ‚îÇ  ‚îÇ   REST API    ‚îÇ  ‚îÇ  Inngest    ‚îÇ ‚îÇ
‚îÇ ‚îÇ   Handlers    ‚îÇ  ‚îÇ   Routes      ‚îÇ  ‚îÇ  Functions  ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ ‚îÇ           BUSINESS LOGIC SERVICES                ‚îÇ  ‚îÇ
‚îÇ ‚îÇ  ‚Ä¢ Booking Service    ‚Ä¢ Payment Service          ‚îÇ  ‚îÇ
‚îÇ ‚îÇ  ‚Ä¢ Slot Service       ‚Ä¢ AI Voice Service         ‚îÇ  ‚îÇ
‚îÇ ‚îÇ  ‚Ä¢ Pricing Service    ‚Ä¢ Daily Game Service       ‚îÇ  ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  DATA LAYER                             ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ  PostgreSQL   ‚îÇ  ‚îÇ     Redis     ‚îÇ  ‚îÇ    Drizzle  ‚îÇ ‚îÇ
‚îÇ ‚îÇ    (Neon)     ‚îÇ  ‚îÇ   (Session)   ‚îÇ  ‚îÇ     ORM     ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              EXTERNAL INTEGRATIONS                      ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ ‚îÇ  OpenAI   ‚îÇ  ‚îÇ Telegram  ‚îÇ  ‚îÇ  Telegram Stars    ‚îÇ  ‚îÇ
‚îÇ ‚îÇ   API     ‚îÇ  ‚îÇ  Bot API  ‚îÇ  ‚îÇ     Payment        ‚îÇ  ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 6.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

#### Event-Driven Architecture (Inngest)
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á
- –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- Temporal scheduling

#### Repository Pattern
- –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –∫–æ–¥
- –õ–µ–≥–∫–∞—è —Å–º–µ–Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö

#### Service Layer
- –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

#### Middleware Pattern (Express)
- Authentication
- Validation
- Error handling
- Logging

### 6.3 –ö–ª—é—á–µ–≤—ã–µ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

#### 1. –ì–æ–ª–æ—Å–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```
User ‚Üí Voice Message ‚Üí Telegram Bot ‚Üí Webhook ‚Üí
‚Üí Inngest Function (voice/processing.requested) ‚Üí
‚Üí Voice AI Service (Whisper + GPT-4) ‚Üí
‚Üí Slot Service ‚Üí Booking Created ‚Üí
‚Üí Response to User
```

#### 2. –ë—ã—Å—Ç—Ä–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```
User ‚Üí Inline Button ‚Üí Telegram Bot ‚Üí Webhook ‚Üí
‚Üí Inngest Function (booking/instant.requested) ‚Üí
‚Üí Slot Service ‚Üí Booking Created ‚Üí
‚Üí Payment Buttons ‚Üí User
```

#### 3. Daily Game Flow
```
Admin ‚Üí Creates Plan ‚Üí Saved to DB ‚Üí
‚Üí Inngest Function (send-daily-game-invites) ‚Üí
‚Üí Fetches Users by Level ‚Üí
‚Üí Sends Invites via Telegram ‚Üí
‚Üí User Selects Slot ‚Üí
‚Üí Daily Game Group Created ‚Üí
‚Üí Payment ‚Üí Confirmation
```

#### 4. Payment Flow (Telegram Stars)
```
User ‚Üí Pay Button ‚Üí Telegram Stars Invoice ‚Üí
‚Üí pre_checkout_query ‚Üí Validation ‚Üí
‚Üí successful_payment ‚Üí Webhook ‚Üí
‚Üí Inngest Function (payment/stars.completed) ‚Üí
‚Üí Update Booking Status ‚Üí Confirmation
```

---

## 7. –ú–û–î–£–õ–ò –ò –ö–û–ú–ü–û–ù–ï–ù–¢–´

### 7.1 Telegram Bot Module

#### PadelBot Class (`src/bot/bot.ts`)
–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –±–æ—Ç–∞ —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π handlers –∏ middleware.

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- **StartHandler** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ `/start` –∏ –ø–æ–∏—Å–∫ —Å–ª–æ—Ç–æ–≤
- **BookingHandler** - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
- **PaymentHandler** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- **DailyGameHandler** - Daily Game –º–µ—Ö–∞–Ω–∏–∫–∞
- **I18nService** - –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å

**Actions (callback_data):**
- `ib:*` - instant booking
- `duration_*` - –≤—ã–±–æ—Ä –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `pay_booking_baht:*` - –æ–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏
- `pay_booking_stars:*` - –æ–ø–ª–∞—Ç–∞ Stars
- `daily_game_select:*` - –≤—ã–±–æ—Ä Daily Game —Å–ª–æ—Ç–∞
- `more_slots_*` - –ø–∞–≥–∏–Ω–∞—Ü–∏—è —Å–ª–æ—Ç–æ–≤

#### Button Service (`src/bot/services/button-service.ts`)
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Telegram inline keyboards.

**–ú–µ—Ç–æ–¥—ã:**
- `createMainMenuButtons()` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `createBookingButtons()` - –∫–Ω–æ–ø–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `createPaymentButtons()` - –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–ø–ª–∞—Ç—ã
- `createDailyGameButtons()` - Daily Game –∫–Ω–æ–ø–∫–∏

#### Message Service (`src/bot/services/message-service.ts`)
–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è Telegram —Å i18n.

#### Pricing Display Service (`src/bot/services/pricing-display-service.ts`)
–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–Ω –≤ —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç–∞—Ö.

### 7.2 Inngest Functions Module

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (`src/inngest/functions/`)
- `book-court-direct.ts` - —Å–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `cancel-booking.ts` - –æ—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `find-user.ts` - –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `get-user-bookings.ts` - –ø–æ–ª—É—á–µ–Ω–∏–µ –±—Ä–æ–Ω–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `process-voice-message.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–∞
- `send-daily-game-invites.ts` - Daily Game —Ä–∞—Å—Å—ã–ª–∫–∞
- `payment-events.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- `payment-completed.ts` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- `payment-timeout-handler.ts` - —Ç–∞–π–º–∞—É—Ç—ã

#### Inngest Client (`src/utils/inngest.ts`)
```typescript
export const inngest = new Inngest({
  id: 'padel-world-club',
  eventKey: process.env.INNGEST_EVENT_KEY
});
```

#### InngestResponseManager (`src/services/inngest-response-manager.ts`)
–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è sendAndWait –ø–∞—Ç—Ç–µ—Ä–Ω–∞.

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```typescript
const result = await InngestResponseManager.sendAndWait(
  'booking/instant.requested',
  { userId, bookingData, sessionId },
  { timeout: 15000 }
);
```

### 7.3 Services Module

#### Voice AI Service (`src/services/voice-ai.service.ts`)
–û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. Download audio file –æ—Ç Telegram
2. Convert to text (Whisper API)
3. Extract intent (GPT-4)
4. Parse booking params (date, time, court, duration)
5. Create booking –∏–ª–∏ return suggestions

#### Slot Service (`src/services/slot-service.ts`)
–ü–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤.

**–ú–µ—Ç–æ–¥—ã:**
- `getAvailableSlots(filters)` - –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `isSlotAvailable(courtId, date, time)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- `calculatePrice(courtType, duration, time)` - —Ä–∞—Å—á–µ—Ç —Ü–µ–Ω—ã

#### Pricing Service (`src/services/pricing-service.ts`)
–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ.

**–¶–µ–Ω–æ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏:**
- Peak hours (–≤—ã—Å–æ–∫–∞—è —Ü–µ–Ω–∞)
- Off-peak hours (–Ω–∏–∑–∫–∞—è —Ü–µ–Ω–∞)
- Weekend pricing
- Special events

#### Telegram Stars Service (`src/services/telegramStars.service.ts`)
–†–∞–±–æ—Ç–∞ —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏ Telegram Stars.

**API Methods:**
- `createInvoice()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–∞
- `refundPayment()` - –≤–æ–∑–≤—Ä–∞—Ç –ø–ª–∞—Ç–µ–∂–∞
- `getTransactionHistory()` - –∏—Å—Ç–æ—Ä–∏—è

### 7.4 Database Module

#### Schema Definition (`src/db/schema/`)
Drizzle ORM —Å—Ö–µ–º—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü:

- `user.ts` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `venue.ts` - –∫–ª—É–±—ã
- `court.ts` - –∫–æ—Ä—Ç—ã
- `booking.ts` - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- `payment.ts` - –ø–ª–∞—Ç–µ–∂–∏
- `dailyGameSelection.ts` - Daily Game
- `classDefinition.ts` - –∫–ª–∞—Å—Å—ã/—É—Ä–æ–∫–∏
- `tournament.ts` - —Ç—É—Ä–Ω–∏—Ä—ã

#### Repository Pattern
–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î —á–µ—Ä–µ–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

### 7.5 API Module

#### Routes (`src/api/routes/`)
- `/api/calendar` - –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π API
- `/health` - health checks
- `/api/bookings` - REST API –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π (–±—É–¥—É—â–µ–µ)

#### Inngest Endpoint (`/api/inngest`)
Endpoint –¥–ª—è Inngest dashboard –∏ webhook.

### 7.6 Admin Module

#### React Calendar App (`src/calendar-app/`)
Admin-–ø–∞–Ω–µ–ª—å –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏.

**Features:**
- React Big Calendar integration
- Drag-and-drop –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- Real-time updates
- Daily Game planning wizard

#### Telegram Mini App (`public/tma/`)
Web App –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –≤ Telegram.

---

## 8. –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### 8.1 Telegram Bot API

#### Webhook Setup
```
POST /webhook/telegram
{
  "update_id": 123456,
  "message": { ... },
  "callback_query": { ... }
}
```

**Supported Update Types:**
- `message` - —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∏ –≥–æ–ª–æ—Å–æ–≤—ã–µ
- `callback_query` - inline –∫–Ω–æ–ø–∫–∏
- `pre_checkout_query` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- `successful_payment` - —É—Å–ø–µ—à–Ω—ã–π –ø–ª–∞—Ç–µ–∂
- `web_app_data` - –¥–∞–Ω–Ω—ã–µ –æ—Ç Mini App

#### Telegram Mini App
Web App –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

**URL Pattern:**
```
https://t.me/YourBot/calendar?startapp=booking
```

### 8.2 OpenAI API

#### Whisper API (Voice-to-Text)
```typescript
const transcription = await openai.audio.transcriptions.create({
  file: audioFile,
  model: 'whisper-1',
  language: 'ru'
});
```

#### GPT-4 (Intent Extraction)
```typescript
const completion = await openai.chat.completions.create({
  model: 'gpt-4',
  messages: [
    { role: 'system', content: BOOKING_SYSTEM_PROMPT },
    { role: 'user', content: transcribedText }
  ]
});
```

### 8.3 Inngest Platform

#### Event Publishing
```typescript
await inngest.send({
  name: 'booking/instant.requested',
  data: { userId, bookingData, sessionId }
});
```

#### Function Definition
```typescript
inngest.createFunction(
  { id: 'book-court-direct' },
  { event: 'booking/instant.requested' },
  async ({ event, step }) => {
    // Business logic here
  }
);
```

### 8.4 PostgreSQL (Neon)

#### Connection String
```
DATABASE_URL="postgresql://user:pass@host/db?sslmode=require"
```

#### Drizzle ORM
```typescript
import { db } from './db';
import { bookings } from './db/schema';

const newBooking = await db.insert(bookings).values({
  userId,
  courtId,
  startTime,
  duration,
  status: 'pending_payment'
});
```

### 8.5 Redis (Session Store)

#### Session Management
```typescript
this.bot.use(session({
  defaultSession: () => ({
    messageHistory: [],
    starPayment: { awaitingPayment: false }
  })
}));
```

---

## 9. –ë–ê–ó–ê –î–ê–ù–ù–´–•

### 9.1 –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –¢–∞–±–ª–∏—Ü–∞ `users`
```sql
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  telegram_id BIGINT UNIQUE NOT NULL,
  username VARCHAR(255),
  first_name VARCHAR(255),
  last_name VARCHAR(255),
  language_code VARCHAR(10) DEFAULT 'ru',
  subscription_level VARCHAR(50) DEFAULT 'free',
  current_rating REAL DEFAULT 1000.0,
  game_level VARCHAR(50),
  is_blocked BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### –¢–∞–±–ª–∏—Ü–∞ `venues`
```sql
CREATE TABLE venues (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  address TEXT,
  phone VARCHAR(50),
  email VARCHAR(255),
  opening_hours JSONB,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### –¢–∞–±–ª–∏—Ü–∞ `courts`
```sql
CREATE TABLE courts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  venue_id UUID REFERENCES venues(id),
  court_type VARCHAR(50) NOT NULL, -- 'paddle' | 'tennis'
  court_name VARCHAR(255) NOT NULL,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### –¢–∞–±–ª–∏—Ü–∞ `court_pricing_policies`
```sql
CREATE TABLE court_pricing_policies (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  court_type VARCHAR(50) NOT NULL,
  name VARCHAR(255) NOT NULL,
  time_from TIME NOT NULL,
  time_to TIME NOT NULL,
  price_per_hour NUMERIC(10,2) NOT NULL,
  currency VARCHAR(10) DEFAULT 'THB',
  allowed_durations TEXT[], -- ['60', '90', '120']
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### –¢–∞–±–ª–∏—Ü–∞ `bookings`
```sql
CREATE TABLE bookings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  court_id UUID REFERENCES courts(id),
  start_time TIMESTAMP NOT NULL,
  end_time TIMESTAMP NOT NULL,
  duration_minutes INTEGER NOT NULL,
  status VARCHAR(50) DEFAULT 'pending_payment',
  total_price NUMERIC(10,2),
  currency VARCHAR(10) DEFAULT 'THB',
  booking_type VARCHAR(50) DEFAULT 'regular', -- 'regular' | 'daily_game'
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_bookings_court_time ON bookings(court_id, start_time);
CREATE INDEX idx_bookings_user ON bookings(user_id);
CREATE INDEX idx_bookings_status ON bookings(status);
```

#### –¢–∞–±–ª–∏—Ü–∞ `payments`
```sql
CREATE TABLE payments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  booking_id UUID REFERENCES bookings(id),
  user_id UUID REFERENCES users(id),
  amount NUMERIC(10,2) NOT NULL,
  currency VARCHAR(10) NOT NULL,
  payment_method VARCHAR(50) NOT NULL, -- 'telegram_stars' | 'cash' | 'bank_transfer'
  payment_status VARCHAR(50) DEFAULT 'pending',
  telegram_payment_charge_id VARCHAR(255),
  telegram_invoice_payload TEXT,
  receipt_url TEXT,
  admin_confirmed_by UUID REFERENCES users(id),
  admin_confirmation_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### –¢–∞–±–ª–∏—Ü–∞ `daily_game_selections`
```sql
CREATE TABLE daily_game_selections (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  game_date DATE NOT NULL,
  selected_time TIME NOT NULL,
  court_type VARCHAR(50) NOT NULL,
  player_level VARCHAR(50) NOT NULL,
  status VARCHAR(50) DEFAULT 'invited', -- 'invited' | 'selected' | 'confirmed' | 'cancelled'
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### –¢–∞–±–ª–∏—Ü–∞ `daily_game_groups`
```sql
CREATE TABLE daily_game_groups (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  game_date DATE NOT NULL,
  selected_time TIME NOT NULL,
  court_type VARCHAR(50) NOT NULL,
  player_level VARCHAR(50) NOT NULL,
  player_ids UUID[] DEFAULT '{}',
  status VARCHAR(50) DEFAULT 'forming', -- 'forming' | 'ready' | 'paid' | 'completed'
  total_amount NUMERIC(10,2),
  currency VARCHAR(10) DEFAULT 'THB',
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### –¢–∞–±–ª–∏—Ü–∞ `daily_game_admin_schedule`
```sql
CREATE TABLE daily_game_admin_schedule (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  admin_id UUID REFERENCES users(id),
  game_date DATE NOT NULL,
  selected_time TIME NOT NULL,
  court_id UUID REFERENCES courts(id),
  court_type VARCHAR(50) NOT NULL,
  player_level VARCHAR(50) NOT NULL,
  duration_minutes INTEGER NOT NULL,
  price_per_person NUMERIC(10,2),
  currency VARCHAR(10) DEFAULT 'THB',
  status VARCHAR(50) DEFAULT 'planned', -- 'planned' | 'sent' | 'cancelled'
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 9.2 –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```sql
-- Bookings
CREATE INDEX idx_bookings_court_time ON bookings(court_id, start_time);
CREATE INDEX idx_bookings_user ON bookings(user_id);
CREATE INDEX idx_bookings_status ON bookings(status);

-- Daily Game
CREATE INDEX idx_daily_game_date_time ON daily_game_selections(game_date, selected_time);
CREATE INDEX idx_daily_game_user ON daily_game_selections(user_id);
CREATE INDEX idx_daily_game_groups_date ON daily_game_groups(game_date, selected_time);

-- Users
CREATE INDEX idx_users_telegram_id ON users(telegram_id);
CREATE INDEX idx_users_game_level ON users(game_level);

-- Payments
CREATE INDEX idx_payments_booking ON payments(booking_id);
CREATE INDEX idx_payments_status ON payments(payment_status);
```

### 9.3 –ú–∏–≥—Ä–∞—Ü–∏–∏

#### Drizzle Kit
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
bun run db:generate

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
bun run db:migrate

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ë–î —á–µ—Ä–µ–∑ UI
bun run db:studio
```

---

## 10. –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### 10.1 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### Telegram ID Verification
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Telegram
const user = ctx.from;
if (!user || !user.id) {
  throw new Error('Unauthorized');
}
```

#### Admin Protection
```typescript
const ADMIN_IDS = [123456789, 987654321];

function isAdmin(telegramId: number): boolean {
  return ADMIN_IDS.includes(telegramId);
}
```

### 10.2 –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### Zod Schemas
```typescript
import { z } from 'zod';

const BookingSchema = z.object({
  courtId: z.string().uuid(),
  date: z.string().regex(/^\d{4}-\d{2}-\d{2}$/),
  time: z.string().regex(/^\d{2}:\d{2}$/),
  duration: z.number().int().min(60).max(120)
});
```

### 10.3 SQL Injection Prevention

#### Parameterized Queries (Drizzle ORM)
```typescript
// ‚úÖ –ë–ï–ó–û–ü–ê–°–ù–û
const bookings = await db
  .select()
  .from(bookingsTable)
  .where(eq(bookingsTable.userId, userId));

// ‚ùå –û–ü–ê–°–ù–û (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ)
// const bookings = await db.execute(`
//   SELECT * FROM bookings WHERE user_id = '${userId}'
// `);
```

### 10.4 Secrets Management

#### Environment Variables
```env
# –ö–†–ò–¢–ò–ß–ù–û: –ù–ï –ö–û–ú–ò–¢–ò–¢–ò–¢–¨ –í GIT!
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
OPENAI_API_KEY=sk-...
DATABASE_URL=postgresql://...
INNGEST_EVENT_KEY=...
INNGEST_SIGNING_KEY=...
```

#### .gitignore
```
.env
.env.local
.env.production
secrets/
```

### 10.5 Rate Limiting

#### Telegram Webhooks
- Max 30 requests/second per bot
- Graceful handling 429 Too Many Requests

#### API Endpoints
```typescript
import rateLimit from 'express-rate-limit';

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: 100 // limit each IP to 100 requests per windowMs
});

app.use('/api/', limiter);
```

---

## 11. –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –ò –ú–ê–°–®–¢–ê–ë–ò–†–£–ï–ú–û–°–¢–¨

### 11.1 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

#### Database Indexes
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `court_id`, `start_time` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Å–ª–æ—Ç–æ–≤
- Composite –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö JOIN –æ–ø–µ—Ä–∞—Ü–∏–π

#### Query Optimization
```typescript
// ‚ùå N+1 –∑–∞–ø—Ä–æ—Å–æ–≤
for (const booking of bookings) {
  const court = await db.select().from(courts).where(eq(courts.id, booking.courtId));
}

// ‚úÖ –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å —Å JOIN
const bookingsWithCourts = await db
  .select()
  .from(bookings)
  .leftJoin(courts, eq(bookings.courtId, courts.id));
```

### 11.2 –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

#### Redis Cache
```typescript
// –ö—ç—à –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ 5 –º–∏–Ω—É—Ç
const CACHE_KEY = `slots:${courtType}:${date}`;
const cached = await redis.get(CACHE_KEY);

if (cached) return JSON.parse(cached);

const slots = await fetchAvailableSlots();
await redis.setex(CACHE_KEY, 300, JSON.stringify(slots));
```

### 11.3 –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

#### Inngest –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- Voice processing (15+ —Å–µ–∫—É–Ω–¥) - –≤ —Ñ–æ–Ω–µ
- Daily Game —Ä–∞—Å—Å—ã–ª–∫–∞ - –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞
- Payment timeouts - scheduled task

### 11.4 –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

#### Stateless Design
- –ù–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏
- Session –≤ Redis
- –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å multiple instances

#### Load Balancing (Railway)
- Automatic load balancing
- Health checks

---

## 12. –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï

### 12.1 Production Environment (Railway)

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Railway account
- PostgreSQL database (Neon)
- Redis instance
- Environment variables

#### Deployment Steps
```bash
# 1. Setup Railway CLI
npm install -g railway

# 2. Login
railway login

# 3. Link project
railway link

# 4. Set environment variables
railway variables set BOT_TOKEN=...
railway variables set DATABASE_URL=...

# 5. Deploy
railway up

# 6. Setup webhook
curl -X POST https://api.telegram.org/bot<TOKEN>/setWebhook \
  -d "url=https://your-app.railway.app/webhook/telegram"
```

#### Railway Configuration (`railway.toml`)
```toml
[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "bun run start"
healthcheckPath = "/health"
healthcheckTimeout = 30
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
```

### 12.2 Development Environment

#### Local Setup
```bash
# 1. Clone repository
git clone https://github.com/yourusername/padel-world-club.git
cd padel-world-club

# 2. Install dependencies
bun install

# 3. Setup .env file
cp example.env .env
# Edit .env with your credentials

# 4. Run database migrations
bun run db:migrate

# 5. Start development server
bun run dev

# 6. (Optional) Start Inngest dev server
bun run inngest
```

### 12.3 Docker Setup (Optional)

#### Dockerfile
```dockerfile
FROM oven/bun:1 as base
WORKDIR /app

# Install dependencies
COPY package.json bun.lockb ./
RUN bun install --frozen-lockfile

# Copy source code
COPY . .

# Expose port
EXPOSE 3000

# Start application
CMD ["bun", "run", "start"]
```

#### docker-compose.yml
```yaml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - BOT_TOKEN=${BOT_TOKEN}
      - DATABASE_URL=${DATABASE_URL}
    depends_on:
      - postgres
      - redis

  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: padel_club
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    volumes:
      - pgdata:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    volumes:
      - redisdata:/data

volumes:
  pgdata:
  redisdata:
```

---

## 13. –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### 13.1 Unit Tests

#### Framework: Vitest
```typescript
import { describe, it, expect } from 'vitest';
import { calculatePrice } from '../services/pricing-service';

describe('PricingService', () => {
  it('should calculate correct price for peak hours', () => {
    const price = calculatePrice('paddle', 60, '18:00');
    expect(price).toBe(800);
  });

  it('should apply discount for off-peak hours', () => {
    const price = calculatePrice('paddle', 60, '10:00');
    expect(price).toBe(600);
  });
});
```

#### Running Tests
```bash
# Run all tests
bun test

# Watch mode
bun test:watch

# Coverage report
bun test:coverage
```

### 13.2 Integration Tests

#### Database Tests
```typescript
import { db } from '../db';
import { bookings } from '../db/schema';

describe('Booking Repository', () => {
  it('should create booking successfully', async () => {
    const booking = await db.insert(bookings).values({
      userId: 'test-user-id',
      courtId: 'test-court-id',
      startTime: new Date(),
      duration: 60
    });

    expect(booking).toBeDefined();
  });
});
```

#### Telegram Bot Tests
```typescript
import { PadelBot } from '../bot/bot';

describe('Telegram Bot', () => {
  it('should handle /start command', async () => {
    const bot = new PadelBot(process.env.BOT_TOKEN);

    // Mock context
    const ctx = createMockContext({ command: 'start' });

    await bot.handleStart(ctx);

    expect(ctx.reply).toHaveBeenCalled();
  });
});
```

### 13.3 E2E Tests

#### Full Booking Flow
```typescript
describe('Booking E2E Flow', () => {
  it('should complete booking from search to payment', async () => {
    // 1. Search slots
    const slots = await searchAvailableSlots({ courtType: 'paddle' });
    expect(slots.length).toBeGreaterThan(0);

    // 2. Create booking
    const booking = await createBooking(slots[0]);
    expect(booking.status).toBe('pending_payment');

    // 3. Process payment
    const payment = await processPayment(booking.id);
    expect(payment.status).toBe('completed');

    // 4. Verify booking status
    const updatedBooking = await getBooking(booking.id);
    expect(updatedBooking.status).toBe('confirmed');
  });
});
```

### 13.4 Performance Tests

#### Autocannon (Load Testing)
```bash
# Install autocannon
bun add -d autocannon

# Run load test
bunx autocannon -c 100 -d 30 http://localhost:3000/health
```

### 13.5 Test Coverage Requirements

- **Unit Tests**: 85%+ coverage
- **Integration Tests**: Critical paths
- **E2E Tests**: Main user flows
- **Performance Tests**: Before production deploy

---

## 14. –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –õ–û–ì–ò–†–û–í–ê–ù–ò–ï

### 14.1 Logging

#### Custom Logger (`src/utils/logger.ts`)
```typescript
export const logger = {
  info: (message: string, meta?: any) => {
    console.log(`[INFO] ${message}`, meta);
  },
  error: (message: string, error?: Error) => {
    console.error(`[ERROR] ${message}`, error);
  },
  warn: (message: string, meta?: any) => {
    console.warn(`[WARN] ${message}`, meta);
  }
};
```

#### Log Levels
- **INFO**: –û–±—ã—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- **WARN**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)
- **ERROR**: –û—à–∏–±–∫–∏ (—Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è)
- **DEBUG**: –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ dev)

### 14.2 Health Checks

#### Endpoints
```typescript
// Simple health check
app.get('/health', (req, res) => {
  res.json({
    status: 'ok',
    timestamp: new Date().toISOString(),
    uptime: process.uptime()
  });
});

// Detailed health check
app.get('/health/detailed', async (req, res) => {
  const dbStatus = await checkDatabase();
  const redisStatus = await checkRedis();

  res.json({
    status: 'ok',
    database: dbStatus,
    redis: redisStatus,
    uptime: process.uptime()
  });
});
```

### 14.3 Error Tracking

#### Sentry Integration (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```typescript
import * as Sentry from '@sentry/node';

Sentry.init({
  dsn: process.env.SENTRY_DSN,
  environment: process.env.NODE_ENV
});

// Error handler
app.use(Sentry.Handlers.errorHandler());
```

### 14.4 Metrics

#### Custom Metrics
- Booking creation rate
- Payment success rate
- Voice processing time
- Webhook response time
- Daily active users

---

## 15. –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

### 15.1 API Documentation

#### OpenAPI/Swagger
```typescript
import swaggerJsdoc from 'swagger-jsdoc';
import swaggerUi from 'swagger-ui-express';

const swaggerOptions = {
  definition: {
    openapi: '3.0.0',
    info: {
      title: 'Padel World Club API',
      version: '1.0.0',
      description: 'API for padel club management'
    }
  },
  apis: ['./src/api/routes/*.ts']
};

const swaggerSpec = swaggerJsdoc(swaggerOptions);
app.use('/api-docs', swaggerUi.serve, swaggerUi.setup(swaggerSpec));
```

### 15.2 Code Documentation

#### JSDoc Comments
```typescript
/**
 * –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ç–∞
 * @param userId - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
 * @param courtId - ID –∫–æ—Ä—Ç–∞
 * @param startTime - –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞
 * @param duration - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö
 * @returns Promise<Booking>
 */
async function createBooking(
  userId: string,
  courtId: string,
  startTime: Date,
  duration: number
): Promise<Booking> {
  // Implementation
}
```

---

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–î–∞–Ω–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–¥–µ–ª-–∫–ª—É–±–æ–º —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞:

1. **–ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–π UX** - –≥–æ–ª–æ—Å–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ AI
2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –º–∏–Ω–∏–º—É–º —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –æ—Ç –º–∞–ª—ã—Ö –∫–ª—É–±–æ–≤ –¥–æ –∫—Ä—É–ø–Ω—ã—Ö —Ü–µ–Ω—Ç—Ä–æ–≤
4. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º retry
5. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫** - Bun, TypeScript, Drizzle, Inngest

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–¥ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–∞–¥–µ–ª-–∫–ª—É–±–æ–≤.

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-11-21
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0
**–ê–≤—Ç–æ—Ä**: Claude AI Assistant
