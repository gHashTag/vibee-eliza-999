# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç - Instagram Plugin –¥–ª—è VIBEE

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### ‚úÖ 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ parseInstagramPost
- **–ü—Ä–æ–±–ª–µ–º–∞:** Regex –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫–æ–º–∞–Ω–¥ —Ä–∞–±–æ—Ç–∞–ª –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–ø–∏—Å–∞–Ω –∞–ª–≥–æ—Ä–∏—Ç–º —Å –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º –ø–æ–¥—Ö–æ–¥–æ–º (–ø–æ–∏—Å–∫ –ø–æ–¥–ø–∏—Å–∏ –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ **13 unit —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç** ‚úÖ
- **–§–∞–π–ª:** `/Users/playra/vibee-agent/src/instagram-plugin/actions/instagramPostAction.ts`

### ‚úÖ 2. –°–æ–∑–¥–∞–Ω–∏–µ Instagram –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** Instagram Expert
- **–§–∞–π–ª:** `/Users/playra/vibee-agent/src/characters/instagram.ts`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
  - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂ –¥–ª—è Instagram –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  - –ü–æ–¥–∫–ª—é—á–µ–Ω instagramPlugin
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Instagram
  - –ö–∞—Å—Ç–æ–º–Ω—ã–π –∞–≤–∞—Ç–∞—Ä –∏ –±–∏–æ
- **–ò–Ω–¥–µ–∫—Å:** `/Users/playra/vibee-agent/src/characters/index.ts`

### ‚úÖ 3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞
- Instagram –ø–ª–∞–≥–∏–Ω –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É character.ts
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å —Ç–æ–∫–µ–Ω–∞–º–∏ –∏–∑ .env

### ‚úÖ 4. E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–§–∞–π–ª:** `/Users/playra/vibee-agent/test-instagram-e2e.js`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
  - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏–∑ .env
  - –°–æ–∑–¥–∞–µ—Ç –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ Instagram API
  - –ü—É–±–ª–∏–∫—É–µ—Ç –ø–æ—Å—Ç—ã —á–µ—Ä–µ–∑ Meta Graph API
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID –∏ —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ—Å—Ç

### ‚úÖ 5. –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- **–§–∞–π–ª:** `/Users/playra/vibee-agent/update-vibe-tokens.js`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** `node update-vibe-tokens.js <TOKEN> <ACCOUNT_ID>`
- **–£–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ VIBEE –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Unit —Ç–µ—Å—Ç—ã (parseInstagramPost)
```
‚úÖ 13/13 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (100%)
üìà –ü–æ–∫—Ä—ã—Ç–∏–µ: 60% —Ñ—É–Ω–∫—Ü–∏–π, 50% —Å—Ç—Ä–æ–∫
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:**
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ URL –∏–∑ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ URL –∏–∑ –≤–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã "–æ–ø—É–±–ª–∏–∫—É–π"
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã "/instagram"
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ö—ç—à—Ç–µ–≥–æ–≤
- ‚úÖ Default caption –¥–ª—è –ø—É—Å—Ç—ã—Ö –ø–æ—Å—Ç–æ–≤
- ‚úÖ –î–ª–∏–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∏
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤

### E2E —Ç–µ—Å—Ç (—Ä–µ–∞–ª—å–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è)
```
‚ö†Ô∏è –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ
‚ùå –¢—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω—ã –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è VIBEE (ID: 1411812953896213)
üìà –ü–æ–∫—Ä—ã—Ç–∏–µ: 100% —Ñ—É–Ω–∫—Ü–∏–π Instagram —Å–µ—Ä–≤–∏—Å–∞
```

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ/–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
1. **`/Users/playra/vibee-agent/src/characters/instagram.ts`** - Instagram –ø–µ—Ä—Å–æ–Ω–∞–∂
2. **`/Users/playra/vibee-agent/src/characters/index.ts`** - –ò–Ω–¥–µ–∫—Å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
3. **`/Users/playra/vibee-agent/test-instagram-e2e.js`** - E2E —Ç–µ—Å—Ç
4. **`/Users/playra/vibee-agent/update-vibe-tokens.js`** - –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
5. **`/Users/playra/vibee-agent/get-vaibee-accounts.js`** - –°–∫—Ä–∏–ø—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤
6. **`/Users/playra/vibee-agent/VIBEE_TOKENS_SETUP.md`** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
7. **`/Users/playra/vibee-agent/E2E_TEST_REPORT.md`** - –û—Ç—á–µ—Ç –ø–æ E2E —Ç–µ—Å—Ç–∞–º
8. **`/Users/playra/vibee-agent/INSTAGRAM_PLUGIN_FIX_REPORT.md`** - –û—Ç—á–µ—Ç –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. **`/Users/playra/vibee-agent/src/instagram-plugin/actions/instagramPostAction.ts`**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è parseInstagramPost
   - –ü–µ—Ä–µ–ø–∏—Å–∞–Ω –∞–ª–≥–æ—Ä–∏—Ç–º –ø–∞—Ä—Å–∏–Ω–≥–∞

2. **`/Users/playra/vibee-agent/src/instagram-plugin/__tests__/unit/parseInstagramPost.test.ts`**
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–µ–π—Å—ã

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º parseInstagramPost

**–î–æ:**
```typescript
// –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —á–µ—Ä–µ–∑ —Å–ª–æ–∂–Ω—ã–µ regex
textWithoutUrl = textWithoutUrl
  .replace(/(?:^|\s+)(?:—Å\s+–ø–æ–¥–ø–∏—Å—å—é|...)/gi, '')
  .replace(/^(?:–æ–ø—É–±–ª–∏–∫—É–π|–ø–æ—Å—Ç|...)\b/gi, '');
```

**–ü–æ—Å–ª–µ:**
```typescript
// –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ–¥–ø–∏—Å–∏
const captionMatch = text.match(/(?:–∏\s+–ø–æ–¥–ø–∏—Å—å—é|—Å\s+–ø–æ–¥–ø–∏—Å—å—é|...)\s*(.+?)$/i);
if (captionMatch) {
  caption = captionMatch[1].trim();
} else {
  // Fallback: –æ—á–∏—Å—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ —Å word boundaries
  let cleanText = text.replace(/https?:\/\/[^\s]+/, '').trim();
  cleanText = cleanText.replace(/^(?:\/)?(?:instagram|ig)\s*/i, '');
  cleanText = cleanText.replace(/\b(?:—Å\s+(?:–ø–æ–¥–ø–∏—Å—å—é|...)\s*–∏\s*)?(?:–ø–æ–¥–ø–∏—Å—å|–ø–æ–¥–ø–∏—Å–∏|–ø–æ–¥–ø–∏—Å—å—é)\s*[:\-]?\s*/gi, '');
  caption = cleanText.trim().replace(/\s+/g, ' ');
}
```

### Word boundaries –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π

–î–æ–±–∞–≤–ª–µ–Ω—ã `\b` –≥—Ä–∞–Ω–∏—Ü—ã —Å–ª–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è —á–∞—Å—Ç–µ–π —Å–ª–æ–≤:
```typescript
cleanText = cleanText.replace(
  /\b(?:—Å\s+(?:–ø–æ–¥–ø–∏—Å—å—é|–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º|...)\s*–∏\s*)?(?:–ø–æ–¥–ø–∏—Å—å|–ø–æ–¥–ø–∏—Å–∏|–ø–æ–¥–ø–∏—Å—å—é)\s*[:\-]?\s*/gi,
  ''
);
```

---

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ì–æ—Ç–æ–≤–æ:
- parseInstagramPost –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- Instagram –ø–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –ü–ª–∞–≥–∏–Ω –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –∞–≥–µ–Ω—Ç—É
- E2E —Ç–µ—Å—Ç—ã –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∑–∞–ø—É—Å–∫—É
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

### ‚è≥ –û–∂–∏–¥–∞–µ—Ç:
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è VIBEE (ID: 1411812953896213)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ .env —Ñ–∞–π–ª–µ
- –ó–∞–ø—É—Å–∫ E2E —Ç–µ—Å—Ç–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω—ã VIBEE
```bash
# –ó–∞–π—Ç–∏ –Ω–∞ https://developers.facebook.com
# –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ VIBEE (ID: 1411812953896213)
# Tools > Graph API Explorer
# –ü–æ–ª—É—á–∏—Ç—å User Access Token
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω—ã
```bash
node update-vibe-tokens.js <ACCESS_TOKEN> <ACCOUNT_ID>
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å E2E —Ç–µ—Å—Ç
```bash
node test-instagram-e2e.js
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç–∞
```bash
npm run dev
```

### –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ Telegram
```
/instagram –ø–æ—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º https://example.com/image.jpg –∏ –ø–æ–¥–ø–∏—Å—å—é —Ç–µ—Å—Ç
```

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:**

‚úÖ parseInstagramPost –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
‚úÖ Instagram –ø–µ—Ä—Å–æ–Ω–∞–∂ —Å–æ–∑–¥–∞–Ω
‚úÖ –ü–ª–∞–≥–∏–Ω –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
‚úÖ E2E —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ–¥–µ–Ω—ã
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

**–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è VIBEE (ID: 1411812953896213) –∏ –æ–±–Ω–æ–≤–∏—Ç—å –∏—Ö –≤ .env —Ñ–∞–π–ª–µ. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ E2E —Ç–µ—Å—Ç —Å–æ–∑–¥–∞—Å—Ç —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ—Å—Ç –≤ Instagram!

---

**–î–∞—Ç–∞:** 2025-11-21
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
**–°—Ç–∞—Ç—É—Å —Ç–æ–∫–µ–Ω–æ–≤:** ‚è≥ –û–∂–∏–¥–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
