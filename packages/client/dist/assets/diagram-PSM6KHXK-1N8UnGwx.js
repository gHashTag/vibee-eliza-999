var he=Object.defineProperty;var h=(e,a)=>he(e,"name",{value:a,configurable:!0});import{_ as C,F as te,G as ae,K as pe,e as ue,l as J,aZ as B,d as Y,b as fe,a as me,q as ge,t as ye,g as Se,s as ve,H as xe,a_ as be,z as we}from"./mermaid.core-v0mniV2G.js";import{s as Ce}from"./chunk-QN33PNHL-D53xRxwU.js";import{p as Te}from"./chunk-4BX2VUAB-qONXbVpz.js";import{p as Le}from"./treemap-KMMF4GRG-DfEvHGLD.js";import{b as O}from"./defaultLocale-BAh5bDOb.js";import{o as U}from"./ordinal-BCXkz34N.js";import"./main-xihm1dng.js";import"./main-CtJHLXVr.js";import"./react-vendor-BZsmEqKa.js";import"./ui-vendor-B7JxFfFk.js";import"./_baseUniq-DJt29m8l.js";import"./_basePickBy-DBgqbEyA.js";import"./clone-WCuJOSH_.js";import"./init-GRbUuopv.js";function $e(e){var a=0,n=e.children,l=n&&n.length;if(!l)a=1;else for(;--l>=0;)a+=n[l].value;e.value=a}h($e,"count");function Ae(){return this.eachAfter($e)}h(Ae,"node_count");function Fe(e,a){let n=-1;for(const l of this)e.call(a,l,++n,this);return this}h(Fe,"node_each");function ke(e,a){for(var n=this,l=[n],o,i,d=-1;n=l.pop();)if(e.call(a,n,++d,this),o=n.children)for(i=o.length-1;i>=0;--i)l.push(o[i]);return this}h(ke,"node_eachBefore");function Ne(e,a){for(var n=this,l=[n],o=[],i,d,p,g=-1;n=l.pop();)if(o.push(n),i=n.children)for(d=0,p=i.length;d<p;++d)l.push(i[d]);for(;n=o.pop();)e.call(a,n,++g,this);return this}h(Ne,"node_eachAfter");function Me(e,a){let n=-1;for(const l of this)if(e.call(a,l,++n,this))return l}h(Me,"node_find");function _e(e){return this.eachAfter(function(a){for(var n=+e(a.data)||0,l=a.children,o=l&&l.length;--o>=0;)n+=l[o].value;a.value=n})}h(_e,"node_sum");function ze(e){return this.eachBefore(function(a){a.children&&a.children.sort(e)})}h(ze,"node_sort");function Ve(e){for(var a=this,n=De(a,e),l=[a];a!==n;)a=a.parent,l.push(a);for(var o=l.length;e!==n;)l.splice(o,0,e),e=e.parent;return l}h(Ve,"node_path");function De(e,a){if(e===a)return e;var n=e.ancestors(),l=a.ancestors(),o=null;for(e=n.pop(),a=l.pop();e===a;)o=e,e=n.pop(),a=l.pop();return o}h(De,"leastCommonAncestor");function Pe(){for(var e=this,a=[e];e=e.parent;)a.push(e);return a}h(Pe,"node_ancestors");function Be(){return Array.from(this)}h(Be,"node_descendants");function Re(){var e=[];return this.eachBefore(function(a){a.children||e.push(a)}),e}h(Re,"node_leaves");function Ee(){var e=this,a=[];return e.each(function(n){n!==e&&a.push({source:n.parent,target:n})}),a}h(Ee,"node_links");function*We(){var e=this,a,n=[e],l,o,i;do for(a=n.reverse(),n=[];e=a.pop();)if(yield e,l=e.children)for(o=0,i=l.length;o<i;++o)n.push(l[o]);while(n.length)}h(We,"node_iterator");function Q(e,a){e instanceof Map?(e=[void 0,e],a===void 0&&(a=Oe)):a===void 0&&(a=Ie);for(var n=new Z(e),l,o=[n],i,d,p,g;l=o.pop();)if((d=a(l.data))&&(g=(d=Array.from(d)).length))for(l.children=d,p=g-1;p>=0;--p)o.push(i=d[p]=new Z(d[p])),i.parent=l,i.depth=l.depth+1;return n.eachBefore(qe)}h(Q,"hierarchy");function He(){return Q(this).eachBefore(Ge)}h(He,"node_copy");function Ie(e){return e.children}h(Ie,"objectChildren");function Oe(e){return Array.isArray(e)?e[1]:null}h(Oe,"mapChildren");function Ge(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}h(Ge,"copyData");function qe(e){var a=0;do e.height=a;while((e=e.parent)&&e.height<++a)}h(qe,"computeHeight");function Z(e){this.data=e,this.depth=this.height=0,this.parent=null}h(Z,"Node");Z.prototype=Q.prototype={constructor:Z,count:Ae,each:Fe,eachAfter:Ne,eachBefore:ke,find:Me,sum:_e,sort:ze,path:Ve,ancestors:Pe,descendants:Be,leaves:Re,links:Ee,copy:He,[Symbol.iterator]:We};function Xe(e){if(typeof e!="function")throw new Error;return e}h(Xe,"required");function G(){return 0}h(G,"constantZero");function q(e){return function(){return e}}h(q,"constant");function je(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}h(je,"roundNode");function Ye(e,a,n,l,o){for(var i=e.children,d,p=-1,g=i.length,c=e.value&&(l-a)/e.value;++p<g;)d=i[p],d.y0=n,d.y1=o,d.x0=a,d.x1=a+=d.value*c}h(Ye,"treemapDice");function Ze(e,a,n,l,o){for(var i=e.children,d,p=-1,g=i.length,c=e.value&&(o-n)/e.value;++p<g;)d=i[p],d.x0=a,d.x1=l,d.y0=n,d.y1=n+=d.value*c}h(Ze,"treemapSlice");var Ke=(1+Math.sqrt(5))/2;function Ue(e,a,n,l,o,i){for(var d=[],p=a.children,g,c,u=0,w=0,r=p.length,b,v,x=a.value,f,y,M,N,D,E,_;u<r;){b=o-n,v=i-l;do f=p[w++].value;while(!f&&w<r);for(y=M=f,E=Math.max(v/b,b/v)/(x*e),_=f*f*E,D=Math.max(M/_,_/y);w<r;++w){if(f+=c=p[w].value,c<y&&(y=c),c>M&&(M=c),_=f*f*E,N=Math.max(M/_,_/y),N>D){f-=c;break}D=N}d.push(g={value:f,dice:b<v,children:p.slice(u,w)}),g.dice?Ye(g,n,l,o,x?l+=v*f/x:i):Ze(g,n,l,x?n+=b*f/x:o,i),x-=f,u=w}return d}h(Ue,"squarifyRatio");const Je=h((function e(a){function n(l,o,i,d,p){Ue(a,l,o,i,d,p)}return h(n,"squarify"),n.ratio=function(l){return e((l=+l)>1?l:1)},n}),"custom")(Ke);function Qe(){var e=Je,a=!1,n=1,l=1,o=[0],i=G,d=G,p=G,g=G,c=G;function u(r){return r.x0=r.y0=0,r.x1=n,r.y1=l,r.eachBefore(w),o=[0],a&&r.eachBefore(je),r}h(u,"treemap");function w(r){var b=o[r.depth],v=r.x0+b,x=r.y0+b,f=r.x1-b,y=r.y1-b;f<v&&(v=f=(v+f)/2),y<x&&(x=y=(x+y)/2),r.x0=v,r.y0=x,r.x1=f,r.y1=y,r.children&&(b=o[r.depth+1]=i(r)/2,v+=c(r)-b,x+=d(r)-b,f-=p(r)-b,y-=g(r)-b,f<v&&(v=f=(v+f)/2),y<x&&(x=y=(x+y)/2),e(r,v,x,f,y))}return h(w,"positionNode"),u.round=function(r){return arguments.length?(a=!!r,u):a},u.size=function(r){return arguments.length?(n=+r[0],l=+r[1],u):[n,l]},u.tile=function(r){return arguments.length?(e=Xe(r),u):e},u.padding=function(r){return arguments.length?u.paddingInner(r).paddingOuter(r):u.paddingInner()},u.paddingInner=function(r){return arguments.length?(i=typeof r=="function"?r:q(+r),u):i},u.paddingOuter=function(r){return arguments.length?u.paddingTop(r).paddingRight(r).paddingBottom(r).paddingLeft(r):u.paddingTop()},u.paddingTop=function(r){return arguments.length?(d=typeof r=="function"?r:q(+r),u):d},u.paddingRight=function(r){return arguments.length?(p=typeof r=="function"?r:q(+r),u):p},u.paddingBottom=function(r){return arguments.length?(g=typeof r=="function"?r:q(+r),u):g},u.paddingLeft=function(r){return arguments.length?(c=typeof r=="function"?r:q(+r),u):c},u}h(Qe,"treemap");var ne=class{static{h(this,"TreeMapDB")}constructor(){this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.setAccTitle=fe,this.getAccTitle=me,this.setDiagramTitle=ge,this.getDiagramTitle=ye,this.getAccDescription=Se,this.setAccDescription=ve}static{C(this,"TreeMapDB")}getNodes(){return this.nodes}getConfig(){const e=xe,a=ae();return te({...e.treemap,...a.treemap??{}})}addNode(e,a){this.nodes.push(e),this.levels.set(e,a),a===0&&(this.outerNodes.push(e),this.root??=e)}getRoot(){return{name:"",children:this.outerNodes}}addClass(e,a){const n=this.classes.get(e)??{id:e,styles:[],textStyles:[]},l=a.replace(/\\,/g,"§§§").replace(/,/g,";").replace(/§§§/g,",").split(";");l&&l.forEach(o=>{be(o)&&(n?.textStyles?n.textStyles.push(o):n.textStyles=[o]),n?.styles?n.styles.push(o):n.styles=[o]}),this.classes.set(e,n)}getClasses(){return this.classes}getStylesForClass(e){return this.classes.get(e)?.styles??[]}clear(){we(),this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.root=void 0}};function le(e){if(!e.length)return[];const a=[],n=[];return e.forEach(l=>{const o={name:l.name,children:l.type==="Leaf"?void 0:[]};for(o.classSelector=l?.classSelector,l?.cssCompiledStyles&&(o.cssCompiledStyles=[l.cssCompiledStyles]),l.type==="Leaf"&&l.value!==void 0&&(o.value=l.value);n.length>0&&n[n.length-1].level>=l.level;)n.pop();if(n.length===0)a.push(o);else{const i=n[n.length-1].node;i.children?i.children.push(o):i.children=[o]}l.type!=="Leaf"&&n.push({node:o,level:l.level})}),a}h(le,"buildHierarchy");C(le,"buildHierarchy");var et=C((e,a)=>{Te(e,a);const n=[];for(const i of e.TreemapRows??[])i.$type==="ClassDefStatement"&&a.addClass(i.className??"",i.styleText??"");for(const i of e.TreemapRows??[]){const d=i.item;if(!d)continue;const p=i.indent?parseInt(i.indent):0,g=tt(d),c=d.classSelector?a.getStylesForClass(d.classSelector):[],u=c.length>0?c.join(";"):void 0,w={level:p,name:g,type:d.$type,value:d.value,classSelector:d.classSelector,cssCompiledStyles:u};n.push(w)}const l=le(n),o=C((i,d)=>{for(const p of i)a.addNode(p,d),p.children&&p.children.length>0&&o(p.children,d+1)},"addNodesRecursively");o(l,0)},"populate"),tt=C(e=>e.name?String(e.name):"","getItemName"),re={parser:{yy:void 0},parse:C(async e=>{try{const n=await Le("treemap",e);J.debug("Treemap AST:",n);const l=re.parser?.yy;if(!(l instanceof ne))throw new Error("parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");et(n,l)}catch(a){throw J.error("Error parsing treemap:",a),a}},"parse")},at=10,R=10,X=25,nt=C((e,a,n,l)=>{const o=l.db,i=o.getConfig(),d=i.padding??at,p=o.getDiagramTitle(),g=o.getRoot(),{themeVariables:c}=ae();if(!g)return;const u=p?30:0,w=pe(a),r=i.nodeWidth?i.nodeWidth*R:960,b=i.nodeHeight?i.nodeHeight*R:500,v=r,x=b+u;w.attr("viewBox",`0 0 ${v} ${x}`),ue(w,x,v,i.useMaxWidth);let f;try{const t=i.valueFormat||",";if(t==="$0,0")f=C(s=>"$"+O(",")(s),"valueFormat");else if(t.startsWith("$")&&t.includes(",")){const s=/\.\d+/.exec(t),m=s?s[0]:"";f=C(T=>"$"+O(","+m)(T),"valueFormat")}else if(t.startsWith("$")){const s=t.substring(1);f=C(m=>"$"+O(s||"")(m),"valueFormat")}else f=O(t)}catch(t){J.error("Error creating format function:",t),f=O(",")}const y=U().range(["transparent",c.cScale0,c.cScale1,c.cScale2,c.cScale3,c.cScale4,c.cScale5,c.cScale6,c.cScale7,c.cScale8,c.cScale9,c.cScale10,c.cScale11]),M=U().range(["transparent",c.cScalePeer0,c.cScalePeer1,c.cScalePeer2,c.cScalePeer3,c.cScalePeer4,c.cScalePeer5,c.cScalePeer6,c.cScalePeer7,c.cScalePeer8,c.cScalePeer9,c.cScalePeer10,c.cScalePeer11]),N=U().range([c.cScaleLabel0,c.cScaleLabel1,c.cScaleLabel2,c.cScaleLabel3,c.cScaleLabel4,c.cScaleLabel5,c.cScaleLabel6,c.cScaleLabel7,c.cScaleLabel8,c.cScaleLabel9,c.cScaleLabel10,c.cScaleLabel11]);p&&w.append("text").attr("x",v/2).attr("y",u/2).attr("class","treemapTitle").attr("text-anchor","middle").attr("dominant-baseline","middle").text(p);const D=w.append("g").attr("transform",`translate(0, ${u})`).attr("class","treemapContainer"),E=Q(g).sum(t=>t.value??0).sort((t,s)=>(s.value??0)-(t.value??0)),ee=Qe().size([r,b]).paddingTop(t=>t.children&&t.children.length>0?X+R:0).paddingInner(d).paddingLeft(t=>t.children&&t.children.length>0?R:0).paddingRight(t=>t.children&&t.children.length>0?R:0).paddingBottom(t=>t.children&&t.children.length>0?R:0).round(!0)(E),se=ee.descendants().filter(t=>t.children&&t.children.length>0),W=D.selectAll(".treemapSection").data(se).enter().append("g").attr("class","treemapSection").attr("transform",t=>`translate(${t.x0},${t.y0})`);W.append("rect").attr("width",t=>t.x1-t.x0).attr("height",X).attr("class","treemapSectionHeader").attr("fill","none").attr("fill-opacity",.6).attr("stroke-width",.6).attr("style",t=>t.depth===0?"display: none;":""),W.append("clipPath").attr("id",(t,s)=>`clip-section-${a}-${s}`).append("rect").attr("width",t=>Math.max(0,t.x1-t.x0-12)).attr("height",X),W.append("rect").attr("width",t=>t.x1-t.x0).attr("height",t=>t.y1-t.y0).attr("class",(t,s)=>`treemapSection section${s}`).attr("fill",t=>y(t.data.name)).attr("fill-opacity",.6).attr("stroke",t=>M(t.data.name)).attr("stroke-width",2).attr("stroke-opacity",.4).attr("style",t=>{if(t.depth===0)return"display: none;";const s=B({cssCompiledStyles:t.data.cssCompiledStyles});return s.nodeStyles+";"+s.borderStyles.join(";")}),W.append("text").attr("class","treemapSectionLabel").attr("x",6).attr("y",X/2).attr("dominant-baseline","middle").text(t=>t.depth===0?"":t.data.name).attr("font-weight","bold").attr("style",t=>{if(t.depth===0)return"display: none;";const s="dominant-baseline: middle; font-size: 12px; fill:"+N(t.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;",m=B({cssCompiledStyles:t.data.cssCompiledStyles});return s+m.labelStyles.replace("color:","fill:")}).each(function(t){if(t.depth===0)return;const s=Y(this),m=t.data.name;s.text(m);const T=t.x1-t.x0,$=6;let A;i.showValues!==!1&&t.value?A=T-10-30-10-$:A=T-$-6;const F=Math.max(15,A),S=s.node();if(S.getComputedTextLength()>F){let L=m;for(;L.length>0;){if(L=m.substring(0,L.length-1),L.length===0){s.text("..."),S.getComputedTextLength()>F&&s.text("");break}if(s.text(L+"..."),S.getComputedTextLength()<=F)break}}}),i.showValues!==!1&&W.append("text").attr("class","treemapSectionValue").attr("x",t=>t.x1-t.x0-10).attr("y",X/2).attr("text-anchor","end").attr("dominant-baseline","middle").text(t=>t.value?f(t.value):"").attr("font-style","italic").attr("style",t=>{if(t.depth===0)return"display: none;";const s="text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:"+N(t.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;",m=B({cssCompiledStyles:t.data.cssCompiledStyles});return s+m.labelStyles.replace("color:","fill:")});const ie=ee.leaves(),j=D.selectAll(".treemapLeafGroup").data(ie).enter().append("g").attr("class",(t,s)=>`treemapNode treemapLeafGroup leaf${s}${t.data.classSelector?` ${t.data.classSelector}`:""}x`).attr("transform",t=>`translate(${t.x0},${t.y0})`);j.append("rect").attr("width",t=>t.x1-t.x0).attr("height",t=>t.y1-t.y0).attr("class","treemapLeaf").attr("fill",t=>t.parent?y(t.parent.data.name):y(t.data.name)).attr("style",t=>B({cssCompiledStyles:t.data.cssCompiledStyles}).nodeStyles).attr("fill-opacity",.3).attr("stroke",t=>t.parent?y(t.parent.data.name):y(t.data.name)).attr("stroke-width",3),j.append("clipPath").attr("id",(t,s)=>`clip-${a}-${s}`).append("rect").attr("width",t=>Math.max(0,t.x1-t.x0-4)).attr("height",t=>Math.max(0,t.y1-t.y0-4)),j.append("text").attr("class","treemapLabel").attr("x",t=>(t.x1-t.x0)/2).attr("y",t=>(t.y1-t.y0)/2).attr("style",t=>{const s="text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:"+N(t.data.name)+";",m=B({cssCompiledStyles:t.data.cssCompiledStyles});return s+m.labelStyles.replace("color:","fill:")}).attr("clip-path",(t,s)=>`url(#clip-${a}-${s})`).text(t=>t.data.name).each(function(t){const s=Y(this),m=t.x1-t.x0,T=t.y1-t.y0,$=s.node(),A=4,P=m-2*A,F=T-2*A;if(P<10||F<10){s.style("display","none");return}let S=parseInt(s.style("font-size"),10);const z=8,k=28,L=.6,V=6,H=2;for(;$.getComputedTextLength()>P&&S>z;)S--,s.style("font-size",`${S}px`);let I=Math.max(V,Math.min(k,Math.round(S*L))),K=S+H+I;for(;K>F&&S>z&&(S--,I=Math.max(V,Math.min(k,Math.round(S*L))),!(I<V&&S===z));)s.style("font-size",`${S}px`),K=S+H+I;s.style("font-size",`${S}px`),($.getComputedTextLength()>P||S<z||F<S)&&s.style("display","none")}),i.showValues!==!1&&j.append("text").attr("class","treemapValue").attr("x",s=>(s.x1-s.x0)/2).attr("y",function(s){return(s.y1-s.y0)/2}).attr("style",s=>{const m="text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:"+N(s.data.name)+";",T=B({cssCompiledStyles:s.data.cssCompiledStyles});return m+T.labelStyles.replace("color:","fill:")}).attr("clip-path",(s,m)=>`url(#clip-${a}-${m})`).text(s=>s.value?f(s.value):"").each(function(s){const m=Y(this),T=this.parentNode;if(!T){m.style("display","none");return}const $=Y(T).select(".treemapLabel");if($.empty()||$.style("display")==="none"){m.style("display","none");return}const A=parseFloat($.style("font-size")),P=28,F=.6,S=6,z=2,k=Math.max(S,Math.min(P,Math.round(A*F)));m.style("font-size",`${k}px`);const V=(s.y1-s.y0)/2+A/2+z;m.attr("y",V);const H=s.x1-s.x0,ce=s.y1-s.y0-4,de=H-8;m.node().getComputedTextLength()>de||V+k>ce||k<S?m.style("display","none"):m.style("display",null)});const oe=i.diagramPadding??8;Ce(w,oe,"flowchart",i?.useMaxWidth||!1)},"draw"),lt=C(function(e,a){return a.db.getClasses()},"getClasses"),rt={draw:nt,getClasses:lt},st={sectionStrokeColor:"black",sectionStrokeWidth:"1",sectionFillColor:"#efefef",leafStrokeColor:"black",leafStrokeWidth:"1",leafFillColor:"#efefef",labelColor:"black",labelFontSize:"12px",valueFontSize:"10px",valueColor:"black",titleColor:"black",titleFontSize:"14px"},it=C(({treemap:e}={})=>{const a=te(st,e);return`
  .treemapNode.section {
    stroke: ${a.sectionStrokeColor};
    stroke-width: ${a.sectionStrokeWidth};
    fill: ${a.sectionFillColor};
  }
  .treemapNode.leaf {
    stroke: ${a.leafStrokeColor};
    stroke-width: ${a.leafStrokeWidth};
    fill: ${a.leafFillColor};
  }
  .treemapLabel {
    fill: ${a.labelColor};
    font-size: ${a.labelFontSize};
  }
  .treemapValue {
    fill: ${a.valueColor};
    font-size: ${a.valueFontSize};
  }
  .treemapTitle {
    fill: ${a.titleColor};
    font-size: ${a.titleFontSize};
  }
  `},"getStyles"),ot=it,Lt={parser:re,get db(){return new ne},renderer:rt,styles:ot};export{Lt as diagram};
//# sourceMappingURL=diagram-PSM6KHXK-1N8UnGwx.js.map
