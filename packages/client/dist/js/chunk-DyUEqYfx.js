const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/chunk-BtXXjYkq.js","js/html.mjs-DdHUeACL.js","js/javascript.mjs-DFyEbC5y.js","js/css.mjs-l46fsARh.js","js/angular-ts.mjs-BzYopxIH.js","js/scss.mjs-DTztaa_0.js","js/apl.mjs-mpyHuvac.js","js/xml.mjs-BQ9kjWXS.js","js/java.mjs-DtRXFtDl.js","js/json.mjs-LWN7Ml79.js","js/astro.mjs-BQeseV-Y.js","js/typescript.mjs-DI7mmMRd.js","js/postcss.mjs-CeUBPB2S.js","js/tsx.mjs-DYwE5ssU.js","js/blade.mjs-Bk2w870E.js","js/html-derivative.mjs-DCs4W-BH.js","js/sql.mjs-BhJCBb_s.js","js/bsl.mjs-BtO0boQN.js","js/sdbl.mjs-BpucmfEo.js","js/cairo.mjs--kV4qa0j.js","js/python.mjs-DlV7vnVD.js","js/cobol.mjs-7ONAnNHP.js","js/coffee.mjs-CKPY3NJb.js","js/cpp.mjs-eC2RTCDC.js","js/regexp.mjs-CpyjTnFF.js","js/glsl.mjs-ragv-Zo5.js","js/c.mjs-BmJt9k-y.js","js/crystal.mjs-Dnn2U5IH.js","js/shellscript.mjs-B8OHlvmy.js","js/edge.mjs-DbcXP-Vs.js","js/elixir.mjs-SjsCMqPa.js","js/elm.mjs-qngR63IT.js","js/erb.mjs-DLnl4PbJ.js","js/ruby.mjs-DYN55Ui6.js","js/haml.mjs-jqOgt-7N.js","js/graphql.mjs-CVw_LcLj.js","js/jsx.mjs-g2NrEQII.js","js/lua.mjs-BkRw3dcG.js","js/yaml.mjs-c2-Vhxho.js","js/erlang.mjs-CMqJNVIA.js","js/markdown.mjs-DY93LJPj.js","js/fortran-fixed-form.mjs-uevADqWm.js","js/fortran-free-form.mjs-Ix_0F1Zz.js","js/fsharp.mjs-CAFh0s28.js","js/gdresource.mjs-BZ7dVJUj.js","js/gdshader.mjs-BC7WJXp9.js","js/gdscript.mjs-fffAh1pn.js","js/git-commit.mjs-DUcQvFWM.js","js/diff.mjs-Beq1YlA8.js","js/git-rebase.mjs-CfDDp8n5.js","js/glimmer-js.mjs-DdkzVRT_.js","js/glimmer-ts.mjs-j48lzUIy.js","js/hack.mjs-CbGDW8Tt.js","js/handlebars.mjs-COZdU8XG.js","js/http.mjs-DqMR70Se.js","js/hurl.mjs-BhKOeb1O.js","js/csv.mjs-DXKU4rRd.js","js/hxml.mjs-IZCgxWYo.js","js/haxe.mjs-D-PmAGDa.js","js/jinja.mjs-aMxwqNPk.js","js/jison.mjs-BZB-Pvb6.js","js/julia.mjs-CK_nGN3C.js","js/r.mjs-C1kzXVmM.js","js/latex.mjs-TrAQnxE4.js","js/tex.mjs-c9KwJhTM.js","js/liquid.mjs-TsF64GpE.js","js/marko.mjs-B4Us_A-V.js","js/less.mjs-DKKxO4Pm.js","js/mdc.mjs-k5AiriQE.js","js/nginx.mjs-69lkxaPj.js","js/nim.mjs-DUBg6fqE.js","js/perl.mjs-CZ_f9ovE.js","js/php.mjs-CRLlAxm3.js","js/pug.mjs-RyrCNZAw.js","js/qml.mjs-Dy_QpN07.js","js/razor.mjs-C1aJHTqc.js","js/csharp.mjs-2CY_msr-.js","js/rst.mjs-CGzWwCQS.js","js/cmake.mjs-BYiqpiH1.js","js/sas.mjs-B1sKWduj.js","js/shaderlab.mjs-CvuASar4.js","js/hlsl.mjs-B-PjNM4a.js","js/shellsession.mjs-cY4U-UV-.js","js/soy.mjs-tToRcjb4.js","js/sparql.mjs-CFlcHvHr.js","js/turtle.mjs-BVy4HXn4.js","js/stata.mjs-CeE5oZLJ.js","js/svelte.mjs-DzXnUAGD.js","js/templ.mjs-C5pfwUgB.js","js/go.mjs-BR7YH85S.js","js/ts-tags.mjs-BzdnCLpA.js","js/twig.mjs-BQxe1R_K.js","js/vue.mjs-DNSrzb_v.js","js/vue-html.mjs-Cxul207c.js","js/vue-vine.mjs-7rmSqAeb.js","js/stylus.mjs-BeJftkpb.js","js/xsl.mjs-Bewts2re.js","js/chunk-DtLV2ZA1.js","assets/main-W9CNpUw-.js","assets/katex-XSfRedCB.css"])))=>i.map(i=>d[i]);
import{g as e,c as t,j as r,S as n,r as i,R as a,a as s,T as o,P as l,C as c,b as u,X as d,O as h,d as p,D as f,e as m,f as g,h as v,i as y,k as b,l as _,m as w,n as x,L as E,o as k,p as S,q as A,V as T,G as N,s as I,I as M,t as C,u as j,v as O,w as R,x as L,y as P,z as D,A as $,B as z,E as B,F as U,H as F,J as H,K as G,M as q,N as V,Q as W,U as Z,W as K,Y,Z as J,_ as X,$ as Q,a0 as ee,a1 as te,a2 as re,a3 as ne,a4 as ie,a5 as ae,a6 as se,a7 as oe,a8 as le,a9 as ce,aa as ue,ab as de,ac as he,ad as pe,ae as fe,af as me,ag as ge,ah as ve,ai as ye,aj as be,ak as _e,al as we,am as xe,an as Ee,ao as ke,ap as Se,aq as Ae,ar as Te,as as Ne,at as Ie,au as Me,av as Ce,aw as je,ax as Oe,ay as Re,az as Le,aA as Pe,aB as De,aC as $e,aD as ze,aE as Be,aF as Ue,aG as Fe,aH as He,aI as Ge,aJ as qe,aK as Ve,aL as We,aM as Ze,aN as Ke,aO as Ye,aP as Je,aQ as Xe,aR as Qe,aS as et,aT as tt,aU as rt,aV as nt,aW as it,aX as at,aY as st,aZ as ot,a_ as lt,a$ as ct,b0 as ut,b1 as dt,b2 as ht,b3 as pt,b4 as ft,b5 as mt,b6 as gt,b7 as vt,b8 as yt,b9 as bt,ba as _t,bb as wt,bc as xt,bd as Et,be as kt,bf as St,bg as At,bh as Tt,bi as Nt,bj as It,bk as Mt,bl as Ct,bm as jt,bn as Ot,bo as Rt,bp as Lt,bq as Pt,br as Dt,bs as $t,bt as zt,bu as Bt,bv as Ut,bw as Ft,bx as Ht,by as Gt,bz as qt,bA as Vt,bB as Wt,bC as Zt,bD as Kt,bE as Yt,bF as Jt,bG as Xt,bH as Qt,bI as er,bJ as tr,bK as rr,bL as nr,bM as ir,bN as ar,bO as sr,bP as or,bQ as lr,bR as cr,bS as ur,bT as dr,bU as hr,bV as pr,bW as fr,bX as mr,bY as gr,bZ as vr,b_ as yr,b$ as br,c0 as _r,c1 as wr,c2 as xr,c3 as Er,c4 as kr,c5 as Sr,c6 as Ar,c7 as Tr,c8 as Nr,c9 as Ir,ca as Mr,cb as Cr,cc as jr,cd as Or,ce as Rr,cf as Lr,cg as Pr,ch as Dr,ci as $r,cj as zr,ck as Br,cl as Ur,cm as Fr,cn as Hr,co as Gr,cp as qr,cq as Vr,cr as Wr,cs as Zr,ct as Kr,cu as Yr,cv as Jr,cw as Xr,cx as Qr,cy as en,cz as tn,cA as rn,cB as nn,cC as an,cD as sn,cE as on,cF as ln}from"./chunk-CZZOyyuL.js";import{_ as cn}from"../assets/main-W9CNpUw-.js";function un(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=un(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function dn(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=un(e))&&(n&&(n+=" "),n+=t);return n}const hn=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,pn=dn,fn=(e,t)=>r=>{var n;if(null==(null==t?void 0:t.variants))return pn(e,null==r?void 0:r.class,null==r?void 0:r.className);const{variants:i,defaultVariants:a}=t,s=Object.keys(i).map(e=>{const t=null==r?void 0:r[e],n=null==a?void 0:a[e];if(null===t)return null;const s=hn(t)||hn(n);return i[e][s]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{}),l=null==t||null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...i}=t;return Object.entries(i).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...a,...o}[t]):{...a,...o}[t]===r})?[...e,r,n]:e},[]);return pn(e,s,l,null==r?void 0:r.class,null==r?void 0:r.className)},mn="user",gn="client_chat",vn="client_group_chat",yn=512;var bn=(e=>(e.REQUIRED="required",e.OPTIONAL="optional",e))(bn||{});const _n={name:"required",username:"optional",system:"required","settings.voice.model":"optional",bio:"optional",topics:"optional",adjectives:"optional","style.all":"optional","style.chat":"optional","style.post":"optional"};var wn={exports:{}};wn.exports=function(){var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",a="minute",s="hour",o="day",l="week",c="month",u="quarter",d="year",h="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},y={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,c),a=r-i<0,s=t.clone().add(n+(a?-1:1),c);return+(-(n+(r-i)/(a?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:l,d:o,D:h,h:s,m:a,s:i,ms:n,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",_={};_[b]=g;var w="$isDayjsObject",x=function(e){return e instanceof A||!(!e||!e[w])},E=function e(t,r,n){var i;if(!t)return b;if("string"==typeof t){var a=t.toLowerCase();_[a]&&(i=a),r&&(_[a]=r,i=a);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var o=t.name;_[o]=t,i=o}return!n&&i&&(b=i),i||!n&&b},k=function(e,t){if(x(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new A(r)},S=y;S.l=E,S.i=x,S.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var A=function(){function g(e){this.$L=E(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var v=g.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(f);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return S},v.isValid=function(){return!(this.$d.toString()===p)},v.isSame=function(e,t){var r=k(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return k(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<k(e)},v.$g=function(e,t,r){return S.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,n=!!S.u(t)||t,u=S.p(e),p=function(e,t){var i=S.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(o)},f=function(e,t){return S.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},m=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return n?p(1,0):p(31,11);case c:return n?p(1,g):p(0,g+1);case l:var b=this.$locale().weekStart||0,_=(m<b?m+7:m)-b;return p(n?v-_:v+(6-_),g);case o:case h:return f(y+"Hours",0);case s:return f(y+"Minutes",1);case a:return f(y+"Seconds",2);case i:return f(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,l=S.p(e),u="set"+(this.$u?"UTC":""),p=(r={},r[o]=u+"Date",r[h]=u+"Date",r[c]=u+"Month",r[d]=u+"FullYear",r[s]=u+"Hours",r[a]=u+"Minutes",r[i]=u+"Seconds",r[n]=u+"Milliseconds",r)[l],f=l===o?this.$D+(t-this.$W):t;if(l===c||l===d){var m=this.clone().set(h,1);m.$d[p](f),m.init(),this.$d=m.set(h,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[S.p(e)]()},v.add=function(n,u){var h,p=this;n=Number(n);var f=S.p(u),m=function(e){var t=k(p);return S.w(t.date(t.date()+Math.round(e*n)),p)};if(f===c)return this.set(c,this.$M+n);if(f===d)return this.set(d,this.$y+n);if(f===o)return m(1);if(f===l)return m(7);var g=(h={},h[a]=t,h[s]=r,h[i]=e,h)[f]||1,v=this.$d.getTime()+n*g;return S.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||p;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=S.z(this),a=this.$H,s=this.$m,o=this.$M,l=r.weekdays,c=r.months,u=r.meridiem,d=function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)},h=function(e){return S.s(a%12||12,e,"0")},f=u||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(m,function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return o+1;case"MM":return S.s(o+1,2,"0");case"MMM":return d(r.monthsShort,o,c,3);case"MMMM":return d(c,o);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,l,2);case"ddd":return d(r.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(a);case"HH":return S.s(a,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return f(a,s,!0);case"A":return f(a,s,!1);case"m":return String(s);case"mm":return S.s(s,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,h,p){var f,m=this,g=S.p(h),v=k(n),y=(v.utcOffset()-this.utcOffset())*t,b=this-v,_=function(){return S.m(m,v)};switch(g){case d:f=_()/12;break;case c:f=_();break;case u:f=_()/3;break;case l:f=(b-y)/6048e5;break;case o:f=(b-y)/864e5;break;case s:f=b/r;break;case a:f=b/t;break;case i:f=b/e;break;default:f=b}return p?f:S.a(f)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return _[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=E(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return S.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),T=A.prototype;return k.prototype=T,[["$ms",n],["$s",i],["$m",a],["$H",s],["$W",o],["$M",c],["$y",d],["$D",h]].forEach(function(e){T[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),k.extend=function(e,t){return e.$i||(e(t,A,k),e.$i=!0),k},k.locale=E,k.isDayjs=x,k.unix=function(e){return k(1e3*e)},k.en=_[b],k.Ls=_,k.p={},k}();const xn=e(wn.exports);var En,kn={exports:{}};kn.exports=(En={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},function(e,t,r){var n=t.prototype,i=n.format;r.en.formats=En,n.format=function(e){void 0===e&&(e="YYYY-MM-DDTHH:mm:ssZ");var t=this.$locale().formats,r=function(e,t){return e.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(e,r,n){var i=n&&n.toUpperCase();return r||t[n]||En[n]||t[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,r){return t||r.slice(1)})})}(e,void 0===t?{}:t);return i.call(this,r)}});const Sn=e(kn.exports),An=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),Tn="-",Nn=[],In=e=>{const t=jn(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return Cn(e);const r=e.split(Tn),n=""===r[0]&&r.length>1?1:0;return Mn(r,n,t)},getConflictingClassGroupIds:(e,t)=>{if(t){const t=n[e],i=r[e];return t?i?((e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r})(i,t):t:i||Nn}return r[e]||Nn}}},Mn=(e,t,r)=>{if(0===e.length-t)return r.classGroupId;const n=e[t],i=r.nextPart.get(n);if(i){const r=Mn(e,t+1,i);if(r)return r}const a=r.validators;if(null===a)return;const s=0===t?e.join(Tn):e.slice(t).join(Tn),o=a.length;for(let l=0;l<o;l++){const e=a[l];if(e.validator(s))return e.classGroupId}},Cn=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?"arbitrary.."+n:void 0})(),jn=e=>{const{theme:t,classGroups:r}=e;return On(r,t)},On=(e,t)=>{const r=An();for(const n in e){const i=e[n];Rn(i,r,n,t)}return r},Rn=(e,t,r,n)=>{const i=e.length;for(let a=0;a<i;a++){const i=e[a];Ln(i,t,r,n)}},Ln=(e,t,r,n)=>{"string"!=typeof e?"function"!=typeof e?$n(e,t,r,n):Dn(e,t,r,n):Pn(e,t,r)},Pn=(e,t,r)=>{(""===e?t:zn(t,e)).classGroupId=r},Dn=(e,t,r,n)=>{Bn(e)?Rn(e(n),t,r,n):(null===t.validators&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(r,e)))},$n=(e,t,r,n)=>{const i=Object.entries(e),a=i.length;for(let s=0;s<a;s++){const[e,a]=i[s];Rn(a,zn(t,e),r,n)}},zn=(e,t)=>{let r=e;const n=t.split(Tn),i=n.length;for(let a=0;a<i;a++){const e=n[a];let t=r.nextPart.get(e);t||(t=An(),r.nextPart.set(e,t)),r=t}return r},Bn=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,Un=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const i=(i,a)=>{r[i]=a,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(e){let t=r[e];return void 0!==t?t:void 0!==(t=n[e])?(i(e,t),t):void 0},set(e,t){e in r?r[e]=t:i(e,t)}}},Fn=[],Hn=(e,t,r,n,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:i}),Gn=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=e=>{const t=[];let r,n=0,i=0,a=0;const s=e.length;for(let u=0;u<s;u++){const s=e[u];if(0===n&&0===i){if(":"===s){t.push(e.slice(a,u)),a=u+1;continue}if("/"===s){r=u;continue}}"["===s?n++:"]"===s?n--:"("===s?i++:")"===s&&i--}const o=0===t.length?e:e.slice(a);let l=o,c=!1;o.endsWith("!")?(l=o.slice(0,-1),c=!0):o.startsWith("!")&&(l=o.slice(1),c=!0);return Hn(t,c,l,r&&r>a?r-a:void 0)};if(t){const e=t+":",r=n;n=t=>t.startsWith(e)?r(t.slice(e.length)):Hn(Fn,!1,t,void 0,!0)}if(r){const e=n;n=t=>r({className:t,parseClassName:e})}return n},qn=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((e,r)=>{t.set(e,1e6+r)}),e=>{const r=[];let n=[];for(let i=0;i<e.length;i++){const a=e[i],s="["===a[0],o=t.has(a);s||o?(n.length>0&&(n.sort(),r.push(...n),n=[]),r.push(a)):n.push(a)}return n.length>0&&(n.sort(),r.push(...n)),r}},Vn=/\s+/,Wn=e=>{if("string"==typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Wn(e[n]))&&(r&&(r+=" "),r+=t);return r},Zn=(e,...t)=>{let r,n,i,a;const s=e=>{const t=n(e);if(t)return t;const a=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:a}=t,s=[],o=e.trim().split(Vn);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=r(e);if(t){l=e+(l.length>0?" "+l:l);continue}let f=!!p,m=n(f?h.substring(0,p):h);if(!m){if(!f){l=e+(l.length>0?" "+l:l);continue}if(m=n(h),!m){l=e+(l.length>0?" "+l:l);continue}f=!1}const g=0===u.length?"":1===u.length?u[0]:a(u).join(":"),v=d?g+"!":g,y=v+m;if(s.indexOf(y)>-1)continue;s.push(y);const b=i(m,f);for(let r=0;r<b.length;++r){const e=b[r];s.push(v+e)}l=e+(l.length>0?" "+l:l)}return l})(e,r);return i(e,a),a};return a=o=>{const l=t.reduce((e,t)=>t(e),e());return r=(e=>({cache:Un(e.cacheSize),parseClassName:Gn(e),sortModifiers:qn(e),...In(e)}))(l),n=r.cache.get,i=r.cache.set,a=s,s(o)},(...e)=>a(((...e)=>{let t,r,n=0,i="";for(;n<e.length;)(t=e[n++])&&(r=Wn(t))&&(i&&(i+=" "),i+=r);return i})(...e))},Kn=[],Yn=e=>{const t=t=>t[e]||Kn;return t.isThemeGetter=!0,t},Jn=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Xn=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Qn=/^\d+\/\d+$/,ei=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ti=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ri=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,ni=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ii=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ai=e=>Qn.test(e),si=e=>!!e&&!Number.isNaN(Number(e)),oi=e=>!!e&&Number.isInteger(Number(e)),li=e=>e.endsWith("%")&&si(e.slice(0,-1)),ci=e=>ei.test(e),ui=()=>!0,di=e=>ti.test(e)&&!ri.test(e),hi=()=>!1,pi=e=>ni.test(e),fi=e=>ii.test(e),mi=e=>!vi(e)&&!Ei(e),gi=e=>Mi(e,Ri,hi),vi=e=>Jn.test(e),yi=e=>Mi(e,Li,di),bi=e=>Mi(e,Pi,si),_i=e=>Mi(e,ji,hi),wi=e=>Mi(e,Oi,fi),xi=e=>Mi(e,$i,pi),Ei=e=>Xn.test(e),ki=e=>Ci(e,Li),Si=e=>Ci(e,Di),Ai=e=>Ci(e,ji),Ti=e=>Ci(e,Ri),Ni=e=>Ci(e,Oi),Ii=e=>Ci(e,$i,!0),Mi=(e,t,r)=>{const n=Jn.exec(e);return!!n&&(n[1]?t(n[1]):r(n[2]))},Ci=(e,t,r=!1)=>{const n=Xn.exec(e);return!!n&&(n[1]?t(n[1]):r)},ji=e=>"position"===e||"percentage"===e,Oi=e=>"image"===e||"url"===e,Ri=e=>"length"===e||"size"===e||"bg-size"===e,Li=e=>"length"===e,Pi=e=>"number"===e,Di=e=>"family-name"===e,$i=e=>"shadow"===e,zi=Zn(()=>{const e=Yn("color"),t=Yn("font"),r=Yn("text"),n=Yn("font-weight"),i=Yn("tracking"),a=Yn("leading"),s=Yn("breakpoint"),o=Yn("container"),l=Yn("spacing"),c=Yn("radius"),u=Yn("shadow"),d=Yn("inset-shadow"),h=Yn("text-shadow"),p=Yn("drop-shadow"),f=Yn("blur"),m=Yn("perspective"),g=Yn("aspect"),v=Yn("ease"),y=Yn("animate"),b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Ei,vi],_=()=>[Ei,vi,l],w=()=>[ai,"full","auto",..._()],x=()=>[oi,"none","subgrid",Ei,vi],E=()=>["auto",{span:["full",oi,Ei,vi]},oi,Ei,vi],k=()=>[oi,"auto",Ei,vi],S=()=>["auto","min","max","fr",Ei,vi],A=()=>["auto",..._()],T=()=>[ai,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",..._()],N=()=>[e,Ei,vi],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Ai,_i,{position:[Ei,vi]}],M=()=>["auto","cover","contain",Ti,gi,{size:[Ei,vi]}],C=()=>[li,ki,yi],j=()=>["","none","full",c,Ei,vi],O=()=>["",si,ki,yi],R=()=>[si,li,Ai,_i],L=()=>["","none",f,Ei,vi],P=()=>["none",si,Ei,vi],D=()=>["none",si,Ei,vi],$=()=>[si,Ei,vi],z=()=>[ai,"full",..._()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ci],breakpoint:[ci],color:[ui],container:[ci],"drop-shadow":[ci],ease:["in","out","in-out"],font:[mi],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ci],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ci],shadow:[ci],spacing:["px",si],text:[ci],"text-shadow":[ci],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ai,vi,Ei,g]}],container:["container"],columns:[{columns:[si,vi,Ei,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[oi,"auto",Ei,vi]}],basis:[{basis:[ai,"full","auto",o,..._()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[si,ai,"auto","initial","none",vi]}],grow:[{grow:["",si,Ei,vi]}],shrink:[{shrink:["",si,Ei,vi]}],order:[{order:[oi,"first","last","none",Ei,vi]}],"grid-cols":[{"grid-cols":x()}],"col-start-end":[{col:E()}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":x()}],"row-start-end":[{row:E()}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":S()}],"auto-rows":[{"auto-rows":S()}],gap:[{gap:_()}],"gap-x":[{"gap-x":_()}],"gap-y":[{"gap-y":_()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:_()}],px:[{px:_()}],py:[{py:_()}],ps:[{ps:_()}],pe:[{pe:_()}],pt:[{pt:_()}],pr:[{pr:_()}],pb:[{pb:_()}],pl:[{pl:_()}],m:[{m:A()}],mx:[{mx:A()}],my:[{my:A()}],ms:[{ms:A()}],me:[{me:A()}],mt:[{mt:A()}],mr:[{mr:A()}],mb:[{mb:A()}],ml:[{ml:A()}],"space-x":[{"space-x":_()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":_()}],"space-y-reverse":["space-y-reverse"],size:[{size:T()}],w:[{w:[o,"screen",...T()]}],"min-w":[{"min-w":[o,"screen","none",...T()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...T()]}],h:[{h:["screen","lh",...T()]}],"min-h":[{"min-h":["screen","lh","none",...T()]}],"max-h":[{"max-h":["screen","lh",...T()]}],"font-size":[{text:["base",r,ki,yi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Ei,bi]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",li,vi]}],"font-family":[{font:[Si,vi,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ei,vi]}],"line-clamp":[{"line-clamp":[si,"none",Ei,bi]}],leading:[{leading:[a,..._()]}],"list-image":[{"list-image":["none",Ei,vi]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ei,vi]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:N()}],"text-color":[{text:N()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[si,"from-font","auto",Ei,yi]}],"text-decoration-color":[{decoration:N()}],"underline-offset":[{"underline-offset":[si,"auto",Ei,vi]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ei,vi]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ei,vi]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:M()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},oi,Ei,vi],radial:["",Ei,vi],conic:[oi,Ei,vi]},Ni,wi]}],"bg-color":[{bg:N()}],"gradient-from-pos":[{from:C()}],"gradient-via-pos":[{via:C()}],"gradient-to-pos":[{to:C()}],"gradient-from":[{from:N()}],"gradient-via":[{via:N()}],"gradient-to":[{to:N()}],rounded:[{rounded:j()}],"rounded-s":[{"rounded-s":j()}],"rounded-e":[{"rounded-e":j()}],"rounded-t":[{"rounded-t":j()}],"rounded-r":[{"rounded-r":j()}],"rounded-b":[{"rounded-b":j()}],"rounded-l":[{"rounded-l":j()}],"rounded-ss":[{"rounded-ss":j()}],"rounded-se":[{"rounded-se":j()}],"rounded-ee":[{"rounded-ee":j()}],"rounded-es":[{"rounded-es":j()}],"rounded-tl":[{"rounded-tl":j()}],"rounded-tr":[{"rounded-tr":j()}],"rounded-br":[{"rounded-br":j()}],"rounded-bl":[{"rounded-bl":j()}],"border-w":[{border:O()}],"border-w-x":[{"border-x":O()}],"border-w-y":[{"border-y":O()}],"border-w-s":[{"border-s":O()}],"border-w-e":[{"border-e":O()}],"border-w-t":[{"border-t":O()}],"border-w-r":[{"border-r":O()}],"border-w-b":[{"border-b":O()}],"border-w-l":[{"border-l":O()}],"divide-x":[{"divide-x":O()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":O()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:N()}],"border-color-x":[{"border-x":N()}],"border-color-y":[{"border-y":N()}],"border-color-s":[{"border-s":N()}],"border-color-e":[{"border-e":N()}],"border-color-t":[{"border-t":N()}],"border-color-r":[{"border-r":N()}],"border-color-b":[{"border-b":N()}],"border-color-l":[{"border-l":N()}],"divide-color":[{divide:N()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[si,Ei,vi]}],"outline-w":[{outline:["",si,ki,yi]}],"outline-color":[{outline:N()}],shadow:[{shadow:["","none",u,Ii,xi]}],"shadow-color":[{shadow:N()}],"inset-shadow":[{"inset-shadow":["none",d,Ii,xi]}],"inset-shadow-color":[{"inset-shadow":N()}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:N()}],"ring-offset-w":[{"ring-offset":[si,yi]}],"ring-offset-color":[{"ring-offset":N()}],"inset-ring-w":[{"inset-ring":O()}],"inset-ring-color":[{"inset-ring":N()}],"text-shadow":[{"text-shadow":["none",h,Ii,xi]}],"text-shadow-color":[{"text-shadow":N()}],opacity:[{opacity:[si,Ei,vi]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[si]}],"mask-image-linear-from-pos":[{"mask-linear-from":R()}],"mask-image-linear-to-pos":[{"mask-linear-to":R()}],"mask-image-linear-from-color":[{"mask-linear-from":N()}],"mask-image-linear-to-color":[{"mask-linear-to":N()}],"mask-image-t-from-pos":[{"mask-t-from":R()}],"mask-image-t-to-pos":[{"mask-t-to":R()}],"mask-image-t-from-color":[{"mask-t-from":N()}],"mask-image-t-to-color":[{"mask-t-to":N()}],"mask-image-r-from-pos":[{"mask-r-from":R()}],"mask-image-r-to-pos":[{"mask-r-to":R()}],"mask-image-r-from-color":[{"mask-r-from":N()}],"mask-image-r-to-color":[{"mask-r-to":N()}],"mask-image-b-from-pos":[{"mask-b-from":R()}],"mask-image-b-to-pos":[{"mask-b-to":R()}],"mask-image-b-from-color":[{"mask-b-from":N()}],"mask-image-b-to-color":[{"mask-b-to":N()}],"mask-image-l-from-pos":[{"mask-l-from":R()}],"mask-image-l-to-pos":[{"mask-l-to":R()}],"mask-image-l-from-color":[{"mask-l-from":N()}],"mask-image-l-to-color":[{"mask-l-to":N()}],"mask-image-x-from-pos":[{"mask-x-from":R()}],"mask-image-x-to-pos":[{"mask-x-to":R()}],"mask-image-x-from-color":[{"mask-x-from":N()}],"mask-image-x-to-color":[{"mask-x-to":N()}],"mask-image-y-from-pos":[{"mask-y-from":R()}],"mask-image-y-to-pos":[{"mask-y-to":R()}],"mask-image-y-from-color":[{"mask-y-from":N()}],"mask-image-y-to-color":[{"mask-y-to":N()}],"mask-image-radial":[{"mask-radial":[Ei,vi]}],"mask-image-radial-from-pos":[{"mask-radial-from":R()}],"mask-image-radial-to-pos":[{"mask-radial-to":R()}],"mask-image-radial-from-color":[{"mask-radial-from":N()}],"mask-image-radial-to-color":[{"mask-radial-to":N()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[si]}],"mask-image-conic-from-pos":[{"mask-conic-from":R()}],"mask-image-conic-to-pos":[{"mask-conic-to":R()}],"mask-image-conic-from-color":[{"mask-conic-from":N()}],"mask-image-conic-to-color":[{"mask-conic-to":N()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:M()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ei,vi]}],filter:[{filter:["","none",Ei,vi]}],blur:[{blur:L()}],brightness:[{brightness:[si,Ei,vi]}],contrast:[{contrast:[si,Ei,vi]}],"drop-shadow":[{"drop-shadow":["","none",p,Ii,xi]}],"drop-shadow-color":[{"drop-shadow":N()}],grayscale:[{grayscale:["",si,Ei,vi]}],"hue-rotate":[{"hue-rotate":[si,Ei,vi]}],invert:[{invert:["",si,Ei,vi]}],saturate:[{saturate:[si,Ei,vi]}],sepia:[{sepia:["",si,Ei,vi]}],"backdrop-filter":[{"backdrop-filter":["","none",Ei,vi]}],"backdrop-blur":[{"backdrop-blur":L()}],"backdrop-brightness":[{"backdrop-brightness":[si,Ei,vi]}],"backdrop-contrast":[{"backdrop-contrast":[si,Ei,vi]}],"backdrop-grayscale":[{"backdrop-grayscale":["",si,Ei,vi]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[si,Ei,vi]}],"backdrop-invert":[{"backdrop-invert":["",si,Ei,vi]}],"backdrop-opacity":[{"backdrop-opacity":[si,Ei,vi]}],"backdrop-saturate":[{"backdrop-saturate":[si,Ei,vi]}],"backdrop-sepia":[{"backdrop-sepia":["",si,Ei,vi]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":_()}],"border-spacing-x":[{"border-spacing-x":_()}],"border-spacing-y":[{"border-spacing-y":_()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ei,vi]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[si,"initial",Ei,vi]}],ease:[{ease:["linear","initial",v,Ei,vi]}],delay:[{delay:[si,Ei,vi]}],animate:[{animate:["none",y,Ei,vi]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,Ei,vi]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:P()}],"rotate-x":[{"rotate-x":P()}],"rotate-y":[{"rotate-y":P()}],"rotate-z":[{"rotate-z":P()}],scale:[{scale:D()}],"scale-x":[{"scale-x":D()}],"scale-y":[{"scale-y":D()}],"scale-z":[{"scale-z":D()}],"scale-3d":["scale-3d"],skew:[{skew:$()}],"skew-x":[{"skew-x":$()}],"skew-y":[{"skew-y":$()}],transform:[{transform:[Ei,vi,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:z()}],"translate-x":[{"translate-x":z()}],"translate-y":[{"translate-y":z()}],"translate-z":[{"translate-z":z()}],"translate-none":["translate-none"],accent:[{accent:N()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:N()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ei,vi]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ei,vi]}],fill:[{fill:["none",...N()]}],"stroke-w":[{stroke:[si,ki,yi,bi]}],stroke:[{stroke:["none",...N()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function Bi(...e){return zi(dn(e))}xn.extend(Sn);const Ui=xn,Fi=e=>e.substring(0,2);function Hi(){return URL.createObjectURL(new Blob).split("/").pop()}function Gi(){const e="elizaos-client-user-id",t=localStorage.getItem(e);if(t)return t;const r=Hi();return localStorage.setItem(e,r),r}const qi=(e,t=512,r=.8)=>new Promise((n,i)=>{const a=new FileReader;a.onload=e=>{if(e.target?.result){const a=new Image;a.src=e.target.result,a.onload=()=>{const e=document.createElement("canvas");let i=a.width,s=a.height;i>s?i>t&&(s*=t/i,i=t):s>t&&(i*=t/s,s=t),e.width=i,e.height=s;const o=e.getContext("2d");o?.drawImage(a,0,0,i,s);const l=e.toDataURL("image/jpeg",r);n(l)},a.onerror=i}},a.onerror=i,a.readAsDataURL(e)}),Vi=["/images/agents/agent1.png","/images/agents/agent2.png","/images/agents/agent3.png","/images/agents/agent4.png","/images/agents/agent5.png"],Wi=e=>{if(e?.settings?.avatar)return e.settings.avatar;if(e?.id){let t=0;for(let n=0;n<e.id.length;n++){t=(t<<5)-t+e.id.charCodeAt(n),t|=0}const r=Math.abs(t)%Vi.length;return Vi[r]}return"/elizaos-icon.png"},Zi=(e,t,r)=>{if(e?.name&&""!==e.name.trim())return e.name;if(t&&t.length>0){const e=t.filter(e=>e.id!==r&&e.name);if(0===e.length&&t.some(e=>e.id===r&&e.name)){const e=t.find(e=>e.id===r);return e&&e.name||"Unnamed Group"}if(e.length>0)return e.map(e=>e.name).slice(0,3).join(", ")+(e.length>3?"...":"")}return"Unnamed Group"},Ki=fn("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] cursor-pointer",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90",destructive:"bg-red-800 text-white shadow-xs hover:bg-red-600 focus-visible:ring-red-400/20 dark:focus-visible:ring-red-500",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-auto w-auto"}},defaultVariants:{variant:"default",size:"default"}});function Yi({className:e,variant:t,size:i,asChild:a=!1,...s}){const o=a?n:"button";return r.jsx(o,{"data-slot":"button",className:Bi(Ki({variant:t,size:i,className:e})),...s})}const Ji=i.forwardRef(({className:e,type:t,...n},i)=>r.jsx("input",{type:t,className:Bi("flex h-12 w-full rounded border border-input bg-card px-4 py-3 text-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,"data-testid":n["data-testid"]||"input",...n}));Ji.displayName="Input";const Xi=i.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...i},s)=>r.jsx(a,{ref:s,decorative:n,orientation:t,className:Bi("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),"data-testid":i["data-testid"]||"separator",...i}));Xi.displayName=a.displayName;const Qi=s,ea=o,ta=l,ra=i.forwardRef(({className:e,...t},n)=>r.jsx(h,{className:Bi("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));ra.displayName=h.displayName;const na=fn("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ia=i.forwardRef(({side:e="right",className:t,children:n,...i},a)=>r.jsxs(ta,{children:[r.jsx(ra,{}),r.jsxs(c,{ref:a,className:Bi(na({side:e}),t),...i,children:[r.jsxs(u,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(d,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]}));ia.displayName=c.displayName;i.forwardRef(({className:e,...t},n)=>r.jsx(p,{ref:n,className:Bi("text-lg font-semibold text-foreground",e),...t})).displayName=p.displayName;function aa({className:e,...t}){return r.jsx("div",{className:Bi("animate-pulse rounded-md bg-primary/10",e),"data-testid":t["data-testid"]||"skeleton",...t})}i.forwardRef(({className:e,...t},n)=>r.jsx(f,{ref:n,className:Bi("text-sm text-muted-foreground",e),...t})).displayName=f.displayName;const sa=m,oa=g,la=v,ca=i.forwardRef(({className:e,sideOffset:t=4,...n},i)=>r.jsx(y,{children:r.jsx(b,{ref:i,sideOffset:t,className:Bi("z-50 overflow-hidden select-none rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));ca.displayName=b.displayName;const ua=i.createContext(null);function da(){const e=i.useContext(ua);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const ha=i.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:a,style:s,children:o,...l},c)=>{const u=function(){const[e,t]=i.useState(void 0);return i.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)"),r=()=>{t(window.innerWidth<768)};return e.addEventListener("change",r),t(window.innerWidth<768),()=>e.removeEventListener("change",r)},[]),!!e}(),[d,h]=i.useState(!1),[p,f]=i.useState(e),m=t??p,g=i.useCallback(e=>{const t="function"==typeof e?e(m):e;n?n(t):f(t),document.cookie=`sidebar:state=${t}; path=/; max-age=604800`},[n,m]),v=i.useCallback(()=>u?h(e=>!e):g(e=>!e),[u,g,h]);i.useEffect(()=>{const e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),v())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[v]);const y=m?"expanded":"collapsed",b=i.useMemo(()=>({state:y,open:m,setOpen:g,isMobile:u,openMobile:d,setOpenMobile:h,toggleSidebar:v}),[y,m,g,u,d,h,v]);return r.jsx(ua.Provider,{value:b,children:r.jsx(sa,{delayDuration:0,children:r.jsx("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...s},className:Bi("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-card",a),ref:c,...l,children:o})})})});ha.displayName="SidebarProvider";const pa=i.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:i,children:a,...s},o)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:d}=da();return"none"===n?r.jsx("div",{className:Bi("flex h-full w-[--sidebar-width] flex-col bg-card text-sidebar-foreground",i),ref:o,...s,children:a}):l?r.jsx(Qi,{open:u,onOpenChange:d,...s,children:r.jsx(ia,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-card p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:e,children:r.jsx("div",{className:"flex h-full w-full flex-col",children:a})})}):r.jsxs("div",{ref:o,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":"collapsed"===c?n:"","data-variant":t,"data-side":e,children:[r.jsx("div",{className:Bi("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===t||"inset"===t?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),r.jsx("div",{className:Bi("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex","left"===e?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===t||"inset"===t?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",i),...s,children:r.jsx("div",{"data-sidebar":"sidebar",className:"flex m-4 rounded-md w-full flex-col group-data-[variant=floating]:rounded-md group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:a})})]})});pa.displayName="Sidebar";i.forwardRef(({className:e,onClick:t,...n},i)=>{const{toggleSidebar:a}=da();return r.jsxs(Yi,{ref:i,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:Bi("h-7 w-7",e),onClick:e=>{t?.(e),a()},"data-testid":"sidebar-toggle",...n,children:[r.jsx(_,{}),r.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}).displayName="SidebarTrigger";i.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:i}=da();return r.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:i,title:"Toggle Sidebar",className:Bi("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-card-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-card","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})}).displayName="SidebarRail";const fa=i.forwardRef(({className:e,...t},n)=>r.jsx("main",{ref:n,className:Bi("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));fa.displayName="SidebarInset";i.forwardRef(({className:e,...t},n)=>r.jsx(Ji,{ref:n,"data-sidebar":"input",className:Bi("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t})).displayName="SidebarInput";const ma=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,"data-sidebar":"header",className:Bi("flex flex-col gap-2 p-2",e),...t}));ma.displayName="SidebarHeader";const ga=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,"data-sidebar":"footer",className:Bi("flex flex-col gap-2 p-2",e),...t}));ga.displayName="SidebarFooter";i.forwardRef(({className:e,...t},n)=>r.jsx(Xi,{ref:n,"data-sidebar":"separator",className:Bi("mx-2 w-auto bg-card-border",e),...t})).displayName="SidebarSeparator";const va=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,"data-sidebar":"content",className:Bi("flex min-h-0 flex-1 flex-col gap-2 overflow-y-auto overflow-x-hidden group-data-[collapsible=icon]:overflow-hidden",e),...t}));va.displayName="SidebarContent";const ya=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,"data-sidebar":"group",className:Bi("relative flex w-full min-w-0 flex-col p-0.5",e),...t}));ya.displayName="SidebarGroup";i.forwardRef(({className:e,asChild:t=!1,...i},a)=>{const s=t?n:"div";return r.jsx(s,{ref:a,"data-sidebar":"group-label",className:Bi("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...i})}).displayName="SidebarGroupLabel";i.forwardRef(({className:e,asChild:t=!1,...i},a)=>{const s=t?n:"button";return r.jsx(s,{ref:a,"data-sidebar":"group-action",className:Bi("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-card-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...i})}).displayName="SidebarGroupAction";const ba=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,"data-sidebar":"group-content",className:Bi("w-full text-sm p-0 m-0",e),...t}));ba.displayName="SidebarGroupContent";const _a=i.forwardRef(({className:e,...t},n)=>r.jsx("ul",{ref:n,"data-sidebar":"menu",className:Bi("flex w-full min-w-0 flex-col gap-0.5",e),...t}));_a.displayName="SidebarMenu";const wa=i.forwardRef(({className:e,...t},n)=>r.jsx("li",{ref:n,"data-sidebar":"menu-item",className:Bi("group/menu-item relative",e),...t}));wa.displayName="SidebarMenuItem";const xa=fn("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Ea=i.forwardRef(({asChild:e=!1,isActive:t=!1,variant:i="default",size:a="default",tooltip:s,className:o,...l},c)=>{const u=e?n:"button",{isMobile:d,state:h}=da(),p=r.jsx(u,{ref:c,"data-sidebar":"menu-button","data-size":a,"data-active":t,className:Bi(xa({variant:i,size:a}),o),...l});return s?("string"==typeof s&&(s={children:s}),r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:p}),r.jsx(ca,{side:"right",align:"center",hidden:"collapsed"!==h||d,...s})]})):p});Ea.displayName="SidebarMenuButton";i.forwardRef(({className:e,asChild:t=!1,showOnHover:i=!1,...a},s)=>{const o=t?n:"button";return r.jsx(o,{ref:s,"data-sidebar":"menu-action",className:Bi("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-card-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",i&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...a})}).displayName="SidebarMenuAction";i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:Bi("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t})).displayName="SidebarMenuBadge";const ka=i.forwardRef(({className:e,showIcon:t=!1,...n},a)=>{const s=i.useMemo(()=>`${Math.floor(40*Math.random())+50}%`,[]);return r.jsxs("div",{ref:a,"data-sidebar":"menu-skeleton",className:Bi("rounded-md h-8 flex gap-2 px-2 items-center",e),...n,children:[t&&r.jsx(aa,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),r.jsx(aa,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});ka.displayName="SidebarMenuSkeleton";i.forwardRef(({className:e,...t},n)=>r.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:Bi("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t})).displayName="SidebarMenuSub";i.forwardRef(({...e},t)=>r.jsx("li",{ref:t,...e})).displayName="SidebarMenuSubItem";i.forwardRef(({asChild:e=!1,size:t="md",isActive:i,className:a,...s},o)=>{const l=e?n:"a";return r.jsx(l,{ref:o,"data-sidebar":"menu-sub-button","data-size":t,"data-active":i,className:Bi("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-card-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-card-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-card-accent data-[active=true]:text-sidebar-accent-foreground","sm"===t&&"text-xs","md"===t&&"text-sm","group-data-[collapsible=icon]:hidden",a),...s})}).displayName="SidebarMenuSubButton";const Sa=fn("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Aa({className:e,variant:t,...n}){return r.jsx("div",{className:Bi(Sa({variant:t}),e),"data-testid":n["data-testid"]||"badge",...n})}const Ta=fn("text-sm font-normal text-muted-foreground leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Na=i.forwardRef(({className:e,...t},n)=>r.jsx(w,{ref:n,className:Bi(Ta(),e),...t}));Na.displayName=w.displayName;const Ia=({tag:e,onRemove:t})=>r.jsxs(Aa,{variant:"outline",className:"flex items-center gap-1.5 pr-1.5 text-sm py-1 px-2 transition-colors hover:bg-accent hover:text-accent-foreground",children:[e,r.jsxs(Yi,{type:"button",variant:"ghost",size:"icon",onClick:()=>t(e),className:"hover:bg-accent/20 rounded-full p-0.5 transition-colors h-auto w-auto min-w-0 min-h-0",children:[r.jsx(d,{className:"h-3 w-3"}),r.jsxs("span",{className:"sr-only",children:["Remove ",e]})]})]}),Ma=({tags:e,onRemove:t})=>r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map(e=>r.jsx(Ia,{tag:e,onRemove:t},e))}),Ca=({value:e,onChange:t,onKeyDown:n,onAdd:i})=>r.jsxs("div",{className:"relative",children:[r.jsx(Ji,{value:e,onChange:t,onKeyDown:n,placeholder:"Type and press Enter or click Add...",className:Bi("bg-background pr-16",!e&&"text-muted-foreground")}),e.trim()&&r.jsx(Yi,{size:"sm",onClick:i,className:"absolute top-1/2 -translate-y-1/2 right-2 h-7 px-3",children:"Add"})]});function ja({title:e,data:t,onChange:n}){const[a,s]=i.useState(""),o=()=>{const e=a.trim();e&&!t.includes(e)&&(n([...t,e]),s(""))};return r.jsxs("div",{className:"space-y-2",children:[r.jsx(Na,{children:e}),r.jsxs("div",{className:"p-2 bg-card rounded border border-input",children:[r.jsx(Ma,{tags:t,onRemove:e=>{n(t.filter(t=>t!==e))}}),r.jsx(Ca,{value:a,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),o())},onAdd:o})]})]})}const Oa=x,Ra=i.forwardRef(({className:e,...t},n)=>r.jsx(E,{ref:n,className:Bi("inline-flex items-center bg-transparent border-b border-sidebar-border w-full",e),...t}));Ra.displayName=E.displayName;const La=i.forwardRef(({className:e,...t},n)=>r.jsx(k,{ref:n,className:Bi("inline-flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium text-muted-foreground bg-transparent transition-all hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground data-[state=active]:border-b-2 data-[state=active]:border-b-primary relative",e),...t}));La.displayName=k.displayName;const Pa=i.forwardRef(({className:e,...t},n)=>r.jsx(S,{ref:n,className:Bi("text-foreground ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Pa.displayName=S.displayName;const Da=i.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:Bi("flex min-h-[120px] w-full rounded border border-input bg-card px-4 py-3 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,"data-testid":t["data-testid"]||"textarea",...t}));Da.displayName="Textarea";let $a=0;const za=new Map,Ba=e=>{if(za.has(e))return;const t=setTimeout(()=>{za.delete(e),Ga({type:"REMOVE_TOAST",toastId:e})},3e3);za.set(e,t)},Ua=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:r}=t;if(r)Ba(r);else for(const t of e.toasts)Ba(t.id);return{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},Fa=[];let Ha={toasts:[]};function Ga(e){Ha=Ua(Ha,e);for(const t of Fa)t(Ha)}function qa({...e}){const t=($a=($a+1)%Number.MAX_SAFE_INTEGER,$a.toString()),r=()=>Ga({type:"DISMISS_TOAST",toastId:t});return Ga({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>Ga({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function Va(){const[e,t]=i.useState(Ha);return i.useEffect(()=>(Fa.push(t),()=>{const e=Fa.indexOf(t);e>-1&&Fa.splice(e,1)}),[]),{...e,toast:qa,dismiss:e=>Ga({type:"DISMISS_TOAST",toastId:e})}}function Wa(e,t){try{const r=function(e){const t={id:e.id,name:e.name,username:e.username,system:e.system,templates:e.templates,bio:e.bio,messageExamples:e.messageExamples,postExamples:e.postExamples,topics:e.topics,adjectives:e.adjectives,knowledge:e.knowledge,plugins:e.plugins,settings:e.settings?{...e.settings}:void 0,style:e.style};if(t.settings&&"secrets"in t.settings){const{secrets:e,...r}=t.settings;t.settings=r}return Object.fromEntries(Object.entries(t).filter(([e,t])=>null!=t))}(e),n=function(e){const t=(new Date).toISOString().split("T")[0];return`${(e||"agent").replace(/[^a-zA-Z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").toLowerCase()}-${t}.json`}(e.name);return function(e,t){const r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}(r,n),t&&t({title:"Character Exported",description:`${e.name}'s character data has been downloaded as ${n}`}),{success:!0,filename:n}}catch(r){return console.error("Failed to export character:",r),t&&t({title:"Export Failed",description:"Failed to export character data. Please try again.",variant:"destructive"}),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}const Za=A,Ka=N,Ya=T,Ja=i.forwardRef(({className:e,children:t,...n},i)=>r.jsxs(I,{ref:i,className:Bi("flex h-12 w-full items-center justify-between whitespace-nowrap rounded border border-input bg-card px-4 py-3 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(M,{asChild:!0,children:r.jsx(C,{className:"h-4 w-4 opacity-50"})})]}));Ja.displayName=I.displayName;const Xa=i.forwardRef(({className:e,...t},n)=>r.jsx(U,{ref:n,className:Bi("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(F,{className:"h-4 w-4"})}));Xa.displayName=U.displayName;const Qa=i.forwardRef(({className:e,...t},n)=>r.jsx(H,{ref:n,className:Bi("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(C,{className:"h-4 w-4"})}));Qa.displayName=H.displayName;const es=i.forwardRef(({className:e,children:t,position:n="popper",...i},a)=>r.jsx(j,{children:r.jsxs(O,{ref:a,className:Bi("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-xl border border-input bg-card text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...i,children:[r.jsx(Xa,{}),r.jsx(R,{className:Bi("p-2","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(Qa,{})]})}));es.displayName=O.displayName;const ts=i.forwardRef(({className:e,...t},n)=>r.jsx(B,{ref:n,className:Bi("px-4 py-2 text-xs font-medium text-muted-foreground uppercase tracking-wider",e),...t}));ts.displayName=B.displayName;const rs=i.forwardRef(({className:e,children:t,...n},i)=>r.jsxs(L,{ref:i,className:Bi("relative flex w-full cursor-default select-none items-center rounded py-3 pl-4 pr-8 text-sm outline-none hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(P,{children:r.jsx(D,{className:"h-4 w-4"})})}),r.jsx($,{children:t})]}));rs.displayName=L.displayName;const ns=i.forwardRef(({className:e,...t},n)=>r.jsx(z,{ref:n,className:Bi("-mx-1 my-1 h-px bg-muted",e),...t}));ns.displayName=z.displayName;const is={elevenlabs:"@elizaos/plugin-elevenlabs",openai:"@elizaos/plugin-openai",none:""},as=[{value:"none",label:"No Voice",provider:"none"}],ss=[],os=[{value:"EXAVITQu4vr4xnSDxMaL",label:"ElevenLabs - Rachel (Default)",provider:"elevenlabs",gender:"female",language:"en",features:["natural","professional"]},{value:"21m00Tcm4TlvDq8ikWAM",label:"ElevenLabs - Adam",provider:"elevenlabs",gender:"male",language:"en",features:["natural","professional"]},{value:"AZnzlk1XvdvUeBnXmlld",label:"ElevenLabs - Domi",provider:"elevenlabs",gender:"female",language:"en",features:["natural","friendly"]},{value:"MF3mGyEYCl7XYWbV9V6O",label:"ElevenLabs - Elli",provider:"elevenlabs",gender:"female",language:"en",features:["natural","friendly"]},{value:"TxGEqnHWrfWFTfGW9XjX",label:"ElevenLabs - Josh",provider:"elevenlabs",gender:"male",language:"en",features:["natural","professional"]}],ls=[{value:"alloy",label:"OpenAI - Alloy",provider:"openai",gender:"female",language:"en",features:["natural","versatile"]},{value:"echo",label:"OpenAI - Echo",provider:"openai",gender:"male",language:"en",features:["natural","professional"]},{value:"fable",label:"OpenAI - Fable",provider:"openai",gender:"male",language:"en",features:["natural","narrative"]},{value:"onyx",label:"OpenAI - Onyx",provider:"openai",gender:"male",language:"en",features:["natural","deep"]},{value:"nova",label:"OpenAI - Nova",provider:"openai",gender:"female",language:"en",features:["natural","friendly"]},{value:"shimmer",label:"OpenAI - Shimmer",provider:"openai",gender:"female",language:"en",features:["natural","bright"]},{value:"ash",label:"OpenAI - Ash",provider:"openai",gender:"male",language:"en",features:["natural","calm"]},{value:"coral",label:"OpenAI - Coral",provider:"openai",gender:"female",language:"en",features:["natural","warm"]},{value:"sage",label:"OpenAI - Sage",provider:"openai",gender:"female",language:"en",features:["natural","wise"]},{value:"ballad",label:"OpenAI - Ballad",provider:"openai",gender:"male",language:"en",features:["natural","melodic"]}],cs=()=>[...as,...ss,...os,...ls],us=e=>cs().find(t=>t.value===e);function ds({...e}){return r.jsx(q,{"data-slot":"dropdown-menu",...e})}function hs({...e}){return r.jsx(V,{"data-slot":"dropdown-menu-trigger",...e})}function ps({className:e,sideOffset:t=4,onPointerDown:n,onPointerDownOutside:a,onCloseAutoFocus:s,...o}){const l=i.useRef(!1),c=i.useCallback(e=>{l.current=!0,n?.(e)},[n]),u=i.useCallback(e=>{l.current=!0,a?.(e)},[a]),d=i.useCallback(e=>{if(s)return s(e);l.current&&(e.preventDefault(),l.current=!1)},[s]);return r.jsx(W,{children:r.jsx(Z,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Bi("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 overflow-hidden rounded-md border p-1 shadow-lg",e),onPointerDown:c,onPointerDownOutside:u,onCloseAutoFocus:d,...o})})}function fs({className:e,inset:t,variant:n="default",...i}){return r.jsx(K,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:Bi("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground data-[variant=destructive]:font-normal relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm font-medium outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0",e),...i})}function ms({className:e,inset:t,...n}){return r.jsx(J,{"data-slot":"dropdown-menu-label","data-inset":t,className:Bi("text-muted-foreground px-2 py-1.5 text-xs font-medium data-[inset]:pl-8",e),...n})}function gs({className:e,...t}){return r.jsx(Y,{"data-slot":"dropdown-menu-separator",className:Bi("bg-border -mx-1 my-1 h-px",e),...t})}const vs=[{id:"none",label:"None (Start Blank)",description:"Start with an empty configuration",template:{name:"",username:"",system:"",bio:[],topics:[],adjectives:[],plugins:["@elizaos/plugin-sql","@elizaos/plugin-openai","@elizaos/plugin-bootstrap"],settings:{secrets:{}}}},{id:"discord-bot",label:"Discord Bot",description:"Interactive Discord bot that handles server interactions",template:{name:"Discord Assistant",username:"discordbot",system:"You are a Discord bot designed to assist users in a Discord server. You respond to messages, handle commands, and provide helpful information to community members. You should be friendly, helpful, and maintain a consistent personality. Focus on providing value to the community through clear, concise responses.",bio:["Helpful Discord community assistant","Responds to commands and natural language queries","Assists with server-specific information and resources","Maintains a friendly and helpful tone"],topics:["Discord server","Community assistance","Command handling","Server information"],adjectives:["Helpful","Responsive","Friendly","Informative","Reliable"],plugins:["@elizaos/plugin-sql","@elizaos/plugin-openai","@elizaos/plugin-bootstrap","@elizaos/plugin-discord"],style:{all:["Be friendly and helpful","Use clear, concise language","Follow Discord conventions"],chat:["Respond promptly to queries","Use appropriate formatting for clarity","Reference relevant commands when helpful"],post:["Structure longer responses with clear sections","Use embeds for rich content when appropriate"]},settings:{secrets:{}}}},{id:"telegram-bot",label:"Telegram Bot",description:"Interactive bot for Telegram channels and groups",template:{name:"Telegram Assistant",username:"telegrambot",system:"You are a helpful Telegram bot designed to assist users in channels and groups. You respond to commands and natural language queries, providing information, assistance, and engaging with users in a friendly manner. You can handle both one-on-one conversations and group interactions, adapting your tone and content accordingly while respecting privacy and community guidelines.",bio:["Interactive Telegram bot","Assists users in channels and groups","Responds to commands and natural language"],topics:["Channel information","User assistance","Content sharing","Group moderation","FAQ responses"],adjectives:["Helpful","Responsive","Friendly","Informative","Reliable"],plugins:["@elizaos/plugin-sql","@elizaos/plugin-openai","@elizaos/plugin-bootstrap","@elizaos/plugin-telegram"],style:{all:["Be concise and clear","Use Telegram-friendly formatting","Respond promptly to user queries"],chat:["Handle commands efficiently","Include relevant emoji when appropriate","Maintain conversation context"],post:["Structure longer messages clearly","Use formatting for better readability","Include relevant links when helpful"]},settings:{clients:["telegram"],allowDirectMessages:!0,shouldOnlyJoinInAllowedGroups:!1,messageTrackingLimit:100,secrets:{}}}},{id:"slack-bot",label:"Slack Bot",description:"Interactive bot for Slack workspaces",template:{name:"Slack Assistant",username:"slackbot",system:"You are a specialized assistant for Slack workspaces. You help teams by answering questions, providing information, and facilitating collaboration. You can respond to direct messages and channel mentions, maintaining a helpful and professional tone that aligns with the organization's culture. Keep responses concise and relevant to the conversation context.",bio:["Specialized Slack workspace assistant","Facilitates team collaboration","Provides timely responses to queries"],topics:["Workspace information","Team collaboration","Company policies","Resource access","Task management"],adjectives:["Responsive","Helpful","Organized","Team-oriented","Professional"],plugins:["@elizaos/plugin-sql","@elizaos/plugin-openai","@elizaos/plugin-bootstrap","@elizaos/plugin-slack"],style:{all:["Be concise and clear","Match the tone of the workspace","Use Slack-appropriate formatting"],chat:["Reference relevant messages when appropriate","Use thread replies for detailed responses","Include emojis when fitting the workspace culture"],post:["Structure information with clear sections","Use bullet points for lists","Include relevant links when helpful"]},settings:{secrets:{}}}},{id:"twitter-agent",label:"Twitter/X Agent",description:"Manages Twitter presence and engagement",template:{name:"Twitter Agent",username:"twitteragent",system:"You are a Twitter engagement specialist designed to help create and manage effective Twitter content. You assist with drafting tweets, responding to mentions, analyzing engagement metrics, and suggesting content strategies. Your tone should match the brand voice while maintaining authenticity and encouraging audience interaction. Keep tweets concise and impactful within character limits.",bio:["Twitter engagement specialist","Creates compelling social content","Manages audience interactions"],topics:["Tweet creation","Audience engagement","Content strategy","Trend analysis","Brand voice"],adjectives:["Engaging","Concise","Strategic","Conversational","Creative"],plugins:["@elizaos/plugin-sql","@elizaos/plugin-openai","@elizaos/plugin-bootstrap","@elizaos/plugin-twitter"],style:{all:["Be concise and impactful","Stay within character limits","Use platform-appropriate formatting"],chat:["Match brand voice in replies","Be conversational and authentic","Use hashtags strategically"],post:["Draft varied content types","Suggest engaging visuals or polls","Include call-to-actions when appropriate"]},settings:{TWITTER_DRY_RUN:!1,MAX_TWEET_LENGTH:280,TWITTER_ENABLE_POST_GENERATION:!0,TWITTER_POST_INTERVAL_MIN:90,TWITTER_POST_INTERVAL_MAX:180,secrets:{}}}},{id:"github-bot",label:"GitHub Repository Assistant",description:"Helps manage GitHub repositories and development workflows",template:{name:"GitHub Assistant",username:"githubasst",system:"You are a GitHub repository assistant designed to help development teams manage their workflow and codebase. You can assist with pull request reviews, issue triage, documentation updates, and providing information about repository structure and conventions. Maintain a technical but approachable tone, and prioritize accuracy in all technical information.",bio:["GitHub repository management specialist","Assists with development workflows","Provides code and documentation support"],topics:["Pull requests","Issue tracking","Repository structure","Code reviews","Development workflows"],adjectives:["Technical","Precise","Helpful","Organized","Knowledgeable"],plugins:["@elizaos/plugin-sql","@elizaos/plugin-openai","@elizaos/plugin-bootstrap","@elizaos/plugin-github"],style:{all:["Use technically precise language","Reference GitHub concepts appropriately","Link to relevant documentation when helpful"],chat:["Be concise in comments","Format code snippets properly","Summarize technical points clearly"],post:["Structure longer responses with clear headings","Use code blocks with syntax highlighting","Link to specific lines of code when relevant"]},settings:{secrets:{}}}},{id:"instagram-agent",label:"Instagram Content Manager",description:"Creates and manages content for Instagram",template:{name:"Instagram Manager",username:"instagrammgr",system:"You are an Instagram content specialist designed to help create and manage engaging Instagram presence. You assist with content creation, caption writing, hashtag strategy, engagement tactics, and understanding analytics. Your approach emphasizes visual storytelling, authenticity, and building connections with followers. Maintain a voice that matches the brand identity while adapting to Instagram's evolving features and trends.",bio:["Instagram content creation specialist","Develops engaging visual storytelling","Optimizes profile engagement"],topics:["Content creation","Caption writing","Hashtag strategy","Engagement tactics","Visual aesthetics"],adjectives:["Creative","Visual","Engaging","Trend-aware","Authentic"],plugins:["@elizaos/plugin-sql","@elizaos/plugin-openai","@elizaos/plugin-bootstrap","@elizaos/plugin-instagram"],style:{all:["Balance visual description with compelling text","Maintain brand voice consistency","Consider current platform trends"],chat:["Provide actionable content suggestions","Reference visual elements clearly","Include relevant hashtag recommendations"],post:["Craft captions that enhance visual content","Suggest content series and themes","Balance promotional with authentic content"]},settings:{POST_INTERVAL_MIN:90,POST_INTERVAL_MAX:180,ENABLE_ACTION_PROCESSING:!0,ACTION_INTERVAL:5,MAX_ACTIONS_PROCESSING:1,secrets:{}}}}];function ys(e){return vs.find(t=>t.id===e)}const bs=X,_s=Q,ws=i.forwardRef(({className:e,...t},n)=>r.jsx(ae,{className:Bi("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));ws.displayName=ae.displayName;const xs=i.forwardRef(({className:e,...t},n)=>r.jsxs(_s,{children:[r.jsx(ws,{}),r.jsx(ee,{ref:n,className:Bi("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));xs.displayName=ee.displayName;const Es=({className:e,...t})=>r.jsx("div",{className:Bi("flex flex-col space-y-2 text-center sm:text-left",e),...t});Es.displayName="AlertDialogHeader";const ks=({className:e,...t})=>r.jsx("div",{className:Bi("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ks.displayName="AlertDialogFooter";const Ss=i.forwardRef(({className:e,...t},n)=>r.jsx(te,{ref:n,className:Bi("text-lg font-semibold",e),...t}));Ss.displayName=te.displayName;const As=i.forwardRef(({className:e,...t},n)=>r.jsx(re,{ref:n,className:Bi("text-sm text-muted-foreground",e),...t}));As.displayName=re.displayName;const Ts=i.forwardRef(({className:e,...t},n)=>r.jsx(ie,{ref:n,className:Bi(Ki(),e),...t}));Ts.displayName=ie.displayName;const Ns=i.forwardRef(({className:e,...t},n)=>r.jsx(ne,{ref:n,className:Bi(Ki({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));function Is({open:e,onOpenChange:t,missingSecrets:n,onConfirm:i,onCancel:a}){return r.jsx(bs,{open:e,onOpenChange:t,children:r.jsxs(xs,{children:[r.jsxs(Es,{children:[r.jsxs(Ss,{className:"flex items-center gap-2",children:[r.jsx(se,{className:"h-5 w-5 text-yellow-500"}),"Missing Required Configuration"]}),r.jsxs(As,{className:"space-y-3",children:[r.jsx("p",{children:"The following required secrets are missing or empty. Your agent may not function properly without these values."}),r.jsx("div",{className:"bg-muted rounded-md p-3 space-y-2",children:n.map(e=>r.jsxs("div",{className:"text-sm",children:[r.jsx("code",{className:"font-mono font-semibold",children:e.name}),e.plugin&&r.jsxs("span",{className:"text-muted-foreground ml-2",children:["(required by ",e.plugin,")"]}),e.description&&r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.description})]},e.name))}),r.jsx("p",{className:"text-sm",children:"Do you want to save anyway?"})]})]}),r.jsxs(ks,{children:[r.jsx(Ns,{onClick:a,children:"Go Back"}),r.jsx(Ts,{onClick:i,className:"bg-yellow-600 hover:bg-yellow-700",children:"Save Anyway"})]})]})})}Ns.displayName=ne.displayName;var Ms,Cs={},js=Object.create,{getPrototypeOf:Os,defineProperty:Rs,getOwnPropertyNames:Ls,getOwnPropertyDescriptor:Ps}=Object,Ds=Object.prototype.hasOwnProperty,$s=(e,t,r)=>{r=null!=e?js(Os(e)):{};let n=!t&&e&&e.__esModule?r:Rs(r,"default",{value:e,enumerable:!0});for(let i of Ls(e))Ds.call(n,i)||Rs(n,i,{get:()=>e[i],enumerable:!0});return n},zs=new WeakMap,Bs=e=>{var t,r=zs.get(e);return r||(r=Rs({},"__esModule",{value:!0}),(e&&"object"==typeof e||"function"==typeof e)&&Ls(e).map(n=>!Ds.call(r,n)&&Rs(r,n,{get:()=>e[n],enumerable:!(t=Ps(e,n))||t.enumerable})),zs.set(e,r),r)},Us=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Fs=(e,t)=>{for(var r in t)Rs(e,r,{get:t[r],enumerable:!0,configurable:!0,set:e=>t[r]=()=>e})},Hs=(e,t)=>()=>(e&&(t=e(e=0)),t),Gs=(Ms=function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')},typeof require<"u"?require:typeof Proxy<"u"?new Proxy(Ms,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):Ms),qs=Us((e,t)=>{t.exports=function(e,t){if("string"!=typeof e)throw TypeError("Expected a string");return t=typeof t>"u"?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}}),Vs=Us((e,t)=>{var r=/[\p{Lu}]/u,n=/[\p{Ll}]/u,i=/^[\p{Lu}](?![\p{Lu}])/gu,a=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,o=new RegExp("^"+s.source),l=new RegExp(s.source+a.source,"gu"),c=new RegExp("\\d+"+a.source,"gu"),u=(e,t)=>{if("string"!=typeof e&&!Array.isArray(e))throw TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},e=Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e.length).join("-"):e.trim(),0===e.length)return"";let a=!1===t.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t.locale),s=!1===t.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t.locale);return 1===e.length?t.pascalCase?s(e):a(e):(e!==a(e)&&(e=((e,t,i)=>{let a=!1,s=!1,o=!1;for(let l=0;l<e.length;l++){let c=e[l];a&&r.test(c)?(e=e.slice(0,l)+"-"+e.slice(l),a=!1,o=s,s=!0,l++):s&&o&&n.test(c)?(e=e.slice(0,l-1)+"-"+e.slice(l-1),o=s,s=!1,a=!0):(a=t(c)===c&&i(c)!==c,o=s,s=i(c)===c&&t(c)!==c)}return e})(e,a,s)),e=e.replace(o,""),e=t.preserveConsecutiveUppercase?((e,t)=>(i.lastIndex=0,e.replace(i,e=>t(e))))(e,a):a(e),t.pascalCase&&(e=s(e.charAt(0))+e.slice(1)),((e,t)=>(l.lastIndex=0,c.lastIndex=0,e.replace(l,(e,r)=>t(r)).replace(c,e=>t(e))))(e,s))};t.exports=u,t.exports.default=u}),Ws=Us((e,t)=>{function r(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},r.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},r.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],a=i.message,s=(e[a]||0)+1;e[a]=s,s>=r&&(t=i,r=s)}return t}}),Zs=Us(e=>{var t=Ws();e.operation=function(r){var n=e.timeouts(r);return new t(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},e.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<t.retries;i++)n.push(this.createTimeout(i,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(i,t)),n.sort(function(e,t){return e-t}),n},e.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout)},e.wrap=function(t,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],t)"function"==typeof t[i]&&n.push(i);for(var a=0;a<n.length;a++){var s=n[a],o=t[s];t[s]=function(n){var i=e.operation(r),a=Array.prototype.slice.call(arguments,1),s=a.pop();a.push(function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),s.apply(this,arguments))}),i.attempt(function(){n.apply(t,a)})}.bind(t,o),t[s].options=r}}}),Ks=Us((e,t)=>{var r=Zs(),n=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class i extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}var a=(e,t)=>new Promise((a,s)=>{t={onFailedAttempt:()=>{},retries:10,...t};let o=r.operation(t);o.attempt(async r=>{try{a(await e(r))}catch(J9){if(!(J9 instanceof Error))return void s(TypeError(`Non-error was thrown: "${J9}". You should only throw errors.`));if(J9 instanceof i)o.stop(),s(J9.originalError);else if(J9 instanceof TypeError&&!(e=>n.includes(e))(J9.message))o.stop(),s(J9);else{((e,t,r)=>{let n=r.retries-(t-1);e.attemptNumber=t,e.retriesLeft=n})(J9,r,t);try{await t.onFailedAttempt(J9)}catch($re){return void s($re)}o.retry(J9)||s(o.mainError())}}})});t.exports=a,t.exports.default=a,t.exports.AbortError=i}),Ys=Us((e,t)=>{var r=Object.prototype.hasOwnProperty,n="~";function i(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,i,s){if("function"!=typeof r)throw TypeError("The listener must be a function");var o=new a(r,i||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),l.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)r.call(e,t)&&i.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},l.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,s=Array(a);i<a;i++)s[i]=r[i].fn;return s},l.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,i,a,s){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,a),!0;case 6:return u.fn.call(u.context,t,r,i,a,s),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},l.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:o(this,a)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,typeof t<"u"&&(t.exports=l)}),Js=Us((e,t)=>{t.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))}),Xs=Us((e,t)=>{var r=Js();class n extends Error{constructor(e){super(e),this.name="TimeoutError"}}var i=(e,t,i)=>new Promise((a,s)=>{if("number"!=typeof t||t<0)throw TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void a(e);let o=setTimeout(()=>{if("function"==typeof i){try{a(i())}catch(Pre){s(Pre)}return}let r=i instanceof Error?i:new n("string"==typeof i?i:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),s(r)},t);r(e.then(a,s),()=>{clearTimeout(o)})});t.exports=i,t.exports.default=i,t.exports.TimeoutError=n}),Qs=Us(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t,r){let n=0,i=e.length;for(;i>0;){let a=i/2|0,s=n+a;r(e[s],t)<=0?(n=++s,i-=a+1):i=a}return n}}),eo=Us(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Qs();e.default=class{constructor(){this._queue=[]}enqueue(e,r){let n={priority:(r=Object.assign({priority:0},r)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority)return void this._queue.push(n);let i=t.default(this._queue,n,(e,t)=>t.priority-e.priority);this._queue.splice(i,0,n)}dequeue(){let e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}}),to=Us(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=Ys(),r=Xs(),n=eo(),i=()=>{},a=new r.TimeoutError;e.default=class extends t{constructor(e){var t,r,a,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=i,this._resolveIdle=i,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},e)).intervalCap&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(s=null===(a=e.interval)||void 0===a?void 0:a.toString())&&void 0!==s?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=i,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=i,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(void 0===this._intervalId){let t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,i)=>{this._queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{let s=void 0===this._timeout&&void 0===t.timeout?e():r.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&i(a)});n(await s)}catch(s){i(s)}this._next()},t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}}),ro=Us((e,t)=>{var r=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}),no=Us((e,t)=>{var r="object"==typeof process&&Cs&&Cs.NODE_DEBUG&&/\bsemver\b/i.test(Cs.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};t.exports=r}),io=Us((e,t)=>{var{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=ro(),a=no(),s=(e=t.exports={}).re=[],o=e.safeRe=[],l=e.src=[],c=e.safeSrc=[],u=e.t={},d=0,h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[h,n]],f=(e,t,r)=>{let n=(e=>{for(let[t,r]of p)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=d++;a(e,i,t),u[e]=i,l[i]=t,c[i]=n,s[i]=new RegExp(t,r?"g":void 0),o[i]=new RegExp(n,r?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),f("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${h}+`),f("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),f("FULL",`^${l[u.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),f("LOOSE",`^${l[u.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),f("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),f("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",l[u.COERCE],!0),f("COERCERTLFULL",l[u.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",f("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",f("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}),ao=Us((e,t)=>{var r=Object.freeze({loose:!0}),n=Object.freeze({});t.exports=e=>e?"object"!=typeof e?r:e:n}),so=Us((e,t)=>{var r=/^[0-9]+$/,n=(e,t)=>{if("number"==typeof e&&"number"==typeof t)return e===t?0:e<t?-1:1;let n=r.test(e),i=r.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1};t.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}}),oo=Us((e,t)=>{var r=no(),{MAX_LENGTH:n,MAX_SAFE_INTEGER:i}=ro(),{safeRe:a,t:s}=io(),o=ao(),{compareIdentifiers:l}=so();class c{constructor(e,t){if(t=o(t),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>n)throw TypeError(`version is longer than ${n} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let l=e.trim().match(t.loose?a[s.LOOSE]:a[s.FULL]);if(!l)throw TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+l[1],this.minor=+l[2],this.patch=+l[3],this.major>i||this.major<0)throw TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw TypeError("Invalid patch version");l[4]?this.prerelease=l[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=l[5]?l[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return l(n,i)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{let n=this.build[t],i=e.build[t];if(r("build compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return l(n,i)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(t){let e=`-${t}`.match(this.options.loose?a[s.PRERELEASELOOSE]:a[s.PRERELEASE]);if(!e||e[1]!==t)throw Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===l(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}t.exports=c}),lo=Us((e,t)=>{var r=oo();t.exports=(e,t,n=!1)=>{if(e instanceof r)return e;try{return new r(e,t)}catch(Fre){if(!n)return null;throw Fre}}}),co=Us((e,t)=>{var r=lo();t.exports=(e,t)=>{let n=r(e,t);return n?n.version:null}}),uo=Us((e,t)=>{var r=lo();t.exports=(e,t)=>{let n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}}),ho=Us((e,t)=>{var r=oo();t.exports=(e,t,n,i,a)=>{"string"==typeof n&&(a=i,i=n,n=void 0);try{return new r(e instanceof r?e.version:e,n).inc(t,i,a).version}catch(s){return null}}}),po=Us((e,t)=>{var r=lo();t.exports=(e,t)=>{let n=r(e,null,!0),i=r(t,null,!0),a=n.compare(i);if(0===a)return null;let s=a>0,o=s?n:i,l=s?i:n,c=!!o.prerelease.length;if(l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(o))return l.minor&&!l.patch?"minor":"patch"}let u=c?"pre":"";return n.major!==i.major?u+"major":n.minor!==i.minor?u+"minor":n.patch!==i.patch?u+"patch":"prerelease"}}),fo=Us((e,t)=>{var r=oo();t.exports=(e,t)=>new r(e,t).major}),mo=Us((e,t)=>{var r=oo();t.exports=(e,t)=>new r(e,t).minor}),go=Us((e,t)=>{var r=oo();t.exports=(e,t)=>new r(e,t).patch}),vo=Us((e,t)=>{var r=lo();t.exports=(e,t)=>{let n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}}),yo=Us((e,t)=>{var r=oo();t.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))}),bo=Us((e,t)=>{var r=yo();t.exports=(e,t,n)=>r(t,e,n)}),_o=Us((e,t)=>{var r=yo();t.exports=(e,t)=>r(e,t,!0)}),wo=Us((e,t)=>{var r=oo();t.exports=(e,t,n)=>{let i=new r(e,n),a=new r(t,n);return i.compare(a)||i.compareBuild(a)}}),xo=Us((e,t)=>{var r=wo();t.exports=(e,t)=>e.sort((e,n)=>r(e,n,t))}),Eo=Us((e,t)=>{var r=wo();t.exports=(e,t)=>e.sort((e,n)=>r(n,e,t))}),ko=Us((e,t)=>{var r=yo();t.exports=(e,t,n)=>r(e,t,n)>0}),So=Us((e,t)=>{var r=yo();t.exports=(e,t,n)=>r(e,t,n)<0}),Ao=Us((e,t)=>{var r=yo();t.exports=(e,t,n)=>0===r(e,t,n)}),To=Us((e,t)=>{var r=yo();t.exports=(e,t,n)=>0!==r(e,t,n)}),No=Us((e,t)=>{var r=yo();t.exports=(e,t,n)=>r(e,t,n)>=0}),Io=Us((e,t)=>{var r=yo();t.exports=(e,t,n)=>r(e,t,n)<=0}),Mo=Us((e,t)=>{var r=Ao(),n=To(),i=ko(),a=No(),s=So(),o=Io();t.exports=(e,t,l,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof l&&(l=l.version),e===l;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof l&&(l=l.version),e!==l;case"":case"=":case"==":return r(e,l,c);case"!=":return n(e,l,c);case">":return i(e,l,c);case">=":return a(e,l,c);case"<":return s(e,l,c);case"<=":return o(e,l,c);default:throw TypeError(`Invalid operator: ${t}`)}}}),Co=Us((e,t)=>{var r=oo(),n=lo(),{safeRe:i,t:a}=io();t.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let s=null;if((t=t||{}).rtl){let r,n=t.includePrerelease?i[a.COERCERTLFULL]:i[a.COERCERTL];for(;(r=n.exec(e))&&(!s||s.index+s[0].length!==e.length);)s&&r.index+r[0].length===s.index+s[0].length||(s=r),n.lastIndex=r.index+r[1].length+r[2].length;n.lastIndex=-1}else s=e.match(t.includePrerelease?i[a.COERCEFULL]:i[a.COERCE]);if(null===s)return null;let o=s[2],l=s[3]||"0",c=s[4]||"0",u=t.includePrerelease&&s[5]?`-${s[5]}`:"",d=t.includePrerelease&&s[6]?`+${s[6]}`:"";return n(`${o}.${l}.${c}${u}${d}`,t)}}),jo=Us((e,t)=>{t.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}}),Oo=Us((e,t)=>{var r=/\s+/g;class n{constructor(e,t){if(t=a(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(r," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!g(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1)for(let t of this.set)if(1===t.length&&v(t[0])){this.set=[t];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&f)|(this.options.loose&&m))+":"+e,r=i.get(t);if(r)return r;let n=this.options.loose,a=n?c[u.HYPHENRANGELOOSE]:c[u.HYPHENRANGE];e=e.replace(a,I(this.options.includePrerelease)),o("hyphen replace",e),e=e.replace(c[u.COMPARATORTRIM],d),o("comparator trim",e),e=e.replace(c[u.TILDETRIM],h),o("tilde trim",e),e=e.replace(c[u.CARETTRIM],p),o("caret trim",e);let l=e.split(" ").map(e=>b(e,this.options)).join(" ").split(/\s+/).map(e=>N(e,this.options));n&&(l=l.filter(e=>(o("loose invalid filter",e,this.options),!!e.match(c[u.COMPARATORLOOSE])))),o("range list",l);let v=new Map,y=l.map(e=>new s(e,this.options));for(let i of y){if(g(i))return[i];v.set(i.value,i)}v.size>1&&v.has("")&&v.delete("");let _=[...v.values()];return i.set(t,_),_}intersects(e,t){if(!(e instanceof n))throw TypeError("a Range is required");return this.set.some(r=>y(r,t)&&e.set.some(e=>y(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new l(e,this.options)}catch(xre){return!1}for(let t=0;t<this.set.length;t++)if(M(this.set[t],e,this.options))return!0;return!1}}t.exports=n;var i=new(jo()),a=ao(),s=Ro(),o=no(),l=oo(),{safeRe:c,t:u,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:p}=io(),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:m}=ro(),g=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,y=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(e=>i.intersects(e,t)),i=n.pop();return r},b=(e,t)=>(e=e.replace(c[u.BUILD],""),o("comp",e,t),e=E(e,t),o("caret",e),e=w(e,t),o("tildes",e),e=S(e,t),o("xrange",e),e=T(e,t),o("stars",e),e),_=e=>!e||"x"===e.toLowerCase()||"*"===e,w=(e,t)=>e.trim().split(/\s+/).map(e=>x(e,t)).join(" "),x=(e,t)=>{let r=t.loose?c[u.TILDELOOSE]:c[u.TILDE];return e.replace(r,(t,r,n,i,a)=>{let s;return o("tilde",e,t,r,n,i,a),_(r)?s="":_(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:_(i)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:a?(o("replaceTilde pr",a),s=`>=${r}.${n}.${i}-${a} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,o("tilde return",s),s})},E=(e,t)=>e.trim().split(/\s+/).map(e=>k(e,t)).join(" "),k=(e,t)=>{o("caret",e,t);let r=t.loose?c[u.CARETLOOSE]:c[u.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,i,a,s)=>{let l;return o("caret",e,t,r,i,a,s),_(r)?l="":_(i)?l=`>=${r}.0.0${n} <${+r+1}.0.0-0`:_(a)?l="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:s?(o("replaceCaret pr",s),l="0"===r?"0"===i?`>=${r}.${i}.${a}-${s} <${r}.${i}.${+a+1}-0`:`>=${r}.${i}.${a}-${s} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${a}-${s} <${+r+1}.0.0-0`):(o("no pr"),l="0"===r?"0"===i?`>=${r}.${i}.${a}${n} <${r}.${i}.${+a+1}-0`:`>=${r}.${i}.${a}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${a} <${+r+1}.0.0-0`),o("caret return",l),l})},S=(e,t)=>(o("replaceXRanges",e,t),e.split(/\s+/).map(e=>A(e,t)).join(" ")),A=(e,t)=>{e=e.trim();let r=t.loose?c[u.XRANGELOOSE]:c[u.XRANGE];return e.replace(r,(r,n,i,a,s,l)=>{o("xRange",e,r,n,i,a,s,l);let c=_(i),u=c||_(a),d=u||_(s),h=d;return"="===n&&h&&(n=""),l=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(u&&(a=0),s=0,">"===n?(n=">=",u?(i=+i+1,a=0,s=0):(a=+a+1,s=0)):"<="===n&&(n="<",u?i=+i+1:a=+a+1),"<"===n&&(l="-0"),r=`${n+i}.${a}.${s}${l}`):u?r=`>=${i}.0.0${l} <${+i+1}.0.0-0`:d&&(r=`>=${i}.${a}.0${l} <${i}.${+a+1}.0-0`),o("xRange return",r),r})},T=(e,t)=>(o("replaceStars",e,t),e.trim().replace(c[u.STAR],"")),N=(e,t)=>(o("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?u.GTE0PRE:u.GTE0],"")),I=e=>(t,r,n,i,a,s,o,l,c,u,d,h)=>`${r=_(n)?"":_(i)?`>=${n}.0.0${e?"-0":""}`:_(a)?`>=${n}.${i}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=_(c)?"":_(u)?`<${+c+1}.0.0-0`:_(d)?`<${c}.${+u+1}.0-0`:h?`<=${c}.${u}.${d}-${h}`:e?`<${c}.${u}.${+d+1}-0`:`<=${l}`}`.trim(),M=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(o(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}}),Ro=Us((e,t)=>{var r=Symbol("SemVer ANY");class n{static get ANY(){return r}constructor(e,t){if(t=i(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),l("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(e){let t=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],n=e.match(t);if(!n)throw TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new c(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(l("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(xre){return!1}return o(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(e.value,t).test(this.value):""===e.operator?""===e.value||new u(this.value,t).test(e.semver):(!(t=i(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(o(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(o(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}t.exports=n;var i=ao(),{safeRe:a,t:s}=io(),o=Mo(),l=no(),c=oo(),u=Oo()}),Lo=Us((e,t)=>{var r=Oo();t.exports=(e,t,n)=>{try{t=new r(t,n)}catch(Fre){return!1}return t.test(e)}}),Po=Us((e,t)=>{var r=Oo();t.exports=(e,t)=>new r(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))}),Do=Us((e,t)=>{var r=oo(),n=Oo();t.exports=(e,t,i)=>{let a=null,s=null,o=null;try{o=new n(t,i)}catch(J9){return null}return e.forEach(e=>{o.test(e)&&(a&&-1!==s.compare(e)||(a=e,s=new r(a,i)))}),a}}),$o=Us((e,t)=>{var r=oo(),n=Oo();t.exports=(e,t,i)=>{let a=null,s=null,o=null;try{o=new n(t,i)}catch(J9){return null}return e.forEach(e=>{o.test(e)&&(a&&1!==s.compare(e)||(a=e,s=new r(a,i)))}),a}}),zo=Us((e,t)=>{var r=oo(),n=Oo(),i=ko();t.exports=(e,t)=>{e=new n(e,t);let a=new r("0.0.0");if(e.test(a))return a;if(a=new r("0.0.0-0"),e.test(a))return a;a=null;for(let n=0;n<e.set.length;++n){let t=e.set[n],s=null;t.forEach(e=>{let t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!i(t,s)||(s=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),!s||a&&!i(a,s)||(a=s)}return a&&e.test(a)?a:null}}),Bo=Us((e,t)=>{var r=Oo();t.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(ere){return null}}}),Uo=Us((e,t)=>{var r=oo(),n=Ro(),{ANY:i}=n,a=Oo(),s=Lo(),o=ko(),l=So(),c=Io(),u=No();t.exports=(e,t,d,h)=>{let p,f,m,g,v;switch(e=new r(e,h),t=new a(t,h),d){case">":p=o,f=c,m=l,g=">",v=">=";break;case"<":p=l,f=u,m=o,g="<",v="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,h))return!1;for(let r=0;r<t.set.length;++r){let a=t.set[r],s=null,o=null;if(a.forEach(e=>{e.semver===i&&(e=new n(">=0.0.0")),s=s||e,o=o||e,p(e.semver,s.semver,h)?s=e:m(e.semver,o.semver,h)&&(o=e)}),s.operator===g||s.operator===v)return!1;if((!o.operator||o.operator===g)&&f(e,o.semver))return!1;if(o.operator===v&&m(e,o.semver))return!1}return!0}}),Fo=Us((e,t)=>{var r=Uo();t.exports=(e,t,n)=>r(e,t,">",n)}),Ho=Us((e,t)=>{var r=Uo();t.exports=(e,t,n)=>r(e,t,"<",n)}),Go=Us((e,t)=>{var r=Oo();t.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t,n))}),qo=Us((e,t)=>{var r=Lo(),n=yo();t.exports=(e,t,i)=>{let a=[],s=null,o=null,l=e.sort((e,t)=>n(e,t,i));for(let n of l)r(n,t,i)?(o=n,s||(s=n)):(o&&a.push([s,o]),o=null,s=null);s&&a.push([s,null]);let c=[];for(let[r,n]of a)r===n?c.push(r):n||r!==l[0]?n?r===l[0]?c.push(`<=${n}`):c.push(`${r} - ${n}`):c.push(`>=${r}`):c.push("*");let u=c.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return u.length<d.length?u:t}}),Vo=Us((e,t)=>{var r=Oo(),n=Ro(),{ANY:i}=n,a=Lo(),s=yo(),o=[new n(">=0.0.0-0")],l=[new n(">=0.0.0")],c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?o:l}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=l}let n,c,h,p=new Set;for(let i of e)">"===i.operator||">="===i.operator?n=u(n,i,r):"<"===i.operator||"<="===i.operator?c=d(c,i,r):p.add(i.semver);if(p.size>1)return null;if(n&&c){if(h=s(n.semver,c.semver,r),h>0)return null;if(0===h&&(">="!==n.operator||"<="!==c.operator))return null}for(let i of p){if(n&&!a(i,String(n),r))return null;if(c&&!a(i,String(c),r))return null;for(let e of t)if(!a(i,String(e),r))return!1;return!0}let f,m,g,v,y=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver,b=!(!n||r.includePrerelease||!n.semver.prerelease.length)&&n.semver;y&&1===y.prerelease.length&&"<"===c.operator&&0===y.prerelease[0]&&(y=!1);for(let i of t){if(v=v||">"===i.operator||">="===i.operator,g=g||"<"===i.operator||"<="===i.operator,n)if(b&&i.semver.prerelease&&i.semver.prerelease.length&&i.semver.major===b.major&&i.semver.minor===b.minor&&i.semver.patch===b.patch&&(b=!1),">"===i.operator||">="===i.operator){if(f=u(n,i,r),f===i&&f!==n)return!1}else if(">="===n.operator&&!a(n.semver,String(i),r))return!1;if(c)if(y&&i.semver.prerelease&&i.semver.prerelease.length&&i.semver.major===y.major&&i.semver.minor===y.minor&&i.semver.patch===y.patch&&(y=!1),"<"===i.operator||"<="===i.operator){if(m=d(c,i,r),m===i&&m!==c)return!1}else if("<="===c.operator&&!a(c.semver,String(i),r))return!1;if(!i.operator&&(c||n)&&0!==h)return!1}return!(n&&g&&!c&&0!==h)&&(!(c&&v&&!n&&0!==h)&&(!b&&!y))},u=(e,t,r)=>{if(!e)return t;let n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},d=(e,t,r)=>{if(!e)return t;let n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};t.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let i=!1;e:for(let r of e.set){for(let e of t.set){let t=c(r,e,n);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}}),Wo=Us((e,t)=>{var r=io(),n=ro(),i=oo(),a=so(),s=lo(),o=co(),l=uo(),c=ho(),u=po(),d=fo(),h=mo(),p=go(),f=vo(),m=yo(),g=bo(),v=_o(),y=wo(),b=xo(),_=Eo(),w=ko(),x=So(),E=Ao(),k=To(),S=No(),A=Io(),T=Mo(),N=Co(),I=Ro(),M=Oo(),C=Lo(),j=Po(),O=Do(),R=$o(),L=zo(),P=Bo(),D=Uo(),$=Fo(),z=Ho(),B=Go(),U=qo(),F=Vo();t.exports={parse:s,valid:o,clean:l,inc:c,diff:u,major:d,minor:h,patch:p,prerelease:f,compare:m,rcompare:g,compareLoose:v,compareBuild:y,sort:b,rsort:_,gt:w,lt:x,eq:E,neq:k,gte:S,lte:A,cmp:T,coerce:N,Comparator:I,Range:M,satisfies:C,toComparators:j,maxSatisfying:O,minSatisfying:R,minVersion:L,validRange:P,outside:D,gtr:$,ltr:z,intersects:B,simplifyRange:U,subset:F,SemVer:i,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n.SEMVER_SPEC_VERSION,RELEASE_TYPES:n.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers}}),Zo=Us((e,t)=>{var r=(e=0)=>t=>`[${38+e};5;${t}m`,n=(e=0)=>(t,r,n)=>`[${38+e};2;${t};${r};${n}m`;Object.defineProperty(t,"exports",{enumerable:!0,get:function(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[r,n]of Object.entries(t)){for(let[r,i]of Object.entries(n))t[r]={open:`[${i[0]}m`,close:`[${i[1]}m`},n[r]=t[r],e.set(i[0],i[1]);Object.defineProperty(t,r,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="[39m",t.bgColor.close="[49m",t.color.ansi256=r(),t.color.ansi16m=n(),t.bgColor.ansi256=r(10),t.bgColor.ansi16m=n(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:e=>{let t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:r}=t.groups;3===r.length&&(r=r.split("").map(e=>e+e).join(""));let n=Number.parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1}}),t}})}),Ko=Us(e=>{e.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n},e.toByteArray=function(e){var t,r,a=s(e),o=a[0],l=a[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,l)),u=0,d=l>0?o-4:o;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===l&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t);1===l&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},e.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],s=16383,o=0,c=n-i;o<c;o+=s)a.push(l(e,o,o+s>c?c:o+s));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};var t,r=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0,64;t<64;++t)r[t]=a[t],n[a.charCodeAt(t)]=t;function s(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function o(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function l(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(o(n));return i.join("")}n[45]=62,n[95]=63}),Yo=Us(e=>{e.__esModule=!0,e.extend=a,e.indexOf=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},e.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return n.test(e)?e.replace(r,i):e},e.isEmpty=function(e){return!e&&0!==e||!(!l(e)||0!==e.length)},e.createFrame=function(e){var t=a({},e);return t._parent=e,t},e.blockParams=function(e,t){return e.path=t,e},e.appendContextPath=function(e,t){return(e?e+".":"")+t};var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,n=/[&<>"'`=]/;function i(e){return t[e]}function a(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}var s=Object.prototype.toString;e.toString=s;var o=function(e){return"function"==typeof e};o(/x/)&&(e.isFunction=o=function(e){return"function"==typeof e&&"[object Function]"===s.call(e)}),e.isFunction=o;var l=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===s.call(e)};e.isArray=l}),Jo=Us((e,t)=>{e.__esModule=!0;var r=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function n(e,t){var i=t&&t.loc,a=void 0,s=void 0,o=void 0,l=void 0;i&&(a=i.start.line,s=i.end.line,o=i.start.column,l=i.end.column,e+=" - "+a+":"+o);for(var c=Error.prototype.constructor.call(this,e),u=0;u<r.length;u++)this[r[u]]=c[r[u]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{i&&(this.lineNumber=a,this.endLineNumber=s,Object.defineProperty?(Object.defineProperty(this,"column",{value:o,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:l,enumerable:!0})):(this.column=o,this.endColumn=l))}catch(Lte){}}n.prototype=Error(),e.default=n,t.exports=e.default}),Xo=Us((e,t)=>{e.__esModule=!0;var r=Yo();e.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var{inverse:i,fn:a}=n;if(!0===t)return a(this);if(!1===t||null==t)return i(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var s=r.createFrame(n.data);s.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:s}}return a(t,n)})},t.exports=e.default}),Qo=Us((e,t)=>{e.__esModule=!0;var r=Yo(),n=function(e){return e&&e.__esModule?e:{default:e}}(Jo());e.default=function(e){e.registerHelper("each",function(e,t){if(!t)throw new n.default("Must pass iterator to #each");var{fn:i,inverse:a}=t,s=0,o="",l=void 0,c=void 0;function u(t,n,a){l&&(l.key=t,l.index=n,l.first=0===n,l.last=!!a,c&&(l.contextPath=c+t)),o+=i(e[t],{data:l,blockParams:r.blockParams([e[t],t],[c+t,null])})}if(t.data&&t.ids&&(c=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),r.isFunction(e)&&(e=e.call(this)),t.data&&(l=r.createFrame(t.data)),e&&"object"==typeof e)if(r.isArray(e))for(var d=e.length;s<d;s++)s in e&&u(s,s,s===e.length-1);else if("function"==typeof Symbol&&e[Symbol.iterator]){for(var h=[],p=e[Symbol.iterator](),f=p.next();!f.done;f=p.next())h.push(f.value);for(d=(e=h).length;s<d;s++)u(s,s,s===e.length-1)}else!function(){var t=void 0;Object.keys(e).forEach(function(e){void 0!==t&&u(t,s-1),t=e,s++}),void 0!==t&&u(t,s-1,!0)}();return 0===s&&(o=a(this)),o})},t.exports=e.default}),el=Us((e,t)=>{e.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(Jo());e.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new r.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default}),tl=Us((e,t)=>{e.__esModule=!0;var r=Yo(),n=function(e){return e&&e.__esModule?e:{default:e}}(Jo());e.default=function(e){e.registerHelper("if",function(e,t){if(2!=arguments.length)throw new n.default("#if requires exactly one argument");return r.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,r){if(2!=arguments.length)throw new n.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})})},t.exports=e.default}),rl=Us((e,t)=>{e.__esModule=!0,e.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var i=1;null!=r.hash.level?i=r.hash.level:r.data&&null!=r.data.level&&(i=r.data.level),t[0]=i,e.log.apply(e,t)})},t.exports=e.default}),nl=Us((e,t)=>{e.__esModule=!0,e.default=function(e){e.registerHelper("lookup",function(e,t,r){return e?r.lookupProperty(e,t):e})},t.exports=e.default}),il=Us((e,t)=>{e.__esModule=!0;var r=Yo(),n=function(e){return e&&e.__esModule?e:{default:e}}(Jo());e.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new n.default("#with requires exactly one argument");r.isFunction(e)&&(e=e.call(this));var i=t.fn;if(r.isEmpty(e))return t.inverse(this);var a=t.data;return t.data&&t.ids&&((a=r.createFrame(t.data)).contextPath=r.appendContextPath(t.data.contextPath,t.ids[0])),i(e,{data:a,blockParams:r.blockParams([e],[a&&a.contextPath])})})},t.exports=e.default}),al=Us(e=>{function t(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.registerDefaultHelpers=function(e){r.default(e),n.default(e),i.default(e),a.default(e),s.default(e),o.default(e),l.default(e)},e.moveHelperToHooks=function(e,t,r){e.helpers[t]&&(e.hooks[t]=e.helpers[t],r||delete e.helpers[t])};var r=t(Xo()),n=t(Qo()),i=t(el()),a=t(tl()),s=t(rl()),o=t(nl()),l=t(il())}),sl=Us((e,t)=>{e.__esModule=!0;var r=Yo();e.default=function(e){e.registerDecorator("inline",function(e,t,n,i){var a=e;return t.partials||(t.partials={},a=function(i,a){var s=n.partials;n.partials=r.extend({},s,t.partials);var o=e(i,a);return n.partials=s,o}),t.partials[i.args[0]]=i.fn,a})},t.exports=e.default}),ol=Us(e=>{e.__esModule=!0,e.registerDefaultDecorators=function(e){t.default(e)};var t=function(e){return e&&e.__esModule?e:{default:e}}(sl())}),ll=Us((e,t)=>{e.__esModule=!0;var r=Yo(),n={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(n.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=n.lookupLevel(e),typeof console<"u"&&n.lookupLevel(n.level)<=e){var t=n.methodMap[e];console[t]||(t="log");for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];console[t].apply(console,i)}}};e.default=n,t.exports=e.default}),cl=Us(e=>{e.__esModule=!0,e.createNewLookupObject=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.extend.apply(void 0,[Object.create(null)].concat(r))};var t=Yo()}),ul=Us(e=>{e.__esModule=!0,e.createProtoAccessControl=function(e){var r=Object.create(null);r.constructor=!1,r.__defineGetter__=!1,r.__defineSetter__=!1,r.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:t.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:t.createNewLookupObject(r,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},e.resultIsAllowed=function(e,t,r){return i("function"==typeof e?t.methods:t.properties,r)},e.resetLoggedProperties=function(){Object.keys(n).forEach(function(e){delete n[e]})};var t=cl(),r=function(e){return e&&e.__esModule?e:{default:e}}(ll()),n=Object.create(null);function i(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==n[e]&&(n[e]=!0,r.default.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}}),dl=Us(e=>{function t(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.HandlebarsEnvironment=c;var r=Yo(),n=t(Jo()),i=al(),a=ol(),s=t(ll()),o=ul();e.VERSION="4.7.8";e.COMPILER_REVISION=8;e.LAST_COMPATIBLE_COMPILER_REVISION=7;e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var l="[object Object]";function c(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},i.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}c.prototype={constructor:c,logger:s.default,log:s.default.log,registerHelper:function(e,t){if(r.toString.call(e)===l){if(t)throw new n.default("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(r.toString.call(e)===l)r.extend(this.partials,e);else{if(typeof t>"u")throw new n.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(r.toString.call(e)===l){if(t)throw new n.default("Arg not supported with multiple decorators");r.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){o.resetLoggedProperties()}};var u=s.default.log;e.log=u,e.createFrame=r.createFrame,e.logger=s.default}),hl=Us((e,t)=>{function r(e){this.string=e}e.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},e.default=r,t.exports=e.default}),pl=Us(e=>{e.__esModule=!0,e.wrapHelper=function(e,t){if("function"!=typeof e)return e;return function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}}}),fl=Us(e=>{e.__esModule=!0,e.checkRevision=function(e){var t=e&&e[0]||1,i=n.COMPILER_REVISION;if(t>=n.LAST_COMPATIBLE_COMPILER_REVISION&&t<=n.COMPILER_REVISION)return;if(t<n.LAST_COMPATIBLE_COMPILER_REVISION){var a=n.REVISION_CHANGES[i],s=n.REVISION_CHANGES[t];throw new r.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+s+").")}throw new r.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},e.template=function(e,l){if(!l)throw new r.default("No environment passed to template");if(!e||!e.main)throw new r.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,l.VM.checkRevision(e.compiler);var u=e.compiler&&7===e.compiler[0];var d={strict:function(e,t,n){if(!e||!(t in e))throw new r.default('"'+t+'" not defined in '+e,{loc:n});return d.lookupProperty(e,t)},lookupProperty:function(e,t){var r=e[t];return null==r||Object.prototype.hasOwnProperty.call(e,t)||s.resultIsAllowed(r,d.protoAccessControl,t)?r:void 0},lookup:function(e,t){for(var r=e.length,n=0;n<r;n++){if(null!=(e[n]&&d.lookupProperty(e[n],t)))return e[n][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:t.escapeExpression,invokePartial:function(n,i,a){a.hash&&(i=t.extend({},i,a.hash),a.ids&&(a.ids[0]=!0)),n=l.VM.resolvePartial.call(this,n,i,a);var s=t.extend({},a,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),o=l.VM.invokePartial.call(this,n,i,s);if(null==o&&l.compile&&(a.partials[a.name]=l.compile(n,e.compilerOptions,l),o=a.partials[a.name](i,s)),null!=o){if(a.indent){for(var c=o.split("\n"),u=0,d=c.length;u<d&&(c[u]||u+1!==d);u++)c[u]=a.indent+c[u];o=c.join("\n")}return o}throw new r.default("The partial "+a.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var r=e[t];return r.decorator=e[t+"_d"],r},programs:[],program:function(e,t,r,n,i){var a=this.programs[e],s=this.fn(e);return t||i||n||r?a=o(this,e,s,t,r,n,i):a||(a=this.programs[e]=o(this,e,s)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,r){var n=e||r;return e&&r&&e!==r&&(n=t.extend({},r,e)),n},nullContext:Object.seal({}),noop:l.VM.noop,compilerInfo:e.compiler};function h(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=r.data;h._setup(r),!r.partial&&e.useData&&(i=function(e,t){t&&"root"in t||(t=t?n.createFrame(t):{},t.root=e);return t}(t,i));var a=void 0,s=e.useBlockParams?[]:void 0;function o(t){return""+e.main(d,t,d.helpers,d.partials,i,s,a)}return e.useDepths&&(a=r.depths?t!=r.depths[0]?[t].concat(r.depths):r.depths:[t]),(o=c(e.main,o,d,r.depths||[],i,s))(t,r)}return h.isTop=!0,h._setup=function(r){if(r.partial)d.protoAccessControl=r.protoAccessControl,d.helpers=r.helpers,d.partials=r.partials,d.decorators=r.decorators,d.hooks=r.hooks;else{var n=t.extend({},l.helpers,r.helpers);(function(e,r){Object.keys(e).forEach(function(n){var i=e[n];e[n]=function(e,r){var n=r.lookupProperty;return a.wrapHelper(e,function(e){return t.extend({lookupProperty:n},e)})}(i,r)})})(n,d),d.helpers=n,e.usePartial&&(d.partials=d.mergeIfNeeded(r.partials,l.partials)),(e.usePartial||e.useDecorators)&&(d.decorators=t.extend({},l.decorators,r.decorators)),d.hooks={},d.protoAccessControl=s.createProtoAccessControl(r);var o=r.allowCallsToHelperMissing||u;i.moveHelperToHooks(d,"helperMissing",o),i.moveHelperToHooks(d,"blockHelperMissing",o)}},h._child=function(t,n,i,a){if(e.useBlockParams&&!i)throw new r.default("must pass block params");if(e.useDepths&&!a)throw new r.default("must pass parent depths");return o(d,t,e[t],n,0,i,a)},h},e.wrapProgram=o,e.resolvePartial=function(e,t,r){e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name];return e},e.invokePartial=function(e,i,a){var s=a.data&&a.data["partial-block"];a.partial=!0,a.ids&&(a.data.contextPath=a.ids[0]||a.data.contextPath);var o=void 0;a.fn&&a.fn!==l&&function(){a.data=n.createFrame(a.data);var e=a.fn;o=a.data["partial-block"]=function(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=n.createFrame(r.data),r.data["partial-block"]=s,e(t,r)},e.partials&&(a.partials=t.extend({},a.partials,e.partials))}();void 0===e&&o&&(e=o);if(void 0===e)throw new r.default("The partial "+a.name+" could not be found");if(e instanceof Function)return e(i,a)},e.noop=l;var t=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(Yo()),r=function(e){return e&&e.__esModule?e:{default:e}}(Jo()),n=dl(),i=al(),a=pl(),s=ul();function o(e,t,r,n,i,a,s){function o(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=s;return!s||t==s[0]||t===e.nullContext&&null===s[0]||(o=[t].concat(s)),r(e,t,e.helpers,e.partials,i.data||n,a&&[i.blockParams].concat(a),o)}return(o=c(r,o,e,s,n,a)).program=t,o.depth=s?s.length:0,o.blockParams=i||0,o}function l(){return""}function c(e,r,n,i,a,s){if(e.decorator){var o={};r=e.decorator(r,o,n,i&&i[0],a,s,i),t.extend(r,o)}return r}}),ml=Us((e,t)=>{e.__esModule=!0,e.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},t.exports=e.default}),gl=Us((e,t)=>{function r(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}e.__esModule=!0;var i=n(dl()),a=r(hl()),s=r(Jo()),o=n(Yo()),l=n(fl()),c=r(ml());function u(){var e=new i.HandlebarsEnvironment;return o.extend(e,i),e.SafeString=a.default,e.Exception=s.default,e.Utils=o,e.escapeExpression=o.escapeExpression,e.VM=l,e.template=function(t){return l.template(t,e)},e}var d=u();d.create=u,c.default(d),d.default=d,e.default=d,t.exports=e.default}),vl=Us((e,t)=>{e.__esModule=!0;var r={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};e.default=r,t.exports=e.default}),yl=Us((e,t)=>{e.__esModule=!0;var r=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,r,n,i,a,s){var o=a.length-1;switch(i){case 1:return a[o-1];case 2:this.$=n.prepareProgram(a[o]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=a[o];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(a[o]),strip:n.stripFlags(a[o],a[o]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:a[o],value:a[o],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(a[o-2],a[o-1],a[o],this._$);break;case 12:this.$={path:a[o-3],params:a[o-2],hash:a[o-1]};break;case 13:this.$=n.prepareBlock(a[o-3],a[o-2],a[o-1],a[o],!1,this._$);break;case 14:this.$=n.prepareBlock(a[o-3],a[o-2],a[o-1],a[o],!0,this._$);break;case 15:this.$={open:a[o-5],path:a[o-4],params:a[o-3],hash:a[o-2],blockParams:a[o-1],strip:n.stripFlags(a[o-5],a[o])};break;case 16:case 17:this.$={path:a[o-4],params:a[o-3],hash:a[o-2],blockParams:a[o-1],strip:n.stripFlags(a[o-5],a[o])};break;case 18:this.$={strip:n.stripFlags(a[o-1],a[o-1]),program:a[o]};break;case 19:var l=n.prepareBlock(a[o-2],a[o-1],a[o],a[o],!1,this._$),c=n.prepareProgram([l],a[o-1].loc);c.chained=!0,this.$={strip:a[o-2].strip,program:c,chain:!0};break;case 21:this.$={path:a[o-1],strip:n.stripFlags(a[o-2],a[o])};break;case 22:case 23:this.$=n.prepareMustache(a[o-3],a[o-2],a[o-1],a[o-4],n.stripFlags(a[o-4],a[o]),this._$);break;case 24:this.$={type:"PartialStatement",name:a[o-3],params:a[o-2],hash:a[o-1],indent:"",strip:n.stripFlags(a[o-4],a[o]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(a[o-2],a[o-1],a[o],this._$);break;case 26:this.$={path:a[o-3],params:a[o-2],hash:a[o-1],strip:n.stripFlags(a[o-4],a[o])};break;case 29:this.$={type:"SubExpression",path:a[o-3],params:a[o-2],hash:a[o-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:a[o],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(a[o-2]),value:a[o],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(a[o-1]);break;case 35:this.$={type:"StringLiteral",value:a[o],original:a[o],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(a[o]),original:Number(a[o]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===a[o],original:"true"===a[o],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 42:this.$=n.preparePath(!0,a[o],this._$);break;case 43:this.$=n.preparePath(!1,a[o],this._$);break;case 44:a[o-2].push({part:n.id(a[o]),original:a[o],separator:a[o-1]}),this.$=a[o-2];break;case 45:this.$=[{part:n.id(a[o]),original:a[o]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:a[o-1].push(a[o]);break;case 98:case 100:this.$=[a[o]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw Error(e)},parse:function(e){var t=this,r=[0],n=[null],i=[],a=this.table,s="",o=0,l=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc>"u"&&(this.lexer.yylloc={});var c=this.lexer.yylloc;i.push(c);var u=this.lexer.options&&this.lexer.options.ranges;function d(){var e=t.lexer.lex()||1;return"number"!=typeof e&&(e=t.symbols_[e]||e),e}"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,p,f,m,g,v,y,b,_={};;){if(p=r[r.length-1],this.defaultActions[p]?f=this.defaultActions[p]:((null===h||typeof h>"u")&&(h=d()),f=a[p]&&a[p][h]),typeof f>"u"||!f.length||!f[0]){var w="";for(g in b=[],a[p])this.terminals_[g]&&g>2&&b.push("'"+this.terminals_[g]+"'");w=this.lexer.showPosition?"Parse error on line "+(o+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(o+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(w,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:c,expected:b})}if(f[0]instanceof Array&&f.length>1)throw Error("Parse Error: multiple actions possible at state: "+p+", token: "+h);switch(f[0]){case 1:r.push(h),n.push(this.lexer.yytext),i.push(this.lexer.yylloc),r.push(f[1]),h=null,l=this.lexer.yyleng,s=this.lexer.yytext,o=this.lexer.yylineno,c=this.lexer.yylloc;break;case 2:if(v=this.productions_[f[1]][1],_.$=n[n.length-v],_._$={first_line:i[i.length-(v||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(v||1)].first_column,last_column:i[i.length-1].last_column},u&&(_._$.range=[i[i.length-(v||1)].range[0],i[i.length-1].range[1]]),typeof(m=this.performAction.call(_,s,l,o,this.yy,f[1],n,i))<"u")return m;v&&(r=r.slice(0,-1*v*2),n=n.slice(0,-1*v),i=i.slice(0,-1*v)),r.push(this.productions_[f[1]][0]),n.push(_.$),i.push(_._$),y=a[r[r.length-2]][r[r.length-1]],r.push(y);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,r,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),s=0;s<a.length&&(!(r=this._input.match(this.rules[a[s]]))||t&&!(r[0].length>t[0].length)||(t=r,n=s,this.options.flex));s++);return t?((i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,a[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return typeof e<"u"?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,r,n){function i(e,r){return t.yytext=t.yytext.substring(e,t.yyleng-r+e)}switch(r){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(i(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return e}();function r(){this.yy={}}return e.lexer=t,r.prototype=e,e.Parser=r,new r}();e.default=r,t.exports=e.default}),bl=Us((e,t)=>{e.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(Jo());function n(){this.parents=[]}function i(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function a(e){i.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function s(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}n.prototype={constructor:n,mutating:!1,acceptKey:function(e,t){var i=this.accept(e[t]);if(this.mutating){if(i&&!n.prototype[i.type])throw new r.default('Unexpected node type "'+i.type+'" found when accepting '+t+" on "+e.type);e[t]=i}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new r.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,r=e.length;t<r;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,r--)},accept:function(e){if(e){if(!this[e.type])throw new r.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:i,Decorator:i,BlockStatement:a,DecoratorBlock:a,PartialStatement:s,PartialBlockStatement:function(e){s.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:i,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},e.default=n,t.exports=e.default}),_l=Us((e,t)=>{e.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(bl());function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function i(e,t,r){void 0===t&&(t=e.length);var n=e[t-1],i=e[t-2];return n?"ContentStatement"===n.type?(i||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function a(e,t,r){void 0===t&&(t=-1);var n=e[t+1],i=e[t+2];return n?"ContentStatement"===n.type?(i||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function s(e,t,r){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var i=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==i}}function o(e,t,r){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var i=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==i,n.leftStripped}}n.prototype=new r.default,n.prototype.Program=function(e){var t=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,l=0,c=n.length;l<c;l++){var u=n[l],d=this.accept(u);if(d){var h=i(n,l,r),p=a(n,l,r),f=d.openStandalone&&h,m=d.closeStandalone&&p,g=d.inlineStandalone&&h&&p;d.close&&s(n,l,!0),d.open&&o(n,l,!0),t&&g&&(s(n,l),o(n,l)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(n[l-1].original)[1])),t&&f&&(s((u.program||u.inverse).body),o(n,l)),t&&m&&(s(n,l),o((u.inverse||u.program).body))}}return e},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,r=e.program&&e.inverse,n=r,l=r;if(r&&r.chained)for(n=r.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var c={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:a(t.body),closeStandalone:i((n||t).body)};if(e.openStrip.close&&s(t.body,null,!0),r){var u=e.inverseStrip;u.open&&o(t.body,null,!0),u.close&&s(n.body,null,!0),e.closeStrip.open&&o(l.body,null,!0),!this.options.ignoreStandalone&&i(t.body)&&a(n.body)&&(o(t.body),s(n.body))}else e.closeStrip.open&&o(t.body,null,!0);return c},n.prototype.Decorator=n.prototype.MustacheStatement=function(e){return e.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},e.default=n,t.exports=e.default}),wl=Us(e=>{e.__esModule=!0,e.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},e.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},e.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},e.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},e.preparePath=function(e,r,n){n=this.locInfo(n);for(var i=e?"@":"",a=[],s=0,o=0,l=r.length;o<l;o++){var c=r[o].part,u=r[o].original!==c;if(i+=(r[o].separator||"")+c,u||".."!==c&&"."!==c&&"this"!==c)a.push(c);else{if(a.length>0)throw new t.default("Invalid path: "+i,{loc:n});".."===c&&s++}}return{type:"PathExpression",data:e,depth:s,parts:a,original:i,loc:n}},e.prepareMustache=function(e,t,r,n,i,a){var s=n.charAt(3)||n.charAt(2),o="{"!==s&&"&"!==s,l=/\*/.test(n);return{type:l?"Decorator":"MustacheStatement",path:e,params:t,hash:r,escaped:o,strip:i,loc:this.locInfo(a)}},e.prepareRawBlock=function(e,t,n,i){r(e,n),i=this.locInfo(i);var a={type:"Program",body:t,strip:{},loc:i};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:a,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}},e.prepareBlock=function(e,n,i,a,s,o){a&&a.path&&r(e,a);var l=/\*/.test(e.open);n.blockParams=e.blockParams;var c=void 0,u=void 0;if(i){if(l)throw new t.default("Unexpected inverse block on decorator",i);i.chain&&(i.program.body[0].closeStrip=a.strip),u=i.strip,c=i.program}s&&(s=c,c=n,n=s);return{type:l?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:n,inverse:c,openStrip:e.strip,inverseStrip:u,closeStrip:a&&a.strip,loc:this.locInfo(o)}},e.prepareProgram=function(e,t){if(!t&&e.length){var r=e[0].loc,n=e[e.length-1].loc;r&&n&&(t={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},e.preparePartialBlock=function(e,t,n,i){return r(e,n),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:n&&n.strip,loc:this.locInfo(i)}};var t=function(e){return e&&e.__esModule?e:{default:e}}(Jo());function r(e,r){if(r=r.path?r.path.original:r,e.path.original!==r){var n={loc:e.path.loc};throw new t.default(e.path.original+" doesn't match "+r,n)}}}),xl=Us(e=>{function t(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.parseWithoutProcessing=o,e.parse=function(e,t){var r=o(e,t),i=new n.default(t);return i.accept(r)};var r=t(yl()),n=t(_l()),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(wl()),a=Yo();e.parser=r.default;var s={};function o(e,t){return"Program"===e.type?e:(r.default.yy=s,s.locInfo=function(e){return new s.SourceLocation(t&&t.srcName,e)},r.default.parse(e))}a.extend(s,i)}),El=Us(e=>{function t(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0,e.Compiler=s,e.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new r.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);t.compat&&(t.useDepths=!0);var i=n.parse(e,t),a=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(a,t)},e.compile=function(e,t,i){void 0===t&&(t={});if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new r.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=n.extend({},t),"data"in t||(t.data=!0);t.compat&&(t.useDepths=!0);var a=void 0;function s(){var r=i.parse(e,t),n=(new i.Compiler).compile(r,t),a=(new i.JavaScriptCompiler).compile(n,t,void 0,!0);return i.template(a)}function o(e,t){return a||(a=s()),a.call(this,e,t)}return o._setup=function(e){return a||(a=s()),a._setup(e)},o._child=function(e,t,r,n){return a||(a=s()),a._child(e,t,r,n)},o};var r=t(Jo()),n=Yo(),i=t(vl()),a=[].slice;function s(){}function o(e,t){if(e===t)return!0;if(n.isArray(e)&&n.isArray(t)&&e.length===t.length){for(var r=0;r<e.length;r++)if(!o(e[r],t[r]))return!1;return!0}}function l(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}s.prototype={compiler:s,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var r=0;r<t;r++){var n=this.opcodes[r],i=e.opcodes[r];if(n.opcode!==i.opcode||!o(n.args,i.args))return!1}t=this.children.length;for(r=0;r<t;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=n.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),r=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[r]=t,this.useDepths=this.useDepths||t.useDepths,r},accept:function(e){if(!this[e.type])throw new r.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,r=t.length,n=0;n<r;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){l(e);var{program:t,inverse:r}=e;t=t&&this.compileProgram(t),r=r&&this.compileProgram(r);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,r):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,r),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),r=this.setupFullMustacheParams(e,t,void 0),n=e.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var n=e.params;if(n.length>1)throw new r.default("Unsupported number of partial arguments: "+n.length,e);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var i=e.name.original,a="SubExpression"===e.name.type;a&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var s=e.indent||"";this.options.preventIndent&&s&&(this.opcode("appendContent",s),s=""),this.opcode("invokePartial",a,i,s),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){l(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,r){var n=e.path,i=n.parts[0],a=null!=t||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",i,a)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var a=this.setupFullMustacheParams(e,t,n),s=e.path,o=s.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",a.length,o);else{if(this.options.knownHelpersOnly)throw new r.default("You specified knownHelpersOnly, but used the unknown helper "+o,e);s.strict=!0,s.falsy=!0,this.accept(s),this.opcode("invokeHelper",a.length,s.original,i.default.helpers.simpleId(s))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],r=i.default.helpers.scopedId(e),n=!e.depth&&!r&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,r=0,n=t.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(t[r].value);for(;r--;)this.opcode("assignToHash",t[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:a.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=i.default.helpers.simpleId(e.path),r=t&&!!this.blockParamIndex(e.path.parts[0]),n=!r&&i.default.helpers.helperExpression(e),a=!r&&(n||t);if(a&&!n){var s=e.path.parts[0],o=this.options;o.knownHelpers[s]?n=!0:o.knownHelpersOnly&&(a=!1)}return n?"helper":a?"ambiguous":"simple"},pushParams:function(e){for(var t=0,r=e.length;t<r;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var r=void 0;if(!e.parts||i.default.helpers.scopedId(e)||e.depth||(r=this.blockParamIndex(e.parts[0])),r){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,r,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),i},blockParamIndex:function(e){for(var t=0,r=this.options.blockParams.length;t<r;t++){var i=this.options.blockParams[t],a=i&&n.indexOf(i,e);if(i&&a>=0)return[t,a]}}}}),kl=Us(e=>{var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");e.encode=function(e){if(0<=e&&e<t.length)return t[e];throw TypeError("Must be between 0 and 63: "+e)},e.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}}),Sl=Us(e=>{var t=kl();e.encode=function(e){var r,n="",i=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{r=31&i,(i>>>=5)>0&&(r|=32),n+=t.encode(r)}while(i>0);return n},e.decode=function(e,r,n){var i,a,s=e.length,o=0,l=0;do{if(r>=s)throw Error("Expected more digits in base 64 VLQ value.");if(-1===(a=t.decode(e.charCodeAt(r++))))throw Error("Invalid base64 digit: "+e.charAt(r-1));i=!!(32&a),o+=(a&=31)<<l,l+=5}while(i);n.value=function(e){var t=e>>1;return 1&~e?t:-t}(o),n.rest=r}}),Al=Us(e=>{e.getArg=function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw Error('"'+t+'" is a required argument.')};var t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function n(e){var r=e.match(t);return r?{scheme:r[1],auth:r[2],host:r[3],port:r[4],path:r[5]}:null}function i(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function a(t){var r=t,a=n(t);if(a){if(!a.path)return t;r=a.path}for(var s,o=e.isAbsolute(r),l=r.split(/\/+/),c=0,u=l.length-1;u>=0;u--)"."===(s=l[u])?l.splice(u,1):".."===s?c++:c>0&&(""===s?(l.splice(u+1,c),c=0):(l.splice(u,2),c--));return""===(r=l.join("/"))&&(r=o?"/":"."),a?(a.path=r,i(a)):r}function s(e,t){""===e&&(e="."),""===t&&(t=".");var s=n(t),o=n(e);if(o&&(e=o.path||"/"),s&&!s.scheme)return o&&(s.scheme=o.scheme),i(s);if(s||t.match(r))return t;if(o&&!o.host&&!o.path)return o.host=t,i(o);var l="/"===t.charAt(0)?t:a(e.replace(/\/+$/,"")+"/"+t);return o?(o.path=l,i(o)):l}e.urlParse=n,e.urlGenerate=i,e.normalize=a,e.join=s,e.isAbsolute=function(e){return"/"===e.charAt(0)||t.test(e)},e.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var r=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)};var o=!("__proto__"in Object.create(null));function l(e){return e}function c(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var r=t-10;r>=0;r--)if(36!==e.charCodeAt(r))return!1;return!0}function u(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}e.toSetString=o?l:function(e){return c(e)?"$"+e:e},e.fromSetString=o?l:function(e){return c(e)?e.slice(1):e},e.compareByOriginalPositions=function(e,t,r){var n=u(e.source,t.source);return 0!==n?n:0!==(n=e.originalLine-t.originalLine)?n:0!==(n=e.originalColumn-t.originalColumn)||r?n:0!==(n=e.generatedColumn-t.generatedColumn)?n:0!==(n=e.generatedLine-t.generatedLine)?n:u(e.name,t.name)},e.compareByGeneratedPositionsDeflated=function(e,t,r){var n=e.generatedLine-t.generatedLine;return 0!==n?n:0!==(n=e.generatedColumn-t.generatedColumn)||r?n:0!==(n=u(e.source,t.source))?n:0!==(n=e.originalLine-t.originalLine)?n:0!==(n=e.originalColumn-t.originalColumn)?n:u(e.name,t.name)},e.compareByGeneratedPositionsInflated=function(e,t){var r=e.generatedLine-t.generatedLine;return 0!==r?r:0!==(r=e.generatedColumn-t.generatedColumn)?r:0!==(r=u(e.source,t.source))?r:0!==(r=e.originalLine-t.originalLine)?r:0!==(r=e.originalColumn-t.originalColumn)?r:u(e.name,t.name)},e.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},e.computeSourceURL=function(e,t,r){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),r){var o=n(r);if(!o)throw Error("sourceMapURL could not be parsed");if(o.path){var l=o.path.lastIndexOf("/");l>=0&&(o.path=o.path.substring(0,l+1))}t=s(i(o),t)}return a(t)}}),Tl=Us(e=>{var t=Al(),r=Object.prototype.hasOwnProperty,n=typeof Map<"u";function i(){this._array=[],this._set=n?new Map:Object.create(null)}i.fromArray=function(e,t){for(var r=new i,n=0,a=e.length;n<a;n++)r.add(e[n],t);return r},i.prototype.size=function(){return n?this._set.size:Object.getOwnPropertyNames(this._set).length},i.prototype.add=function(e,i){var a=n?e:t.toSetString(e),s=n?this.has(e):r.call(this._set,a),o=this._array.length;s&&!i||this._array.push(e),s||(n?this._set.set(e,o):this._set[a]=o)},i.prototype.has=function(e){if(n)return this._set.has(e);var i=t.toSetString(e);return r.call(this._set,i)},i.prototype.indexOf=function(e){if(n){var i=this._set.get(e);if(i>=0)return i}else{var a=t.toSetString(e);if(r.call(this._set,a))return this._set[a]}throw Error('"'+e+'" is not in the set.')},i.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw Error("No element indexed by "+e)},i.prototype.toArray=function(){return this._array.slice()},e.ArraySet=i}),Nl=Us(e=>{var t=Al();function r(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}r.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},r.prototype.add=function(e){!function(e,r){var n=e.generatedLine,i=r.generatedLine,a=e.generatedColumn,s=r.generatedColumn;return i>n||i==n&&s>=a||t.compareByGeneratedPositionsInflated(e,r)<=0}(this._last,e)?(this._sorted=!1,this._array.push(e)):(this._last=e,this._array.push(e))},r.prototype.toArray=function(){return this._sorted||(this._array.sort(t.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},e.MappingList=r}),Il=Us(e=>{var t=Sl(),r=Al(),n=Tl().ArraySet,i=Nl().MappingList;function a(e){e||(e={}),this._file=r.getArg(e,"file",null),this._sourceRoot=r.getArg(e,"sourceRoot",null),this._skipValidation=r.getArg(e,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new i,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,n=new a({file:e.file,sourceRoot:t});return e.eachMapping(function(e){var i={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(i.source=e.source,null!=t&&(i.source=r.relative(t,i.source)),i.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(i.name=e.name)),n.addMapping(i)}),e.sources.forEach(function(i){var a=i;null!==t&&(a=r.relative(t,i)),n._sources.has(a)||n._sources.add(a);var s=e.sourceContentFor(i);null!=s&&n.setSourceContent(i,s)}),n},a.prototype.addMapping=function(e){var t=r.getArg(e,"generated"),n=r.getArg(e,"original",null),i=r.getArg(e,"source",null),a=r.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,i,a),null!=i&&(i=String(i),this._sources.has(i)||this._sources.add(i)),null!=a&&(a=String(a),this._names.has(a)||this._names.add(a)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:i,name:a})},a.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=r.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[r.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[r.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,i){var a=t;if(null==t){if(null==e.file)throw Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');a=e.file}var s=this._sourceRoot;null!=s&&(a=r.relative(s,a));var o=new n,l=new n;this._mappings.unsortedForEach(function(t){if(t.source===a&&null!=t.originalLine){var n=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=n.source&&(t.source=n.source,null!=i&&(t.source=r.join(i,t.source)),null!=s&&(t.source=r.relative(s,t.source)),t.originalLine=n.line,t.originalColumn=n.column,null!=n.name&&(t.name=n.name))}var c=t.source;null==c||o.has(c)||o.add(c);var u=t.name;null==u||l.has(u)||l.add(u)},this),this._sources=o,this._names=l,e.sources.forEach(function(t){var n=e.sourceContentFor(t);null!=n&&(null!=i&&(t=r.join(i,t)),null!=s&&(t=r.relative(s,t)),this.setSourceContent(t,n))},this)},a.prototype._validateMapping=function(e,t,r,n){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&r))throw Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},a.prototype._serializeMappings=function(){for(var e,n,i,a,s=0,o=1,l=0,c=0,u=0,d=0,h="",p=this._mappings.toArray(),f=0,m=p.length;f<m;f++){if(e="",(n=p[f]).generatedLine!==o)for(s=0;n.generatedLine!==o;)e+=";",o++;else if(f>0){if(!r.compareByGeneratedPositionsInflated(n,p[f-1]))continue;e+=","}e+=t.encode(n.generatedColumn-s),s=n.generatedColumn,null!=n.source&&(a=this._sources.indexOf(n.source),e+=t.encode(a-d),d=a,e+=t.encode(n.originalLine-1-c),c=n.originalLine-1,e+=t.encode(n.originalColumn-l),l=n.originalColumn,null!=n.name&&(i=this._names.indexOf(n.name),e+=t.encode(i-u),u=i)),h+=e}return h},a.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=r.relative(t,e));var n=r.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null},this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},e.SourceMapGenerator=a}),Ml=Us(e=>{function t(r,n,i,a,s,o){var l=Math.floor((n-r)/2)+r,c=s(i,a[l],!0);return 0===c?l:c>0?n-l>1?t(l,n,i,a,s,o):o==e.LEAST_UPPER_BOUND?n<a.length?n:-1:l:l-r>1?t(r,l,i,a,s,o):o==e.LEAST_UPPER_BOUND?l:r<0?-1:r}e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2,e.search=function(r,n,i,a){if(0===n.length)return-1;var s=t(-1,n.length,r,n,i,a||e.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===i(n[s],n[s-1],!0);)--s;return s}}),Cl=Us(e=>{function t(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function r(e,n,i,a){if(i<a){var s=function(e,t){return Math.round(e+Math.random()*(t-e))}(i,a),o=i-1;t(e,s,a);for(var l=e[a],c=i;c<a;c++)n(e[c],l)<=0&&t(e,o+=1,c);t(e,o+1,c);var u=o+1;r(e,n,i,u-1),r(e,n,u+1,a)}}e.quickSort=function(e,t){r(e,t,0,e.length-1)}}),jl=Us(e=>{var t=Al(),r=Ml(),n=Tl().ArraySet,i=Sl(),a=Cl().quickSort;function s(e,r){var n=e;return"string"==typeof e&&(n=t.parseSourceMapInput(e)),null!=n.sections?new c(n,r):new o(n,r)}function o(e,r){var i=e;"string"==typeof e&&(i=t.parseSourceMapInput(e));var a=t.getArg(i,"version"),s=t.getArg(i,"sources"),o=t.getArg(i,"names",[]),l=t.getArg(i,"sourceRoot",null),c=t.getArg(i,"sourcesContent",null),u=t.getArg(i,"mappings"),d=t.getArg(i,"file",null);if(a!=this._version)throw Error("Unsupported version: "+a);l&&(l=t.normalize(l)),s=s.map(String).map(t.normalize).map(function(e){return l&&t.isAbsolute(l)&&t.isAbsolute(e)?t.relative(l,e):e}),this._names=n.fromArray(o.map(String),!0),this._sources=n.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(e){return t.computeSourceURL(l,e,r)}),this.sourceRoot=l,this.sourcesContent=c,this._mappings=u,this._sourceMapURL=r,this.file=d}function l(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function c(e,r){var i=e;"string"==typeof e&&(i=t.parseSourceMapInput(e));var a=t.getArg(i,"version"),o=t.getArg(i,"sections");if(a!=this._version)throw Error("Unsupported version: "+a);this._sources=new n,this._names=new n;var l={line:-1,column:0};this._sections=o.map(function(e){if(e.url)throw Error("Support for url field in sections not implemented.");var n=t.getArg(e,"offset"),i=t.getArg(n,"line"),a=t.getArg(n,"column");if(i<l.line||i===l.line&&a<l.column)throw Error("Section offsets must be ordered and non-overlapping.");return l=n,{generatedOffset:{generatedLine:i+1,generatedColumn:a+1},consumer:new s(t.getArg(e,"map"),r)}})}s.fromSourceMap=function(e,t){return o.fromSourceMap(e,t)},s.prototype._version=3,s.prototype.__generatedMappings=null,Object.defineProperty(s.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),s.prototype.__originalMappings=null,Object.defineProperty(s.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),s.prototype._charIsMappingSeparator=function(e,t){var r=e.charAt(t);return";"===r||","===r},s.prototype._parseMappings=function(e,t){throw Error("Subclasses must implement _parseMappings")},s.GENERATED_ORDER=1,s.ORIGINAL_ORDER=2,s.GREATEST_LOWER_BOUND=1,s.LEAST_UPPER_BOUND=2,s.prototype.eachMapping=function(e,r,n){var i,a=r||null;switch(n||s.GENERATED_ORDER){case s.GENERATED_ORDER:i=this._generatedMappings;break;case s.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw Error("Unknown order of iteration.")}var o=this.sourceRoot;i.map(function(e){var r=null===e.source?null:this._sources.at(e.source);return{source:r=t.computeSourceURL(o,r,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,a)},s.prototype.allGeneratedPositionsFor=function(e){var n=t.getArg(e,"line"),i={source:t.getArg(e,"source"),originalLine:n,originalColumn:t.getArg(e,"column",0)};if(i.source=this._findSourceIndex(i.source),i.source<0)return[];var a=[],s=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,r.LEAST_UPPER_BOUND);if(s>=0){var o=this._originalMappings[s];if(void 0===e.column)for(var l=o.originalLine;o&&o.originalLine===l;)a.push({line:t.getArg(o,"generatedLine",null),column:t.getArg(o,"generatedColumn",null),lastColumn:t.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++s];else for(var c=o.originalColumn;o&&o.originalLine===n&&o.originalColumn==c;)a.push({line:t.getArg(o,"generatedLine",null),column:t.getArg(o,"generatedColumn",null),lastColumn:t.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++s]}return a},e.SourceMapConsumer=s,o.prototype=Object.create(s.prototype),o.prototype.consumer=s,o.prototype._findSourceIndex=function(e){var r,n=e;if(null!=this.sourceRoot&&(n=t.relative(this.sourceRoot,n)),this._sources.has(n))return this._sources.indexOf(n);for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==e)return r;return-1},o.fromSourceMap=function(e,r){var i=Object.create(o.prototype),s=i._names=n.fromArray(e._names.toArray(),!0),c=i._sources=n.fromArray(e._sources.toArray(),!0);i.sourceRoot=e._sourceRoot,i.sourcesContent=e._generateSourcesContent(i._sources.toArray(),i.sourceRoot),i.file=e._file,i._sourceMapURL=r,i._absoluteSources=i._sources.toArray().map(function(e){return t.computeSourceURL(i.sourceRoot,e,r)});for(var u=e._mappings.toArray().slice(),d=i.__generatedMappings=[],h=i.__originalMappings=[],p=0,f=u.length;p<f;p++){var m=u[p],g=new l;g.generatedLine=m.generatedLine,g.generatedColumn=m.generatedColumn,m.source&&(g.source=c.indexOf(m.source),g.originalLine=m.originalLine,g.originalColumn=m.originalColumn,m.name&&(g.name=s.indexOf(m.name)),h.push(g)),d.push(g)}return a(i.__originalMappings,t.compareByOriginalPositions),i},o.prototype._version=3,Object.defineProperty(o.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),o.prototype._parseMappings=function(e,r){for(var n,s,o,c,u,d=1,h=0,p=0,f=0,m=0,g=0,v=e.length,y=0,b={},_={},w=[],x=[];y<v;)if(";"===e.charAt(y))d++,y++,h=0;else if(","===e.charAt(y))y++;else{for((n=new l).generatedLine=d,c=y;c<v&&!this._charIsMappingSeparator(e,c);c++);if(o=b[s=e.slice(y,c)])y+=s.length;else{for(o=[];y<c;)i.decode(e,y,_),u=_.value,y=_.rest,o.push(u);if(2===o.length)throw Error("Found a source, but no line and column");if(3===o.length)throw Error("Found a source and line, but no column");b[s]=o}n.generatedColumn=h+o[0],h=n.generatedColumn,o.length>1&&(n.source=m+o[1],m+=o[1],n.originalLine=p+o[2],p=n.originalLine,n.originalLine+=1,n.originalColumn=f+o[3],f=n.originalColumn,o.length>4&&(n.name=g+o[4],g+=o[4])),x.push(n),"number"==typeof n.originalLine&&w.push(n)}a(x,t.compareByGeneratedPositionsDeflated),this.__generatedMappings=x,a(w,t.compareByOriginalPositions),this.__originalMappings=w},o.prototype._findMapping=function(e,t,n,i,a,s){if(e[n]<=0)throw TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw TypeError("Column must be greater than or equal to 0, got "+e[i]);return r.search(e,t,a,s)},o.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},o.prototype.originalPositionFor=function(e){var r={generatedLine:t.getArg(e,"line"),generatedColumn:t.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",t.compareByGeneratedPositionsDeflated,t.getArg(e,"bias",s.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var a=t.getArg(i,"source",null);null!==a&&(a=this._sources.at(a),a=t.computeSourceURL(this.sourceRoot,a,this._sourceMapURL));var o=t.getArg(i,"name",null);return null!==o&&(o=this._names.at(o)),{source:a,line:t.getArg(i,"originalLine",null),column:t.getArg(i,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}},o.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e}))},o.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i,a=e;if(null!=this.sourceRoot&&(a=t.relative(this.sourceRoot,a)),null!=this.sourceRoot&&(i=t.urlParse(this.sourceRoot))){var s=a.replace(/^file:\/\//,"");if("file"==i.scheme&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!i.path||"/"==i.path)&&this._sources.has("/"+a))return this.sourcesContent[this._sources.indexOf("/"+a)]}if(r)return null;throw Error('"'+a+'" is not in the SourceMap.')},o.prototype.generatedPositionFor=function(e){var r=t.getArg(e,"source");if((r=this._findSourceIndex(r))<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:t.getArg(e,"line"),originalColumn:t.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,t.getArg(e,"bias",s.GREATEST_LOWER_BOUND));if(i>=0){var a=this._originalMappings[i];if(a.source===n.source)return{line:t.getArg(a,"generatedLine",null),column:t.getArg(a,"generatedColumn",null),lastColumn:t.getArg(a,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},e.BasicSourceMapConsumer=o,c.prototype=Object.create(s.prototype),c.prototype.constructor=s,c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}}),c.prototype.originalPositionFor=function(e){var n={generatedLine:t.getArg(e,"line"),generatedColumn:t.getArg(e,"column")},i=r.search(n,this._sections,function(e,t){var r=e.generatedLine-t.generatedOffset.generatedLine;return r||e.generatedColumn-t.generatedOffset.generatedColumn}),a=this._sections[i];return a?a.consumer.originalPositionFor({line:n.generatedLine-(a.generatedOffset.generatedLine-1),column:n.generatedColumn-(a.generatedOffset.generatedLine===n.generatedLine?a.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},c.prototype.sourceContentFor=function(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw Error('"'+e+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(-1!==n.consumer._findSourceIndex(t.getArg(e,"source"))){var i=n.consumer.generatedPositionFor(e);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},c.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],s=i.consumer._generatedMappings,o=0;o<s.length;o++){var l=s[o],c=i.consumer._sources.at(l.source);c=t.computeSourceURL(i.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;l.name&&(u=i.consumer._names.at(l.name),this._names.add(u),u=this._names.indexOf(u));var d={source:c,generatedLine:l.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(i.generatedOffset.generatedLine===l.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}a(this.__generatedMappings,t.compareByGeneratedPositionsDeflated),a(this.__originalMappings,t.compareByOriginalPositions)},e.IndexedSourceMapConsumer=c}),Ol=Us(e=>{var t=Il().SourceMapGenerator,r=Al(),n=/(\r?\n)/,i="$$$isSourceNode$$$";function a(e,t,r,n,a){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==a?null:a,this[i]=!0,null!=n&&this.add(n)}a.fromStringWithSourceMap=function(e,t,i){var s=new a,o=e.split(n),l=0,c=function(){return e()+(e()||"");function e(){return l<o.length?o[l++]:void 0}},u=1,d=0,h=null;return t.eachMapping(function(e){if(null!==h){if(!(u<e.generatedLine)){var t=(r=o[l]||"").substr(0,e.generatedColumn-d);return o[l]=r.substr(e.generatedColumn-d),d=e.generatedColumn,p(h,t),void(h=e)}p(h,c()),u++,d=0}for(;u<e.generatedLine;)s.add(c()),u++;if(d<e.generatedColumn){var r=o[l]||"";s.add(r.substr(0,e.generatedColumn)),o[l]=r.substr(e.generatedColumn),d=e.generatedColumn}h=e},this),l<o.length&&(h&&p(h,c()),s.add(o.splice(l).join(""))),t.sources.forEach(function(e){var n=t.sourceContentFor(e);null!=n&&(null!=i&&(e=r.join(i,e)),s.setSourceContent(e,n))}),s;function p(e,t){if(null===e||void 0===e.source)s.add(t);else{var n=i?r.join(i,e.source):e.source;s.add(new a(e.originalLine,e.originalColumn,n,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[i]&&"string"!=typeof e)throw TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[i]&&"string"!=typeof e)throw TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,r=0,n=this.children.length;r<n;r++)(t=this.children[r])[i]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,r,n=this.children.length;if(n>0){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r[i]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[r.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][i]&&this.children[t].walkSourceContents(e);var a=Object.keys(this.sourceContents);for(t=0,n=a.length;t<n;t++)e(r.fromSetString(a[t]),this.sourceContents[a[t]])},a.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e},a.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new t(e),i=!1,a=null,s=null,o=null,l=null;return this.walk(function(e,t){r.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(a===t.source&&s===t.line&&o===t.column&&l===t.name||n.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:r.line,column:r.column},name:t.name}),a=t.source,s=t.line,o=t.column,l=t.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),a=null,i=!1);for(var c=0,u=e.length;c<u;c++)10===e.charCodeAt(c)?(r.line++,r.column=0,c+1===u?(a=null,i=!1):i&&n.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:r.line,column:r.column},name:t.name})):r.column++}),this.walkSourceContents(function(e,t){n.setSourceContent(e,t)}),{code:r.code,map:n}},e.SourceNode=a}),Rl=Us(e=>{e.SourceMapGenerator=Il().SourceMapGenerator,e.SourceMapConsumer=jl().SourceMapConsumer,e.SourceNode=Ol().SourceNode}),Ll=Us((e,t)=>{e.__esModule=!0;var r,n=Yo(),i=void 0;try{"function"==typeof define&&define.amd||(r=Rl(),i=r.SourceNode)}catch(Ms){}function a(e,t,r){if(n.isArray(e)){for(var i=[],a=0,s=e.length;a<s;a++)i.push(t.wrap(e[a],r));return i}return"boolean"==typeof e||"number"==typeof e?e+"":e}function s(e){this.srcFile=e,this.source=[]}i||(i=function(e,t,r,n){this.src="",n&&this.add(n)},i.prototype={add:function(e){n.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){n.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),s.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,r=this.source.length;t<r;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new i(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof i?e:(e=a(e,this,t),new i(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,r){return r=this.generateList(r),this.wrap([e,t?"."+t+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,r=[];Object.keys(e).forEach(function(n){var i=a(e[n],t);"undefined"!==i&&r.push([t.quotedString(n),":",i])});var n=this.generateList(r);return n.prepend("{"),n.add("}"),n},generateList:function(e){for(var t=this.empty(),r=0,n=e.length;r<n;r++)r&&t.add(","),t.add(a(e[r],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},e.default=s,t.exports=e.default}),Pl=Us((e,t)=>{function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=dl(),i=r(Jo()),a=Yo(),s=r(Ll());function o(e){this.value=e}function l(){}l.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=n.COMPILER_REVISION;return[e,n.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,r){return a.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,r,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var a=e.opcodes,s=void 0,o=void 0,l=void 0,c=void 0;for(l=0,c=a.length;l<c;l++)s=a[l],this.source.currentLocation=s.loc,o=o||s.loc,this[s.opcode].apply(this,s.args);if(this.source.currentLocation=o,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new i.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(n);if(this.isChild)return u;var d={compiler:this.compilerInfo(),main:u};this.decorators&&(d.main_d=this.decorators,d.useDecorators=!0);var h=this.context,p=h.programs,f=h.decorators;for(l=0,c=p.length;l<c;l++)p[l]&&(d[l]=p[l],f[l]&&(d[l+"_d"]=f[l],d.useDecorators=!0));return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),n?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),t.srcName?(d=d.toStringWithSourceMap({file:t.destName})).map=d.map&&d.map.toString():d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new s.default(this.options.srcName),this.decorators=new s.default(this.options.srcName)},createFunctionContext:function(e){var t=this,r="",n=this.stackVars.concat(this.registers.list);n.length>0&&(r+=", "+n.join(", "));var i=0;Object.keys(this.aliases).forEach(function(e){var n=t.aliases[e];n.children&&n.referenceCount>1&&(r+=", alias"+ ++i+"="+e,n.children[0]="alias"+i)}),this.lookupPropertyFunctionIsUsed&&(r+=", "+this.lookupPropertyFunctionVarDeclaration());var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(r);return e?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(e){var t=this.environment.isSimple,r=!this.forceBuffer,n=void 0,i=void 0,a=void 0,s=void 0;return this.source.each(function(e){e.appendToBuffer?(a?e.prepend("  + "):a=e,s=e):(a&&(i?a.prepend("buffer += "):n=!0,s.add(";"),a=s=void 0),i=!0,t||(r=!1))}),r?a?(a.prepend("return "),s.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),a?(a.prepend("return buffer + "),s.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(e,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(t,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var r=this.topStack();t.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,r,n){var i=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[i++])),this.resolvePath("context",e,i,t,r)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,r){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,r)},resolvePath:function(e,t,r,n,i){var a=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,r,n,i){var a=t.popStack(),s=r.length;e&&s--;for(;n<s;n++)a=t.nameLookup(a,r[n],i);return e?[t.aliasable("container.strict"),"(",a,", ",t.quotedString(r[n]),", ",JSON.stringify(t.source.currentLocation)," )"]:a}(this.options.strict&&i,this,t,r,e));else for(var s=t.length;r<s;r++)this.replaceStack(function(i){var s=a.nameLookup(i,t[r],e);return n?[" && ",s]:[" != null ? ",s," : ",i]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var r=this.nameLookup("decorators",t,"decorator"),n=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(e,t,r){var n=this.popStack(),i=this.setupHelper(e,t),a=[];r&&a.push(i.name),a.push(n),this.options.strict||a.push(this.aliasable("container.hooks.helperMissing"));var s=["(",this.itemsSeparatedBy(a,"||"),")"],o=this.source.functionCall(s,"call",i.callParams);this.push(o)},itemsSeparatedBy:function(e,t){var r=[];r.push(e[0]);for(var n=1;n<e.length;n++)r.push(t,e[n]);return r},invokeKnownHelper:function(e,t){var r=this.setupHelper(e,t);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",r,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",i,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,r){var n=[],i=this.setupParams(t,1,n);e&&(t=this.popStack(),delete i.name),r&&(i.indent=JSON.stringify(r)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",e?n.unshift(t):n.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),n.push(i),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),r=void 0,n=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var a=this.hash;r&&(a.contexts[e]=r),n&&(a.types[e]=n),i&&(a.ids[e]=i),a.values[e]=t},pushId:function(e,t,r){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:l,compileChildren:function(e,t){for(var r=e.children,n=void 0,i=void 0,a=0,s=r.length;a<s;a++){n=r[a],i=new this.compiler;var o=this.matchExistingProgram(n);if(null==o){this.context.programs.push("");var l=this.context.programs.length;n.index=l,n.name="program"+l,this.context.programs[l]=i.compile(n,t,this.context,!this.precompile),this.context.decorators[l]=i.decorators,this.context.environments[l]=n,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=o.index,n.name="program"+o.index,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams}},matchExistingProgram:function(e){for(var t=0,r=this.context.environments.length;t<r;t++){var n=this.context.environments[t];if(n&&n.equals(e))return n}},programExpression:function(e){var t=this.environment.children[e],r=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof o||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new o(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],r=void 0,n=void 0,a=void 0;if(!this.isInline())throw new i.default("replaceStack on non-inline");var s=this.popStack(!0);if(s instanceof o)t=["(",r=[s.value]],a=!0;else{n=!0;var l=this.incrStack();t=["((",this.push(l)," = ",s,")"],r=this.topStack()}var c=e.call(this,r);a||this.popStack(),n&&this.stackSlot--,this.push(t.concat(c,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];if(n instanceof o)this.compileStack.push(n);else{var i=this.incrStack();this.pushSource([i," = ",n,";"]),this.compileStack.push(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof o)return r.value;if(!t){if(!this.stackSlot)throw new i.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof o?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,r){var n=[];return{params:n,paramsInit:this.setupHelperArgs(t,e,n,r),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(e,t,r){var n={},i=[],a=[],s=[],o=!r,l=void 0;o&&(r=[]),n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var c=this.popStack(),u=this.popStack();(u||c)&&(n.fn=u||"container.noop",n.inverse=c||"container.noop");for(var d=t;d--;)l=this.popStack(),r[d]=l,this.trackIds&&(s[d]=this.popStack()),this.stringParams&&(a[d]=this.popStack(),i[d]=this.popStack());return o&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(s)),this.stringParams&&(n.types=this.source.generateArray(a),n.contexts=this.source.generateArray(i)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,r,n){var i=this.setupParams(e,t,r);return i.loc=JSON.stringify(this.source.currentLocation),i=this.objectLiteral(i),n?(this.useRegister("options"),r.push("options"),["options=",i]):r?(r.push(i),""):i}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=l.RESERVED_WORDS={},r=0,n=e.length;r<n;r++)t[e[r]]=!0}(),l.isValidJavaScriptVariableName=function(e){return!l.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},e.default=l,t.exports=e.default}),Dl=Us((e,t)=>{function r(e){return e&&e.__esModule?e:{default:e}}e.__esModule=!0;var n=r(gl()),i=r(vl()),a=xl(),s=El(),o=r(Pl()),l=r(bl()),c=r(ml()),u=n.default.create;function d(){var e=u();return e.compile=function(t,r){return s.compile(t,r,e)},e.precompile=function(t,r){return s.precompile(t,r,e)},e.AST=i.default,e.Compiler=s.Compiler,e.JavaScriptCompiler=o.default,e.Parser=a.parser,e.parse=a.parse,e.parseWithoutProcessing=a.parseWithoutProcessing,e}var h=d();h.create=d,c.default(h),h.Visitor=l.default,h.default=h,e.default=h,t.exports=e.default});function $l(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function zl(e,t){for(var r,n="",i=0,a=-1,s=0,o=0;o<=e.length;++o){if(o<e.length)r=e.charCodeAt(o);else{if(47===r)break;r=47}if(47===r){if(a===o-1||1===s);else if(a!==o-1&&2===s){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",i=0):i=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),a=o,s=0;continue}}else if(2===n.length||1===n.length){n="",i=0,a=o,s=0;continue}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),i=o-a-1;a=o,s=0}else 46===r&&-1!==s?++s:s=-1}return n}function Bl(){for(var e,t="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var i;n>=0?i=arguments[n]:(void 0===e&&(e=process.cwd()),i=e),($l(i),0!==i.length)&&(t=i+"/"+t,r=47===i.charCodeAt(0))}return t=zl(t,!r),r?t.length>0?"/"+t:"/":t.length>0?t:"."}function Ul(e){if($l(e),0===e.length)return".";var t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=zl(e,!t)).length||t||(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e}function Fl(e){return $l(e),e.length>0&&47===e.charCodeAt(0)}function Hl(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];$l(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":Ul(e)}function Gl(e,t){if($l(e),$l(t),e===t)return"";if((e=Bl(e))===(t=Bl(t)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var n=e.length,i=n-r,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var s=t.length-a,o=i<s?i:s,l=-1,c=0;c<=o;++c){if(c===o){if(s>o){if(47===t.charCodeAt(a+c))return t.slice(a+c+1);if(0===c)return t.slice(a+c)}else i>o&&(47===e.charCodeAt(r+c)?l=c:0===c&&(l=0));break}var u=e.charCodeAt(r+c);if(u!==t.charCodeAt(a+c))break;47===u&&(l=c)}var d="";for(c=r+l+1;c<=n;++c)c!==n&&47!==e.charCodeAt(c)||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(a+l):(a+=l,47===t.charCodeAt(a)&&++a,t.slice(a))}function ql(e){return e}function Vl(e){if($l(e),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,i=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!i){n=a;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"//":e.slice(0,n)}function Wl(e,t){if(void 0!==t&&"string"!=typeof t)throw TypeError('"ext" argument must be a string');$l(e);var r,n=0,i=-1,a=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,o=-1;for(r=e.length-1;r>=0;--r){var l=e.charCodeAt(r);if(47===l){if(!a){n=r+1;break}}else-1===o&&(a=!1,o=r+1),s>=0&&(l===t.charCodeAt(s)?-1===--s&&(i=r):(s=-1,i=o))}return n===i?i=o:-1===i&&(i=e.length),e.slice(n,i)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!a){n=r+1;break}}else-1===i&&(a=!1,i=r+1);return-1===i?"":e.slice(n,i)}function Zl(e){$l(e);for(var t=-1,r=0,n=-1,i=!0,a=0,s=e.length-1;s>=0;--s){var o=e.charCodeAt(s);if(47!==o)-1===n&&(i=!1,n=s+1),46===o?-1===t?t=s:1!==a&&(a=1):-1!==t&&(a=-1);else if(!i){r=s+1;break}}return-1===t||-1===n||0===a||1===a&&t===n-1&&t===r+1?"":e.slice(t,n)}function Kl(e){if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+e+n:n}("/",e)}function Yl(e){$l(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var r,n=e.charCodeAt(0),i=47===n;i?(t.root="/",r=1):r=0;for(var a=-1,s=0,o=-1,l=!0,c=e.length-1,u=0;c>=r;--c)if(47!==(n=e.charCodeAt(c)))-1===o&&(l=!1,o=c+1),46===n?-1===a?a=c:1!==u&&(u=1):-1!==a&&(u=-1);else if(!l){s=c+1;break}return-1===a||-1===o||0===u||1===u&&a===o-1&&a===s+1?-1!==o&&(t.base=t.name=0===s&&i?e.slice(1,o):e.slice(s,o)):(0===s&&i?(t.name=e.slice(1,a),t.base=e.slice(1,o)):(t.name=e.slice(s,a),t.base=e.slice(s,o)),t.ext=e.slice(a,o)),s>0?t.dir=e.slice(0,s-1):i&&(t.dir="/"),t}Fs({},{sep:()=>Jl,resolve:()=>Bl,relative:()=>Gl,posix:()=>{},parse:()=>Yl,normalize:()=>Ul,join:()=>Hl,isAbsolute:()=>Fl,format:()=>Kl,extname:()=>Zl,dirname:()=>Vl,delimiter:()=>Xl,default:()=>{},basename:()=>Wl,_makeLong:()=>ql});var Jl="/",Xl=":",Ql={};Fs(Ql,{uptime:()=>ac,type:()=>cc,totalmem:()=>oc,tmpdir:()=>fc,tmpDir:()=>tc,release:()=>uc,platform:()=>pc,networkInterfaces:()=>ec,loadavg:()=>ic,hostname:()=>nc,homedir:()=>gc,getNetworkInterfaces:()=>dc,freemem:()=>sc,endianness:()=>rc,cpus:()=>lc,arch:()=>hc,EOL:()=>mc});var ec,tc,rc=function(){return"LE"},nc=function(){return typeof location<"u"?location.hostname:""},ic=function(){return[]},ac=function(){return 0},sc=function(){return Number.MAX_VALUE},oc=function(){return Number.MAX_VALUE},lc=function(){return[]},cc=function(){return"Browser"},uc=function(){return typeof navigator<"u"?navigator.appVersion:""},dc=function(){return{}},hc=function(){return"javascript"},pc=function(){return"browser"},fc=function(){return"/tmp"},mc="\n",gc=function(){return"/"},vc=Hs(()=>{ec=dc,tc=fc}),yc={};function bc(e){var t,r,n=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}(e),i=n[0],a=n[1],s=new Uint8Array(function(e,t){return 3*(e+t)/4-t}(i,a)),o=0,l=a>0?i-4:i;for(r=0;r<l;r+=4)t=mu[e.charCodeAt(r)]<<18|mu[e.charCodeAt(r+1)]<<12|mu[e.charCodeAt(r+2)]<<6|mu[e.charCodeAt(r+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=255&t;return 2===a&&(t=mu[e.charCodeAt(r)]<<2|mu[e.charCodeAt(r+1)]>>4,s[o++]=255&t),1===a&&(t=mu[e.charCodeAt(r)]<<10|mu[e.charCodeAt(r+1)]<<4|mu[e.charCodeAt(r+2)]>>2,s[o++]=t>>8&255,s[o++]=255&t),s}function _c(e){return fu[e>>18&63]+fu[e>>12&63]+fu[e>>6&63]+fu[63&e]}function wc(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(_c(n));return i.join("")}function xc(e){for(var t,r=e.length,n=r%3,i=[],a=16383,s=0,o=r-n;s<o;s+=a)i.push(wc(e,s,s+a>o?o:s+a));return 1===n?(t=e[r-1],i.push(fu[t>>2]+fu[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(fu[t>>10]+fu[t>>4&63]+fu[t<<2&63]+"=")),i.join("")}function Ec(e,t,r,n,i){var a,s,o=8*i-n-1,l=(1<<o)-1,c=l>>1,u=-7,d=r?i-1:0,h=r?-1:1,p=e[t+d];for(d+=h,a=p&(1<<-u)-1,p>>=-u,u+=o;u>0;a=256*a+e[t+d],d+=h,u-=8);for(s=a&(1<<-u)-1,a>>=-u,u+=n;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===a)a=1-c;else{if(a===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),a-=c}return(p?-1:1)*s*Math.pow(2,a-n)}function kc(e,t,r,n,i,a){var s,o,l,c=8*a-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(o=0,s=u):s+d>=1?(o=(t*l-1)*Math.pow(2,i),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&o,p+=f,o/=256,i-=8);for(s=s<<i|o,c+=i;c>0;e[r+p]=255&s,p+=f,s/=256,c-=8);e[r+p-f]|=128*m}function Sc(e){if(e>Ru)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,Tc.prototype),t}function Ac(e,t,r){return class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function Tc(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return Mc(e)}return Nc(e,t,r)}function Nc(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!Tc.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|Rc(e,t),n=Sc(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(uu(e,Uint8Array)){let t=new Uint8Array(e);return jc(t.buffer,t.byteOffset,t.byteLength)}return Cc(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(uu(e,ArrayBuffer)||e&&uu(e.buffer,ArrayBuffer))return jc(e,t,r);if(typeof SharedArrayBuffer<"u"&&(uu(e,SharedArrayBuffer)||e&&uu(e.buffer,SharedArrayBuffer)))return jc(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return Tc.from(n,t,r);let i=function(e){if(Tc.isBuffer(e)){let t=0|Oc(e.length),r=Sc(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||Number.isNaN(e.length)?Sc(0):Cc(e);if("Buffer"===e.type&&Array.isArray(e.data))return Cc(e.data)}(e);if(i)return i;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Tc.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function Ic(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function Mc(e){return Ic(e),Sc(e<0?0:0|Oc(e))}function Cc(e){let t=e.length<0?0:0|Oc(e.length),r=Sc(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function jc(e,t,r){if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,Tc.prototype),n}function Oc(e){if(e>=Ru)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ru.toString(16)+" bytes");return 0|e}function Rc(e,t){if(Tc.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||uu(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return ou(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return lu(e).length;default:if(i)return n?-1:ou(e).length;t=(""+t).toLowerCase(),i=!0}}function Lc(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Zc(this,t,r);case"utf8":case"utf-8":return qc(this,t,r);case"ascii":return Vc(this,t,r);case"latin1":case"binary":return Wc(this,t,r);case"base64":return Gc(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kc(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function Pc(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function Dc(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Number.isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=Tc.from(t,n)),Tc.isBuffer(t))return 0===t.length?-1:$c(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):$c(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function $c(e,t,r,n,i){let a,s=1,o=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,o/=2,l/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(a=r;a<o;a++)if(c(e,a)===c(t,-1===n?0:a-n)){if(-1===n&&(n=a),a-n+1===l)return n*s}else-1!==n&&(a-=a-n),n=-1}else for(r+l>o&&(r=o-l),a=r;a>=0;a--){let r=!0;for(let n=0;n<l;n++)if(c(e,a+n)!==c(t,n)){r=!1;break}if(r)return a}return-1}function zc(e,t,r,n){r=Number(r)||0;let i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;let a,s=t.length;for(n>s/2&&(n=s/2),a=0;a<n;++a){let n=parseInt(t.substr(2*a,2),16);if(Number.isNaN(n))return a;e[r+a]=n}return a}function Bc(e,t,r,n){return cu(ou(t,e.length-r),e,r,n)}function Uc(e,t,r,n){return cu(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function Fc(e,t,r,n){return cu(lu(t),e,r,n)}function Hc(e,t,r,n){return cu(function(e,t){let r,n,i,a=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function Gc(e,t,r){return 0===t&&r===e.length?xc(e):xc(e.slice(t,r))}function qc(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],a=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,o,l;switch(s){case 1:t<128&&(a=t);break;case 2:r=e[i+1],128==(192&r)&&(l=(31&t)<<6|63&r,l>127&&(a=l));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(l=(15&t)<<12|(63&r)<<6|63&n,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:r=e[i+1],n=e[i+2],o=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&o)&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&o,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return function(e){let t=e.length;if(t<=Pu)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Pu));return r}(n)}function Vc(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function Wc(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function Zc(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let a=t;a<r;++a)i+=Tu[e[a]];return i}function Kc(e,t,r){let n=e.slice(t,r),i="";for(let a=0;a<n.length-1;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function Yc(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function Jc(e,t,r,n,i,a){if(!Tc.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function Xc(e,t,r,n,i){iu(t,n,i,e,r,7);let a=Number(t&BigInt(4294967295));e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function Qc(e,t,r,n,i){iu(t,n,i,e,r,7);let a=Number(t&BigInt(4294967295));e[r+7]=a,a>>=8,e[r+6]=a,a>>=8,e[r+5]=a,a>>=8,e[r+4]=a;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function eu(e,t,r,n,i,a){if(r+n>e.length)throw RangeError("Index out of range");if(r<0)throw RangeError("Index out of range")}function tu(e,t,r,n,i){return t=+t,r>>>=0,i||eu(e,0,r,4),kc(e,t,r,n,23,4),r+4}function ru(e,t,r,n,i){return t=+t,r>>>=0,i||eu(e,0,r,8),kc(e,t,r,n,52,8),r+8}function nu(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function iu(e,t,r,n,i,a){if(e>r||e<t){let r,n="bigint"==typeof t?"n":"";throw r=0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(a+1)}${n}`:`>= -(2${n} ** ${8*(a+1)-1}${n}) and < 2 ** ${8*(a+1)-1}${n}`,new Su("value",r,e)}!function(e,t,r){au(t,"offset"),(void 0===e[t]||void 0===e[t+r])&&su(t,e.length-(r+1))}(n,i,a)}function au(e,t){if("number"!=typeof e)throw new ku(t,"number",e)}function su(e,t,r){if(Math.floor(e)!==e)throw au(e,r),new Su("offset","an integer",e);if(t<0)throw new Eu;throw new Su("offset",`>= 0 and <= ${t}`,e)}function ou(e,t){t=t||1/0;let r,n=e.length,i=null,a=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function lu(e){return bc(function(e){if((e=(e=e.split("=")[0]).trim().replace(Au,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function cu(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function uu(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function du(e){return typeof BigInt>"u"?hu:e}function hu(){throw Error("BigInt not supported")}function pu(e){return()=>{throw Error(e+" is not implemented for node:buffer browser polyfill")}}Fs(yc,{transcode:()=>Mu,resolveObjectURL:()=>Nu,kStringMaxLength:()=>Lu,kMaxLength:()=>Ru,isUtf8:()=>Iu,isAscii:()=>Du,default:()=>Cu,constants:()=>xu,btoa:()=>yu,atob:()=>bu,INSPECT_MAX_BYTES:()=>Ou,File:()=>_u,Buffer:()=>Tc,Blob:()=>wu});var fu,mu,gu,vu,yu,bu,_u,wu,xu,Eu,ku,Su,Au,Tu,Nu,Iu,Mu,Cu,ju="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ou=50,Ru=2147483647,Lu=536870888,Pu=4096,Du=e=>{for(let t of e)if(t.charCodeAt(0)>127)return!1;return!0},$u=Hs(()=>{for(fu=[],mu=[],gu=0,64;gu<64;++gu)fu[gu]=ju[gu],mu[ju.charCodeAt(gu)]=gu;mu[45]=62,mu[95]=63,vu="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,yu=globalThis.btoa,bu=globalThis.atob,_u=globalThis.File,wu=globalThis.Blob,xu={MAX_LENGTH:Ru,MAX_STRING_LENGTH:Lu},Eu=Ac("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ku=Ac("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),Su=Ac("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?i=nu(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=nu(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n},RangeError),Object.defineProperty(Tc.prototype,"parent",{enumerable:!0,get:function(){if(Tc.isBuffer(this))return this.buffer}}),Object.defineProperty(Tc.prototype,"offset",{enumerable:!0,get:function(){if(Tc.isBuffer(this))return this.byteOffset}}),Tc.poolSize=8192,Tc.from=function(e,t,r){return Nc(e,t,r)},Object.setPrototypeOf(Tc.prototype,Uint8Array.prototype),Object.setPrototypeOf(Tc,Uint8Array),Tc.alloc=function(e,t,r){return function(e,t,r){return Ic(e),e<=0?Sc(e):void 0!==t?"string"==typeof r?Sc(e).fill(t,r):Sc(e).fill(t):Sc(e)}(e,t,r)},Tc.allocUnsafe=function(e){return Mc(e)},Tc.allocUnsafeSlow=function(e){return Mc(e)},Tc.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Tc.prototype},Tc.compare=function(e,t){if(uu(e,Uint8Array)&&(e=Tc.from(e,e.offset,e.byteLength)),uu(t,Uint8Array)&&(t=Tc.from(t,t.offset,t.byteLength)),!Tc.isBuffer(e)||!Tc.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},Tc.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Tc.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Tc.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let n=Tc.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(uu(t,Uint8Array))i+t.length>n.length?(Tc.isBuffer(t)||(t=Tc.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!Tc.isBuffer(t))throw TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},Tc.byteLength=Rc,Tc.prototype._isBuffer=!0,Tc.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)Pc(this,t,t+1);return this},Tc.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)Pc(this,t,t+3),Pc(this,t+1,t+2);return this},Tc.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)Pc(this,t,t+7),Pc(this,t+1,t+6),Pc(this,t+2,t+5),Pc(this,t+3,t+4);return this},Tc.prototype.toString=function(){let e=this.length;return 0===e?"":0===arguments.length?qc(this,0,e):Lc.apply(this,arguments)},Tc.prototype.toLocaleString=Tc.prototype.toString,Tc.prototype.equals=function(e){if(!Tc.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===Tc.compare(this,e)},Tc.prototype.inspect=function(){let e="",t=Ou;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},vu&&(Tc.prototype[vu]=Tc.prototype.inspect),Tc.prototype.compare=function(e,t,r,n,i){if(uu(e,Uint8Array)&&(e=Tc.from(e,e.offset,e.byteLength)),!Tc.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let a=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),o=Math.min(a,s),l=this.slice(n,i),c=e.slice(t,r);for(let u=0;u<o;++u)if(l[u]!==c[u]){a=l[u],s=c[u];break}return a<s?-1:s<a?1:0},Tc.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Tc.prototype.indexOf=function(e,t,r){return Dc(this,e,t,r,!0)},Tc.prototype.lastIndexOf=function(e,t,r){return Dc(this,e,t,r,!1)},Tc.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}let i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return zc(this,e,t,r);case"utf8":case"utf-8":return Bc(this,e,t,r);case"ascii":case"latin1":case"binary":return Uc(this,e,t,r);case"base64":return Fc(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Hc(this,e,t,r);default:if(a)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},Tc.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Tc.prototype.slice=function(e,t){let r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,Tc.prototype),n},Tc.prototype.readUintLE=Tc.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||Yc(e,t,this.length);let n=this[e],i=1,a=0;for(;++a<t&&(i*=256);)n+=this[e+a]*i;return n},Tc.prototype.readUintBE=Tc.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||Yc(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},Tc.prototype.readUint8=Tc.prototype.readUInt8=function(e,t){return e>>>=0,t||Yc(e,1,this.length),this[e]},Tc.prototype.readUint16LE=Tc.prototype.readUInt16LE=function(e,t){return e>>>=0,t||Yc(e,2,this.length),this[e]|this[e+1]<<8},Tc.prototype.readUint16BE=Tc.prototype.readUInt16BE=function(e,t){return e>>>=0,t||Yc(e,2,this.length),this[e]<<8|this[e+1]},Tc.prototype.readUint32LE=Tc.prototype.readUInt32LE=function(e,t){return e>>>=0,t||Yc(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Tc.prototype.readUint32BE=Tc.prototype.readUInt32BE=function(e,t){return e>>>=0,t||Yc(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Tc.prototype.readBigUInt64LE=du(function(e){au(e>>>=0,"offset");let t=this[e],r=this[e+7];void 0!==t&&void 0!==r||su(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+16777216*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),Tc.prototype.readBigUInt64BE=du(function(e){au(e>>>=0,"offset");let t=this[e],r=this[e+7];void 0!==t&&void 0!==r||su(e,this.length-8);let n=16777216*t+65536*this[++e]+256*this[++e]+this[++e],i=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),Tc.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||Yc(e,t,this.length);let n=this[e],i=1,a=0;for(;++a<t&&(i*=256);)n+=this[e+a]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},Tc.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||Yc(e,t,this.length);let n=t,i=1,a=this[e+--n];for(;n>0&&(i*=256);)a+=this[e+--n]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},Tc.prototype.readInt8=function(e,t){return e>>>=0,t||Yc(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Tc.prototype.readInt16LE=function(e,t){e>>>=0,t||Yc(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Tc.prototype.readInt16BE=function(e,t){e>>>=0,t||Yc(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Tc.prototype.readInt32LE=function(e,t){return e>>>=0,t||Yc(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Tc.prototype.readInt32BE=function(e,t){return e>>>=0,t||Yc(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Tc.prototype.readBigInt64LE=du(function(e){au(e>>>=0,"offset");let t=this[e],r=this[e+7];void 0!==t&&void 0!==r||su(e,this.length-8);let n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),Tc.prototype.readBigInt64BE=du(function(e){au(e>>>=0,"offset");let t=this[e],r=this[e+7];void 0!==t&&void 0!==r||su(e,this.length-8);let n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),Tc.prototype.readFloatLE=function(e,t){return e>>>=0,t||Yc(e,4,this.length),Ec(this,e,!0,23,4)},Tc.prototype.readFloatBE=function(e,t){return e>>>=0,t||Yc(e,4,this.length),Ec(this,e,!1,23,4)},Tc.prototype.readDoubleLE=function(e,t){return e>>>=0,t||Yc(e,8,this.length),Ec(this,e,!0,52,8)},Tc.prototype.readDoubleBE=function(e,t){return e>>>=0,t||Yc(e,8,this.length),Ec(this,e,!1,52,8)},Tc.prototype.writeUintLE=Tc.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){Jc(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},Tc.prototype.writeUintBE=Tc.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){Jc(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},Tc.prototype.writeUint8=Tc.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||Jc(this,e,t,1,255,0),this[t]=255&e,t+1},Tc.prototype.writeUint16LE=Tc.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||Jc(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Tc.prototype.writeUint16BE=Tc.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||Jc(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Tc.prototype.writeUint32LE=Tc.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||Jc(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Tc.prototype.writeUint32BE=Tc.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||Jc(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Tc.prototype.writeBigUInt64LE=du(function(e,t=0){return Xc(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),Tc.prototype.writeBigUInt64BE=du(function(e,t=0){return Qc(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),Tc.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);Jc(this,e,t,r,n-1,-n)}let i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a|0)-s&255;return t+r},Tc.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);Jc(this,e,t,r,n-1,-n)}let i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a|0)-s&255;return t+r},Tc.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||Jc(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Tc.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||Jc(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Tc.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||Jc(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Tc.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||Jc(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Tc.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||Jc(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Tc.prototype.writeBigInt64LE=du(function(e,t=0){return Xc(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Tc.prototype.writeBigInt64BE=du(function(e,t=0){return Qc(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),Tc.prototype.writeFloatLE=function(e,t,r){return tu(this,e,t,!0,r)},Tc.prototype.writeFloatBE=function(e,t,r){return tu(this,e,t,!1,r)},Tc.prototype.writeDoubleLE=function(e,t,r){return ru(this,e,t,!0,r)},Tc.prototype.writeDoubleBE=function(e,t,r){return ru(this,e,t,!1,r)},Tc.prototype.copy=function(e,t,r,n){if(!Tc.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},Tc.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!Tc.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let a=Tc.isBuffer(e)?e:Tc.from(e,n),s=a.length;if(0===s)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=a[i%s]}return this},Au=/[^+/0-9A-Za-z-_]/g,Tu=function(){let e=Array(256);for(let t=0;t<16;++t){let r=16*t;for(let n=0;n<16;++n)e[r+n]="0123456789abcdef"[t]+"0123456789abcdef"[n]}return e}(),Nu=pu("resolveObjectURL"),Iu=pu("isUtf8"),Mu=pu("transcode"),Cu=Tc}),zu={};function Bu(e,...t){if(!Xu(e)){for(var r=[e],n=0;n<t.length;n++)r.push(yd(t[n]));return r.join(" ")}n=0;for(var i=t.length,a=String(e).replace(gd,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(t[n++]);case"%d":return Number(t[n++]);case"%j":try{return JSON.stringify(t[n++])}catch(Pre){return"[Circular]"}default:return e}}),s=t[n];n<i;s=t[++n])Ku(s)||!rd(s)?a+=" "+s:a+=" "+yd(s);return a}function Uu(e,t){if(typeof process>"u"||!0===process?.noDeprecation)return e;var r=!1;return function(...n){if(!r){if(process.throwDeprecation)throw Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,...n)}}function Fu(e,t){var r=yd.styles[t];return r?"["+yd.colors[r][0]+"m"+e+"["+yd.colors[r][1]+"m":e}function Hu(e,t){return e}function Gu(e,t,r){if(e.customInspect&&t&&ad(t.inspect)&&t.inspect!==yd&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return Xu(n)||(n=Gu(e,n,r)),n}var i=function(e,t){if(ed(t))return e.stylize("undefined","undefined");if(Xu(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Ju(t))return e.stylize(""+t,"number");if(Zu(t))return e.stylize(""+t,"boolean");if(Ku(t))return e.stylize("null","null")}(e,t);if(i)return i;var a=Object.keys(t),s=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),id(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return qu(t);if(0===a.length){if(ad(t)){var o=t.name?": "+t.name:"";return e.stylize("[Function"+o+"]","special")}if(td(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(nd(t))return e.stylize(Date.prototype.toString.call(t),"date");if(id(t))return qu(t)}var l,c="",u=!1,d=["{","}"];(Wu(t)&&(u=!0,d=["[","]"]),ad(t))&&(c=" [Function"+(t.name?": "+t.name:"")+"]");return td(t)&&(c=" "+RegExp.prototype.toString.call(t)),nd(t)&&(c=" "+Date.prototype.toUTCString.call(t)),id(t)&&(c=" "+qu(t)),0!==a.length||u&&0!=t.length?r<0?td(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=u?function(e,t,r,n,i){for(var a=[],s=0,o=t.length;s<o;++s)pd(t,String(s))?a.push(Vu(e,t,r,n,String(s),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(Vu(e,t,r,n,i,!0))}),a}(e,t,r,s,a):a.map(function(n){return Vu(e,t,r,s,n,u)}),e.seen.pop(),function(e,t,r){var n=e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(l,c,d)):d[0]+c+d[1]}function qu(e){return"["+Error.prototype.toString.call(e)+"]"}function Vu(e,t,r,n,i,a){var s,o,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?o=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(o=e.stylize("[Setter]","special")),pd(n,i)||(s="["+i+"]"),o||(e.seen.indexOf(l.value)<0?(o=Ku(r)?Gu(e,l.value,null):Gu(e,l.value,r-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map(function(e){return"  "+e}).join("\n").slice(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n")):o=e.stylize("[Circular]","special")),ed(s)){if(a&&i.match(/^\d+$/))return o;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+o}function Wu(e){return Array.isArray(e)}function Zu(e){return"boolean"==typeof e}function Ku(e){return null===e}function Yu(e){return null==e}function Ju(e){return"number"==typeof e}function Xu(e){return"string"==typeof e}function Qu(e){return"symbol"==typeof e}function ed(e){return void 0===e}function td(e){return rd(e)&&"[object RegExp]"===ld(e)}function rd(e){return"object"==typeof e&&null!==e}function nd(e){return rd(e)&&"[object Date]"===ld(e)}function id(e){return rd(e)&&("[object Error]"===ld(e)||e instanceof Error)}function ad(e){return"function"==typeof e}function sd(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||typeof e>"u"}function od(e){return e instanceof Buffer}function ld(e){return Object.prototype.toString.call(e)}function cd(e){return e<10?"0"+e.toString(10):e.toString(10)}function ud(...e){console.log("%s - %s",function(){var e=new Date,t=[cd(e.getHours()),cd(e.getMinutes()),cd(e.getSeconds())].join(":");return[e.getDate(),bd[e.getMonth()],t].join(" ")}(),Bu.apply(null,e))}function dd(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function hd(e,t){if(!t||!rd(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function pd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function fd(e,t){if(!e){var r=Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function md(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');function t(...t){var r=t.pop();if("function"!=typeof r)throw TypeError("The last argument must be of type Function");var n=this,i=function(...e){return r.apply(n,...e)};e.apply(this,t).then(function(e){process.nextTick(i.bind(null,null,e))},function(e){process.nextTick(fd.bind(null,e,i))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)),t}Fs(zu,{types:()=>kd,promisify:()=>_d,log:()=>ud,isUndefined:()=>ed,isSymbol:()=>Qu,isString:()=>Xu,isRegExp:()=>td,isPrimitive:()=>sd,isObject:()=>rd,isNumber:()=>Ju,isNullOrUndefined:()=>Yu,isNull:()=>Ku,isFunction:()=>ad,isError:()=>id,isDate:()=>nd,isBuffer:()=>od,isBoolean:()=>Zu,isArray:()=>Wu,inspect:()=>yd,inherits:()=>dd,format:()=>Bu,deprecate:()=>Uu,default:()=>Ed,debuglog:()=>vd,callbackifyOnRejected:()=>fd,callbackify:()=>md,_extend:()=>hd,TextEncoder:()=>wd,TextDecoder:()=>xd});var gd,vd,yd,bd,_d,wd,xd,Ed,kd=()=>{},Sd=Hs(()=>{gd=/%[sdj%]/g,vd=((e={},t={},r)=>((r=typeof process<"u"&&!1)&&(r=r.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase()),t=new RegExp("^"+r+"$","i"),r=>(r=r.toUpperCase(),e[r]||(t.test(r)?e[r]=function(...e){console.error("%s: %s",r,pid,Bu.apply(null,...e))}:e[r]=function(){}),e[r])))(),yd=(e=>(e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.custom=Symbol.for("nodejs.util.inspect.custom"),e))(function(e,t,...r){var n={seen:[],stylize:Hu};return r.length>=1&&(n.depth=r[0]),r.length>=2&&(n.colors=r[1]),Zu(t)?n.showHidden=t:t&&hd(n,t),ed(n.showHidden)&&(n.showHidden=!1),ed(n.depth)&&(n.depth=2),ed(n.colors)&&(n.colors=!1),n.colors&&(n.stylize=Fu),Gu(n,e,n.depth)}),bd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_d=(e=>(e.custom=Symbol.for("nodejs.util.promisify.custom"),e))(function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&e[kCustomPromisifiedSymbol]){var t;if("function"!=typeof(t=e[kCustomPromisifiedSymbol]))throw TypeError('The "nodejs.util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,kCustomPromisifiedSymbol,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(...t){var r,n,i=new Promise(function(e,t){r=e,n=t});t.push(function(e,t){e?n(e):r(t)});try{e.apply(this,t)}catch(J9){n(J9)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),kCustomPromisifiedSymbol&&Object.defineProperty(t,kCustomPromisifiedSymbol,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,Object.getOwnPropertyDescriptors(e))}),({TextEncoder:wd,TextDecoder:xd}=globalThis),Ed={TextEncoder:wd,TextDecoder:xd,promisify:_d,log:ud,inherits:dd,_extend:hd,callbackifyOnRejected:fd,callbackify:md}}),Ad={};function Td(e,t){var{_events:r}=e;if(t[0]??=Error("Unhandled error."),!r)throw t[0];var n=r[qd];if(n)for(var i of Yd.call(n))i.apply(e,t);var a=r.error;if(!a)throw t[0];for(var i of Yd.call(a))i.apply(e,t);return!0}function Nd(e,t,r,n){t.then(void 0,function(t){queueMicrotask(()=>function(e,t,r,n){if("function"==typeof e[Zd])e[Zd](t,r,...n);else try{e[Gd]=!1,e.emit("error",t)}finally{e[Gd]=!0}}(e,t,r,n))})}function Id(e,t,r){r.warned=!0;let n=Error(`Possible EventEmitter memory leak detected. ${r.length} ${String(t)} listeners added to [${e.constructor.name}]. Use emitter.setMaxListeners() to increase limit`);n.name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=r.length,console.warn(n)}function Md(e,t,...r){this.removeListener(e,t),t.apply(this,r)}function Cd(e,t,r){var n=r?.signal;if($d(n,"options.signal"),n?.aborted)throw new Xd(void 0,{cause:n?.reason});let{resolve:i,reject:a,promise:s}=$newPromiseCapability(Promise),o=r=>{e.removeListener(t,l),null!=n&&Ld(n,"abort",c),a(r)},l=(...t)=>{"function"==typeof e.removeListener&&e.removeListener("error",o),null!=n&&Ld(n,"abort",c),i(t)};function c(){Ld(e,t,l),Ld(e,"error",o),a(new Xd(void 0,{cause:n?.reason}))}return Pd(e,t,l,{once:!0}),"error"!==t&&"function"==typeof e.once&&e.once("error",o),null!=n&&Pd(n,"abort",c,{once:!0}),s}function jd(e,t){return e.listeners(t)}function Od(e,...t){var r;if(zd(e,"setMaxListeners",0),t&&(r=t.length))for(let n=0;n<r;n++)t[n].setMaxListeners(e);else eh=e}function Rd(e,t){return e.listenerCount(t)}function Ld(e,t,r,n){"function"==typeof e.removeListener?e.removeListener(t,r):e.removeEventListener(t,r,n)}function Pd(e,t,r,n){"function"==typeof e.on?n.once?e.once(t,r):e.on(t,r):e.addEventListener(t,r,n)}function Dd(e,t,r){let n=TypeError(`The "${e}" argument must be of type ${t}. Received ${r}`);return n.code="ERR_INVALID_ARG_TYPE",n}function $d(e,t){if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw Dd(t,"AbortSignal",e)}function zd(e,t,r,n){if("number"!=typeof e)throw Dd(t,"number",e);if(e<r||null!=n||Number.isNaN(e))throw function(e,t,r){let n=RangeError(`The "${e}" argument is out of range. It must be ${t}. Received ${r}`);return n.code="ERR_OUT_OF_RANGE",n}(t,`>= ${r}`,e)}function Bd(e){if("function"!=typeof e)throw TypeError("The listener must be a function")}function Ud(e){return e?._maxListeners??eh}function Fd(e,t){if(void 0===e)throw Dd("signal","AbortSignal",e);if($d(e,"signal"),"function"!=typeof t)throw Dd("listener","function",t);let r;return e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[Symbol.dispose](){r?.()}}}Fs(Ad,{setMaxListeners:()=>Od,once:()=>Cd,listenerCount:()=>Rd,init:()=>th,getMaxListeners:()=>Ud,getEventListeners:()=>jd,default:()=>Qd,captureRejectionSymbol:()=>Kd,addAbortListener:()=>Fd,EventEmitter:()=>th});var Hd,Gd,qd,Vd,Wd,Zd,Kd,Yd,Jd,Xd,Qd,eh=10,th=function(e){void 0!==this._events&&this._events!==this.__proto__._events||(this._events={__proto__:null},this._eventsCount=0),this._maxListeners??=void 0,(this[Gd]=e?.captureRejections?Boolean(e?.captureRejections):Jd[Gd])&&(this.emit=nh)},rh=function(e,...t){if("error"===e)return Td(this,t);var{_events:r}=this;if(void 0===r)return!1;var n=r[e];if(void 0===n)return!1;let i=n.length>1?n.slice():n;for(let a=0,{length:s}=i;a<s;a++){let e=i[a];switch(t.length){case 0:e.call(this);break;case 1:e.call(this,t[0]);break;case 2:e.call(this,t[0],t[1]);break;case 3:e.call(this,t[0],t[1],t[2]);break;default:e.apply(this,t)}}return!0},nh=function(e,...t){if("error"===e)return Td(this,t);var{_events:r}=this;if(void 0===r)return!1;var n=r[e];if(void 0===n)return!1;let i=n.length>1?n.slice():n;for(let a=0,{length:s}=i;a<s;a++){let r,n=i[a];switch(t.length){case 0:r=n.call(this);break;case 1:r=n.call(this,t[0]);break;case 2:r=n.call(this,t[0],t[1]);break;case 3:r=n.call(this,t[0],t[1],t[2]);break;default:r=n.apply(this,t)}void 0!==r&&"function"==typeof r?.then&&r.then===Promise.prototype.then&&Nd(this,r,e,t)}return!0},ih=Hs(()=>{Hd=Symbol.for,Gd=Symbol("kCapture"),qd=Hd("events.errorMonitor"),Vd=Symbol("events.maxEventTargetListeners"),Wd=Symbol("events.maxEventTargetListenersWarned"),Zd=Hd("nodejs.rejection"),Kd=Hd("nodejs.rejection"),Yd=Array.prototype.slice,(Jd=th.prototype={})._events=void 0,Jd._eventsCount=0,Jd._maxListeners=void 0,Jd.setMaxListeners=function(e){return zd(e,"setMaxListeners",0),this._maxListeners=e,this},Jd.constructor=th,Jd.getMaxListeners=function(){return this?._maxListeners??eh},Jd.emit=rh,Jd.addListener=function(e,t){Bd(t);var r=this._events;r?r.newListener&&this.emit("newListener",e,t.listener??t):(r=this._events={__proto__:null},this._eventsCount=0);var n=r[e];if(n){n.push(t);var i=this._maxListeners??eh;i>0&&n.length>i&&!n.warned&&Id(this,e,n)}else r[e]=[t],this._eventsCount++;return this},Jd.on=Jd.addListener,Jd.prependListener=function(e,t){Bd(t);var r=this._events;r?r.newListener&&this.emit("newListener",e,t.listener??t):(r=this._events={__proto__:null},this._eventsCount=0);var n=r[e];if(n){n.unshift(t);var i=this._maxListeners??eh;i>0&&n.length>i&&!n.warned&&Id(this,e,n)}else r[e]=[t],this._eventsCount++;return this},Jd.once=function(e,t){Bd(t);let r=Md.bind(this,e,t);return r.listener=t,this.addListener(e,r),this},Jd.prependOnceListener=function(e,t){Bd(t);let r=Md.bind(this,e,t);return r.listener=t,this.prependListener(e,r),this},Jd.removeListener=function(e,t){Bd(t);var{_events:r}=this;if(!r)return this;var n=r[e];if(!n)return this;let i=-1;for(let a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){i=a;break}return i<0||(0===i?n.shift():n.splice(i,1),0===n.length&&(delete r[e],this._eventsCount--)),this},Jd.off=Jd.removeListener,Jd.removeAllListeners=function(e){var{_events:t}=this;return e&&t?t[e]&&(delete t[e],this._eventsCount--):this._events={__proto__:null},this},Jd.listeners=function(e){var{_events:t}=this;if(!t)return[];var r=t[e];return r?r.map(e=>e.listener??e):[]},Jd.rawListeners=function(e){var{_events:t}=this;if(!t)return[];var r=t[e];return r?r.slice():[]},Jd.listenerCount=function(e){var{_events:t}=this;return t?t[e]?.length??0:0},Jd.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},Jd[Gd]=!1,Xd=class extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw Dd("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}},Object.defineProperties(th,{captureRejections:{get:()=>Jd[Gd],set(e){(function(e,t){if("boolean"!=typeof e)throw Dd(t,"boolean",e)})(e,"EventEmitter.captureRejections"),Jd[Gd]=e},enumerable:!0},defaultMaxListeners:{enumerable:!0,get:()=>eh,set:e=>{zd(e,"defaultMaxListeners",0),eh=e}},kMaxEventTargetListeners:{value:Vd,enumerable:!1,configurable:!1,writable:!1},kMaxEventTargetListenersWarned:{value:Wd,enumerable:!1,configurable:!1,writable:!1}}),Object.assign(th,{once:Cd,getEventListeners:jd,getMaxListeners:Ud,setMaxListeners:Od,EventEmitter:th,usingDomains:!1,captureRejectionSymbol:Kd,errorMonitor:qd,addAbortListener:Fd,init:th,listenerCount:Rd}),Qd=th}),ah=Us((e,t)=>{var r=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),n=r((e,t)=>{class r extends Error{constructor(e){if(!Array.isArray(e))throw TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}t.exports={AggregateError:r,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error:Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise:Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String:String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol:Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean:Boolean,Uint8Array:Uint8Array}}),i=r((e,t)=>{t.exports={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,r]){let n=t.shift();return"f"===r?n.toFixed(6):"j"===r?JSON.stringify(n):"s"===r&&"object"==typeof n?`${n.constructor!==Object?n.constructor.name:""} {}`.trim():n.toString()}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}}),a=r((e,t)=>{var{format:r,inspect:a}=i(),{AggregateError:s}=n(),o=globalThis.AggregateError||s,l=Symbol("kIsNodeError"),c=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,d={};function h(e,t){if(!e)throw new d.ERR_INTERNAL_ASSERTION(t)}function p(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function f(e,t,n){n||(n=Error);class i extends n{constructor(...n){super(function(e,t,n){if("function"==typeof t)return h(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);let i=(t.match(/%[dfijoOs]/g)||[]).length;return h(i===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${i}).`),0===n.length?t:r(t,...n)}(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[l]=!0,d[e]=i}function m(e){let t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class g extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new d.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(e,t,r)=>{h("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let a of t)h("string"==typeof a,"All expected entries have to be of type string"),c.includes(a)?i.push(a.toLowerCase()):u.test(a)?s.push(a):(h("object"!==a,'The value "object" should be written as "Object"'),o.push(a));if(s.length>0){let e=i.indexOf("object");-1!==e&&(i.splice(i,e,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let e=i.pop();n+=`one of type ${i.join(", ")}, or ${e}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let e=s.pop();n+=`an instance of ${s.join(", ")}, or ${e}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let e=o.pop();n+=`one of ${o.join(", ")}, or ${e}`}}if(null==r)n+=`. Received ${r}`;else if("function"==typeof r&&r.name)n+=`. Received function ${r.name}`;else if("object"==typeof r){var l;if(null!==(l=r.constructor)&&void 0!==l&&l.name)n+=`. Received an instance of ${r.constructor.name}`;else{n+=`. Received ${a(r,{depth:-1})}`}}else{let e=a(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),n+=`. Received type ${typeof r} (${e})`}return n},TypeError),f("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=a(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;return`Expected ${e} to be returned from the "${t}" function but got ${null!=r&&null!==(n=r.constructor)&&void 0!==n&&n.name?`instance of ${r.constructor.name}`:"type "+typeof r}.`},TypeError),f("ERR_MISSING_ARGS",(...e)=>{h(e.length>0,"At least one arg needs to be specified");let t,r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(e,t,r)=>{let n;if(h(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>4294967296)n=p(String(r));else if("bigint"==typeof r){n=String(r);let e=BigInt(2)**BigInt(32);(r>e||r<-e)&&(n=p(n)),n+="n"}else n=a(r);return`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:g,aggregateTwoErrors:m(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let r=new o([t,e],t.message);return r.code=t.code,r}return e||t}),hideStackFrames:m,codes:d}}),s=r((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=new WeakMap,n=new WeakMap;function i(e){let t=r.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function a(e){null==e.passiveListener?e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault()):typeof console<"u"&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener)}function s(e,t){r.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let n=Object.keys(t);for(let r=0;r<n.length;++r){let e=n[r];e in this||Object.defineProperty(this,e,o(e))}}function o(e){return{get(){return i(this).event[e]},set(t){i(this).event[e]=t},configurable:!0,enumerable:!0}}function l(e){return{value(){let t=i(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function c(e){if(null==e||e===Object.prototype)return s;let t=n.get(e);return null==t&&(t=function(e,t){let r=Object.keys(t);if(0===r.length)return e;function n(t,r){e.call(this,t,r)}n.prototype=Object.create(e.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){let a=r[i];if(!(a in e.prototype)){let e="function"==typeof Object.getOwnPropertyDescriptor(t,a).value;Object.defineProperty(n.prototype,a,e?l(a):o(a))}}return n}(c(Object.getPrototypeOf(e)),e),n.set(e,t)),t}function u(e){return i(e).immediateStopped}function d(e,t){i(e).passiveListener=t}s.prototype={get type(){return i(this).event.type},get target(){return i(this).eventTarget},get currentTarget(){return i(this).currentTarget},composedPath(){let e=i(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return i(this).eventPhase},stopPropagation(){let e=i(this);e.stopped=!0,"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){let e=i(this);e.stopped=!0,e.immediateStopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return Boolean(i(this).event.bubbles)},get cancelable(){return Boolean(i(this).event.cancelable)},preventDefault(){a(i(this))},get defaultPrevented(){return i(this).canceled},get composed(){return Boolean(i(this).event.composed)},get timeStamp(){return i(this).timeStamp},get srcElement(){return i(this).eventTarget},get cancelBubble(){return i(this).stopped},set cancelBubble(e){if(!e)return;let t=i(this);t.stopped=!0,"boolean"==typeof t.event.cancelBubble&&(t.event.cancelBubble=!0)},get returnValue(){return!i(this).canceled},set returnValue(e){e||a(i(this))},initEvent(){}},Object.defineProperty(s.prototype,"constructor",{value:s,configurable:!0,writable:!0}),typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(s.prototype,window.Event.prototype),n.set(window.Event.prototype,s));var h=new WeakMap;function p(e){return null!==e&&"object"==typeof e}function f(e){let t=h.get(e);if(null==t)throw TypeError("'this' is expected an EventTarget object, but got another value.");return t}function m(e,t){Object.defineProperty(e,`on${t}`,function(e){return{get(){let t=f(this).get(e);for(;null!=t;){if(3===t.listenerType)return t.listener;t=t.next}return null},set(t){"function"==typeof t||p(t)||(t=null);let r=f(this),n=null,i=r.get(e);for(;null!=i;)3===i.listenerType?null!==n?n.next=i.next:null!==i.next?r.set(e,i.next):r.delete(e):n=i,i=i.next;if(null!==t){let i={listener:t,listenerType:3,passive:!1,once:!1,next:null};null===n?r.set(e,i):n.next=i}},configurable:!0,enumerable:!0}}(t))}function g(e){function t(){v.call(this)}t.prototype=Object.create(v.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let r=0;r<e.length;++r)m(t.prototype,e[r]);return t}function v(){if(!(this instanceof v)){if(1===arguments.length&&Array.isArray(arguments[0]))return g(arguments[0]);if(arguments.length>0){let e=Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return g(e)}throw TypeError("Cannot call a class as a function")}h.set(this,new Map)}v.prototype={addEventListener(e,t,r){if(null==t)return;if("function"!=typeof t&&!p(t))throw TypeError("'listener' should be a function or an object.");let n=f(this),i=p(r),a=(i?Boolean(r.capture):Boolean(r))?1:2,s={listener:t,listenerType:a,passive:i&&Boolean(r.passive),once:i&&Boolean(r.once),next:null},o=n.get(e);if(void 0===o)return void n.set(e,s);let l=null;for(;null!=o;){if(o.listener===t&&o.listenerType===a)return;l=o,o=o.next}l.next=s},removeEventListener(e,t,r){if(null==t)return;let n=f(this),i=(p(r)?Boolean(r.capture):Boolean(r))?1:2,a=null,s=n.get(e);for(;null!=s;){if(s.listener===t&&s.listenerType===i)return void(null!==a?a.next=s.next:null!==s.next?n.set(e,s.next):n.delete(e));a=s,s=s.next}},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw TypeError('"event.type" should be a string.');let t=f(this),r=e.type,n=t.get(r);if(null==n)return!0;let a=function(e,t){return new(c(Object.getPrototypeOf(t)))(e,t)}(this,e),s=null;for(;null!=n;){if(n.once?null!==s?s.next=n.next:null!==n.next?t.set(r,n.next):t.delete(r):s=n,d(a,n.passive?n.listener:null),"function"==typeof n.listener)try{n.listener.call(this,a)}catch(Lre){typeof console<"u"&&"function"==typeof console.error&&console.error(Lre)}else 3!==n.listenerType&&"function"==typeof n.listener.handleEvent&&n.listener.handleEvent(a);if(u(a))break;n=n.next}return d(a,null),function(e,t){i(e).eventPhase=t}(a,0),function(e,t){i(e).currentTarget=t}(a,null),!a.defaultPrevented}},Object.defineProperty(v.prototype,"constructor",{value:v,configurable:!0,writable:!0}),typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(v.prototype,window.EventTarget.prototype),e.defineEventAttribute=m,e.EventTarget=v,e.default=v,t.exports=v,t.exports.EventTarget=t.exports.default=v,t.exports.defineEventAttribute=m}),o=r((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=s();class n extends r.EventTarget{constructor(){throw super(),TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=i.get(this);if("boolean"!=typeof e)throw TypeError("Expected 'this' to be an 'AbortSignal' object, but got "+(null===this?"null":typeof this));return e}}r.defineEventAttribute(n.prototype,"abort");var i=new WeakMap;Object.defineProperties(n.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(n.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class a{constructor(){o.set(this,function(){let e=Object.create(n.prototype);return r.EventTarget.call(e),i.set(e,!1),e}())}get signal(){return l(this)}abort(){!function(e){!1===i.get(e)&&(i.set(e,!0),e.dispatchEvent({type:"abort"}))}(l(this))}}var o=new WeakMap;function l(e){let t=o.get(e);if(null==t)throw TypeError("Expected 'this' to be an 'AbortController' object, but got "+(null===e?"null":typeof e));return t}Object.defineProperties(a.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(a.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),e.AbortController=a,e.AbortSignal=n,e.default=a,t.exports=a,t.exports.AbortController=t.exports.default=a,t.exports.AbortSignal=n}),l=r((e,t)=>{var r=($u(),Bs(yc)),{format:s,inspect:l}=i(),{codes:{ERR_INVALID_ARG_TYPE:c}}=a(),{kResistStopPropagation:u,AggregateError:d,SymbolDispose:h}=n(),p=globalThis.AbortSignal||o().AbortSignal,f=globalThis.AbortController||o().AbortController,m=Object.getPrototypeOf(async function(){}).constructor,g=globalThis.Blob||r.Blob,v=typeof g<"u"?function(e){return e instanceof g}:function(e){return!1},y=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new c(t,"AbortSignal",e)};t.exports={AggregateError:d,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e((e,...n)=>e?r(e):t(...n))}),debuglog:()=>function(){},format:s,inspect:l,types:{isAsyncFunction:e=>e instanceof m,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:v,deprecate:(e,t)=>e,addAbortListener:(ih(),Bs(Ad)).addAbortListener||function(e,t){if(void 0===e)throw new c("signal","AbortSignal",e);let r;return y(e,"signal"),((e,t)=>{if("function"!=typeof e)throw new c(t,"Function",e)})(t,"listener"),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[u]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[h](){var e;null===(e=r)||void 0===e||e()}}},AbortSignalAny:p.any||function(e){if(1===e.length)return e[0];let t=new f,r=()=>t.abort();return e.forEach(e=>{y(e,"signals"),e.addEventListener("abort",r,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",r))},{once:!0}),t.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),c=r((e,t)=>{var{ArrayIsArray:r,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:s,ArrayPrototypeMap:o,NumberIsInteger:c,NumberIsNaN:u,NumberMAX_SAFE_INTEGER:d,NumberMIN_SAFE_INTEGER:h,NumberParseInt:p,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:m,String:g,StringPrototypeToUpperCase:v,StringPrototypeTrim:y}=n(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:_,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:E,ERR_UNKNOWN_SIGNAL:k}}=a(),{normalizeEncoding:S}=l(),{isAsyncFunction:A,isArrayBufferView:T}=l().types,N={};var I=/^[0-7]+$/;var M=b((e,t,r=h,n=d)=>{if("number"!=typeof e)throw new w(t,"number",e);if(!c(e))throw new E(t,"an integer",e);if(e<r||e>n)throw new E(t,`>= ${r} && <= ${n}`,e)}),C=b((e,t,r=-2147483648,n=2147483647)=>{if("number"!=typeof e)throw new w(t,"number",e);if(!c(e))throw new E(t,"an integer",e);if(e<r||e>n)throw new E(t,`>= ${r} && <= ${n}`,e)}),j=b((e,t,r=!1)=>{if("number"!=typeof e)throw new w(t,"number",e);if(!c(e))throw new E(t,"an integer",e);let n=r?1:0,i=4294967295;if(e<n||e>i)throw new E(t,`>= ${n} && <= ${i}`,e)});function O(e,t){if("string"!=typeof e)throw new w(t,"string",e)}var R=b((e,t,r)=>{if(!i(r,e)){let n="must be one of: "+s(o(r,e=>"string"==typeof e?`'${e}'`:g(e)),", ");throw new x(t,e,n)}});function L(e,t){if("boolean"!=typeof e)throw new w(t,"boolean",e)}function P(e,t,r){return null!=e&&f(e,t)?e[t]:r}var D=b((e,t,n=null)=>{let i=P(n,"allowArray",!1),a=P(n,"allowFunction",!1);if(!P(n,"nullable",!1)&&null===e||!i&&r(e)||"object"!=typeof e&&(!a||"function"!=typeof e))throw new w(t,"Object",e)}),$=b((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new w(t,"a dictionary",e)}),z=b((e,t,n=0)=>{if(!r(e))throw new w(t,"Array",e);if(e.length<n){throw new x(t,e,`must be longer than ${n}`)}});var B=b((e,t="buffer")=>{if(!T(e))throw new w(t,["Buffer","TypedArray","DataView"],e)});var U=b((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new w(t,"AbortSignal",e)}),F=b((e,t)=>{if("function"!=typeof e)throw new w(t,"Function",e)}),H=b((e,t)=>{if("function"!=typeof e||A(e))throw new w(t,"Function",e)}),G=b((e,t)=>{if(void 0!==e)throw new w(t,"undefined",e)});var q=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function V(e,t){if(typeof e>"u"||!m(q,e))throw new x(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if(typeof e>"u"&&(e=r),"string"==typeof e){if(null===m(I,e))throw new x(t,e,"must be a 32-bit unsigned integer or an octal string");e=p(e,8)}return j(e,t),e},validateArray:z,validateStringArray:function(e,t){z(e,t);for(let r=0;r<e.length;r++)O(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){z(e,t);for(let r=0;r<e.length;r++)L(e[r],`${t}[${r}]`)},validateAbortSignalArray:function(e,t){z(e,t);for(let r=0;r<e.length;r++){let n=e[r],i=`${t}[${r}]`;if(null==n)throw new w(i,"AbortSignal",n);U(n,i)}},validateBoolean:L,validateBuffer:B,validateDictionary:$,validateEncoding:function(e,t){let r=S(t),n=e.length;if("hex"===r&&n%2!=0)throw new x("encoding",t,`is invalid for data of length ${n}`)},validateFunction:F,validateInt32:C,validateInteger:M,validateNumber:function(e,t,r=void 0,n){if("number"!=typeof e)throw new w(t,"number",e);if(null!=r&&e<r||null!=n&&e>n||(null!=r||null!=n)&&u(e))throw new E(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=n?" && ":""}${null!=n?`<= ${n}`:""}`,e)},validateObject:D,validateOneOf:R,validatePlainFunction:H,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===y(e).length||+e!==+e>>>0||e>65535||0===e&&!r)throw new _(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(O(e,t),void 0===N[e]){if(void 0!==N[v(e)])throw new k(e+" (signals must use all capital letters)");throw new k(e)}},validateString:O,validateUint32:j,validateUndefined:G,validateUnion:function(e,t,r){if(!i(r,e))throw new w(t,`('${s(r,"|")}')`,e)},validateAbortSignal:U,validateLinkHeaderValue:function(e){if("string"==typeof e)return V(e,"hints"),e;if(r(e)){let t=e.length,r="";if(0===t)return r;for(let n=0;n<t;n++){let i=e[n];V(i,"hints"),r+=i,n!==t-1&&(r+=", ")}return r}throw new x("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}}),u=r((e,t)=>{t.exports=globalThis.process}),d=r((e,t)=>{var{SymbolAsyncIterator:r,SymbolIterator:i,SymbolFor:a}=n(),s=a("nodejs.stream.destroyed"),o=a("nodejs.stream.errored"),l=a("nodejs.stream.readable"),c=a("nodejs.stream.writable"),u=a("nodejs.stream.disturbed"),d=a("nodejs.webstream.isClosedPromise"),h=a("nodejs.webstream.controllerErrorFunction");function p(e,t=!1){var r;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function f(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function m(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function g(e){return!(!e||m(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function v(e){return!(!e||m(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function y(e){return!(!e||m(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function b(e){if(!m(e))return null;let{_writableState:t,_readableState:r}=e,n=t||r;return!!(e.destroyed||e[s]||null!=n&&n.destroyed)}function _(e){if(!f(e))return null;if(!0===e.writableEnded)return!0;let t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function w(e,t){if(!p(e))return null;let r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function x(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!b(e)&&(p(e)&&e.readable&&!w(e))}function E(e){return e&&null!=e[c]?e[c]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!b(e)&&(f(e)&&e.writable&&!_(e))}function k(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function S(e){return"boolean"==typeof e._sent100&&k(e)}t.exports={isDestroyed:b,kIsDestroyed:s,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,r,n,i,a,s,l,c,u,d;return!(!e||!(null!==(t=null!==(r=null!==(n=null!==(i=null!==(a=null!==(s=e[o])&&void 0!==s?s:e.readableErrored)&&void 0!==a?a:e.writableErrored)&&void 0!==i?i:null===(l=e._readableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==n?n:null===(c=e._writableState)||void 0===c?void 0:c.errorEmitted)&&void 0!==r?r:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(d=e._writableState)||void 0===d?void 0:d.errored))},kIsErrored:o,isReadable:x,kIsReadable:l,kIsClosedPromise:d,kControllerErrorFunction:h,kIsWritable:c,isClosed:function(e){if(!m(e))return null;if("boolean"==typeof e.closed)return e.closed;let{_writableState:t,_readableState:r}=e;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&k(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return m(e)?!!b(e)||(!1===(null==t?void 0:t.readable)||!x(e))&&(!1===(null==t?void 0:t.writable)||!E(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[r]:!1===t?"function"==typeof e[i]:"function"==typeof e[r]||"function"==typeof e[i])},isReadableNodeStream:p,isReadableStream:g,isReadableEnded:function(e){if(!p(e))return null;if(!0===e.readableEnded)return!0;let t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:w,isReadableErrored:function(e){var t,r;return m(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:m,isWebStream:function(e){return g(e)||v(e)||y(e)},isWritable:E,isWritableNodeStream:f,isWritableStream:v,isWritableEnded:_,isWritableFinished:function(e,t){if(!f(e))return null;if(!0===e.writableFinished)return!0;let r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return m(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:S,willEmitClose:function(e){if(!m(e))return null;let{_writableState:t,_readableState:r}=e,n=t||r;return!n&&S(e)||!!(n&&n.autoDestroy&&n.emitClose&&!1===n.closed)},isTransformStream:y}}),h=r((e,t)=>{var r,i=u(),{AbortError:s,codes:o}=a(),{ERR_INVALID_ARG_TYPE:h,ERR_STREAM_PREMATURE_CLOSE:p}=o,{kEmptyObject:f,once:m}=l(),{validateAbortSignal:g,validateFunction:v,validateObject:y,validateBoolean:b}=c(),{Promise:_,PromisePrototypeThen:w,SymbolDispose:x}=n(),{isClosed:E,isReadable:k,isReadableNodeStream:S,isReadableStream:A,isReadableFinished:T,isReadableErrored:N,isWritable:I,isWritableNodeStream:M,isWritableStream:C,isWritableFinished:j,isWritableErrored:O,isNodeStream:R,willEmitClose:L,kIsClosedPromise:P}=d();var D=()=>{};function $(e,t,n){var a,o;if(2===arguments.length?(n=t,t=f):null==t?t=f:y(t,"options"),v(n,"callback"),g(t.signal,"options.signal"),n=m(n),A(e)||C(e))return function(e,t,n){let a=!1,o=D;if(t.signal)if(o=()=>{a=!0,n.call(e,new s(void 0,{cause:t.signal.reason}))},t.signal.aborted)i.nextTick(o);else{let i=(r=r||l().addAbortListener)(t.signal,o),a=n;n=m((...t)=>{i[x](),a.apply(e,t)})}let c=(...t)=>{a||i.nextTick(()=>n.apply(e,t))};return w(e[P].promise,c,c),D}(e,t,n);if(!R(e))throw new h("stream",["ReadableStream","WritableStream","Stream"],e);let c=null!==(a=t.readable)&&void 0!==a?a:S(e),u=null!==(o=t.writable)&&void 0!==o?o:M(e),d=e._writableState,b=e._readableState,_=()=>{e.writable||B()},$=L(e)&&S(e)===c&&M(e)===u,z=j(e,!1),B=()=>{z=!0,e.destroyed&&($=!1),(!$||e.readable&&!c)&&(c&&!U||n.call(e))},U=T(e,!1),F=()=>{U=!0,e.destroyed&&($=!1),(!$||e.writable&&!u)&&(u&&!z||n.call(e))},H=t=>{n.call(e,t)},G=E(e),q=()=>{G=!0;let t=O(e)||N(e);return t&&"boolean"!=typeof t?n.call(e,t):c&&!U&&S(e,!0)&&!T(e,!1)?n.call(e,new p):!u||z||j(e,!1)?void n.call(e):n.call(e,new p)},V=()=>{G=!0;let t=O(e)||N(e);if(t&&"boolean"!=typeof t)return n.call(e,t);n.call(e)},W=()=>{e.req.on("finish",B)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?u&&!d&&(e.on("end",_),e.on("close",_)):(e.on("complete",B),$||e.on("abort",q),e.req?W():e.on("request",W)),$||"boolean"!=typeof e.aborted||e.on("aborted",q),e.on("end",F),e.on("finish",B),!1!==t.error&&e.on("error",H),e.on("close",q),G?i.nextTick(q):null!=d&&d.errorEmitted||null!=b&&b.errorEmitted?$||i.nextTick(V):(c||$&&!k(e)||!z&&!1!==I(e))&&(u||$&&!I(e)||!U&&!1!==k(e))?b&&e.req&&e.aborted&&i.nextTick(V):i.nextTick(V);let Z=()=>{n=D,e.removeListener("aborted",q),e.removeListener("complete",B),e.removeListener("abort",q),e.removeListener("request",W),e.req&&e.req.removeListener("finish",B),e.removeListener("end",_),e.removeListener("close",_),e.removeListener("finish",B),e.removeListener("end",F),e.removeListener("error",H),e.removeListener("close",q)};if(t.signal&&!G){let a=()=>{let r=n;Z(),r.call(e,new s(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)i.nextTick(a);else{let i=(r=r||l().addAbortListener)(t.signal,a),s=n;n=m((...t)=>{i[x](),s.apply(e,t)})}}return Z}t.exports=$,t.exports.finished=function(e,t){var r;let n=!1;return null===t&&(t=f),null!==(r=t)&&void 0!==r&&r.cleanup&&(b(t.cleanup,"cleanup"),n=t.cleanup),new _((r,i)=>{let a=$(e,t,e=>{n&&a(),e?i(e):r()})})}}),p=r((e,t)=>{var r=u(),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:s},AbortError:o}=a(),{Symbol:l}=n(),{kIsDestroyed:c,isDestroyed:h,isFinished:p,isServerRequest:f}=d(),m=l("kDestroy"),g=l("kConstruct");function v(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function y(e,t,n){let i=!1;function a(t){if(i)return;i=!0;let{_readableState:a,_writableState:s}=e;v(t,s,a),s&&(s.closed=!0),a&&(a.closed=!0),"function"==typeof n&&n(t),t?r.nextTick(b,e,t):r.nextTick(_,e)}try{e._destroy(t||null,a)}catch(hne){a(hne)}}function b(e,t){w(e,t),_(e)}function _(e){let{_readableState:t,_writableState:r}=e;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function w(e,t){let{_readableState:r,_writableState:n}=e;null!=n&&n.errorEmitted||null!=r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function x(e,t,n){let{_readableState:i,_writableState:a}=e;if(null!=a&&a.destroyed||null!=i&&i.destroyed)return this;null!=i&&i.autoDestroy||null!=a&&a.autoDestroy?e.destroy(t):t&&(t.stack,a&&!a.errored&&(a.errored=t),i&&!i.errored&&(i.errored=t),n?r.nextTick(w,e,t):w(e,t))}function E(e){let t=!1;function n(n){if(t)return void x(e,null!=n?n:new s);t=!0;let{_readableState:i,_writableState:a}=e,o=a||i;i&&(i.constructed=!0),a&&(a.constructed=!0),o.destroyed?e.emit(m,n):n?x(e,n,!0):r.nextTick(k,e)}try{e._construct(e=>{r.nextTick(n,e)})}catch(sre){r.nextTick(n,sre)}}function k(e){e.emit(g)}function S(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function A(e){e.emit("close")}function T(e,t){e.emit("error",t),r.nextTick(A,e)}t.exports={construct:function(e,t){if("function"!=typeof e._construct)return;let{_readableState:n,_writableState:i}=e;n&&(n.constructed=!1),i&&(i.constructed=!1),e.once(g,t),e.listenerCount(g)>1||r.nextTick(E,e)},destroyer:function(e,t){e&&!h(e)&&(t||p(e)||(t=new o),f(e)?(e.socket=null,e.destroy(t)):S(e)?e.abort():S(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?r.nextTick(T,e,t):r.nextTick(A,e),e.destroyed||(e[c]=!0))},destroy:function(e,t){let r=this._readableState,n=this._writableState,a=n||r;return null!=n&&n.destroyed||null!=r&&r.destroyed?("function"==typeof t&&t(),this):(v(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),a.constructed?y(this,e,t):this.once(m,function(r){y(this,i(r,e),t)}),this)},undestroy:function(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:x}}),f=r((e,t)=>{var{ArrayIsArray:r,ObjectSetPrototypeOf:i}=n(),{EventEmitter:a}=(ih(),Bs(Ad));function s(e){a.call(this,e)}function o(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}i(s.prototype,a.prototype),i(s,a),s.prototype.pipe=function(e,t){let r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",l),r.on("close",c));let s=!1;function l(){s||(s=!0,e.end())}function c(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){d(),0===a.listenerCount(this,"error")&&this.emit("error",e)}function d(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",l),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",d),r.removeListener("close",d),e.removeListener("close",d)}return o(r,"error",u),o(e,"error",u),r.on("end",d),r.on("close",d),e.on("close",d),e.emit("pipe",r),e},t.exports={Stream:s,prependListener:o}}),m=r((e,t)=>{var r,{SymbolDispose:i}=n(),{AbortError:s,codes:o}=a(),{isNodeStream:c,isWebStream:u,kControllerErrorFunction:p}=d(),f=h(),{ERR_INVALID_ARG_TYPE:m}=o;t.exports.addAbortSignal=function(e,r){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new m(t,"AbortSignal",e)})(e,"signal"),!c(r)&&!u(r))throw new m("stream",["ReadableStream","WritableStream","Stream"],r);return t.exports.addAbortSignalNoValidate(e,r)},t.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;let n=c(t)?()=>{t.destroy(new s(void 0,{cause:e.reason}))}:()=>{t[p](new s(void 0,{cause:e.reason}))};if(e.aborted)n();else{let a=(r=r||l().addAbortListener)(e,n);f(t,a[i])}return t}}),g=r((e,t)=>{var{StringPrototypeSlice:r,SymbolIterator:i,TypedArrayPrototypeSet:a,Uint8Array:s}=n(),{Buffer:o}=($u(),Bs(yc)),{inspect:c}=l();t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){let t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;let e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return o.alloc(0);let t=o.allocUnsafe(e>>>0),r=this.head,n=0;for(;r;)a(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){let r=this.head.data;if(e<r.length){let t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",n=this.head,i=0;do{let a=n.data;if(!(e>a.length)){e===a.length?(t+=a,++i,n.next?this.head=n.next:this.head=this.tail=null):(t+=r(a,0,e),this.head=n,n.data=r(a,e));break}t+=a,e-=a.length,++i}while(null!==(n=n.next));return this.length-=i,t}_getBuffer(e){let t=o.allocUnsafe(e),r=e,n=this.head,i=0;do{let o=n.data;if(!(e>o.length)){e===o.length?(a(t,o,r-e),++i,n.next?this.head=n.next:this.head=this.tail=null):(a(t,new s(o.buffer,o.byteOffset,e),r-e),this.head=n,n.data=o.slice(e));break}a(t,o,r-e),e-=o.length,++i}while(null!==(n=n.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return c(this,{...t,depth:0,customInspect:!1})}}}),v=r((e,t)=>{var{MathFloor:r,NumberIsInteger:i}=n(),{validateInteger:s}=c(),{ERR_INVALID_ARG_VALUE:o}=a().codes,l=16384,u=16;function d(e){return e?u:l}t.exports={getHighWaterMark:function(e,t,n,a){let s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,a,n);if(null!=s){if(!i(s)||s<0){throw new o(a?`options.${n}`:"options.highWaterMark",s)}return r(s)}return d(e.objectMode)},getDefaultHighWaterMark:d,setDefaultHighWaterMark:function(e,t){s(t,"value",0),e?u=t:l=t}}}),y=r((e,t)=>{
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=($u(),Bs(yc)),n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a),a.prototype=Object.create(n.prototype),i(n,a),a.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r.SlowBuffer(e)}}),b=r(e=>{var t=y().Buffer,r=t.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(e){var n;switch(this.encoding=function(e){var n=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof n&&(t.isEncoding===r||!r(e)))throw Error("Unknown encoding: "+e);return n||e}(e),this.encoding){case"utf16le":this.text=s,this.end=o,n=4;break;case"utf8":this.fillLast=a,n=4;break;case"base64":this.text=l,this.end=c,n=3;break;default:return this.write=u,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(n)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function s(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function o(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}e.StringDecoder=n,n.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},n.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},n.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var a=i(t[n]);if(a>=0)return a>0&&(e.lastNeed=a-1),a;if(--n<r||-2===a)return 0;if(a=i(t[n]),a>=0)return a>0&&(e.lastNeed=a-2),a;if(--n<r||-2===a)return 0;if(a=i(t[n]),a>=0)return a>0&&(2===a?a=0:e.lastNeed=a-3),a;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},n.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}),_=r((e,t)=>{var r=u(),{PromisePrototypeThen:i,SymbolAsyncIterator:s,SymbolIterator:o}=n(),{Buffer:l}=($u(),Bs(yc)),{ERR_INVALID_ARG_TYPE:c,ERR_STREAM_NULL_VALUES:d}=a().codes;t.exports=function(e,t,n){let a,u;if("string"==typeof t||t instanceof l)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});if(t&&t[s])u=!0,a=t[s]();else{if(!t||!t[o])throw new c("iterable",["Iterable"],t);u=!1,a=t[o]()}let h=new e({objectMode:!0,highWaterMark:1,...n}),p=!1;return h._read=function(){p||(p=!0,async function(){for(;;){try{let{value:e,done:t}=u?await a.next():a.next();if(t)h.push(null);else{let t=e&&"function"==typeof e.then?await e:e;if(null===t)throw p=!1,new d;if(h.push(t))continue;p=!1}}catch(e){h.destroy(e)}break}}())},h._destroy=function(e,t){i(async function(e){let t=null!=e,r="function"==typeof a.throw;if(t&&r){let{value:t,done:r}=await a.throw(e);if(await t,r)return}if("function"==typeof a.return){let{value:e}=await a.return();await e}}(e),()=>r.nextTick(t,e),n=>r.nextTick(t,n||e))},h}}),w=r((e,t)=>{var r=u(),{ArrayPrototypeIndexOf:i,NumberIsInteger:s,NumberIsNaN:o,NumberParseInt:d,ObjectDefineProperties:y,ObjectKeys:w,ObjectSetPrototypeOf:x,Promise:E,SafeSet:S,SymbolAsyncDispose:A,SymbolAsyncIterator:T,Symbol:N}=n();t.exports=se,se.ReadableState=ae;var{EventEmitter:I}=(ih(),Bs(Ad)),{Stream:M,prependListener:C}=f(),{Buffer:j}=($u(),Bs(yc)),{addAbortSignal:O}=m(),R=h(),L=l().debuglog("stream",e=>{L=e}),P=g(),D=p(),{getHighWaterMark:$,getDefaultHighWaterMark:z}=v(),{aggregateTwoErrors:B,codes:{ERR_INVALID_ARG_TYPE:U,ERR_METHOD_NOT_IMPLEMENTED:F,ERR_OUT_OF_RANGE:H,ERR_STREAM_PUSH_AFTER_EOF:G,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:q},AbortError:V}=a(),{validateObject:W}=c(),Z=N("kPaused"),{StringDecoder:K}=b(),Y=_();x(se.prototype,M.prototype),x(se,M);var J=()=>{},{errorOrDestroy:X}=D,Q=1,ee=16,te=32,re=2048,ne=4096;function ie(e){return{enumerable:!1,get(){return 0!==(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function ae(e,t,r){"boolean"!=typeof r&&(r=t instanceof k()),this.state=re|ne|ee|te,e&&e.objectMode&&(this.state|=Q),r&&e&&e.readableObjectMode&&(this.state|=Q),this.highWaterMark=e?$(this,e,"readableHighWaterMark",r):z(!1),this.buffer=new P,this.length=0,this.pipes=[],this.flowing=null,this[Z]=null,e&&!1===e.emitClose&&(this.state&=~re),e&&!1===e.autoDestroy&&(this.state&=~ne),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new K(e.encoding),this.encoding=e.encoding)}function se(e){if(!(this instanceof se))return new se(e);let t=this instanceof k();this._readableState=new ae(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&O(e.signal,this)),M.call(this,e),D.construct(this,()=>{this._readableState.needReadable&&pe(this,this._readableState)})}function oe(e,t,r,n){L("readableAddChunk",t);let i,a=e._readableState;if(0===(a.state&Q)&&("string"==typeof t?(r=r||a.defaultEncoding,a.encoding!==r&&(n&&a.encoding?t=j.from(t,r).toString(a.encoding):(t=j.from(t,r),r=""))):t instanceof j?r="":M._isUint8Array(t)?(t=M._uint8ArrayToBuffer(t),r=""):null!=t&&(i=new U("chunk",["string","Buffer","Uint8Array"],t))),i)X(e,i);else if(null===t)a.state&=-9,function(e,t){if(L("onEofChunk"),t.ended)return;if(t.decoder){let e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?de(e):(t.needReadable=!1,t.emittedReadable=!0,he(e))}(e,a);else if(0!==(a.state&Q)||t&&t.length>0)if(n)if(4&a.state)X(e,new q);else{if(a.destroyed||a.errored)return!1;le(e,a,t,!0)}else if(a.ended)X(e,new G);else{if(a.destroyed||a.errored)return!1;a.state&=-9,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?le(e,a,t,!1):pe(e,a)):le(e,a,t,!1)}else n||(a.state&=-9,pe(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function le(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),64&t.state&&de(e)),pe(e,t)}y(ae.prototype,{objectMode:ie(Q),ended:ie(2),endEmitted:ie(4),reading:ie(8),constructed:ie(ee),sync:ie(te),needReadable:ie(64),emittedReadable:ie(128),readableListening:ie(256),resumeScheduled:ie(512),errorEmitted:ie(1024),emitClose:ie(re),autoDestroy:ie(ne),destroyed:ie(8192),closed:ie(16384),closeEmitted:ie(32768),multiAwaitDrain:ie(65536),readingMore:ie(131072),dataEmitted:ie(262144)}),se.prototype.destroy=D.destroy,se.prototype._undestroy=D.undestroy,se.prototype._destroy=function(e,t){t(e)},se.prototype[I.captureRejectionSymbol]=function(e){this.destroy(e)},se.prototype[A]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new V,this.destroy(e)),new E((t,r)=>R(this,n=>n&&n!==e?r(n):t(null)))},se.prototype.push=function(e,t){return oe(this,e,t,!1)},se.prototype.unshift=function(e,t){return oe(this,e,t,!0)},se.prototype.isPaused=function(){let e=this._readableState;return!0===e[Z]||!1===e.flowing},se.prototype.setEncoding=function(e){let t=new K(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=t.write(i);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this};var ce;function ue(e,t){return e<=0||0===t.length&&t.ended?0:0!==(t.state&Q)?1:o(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function de(e){let t=e._readableState;L("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(L("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(he,e))}function he(e){let t=e._readableState;L("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ye(e)}function pe(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,r.nextTick(fe,e,t))}function fe(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){let r=t.length;if(L("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function me(e){let t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[Z]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function ge(e){L("readable nexttick read 0"),e.read(0)}function ve(e,t){L("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ye(e),t.flowing&&!t.reading&&e.read(0)}function ye(e){let t=e._readableState;for(L("flow",t.flowing);t.flowing&&null!==e.read(););}function be(e,t){"function"!=typeof e.read&&(e=se.wrap(e,{objectMode:!0}));let r=async function*(e,t){let r=J;function n(t){this===e?(r(),r=J):r=t}e.on("readable",n);let i,a=R(e,{writable:!1},e=>{i=e?B(i,e):null,r(),r=J});try{for(;;){let t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(i)throw i;if(null===i)return;await new E(n)}}}catch(s){throw i=B(i,s),i}finally{!i&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==i&&!e._readableState.autoDestroy?(e.off("readable",n),a()):D.destroyer(e,null)}}(e,t);return r.stream=e,r}function _e(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function we(e){let t=e._readableState;L("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(xe,t,e))}function xe(e,t){if(L("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)r.nextTick(Ee,t);else if(e.autoDestroy){let e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function Ee(e){!e.writable||e.writableEnded||e.destroyed||e.end()}function ke(){return void 0===ce&&(ce={}),ce}se.prototype.read=function(e){L("read",e),void 0===e?e=NaN:s(e)||(e=d(e,10));let t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new H("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return L("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?we(this):de(this),null;if(0===(e=ue(e,t))&&t.ended)return 0===t.length&&we(this),null;let n,i=!!(64&t.state);if(L("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,L("length less than watermark",i)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)i=!1,L("reading, ended or constructing",i);else if(i){L("do read"),t.state|=8|te,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(a){X(this,a)}t.state&=~te,t.reading||(e=ue(r,t))}return n=e>0?_e(e,t):null,null===n?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&we(this)),null===n||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",n)),n},se.prototype._read=function(e){throw new F("_read()")},se.prototype.pipe=function(e,t){let n=this,i=this._readableState;1===i.pipes.length&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new S(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),L("pipe count=%d opts=%j",i.pipes.length,t);let a=t&&!1===t.end||e===r.stdout||e===r.stderr?m:o;function s(t,r){L("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,function(){L("cleanup"),e.removeListener("close",p),e.removeListener("finish",f),l&&e.removeListener("drain",l);e.removeListener("error",h),e.removeListener("unpipe",s),n.removeListener("end",o),n.removeListener("end",m),n.removeListener("data",d),c=!0,l&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&l()}())}function o(){L("onend"),e.end()}i.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",s);let l,c=!1;function u(){c||(1===i.pipes.length&&i.pipes[0]===e?(L("false write response, pause",0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(L("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),n.pause()),l||(l=function(e,t){return function(){let r=e._readableState;r.awaitDrainWriters===t?(L("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(L("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),r.awaitDrainWriters&&0!==r.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(n,e),e.on("drain",l))}function d(t){L("ondata");let r=e.write(t);L("dest.write",r),!1===r&&u()}function h(t){if(L("onerror",t),m(),e.removeListener("error",h),0===e.listenerCount("error")){let r=e._writableState||e._readableState;r&&!r.errorEmitted?X(e,t):e.emit("error",t)}}function p(){e.removeListener("finish",f),m()}function f(){L("onfinish"),e.removeListener("close",p),m()}function m(){L("unpipe"),n.unpipe(e)}return n.on("data",d),C(e,"error",h),e.once("close",p),e.once("finish",f),e.emit("pipe",n),!0===e.writableNeedDrain?u():i.flowing||(L("pipe resume"),n.resume()),e},se.prototype.unpipe=function(e){let t=this._readableState;if(0===t.pipes.length)return this;if(!e){let e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}let r=i(t.pipes,e);return-1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},se.prototype.on=function(e,t){let n=M.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,L("on readable",i.length,i.reading),i.length?de(this):i.reading||r.nextTick(ge,this))),n},se.prototype.addListener=se.prototype.on,se.prototype.removeListener=function(e,t){let n=M.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(me,this),n},se.prototype.off=se.prototype.removeListener,se.prototype.removeAllListeners=function(e){let t=M.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(me,this),t},se.prototype.resume=function(){let e=this._readableState;return e.flowing||(L("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(ve,e,t))}(this,e)),e[Z]=!1,this},se.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(L("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Z]=!0,this},se.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{X(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let r=w(e);for(let n=1;n<r.length;n++){let t=r[n];void 0===this[t]&&"function"==typeof e[t]&&(this[t]=e[t].bind(e))}return this},se.prototype[T]=function(){return be(this)},se.prototype.iterator=function(e){return void 0!==e&&W(e,"options"),be(this,e)},y(se.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),y(ae.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Z]},set(e){this[Z]=!!e}}}),se._fromList=_e,se.from=function(e,t){return Y(se,e,t)},se.fromWeb=function(e,t){return ke().newStreamReadableFromReadableStream(e,t)},se.toWeb=function(e,t){return ke().newReadableStreamFromStreamReadable(e,t)},se.wrap=function(e,t){var r,n;return new se({objectMode:null===(r=null!==(n=e.readableObjectMode)&&void 0!==n?n:e.objectMode)||void 0===r||r,...t,destroy(t,r){D.destroyer(e,t),r(t)}}).wrap(e)}}),x=r((e,t)=>{var r=u(),{ArrayPrototypeSlice:i,Error:s,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:l,ObjectDefineProperties:c,ObjectSetPrototypeOf:d,StringPrototypeToLowerCase:h,Symbol:g,SymbolHasInstance:y}=n();t.exports=U,U.WritableState=z;var{EventEmitter:b}=(ih(),Bs(Ad)),_=f().Stream,{Buffer:w}=($u(),Bs(yc)),x=p(),{addAbortSignal:E}=m(),{getHighWaterMark:S,getDefaultHighWaterMark:A}=v(),{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_MULTIPLE_CALLBACK:I,ERR_STREAM_CANNOT_PIPE:M,ERR_STREAM_DESTROYED:C,ERR_STREAM_ALREADY_FINISHED:j,ERR_STREAM_NULL_VALUES:O,ERR_STREAM_WRITE_AFTER_END:R,ERR_UNKNOWN_ENCODING:L}=a().codes,{errorOrDestroy:P}=x;function D(){}d(U.prototype,_.prototype),d(U,_);var $=g("kOnFinished");function z(e,t,r){"boolean"!=typeof r&&(r=t instanceof k()),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?S(this,e,"writableHighWaterMark",r):A(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!(!e||!1!==e.decodeStrings);this.decodeStrings=!n,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=q.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,B(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[$]=[]}function B(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function U(e){let t=this instanceof k();if(!t&&!o(U,this))return new U(e);this._writableState=new z(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&E(e.signal,this)),_.call(this,e),x.construct(this,()=>{let e=this._writableState;e.writing||K(this,e),X(this,e)})}function F(e,t,n,i){let a,s=e._writableState;if("function"==typeof n)i=n,n=s.defaultEncoding;else{if(n){if("buffer"!==n&&!w.isEncoding(n))throw new L(n)}else n=s.defaultEncoding;"function"!=typeof i&&(i=D)}if(null===t)throw new O;if(!s.objectMode)if("string"==typeof t)!1!==s.decodeStrings&&(t=w.from(t,n),n="buffer");else if(t instanceof w)n="buffer";else{if(!_._isUint8Array(t))throw new T("chunk",["string","Buffer","Uint8Array"],t);t=_._uint8ArrayToBuffer(t),n="buffer"}return s.ending?a=new R:s.destroyed&&(a=new C("write")),a?(r.nextTick(i,a),P(e,a,!0),a):(s.pendingcb++,function(e,t,r,n,i){let a=t.objectMode?1:r.length;t.length+=a;let s=t.length<t.highWaterMark;s||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:i}),t.allBuffers&&"buffer"!==n&&(t.allBuffers=!1),t.allNoop&&i!==D&&(t.allNoop=!1)):(t.writelen=a,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1);return s&&!t.errored&&!t.destroyed}(e,s,t,n,i))}function H(e,t,r,n,i,a,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new C("write")):r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function G(e,t,r,n){--t.pendingcb,n(r),Z(t),P(e,r)}function q(e,t){let n=e._writableState,i=n.sync,a=n.writecb;"function"==typeof a?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t?(t.stack,n.errored||(n.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?r.nextTick(G,e,n,t,a):G(e,n,t,a)):(n.buffered.length>n.bufferedIndex&&K(e,n),i?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===a?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:a,stream:e,state:n},r.nextTick(V,n.afterWriteTickInfo)):W(e,n,1,a))):P(e,new I)}function V({stream:e,state:t,count:r,cb:n}){return t.afterWriteTickInfo=null,W(e,t,r,n)}function W(e,t,r,n){for(t.ending||e.destroyed||0!==t.length||!t.needDrain||(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&Z(t),X(e,t)}function Z(e){if(e.writing)return;for(let i=e.bufferedIndex;i<e.buffered.length;++i){var t;let{chunk:r,callback:n}=e.buffered[i],a=e.objectMode?1:r.length;e.length-=a,n(null!==(t=e.errored)&&void 0!==t?t:new C("write"))}let r=e[$].splice(0);for(let i=0;i<r.length;i++){var n;r[i](null!==(n=e.errored)&&void 0!==n?n:new C("end"))}B(e)}function K(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:a}=t,s=r.length-n;if(!s)return;let o=n;if(t.bufferProcessing=!0,s>1&&e._writev){t.pendingcb-=s-1;let n=t.allNoop?D:e=>{for(let t=o;t<r.length;++t)r[t].callback(e)},a=t.allNoop&&0===o?r:i(r,o);a.allBuffers=t.allBuffers,H(e,t,!0,t.length,a,"",n),B(t)}else{do{let{chunk:n,encoding:i,callback:s}=r[o];r[o++]=null,H(e,t,!1,a?1:n.length,n,i,s)}while(o<r.length&&!t.writing);o===r.length?B(t):o>256?(r.splice(0,o),t.bufferedIndex=0):t.bufferedIndex=o}t.bufferProcessing=!1}function Y(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function J(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let n=!1;function i(i){if(n)P(e,null!=i?i:I());else if(n=!0,t.pendingcb--,i){let r=t[$].splice(0);for(let e=0;e<r.length;e++)r[e](i);P(e,i,t.sync)}else Y(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(Q,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(a){i(a)}t.sync=!1}(e,t)))}function X(e,t,n){Y(t)&&(J(e,t),0===t.pendingcb&&(n?(t.pendingcb++,r.nextTick((e,t)=>{Y(t)?Q(e,t):t.pendingcb--},e,t)):Y(t)&&(t.pendingcb++,Q(e,t))))}function Q(e,t){t.pendingcb--,t.finished=!0;let r=t[$].splice(0);for(let n=0;n<r.length;n++)r[n]();if(e.emit("finish"),t.autoDestroy){let t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}z.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},l(z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),l(U,y,{__proto__:null,value:function(e){return!!o(this,e)||this===U&&(e&&e._writableState instanceof z)}}),U.prototype.pipe=function(){P(this,new M)},U.prototype.write=function(e,t,r){return!0===F(this,e,t,r)},U.prototype.cork=function(){this._writableState.corked++},U.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||K(this,e))},U.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=h(e)),!w.isEncoding(e))throw new L(e);return this._writableState.defaultEncoding=e,this},U.prototype._write=function(e,t,r){if(!this._writev)throw new N("_write()");this._writev([{chunk:e,encoding:t}],r)},U.prototype._writev=null,U.prototype.end=function(e,t,n){let i,a=this._writableState;if("function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e){let r=F(this,e,t);r instanceof s&&(i=r)}return a.corked&&(a.corked=1,this.uncork()),i||(a.errored||a.ending?a.finished?i=new j("end"):a.destroyed&&(i=new C("end")):(a.ending=!0,X(this,a,!0),a.ended=!0)),"function"==typeof n&&(i||a.finished?r.nextTick(n,i):a[$].push(n)),this},c(U.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});var ee,te=x.destroy;function re(){return void 0===ee&&(ee={}),ee}U.prototype.destroy=function(e,t){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[$].length)&&r.nextTick(Z,n),te.call(this,e,t),this},U.prototype._undestroy=x.undestroy,U.prototype._destroy=function(e,t){t(e)},U.prototype[b.captureRejectionSymbol]=function(e){this.destroy(e)},U.fromWeb=function(e,t){return re().newStreamWritableFromWritableStream(e,t)},U.toWeb=function(e){return re().newWritableStreamFromStreamWritable(e)}}),E=r((e,t)=>{var r=u(),i=($u(),Bs(yc)),{isReadable:s,isWritable:c,isIterable:f,isNodeStream:m,isReadableNodeStream:g,isWritableNodeStream:v,isDuplexNodeStream:y,isReadableStream:b,isWritableStream:E}=d(),S=h(),{AbortError:A,codes:{ERR_INVALID_ARG_TYPE:T,ERR_INVALID_RETURN_VALUE:N}}=a(),{destroyer:I}=p(),M=k(),C=w(),j=x(),{createDeferredPromise:O}=l(),R=_(),L=globalThis.Blob||i.Blob,P=typeof L<"u"?function(e){return e instanceof L}:function(e){return!1},D=globalThis.AbortController||o().AbortController,{FunctionPrototypeCall:$}=n();class z extends M{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function B(e){let t,r,n,i,a,o=e.readable&&"function"!=typeof e.readable.read?C.wrap(e.readable):e.readable,l=e.writable,u=!!s(o),d=!!c(l);function h(e){let t=i;i=null,t?t(e):e&&a.destroy(e)}return a=new z({readableObjectMode:!(null==o||!o.readableObjectMode),writableObjectMode:!(null==l||!l.writableObjectMode),readable:u,writable:d}),d&&(S(l,e=>{d=!1,e&&I(o,e),h(e)}),a._write=function(e,r,n){l.write(e,r)?n():t=n},a._final=function(e){l.end(),r=e},l.on("drain",function(){if(t){let e=t;t=null,e()}}),l.on("finish",function(){if(r){let e=r;r=null,e()}})),u&&(S(o,e=>{u=!1,e&&I(o,e),h(e)}),o.on("readable",function(){if(n){let e=n;n=null,e()}}),o.on("end",function(){a.push(null)}),a._read=function(){for(;;){let e=o.read();if(null===e)return void(n=a._read);if(!a.push(e))return}}),a._destroy=function(e,a){e||null===i||(e=new A),n=null,t=null,r=null,null===i?a(e):(i=a,I(l,e),I(o,e))},a}t.exports=function e(t,n){if(y(t))return t;if(g(t))return B({readable:t});if(v(t))return B({writable:t});if(m(t))return B({writable:!1,readable:!1});if(b(t))return B({readable:C.fromWeb(t)});if(E(t))return B({writable:j.fromWeb(t)});if("function"==typeof t){let{value:e,write:i,final:a,destroy:s}=function(e){let{promise:t,resolve:n}=O(),i=new D,a=i.signal;return{value:e(async function*(){for(;;){let e=t;t=null;let{chunk:i,done:s,cb:o}=await e;if(r.nextTick(o),s)return;if(a.aborted)throw new A(void 0,{cause:a.reason});({promise:t,resolve:n}=O()),yield i}}(),{signal:a}),write(e,t,r){let i=n;n=null,i({chunk:e,done:!1,cb:r})},final(e){let t=n;n=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(f(e))return R(z,e,{objectMode:!0,write:i,final:a,destroy:s});let o=null==e?void 0:e.then;if("function"==typeof o){let t,n=$(o,e,e=>{if(null!=e)throw new N("nully","body",e)},e=>{I(t,e)});return t=new z({objectMode:!0,readable:!1,write:i,final(e){a(async()=>{try{await n,r.nextTick(e,null)}catch(lee){r.nextTick(e,lee)}})},destroy:s})}throw new N("Iterable, AsyncIterable or AsyncFunction",n,e)}if(P(t))return e(t.arrayBuffer());if(f(t))return R(z,t,{objectMode:!0,writable:!1});if(b(null==t?void 0:t.readable)&&E(null==t?void 0:t.writable))return z.fromWeb(t);if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable)){return B({readable:null!=t&&t.readable?g(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?v(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0})}let i=null==t?void 0:t.then;if("function"==typeof i){let e;return $(i,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{I(e,t)}),e=new z({objectMode:!0,writable:!1,read(){}})}throw new T(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}}),k=r((e,t)=>{var{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:a,ObjectSetPrototypeOf:s}=n();t.exports=d;var o,l,c=w(),u=x();s(d.prototype,c.prototype),s(d,c);{let e=a(u.prototype);for(let t=0;t<e.length;t++){let r=e[t];d.prototype[r]||(d.prototype[r]=u.prototype[r])}}function d(e){if(!(this instanceof d))return new d(e);c.call(this,e),u.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function h(){return void 0===o&&(o={}),o}r(d.prototype,{writable:{__proto__:null,...i(u.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(u.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(u.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(u.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(u.prototype,"writableLength")},writableFinished:{__proto__:null,...i(u.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(u.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(u.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(u.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),d.fromWeb=function(e,t){return h().newStreamDuplexFromReadableWritablePair(e,t)},d.toWeb=function(e){return h().newReadableWritablePairFromDuplex(e)},d.from=function(e){return l||(l=E()),l(e,"body")}}),S=r((e,t)=>{var{ObjectSetPrototypeOf:r,Symbol:i}=n();t.exports=u;var{ERR_METHOD_NOT_IMPLEMENTED:s}=a().codes,o=k(),{getHighWaterMark:l}=v();r(u.prototype,o.prototype),r(u,o);var c=i("kCallback");function u(e){if(!(this instanceof u))return new u(e);let t=e?l(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),o.call(this,e),this._readableState.sync=!1,this[c]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function d(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())})}function h(){this._final!==d&&d.call(this)}u.prototype._final=d,u.prototype._transform=function(e,t,r){throw new s("_transform()")},u.prototype._write=function(e,t,r){let n=this._readableState,i=this._writableState,a=n.length;this._transform(e,t,(e,t)=>{e?r(e):(null!=t&&this.push(t),i.ended||a===n.length||n.length<n.highWaterMark?r():this[c]=r)})},u.prototype._read=function(){if(this[c]){let e=this[c];this[c]=null,e()}}}),A=r((e,t)=>{var{ObjectSetPrototypeOf:r}=n();t.exports=a;var i=S();function a(e){if(!(this instanceof a))return new a(e);i.call(this,e)}r(a.prototype,i.prototype),r(a,i),a.prototype._transform=function(e,t,r){r(null,e)}}),T=r((e,t)=>{var r,i,s,f=u(),{ArrayIsArray:m,Promise:g,SymbolAsyncIterator:v,SymbolDispose:y}=n(),b=h(),{once:_}=l(),x=p(),E=k(),{aggregateTwoErrors:S,codes:{ERR_INVALID_ARG_TYPE:T,ERR_INVALID_RETURN_VALUE:N,ERR_MISSING_ARGS:I,ERR_STREAM_DESTROYED:M,ERR_STREAM_PREMATURE_CLOSE:C},AbortError:j}=a(),{validateFunction:O,validateAbortSignal:R}=c(),{isIterable:L,isReadable:P,isReadableNodeStream:D,isNodeStream:$,isTransformStream:z,isWebStream:B,isReadableStream:U,isReadableFinished:F}=d(),H=globalThis.AbortController||o().AbortController;function G(e,t,r){let n=!1;e.on("close",()=>{n=!0});let i=b(e,{readable:t,writable:r},e=>{n=!e});return{destroy:t=>{n||(n=!0,x.destroyer(e,t||new M("pipe")))},cleanup:i}}function q(e){if(L(e))return e;if(D(e))return async function*(e){i||(i=w());yield*i.prototype[v].call(e)}(e);throw new T("val",["Readable","Iterable","AsyncIterable"],e)}async function V(e,t,r,{end:n}){let i,a=null,s=e=>{if(e&&(i=e),a){let e=a;a=null,e()}},o=()=>new g((e,t)=>{i?t(i):a=()=>{i?t(i):e()}});t.on("drain",s);let l=b(t,{readable:!1},s);try{t.writableNeedDrain&&await o();for await(let r of e)t.write(r)||await o();n&&(t.end(),await o()),r()}catch(c){r(i!==c?S(i,c):c)}finally{l(),t.off("drain",s)}}async function W(e,t,r,{end:n}){z(t)&&(t=t.writable);let i=t.getWriter();try{for await(let t of e)await i.ready,i.write(t).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(a){try{await i.abort(a),r(a)}catch(s){r(s)}}}function Z(e,t,n){if(1===e.length&&m(e[0])&&(e=e[0]),e.length<2)throw new I("streams");let i,a=new H,o=a.signal,c=null==n?void 0:n.signal,u=[];function d(){w(new j)}R(c,"options.signal"),s=s||l().addAbortListener,c&&(i=s(c,d));let h,p,g,v=[],b=0;function _(e){w(e,0===--b)}function w(e,r){var n;if(!e||h&&"ERR_STREAM_PREMATURE_CLOSE"!==h.code||(h=e),h||r){for(;v.length;)v.shift()(h);null===(n=i)||void 0===n||n[y](),a.abort(),r&&(h||u.forEach(e=>e()),f.nextTick(t,h,p))}}for(let s=0;s<e.length;s++){let t=e[s],i=s<e.length-1,a=s>0,l=i||!1!==(null==n?void 0:n.end),c=s===e.length-1;if($(t)){let e=function(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&_(e)};if(l){let{destroy:e,cleanup:r}=G(t,i,a);v.push(e),P(t)&&c&&u.push(r)}t.on("error",e),P(t)&&c&&u.push(()=>{t.removeListener("error",e)})}if(0===s)if("function"==typeof t){if(g=t({signal:o}),!L(g))throw new N("Iterable, AsyncIterable or Stream","source",g)}else g=L(t)||D(t)||z(t)?t:E.from(t);else if("function"==typeof t){var x;if(z(g))g=q(null===(x=g)||void 0===x?void 0:x.readable);else g=q(g);if(g=t(g,{signal:o}),i){if(!L(g,!0))throw new N("AsyncIterable",`transform[${s-1}]`,g)}else{var k;r||(r=A());let e=new r({objectMode:!0}),t=null===(k=g)||void 0===k?void 0:k.then;if("function"==typeof t)b++,t.call(g,t=>{p=t,null!=t&&e.write(t),l&&e.end(),f.nextTick(_)},t=>{e.destroy(t),f.nextTick(_,t)});else if(L(g,!0))b++,V(g,e,_,{end:l});else{if(!U(g)&&!z(g))throw new N("AsyncIterable or Promise","destination",g);{let t=g.readable||g;b++,V(t,e,_,{end:l})}}g=e;let{destroy:n,cleanup:i}=G(g,!1,!0);v.push(n),c&&u.push(i)}}else if($(t)){if(D(g)){b+=2;let e=K(g,t,_,{end:l});P(t)&&c&&u.push(e)}else if(z(g)||U(g)){let e=g.readable||g;b++,V(e,t,_,{end:l})}else{if(!L(g))throw new T("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],g);b++,V(g,t,_,{end:l})}g=t}else if(B(t)){if(D(g))b++,W(q(g),t,_,{end:l});else if(U(g)||L(g))b++,W(g,t,_,{end:l});else{if(!z(g))throw new T("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],g);b++,W(g.readable,t,_,{end:l})}g=t}else g=E.from(t)}return(null!=o&&o.aborted||null!=c&&c.aborted)&&f.nextTick(d),g}function K(e,t,r,{end:n}){let i=!1;if(t.on("close",()=>{i||r(new C)}),e.pipe(t,{end:!1}),n){let r=function(){i=!0,t.end()};F(e)?f.nextTick(r):e.once("end",r)}else r();return b(e,{readable:!0,writable:!1},t=>{let n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)}),b(t,{readable:!1,writable:!0},r)}t.exports={pipelineImpl:Z,pipeline:function(...e){return Z(e,_(function(e){return O(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}}),N=r((e,t)=>{var{pipeline:r}=T(),n=k(),{destroyer:i}=p(),{isNodeStream:s,isReadable:o,isWritable:l,isWebStream:c,isTransformStream:u,isWritableStream:f,isReadableStream:m}=d(),{AbortError:g,codes:{ERR_INVALID_ARG_VALUE:v,ERR_MISSING_ARGS:y}}=a(),b=h();t.exports=function(...e){if(0===e.length)throw new y("streams");if(1===e.length)return n.from(e[0]);let t,a,d,h,p,_=[...e];if("function"==typeof e[0]&&(e[0]=n.from(e[0])),"function"==typeof e[e.length-1]){let t=e.length-1;e[t]=n.from(e[t])}for(let r=0;r<e.length;++r)if(s(e[r])||c(e[r])){if(r<e.length-1&&!(o(e[r])||m(e[r])||u(e[r])))throw new v(`streams[${r}]`,_[r],"must be readable");if(r>0&&!(l(e[r])||f(e[r])||u(e[r])))throw new v(`streams[${r}]`,_[r],"must be writable")}let w=e[0],x=r(e,function(e){let t=h;h=null,t?t(e):e?p.destroy(e):k||E||p.destroy()}),E=!!(l(w)||f(w)||u(w)),k=!!(o(x)||m(x)||u(x));if(p=new n({writableObjectMode:!(null==w||!w.writableObjectMode),readableObjectMode:!(null==x||!x.readableObjectMode),writable:E,readable:k}),E){if(s(w))p._write=function(e,r,n){w.write(e,r)?n():t=n},p._final=function(e){w.end(),a=e},w.on("drain",function(){if(t){let e=t;t=null,e()}});else if(c(w)){let e=(u(w)?w.writable:w).getWriter();p._write=async function(t,r,n){try{await e.ready,e.write(t).catch(()=>{}),n()}catch(hne){n(hne)}},p._final=async function(t){try{await e.ready,e.close().catch(()=>{}),a=t}catch(sre){t(sre)}}}let e=u(x)?x.readable:x;b(e,()=>{if(a){let e=a;a=null,e()}})}if(k)if(s(x))x.on("readable",function(){if(d){let e=d;d=null,e()}}),x.on("end",function(){p.push(null)}),p._read=function(){for(;;){let e=x.read();if(null===e)return void(d=p._read);if(!p.push(e))return}};else if(c(x)){let e=(u(x)?x.readable:x).getReader();p._read=async function(){for(;;)try{let{value:t,done:r}=await e.read();if(!p.push(t))return;if(r)return void p.push(null)}catch{return}}}return p._destroy=function(e,r){e||null===h||(e=new g),d=null,t=null,a=null,null===h?r(e):(h=r,s(x)&&i(x,e))},p}}),I=r((e,t)=>{var r=globalThis.AbortController||o().AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:s,ERR_MISSING_ARGS:u,ERR_OUT_OF_RANGE:p},AbortError:f}=a(),{validateAbortSignal:g,validateInteger:v,validateObject:y}=c(),b=n().Symbol("kWeak"),_=n().Symbol("kResistStopPropagation"),{finished:w}=h(),x=N(),{addAbortSignalNoValidate:E}=m(),{isWritable:k,isNodeStream:S}=d(),{deprecate:A}=l(),{ArrayPrototypePush:T,Boolean:I,MathFloor:M,Number:C,NumberIsNaN:j,Promise:O,PromiseReject:R,PromiseResolve:L,PromisePrototypeThen:P,Symbol:D}=n(),$=D("kEmpty"),z=D("kEof");function B(e,t){if("function"!=typeof e)throw new s("fn",["Function","AsyncFunction"],e);null!=t&&y(t,"options"),null!=(null==t?void 0:t.signal)&&g(t.signal,"options.signal");let r=1;null!=(null==t?void 0:t.concurrency)&&(r=M(t.concurrency));let n=r-1;return null!=(null==t?void 0:t.highWaterMark)&&(n=M(t.highWaterMark)),v(r,"options.concurrency",1),v(n,"options.highWaterMark",0),n+=r,async function*(){let i,a,s=l().AbortSignalAny([null==t?void 0:t.signal].filter(I)),o=this,c=[],u={signal:s},d=!1,h=0;function p(){d=!0,m()}function m(){h-=1,g()}function g(){a&&!d&&h<r&&c.length<n&&(a(),a=null)}!async function(){try{for await(let l of o){if(d)return;if(s.aborted)throw new f;try{if(l=e(l,u),l===$)continue;l=L(l)}catch(t){l=R(t)}h+=1,P(l,m,p),c.push(l),i&&(i(),i=null),!d&&(c.length>=n||h>=r)&&await new O(e=>{a=e})}c.push(z)}catch(l){let e=R(l);P(e,m,p),c.push(e)}finally{d=!0,i&&(i(),i=null)}}();try{for(;;){for(;c.length>0;){let e=await c[0];if(e===z)return;if(s.aborted)throw new f;e!==$&&(yield e),c.shift(),g()}await new O(e=>{i=e})}}finally{d=!0,a&&(a(),a=null)}}.call(this)}async function U(e,t=void 0){for await(let r of F.call(this,e,t))return!0;return!1}function F(e,t){if("function"!=typeof e)throw new s("fn",["Function","AsyncFunction"],e);return B.call(this,async function(t,r){return await e(t,r)?t:$},t)}class H extends u{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function G(e){if(e=C(e),j(e))return 0;if(e<0)throw new p("number",">= 0",e);return e}t.exports.streamReturningOperators={asIndexedPairs:A(function(e=void 0){return null!=e&&y(e,"options"),null!=(null==e?void 0:e.signal)&&g(e.signal,"options.signal"),async function*(){let t=0;for await(let n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new f({cause:e.signal.reason});yield[t++,n]}}.call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&y(t,"options"),null!=(null==t?void 0:t.signal)&&g(t.signal,"options.signal"),e=G(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new f;for await(let i of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new f;e--<=0&&(yield i)}}.call(this)},filter:F,flatMap:function(e,t){let r=B.call(this,e,t);return async function*(){for await(let e of r)yield*e}.call(this)},map:B,take:function(e,t=void 0){return null!=t&&y(t,"options"),null!=(null==t?void 0:t.signal)&&g(t.signal,"options.signal"),e=G(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new f;for await(let i of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new f;if(e-- >0&&(yield i),e<=0)return}}.call(this)},compose:function(e,t){if(null!=t&&y(t,"options"),null!=(null==t?void 0:t.signal)&&g(t.signal,"options.signal"),S(e)&&!k(e))throw new i("stream",e,"must be writable");let r=x(this,e);return null!=t&&t.signal&&E(t.signal,r),r}},t.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new s("fn",["Function","AsyncFunction"],e);return!(await U.call(this,async(...t)=>!(await e(...t)),t))},forEach:async function(e,t){if("function"!=typeof e)throw new s("fn",["Function","AsyncFunction"],e);for await(let r of B.call(this,async function(t,r){return await e(t,r),$},t));},reduce:async function(e,t,n){var i;if("function"!=typeof e)throw new s("reducer",["Function","AsyncFunction"],e);null!=n&&y(n,"options"),null!=(null==n?void 0:n.signal)&&g(n.signal,"options.signal");let a=arguments.length>1;if(null!=n&&null!==(i=n.signal)&&void 0!==i&&i.aborted){let e=new f(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await w(this.destroy(e)),e}let o=new r,l=o.signal;if(null!=n&&n.signal){let e={once:!0,[b]:this,[_]:!0};n.signal.addEventListener("abort",()=>o.abort(),e)}let c=!1;try{for await(let r of this){var u;if(c=!0,null!=n&&null!==(u=n.signal)&&void 0!==u&&u.aborted)throw new f;a?t=await e(t,r,{signal:l}):(t=r,a=!0)}if(!c&&!a)throw new H}finally{o.abort()}return t},toArray:async function(e){null!=e&&y(e,"options"),null!=(null==e?void 0:e.signal)&&g(e.signal,"options.signal");let t=[];for await(let n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new f(void 0,{cause:e.signal.reason});T(t,n)}return t},some:U,find:async function(e,t){for await(let r of F.call(this,e,t))return r}}}),M=r((e,t)=>{var{ArrayPrototypePop:r,Promise:i}=n(),{isIterable:a,isNodeStream:s,isWebStream:o}=d(),{pipelineImpl:l}=T(),{finished:c}=h();C(),t.exports={finished:c,pipeline:function(...e){return new i((t,n)=>{let i,c,u=e[e.length-1];if(u&&"object"==typeof u&&!s(u)&&!a(u)&&!o(u)){let t=r(e);i=t.signal,c=t.end}l(e,(e,r)=>{e?n(e):t(r)},{signal:i,end:c})})}}}),C=r((e,t)=>{var{Buffer:r}=($u(),Bs(yc)),{ObjectDefineProperty:i,ObjectKeys:s,ReflectApply:o}=n(),{promisify:{custom:c}}=l(),{streamReturningOperators:u,promiseReturningOperators:g}=I(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:y}}=a(),b=N(),{setDefaultHighWaterMark:_,getDefaultHighWaterMark:E}=v(),{pipeline:C}=T(),{destroyer:j}=p(),O=h(),R=M(),L=d(),P=t.exports=f().Stream;P.isDestroyed=L.isDestroyed,P.isDisturbed=L.isDisturbed,P.isErrored=L.isErrored,P.isReadable=L.isReadable,P.isWritable=L.isWritable,P.Readable=w();for(let n of s(u)){let e=function(...e){if(new.target)throw y();return P.Readable.from(o(t,this,e))},t=u[n];i(e,"name",{__proto__:null,value:t.name}),i(e,"length",{__proto__:null,value:t.length}),i(P.Readable.prototype,n,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}for(let n of s(g)){let e=function(...e){if(new.target)throw y();return o(t,this,e)},t=g[n];i(e,"name",{__proto__:null,value:t.name}),i(e,"length",{__proto__:null,value:t.length}),i(P.Readable.prototype,n,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}P.Writable=x(),P.Duplex=k(),P.Transform=S(),P.PassThrough=A(),P.pipeline=C;var{addAbortSignal:D}=m();P.addAbortSignal=D,P.finished=O,P.destroy=j,P.compose=b,P.setDefaultHighWaterMark=_,P.getDefaultHighWaterMark=E,i(P,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>R}),i(C,c,{__proto__:null,enumerable:!0,get:()=>R.pipeline}),i(O,c,{__proto__:null,enumerable:!0,get:()=>R.finished}),P.Stream=P,P._isUint8Array=function(e){return e instanceof Uint8Array},P._uint8ArrayToBuffer=function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)}}),j=r((e,t)=>{ah();{let e=C(),r=M(),n=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=n,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get:()=>r}),t.exports.Stream=e.Stream}t.exports.default=t.exports});t.exports=j()}),sh={};function oh(){return Lf}Fs(sh,{webcrypto:()=>Pf,rng:()=>Jp,randomUUID:()=>Jf,randomFillSync:()=>jf,randomFill:()=>Cf,randomBytes:()=>Xp,publicEncrypt:()=>Tf,publicDecrypt:()=>If,pseudoRandomBytes:()=>Yp,prng:()=>Kp,privateEncrypt:()=>Nf,privateDecrypt:()=>Mf,pbkdf2Sync:()=>sf,pbkdf2:()=>af,listCiphers:()=>gf,getRandomValues:()=>Yf,getHashes:()=>nf,getDiffieHellman:()=>bf,getCurves:()=>oh,getCiphers:()=>mf,default:()=>Df,createVerify:()=>kf,createSign:()=>xf,createHmac:()=>rf,createHash:()=>ef,createECDH:()=>Af,createDiffieHellmanGroup:()=>yf,createDiffieHellman:()=>_f,createDecipheriv:()=>ff,createDecipher:()=>hf,createCredentials:()=>Of,createCipheriv:()=>uf,createCipher:()=>lf,constants:()=>Rf,Verify:()=>Sf,Sign:()=>Ef,Hmac:()=>tf,Hash:()=>Qp,DiffieHellmanGroup:()=>vf,DiffieHellman:()=>wf,Decipheriv:()=>pf,Decipher:()=>df,DEFAULT_ENCODING:()=>Kf,Cipheriv:()=>cf,Cipher:()=>of});var lh,ch,uh,dh,hh,ph,fh,mh,gh,vh,yh,bh,_h,wh,xh,Eh,kh,Sh,Ah,Th,Nh,Ih,Mh,Ch,jh,Oh,Rh,Lh,Ph,Dh,$h,zh,Bh,Uh,Fh,Hh,Gh,qh,Vh,Wh,Zh,Kh,Yh,Jh,Xh,Qh,ep,tp,rp,np,ip,ap,sp,op,lp,cp,up,dp,hp,pp,fp,mp,gp,vp,yp,bp,_p,wp,xp,Ep,kp,Sp,Ap,Tp,Np,Ip,Mp,Cp,jp,Op,Rp,Lp,Pp,Dp,$p,zp,Bp,Up,Fp,Hp,Gp,qp,Vp,Wp,Zp,Kp,Yp,Jp,Xp,Qp,ef,tf,rf,nf,af,sf,of,lf,cf,uf,df,hf,pf,ff,mf,gf,vf,yf,bf,_f,wf,xf,Ef,kf,Sf,Af,Tf,Nf,If,Mf,Cf,jf,Of,Rf,Lf,Pf,Df,$f,zf,Bf,Uf,Ff,Hf,Gf,qf,Vf,Wf,Zf=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Kf="buffer",Yf=e=>crypto.getRandomValues(e),Jf=()=>crypto.randomUUID(),Xf=Hs(()=>{lh=Object.create,({getPrototypeOf:ch,defineProperty:uh,getOwnPropertyNames:dh}=Object),hh=Object.prototype.hasOwnProperty,ph=Zf((e,t)=>{t.exports=(Xf(),Bs(sh)).randomBytes}),fh=Zf((e,t)=>{t.exports=(Xf(),Bs(sh)).createHash}),mh=Zf((e,t)=>{t.exports=(Xf(),Bs(sh)).createHmac}),gh=Zf((e,t)=>{t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}}),vh=Zf((e,t)=>{var r=Math.pow(2,30)-1;t.exports=function(e,t){if("number"!=typeof e)throw TypeError("Iterations not a number");if(e<0)throw TypeError("Bad iterations");if("number"!=typeof t)throw TypeError("Key length not a number");if(t<0||t>r||t!=t)throw TypeError("Bad key length")}}),yh=Zf((e,t)=>{var r;globalThis.process&&globalThis.process.browser?r="utf-8":globalThis.process&&globalThis.process.version?r=parseInt(process.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":r="utf-8",t.exports=r}),bh=Zf((e,t)=>{
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=($u(),Bs(yc)),n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a),a.prototype=Object.create(n.prototype),i(n,a),a.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r.SlowBuffer(e)}}),_h=Zf((e,t)=>{var r=bh().Buffer;t.exports=function(e,t,n){if(r.isBuffer(e))return e;if("string"==typeof e)return r.from(e,t);if(ArrayBuffer.isView(e))return r.from(e.buffer);throw TypeError(n+" must be a string, a Buffer, a typed array or a DataView")}}),wh=Zf((e,t)=>{var r={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20},n=mh(),i=bh().Buffer,a=vh(),s=yh(),o=_h();t.exports=function(e,t,l,c,u){a(l,c),e=o(e,s,"Password"),t=o(t,s,"Salt"),u=u||"sha1";var d=i.allocUnsafe(c),h=i.allocUnsafe(t.length+4);t.copy(h,0,0,t.length);for(var p=0,f=r[u],m=Math.ceil(c/f),g=1;g<=m;g++){h.writeUInt32BE(g,t.length);for(var v=n(u,e).update(h).digest(),y=v,b=1;b<l;b++){y=n(u,e).update(y).digest();for(var _=0;_<f;_++)v[_]^=y[_]}v.copy(d,p),p+=f}return d}}),xh=Zf((e,t)=>{var r,n,i=bh().Buffer,a=vh(),s=yh(),o=wh(),l=_h(),c=globalThis.crypto&&globalThis.crypto.subtle,u={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},d=[];function h(){return n||(n=globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.queueMicrotask?globalThis.queueMicrotask:globalThis.setImmediate?globalThis.setImmediate:globalThis.setTimeout)}function p(e,t,r,n,a){return c.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then(function(e){return c.deriveBits({name:"PBKDF2",salt:t,iterations:r,hash:{name:a}},e,n<<3)}).then(function(e){return i.from(e)})}t.exports=function(e,t,n,f,m,g){"function"==typeof m&&(g=m,m=void 0);var v=u[(m=m||"sha1").toLowerCase()];if(v&&"function"==typeof globalThis.Promise){if(a(n,f),e=l(e,s,"Password"),t=l(t,s,"Salt"),"function"!=typeof g)throw Error("No callback provided to pbkdf2");!function(e,t){e.then(function(e){h()(function(){t(null,e)})},function(e){h()(function(){t(e)})})}(function(e){if(globalThis.process&&!globalThis.process.browser)return Promise.resolve(!1);if(!c||!c.importKey||!c.deriveBits)return Promise.resolve(!1);if(void 0!==d[e])return d[e];var t=p(r=r||i.alloc(8),r,10,128,e).then(function(){return!0}).catch(function(){return!1});return d[e]=t,t}(v).then(function(r){return r?p(e,t,n,f,v):o(e,t,n,f,m)}),g)}else h()(function(){var r;try{r=o(e,t,n,f,m)}catch(i){return g(i)}g(null,r)})}}),Eh=Zf(e=>{var t=(Xf(),Bs(sh)),r=vh(),n=yh(),i=_h();t.pbkdf2Sync&&-1!==t.pbkdf2Sync.toString().indexOf("keylen, digest")?(e.pbkdf2Sync=function(e,a,s,o,l){return r(s,o),e=i(e,n,"Password"),a=i(a,n,"Salt"),l=l||"sha1",t.pbkdf2Sync(e,a,s,o,l)},e.pbkdf2=function(e,a,s,o,l,c){if(r(s,o),e=i(e,n,"Password"),a=i(a,n,"Salt"),"function"==typeof l&&(c=l,l="sha1"),"function"!=typeof c)throw Error("No callback provided to pbkdf2");return t.pbkdf2(e,a,s,o,l,c)}):(e.pbkdf2Sync=wh(),e.pbkdf2=xh())}),kh=Zf(e=>{var t=(Xf(),Bs(sh));e.createCipher=e.Cipher=t.createCipher,e.createCipheriv=e.Cipheriv=t.createCipheriv,e.createDecipher=e.Decipher=t.createDecipher,e.createDecipheriv=e.Decipheriv=t.createDecipheriv,e.listCiphers=e.getCiphers=t.getCiphers}),Sh=Zf(e=>{var t=(Xf(),Bs(sh));e.DiffieHellmanGroup=t.DiffieHellmanGroup,e.createDiffieHellmanGroup=t.createDiffieHellmanGroup,e.getDiffieHellman=t.getDiffieHellman,e.createDiffieHellman=t.createDiffieHellman,e.DiffieHellman=t.DiffieHellman}),Ah=Zf(e=>{var t=(Xf(),Bs(sh));e.createSign=t.createSign,e.Sign=t.Sign,e.createVerify=t.createVerify,e.Verify=t.Verify}),Th=Zf((e,t)=>{t.exports={name:"elliptic",version:"6.6.1",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}}),Nh=Zf((e,t)=>{!function(e,t){function r(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:($u(),Bs(yc)).Buffer}catch(Vte){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function o(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function l(e,t,r,n){for(var i=0,a=Math.min(e.length,r),s=t;s<a;s++){var o=e.charCodeAt(s)-48;i*=n,i+=o>=49?o-49+10:o>=17?o-17+10:o}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,s,o=0;if("be"===n)for(i=e.length-1,a=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===n)for(i=0,a=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this.strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,a=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=o(e,t,n)<<a,this.words[s]|=67108863&i,a>=18?(a-=18,s+=1,this.words[s]|=i>>>26):a+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=o(e,t,n)<<a,this.words[s]|=67108863&i,a>=18?(a-=18,s+=1,this.words[s]|=i>>>26):a+=8;this.strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var a=e.length-r,s=a%n,o=Math.min(a,a-s)+r,c=0,u=r;u<o;u+=n)c=l(e,u,u+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var d=1;for(c=l(e,u,e.length,t),u=0;u<s;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],a=0|t.words[0],s=i*a,o=67108863&s,l=s/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){for(var u=l>>>26,d=67108863&l,h=Math.min(c,t.length-1),p=Math.max(0,c-e.length+1);p<=h;p++){var f=c-p|0;u+=(s=(i=0|e.words[f])*(a=0|t.words[p])+d)/67108864|0,d=67108863&s}r.words[c]=0|d,l=0|u}return 0!==l?r.words[c]=0|l:r.length--,r.strip()}i.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,a=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<i|a)).toString(16);a=o>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==a||s!==this.length-1?c[6-l.length]+l+n:l+n}for(0!==a&&(n=a.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=u[e],p=d[e];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modn(p).toString(e);n=(f=f.idivn(p)).isZero()?m+n:c[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return r(typeof a<"u"),this.toArrayLike(a,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0"),this.strip();var s,o,l="le"===t,c=new e(a),u=this.clone();if(l){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),c[o]=s;for(;o<a;o++)c[o]=0}else{for(o=0;o<a-i;o++)c[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),c[a-o-1]=s}return c},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,a=0;a<n.length;a++)t=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<r.length;a++)t=(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var a=0,s=0;s<n.length;s++)a=(t=(0|r.words[s])-(0|n.words[s])+a)>>26,this.words[s]=67108863&t;for(;0!==a&&s<r.length;s++)a=(t=(0|r.words[s])+a)>>26,this.words[s]=67108863&t;if(0===a&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,a,s=e.words,o=t.words,l=r.words,c=0,u=0|s[0],d=8191&u,h=u>>>13,p=0|s[1],f=8191&p,m=p>>>13,g=0|s[2],v=8191&g,y=g>>>13,b=0|s[3],_=8191&b,w=b>>>13,x=0|s[4],E=8191&x,k=x>>>13,S=0|s[5],A=8191&S,T=S>>>13,N=0|s[6],I=8191&N,M=N>>>13,C=0|s[7],j=8191&C,O=C>>>13,R=0|s[8],L=8191&R,P=R>>>13,D=0|s[9],$=8191&D,z=D>>>13,B=0|o[0],U=8191&B,F=B>>>13,H=0|o[1],G=8191&H,q=H>>>13,V=0|o[2],W=8191&V,Z=V>>>13,K=0|o[3],Y=8191&K,J=K>>>13,X=0|o[4],Q=8191&X,ee=X>>>13,te=0|o[5],re=8191&te,ne=te>>>13,ie=0|o[6],ae=8191&ie,se=ie>>>13,oe=0|o[7],le=8191&oe,ce=oe>>>13,ue=0|o[8],de=8191&ue,he=ue>>>13,pe=0|o[9],fe=8191&pe,me=pe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(c+(n=Math.imul(d,U))|0)+((8191&(i=(i=Math.imul(d,F))+Math.imul(h,U)|0))<<13)|0;c=((a=Math.imul(h,F))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(f,U),i=(i=Math.imul(f,F))+Math.imul(m,U)|0,a=Math.imul(m,F);var ve=(c+(n=n+Math.imul(d,G)|0)|0)+((8191&(i=(i=i+Math.imul(d,q)|0)+Math.imul(h,G)|0))<<13)|0;c=((a=a+Math.imul(h,q)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(v,U),i=(i=Math.imul(v,F))+Math.imul(y,U)|0,a=Math.imul(y,F),n=n+Math.imul(f,G)|0,i=(i=i+Math.imul(f,q)|0)+Math.imul(m,G)|0,a=a+Math.imul(m,q)|0;var ye=(c+(n=n+Math.imul(d,W)|0)|0)+((8191&(i=(i=i+Math.imul(d,Z)|0)+Math.imul(h,W)|0))<<13)|0;c=((a=a+Math.imul(h,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(_,U),i=(i=Math.imul(_,F))+Math.imul(w,U)|0,a=Math.imul(w,F),n=n+Math.imul(v,G)|0,i=(i=i+Math.imul(v,q)|0)+Math.imul(y,G)|0,a=a+Math.imul(y,q)|0,n=n+Math.imul(f,W)|0,i=(i=i+Math.imul(f,Z)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,Z)|0;var be=(c+(n=n+Math.imul(d,Y)|0)|0)+((8191&(i=(i=i+Math.imul(d,J)|0)+Math.imul(h,Y)|0))<<13)|0;c=((a=a+Math.imul(h,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,F))+Math.imul(k,U)|0,a=Math.imul(k,F),n=n+Math.imul(_,G)|0,i=(i=i+Math.imul(_,q)|0)+Math.imul(w,G)|0,a=a+Math.imul(w,q)|0,n=n+Math.imul(v,W)|0,i=(i=i+Math.imul(v,Z)|0)+Math.imul(y,W)|0,a=a+Math.imul(y,Z)|0,n=n+Math.imul(f,Y)|0,i=(i=i+Math.imul(f,J)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,J)|0;var _e=(c+(n=n+Math.imul(d,Q)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,Q)|0))<<13)|0;c=((a=a+Math.imul(h,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(A,U),i=(i=Math.imul(A,F))+Math.imul(T,U)|0,a=Math.imul(T,F),n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,q)|0)+Math.imul(k,G)|0,a=a+Math.imul(k,q)|0,n=n+Math.imul(_,W)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(w,W)|0,a=a+Math.imul(w,Z)|0,n=n+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(y,Y)|0,a=a+Math.imul(y,J)|0,n=n+Math.imul(f,Q)|0,i=(i=i+Math.imul(f,ee)|0)+Math.imul(m,Q)|0,a=a+Math.imul(m,ee)|0;var we=(c+(n=n+Math.imul(d,re)|0)|0)+((8191&(i=(i=i+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((a=a+Math.imul(h,ne)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,F))+Math.imul(M,U)|0,a=Math.imul(M,F),n=n+Math.imul(A,G)|0,i=(i=i+Math.imul(A,q)|0)+Math.imul(T,G)|0,a=a+Math.imul(T,q)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,Z)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,Z)|0,n=n+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(w,Y)|0,a=a+Math.imul(w,J)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(y,Q)|0,a=a+Math.imul(y,ee)|0,n=n+Math.imul(f,re)|0,i=(i=i+Math.imul(f,ne)|0)+Math.imul(m,re)|0,a=a+Math.imul(m,ne)|0;var xe=(c+(n=n+Math.imul(d,ae)|0)|0)+((8191&(i=(i=i+Math.imul(d,se)|0)+Math.imul(h,ae)|0))<<13)|0;c=((a=a+Math.imul(h,se)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(j,U),i=(i=Math.imul(j,F))+Math.imul(O,U)|0,a=Math.imul(O,F),n=n+Math.imul(I,G)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(M,G)|0,a=a+Math.imul(M,q)|0,n=n+Math.imul(A,W)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(T,W)|0,a=a+Math.imul(T,Z)|0,n=n+Math.imul(E,Y)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,J)|0,n=n+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,Q)|0,a=a+Math.imul(w,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(y,re)|0,a=a+Math.imul(y,ne)|0,n=n+Math.imul(f,ae)|0,i=(i=i+Math.imul(f,se)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,se)|0;var Ee=(c+(n=n+Math.imul(d,le)|0)|0)+((8191&(i=(i=i+Math.imul(d,ce)|0)+Math.imul(h,le)|0))<<13)|0;c=((a=a+Math.imul(h,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,F))+Math.imul(P,U)|0,a=Math.imul(P,F),n=n+Math.imul(j,G)|0,i=(i=i+Math.imul(j,q)|0)+Math.imul(O,G)|0,a=a+Math.imul(O,q)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(M,W)|0,a=a+Math.imul(M,Z)|0,n=n+Math.imul(A,Y)|0,i=(i=i+Math.imul(A,J)|0)+Math.imul(T,Y)|0,a=a+Math.imul(T,J)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(k,Q)|0,a=a+Math.imul(k,ee)|0,n=n+Math.imul(_,re)|0,i=(i=i+Math.imul(_,ne)|0)+Math.imul(w,re)|0,a=a+Math.imul(w,ne)|0,n=n+Math.imul(v,ae)|0,i=(i=i+Math.imul(v,se)|0)+Math.imul(y,ae)|0,a=a+Math.imul(y,se)|0,n=n+Math.imul(f,le)|0,i=(i=i+Math.imul(f,ce)|0)+Math.imul(m,le)|0,a=a+Math.imul(m,ce)|0;var ke=(c+(n=n+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;c=((a=a+Math.imul(h,he)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul($,U),i=(i=Math.imul($,F))+Math.imul(z,U)|0,a=Math.imul(z,F),n=n+Math.imul(L,G)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(P,G)|0,a=a+Math.imul(P,q)|0,n=n+Math.imul(j,W)|0,i=(i=i+Math.imul(j,Z)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,Z)|0,n=n+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(M,Y)|0,a=a+Math.imul(M,J)|0,n=n+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(T,Q)|0,a=a+Math.imul(T,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(k,re)|0,a=a+Math.imul(k,ne)|0,n=n+Math.imul(_,ae)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(w,ae)|0,a=a+Math.imul(w,se)|0,n=n+Math.imul(v,le)|0,i=(i=i+Math.imul(v,ce)|0)+Math.imul(y,le)|0,a=a+Math.imul(y,ce)|0,n=n+Math.imul(f,de)|0,i=(i=i+Math.imul(f,he)|0)+Math.imul(m,de)|0,a=a+Math.imul(m,he)|0;var Se=(c+(n=n+Math.imul(d,fe)|0)|0)+((8191&(i=(i=i+Math.imul(d,me)|0)+Math.imul(h,fe)|0))<<13)|0;c=((a=a+Math.imul(h,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul($,G),i=(i=Math.imul($,q))+Math.imul(z,G)|0,a=Math.imul(z,q),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,Z)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,Z)|0,n=n+Math.imul(j,Y)|0,i=(i=i+Math.imul(j,J)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(M,Q)|0,a=a+Math.imul(M,ee)|0,n=n+Math.imul(A,re)|0,i=(i=i+Math.imul(A,ne)|0)+Math.imul(T,re)|0,a=a+Math.imul(T,ne)|0,n=n+Math.imul(E,ae)|0,i=(i=i+Math.imul(E,se)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,se)|0,n=n+Math.imul(_,le)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,le)|0,a=a+Math.imul(w,ce)|0,n=n+Math.imul(v,de)|0,i=(i=i+Math.imul(v,he)|0)+Math.imul(y,de)|0,a=a+Math.imul(y,he)|0;var Ae=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul($,W),i=(i=Math.imul($,Z))+Math.imul(z,W)|0,a=Math.imul(z,Z),n=n+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,J)|0,n=n+Math.imul(j,Q)|0,i=(i=i+Math.imul(j,ee)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(M,re)|0,a=a+Math.imul(M,ne)|0,n=n+Math.imul(A,ae)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(T,ae)|0,a=a+Math.imul(T,se)|0,n=n+Math.imul(E,le)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,ce)|0,n=n+Math.imul(_,de)|0,i=(i=i+Math.imul(_,he)|0)+Math.imul(w,de)|0,a=a+Math.imul(w,he)|0;var Te=(c+(n=n+Math.imul(v,fe)|0)|0)+((8191&(i=(i=i+Math.imul(v,me)|0)+Math.imul(y,fe)|0))<<13)|0;c=((a=a+Math.imul(y,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul($,Y),i=(i=Math.imul($,J))+Math.imul(z,Y)|0,a=Math.imul(z,J),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(P,Q)|0,a=a+Math.imul(P,ee)|0,n=n+Math.imul(j,re)|0,i=(i=i+Math.imul(j,ne)|0)+Math.imul(O,re)|0,a=a+Math.imul(O,ne)|0,n=n+Math.imul(I,ae)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(M,ae)|0,a=a+Math.imul(M,se)|0,n=n+Math.imul(A,le)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(T,le)|0,a=a+Math.imul(T,ce)|0,n=n+Math.imul(E,de)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(k,de)|0,a=a+Math.imul(k,he)|0;var Ne=(c+(n=n+Math.imul(_,fe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(w,fe)|0))<<13)|0;c=((a=a+Math.imul(w,me)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul($,Q),i=(i=Math.imul($,ee))+Math.imul(z,Q)|0,a=Math.imul(z,ee),n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(P,re)|0,a=a+Math.imul(P,ne)|0,n=n+Math.imul(j,ae)|0,i=(i=i+Math.imul(j,se)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,se)|0,n=n+Math.imul(I,le)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(M,le)|0,a=a+Math.imul(M,ce)|0,n=n+Math.imul(A,de)|0,i=(i=i+Math.imul(A,he)|0)+Math.imul(T,de)|0,a=a+Math.imul(T,he)|0;var Ie=(c+(n=n+Math.imul(E,fe)|0)|0)+((8191&(i=(i=i+Math.imul(E,me)|0)+Math.imul(k,fe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,re),i=(i=Math.imul($,ne))+Math.imul(z,re)|0,a=Math.imul(z,ne),n=n+Math.imul(L,ae)|0,i=(i=i+Math.imul(L,se)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,se)|0,n=n+Math.imul(j,le)|0,i=(i=i+Math.imul(j,ce)|0)+Math.imul(O,le)|0,a=a+Math.imul(O,ce)|0,n=n+Math.imul(I,de)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(M,de)|0,a=a+Math.imul(M,he)|0;var Me=(c+(n=n+Math.imul(A,fe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(T,fe)|0))<<13)|0;c=((a=a+Math.imul(T,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul($,ae),i=(i=Math.imul($,se))+Math.imul(z,ae)|0,a=Math.imul(z,se),n=n+Math.imul(L,le)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(P,le)|0,a=a+Math.imul(P,ce)|0,n=n+Math.imul(j,de)|0,i=(i=i+Math.imul(j,he)|0)+Math.imul(O,de)|0,a=a+Math.imul(O,he)|0;var Ce=(c+(n=n+Math.imul(I,fe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(M,fe)|0))<<13)|0;c=((a=a+Math.imul(M,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul($,le),i=(i=Math.imul($,ce))+Math.imul(z,le)|0,a=Math.imul(z,ce),n=n+Math.imul(L,de)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(P,de)|0,a=a+Math.imul(P,he)|0;var je=(c+(n=n+Math.imul(j,fe)|0)|0)+((8191&(i=(i=i+Math.imul(j,me)|0)+Math.imul(O,fe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,n=Math.imul($,de),i=(i=Math.imul($,he))+Math.imul(z,de)|0,a=Math.imul(z,he);var Oe=(c+(n=n+Math.imul(L,fe)|0)|0)+((8191&(i=(i=i+Math.imul(L,me)|0)+Math.imul(P,fe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var Re=(c+(n=Math.imul($,fe))|0)+((8191&(i=(i=Math.imul($,me))+Math.imul(z,fe)|0))<<13)|0;return c=((a=Math.imul(z,me))+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,l[0]=ge,l[1]=ve,l[2]=ye,l[3]=be,l[4]=_e,l[5]=we,l[6]=xe,l[7]=Ee,l[8]=ke,l[9]=Se,l[10]=Ae,l[11]=Te,l[12]=Ne,l[13]=Ie,l[14]=Me,l[15]=Ce,l[16]=je,l[17]=Oe,l[18]=Re,0!==c&&(l[19]=c,r.length++),r};function f(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(p=h),i.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?p(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var s=i;i=0;for(var o=67108863&n,l=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=l;c++){var u=a-c,d=(0|e.words[u])*(0|t.words[c]),h=67108863&d;o=67108863&(h=h+o|0),i+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[a]=o,n=s,s=i}return 0!==n?r.words[a]=n:r.length--,r.strip()}(this,e,t):f(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=Array(e),r=i.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,i,a){for(var s=0;s<a;s++)n[s]=t[e[s]],i[s]=r[e[s]]},m.prototype.transform=function(e,t,r,n,i,a){this.permute(a,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var o=s<<1,l=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),u=0;u<i;u+=o)for(var d=l,h=c,p=0;p<s;p++){var f=r[u+p],m=n[u+p],g=r[u+p+s],v=n[u+p+s],y=d*g-h*v;v=d*v+h*g,g=y,r[u+p]=f+g,n[u+p]=m+v,r[u+p+s]=f-g,n[u+p+s]=m-v,p!==o&&(y=l*d-c*h,h=l*h+c*d,d=y)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},m.prototype.convert13b=function(e,t,n,i){for(var a=0,s=0;s<t;s++)a+=0|e[s],n[2*s]=8191&a,a>>>=13,n[2*s+1]=8191&a,a>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===a),r(!(-8192&a))},m.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),a=this.stub(n),s=Array(n),o=Array(n),l=Array(n),c=Array(n),u=Array(n),d=Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,c,n),this.transform(s,a,o,l,n,i),this.transform(c,a,u,d,n,i);for(var p=0;p<n;p++){var f=o[p]*u[p]-l[p]*d[p];l[p]=o[p]*d[p]+l[p]*u[p],o[p]=f}return this.conjugate(o,l,n),this.transform(o,l,h,a,n,i),this.conjugate(h,a,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=Array(this.length+e.length),f(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,a=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=a>>>26,this.words[n]=67108863&a}return 0!==t&&(this.words[n]=t,this.length++),this.length=0===e?1:this.length,this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var a=r.sqr();n<t.length;n++,a=a.sqr())0!==t[n]&&(r=r.mul(a));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,l=(0|this.words[t])-o<<n;this.words[t]=l|s,s=o>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,s=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,l=n;if(i-=s,i=Math.max(0,i),l){for(var c=0;c<s;c++)l.words[c]=this.words[c];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var d=0|this.words[c];this.words[c]=u<<26-a|d>>>a,u=d&o}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,a=e.length+n;this._expand(a);var s,o=0;for(i=0;i<e.length;i++){s=(0|this.words[i+n])+o;var l=(0|e.words[i])*t;o=((s-=67108863&l)>>26)-(l/67108864|0),this.words[i+n]=67108863&s}for(;i<this.length-n;i++)o=(s=(0|this.words[i+n])+o)>>26,this.words[i+n]=67108863&s;if(0===o)return this.strip();for(r(-1===o),o=0,i=0;i<this.length;i++)o=(s=-(0|this.words[i])+o)>>26,this.words[i]=67108863&s;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),a=e,s=0|a.words[a.length-1];0!==(r=26-this._countBits(s))&&(a=a.ushln(r),n.iushln(r),s=0|a.words[a.length-1]);var o,l=n.length-a.length;if("mod"!==t){(o=new i(null)).length=l+1,o.words=Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var u=n.clone()._ishlnsubmul(a,1,l);0===u.negative&&(n=u,o&&(o.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|n.words[a.length+d])+(0|n.words[a.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(a,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(a,1,d),n.isZero()||(n.negative^=1);o&&(o.words[d]=h)}return o&&o.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:o||null,mod:n}},i.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(a=o.div.neg()),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:a,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(a=o.div.neg()),{div:a,mod:o.mod}):0!==(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var a,s,o},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(e<=67108863);for(var t=67108864%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},i.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new i(1),s=new i(0),o=new i(0),l=new i(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0===(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(a.isOdd()||s.isOdd())&&(a.iadd(u),s.isub(d)),a.iushrn(1),s.iushrn(1);for(var f=0,m=1;0===(n.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(u),l.isub(d)),o.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(o),s.isub(l)):(n.isub(t),o.isub(a),l.isub(s))}return{a:o,b:l,gcd:n.iushln(c)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,s=new i(1),o=new i(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,u=1;0===(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var d=0,h=1;0===(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(o)):(n.isub(t),o.isub(s))}return(a=0===t.cmpn(1)?s:o).cmpn(0)<0&&a.iadd(e),a},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var a=t;t=r,r=a}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return!(1&this.words[0])},i.prototype.isOdd=function(){return!(1&~this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,s=n;0!==a&&s<this.length;s++){var o=0|this.words[s];a=(o+=a)>>>26,o&=67108863,this.words[s]=o}return 0!==a&&(this.words[s]=a,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new x(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new i(null);return e.words=Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},n(y,v),y.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|a>>>22,a=s}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(b,v),n(_,v),n(w,v),w.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new b;else if("p192"===e)t=new _;else{if("p25519"!==e)throw Error("Unknown prime "+e);t=new w}return g[e]=t,t},x.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var a=this.m.subn(1),s=0;!a.isZero()&&0===a.andln(1);)s++,a.iushrn(1);r(!a.isZero());var o=new i(1).toRed(this),l=o.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,a),h=this.pow(e,a.addn(1).iushrn(1)),p=this.pow(e,a),f=s;0!==p.cmp(o);){for(var m=p,g=0;0!==m.cmp(o);g++)m=m.redSqr();r(g<f);var v=this.pow(d,new i(1).iushln(f-g-1));h=h.redMul(v),d=v.redSqr(),p=p.redMul(d),f=g}return h},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var a=r[0],s=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],u=l-1;u>=0;u--){var d=c>>u&1;a!==r[0]&&(a=this.sqr(a)),0!==d||0!==s?(s<<=1,s|=d,(4===++o||0===n&&0===u)&&(a=this.mul(a,r[s]),o=0,s=0)):o=0}l=26}return a},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new E(e)},n(E,x),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),s=a;return a.cmp(this.m)>=0?s=a.isub(this.m):a.cmpn(0)<0&&(s=a.iadd(this.m)),s._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(typeof t>"u"||t,e)}),Ih=Zf((e,t)=>{function r(e,t){if(!e)throw Error(t||"Assertion failed")}t.exports=r,r.equal=function(e,t,r){if(e!=t)throw Error(r||"Assertion failed: "+e+" != "+t)}}),Mh=Zf(e=>{var t=e;function r(e){return 1===e.length?"0"+e:e}function n(e){for(var t="",n=0;n<e.length;n++)t+=r(e[n].toString(16));return t}t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),a=i>>8,s=255&i;a?r.push(a,s):r.push(s)}return r},t.zero2=r,t.toHex=n,t.encode=function(e,t){return"hex"===t?n(e):e}}),Ch=Zf(e=>{var t=e,r=Nh(),n=Ih(),i=Mh();t.assert=n,t.toArray=i.toArray,t.zero2=i.zero2,t.toHex=i.toHex,t.encode=i.encode,t.getNAF=function(e,t,r){var n,i=Array(Math.max(e.bitLength(),r)+1);for(n=0;n<i.length;n+=1)i[n]=0;var a=1<<t+1,s=e.clone();for(n=0;n<i.length;n++){var o,l=s.andln(a-1);s.isOdd()?(o=l>(a>>1)-1?(a>>1)-l:l,s.isubn(o)):o=0,i[n]=o,s.iushrn(1)}return i},t.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,a=0;e.cmpn(-i)>0||t.cmpn(-a)>0;){var s,o,l=e.andln(3)+i&3,c=t.andln(3)+a&3;3===l&&(l=-1),3===c&&(c=-1),1&l?s=3!==(n=e.andln(7)+i&7)&&5!==n||2!==c?l:-l:s=0,r[0].push(s),1&c?o=3!==(n=t.andln(7)+a&7)&&5!==n||2!==l?c:-c:o=0,r[1].push(o),2*i===s+1&&(i=1-i),2*a===o+1&&(a=1-a),e.iushrn(1),t.iushrn(1)}return r},t.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},t.parseBytes=function(e){return"string"==typeof e?t.toArray(e,"hex"):e},t.intFromLE=function(e){return new r(e,"hex","le")}}),jh=Zf((e,t)=>{var r,n;function i(e){this.rand=e}if(t.exports=function(e){return r||(r=new i(null)),r.generate(e)},t.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(i.prototype._rand=function(){throw Error("Not implemented yet")});else try{if(Xf(),"function"!=typeof(n=Bs(sh)).randomBytes)throw Error("Not supported");i.prototype._rand=function(e){return n.randomBytes(e)}}catch(a){}}),Oh=Zf((e,t)=>{var r=Nh(),n=Ch(),i=n.getNAF,a=n.getJSF,s=n.assert;function o(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,],this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(e,t){this.curve=e,this.type=t,this.precomputed=null}t.exports=o,o.prototype.point=function(){throw Error("Not implemented")},o.prototype.validate=function(){throw Error("Not implemented")},o.prototype._fixedNafMul=function(e,t){s(e.precomputed);var r=e._getDoubles(),n=i(t,1,this._bitLength),a=(1<<r.step+1)-(r.step%2==0?2:1);a/=3;var o,l,c=[];for(o=0;o<n.length;o+=r.step){l=0;for(var u=o+r.step-1;u>=o;u--)l=(l<<1)+n[u];c.push(l)}for(var d=this.jpoint(null,null,null),h=this.jpoint(null,null,null),p=a;p>0;p--){for(o=0;o<c.length;o++)(l=c[o])===p?h=h.mixedAdd(r.points[o]):l===-p&&(h=h.mixedAdd(r.points[o].neg()));d=d.add(h)}return d.toP()},o.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var a=n.points,o=i(t,r,this._bitLength),l=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var u=0;c>=0&&0===o[c];c--)u++;if(c>=0&&u++,l=l.dblp(u),c<0)break;var d=o[c];s(0!==d),l="affine"===e.type?d>0?l.mixedAdd(a[d-1>>1]):l.mixedAdd(a[-d-1>>1].neg()):d>0?l.add(a[d-1>>1]):l.add(a[-d-1>>1].neg())}return"affine"===e.type?l.toP():l},o.prototype._wnafMulAdd=function(e,t,r,n,s){var o,l,c,u=this._wnafT1,d=this._wnafT2,h=this._wnafT3,p=0;for(o=0;o<n;o++){var f=(c=t[o])._getNAFPoints(e);u[o]=f.wnd,d[o]=f.points}for(o=n-1;o>=1;o-=2){var m=o-1,g=o;if(1===u[m]&&1===u[g]){var v=[t[m],null,null,t[g]];0===t[m].y.cmp(t[g].y)?(v[1]=t[m].add(t[g]),v[2]=t[m].toJ().mixedAdd(t[g].neg())):0===t[m].y.cmp(t[g].y.redNeg())?(v[1]=t[m].toJ().mixedAdd(t[g]),v[2]=t[m].add(t[g].neg())):(v[1]=t[m].toJ().mixedAdd(t[g]),v[2]=t[m].toJ().mixedAdd(t[g].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],b=a(r[m],r[g]);for(p=Math.max(b[0].length,p),h[m]=Array(p),h[g]=Array(p),l=0;l<p;l++){var _=0|b[0][l],w=0|b[1][l];h[m][l]=y[3*(_+1)+(w+1)],h[g][l]=0,d[m]=v}}else h[m]=i(r[m],u[m],this._bitLength),h[g]=i(r[g],u[g],this._bitLength),p=Math.max(h[m].length,p),p=Math.max(h[g].length,p)}var x=this.jpoint(null,null,null),E=this._wnafT4;for(o=p;o>=0;o--){for(var k=0;o>=0;){var S=!0;for(l=0;l<n;l++)E[l]=0|h[l][o],0!==E[l]&&(S=!1);if(!S)break;k++,o--}if(o>=0&&k++,x=x.dblp(k),o<0)break;for(l=0;l<n;l++){var A=E[l];0!==A&&(A>0?c=d[l][A-1>>1]:A<0&&(c=d[l][-A-1>>1].neg()),x="affine"===c.type?x.mixedAdd(c):x.add(c))}}for(o=0;o<n;o++)d[o]=null;return s?x:x.toP()},o.BasePoint=l,l.prototype.eq=function(){throw Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},o.prototype.decodePoint=function(e,t){e=n.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?s(e[e.length-1]%2==0):7===e[0]&&s(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw Error("Unknown point format")},l.prototype.encodeCompressed=function(e){return this.encode(e,!0)},l.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},l.prototype.encode=function(e,t){return n.encode(this._encode(t),e)},l.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},l.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},l.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var a=0;a<e;a++)n=n.dbl();r.push(n)}return{step:e,points:r}},l.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}}),Rh=Zf((e,t)=>{"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),Lh=Zf((e,t)=>{try{if(Sd(),"function"!=typeof(r=Bs(zu)).inherits)throw"";t.exports=r.inherits}catch(Fre){t.exports=Rh()}var r}),Ph=Zf((e,t)=>{var r=Ch(),n=Nh(),i=Lh(),a=Oh(),s=r.assert;function o(e){a.call(this,"short",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}function l(e,t,r,i){a.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(t,16),this.y=new n(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function c(e,t,r,i){a.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(t,16),this.y=new n(r,16),this.z=new n(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}i(o,a),t.exports=o,o.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r,i;if(e.beta)t=new n(e.beta,16).toRed(this.red);else{var a=this._getEndoRoots(this.p);t=(t=a[0].cmp(a[1])<0?a[0]:a[1]).toRed(this.red)}if(e.lambda)r=new n(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?r=o[0]:(r=o[1],s(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return i=e.basis?e.basis.map(function(e){return{a:new n(e.a,16),b:new n(e.b,16)}}):this._getEndoBasis(r),{beta:t,lambda:r,basis:i}}},o.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:n.mont(e),r=new n(2).toRed(t).redInvm(),i=r.redNeg(),a=new n(3).toRed(t).redNeg().redSqrt().redMul(r);return[i.redAdd(a).fromRed(),i.redSub(a).fromRed()]},o.prototype._getEndoBasis=function(e){for(var t,r,i,a,s,o,l,c,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,p=this.n.clone(),f=new n(1),m=new n(0),g=new n(0),v=new n(1),y=0;0!==h.cmpn(0);){var b=p.div(h);c=p.sub(b.mul(h)),u=g.sub(b.mul(f));var _=v.sub(b.mul(m));if(!i&&c.cmp(d)<0)t=l.neg(),r=f,i=c.neg(),a=u;else if(i&&2===++y)break;l=c,p=h,h=c,g=f,f=u,v=m,m=_}s=c.neg(),o=u;var w=i.sqr().add(a.sqr());return s.sqr().add(o.sqr()).cmp(w)>=0&&(s=t,o=r),i.negative&&(i=i.neg(),a=a.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:i,b:a},{a:s,b:o}]},o.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),a=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),o=a.mul(n.a),l=i.mul(r.b),c=a.mul(n.b);return{k1:e.sub(s).sub(o),k2:l.add(c).neg()}},o.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw Error("invalid point");var a=i.fromRed().isOdd();return(t&&!a||!t&&a)&&(i=i.redNeg()),this.point(e,i)},o.prototype.validate=function(e){if(e.inf)return!0;var{x:t,y:r}=e,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},o.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,a=0;a<e.length;a++){var s=this._endoSplit(t[a]),o=e[a],l=o._getBeta();s.k1.negative&&(s.k1.ineg(),o=o.neg(!0)),s.k2.negative&&(s.k2.ineg(),l=l.neg(!0)),n[2*a]=o,n[2*a+1]=l,i[2*a]=s.k1,i[2*a+1]=s.k2}for(var c=this._wnafMulAdd(1,n,i,2*a,r),u=0;u<2*a;u++)n[u]=null,i[u]=null;return c},i(l,a.BasePoint),o.prototype.point=function(e,t,r){return new l(this,e,t,r)},o.prototype.pointFromJSON=function(e,t){return l.fromJSON(this,e,t)},l.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var a=t[2];return n.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[n].concat(a.doubles.points.map(i))},naf:a.naf&&{wnd:a.naf.wnd,points:[n].concat(a.naf.points.map(i))}},n},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},l.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),a=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,s)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(e){return e=new n(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},l.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},l.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},l.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},i(c,a.BasePoint),o.prototype.jpoint=function(e,t,r){return new c(this,e,t,r)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),a=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),o=n.redSub(i),l=a.redSub(s);if(0===o.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),u=c.redMul(o),d=n.redMul(c),h=l.redSqr().redIAdd(u).redISub(d).redISub(d),p=l.redMul(d.redISub(h)).redISub(a.redMul(u)),f=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(h,p,f)},c.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,a=e.y.redMul(t).redMul(this.z),s=r.redSub(n),o=i.redSub(a);if(0===s.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),c=l.redMul(s),u=r.redMul(l),d=o.redSqr().redIAdd(c).redISub(u).redISub(u),h=o.redMul(u.redISub(d)).redISub(i.redMul(c)),p=this.z.redMul(s);return this.curve.jpoint(d,h,p)},c.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,a=this.x,s=this.y,o=this.z,l=o.redSqr().redSqr(),c=s.redAdd(s);for(t=0;t<e;t++){var u=a.redSqr(),d=c.redSqr(),h=d.redSqr(),p=u.redAdd(u).redIAdd(u).redIAdd(n.redMul(l)),f=a.redMul(d),m=p.redSqr().redISub(f.redAdd(f)),g=f.redISub(m),v=p.redMul(g);v=v.redIAdd(v).redISub(h);var y=c.redMul(o);t+1<e&&(l=l.redMul(h)),a=m,o=y,c=v}return this.curve.jpoint(a,c.redMul(i),o)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(a);s=s.redIAdd(s);var o=n.redAdd(n).redIAdd(n),l=o.redSqr().redISub(s).redISub(s),c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),e=l,t=o.redMul(s.redISub(l)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),p=this.x.redAdd(d).redSqr().redISub(u).redISub(h);p=p.redIAdd(p);var f=u.redAdd(u).redIAdd(u),m=f.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(p).redISub(p),t=f.redMul(p.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},c.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(a);s=s.redIAdd(s);var o=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),l=o.redSqr().redISub(s).redISub(s);e=l;var c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),t=o.redMul(s.redISub(l)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),p=this.x.redSub(u).redMul(this.x.redAdd(u));p=p.redAdd(p).redIAdd(p);var f=h.redIAdd(h),m=(f=f.redIAdd(f)).redAdd(f);e=p.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var g=d.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=p.redMul(f.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},c.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),a=t.redSqr(),s=r.redSqr(),o=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(i)),l=t.redAdd(t),c=(l=l.redIAdd(l)).redMul(s),u=o.redSqr().redISub(c.redAdd(c)),d=c.redISub(u),h=s.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=o.redMul(d).redISub(h),f=r.redAdd(r).redMul(n);return this.curve.jpoint(u,p,f)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),a=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),o=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(a)).redSqr(),l=n.redIAdd(n);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var c=i.redIAdd(s).redSqr().redISub(a).redISub(o).redISub(l),u=t.redMul(c);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(o).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.y.redMul(c.redMul(l.redISub(c)).redISub(s.redMul(o)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=this.z.redAdd(s).redSqr().redISub(r).redISub(o);return this.curve.jpoint(d,h,p)},c.prototype.mul=function(e,t){return e=new n(e,t),this.curve._wnafMul(this,e)},c.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},c.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}}),Dh=Zf((e,t)=>{var r=Nh(),n=Lh(),i=Oh(),a=Ch();function s(e){i.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function o(e,t,n){i.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(s,i),t.exports=s,s.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},n(o,i.BasePoint),s.prototype.decodePoint=function(e,t){return this.point(a.toArray(e,t),1)},s.prototype.point=function(e,t){return new o(this,e,t)},s.prototype.pointFromJSON=function(e){return o.fromJSON(this,e)},o.prototype.precompute=function(){},o.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},o.fromJSON=function(e,t){return new o(e,t[0],t[1]||e.one)},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},o.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},o.prototype.add=function(){throw Error("Not supported on Montgomery curve")},o.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(r),s=i.redMul(n),o=t.z.redMul(a.redAdd(s).redSqr()),l=t.x.redMul(a.redISub(s).redSqr());return this.curve.point(o,l)},o.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var a=i.length-1;a>=0;a--)0===i[a]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},o.prototype.mulAdd=function(){throw Error("Not supported on Montgomery curve")},o.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve")},o.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},o.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},o.prototype.getX=function(){return this.normalize(),this.x.fromRed()}}),$h=Zf((e,t)=>{var r=Ch(),n=Nh(),i=Lh(),a=Oh(),s=r.assert;function o(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,a.call(this,"edwards",e),this.a=new n(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function l(e,t,r,i,s){a.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(t,16),this.y=new n(r,16),this.z=i?new n(i,16):this.curve.one,this.t=s&&new n(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}i(o,a),t.exports=o,o.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},o.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},o.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},o.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=this.c2.redSub(this.a.redMul(r)),a=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=i.redMul(a.redInvm()),o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw Error("invalid point");var l=o.fromRed().isOdd();return(t&&!l||!t&&l)&&(o=o.redNeg()),this.point(e,o)},o.prototype.pointFromY=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=r.redSub(this.c2),a=r.redMul(this.d).redMul(this.c2).redSub(this.a),s=i.redMul(a.redInvm());if(0===s.cmp(this.zero)){if(t)throw Error("invalid point");return this.point(this.zero,e)}var o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},o.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},i(l,a.BasePoint),o.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},o.prototype.point=function(e,t,r,n){return new l(this,e,t,r,n)},l.fromJSON=function(e,t){return new l(e,t[0],t[1],t[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=n.redAdd(t),s=a.redSub(r),o=n.redSub(t),l=i.redMul(s),c=a.redMul(o),u=i.redMul(o),d=s.redMul(a);return this.curve.point(l,c,d,u)},l.prototype._projDbl=function(){var e,t,r,n,i,a,s=this.x.redAdd(this.y).redSqr(),o=this.x.redSqr(),l=this.y.redSqr();if(this.curve.twisted){var c=(n=this.curve._mulA(o)).redAdd(l);this.zOne?(e=s.redSub(o).redSub(l).redMul(c.redSub(this.curve.two)),t=c.redMul(n.redSub(l)),r=c.redSqr().redSub(c).redSub(c)):(i=this.z.redSqr(),a=c.redSub(i).redISub(i),e=s.redSub(o).redISub(l).redMul(a),t=c.redMul(n.redSub(l)),r=c.redMul(a))}else n=o.redAdd(l),i=this.curve._mulC(this.z).redSqr(),a=n.redSub(i).redSub(i),e=this.curve._mulC(s.redISub(n)).redMul(a),t=this.curve._mulC(n).redMul(o.redISub(l)),r=n.redMul(a);return this.curve.point(e,t,r)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),a=r.redSub(t),s=i.redSub(n),o=i.redAdd(n),l=r.redAdd(t),c=a.redMul(s),u=o.redMul(l),d=a.redMul(l),h=s.redMul(o);return this.curve.point(c,u,h,d)},l.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),a=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(a).redMul(s),l=i.redSub(o),c=i.redAdd(o),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(s),d=n.redMul(l).redMul(u);return this.curve.twisted?(t=n.redMul(c).redMul(s.redSub(this.curve._mulA(a))),r=l.redMul(c)):(t=n.redMul(c).redMul(s.redSub(a)),r=this.curve._mulC(l).redMul(c)),this.curve.point(d,t,r)},l.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},l.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},l.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},l.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add}),zh=Zf(e=>{var t=e;t.base=Oh(),t.short=Ph(),t.mont=Dh(),t.edwards=$h()}),Bh=Zf(e=>{var t=Ih(),r=Lh();function n(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function i(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e){return 1===e.length?"0"+e:e}function s(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}e.inherits=r,e.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),a=0;a<e.length;a+=2)r.push(parseInt(e[a]+e[a+1],16))}else for(var i=0,a=0;a<e.length;a++){var s=e.charCodeAt(a);s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=63&s|128):n(e,a)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++a)),r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=63&s|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=63&s|128)}else for(a=0;a<e.length;a++)r[a]=0|e[a];return r},e.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=a(e[r].toString(16));return t},e.htonl=i,e.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var a=e[n];"little"===t&&(a=i(a)),r+=s(a.toString(16))}return r},e.zero2=a,e.zero8=s,e.join32=function(e,r,n,i){var a=n-r;t(a%4==0);for(var s=Array(a/4),o=0,l=r;o<s.length;o++,l+=4){var c;c="big"===i?e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3]:e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l],s[o]=c>>>0}return s},e.split32=function(e,t){for(var r=Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var a=e[n];"big"===t?(r[i]=a>>>24,r[i+1]=a>>>16&255,r[i+2]=a>>>8&255,r[i+3]=255&a):(r[i+3]=a>>>24,r[i+2]=a>>>16&255,r[i+1]=a>>>8&255,r[i]=255&a)}return r},e.rotr32=function(e,t){return e>>>t|e<<32-t},e.rotl32=function(e,t){return e<<t|e>>>32-t},e.sum32=function(e,t){return e+t>>>0},e.sum32_3=function(e,t,r){return e+t+r>>>0},e.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},e.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},e.sum64=function(e,t,r,n){var i=e[t],a=n+e[t+1]>>>0,s=(a<n?1:0)+r+i;e[t]=s>>>0,e[t+1]=a},e.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},e.sum64_lo=function(e,t,r,n){return t+n>>>0},e.sum64_4_hi=function(e,t,r,n,i,a,s,o){var l=0,c=t;return l+=(c=c+n>>>0)<t?1:0,l+=(c=c+a>>>0)<a?1:0,e+r+i+s+(l+=(c=c+o>>>0)<o?1:0)>>>0},e.sum64_4_lo=function(e,t,r,n,i,a,s,o){return t+n+a+o>>>0},e.sum64_5_hi=function(e,t,r,n,i,a,s,o,l,c){var u=0,d=t;return u+=(d=d+n>>>0)<t?1:0,u+=(d=d+a>>>0)<a?1:0,u+=(d=d+o>>>0)<o?1:0,e+r+i+s+l+(u+=(d=d+c>>>0)<c?1:0)>>>0},e.sum64_5_lo=function(e,t,r,n,i,a,s,o,l,c){return t+n+a+o+c>>>0},e.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},e.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},e.shr64_hi=function(e,t,r){return e>>>r},e.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}}),Uh=Zf(e=>{var t=Bh(),r=Ih();function n(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=n,n.prototype.update=function(e,r){if(e=t.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=t.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},n.prototype.digest=function(e){return this.update(this._pad()),r(null===this.pending),this._digest(e)},n.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var a=8;a<this.padLength;a++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,a=8;a<this.padLength;a++)n[i++]=0;return n}}),Fh=Zf(e=>{var t=Bh().rotr32;function r(e,t,r){return e&t^~e&r}function n(e,t,r){return e&t^e&r^t&r}function i(e,t,r){return e^t^r}e.ft_1=function(e,t,a,s){return 0===e?r(t,a,s):1===e||3===e?i(t,a,s):2===e?n(t,a,s):void 0},e.ch32=r,e.maj32=n,e.p32=i,e.s0_256=function(e){return t(e,2)^t(e,13)^t(e,22)},e.s1_256=function(e){return t(e,6)^t(e,11)^t(e,25)},e.g0_256=function(e){return t(e,7)^t(e,18)^e>>>3},e.g1_256=function(e){return t(e,17)^t(e,19)^e>>>10}}),Hh=Zf((e,t)=>{var r=Bh(),n=Uh(),i=Fh(),a=r.rotl32,s=r.sum32,o=r.sum32_5,l=i.ft_1,c=n.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=Array(80)}r.inherits(d,c),t.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=a(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],c=this.h[1],d=this.h[2],h=this.h[3],p=this.h[4];for(n=0;n<r.length;n++){var f=~~(n/20),m=o(a(i,5),l(f,c,d,h),p,r[n],u[f]);p=h,h=d,d=a(c,30),c=i,i=m}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],c),this.h[2]=s(this.h[2],d),this.h[3]=s(this.h[3],h),this.h[4]=s(this.h[4],p)},d.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}}),Gh=Zf((e,t)=>{var r=Bh(),n=Uh(),i=Fh(),a=Ih(),s=r.sum32,o=r.sum32_4,l=r.sum32_5,c=i.ch32,u=i.maj32,d=i.s0_256,h=i.s1_256,p=i.g0_256,f=i.g1_256,m=n.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=Array(64)}r.inherits(v,m),t.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=o(f(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],m=this.h[1],g=this.h[2],v=this.h[3],y=this.h[4],b=this.h[5],_=this.h[6],w=this.h[7];for(a(this.k.length===r.length),n=0;n<r.length;n++){var x=l(w,h(y),c(y,b,_),this.k[n],r[n]),E=s(d(i),u(i,m,g));w=_,_=b,b=y,y=s(v,x),v=g,g=m,m=i,i=s(x,E)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],m),this.h[2]=s(this.h[2],g),this.h[3]=s(this.h[3],v),this.h[4]=s(this.h[4],y),this.h[5]=s(this.h[5],b),this.h[6]=s(this.h[6],_),this.h[7]=s(this.h[7],w)},v.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}}),qh=Zf((e,t)=>{var r=Bh(),n=Gh();function i(){if(!(this instanceof i))return new i;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(i,n),t.exports=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}}),Vh=Zf((e,t)=>{var r=Bh(),n=Uh(),i=Ih(),a=r.rotr64_hi,s=r.rotr64_lo,o=r.shr64_hi,l=r.shr64_lo,c=r.sum64,u=r.sum64_hi,d=r.sum64_lo,h=r.sum64_4_hi,p=r.sum64_4_lo,f=r.sum64_5_hi,m=r.sum64_5_lo,g=n.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=Array(160)}function b(e,t,r,n,i){var a=e&r^~e&i;return a<0&&(a+=4294967296),a}function _(e,t,r,n,i,a){var s=t&n^~t&a;return s<0&&(s+=4294967296),s}function w(e,t,r,n,i){var a=e&r^e&i^r&i;return a<0&&(a+=4294967296),a}function x(e,t,r,n,i,a){var s=t&n^t&a^n&a;return s<0&&(s+=4294967296),s}function E(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}function k(e,t){var r=s(e,t,28)^s(t,e,2)^s(t,e,7);return r<0&&(r+=4294967296),r}function S(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}function A(e,t){var r=s(e,t,14)^s(e,t,18)^s(t,e,9);return r<0&&(r+=4294967296),r}function T(e,t){var r=a(e,t,1)^a(e,t,8)^o(e,t,7);return r<0&&(r+=4294967296),r}function N(e,t){var r=s(e,t,1)^s(e,t,8)^l(e,t,7);return r<0&&(r+=4294967296),r}function I(e,t){var r=a(e,t,19)^a(t,e,29)^o(e,t,6);return r<0&&(r+=4294967296),r}function M(e,t){var r=s(e,t,19)^s(t,e,29)^l(e,t,6);return r<0&&(r+=4294967296),r}r.inherits(y,g),t.exports=y,y.blockSize=1024,y.outSize=512,y.hmacStrength=192,y.padLength=128,y.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=I(r[n-4],r[n-3]),a=M(r[n-4],r[n-3]),s=r[n-14],o=r[n-13],l=T(r[n-30],r[n-29]),c=N(r[n-30],r[n-29]),u=r[n-32],d=r[n-31];r[n]=h(i,a,s,o,l,c,u,d),r[n+1]=p(i,a,s,o,l,c,u,d)}},y.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],a=this.h[1],s=this.h[2],o=this.h[3],l=this.h[4],h=this.h[5],p=this.h[6],g=this.h[7],v=this.h[8],y=this.h[9],T=this.h[10],N=this.h[11],I=this.h[12],M=this.h[13],C=this.h[14],j=this.h[15];i(this.k.length===r.length);for(var O=0;O<r.length;O+=2){var R=C,L=j,P=S(v,y),D=A(v,y),$=b(v,y,T,N,I),z=_(v,y,T,N,I,M),B=this.k[O],U=this.k[O+1],F=r[O],H=r[O+1],G=f(R,L,P,D,$,z,B,U,F,H),q=m(R,L,P,D,$,z,B,U,F,H);R=E(n,a),L=k(n,a),P=w(n,a,s,o,l),D=x(n,a,s,o,l,h);var V=u(R,L,P,D),W=d(R,L,P,D);C=I,j=M,I=T,M=N,T=v,N=y,v=u(p,g,G,q),y=d(g,g,G,q),p=l,g=h,l=s,h=o,s=n,o=a,n=u(G,q,V,W),a=d(G,q,V,W)}c(this.h,0,n,a),c(this.h,2,s,o),c(this.h,4,l,h),c(this.h,6,p,g),c(this.h,8,v,y),c(this.h,10,T,N),c(this.h,12,I,M),c(this.h,14,C,j)},y.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}}),Wh=Zf((e,t)=>{var r=Bh(),n=Vh();function i(){if(!(this instanceof i))return new i;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(i,n),t.exports=i,i.blockSize=1024,i.outSize=384,i.hmacStrength=192,i.padLength=128,i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}}),Zh=Zf(e=>{e.sha1=Hh(),e.sha224=qh(),e.sha256=Gh(),e.sha384=Wh(),e.sha512=Vh()}),Kh=Zf(e=>{var t=Bh(),r=Uh(),n=t.rotl32,i=t.sum32,a=t.sum32_3,s=t.sum32_4,o=r.BlockHash;function l(){if(!(this instanceof l))return new l;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function c(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function u(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function d(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}t.inherits(l,o),e.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var r=this.h[0],o=this.h[1],l=this.h[2],g=this.h[3],v=this.h[4],y=r,b=o,_=l,w=g,x=v,E=0;E<80;E++){var k=i(n(s(r,c(E,o,l,g),e[h[E]+t],u(E)),f[E]),v);r=v,v=g,g=n(l,10),l=o,o=k,k=i(n(s(y,c(79-E,b,_,w),e[p[E]+t],d(E)),m[E]),x),y=x,x=w,w=n(_,10),_=b,b=k}k=a(this.h[1],l,w),this.h[1]=a(this.h[2],g,x),this.h[2]=a(this.h[3],v,y),this.h[3]=a(this.h[4],r,b),this.h[4]=a(this.h[0],o,_),this.h[0]=k},l.prototype._digest=function(e){return"hex"===e?t.toHex32(this.h,"little"):t.split32(this.h,"little")};var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}),Yh=Zf((e,t)=>{var r=Bh(),n=Ih();function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,n))}t.exports=i,i.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),n(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},i.prototype.update=function(e,t){return this.inner.update(e,t),this},i.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}}),Jh=Zf(e=>{var t=e;t.utils=Bh(),t.common=Uh(),t.sha=Zh(),t.ripemd=Kh(),t.hmac=Yh(),t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}),Xh=Zf((e,t)=>{t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}}),Qh=Zf(e=>{var t,r=e,n=Jh(),i=zh(),a=Ch().assert;function s(e){"short"===e.type?this.curve=new i.short(e):"edwards"===e.type?this.curve=new i.edwards(e):this.curve=new i.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(e,t){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var n=new s(t);return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,value:n}),n}})}r.PresetCurve=s,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{t=Xh()}catch(Lte){t=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",t]})}),ep=Zf((e,t)=>{var r=Jh(),n=Mh(),i=Ih();function a(e){if(!(this instanceof a))return new a(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=n.toArray(e.entropy,e.entropyEnc||"hex"),r=n.toArray(e.nonce,e.nonceEnc||"hex"),s=n.toArray(e.pers,e.persEnc||"hex");i(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,s)}t.exports=a,a.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},a.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(e,t,r,a){"string"!=typeof t&&(a=r,r=t,t=null),e=n.toArray(e,t),r=n.toArray(r,a),i(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},a.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof t&&(i=r,r=t,t=null),r&&(r=n.toArray(r,i||"hex"),this._update(r));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var s=a.slice(0,e);return this._update(r),this._reseed++,n.encode(s,t)}}),tp=Zf((e,t)=>{var r=Nh(),n=Ch().assert;function i(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}t.exports=i,i.fromPublic=function(e,t,r){return t instanceof i?t:new i(e,{pub:t,pubEnc:r})},i.fromPrivate=function(e,t,r){return t instanceof i?t:new i(e,{priv:t,privEnc:r})},i.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},i.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?n(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},i.prototype.derive=function(e){return e.validate()||n(e.validate(),"public point not validated"),e.mul(this.priv).getX()},i.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},i.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}}),rp=Zf((e,t)=>{var r=Nh(),n=Ch(),i=n.assert;function a(e,t){if(e instanceof a)return e;this._importDER(e,t)||(i(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function s(){this.place=0}function o(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;if(0===e[t.place])return!1;for(var i=0,a=0,s=t.place;a<n;a++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function l(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function c(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}t.exports=a,a.prototype._importDER=function(e,t){e=n.toArray(e,t);var i=new s;if(48!==e[i.place++])return!1;var a=o(e,i);if(!1===a)return!1;if(a+i.place!==e.length)return!1;if(2!==e[i.place++])return!1;var l=o(e,i);if(!1===l)return!1;if(128&e[i.place])return!1;var c=e.slice(i.place,l+i.place);if(i.place+=l,2!==e[i.place++])return!1;var u=o(e,i);if(!1===u)return!1;if(e.length!==u+i.place)return!1;if(128&e[i.place])return!1;var d=e.slice(i.place,u+i.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new r(c),this.s=new r(d),this.recoveryParam=null,!0},a.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=l(t),r=l(r);!(r[0]||128&r[1]);)r=r.slice(1);var i=[2];c(i,t.length),(i=i.concat(t)).push(2),c(i,r.length);var a=i.concat(r),s=[48];return c(s,a.length),s=s.concat(a),n.encode(s,e)}}),np=Zf((e,t)=>{var r=Nh(),n=ep(),i=Ch(),a=Qh(),s=jh(),o=i.assert,l=tp(),c=rp();function u(e){if(!(this instanceof u))return new u(e);"string"==typeof e&&(o(Object.prototype.hasOwnProperty.call(a,e),"Unknown curve "+e),e=a[e]),e instanceof a.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}t.exports=u,u.prototype.keyPair=function(e){return new l(this,e)},u.prototype.keyFromPrivate=function(e,t){return l.fromPrivate(this,e,t)},u.prototype.keyFromPublic=function(e,t){return l.fromPublic(this,e,t)},u.prototype.genKeyPair=function(e){e||(e={});for(var t=new n({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||s(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),a=this.n.sub(new r(2));;){var o=new r(t.generate(i));if(!(o.cmp(a)>0))return o.iaddn(1),this.keyFromPrivate(o)}},u.prototype._truncateToN=function(e,t,n){var i;if(r.isBN(e)||"number"==typeof e)i=(e=new r(e,16)).byteLength();else if("object"==typeof e)i=e.length,e=new r(e,16);else{var a=e.toString();i=a.length+1>>>1,e=new r(a,16)}"number"!=typeof n&&(n=8*i);var s=n-this.n.bitLength();return s>0&&(e=e.ushrn(s)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},u.prototype.sign=function(e,t,i,a){if("object"==typeof i&&(a=i,i=null),a||(a={}),"string"!=typeof e&&"number"!=typeof e&&!r.isBN(e)){o("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),o(e.length>>>0===e.length);for(var s=0;s<e.length;s++)o((255&e[s])===e[s])}t=this.keyFromPrivate(t,i),e=this._truncateToN(e,!1,a.msgBitLength),o(!e.isNeg(),"Can not sign a negative message");var l=this.n.byteLength(),u=t.getPrivate().toArray("be",l),d=e.toArray("be",l);o(new r(d).eq(e),"Can not sign message");for(var h=new n({hash:this.hash,entropy:u,nonce:d,pers:a.pers,persEnc:a.persEnc||"utf8"}),p=this.n.sub(new r(1)),f=0;;f++){var m=a.k?a.k(f):new r(h.generate(this.n.byteLength()));if(!((m=this._truncateToN(m,!0)).cmpn(1)<=0||m.cmp(p)>=0)){var g=this.g.mul(m);if(!g.isInfinity()){var v=g.getX(),y=v.umod(this.n);if(0!==y.cmpn(0)){var b=m.invm(this.n).mul(y.mul(t.getPrivate()).iadd(e));if(0!==(b=b.umod(this.n)).cmpn(0)){var _=(g.getY().isOdd()?1:0)|(0!==v.cmp(y)?2:0);return a.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),_^=1),new c({r:y,s:b,recoveryParam:_})}}}}}},u.prototype.verify=function(e,t,r,n,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),r=this.keyFromPublic(r,n),t=new c(t,"hex");var{r:a,s:s}=t;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,l=s.invm(this.n),u=l.mul(e).umod(this.n),d=l.mul(a).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(u,r.getPublic(),d)).isInfinity()&&o.eqXToP(a):!(o=this.g.mulAdd(u,r.getPublic(),d)).isInfinity()&&0===o.getX().umod(this.n).cmp(a)},u.prototype.recoverPubKey=function(e,t,n,i){o((3&n)===n,"The recovery param is more than two bits"),t=new c(t,i);var a=this.n,s=new r(e),l=t.r,u=t.s,d=1&n,h=n>>1;if(l.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw Error("Unable to find sencond key candinate");l=h?this.curve.pointFromX(l.add(this.curve.n),d):this.curve.pointFromX(l,d);var p=t.r.invm(a),f=a.sub(s).mul(p).umod(a),m=u.mul(p).umod(a);return this.g.mulAdd(f,l,m)},u.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new c(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var a;try{a=this.recoverPubKey(e,t,i)}catch(Ute){continue}if(a.eq(r))return i}throw Error("Unable to find valid recovery factor")}}),ip=Zf((e,t)=>{var r=Ch(),n=r.assert,i=r.parseBytes,a=r.cachedProperty;function s(e,t){this.eddsa=e,this._secret=i(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=i(t.pub)}s.fromPublic=function(e,t){return t instanceof s?t:new s(e,{pub:t})},s.fromSecret=function(e,t){return t instanceof s?t:new s(e,{secret:t})},s.prototype.secret=function(){return this._secret},a(s,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),a(s,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),a(s,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n}),a(s,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),a(s,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),a(s,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),s.prototype.sign=function(e){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},s.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},s.prototype.getSecret=function(e){return n(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},s.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},t.exports=s}),ap=Zf((e,t)=>{var r=Nh(),n=Ch(),i=n.assert,a=n.cachedProperty,s=n.parseBytes;function o(e,t){this.eddsa=e,"object"!=typeof t&&(t=s(t)),Array.isArray(t)&&(i(t.length===2*e.encodingLength,"Signature has invalid size"),t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),i(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}a(o,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),a(o,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),a(o,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),a(o,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),o.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},o.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},t.exports=o}),sp=Zf((e,t)=>{var r=Jh(),n=Qh(),i=Ch(),a=i.assert,s=i.parseBytes,o=ip(),l=ap();function c(e){if(a("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof c))return new c(e);e=n[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}t.exports=c,c.prototype.sign=function(e,t){e=s(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),a=this.encodePoint(i),o=this.hashInt(a,r.pubBytes(),e).mul(r.priv()),l=n.add(o).umod(this.curve.n);return this.makeSignature({R:i,S:l,Rencoded:a})},c.prototype.verify=function(e,t,r){if(e=s(e),(t=this.makeSignature(t)).S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(a)},c.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return i.intFromLE(e.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(e){return o.fromPublic(this,e)},c.prototype.keyFromSecret=function(e){return o.fromSecret(this,e)},c.prototype.makeSignature=function(e){return e instanceof l?e:new l(this,e)},c.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},c.prototype.decodePoint=function(e){var t=(e=i.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=!!(128&e[t]),a=i.intFromLE(r);return this.curve.pointFromY(a,n)},c.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(e){return i.intFromLE(e)},c.prototype.isPoint=function(e){return e instanceof this.pointClass}}),op=Zf(e=>{var t=e;t.version=Th().version,t.utils=Ch(),t.rand=jh(),t.curve=zh(),t.curves=Qh(),t.ec=np(),t.eddsa=sp()}),lp=Zf((e,t)=>{!function(e,t){function r(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:($u(),Bs(yc)).Buffer}catch(Vte){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function o(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function l(e,t,r,n){for(var i=0,a=Math.min(e.length,r),s=t;s<a;s++){var o=e.charCodeAt(s)-48;i*=n,i+=o>=49?o-49+10:o>=17?o-17+10:o}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,s,o=0;if("be"===n)for(i=e.length-1,a=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===n)for(i=0,a=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this.strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,a=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=o(e,t,n)<<a,this.words[s]|=67108863&i,a>=18?(a-=18,s+=1,this.words[s]|=i>>>26):a+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=o(e,t,n)<<a,this.words[s]|=67108863&i,a>=18?(a-=18,s+=1,this.words[s]|=i>>>26):a+=8;this.strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var a=e.length-r,s=a%n,o=Math.min(a,a-s)+r,c=0,u=r;u<o;u+=n)c=l(e,u,u+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var d=1;for(c=l(e,u,e.length,t),u=0;u<s;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],a=0|t.words[0],s=i*a,o=67108863&s,l=s/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){for(var u=l>>>26,d=67108863&l,h=Math.min(c,t.length-1),p=Math.max(0,c-e.length+1);p<=h;p++){var f=c-p|0;u+=(s=(i=0|e.words[f])*(a=0|t.words[p])+d)/67108864|0,d=67108863&s}r.words[c]=0|d,l=0|u}return 0!==l?r.words[c]=0|l:r.length--,r.strip()}i.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,a=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<i|a)).toString(16);a=o>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==a||s!==this.length-1?c[6-l.length]+l+n:l+n}for(0!==a&&(n=a.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=u[e],p=d[e];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modn(p).toString(e);n=(f=f.idivn(p)).isZero()?m+n:c[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return r(typeof a<"u"),this.toArrayLike(a,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0"),this.strip();var s,o,l="le"===t,c=new e(a),u=this.clone();if(l){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),c[o]=s;for(;o<a;o++)c[o]=0}else{for(o=0;o<a-i;o++)c[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),c[a-o-1]=s}return c},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,a=0;a<n.length;a++)t=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<r.length;a++)t=(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var a=0,s=0;s<n.length;s++)a=(t=(0|r.words[s])-(0|n.words[s])+a)>>26,this.words[s]=67108863&t;for(;0!==a&&s<r.length;s++)a=(t=(0|r.words[s])+a)>>26,this.words[s]=67108863&t;if(0===a&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,a,s=e.words,o=t.words,l=r.words,c=0,u=0|s[0],d=8191&u,h=u>>>13,p=0|s[1],f=8191&p,m=p>>>13,g=0|s[2],v=8191&g,y=g>>>13,b=0|s[3],_=8191&b,w=b>>>13,x=0|s[4],E=8191&x,k=x>>>13,S=0|s[5],A=8191&S,T=S>>>13,N=0|s[6],I=8191&N,M=N>>>13,C=0|s[7],j=8191&C,O=C>>>13,R=0|s[8],L=8191&R,P=R>>>13,D=0|s[9],$=8191&D,z=D>>>13,B=0|o[0],U=8191&B,F=B>>>13,H=0|o[1],G=8191&H,q=H>>>13,V=0|o[2],W=8191&V,Z=V>>>13,K=0|o[3],Y=8191&K,J=K>>>13,X=0|o[4],Q=8191&X,ee=X>>>13,te=0|o[5],re=8191&te,ne=te>>>13,ie=0|o[6],ae=8191&ie,se=ie>>>13,oe=0|o[7],le=8191&oe,ce=oe>>>13,ue=0|o[8],de=8191&ue,he=ue>>>13,pe=0|o[9],fe=8191&pe,me=pe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(c+(n=Math.imul(d,U))|0)+((8191&(i=(i=Math.imul(d,F))+Math.imul(h,U)|0))<<13)|0;c=((a=Math.imul(h,F))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(f,U),i=(i=Math.imul(f,F))+Math.imul(m,U)|0,a=Math.imul(m,F);var ve=(c+(n=n+Math.imul(d,G)|0)|0)+((8191&(i=(i=i+Math.imul(d,q)|0)+Math.imul(h,G)|0))<<13)|0;c=((a=a+Math.imul(h,q)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(v,U),i=(i=Math.imul(v,F))+Math.imul(y,U)|0,a=Math.imul(y,F),n=n+Math.imul(f,G)|0,i=(i=i+Math.imul(f,q)|0)+Math.imul(m,G)|0,a=a+Math.imul(m,q)|0;var ye=(c+(n=n+Math.imul(d,W)|0)|0)+((8191&(i=(i=i+Math.imul(d,Z)|0)+Math.imul(h,W)|0))<<13)|0;c=((a=a+Math.imul(h,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(_,U),i=(i=Math.imul(_,F))+Math.imul(w,U)|0,a=Math.imul(w,F),n=n+Math.imul(v,G)|0,i=(i=i+Math.imul(v,q)|0)+Math.imul(y,G)|0,a=a+Math.imul(y,q)|0,n=n+Math.imul(f,W)|0,i=(i=i+Math.imul(f,Z)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,Z)|0;var be=(c+(n=n+Math.imul(d,Y)|0)|0)+((8191&(i=(i=i+Math.imul(d,J)|0)+Math.imul(h,Y)|0))<<13)|0;c=((a=a+Math.imul(h,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,F))+Math.imul(k,U)|0,a=Math.imul(k,F),n=n+Math.imul(_,G)|0,i=(i=i+Math.imul(_,q)|0)+Math.imul(w,G)|0,a=a+Math.imul(w,q)|0,n=n+Math.imul(v,W)|0,i=(i=i+Math.imul(v,Z)|0)+Math.imul(y,W)|0,a=a+Math.imul(y,Z)|0,n=n+Math.imul(f,Y)|0,i=(i=i+Math.imul(f,J)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,J)|0;var _e=(c+(n=n+Math.imul(d,Q)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,Q)|0))<<13)|0;c=((a=a+Math.imul(h,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(A,U),i=(i=Math.imul(A,F))+Math.imul(T,U)|0,a=Math.imul(T,F),n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,q)|0)+Math.imul(k,G)|0,a=a+Math.imul(k,q)|0,n=n+Math.imul(_,W)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(w,W)|0,a=a+Math.imul(w,Z)|0,n=n+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(y,Y)|0,a=a+Math.imul(y,J)|0,n=n+Math.imul(f,Q)|0,i=(i=i+Math.imul(f,ee)|0)+Math.imul(m,Q)|0,a=a+Math.imul(m,ee)|0;var we=(c+(n=n+Math.imul(d,re)|0)|0)+((8191&(i=(i=i+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((a=a+Math.imul(h,ne)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,F))+Math.imul(M,U)|0,a=Math.imul(M,F),n=n+Math.imul(A,G)|0,i=(i=i+Math.imul(A,q)|0)+Math.imul(T,G)|0,a=a+Math.imul(T,q)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,Z)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,Z)|0,n=n+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(w,Y)|0,a=a+Math.imul(w,J)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(y,Q)|0,a=a+Math.imul(y,ee)|0,n=n+Math.imul(f,re)|0,i=(i=i+Math.imul(f,ne)|0)+Math.imul(m,re)|0,a=a+Math.imul(m,ne)|0;var xe=(c+(n=n+Math.imul(d,ae)|0)|0)+((8191&(i=(i=i+Math.imul(d,se)|0)+Math.imul(h,ae)|0))<<13)|0;c=((a=a+Math.imul(h,se)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(j,U),i=(i=Math.imul(j,F))+Math.imul(O,U)|0,a=Math.imul(O,F),n=n+Math.imul(I,G)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(M,G)|0,a=a+Math.imul(M,q)|0,n=n+Math.imul(A,W)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(T,W)|0,a=a+Math.imul(T,Z)|0,n=n+Math.imul(E,Y)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,J)|0,n=n+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,Q)|0,a=a+Math.imul(w,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(y,re)|0,a=a+Math.imul(y,ne)|0,n=n+Math.imul(f,ae)|0,i=(i=i+Math.imul(f,se)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,se)|0;var Ee=(c+(n=n+Math.imul(d,le)|0)|0)+((8191&(i=(i=i+Math.imul(d,ce)|0)+Math.imul(h,le)|0))<<13)|0;c=((a=a+Math.imul(h,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,F))+Math.imul(P,U)|0,a=Math.imul(P,F),n=n+Math.imul(j,G)|0,i=(i=i+Math.imul(j,q)|0)+Math.imul(O,G)|0,a=a+Math.imul(O,q)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(M,W)|0,a=a+Math.imul(M,Z)|0,n=n+Math.imul(A,Y)|0,i=(i=i+Math.imul(A,J)|0)+Math.imul(T,Y)|0,a=a+Math.imul(T,J)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(k,Q)|0,a=a+Math.imul(k,ee)|0,n=n+Math.imul(_,re)|0,i=(i=i+Math.imul(_,ne)|0)+Math.imul(w,re)|0,a=a+Math.imul(w,ne)|0,n=n+Math.imul(v,ae)|0,i=(i=i+Math.imul(v,se)|0)+Math.imul(y,ae)|0,a=a+Math.imul(y,se)|0,n=n+Math.imul(f,le)|0,i=(i=i+Math.imul(f,ce)|0)+Math.imul(m,le)|0,a=a+Math.imul(m,ce)|0;var ke=(c+(n=n+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;c=((a=a+Math.imul(h,he)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul($,U),i=(i=Math.imul($,F))+Math.imul(z,U)|0,a=Math.imul(z,F),n=n+Math.imul(L,G)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(P,G)|0,a=a+Math.imul(P,q)|0,n=n+Math.imul(j,W)|0,i=(i=i+Math.imul(j,Z)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,Z)|0,n=n+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(M,Y)|0,a=a+Math.imul(M,J)|0,n=n+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(T,Q)|0,a=a+Math.imul(T,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(k,re)|0,a=a+Math.imul(k,ne)|0,n=n+Math.imul(_,ae)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(w,ae)|0,a=a+Math.imul(w,se)|0,n=n+Math.imul(v,le)|0,i=(i=i+Math.imul(v,ce)|0)+Math.imul(y,le)|0,a=a+Math.imul(y,ce)|0,n=n+Math.imul(f,de)|0,i=(i=i+Math.imul(f,he)|0)+Math.imul(m,de)|0,a=a+Math.imul(m,he)|0;var Se=(c+(n=n+Math.imul(d,fe)|0)|0)+((8191&(i=(i=i+Math.imul(d,me)|0)+Math.imul(h,fe)|0))<<13)|0;c=((a=a+Math.imul(h,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul($,G),i=(i=Math.imul($,q))+Math.imul(z,G)|0,a=Math.imul(z,q),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,Z)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,Z)|0,n=n+Math.imul(j,Y)|0,i=(i=i+Math.imul(j,J)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(M,Q)|0,a=a+Math.imul(M,ee)|0,n=n+Math.imul(A,re)|0,i=(i=i+Math.imul(A,ne)|0)+Math.imul(T,re)|0,a=a+Math.imul(T,ne)|0,n=n+Math.imul(E,ae)|0,i=(i=i+Math.imul(E,se)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,se)|0,n=n+Math.imul(_,le)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,le)|0,a=a+Math.imul(w,ce)|0,n=n+Math.imul(v,de)|0,i=(i=i+Math.imul(v,he)|0)+Math.imul(y,de)|0,a=a+Math.imul(y,he)|0;var Ae=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul($,W),i=(i=Math.imul($,Z))+Math.imul(z,W)|0,a=Math.imul(z,Z),n=n+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,J)|0,n=n+Math.imul(j,Q)|0,i=(i=i+Math.imul(j,ee)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(M,re)|0,a=a+Math.imul(M,ne)|0,n=n+Math.imul(A,ae)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(T,ae)|0,a=a+Math.imul(T,se)|0,n=n+Math.imul(E,le)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,ce)|0,n=n+Math.imul(_,de)|0,i=(i=i+Math.imul(_,he)|0)+Math.imul(w,de)|0,a=a+Math.imul(w,he)|0;var Te=(c+(n=n+Math.imul(v,fe)|0)|0)+((8191&(i=(i=i+Math.imul(v,me)|0)+Math.imul(y,fe)|0))<<13)|0;c=((a=a+Math.imul(y,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul($,Y),i=(i=Math.imul($,J))+Math.imul(z,Y)|0,a=Math.imul(z,J),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(P,Q)|0,a=a+Math.imul(P,ee)|0,n=n+Math.imul(j,re)|0,i=(i=i+Math.imul(j,ne)|0)+Math.imul(O,re)|0,a=a+Math.imul(O,ne)|0,n=n+Math.imul(I,ae)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(M,ae)|0,a=a+Math.imul(M,se)|0,n=n+Math.imul(A,le)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(T,le)|0,a=a+Math.imul(T,ce)|0,n=n+Math.imul(E,de)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(k,de)|0,a=a+Math.imul(k,he)|0;var Ne=(c+(n=n+Math.imul(_,fe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(w,fe)|0))<<13)|0;c=((a=a+Math.imul(w,me)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul($,Q),i=(i=Math.imul($,ee))+Math.imul(z,Q)|0,a=Math.imul(z,ee),n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(P,re)|0,a=a+Math.imul(P,ne)|0,n=n+Math.imul(j,ae)|0,i=(i=i+Math.imul(j,se)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,se)|0,n=n+Math.imul(I,le)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(M,le)|0,a=a+Math.imul(M,ce)|0,n=n+Math.imul(A,de)|0,i=(i=i+Math.imul(A,he)|0)+Math.imul(T,de)|0,a=a+Math.imul(T,he)|0;var Ie=(c+(n=n+Math.imul(E,fe)|0)|0)+((8191&(i=(i=i+Math.imul(E,me)|0)+Math.imul(k,fe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,re),i=(i=Math.imul($,ne))+Math.imul(z,re)|0,a=Math.imul(z,ne),n=n+Math.imul(L,ae)|0,i=(i=i+Math.imul(L,se)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,se)|0,n=n+Math.imul(j,le)|0,i=(i=i+Math.imul(j,ce)|0)+Math.imul(O,le)|0,a=a+Math.imul(O,ce)|0,n=n+Math.imul(I,de)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(M,de)|0,a=a+Math.imul(M,he)|0;var Me=(c+(n=n+Math.imul(A,fe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(T,fe)|0))<<13)|0;c=((a=a+Math.imul(T,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul($,ae),i=(i=Math.imul($,se))+Math.imul(z,ae)|0,a=Math.imul(z,se),n=n+Math.imul(L,le)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(P,le)|0,a=a+Math.imul(P,ce)|0,n=n+Math.imul(j,de)|0,i=(i=i+Math.imul(j,he)|0)+Math.imul(O,de)|0,a=a+Math.imul(O,he)|0;var Ce=(c+(n=n+Math.imul(I,fe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(M,fe)|0))<<13)|0;c=((a=a+Math.imul(M,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul($,le),i=(i=Math.imul($,ce))+Math.imul(z,le)|0,a=Math.imul(z,ce),n=n+Math.imul(L,de)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(P,de)|0,a=a+Math.imul(P,he)|0;var je=(c+(n=n+Math.imul(j,fe)|0)|0)+((8191&(i=(i=i+Math.imul(j,me)|0)+Math.imul(O,fe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,n=Math.imul($,de),i=(i=Math.imul($,he))+Math.imul(z,de)|0,a=Math.imul(z,he);var Oe=(c+(n=n+Math.imul(L,fe)|0)|0)+((8191&(i=(i=i+Math.imul(L,me)|0)+Math.imul(P,fe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var Re=(c+(n=Math.imul($,fe))|0)+((8191&(i=(i=Math.imul($,me))+Math.imul(z,fe)|0))<<13)|0;return c=((a=Math.imul(z,me))+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,l[0]=ge,l[1]=ve,l[2]=ye,l[3]=be,l[4]=_e,l[5]=we,l[6]=xe,l[7]=Ee,l[8]=ke,l[9]=Se,l[10]=Ae,l[11]=Te,l[12]=Ne,l[13]=Ie,l[14]=Me,l[15]=Ce,l[16]=je,l[17]=Oe,l[18]=Re,0!==c&&(l[19]=c,r.length++),r};function f(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(p=h),i.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?p(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var s=i;i=0;for(var o=67108863&n,l=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=l;c++){var u=a-c,d=(0|e.words[u])*(0|t.words[c]),h=67108863&d;o=67108863&(h=h+o|0),i+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[a]=o,n=s,s=i}return 0!==n?r.words[a]=n:r.length--,r.strip()}(this,e,t):f(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=Array(e),r=i.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,i,a){for(var s=0;s<a;s++)n[s]=t[e[s]],i[s]=r[e[s]]},m.prototype.transform=function(e,t,r,n,i,a){this.permute(a,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var o=s<<1,l=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),u=0;u<i;u+=o)for(var d=l,h=c,p=0;p<s;p++){var f=r[u+p],m=n[u+p],g=r[u+p+s],v=n[u+p+s],y=d*g-h*v;v=d*v+h*g,g=y,r[u+p]=f+g,n[u+p]=m+v,r[u+p+s]=f-g,n[u+p+s]=m-v,p!==o&&(y=l*d-c*h,h=l*h+c*d,d=y)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},m.prototype.convert13b=function(e,t,n,i){for(var a=0,s=0;s<t;s++)a+=0|e[s],n[2*s]=8191&a,a>>>=13,n[2*s+1]=8191&a,a>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===a),r(!(-8192&a))},m.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),a=this.stub(n),s=Array(n),o=Array(n),l=Array(n),c=Array(n),u=Array(n),d=Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,c,n),this.transform(s,a,o,l,n,i),this.transform(c,a,u,d,n,i);for(var p=0;p<n;p++){var f=o[p]*u[p]-l[p]*d[p];l[p]=o[p]*d[p]+l[p]*u[p],o[p]=f}return this.conjugate(o,l,n),this.transform(o,l,h,a,n,i),this.conjugate(h,a,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=Array(this.length+e.length),f(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,a=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=a>>>26,this.words[n]=67108863&a}return 0!==t&&(this.words[n]=t,this.length++),this.length=0===e?1:this.length,this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var a=r.sqr();n<t.length;n++,a=a.sqr())0!==t[n]&&(r=r.mul(a));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,l=(0|this.words[t])-o<<n;this.words[t]=l|s,s=o>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,s=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,l=n;if(i-=s,i=Math.max(0,i),l){for(var c=0;c<s;c++)l.words[c]=this.words[c];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var d=0|this.words[c];this.words[c]=u<<26-a|d>>>a,u=d&o}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,a=e.length+n;this._expand(a);var s,o=0;for(i=0;i<e.length;i++){s=(0|this.words[i+n])+o;var l=(0|e.words[i])*t;o=((s-=67108863&l)>>26)-(l/67108864|0),this.words[i+n]=67108863&s}for(;i<this.length-n;i++)o=(s=(0|this.words[i+n])+o)>>26,this.words[i+n]=67108863&s;if(0===o)return this.strip();for(r(-1===o),o=0,i=0;i<this.length;i++)o=(s=-(0|this.words[i])+o)>>26,this.words[i]=67108863&s;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),a=e,s=0|a.words[a.length-1];0!==(r=26-this._countBits(s))&&(a=a.ushln(r),n.iushln(r),s=0|a.words[a.length-1]);var o,l=n.length-a.length;if("mod"!==t){(o=new i(null)).length=l+1,o.words=Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var u=n.clone()._ishlnsubmul(a,1,l);0===u.negative&&(n=u,o&&(o.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|n.words[a.length+d])+(0|n.words[a.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(a,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(a,1,d),n.isZero()||(n.negative^=1);o&&(o.words[d]=h)}return o&&o.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:o||null,mod:n}},i.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(a=o.div.neg()),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:a,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(a=o.div.neg()),{div:a,mod:o.mod}):0!==(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var a,s,o},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(e<=67108863);for(var t=67108864%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},i.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new i(1),s=new i(0),o=new i(0),l=new i(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0===(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(a.isOdd()||s.isOdd())&&(a.iadd(u),s.isub(d)),a.iushrn(1),s.iushrn(1);for(var f=0,m=1;0===(n.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(u),l.isub(d)),o.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(o),s.isub(l)):(n.isub(t),o.isub(a),l.isub(s))}return{a:o,b:l,gcd:n.iushln(c)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,s=new i(1),o=new i(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,u=1;0===(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var d=0,h=1;0===(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(o)):(n.isub(t),o.isub(s))}return(a=0===t.cmpn(1)?s:o).cmpn(0)<0&&a.iadd(e),a},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var a=t;t=r,r=a}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return!(1&this.words[0])},i.prototype.isOdd=function(){return!(1&~this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,s=n;0!==a&&s<this.length;s++){var o=0|this.words[s];a=(o+=a)>>>26,o&=67108863,this.words[s]=o}return 0!==a&&(this.words[s]=a,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new x(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new i(null);return e.words=Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},n(y,v),y.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|a>>>22,a=s}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(b,v),n(_,v),n(w,v),w.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new b;else if("p192"===e)t=new _;else{if("p25519"!==e)throw Error("Unknown prime "+e);t=new w}return g[e]=t,t},x.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var a=this.m.subn(1),s=0;!a.isZero()&&0===a.andln(1);)s++,a.iushrn(1);r(!a.isZero());var o=new i(1).toRed(this),l=o.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,a),h=this.pow(e,a.addn(1).iushrn(1)),p=this.pow(e,a),f=s;0!==p.cmp(o);){for(var m=p,g=0;0!==m.cmp(o);g++)m=m.redSqr();r(g<f);var v=this.pow(d,new i(1).iushln(f-g-1));h=h.redMul(v),d=v.redSqr(),p=p.redMul(d),f=g}return h},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var a=r[0],s=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],u=l-1;u>=0;u--){var d=c>>u&1;a!==r[0]&&(a=this.sqr(a)),0!==d||0!==s?(s<<=1,s|=d,(4===++o||0===n&&0===u)&&(a=this.mul(a,r[s]),o=0,s=0)):o=0}l=26}return a},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new E(e)},n(E,x),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),s=a;return a.cmp(this.m)>=0?s=a.isub(this.m):a.cmpn(0)<0&&(s=a.iadd(this.m)),s._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(typeof t>"u"||t,e)}),cp=Zf((e,t)=>{var r=op(),n=lp();t.exports=function(e){return new a(e)};var i={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(e){this.curveType=i[e],this.curveType||(this.curveType={name:e}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function s(e,t,r){Array.isArray(e)||(e=e.toArray());var n=new Buffer(e);if(r&&n.length<r){var i=new Buffer(r-n.length);i.fill(0),n=Buffer.concat([i,n])}return t?n.toString(t):n}i.p224=i.secp224r1,i.p256=i.secp256r1=i.prime256v1,i.p192=i.secp192r1=i.prime192v1,i.p384=i.secp384r1,i.p521=i.secp521r1,a.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},a.prototype.computeSecret=function(e,t,r){return t=t||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,t)),s(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},a.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[r.length-1]%2?r[0]=7:r[0]=6),s(r,e)},a.prototype.getPrivateKey=function(e){return s(this.keys.getPrivate(),e)},a.prototype.setPublicKey=function(e,t){return t=t||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,t)),this.keys._importPublic(e),this},a.prototype.setPrivateKey=function(e,t){t=t||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,t));var r=new n(e);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}),up=Zf((e,t)=>{var r=(Xf(),Bs(sh)).createECDH;t.exports=r||cp()}),dp=Zf((e,t)=>{!function(e,t){function r(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:($u(),Bs(yc)).Buffer}catch(Vte){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function o(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function l(e,t,r,n){for(var i=0,a=Math.min(e.length,r),s=t;s<a;s++){var o=e.charCodeAt(s)-48;i*=n,i+=o>=49?o-49+10:o>=17?o-17+10:o}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,s,o=0;if("be"===n)for(i=e.length-1,a=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===n)for(i=0,a=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this.strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,a=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=o(e,t,n)<<a,this.words[s]|=67108863&i,a>=18?(a-=18,s+=1,this.words[s]|=i>>>26):a+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=o(e,t,n)<<a,this.words[s]|=67108863&i,a>=18?(a-=18,s+=1,this.words[s]|=i>>>26):a+=8;this.strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var a=e.length-r,s=a%n,o=Math.min(a,a-s)+r,c=0,u=r;u<o;u+=n)c=l(e,u,u+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var d=1;for(c=l(e,u,e.length,t),u=0;u<s;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],a=0|t.words[0],s=i*a,o=67108863&s,l=s/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){for(var u=l>>>26,d=67108863&l,h=Math.min(c,t.length-1),p=Math.max(0,c-e.length+1);p<=h;p++){var f=c-p|0;u+=(s=(i=0|e.words[f])*(a=0|t.words[p])+d)/67108864|0,d=67108863&s}r.words[c]=0|d,l=0|u}return 0!==l?r.words[c]=0|l:r.length--,r.strip()}i.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,a=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<i|a)).toString(16);a=o>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==a||s!==this.length-1?c[6-l.length]+l+n:l+n}for(0!==a&&(n=a.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=u[e],p=d[e];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modn(p).toString(e);n=(f=f.idivn(p)).isZero()?m+n:c[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return r(typeof a<"u"),this.toArrayLike(a,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0"),this.strip();var s,o,l="le"===t,c=new e(a),u=this.clone();if(l){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),c[o]=s;for(;o<a;o++)c[o]=0}else{for(o=0;o<a-i;o++)c[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),c[a-o-1]=s}return c},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,a=0;a<n.length;a++)t=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<r.length;a++)t=(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var a=0,s=0;s<n.length;s++)a=(t=(0|r.words[s])-(0|n.words[s])+a)>>26,this.words[s]=67108863&t;for(;0!==a&&s<r.length;s++)a=(t=(0|r.words[s])+a)>>26,this.words[s]=67108863&t;if(0===a&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,a,s=e.words,o=t.words,l=r.words,c=0,u=0|s[0],d=8191&u,h=u>>>13,p=0|s[1],f=8191&p,m=p>>>13,g=0|s[2],v=8191&g,y=g>>>13,b=0|s[3],_=8191&b,w=b>>>13,x=0|s[4],E=8191&x,k=x>>>13,S=0|s[5],A=8191&S,T=S>>>13,N=0|s[6],I=8191&N,M=N>>>13,C=0|s[7],j=8191&C,O=C>>>13,R=0|s[8],L=8191&R,P=R>>>13,D=0|s[9],$=8191&D,z=D>>>13,B=0|o[0],U=8191&B,F=B>>>13,H=0|o[1],G=8191&H,q=H>>>13,V=0|o[2],W=8191&V,Z=V>>>13,K=0|o[3],Y=8191&K,J=K>>>13,X=0|o[4],Q=8191&X,ee=X>>>13,te=0|o[5],re=8191&te,ne=te>>>13,ie=0|o[6],ae=8191&ie,se=ie>>>13,oe=0|o[7],le=8191&oe,ce=oe>>>13,ue=0|o[8],de=8191&ue,he=ue>>>13,pe=0|o[9],fe=8191&pe,me=pe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(c+(n=Math.imul(d,U))|0)+((8191&(i=(i=Math.imul(d,F))+Math.imul(h,U)|0))<<13)|0;c=((a=Math.imul(h,F))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(f,U),i=(i=Math.imul(f,F))+Math.imul(m,U)|0,a=Math.imul(m,F);var ve=(c+(n=n+Math.imul(d,G)|0)|0)+((8191&(i=(i=i+Math.imul(d,q)|0)+Math.imul(h,G)|0))<<13)|0;c=((a=a+Math.imul(h,q)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(v,U),i=(i=Math.imul(v,F))+Math.imul(y,U)|0,a=Math.imul(y,F),n=n+Math.imul(f,G)|0,i=(i=i+Math.imul(f,q)|0)+Math.imul(m,G)|0,a=a+Math.imul(m,q)|0;var ye=(c+(n=n+Math.imul(d,W)|0)|0)+((8191&(i=(i=i+Math.imul(d,Z)|0)+Math.imul(h,W)|0))<<13)|0;c=((a=a+Math.imul(h,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(_,U),i=(i=Math.imul(_,F))+Math.imul(w,U)|0,a=Math.imul(w,F),n=n+Math.imul(v,G)|0,i=(i=i+Math.imul(v,q)|0)+Math.imul(y,G)|0,a=a+Math.imul(y,q)|0,n=n+Math.imul(f,W)|0,i=(i=i+Math.imul(f,Z)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,Z)|0;var be=(c+(n=n+Math.imul(d,Y)|0)|0)+((8191&(i=(i=i+Math.imul(d,J)|0)+Math.imul(h,Y)|0))<<13)|0;c=((a=a+Math.imul(h,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,F))+Math.imul(k,U)|0,a=Math.imul(k,F),n=n+Math.imul(_,G)|0,i=(i=i+Math.imul(_,q)|0)+Math.imul(w,G)|0,a=a+Math.imul(w,q)|0,n=n+Math.imul(v,W)|0,i=(i=i+Math.imul(v,Z)|0)+Math.imul(y,W)|0,a=a+Math.imul(y,Z)|0,n=n+Math.imul(f,Y)|0,i=(i=i+Math.imul(f,J)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,J)|0;var _e=(c+(n=n+Math.imul(d,Q)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,Q)|0))<<13)|0;c=((a=a+Math.imul(h,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(A,U),i=(i=Math.imul(A,F))+Math.imul(T,U)|0,a=Math.imul(T,F),n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,q)|0)+Math.imul(k,G)|0,a=a+Math.imul(k,q)|0,n=n+Math.imul(_,W)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(w,W)|0,a=a+Math.imul(w,Z)|0,n=n+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(y,Y)|0,a=a+Math.imul(y,J)|0,n=n+Math.imul(f,Q)|0,i=(i=i+Math.imul(f,ee)|0)+Math.imul(m,Q)|0,a=a+Math.imul(m,ee)|0;var we=(c+(n=n+Math.imul(d,re)|0)|0)+((8191&(i=(i=i+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((a=a+Math.imul(h,ne)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,F))+Math.imul(M,U)|0,a=Math.imul(M,F),n=n+Math.imul(A,G)|0,i=(i=i+Math.imul(A,q)|0)+Math.imul(T,G)|0,a=a+Math.imul(T,q)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,Z)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,Z)|0,n=n+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(w,Y)|0,a=a+Math.imul(w,J)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(y,Q)|0,a=a+Math.imul(y,ee)|0,n=n+Math.imul(f,re)|0,i=(i=i+Math.imul(f,ne)|0)+Math.imul(m,re)|0,a=a+Math.imul(m,ne)|0;var xe=(c+(n=n+Math.imul(d,ae)|0)|0)+((8191&(i=(i=i+Math.imul(d,se)|0)+Math.imul(h,ae)|0))<<13)|0;c=((a=a+Math.imul(h,se)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(j,U),i=(i=Math.imul(j,F))+Math.imul(O,U)|0,a=Math.imul(O,F),n=n+Math.imul(I,G)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(M,G)|0,a=a+Math.imul(M,q)|0,n=n+Math.imul(A,W)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(T,W)|0,a=a+Math.imul(T,Z)|0,n=n+Math.imul(E,Y)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,J)|0,n=n+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,Q)|0,a=a+Math.imul(w,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(y,re)|0,a=a+Math.imul(y,ne)|0,n=n+Math.imul(f,ae)|0,i=(i=i+Math.imul(f,se)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,se)|0;var Ee=(c+(n=n+Math.imul(d,le)|0)|0)+((8191&(i=(i=i+Math.imul(d,ce)|0)+Math.imul(h,le)|0))<<13)|0;c=((a=a+Math.imul(h,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,F))+Math.imul(P,U)|0,a=Math.imul(P,F),n=n+Math.imul(j,G)|0,i=(i=i+Math.imul(j,q)|0)+Math.imul(O,G)|0,a=a+Math.imul(O,q)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(M,W)|0,a=a+Math.imul(M,Z)|0,n=n+Math.imul(A,Y)|0,i=(i=i+Math.imul(A,J)|0)+Math.imul(T,Y)|0,a=a+Math.imul(T,J)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(k,Q)|0,a=a+Math.imul(k,ee)|0,n=n+Math.imul(_,re)|0,i=(i=i+Math.imul(_,ne)|0)+Math.imul(w,re)|0,a=a+Math.imul(w,ne)|0,n=n+Math.imul(v,ae)|0,i=(i=i+Math.imul(v,se)|0)+Math.imul(y,ae)|0,a=a+Math.imul(y,se)|0,n=n+Math.imul(f,le)|0,i=(i=i+Math.imul(f,ce)|0)+Math.imul(m,le)|0,a=a+Math.imul(m,ce)|0;var ke=(c+(n=n+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;c=((a=a+Math.imul(h,he)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul($,U),i=(i=Math.imul($,F))+Math.imul(z,U)|0,a=Math.imul(z,F),n=n+Math.imul(L,G)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(P,G)|0,a=a+Math.imul(P,q)|0,n=n+Math.imul(j,W)|0,i=(i=i+Math.imul(j,Z)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,Z)|0,n=n+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(M,Y)|0,a=a+Math.imul(M,J)|0,n=n+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(T,Q)|0,a=a+Math.imul(T,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(k,re)|0,a=a+Math.imul(k,ne)|0,n=n+Math.imul(_,ae)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(w,ae)|0,a=a+Math.imul(w,se)|0,n=n+Math.imul(v,le)|0,i=(i=i+Math.imul(v,ce)|0)+Math.imul(y,le)|0,a=a+Math.imul(y,ce)|0,n=n+Math.imul(f,de)|0,i=(i=i+Math.imul(f,he)|0)+Math.imul(m,de)|0,a=a+Math.imul(m,he)|0;var Se=(c+(n=n+Math.imul(d,fe)|0)|0)+((8191&(i=(i=i+Math.imul(d,me)|0)+Math.imul(h,fe)|0))<<13)|0;c=((a=a+Math.imul(h,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul($,G),i=(i=Math.imul($,q))+Math.imul(z,G)|0,a=Math.imul(z,q),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,Z)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,Z)|0,n=n+Math.imul(j,Y)|0,i=(i=i+Math.imul(j,J)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(M,Q)|0,a=a+Math.imul(M,ee)|0,n=n+Math.imul(A,re)|0,i=(i=i+Math.imul(A,ne)|0)+Math.imul(T,re)|0,a=a+Math.imul(T,ne)|0,n=n+Math.imul(E,ae)|0,i=(i=i+Math.imul(E,se)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,se)|0,n=n+Math.imul(_,le)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,le)|0,a=a+Math.imul(w,ce)|0,n=n+Math.imul(v,de)|0,i=(i=i+Math.imul(v,he)|0)+Math.imul(y,de)|0,a=a+Math.imul(y,he)|0;var Ae=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul($,W),i=(i=Math.imul($,Z))+Math.imul(z,W)|0,a=Math.imul(z,Z),n=n+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,J)|0,n=n+Math.imul(j,Q)|0,i=(i=i+Math.imul(j,ee)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(M,re)|0,a=a+Math.imul(M,ne)|0,n=n+Math.imul(A,ae)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(T,ae)|0,a=a+Math.imul(T,se)|0,n=n+Math.imul(E,le)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,ce)|0,n=n+Math.imul(_,de)|0,i=(i=i+Math.imul(_,he)|0)+Math.imul(w,de)|0,a=a+Math.imul(w,he)|0;var Te=(c+(n=n+Math.imul(v,fe)|0)|0)+((8191&(i=(i=i+Math.imul(v,me)|0)+Math.imul(y,fe)|0))<<13)|0;c=((a=a+Math.imul(y,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul($,Y),i=(i=Math.imul($,J))+Math.imul(z,Y)|0,a=Math.imul(z,J),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(P,Q)|0,a=a+Math.imul(P,ee)|0,n=n+Math.imul(j,re)|0,i=(i=i+Math.imul(j,ne)|0)+Math.imul(O,re)|0,a=a+Math.imul(O,ne)|0,n=n+Math.imul(I,ae)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(M,ae)|0,a=a+Math.imul(M,se)|0,n=n+Math.imul(A,le)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(T,le)|0,a=a+Math.imul(T,ce)|0,n=n+Math.imul(E,de)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(k,de)|0,a=a+Math.imul(k,he)|0;var Ne=(c+(n=n+Math.imul(_,fe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(w,fe)|0))<<13)|0;c=((a=a+Math.imul(w,me)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul($,Q),i=(i=Math.imul($,ee))+Math.imul(z,Q)|0,a=Math.imul(z,ee),n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(P,re)|0,a=a+Math.imul(P,ne)|0,n=n+Math.imul(j,ae)|0,i=(i=i+Math.imul(j,se)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,se)|0,n=n+Math.imul(I,le)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(M,le)|0,a=a+Math.imul(M,ce)|0,n=n+Math.imul(A,de)|0,i=(i=i+Math.imul(A,he)|0)+Math.imul(T,de)|0,a=a+Math.imul(T,he)|0;var Ie=(c+(n=n+Math.imul(E,fe)|0)|0)+((8191&(i=(i=i+Math.imul(E,me)|0)+Math.imul(k,fe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,re),i=(i=Math.imul($,ne))+Math.imul(z,re)|0,a=Math.imul(z,ne),n=n+Math.imul(L,ae)|0,i=(i=i+Math.imul(L,se)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,se)|0,n=n+Math.imul(j,le)|0,i=(i=i+Math.imul(j,ce)|0)+Math.imul(O,le)|0,a=a+Math.imul(O,ce)|0,n=n+Math.imul(I,de)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(M,de)|0,a=a+Math.imul(M,he)|0;var Me=(c+(n=n+Math.imul(A,fe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(T,fe)|0))<<13)|0;c=((a=a+Math.imul(T,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul($,ae),i=(i=Math.imul($,se))+Math.imul(z,ae)|0,a=Math.imul(z,se),n=n+Math.imul(L,le)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(P,le)|0,a=a+Math.imul(P,ce)|0,n=n+Math.imul(j,de)|0,i=(i=i+Math.imul(j,he)|0)+Math.imul(O,de)|0,a=a+Math.imul(O,he)|0;var Ce=(c+(n=n+Math.imul(I,fe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(M,fe)|0))<<13)|0;c=((a=a+Math.imul(M,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul($,le),i=(i=Math.imul($,ce))+Math.imul(z,le)|0,a=Math.imul(z,ce),n=n+Math.imul(L,de)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(P,de)|0,a=a+Math.imul(P,he)|0;var je=(c+(n=n+Math.imul(j,fe)|0)|0)+((8191&(i=(i=i+Math.imul(j,me)|0)+Math.imul(O,fe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,n=Math.imul($,de),i=(i=Math.imul($,he))+Math.imul(z,de)|0,a=Math.imul(z,he);var Oe=(c+(n=n+Math.imul(L,fe)|0)|0)+((8191&(i=(i=i+Math.imul(L,me)|0)+Math.imul(P,fe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var Re=(c+(n=Math.imul($,fe))|0)+((8191&(i=(i=Math.imul($,me))+Math.imul(z,fe)|0))<<13)|0;return c=((a=Math.imul(z,me))+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,l[0]=ge,l[1]=ve,l[2]=ye,l[3]=be,l[4]=_e,l[5]=we,l[6]=xe,l[7]=Ee,l[8]=ke,l[9]=Se,l[10]=Ae,l[11]=Te,l[12]=Ne,l[13]=Ie,l[14]=Me,l[15]=Ce,l[16]=je,l[17]=Oe,l[18]=Re,0!==c&&(l[19]=c,r.length++),r};function f(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(p=h),i.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?p(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var s=i;i=0;for(var o=67108863&n,l=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=l;c++){var u=a-c,d=(0|e.words[u])*(0|t.words[c]),h=67108863&d;o=67108863&(h=h+o|0),i+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[a]=o,n=s,s=i}return 0!==n?r.words[a]=n:r.length--,r.strip()}(this,e,t):f(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=Array(e),r=i.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,i,a){for(var s=0;s<a;s++)n[s]=t[e[s]],i[s]=r[e[s]]},m.prototype.transform=function(e,t,r,n,i,a){this.permute(a,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var o=s<<1,l=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),u=0;u<i;u+=o)for(var d=l,h=c,p=0;p<s;p++){var f=r[u+p],m=n[u+p],g=r[u+p+s],v=n[u+p+s],y=d*g-h*v;v=d*v+h*g,g=y,r[u+p]=f+g,n[u+p]=m+v,r[u+p+s]=f-g,n[u+p+s]=m-v,p!==o&&(y=l*d-c*h,h=l*h+c*d,d=y)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},m.prototype.convert13b=function(e,t,n,i){for(var a=0,s=0;s<t;s++)a+=0|e[s],n[2*s]=8191&a,a>>>=13,n[2*s+1]=8191&a,a>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===a),r(!(-8192&a))},m.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),a=this.stub(n),s=Array(n),o=Array(n),l=Array(n),c=Array(n),u=Array(n),d=Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,c,n),this.transform(s,a,o,l,n,i),this.transform(c,a,u,d,n,i);for(var p=0;p<n;p++){var f=o[p]*u[p]-l[p]*d[p];l[p]=o[p]*d[p]+l[p]*u[p],o[p]=f}return this.conjugate(o,l,n),this.transform(o,l,h,a,n,i),this.conjugate(h,a,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=Array(this.length+e.length),f(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,a=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=a>>>26,this.words[n]=67108863&a}return 0!==t&&(this.words[n]=t,this.length++),this.length=0===e?1:this.length,this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var a=r.sqr();n<t.length;n++,a=a.sqr())0!==t[n]&&(r=r.mul(a));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,l=(0|this.words[t])-o<<n;this.words[t]=l|s,s=o>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,s=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,l=n;if(i-=s,i=Math.max(0,i),l){for(var c=0;c<s;c++)l.words[c]=this.words[c];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var d=0|this.words[c];this.words[c]=u<<26-a|d>>>a,u=d&o}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,a=e.length+n;this._expand(a);var s,o=0;for(i=0;i<e.length;i++){s=(0|this.words[i+n])+o;var l=(0|e.words[i])*t;o=((s-=67108863&l)>>26)-(l/67108864|0),this.words[i+n]=67108863&s}for(;i<this.length-n;i++)o=(s=(0|this.words[i+n])+o)>>26,this.words[i+n]=67108863&s;if(0===o)return this.strip();for(r(-1===o),o=0,i=0;i<this.length;i++)o=(s=-(0|this.words[i])+o)>>26,this.words[i]=67108863&s;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),a=e,s=0|a.words[a.length-1];0!==(r=26-this._countBits(s))&&(a=a.ushln(r),n.iushln(r),s=0|a.words[a.length-1]);var o,l=n.length-a.length;if("mod"!==t){(o=new i(null)).length=l+1,o.words=Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var u=n.clone()._ishlnsubmul(a,1,l);0===u.negative&&(n=u,o&&(o.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|n.words[a.length+d])+(0|n.words[a.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(a,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(a,1,d),n.isZero()||(n.negative^=1);o&&(o.words[d]=h)}return o&&o.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:o||null,mod:n}},i.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(a=o.div.neg()),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:a,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(a=o.div.neg()),{div:a,mod:o.mod}):0!==(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var a,s,o},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(e<=67108863);for(var t=67108864%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},i.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new i(1),s=new i(0),o=new i(0),l=new i(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0===(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(a.isOdd()||s.isOdd())&&(a.iadd(u),s.isub(d)),a.iushrn(1),s.iushrn(1);for(var f=0,m=1;0===(n.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(u),l.isub(d)),o.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(o),s.isub(l)):(n.isub(t),o.isub(a),l.isub(s))}return{a:o,b:l,gcd:n.iushln(c)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,s=new i(1),o=new i(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,u=1;0===(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var d=0,h=1;0===(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(o)):(n.isub(t),o.isub(s))}return(a=0===t.cmpn(1)?s:o).cmpn(0)<0&&a.iadd(e),a},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var a=t;t=r,r=a}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return!(1&this.words[0])},i.prototype.isOdd=function(){return!(1&~this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,s=n;0!==a&&s<this.length;s++){var o=0|this.words[s];a=(o+=a)>>>26,o&=67108863,this.words[s]=o}return 0!==a&&(this.words[s]=a,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new x(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new i(null);return e.words=Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},n(y,v),y.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|a>>>22,a=s}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(b,v),n(_,v),n(w,v),w.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new b;else if("p192"===e)t=new _;else{if("p25519"!==e)throw Error("Unknown prime "+e);t=new w}return g[e]=t,t},x.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var a=this.m.subn(1),s=0;!a.isZero()&&0===a.andln(1);)s++,a.iushrn(1);r(!a.isZero());var o=new i(1).toRed(this),l=o.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,a),h=this.pow(e,a.addn(1).iushrn(1)),p=this.pow(e,a),f=s;0!==p.cmp(o);){for(var m=p,g=0;0!==m.cmp(o);g++)m=m.redSqr();r(g<f);var v=this.pow(d,new i(1).iushln(f-g-1));h=h.redMul(v),d=v.redSqr(),p=p.redMul(d),f=g}return h},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var a=r[0],s=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],u=l-1;u>=0;u--){var d=c>>u&1;a!==r[0]&&(a=this.sqr(a)),0!==d||0!==s?(s<<=1,s|=d,(4===++o||0===n&&0===u)&&(a=this.mul(a,r[s]),o=0,s=0)):o=0}l=26}return a},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new E(e)},n(E,x),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),s=a;return a.cmp(this.m)>=0?s=a.isub(this.m):a.cmpn(0)<0&&(s=a.iadd(this.m)),s._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(typeof t>"u"||t,e)}),hp=Zf(e=>{var t=Sp(),r=Lh();function n(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}e.define=function(e,t){return new n(e,t)},n.prototype._createNamed=function(e){var t;try{t=(()=>{throw new Error("Cannot require module vm")})().runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch($re){t=function(e){this._initNamed(e)}}return r(t,e),t.prototype._initNamed=function(t){e.call(this,t)},new t(this)},n.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(t.decoders[e])),this.decoders[e]},n.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},n.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(t.encoders[e])),this.encoders[e]},n.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}}),pp=Zf(e=>{var t=Lh();function r(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function n(e,t){this.path=e,this.rethrow(t)}e.Reporter=r,r.prototype.isError=function(e){return e instanceof n},r.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},r.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},r.prototype.enterKey=function(e){return this._reporterState.path.push(e)},r.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},r.prototype.leaveKey=function(e,t,r){var n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=r)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},r.prototype.leaveObject=function(e){var t=this._reporterState,r=t.obj;return t.obj=e,r},r.prototype.error=function(e){var t,r=this._reporterState,i=e instanceof n;if(t=i?e:new n(r.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!r.options.partial)throw t;return i||r.errors.push(t),t},r.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},t(n,Error),n.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,n),!this.stack)try{throw Error(this.message)}catch(t){this.stack=t.stack}return this}}),fp=Zf(e=>{var t=Lh(),r=gp().Reporter,n=($u(),Bs(yc)).Buffer;function i(e,t){r.call(this,t),n.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function a(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof a||(e=new a(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=n.byteLength(e);else{if(!n.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}t(i,r),e.DecoderBuffer=i,i.prototype.save=function(){return{offset:this.offset,reporter:r.prototype.save.call(this)}},i.prototype.restore=function(e){var t=new i(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,r.prototype.restore.call(this,e.reporter),t},i.prototype.isEmpty=function(){return this.offset===this.length},i.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},i.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new i(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},i.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},e.EncoderBuffer=a,a.prototype.join=function(e,t){return e||(e=new n(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(r){r.join(e,t),t+=r.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):n.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}}),mp=Zf((e,t)=>{var r=gp().Reporter,n=gp().EncoderBuffer,i=gp().DecoderBuffer,a=Ih(),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],o=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function l(e,t){var r={};this._baseState=r,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}t.exports=l;var c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){var e=this._baseState,t={};c.forEach(function(r){t[r]=e[r]});var r=new this.constructor(t.parent);return r._baseState=t,r},l.prototype._wrap=function(){var e=this._baseState;o.forEach(function(t){this[t]=function(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}},this)},l.prototype._init=function(e){var t=this._baseState;a(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),a.equal(t.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(e){var t=this._baseState,r=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==r.length&&(a(null===t.children),t.children=r,r.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(a(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(r){r==(0|r)&&(r|=0);var n=e[r];t[n]=r}),t}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(e){l.prototype[e]=function(){var t=this._baseState;throw Error(e+" not implemented for encoding: "+t.enc)}}),s.forEach(function(e){l.prototype[e]=function(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return a(null===t.tag),t.tag=e,this._useArgs(r),this}}),l.prototype.use=function(e){a(e);var t=this._baseState;return a(null===t.use),t.use=e,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(e){var t=this._baseState;return a(null===t.default),t.default=e,t.optional=!0,this},l.prototype.explicit=function(e){var t=this._baseState;return a(null===t.explicit&&null===t.implicit),t.explicit=e,this},l.prototype.implicit=function(e){var t=this._baseState;return a(null===t.explicit&&null===t.implicit),t.implicit=e,this},l.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},l.prototype.key=function(e){var t=this._baseState;return a(null===t.key),t.key=e,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(e){var t=this._baseState;return a(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},l.prototype.contains=function(e){var t=this._baseState;return a(null===t.use),t.contains=e,this},l.prototype._decode=function(e,t){var r=this._baseState;if(null===r.parent)return e.wrapResult(r.children[0]._decode(e,t));var n,a=r.default,s=!0,o=null;if(null!==r.key&&(o=e.enterKey(r.key)),r.optional){var l=null;if(null!==r.explicit?l=r.explicit:null!==r.implicit?l=r.implicit:null!==r.tag&&(l=r.tag),null!==l||r.any){if(s=this._peekTag(e,l,r.any),e.isError(s))return s}else{var c=e.save();try{null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),s=!0}catch(f){s=!1}e.restore(c)}}if(r.obj&&s&&(n=e.enterObject()),s){if(null!==r.explicit){var u=this._decodeTag(e,r.explicit);if(e.isError(u))return u;e=u}var d=e.offset;if(null===r.use&&null===r.choice){if(r.any)c=e.save();var h=this._decodeTag(e,null!==r.implicit?r.implicit:r.tag,r.any);if(e.isError(h))return h;r.any?a=e.raw(c):e=h}if(t&&t.track&&null!==r.tag&&t.track(e.path(),d,e.length,"tagged"),t&&t.track&&null!==r.tag&&t.track(e.path(),e.offset,e.length,"content"),r.any||(a=null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t)),e.isError(a))return a;if(r.any||null!==r.choice||null===r.children||r.children.forEach(function(r){r._decode(e,t)}),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){var p=new i(a);a=this._getUse(r.contains,e._reporterState.obj)._decode(p,t)}}return r.obj&&s&&(a=e.leaveObject(n)),null===r.key||null===a&&!0!==s?null!==o&&e.exitKey(o):e.leaveKey(o,r.key,a),a},l.prototype._decodeGeneric=function(e,t,r){var n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},l.prototype._getUse=function(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),a(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},l.prototype._decodeChoice=function(e,t){var r=this._baseState,n=null,i=!1;return Object.keys(r.choice).some(function(a){var s=e.save(),o=r.choice[a];try{var l=o._decode(e,t);if(e.isError(l))return!1;n={type:a,value:l},i=!0}catch(Gre){return e.restore(s),!1}return!0},this),i?n:e.error("Choice not matched")},l.prototype._createEncoderBuffer=function(e){return new n(e,this.reporter)},l.prototype._encode=function(e,t,r){var n=this._baseState;if(null===n.default||n.default!==e){var i=this._encodeValue(e,t,r);if(void 0!==i&&!this._skipDefault(i,t,r))return i}},l.prototype._encodeValue=function(e,t,n){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new r);var a=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}var s=null,o=!1;if(i.any)a=this._createEncoderBuffer(e);else if(i.choice)a=this._encodeChoice(e,t);else if(i.contains)s=this._getUse(i.contains,n)._encode(e,t),o=!0;else if(i.children)s=i.children.map(function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");var n=t.enterKey(r._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");var i=r._encode(e[r._baseState.key],t,e);return t.leaveKey(n),i},this).filter(function(e){return e}),s=this._createEncoderBuffer(s);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var l=this.clone();l._baseState.implicit=null,s=this._createEncoderBuffer(e.map(function(r){var n=this._baseState;return this._getUse(n.args[0],e)._encode(r,t)},l))}else null!==i.use?a=this._getUse(i.use,n)._encode(e,t):(s=this._encodePrimitive(i.tag,e),o=!0);if(!i.any&&null===i.choice){var c=null!==i.implicit?i.implicit:i.tag,u=null===i.implicit?"universal":"context";null===c?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(a=this._encodeComposite(c,o,u,s))}return null!==i.explicit&&(a=this._encodeComposite(i.explicit,!1,"context",a)),a},l.prototype._encodeChoice=function(e,t){var r=this._baseState,n=r.choice[e.type];return n||a(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},l.prototype._encodePrimitive=function(e,t){var r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw Error("Unsupported tag: "+e)},l.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},l.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)}}),gp=Zf(e=>{var t=e;t.Reporter=pp().Reporter,t.DecoderBuffer=fp().DecoderBuffer,t.EncoderBuffer=fp().EncoderBuffer,t.Node=mp()}),vp=Zf(e=>{var t=yp();e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=t._reverse(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=t._reverse(e.tag)}),yp=Zf(e=>{var t=e;t._reverse=function(e){var t={};return Object.keys(e).forEach(function(r){(0|r)==r&&(r|=0);var n=e[r];t[n]=r}),t},t.der=vp()}),bp=Zf((e,t)=>{var r=Lh(),n=Sp(),i=n.base,a=n.bignum,s=n.constants.der;function o(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){i.Node.call(this,"der",e)}function c(e,t){var r=e.readUInt8(t);if(e.isError(r))return r;var n=s.tagClass[r>>6],i=!(32&r);if(31&~r)r&=31;else{var a=r;for(r=0;!(128&~a);){if(a=e.readUInt8(t),e.isError(a))return a;r<<=7,r|=127&a}}return{cls:n,primitive:i,tag:r,tagStr:s.tag[r]}}function u(e,t,r){var n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(!(128&n))return n;var i=127&n;if(i>4)return e.error("length octect is too long");n=0;for(var a=0;a<i;a++){n<<=8;var s=e.readUInt8(r);if(e.isError(s))return s;n|=s}return n}t.exports=o,o.prototype.decode=function(e,t){return e instanceof i.DecoderBuffer||(e=new i.DecoderBuffer(e,t)),this.tree._decode(e,t)},r(l,i.Node),l.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;var n=e.save(),i=c(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(n),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||r)},l.prototype._decodeTag=function(e,t,r){var n=c(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;var i=u(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');var a=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(i=e.offset-a.offset,e.restore(a),e.skip(i,'Failed to match body of: "'+t+'"'))},l.prototype._skipUntilEnd=function(e,t){for(;;){var r=c(e,t);if(e.isError(r))return r;var n,i=u(e,r.primitive,t);if(e.isError(i))return i;if(n=r.primitive||null!==i?e.skip(i):this._skipUntilEnd(e,t),e.isError(n))return n;if("end"===r.tagStr)break}},l.prototype._decodeList=function(e,t,r,n){for(var i=[];!e.isEmpty();){var a=this._peekTag(e,"end");if(e.isError(a))return a;var s=r.decode(e,"der",n);if(e.isError(s)&&a)break;i.push(s)}return i},l.prototype._decodeStr=function(e,t){if("bitstr"===t){var r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}if("bmpstr"===t){var n=e.raw();if(n.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");for(var i="",a=0;a<n.length/2;a++)i+=String.fromCharCode(n.readUInt16BE(2*a));return i}if("numstr"===t){var s=e.raw().toString("ascii");return this._isNumstr(s)?s:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var o=e.raw().toString("ascii");return this._isPrintstr(o)?o:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},l.prototype._decodeObjid=function(e,t,r){for(var n,i=[],a=0;!e.isEmpty();){var s=e.readUInt8();a<<=7,a|=127&s,128&s||(i.push(a),a=0)}128&s&&i.push(a);var o=i[0]/40|0,l=i[0]%40;if(n=r?i:[o,l].concat(i.slice(1)),t){var c=t[n.join(" ")];void 0===c&&(c=t[n.join(".")]),void 0!==c&&(n=c)}return n},l.prototype._decodeTime=function(e,t){var r=e.raw().toString();if("gentime"===t)var n=0|r.slice(0,4),i=0|r.slice(4,6),a=0|r.slice(6,8),s=0|r.slice(8,10),o=0|r.slice(10,12),l=0|r.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),a=0|r.slice(4,6),s=0|r.slice(6,8),o=0|r.slice(8,10),l=0|r.slice(10,12);n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,a,s,o,l,0)},l.prototype._decodeNull=function(e){return null},l.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},l.prototype._decodeInt=function(e,t){var r=e.raw(),n=new a(r);return t&&(n=t[n.toString(10)]||n),n},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}}),_p=Zf((e,t)=>{var r=Lh(),n=($u(),Bs(yc)).Buffer,i=bp();function a(e){i.call(this,e),this.enc="pem"}r(a,i),t.exports=a,a.prototype.decode=function(e,t){for(var r=e.toString().split(/[\r\n]+/g),a=t.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/,o=-1,l=-1,c=0;c<r.length;c++){var u=r[c].match(s);if(null!==u&&u[2]===a){if(-1!==o){if("END"!==u[1])break;l=c;break}if("BEGIN"!==u[1])break;o=c}}if(-1===o||-1===l)throw Error("PEM section not found for: "+a);var d=r.slice(o+1,l).join("");d.replace(/[^a-z0-9\+\/=]+/gi,"");var h=new n(d,"base64");return i.prototype.decode.call(this,h,t)}}),wp=Zf(e=>{var t=e;t.der=bp(),t.pem=_p()}),xp=Zf((e,t)=>{var r=Lh(),n=($u(),Bs(yc)).Buffer,i=Sp(),a=i.base,s=i.constants.der;function o(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){a.Node.call(this,"der",e)}function c(e){return e<10?"0"+e:e}t.exports=o,o.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},r(l,a.Node),l.prototype._encodeComposite=function(e,t,r,i){var a,o=function(e,t,r,n){var i;"seqof"===e?e="seq":"setof"===e&&(e="set");if(s.tagByName.hasOwnProperty(e))i=s.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}if(i>=31)return n.error("Multi-octet tag encoding unsupported");t||(i|=32);return i|=s.tagClassByName[r||"universal"]<<6,i}(e,t,r,this.reporter);if(i.length<128)return(a=new n(2))[0]=o,a[1]=i.length,this._createEncoderBuffer([a,i]);for(var l=1,c=i.length;c>=256;c>>=8)l++;(a=new n(2+l))[0]=o,a[1]=128|l;c=1+l;for(var u=i.length;u>0;c--,u>>=8)a[c]=255&u;return this._createEncoderBuffer([a,i])},l.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var r=new n(2*e.length),i=0;i<e.length;i++)r.writeUInt16BE(e.charCodeAt(i),2*i);return this._createEncoderBuffer(r)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},l.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s\.]+/g);for(var i=0;i<e.length;i++)e[i]|=0}else if(Array.isArray(e)){e=e.slice();for(i=0;i<e.length;i++)e[i]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}var a=0;for(i=0;i<e.length;i++){var s=e[i];for(a++;s>=128;s>>=7)a++}var o=new n(a),l=o.length-1;for(i=e.length-1;i>=0;i--){s=e[i];for(o[l--]=127&s;(s>>=7)>0;)o[l--]=128|127&s}return this._createEncoderBuffer(o)},l.prototype._encodeTime=function(e,t){var r,n=new Date(e);return"gentime"===t?r=[c(n.getFullYear()),c(n.getUTCMonth()+1),c(n.getUTCDate()),c(n.getUTCHours()),c(n.getUTCMinutes()),c(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[c(n.getFullYear()%100),c(n.getUTCMonth()+1),c(n.getUTCDate()),c(n.getUTCHours()),c(n.getUTCMinutes()),c(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!n.isBuffer(e)){var r=e.toArray();!e.sign&&128&r[0]&&r.unshift(0),e=new n(r)}if(n.isBuffer(e)){var i=e.length;0===e.length&&i++;var a=new n(i);return e.copy(a),0===e.length&&(a[0]=0),this._createEncoderBuffer(a)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);i=1;for(var s=e;s>=256;s>>=8)i++;for(s=(a=Array(i)).length-1;s>=0;s--)a[s]=255&e,e>>=8;return 128&a[0]&&a.unshift(0),this._createEncoderBuffer(new n(a))},l.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},l.prototype._skipDefault=function(e,t,r){var n,i=this._baseState;if(null===i.default)return!1;var a=e.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,t,r).join()),a.length!==i.defaultBuffer.length)return!1;for(n=0;n<a.length;n++)if(a[n]!==i.defaultBuffer[n])return!1;return!0}}),Ep=Zf((e,t)=>{var r=Lh(),n=xp();function i(e){n.call(this,e),this.enc="pem"}r(i,n),t.exports=i,i.prototype.encode=function(e,t){for(var r=n.prototype.encode.call(this,e).toString("base64"),i=["-----BEGIN "+t.label+"-----"],a=0;a<r.length;a+=64)i.push(r.slice(a,a+64));return i.push("-----END "+t.label+"-----"),i.join("\n")}}),kp=Zf(e=>{var t=e;t.der=xp(),t.pem=Ep()}),Sp=Zf(e=>{var t=e;t.bignum=dp(),t.define=hp().define,t.base=gp(),t.constants=yp(),t.decoders=wp(),t.encoders=kp()}),Ap=Zf((e,t)=>{var r=Sp(),n=r.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),i=r.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),a=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),s=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}),o=r.define("RelativeDistinguishedName",function(){this.setof(i)}),l=r.define("RDNSequence",function(){this.seqof(o)}),c=r.define("Name",function(){this.choice({rdnSequence:this.use(l)})}),u=r.define("Validity",function(){this.seq().obj(this.key("notBefore").use(n),this.key("notAfter").use(n))}),d=r.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),h=r.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(c),this.key("validity").use(u),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(d).optional())}),p=r.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(h),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())});t.exports=p}),Tp=Zf(e=>{var t=Sp();e.certificate=Ap();var r=t.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});e.RSAPrivateKey=r;var n=t.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});e.RSAPublicKey=n;var i=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),a=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(i),this.key("subjectPublicKey").bitstr())});e.PublicKey=a;var s=t.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(i),this.key("subjectPrivateKey").octstr())});e.PrivateKey=s;var o=t.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});e.EncryptedPrivateKey=o;var l=t.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});e.DSAPrivateKey=l,e.DSAparam=t.define("DSAparam",function(){this.int()});var c=t.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),u=t.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(c),this.key("publicKey").optional().explicit(1).bitstr())});e.ECPrivateKey=u,e.signature=t.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})}),Np=Zf((e,t)=>{t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}}),Ip=Zf((e,t)=>{var r=bh().Buffer,n=ah().Transform;function i(e){n.call(this),this._block=r.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}Lh()(i,n),i.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(jre){n=jre}r(n)},i.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(oee){t=oee}e(t)};var a=typeof Uint8Array<"u",s=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);i.prototype.update=function(e,t){if(this._finalized)throw Error("Digest already called");e=function(e,t){if(e instanceof r)return e;if("string"==typeof e)return r.from(e,t);if(s&&ArrayBuffer.isView(e)){if(0===e.byteLength)return r.alloc(0);var n=r.from(e.buffer,e.byteOffset,e.byteLength);if(n.byteLength===e.byteLength)return n}if(a&&e instanceof Uint8Array)return r.from(e);if(r.isBuffer(e)&&e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e))return r.from(e);throw TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}(e,t);for(var n=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)n[this._blockOffset++]=e[i++];for(var l=0,c=8*e.length;c>0;++l)this._length[l]+=c,(c=this._length[l]/4294967296|0)>0&&(this._length[l]-=4294967296*c);return this},i.prototype._update=function(){throw Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},i.prototype._digest=function(){throw Error("_digest is not implemented")},t.exports=i}),Mp=Zf((e,t)=>{var r=Lh(),n=Ip(),i=bh().Buffer,a=Array(16);function s(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function o(e,t){return e<<t|e>>>32-t}function l(e,t,r,n,i,a,s){return o(e+(t&r|~t&n)+i+a|0,s)+t|0}function c(e,t,r,n,i,a,s){return o(e+(t&n|r&~n)+i+a|0,s)+t|0}function u(e,t,r,n,i,a,s){return o(e+(t^r^n)+i+a|0,s)+t|0}function d(e,t,r,n,i,a,s){return o(e+(r^(t|~n))+i+a|0,s)+t|0}r(s,n),s.prototype._update=function(){for(var e=a,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,s=this._d;r=l(r,n,i,s,e[0],3614090360,7),s=l(s,r,n,i,e[1],3905402710,12),i=l(i,s,r,n,e[2],606105819,17),n=l(n,i,s,r,e[3],3250441966,22),r=l(r,n,i,s,e[4],4118548399,7),s=l(s,r,n,i,e[5],1200080426,12),i=l(i,s,r,n,e[6],2821735955,17),n=l(n,i,s,r,e[7],4249261313,22),r=l(r,n,i,s,e[8],1770035416,7),s=l(s,r,n,i,e[9],2336552879,12),i=l(i,s,r,n,e[10],4294925233,17),n=l(n,i,s,r,e[11],2304563134,22),r=l(r,n,i,s,e[12],1804603682,7),s=l(s,r,n,i,e[13],4254626195,12),i=l(i,s,r,n,e[14],2792965006,17),r=c(r,n=l(n,i,s,r,e[15],1236535329,22),i,s,e[1],4129170786,5),s=c(s,r,n,i,e[6],3225465664,9),i=c(i,s,r,n,e[11],643717713,14),n=c(n,i,s,r,e[0],3921069994,20),r=c(r,n,i,s,e[5],3593408605,5),s=c(s,r,n,i,e[10],38016083,9),i=c(i,s,r,n,e[15],3634488961,14),n=c(n,i,s,r,e[4],3889429448,20),r=c(r,n,i,s,e[9],568446438,5),s=c(s,r,n,i,e[14],3275163606,9),i=c(i,s,r,n,e[3],4107603335,14),n=c(n,i,s,r,e[8],1163531501,20),r=c(r,n,i,s,e[13],2850285829,5),s=c(s,r,n,i,e[2],4243563512,9),i=c(i,s,r,n,e[7],1735328473,14),r=u(r,n=c(n,i,s,r,e[12],2368359562,20),i,s,e[5],4294588738,4),s=u(s,r,n,i,e[8],2272392833,11),i=u(i,s,r,n,e[11],1839030562,16),n=u(n,i,s,r,e[14],4259657740,23),r=u(r,n,i,s,e[1],2763975236,4),s=u(s,r,n,i,e[4],1272893353,11),i=u(i,s,r,n,e[7],4139469664,16),n=u(n,i,s,r,e[10],3200236656,23),r=u(r,n,i,s,e[13],681279174,4),s=u(s,r,n,i,e[0],3936430074,11),i=u(i,s,r,n,e[3],3572445317,16),n=u(n,i,s,r,e[6],76029189,23),r=u(r,n,i,s,e[9],3654602809,4),s=u(s,r,n,i,e[12],3873151461,11),i=u(i,s,r,n,e[15],530742520,16),r=d(r,n=u(n,i,s,r,e[2],3299628645,23),i,s,e[0],4096336452,6),s=d(s,r,n,i,e[7],1126891415,10),i=d(i,s,r,n,e[14],2878612391,15),n=d(n,i,s,r,e[5],4237533241,21),r=d(r,n,i,s,e[12],1700485571,6),s=d(s,r,n,i,e[3],2399980690,10),i=d(i,s,r,n,e[10],4293915773,15),n=d(n,i,s,r,e[1],2240044497,21),r=d(r,n,i,s,e[8],1873313359,6),s=d(s,r,n,i,e[15],4264355552,10),i=d(i,s,r,n,e[6],2734768916,15),n=d(n,i,s,r,e[13],1309151649,21),r=d(r,n,i,s,e[4],4149444226,6),s=d(s,r,n,i,e[11],3174756917,10),i=d(i,s,r,n,e[2],718787259,15),n=d(n,i,s,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+s|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=i.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},t.exports=s}),Cp=Zf((e,t)=>{var r=bh().Buffer,n=Mp();t.exports=function(e,t,i,a){if(r.isBuffer(e)||(e=r.from(e,"binary")),t&&(r.isBuffer(t)||(t=r.from(t,"binary")),8!==t.length))throw RangeError("salt should be Buffer with 8 byte length");for(var s=i/8,o=r.alloc(s),l=r.alloc(a||0),c=r.alloc(0);s>0||a>0;){var u=new n;u.update(c),u.update(e),t&&u.update(t),c=u.digest();var d=0;if(s>0){var h=o.length-s;d=Math.min(s,c.length),c.copy(o,h,0,d),s-=d}if(d<c.length&&a>0){var p=l.length-a,f=Math.min(a,c.length-d);c.copy(l,p,d,d+f),a-=f}}return c.fill(0),{key:o,iv:l}}}),jp=Zf(e=>{var t=(Xf(),Bs(sh));e.createCipher=e.Cipher=t.createCipher,e.createCipheriv=e.Cipheriv=t.createCipheriv,e.createDecipher=e.Decipher=t.createDecipher,e.createDecipheriv=e.Decipheriv=t.createDecipheriv,e.listCiphers=e.getCiphers=t.getCiphers}),Op=Zf((e,t)=>{var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=Cp(),s=jp(),o=bh().Buffer;t.exports=function(e,t){var l,c=e.toString(),u=c.match(r);if(u){var d="aes"+u[1],h=o.from(u[2],"hex"),p=o.from(u[3].replace(/[\r\n]/g,""),"base64"),f=a(t,h.slice(0,8),parseInt(u[1],10)).key,m=[],g=s.createDecipheriv(d,f,h);m.push(g.update(p)),m.push(g.final()),l=o.concat(m)}else{var v=c.match(i);l=o.from(v[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(n)[1],data:l}}}),Rp=Zf((e,t)=>{var r=Tp(),n=Np(),i=Op(),a=jp(),s=Eh(),o=bh().Buffer;function l(e){var t;"object"!=typeof e||o.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=o.from(e));var l,c,u=i(e,t),d=u.tag,h=u.data;switch(d){case"CERTIFICATE":c=r.certificate.decode(h,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=r.PublicKey.decode(h,"der")),l=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=r.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw Error("unknown key id "+l)}case"ENCRYPTED PRIVATE KEY":h=function(e,t){var r=e.algorithm.decrypt.kde.kdeparams.salt,i=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),l=n[e.algorithm.decrypt.cipher.algo.join(".")],c=e.algorithm.decrypt.cipher.iv,u=e.subjectPrivateKey,d=parseInt(l.split("-")[1],10)/8,h=s.pbkdf2Sync(t,r,i,d,"sha1"),p=a.createDecipheriv(l,h,c),f=[];return f.push(p.update(u)),f.push(p.final()),o.concat(f)}(h=r.EncryptedPrivateKey.decode(h,"der"),t);case"PRIVATE KEY":switch(l=(c=r.PrivateKey.decode(h,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:r.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=r.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw Error("unknown key id "+l)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(h,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(h,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(h,"der")};case"EC PRIVATE KEY":return{curve:(h=r.ECPrivateKey.decode(h,"der")).parameters.value,privateKey:h.privateKey};default:throw Error("unknown key type "+d)}}l.signature=r.signature,t.exports=l}),Lp=Zf((e,t)=>{var r=fh(),n=bh().Buffer;function i(e){var t=n.allocUnsafe(4);return t.writeUInt32BE(e,0),t}t.exports=function(e,t){for(var a,s=n.alloc(0),o=0;s.length<t;)a=i(o++),s=n.concat([s,r("sha1").update(e).update(a).digest()]);return s.slice(0,t)}}),Pp=Zf((e,t)=>{t.exports=function(e,t){for(var r=e.length,n=-1;++n<r;)e[n]^=t[n];return e}}),Dp=Zf((e,t)=>{!function(e,t){function r(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:($u(),Bs(yc)).Buffer}catch(Vte){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function o(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function l(e,t,r,n){for(var i=0,a=Math.min(e.length,r),s=t;s<a;s++){var o=e.charCodeAt(s)-48;i*=n,i+=o>=49?o-49+10:o>=17?o-17+10:o}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,s,o=0;if("be"===n)for(i=e.length-1,a=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===n)for(i=0,a=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this.strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,a=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=o(e,t,n)<<a,this.words[s]|=67108863&i,a>=18?(a-=18,s+=1,this.words[s]|=i>>>26):a+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=o(e,t,n)<<a,this.words[s]|=67108863&i,a>=18?(a-=18,s+=1,this.words[s]|=i>>>26):a+=8;this.strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var a=e.length-r,s=a%n,o=Math.min(a,a-s)+r,c=0,u=r;u<o;u+=n)c=l(e,u,u+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var d=1;for(c=l(e,u,e.length,t),u=0;u<s;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],a=0|t.words[0],s=i*a,o=67108863&s,l=s/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){for(var u=l>>>26,d=67108863&l,h=Math.min(c,t.length-1),p=Math.max(0,c-e.length+1);p<=h;p++){var f=c-p|0;u+=(s=(i=0|e.words[f])*(a=0|t.words[p])+d)/67108864|0,d=67108863&s}r.words[c]=0|d,l=0|u}return 0!==l?r.words[c]=0|l:r.length--,r.strip()}i.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,a=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<i|a)).toString(16);a=o>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==a||s!==this.length-1?c[6-l.length]+l+n:l+n}for(0!==a&&(n=a.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=u[e],p=d[e];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modn(p).toString(e);n=(f=f.idivn(p)).isZero()?m+n:c[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return r(typeof a<"u"),this.toArrayLike(a,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0"),this.strip();var s,o,l="le"===t,c=new e(a),u=this.clone();if(l){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),c[o]=s;for(;o<a;o++)c[o]=0}else{for(o=0;o<a-i;o++)c[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),c[a-o-1]=s}return c},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,a=0;a<n.length;a++)t=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<r.length;a++)t=(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var a=0,s=0;s<n.length;s++)a=(t=(0|r.words[s])-(0|n.words[s])+a)>>26,this.words[s]=67108863&t;for(;0!==a&&s<r.length;s++)a=(t=(0|r.words[s])+a)>>26,this.words[s]=67108863&t;if(0===a&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,a,s=e.words,o=t.words,l=r.words,c=0,u=0|s[0],d=8191&u,h=u>>>13,p=0|s[1],f=8191&p,m=p>>>13,g=0|s[2],v=8191&g,y=g>>>13,b=0|s[3],_=8191&b,w=b>>>13,x=0|s[4],E=8191&x,k=x>>>13,S=0|s[5],A=8191&S,T=S>>>13,N=0|s[6],I=8191&N,M=N>>>13,C=0|s[7],j=8191&C,O=C>>>13,R=0|s[8],L=8191&R,P=R>>>13,D=0|s[9],$=8191&D,z=D>>>13,B=0|o[0],U=8191&B,F=B>>>13,H=0|o[1],G=8191&H,q=H>>>13,V=0|o[2],W=8191&V,Z=V>>>13,K=0|o[3],Y=8191&K,J=K>>>13,X=0|o[4],Q=8191&X,ee=X>>>13,te=0|o[5],re=8191&te,ne=te>>>13,ie=0|o[6],ae=8191&ie,se=ie>>>13,oe=0|o[7],le=8191&oe,ce=oe>>>13,ue=0|o[8],de=8191&ue,he=ue>>>13,pe=0|o[9],fe=8191&pe,me=pe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(c+(n=Math.imul(d,U))|0)+((8191&(i=(i=Math.imul(d,F))+Math.imul(h,U)|0))<<13)|0;c=((a=Math.imul(h,F))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(f,U),i=(i=Math.imul(f,F))+Math.imul(m,U)|0,a=Math.imul(m,F);var ve=(c+(n=n+Math.imul(d,G)|0)|0)+((8191&(i=(i=i+Math.imul(d,q)|0)+Math.imul(h,G)|0))<<13)|0;c=((a=a+Math.imul(h,q)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(v,U),i=(i=Math.imul(v,F))+Math.imul(y,U)|0,a=Math.imul(y,F),n=n+Math.imul(f,G)|0,i=(i=i+Math.imul(f,q)|0)+Math.imul(m,G)|0,a=a+Math.imul(m,q)|0;var ye=(c+(n=n+Math.imul(d,W)|0)|0)+((8191&(i=(i=i+Math.imul(d,Z)|0)+Math.imul(h,W)|0))<<13)|0;c=((a=a+Math.imul(h,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(_,U),i=(i=Math.imul(_,F))+Math.imul(w,U)|0,a=Math.imul(w,F),n=n+Math.imul(v,G)|0,i=(i=i+Math.imul(v,q)|0)+Math.imul(y,G)|0,a=a+Math.imul(y,q)|0,n=n+Math.imul(f,W)|0,i=(i=i+Math.imul(f,Z)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,Z)|0;var be=(c+(n=n+Math.imul(d,Y)|0)|0)+((8191&(i=(i=i+Math.imul(d,J)|0)+Math.imul(h,Y)|0))<<13)|0;c=((a=a+Math.imul(h,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,F))+Math.imul(k,U)|0,a=Math.imul(k,F),n=n+Math.imul(_,G)|0,i=(i=i+Math.imul(_,q)|0)+Math.imul(w,G)|0,a=a+Math.imul(w,q)|0,n=n+Math.imul(v,W)|0,i=(i=i+Math.imul(v,Z)|0)+Math.imul(y,W)|0,a=a+Math.imul(y,Z)|0,n=n+Math.imul(f,Y)|0,i=(i=i+Math.imul(f,J)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,J)|0;var _e=(c+(n=n+Math.imul(d,Q)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,Q)|0))<<13)|0;c=((a=a+Math.imul(h,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(A,U),i=(i=Math.imul(A,F))+Math.imul(T,U)|0,a=Math.imul(T,F),n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,q)|0)+Math.imul(k,G)|0,a=a+Math.imul(k,q)|0,n=n+Math.imul(_,W)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(w,W)|0,a=a+Math.imul(w,Z)|0,n=n+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(y,Y)|0,a=a+Math.imul(y,J)|0,n=n+Math.imul(f,Q)|0,i=(i=i+Math.imul(f,ee)|0)+Math.imul(m,Q)|0,a=a+Math.imul(m,ee)|0;var we=(c+(n=n+Math.imul(d,re)|0)|0)+((8191&(i=(i=i+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((a=a+Math.imul(h,ne)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,F))+Math.imul(M,U)|0,a=Math.imul(M,F),n=n+Math.imul(A,G)|0,i=(i=i+Math.imul(A,q)|0)+Math.imul(T,G)|0,a=a+Math.imul(T,q)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,Z)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,Z)|0,n=n+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(w,Y)|0,a=a+Math.imul(w,J)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(y,Q)|0,a=a+Math.imul(y,ee)|0,n=n+Math.imul(f,re)|0,i=(i=i+Math.imul(f,ne)|0)+Math.imul(m,re)|0,a=a+Math.imul(m,ne)|0;var xe=(c+(n=n+Math.imul(d,ae)|0)|0)+((8191&(i=(i=i+Math.imul(d,se)|0)+Math.imul(h,ae)|0))<<13)|0;c=((a=a+Math.imul(h,se)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(j,U),i=(i=Math.imul(j,F))+Math.imul(O,U)|0,a=Math.imul(O,F),n=n+Math.imul(I,G)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(M,G)|0,a=a+Math.imul(M,q)|0,n=n+Math.imul(A,W)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(T,W)|0,a=a+Math.imul(T,Z)|0,n=n+Math.imul(E,Y)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,J)|0,n=n+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,Q)|0,a=a+Math.imul(w,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(y,re)|0,a=a+Math.imul(y,ne)|0,n=n+Math.imul(f,ae)|0,i=(i=i+Math.imul(f,se)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,se)|0;var Ee=(c+(n=n+Math.imul(d,le)|0)|0)+((8191&(i=(i=i+Math.imul(d,ce)|0)+Math.imul(h,le)|0))<<13)|0;c=((a=a+Math.imul(h,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,F))+Math.imul(P,U)|0,a=Math.imul(P,F),n=n+Math.imul(j,G)|0,i=(i=i+Math.imul(j,q)|0)+Math.imul(O,G)|0,a=a+Math.imul(O,q)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(M,W)|0,a=a+Math.imul(M,Z)|0,n=n+Math.imul(A,Y)|0,i=(i=i+Math.imul(A,J)|0)+Math.imul(T,Y)|0,a=a+Math.imul(T,J)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(k,Q)|0,a=a+Math.imul(k,ee)|0,n=n+Math.imul(_,re)|0,i=(i=i+Math.imul(_,ne)|0)+Math.imul(w,re)|0,a=a+Math.imul(w,ne)|0,n=n+Math.imul(v,ae)|0,i=(i=i+Math.imul(v,se)|0)+Math.imul(y,ae)|0,a=a+Math.imul(y,se)|0,n=n+Math.imul(f,le)|0,i=(i=i+Math.imul(f,ce)|0)+Math.imul(m,le)|0,a=a+Math.imul(m,ce)|0;var ke=(c+(n=n+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;c=((a=a+Math.imul(h,he)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul($,U),i=(i=Math.imul($,F))+Math.imul(z,U)|0,a=Math.imul(z,F),n=n+Math.imul(L,G)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(P,G)|0,a=a+Math.imul(P,q)|0,n=n+Math.imul(j,W)|0,i=(i=i+Math.imul(j,Z)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,Z)|0,n=n+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(M,Y)|0,a=a+Math.imul(M,J)|0,n=n+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(T,Q)|0,a=a+Math.imul(T,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(k,re)|0,a=a+Math.imul(k,ne)|0,n=n+Math.imul(_,ae)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(w,ae)|0,a=a+Math.imul(w,se)|0,n=n+Math.imul(v,le)|0,i=(i=i+Math.imul(v,ce)|0)+Math.imul(y,le)|0,a=a+Math.imul(y,ce)|0,n=n+Math.imul(f,de)|0,i=(i=i+Math.imul(f,he)|0)+Math.imul(m,de)|0,a=a+Math.imul(m,he)|0;var Se=(c+(n=n+Math.imul(d,fe)|0)|0)+((8191&(i=(i=i+Math.imul(d,me)|0)+Math.imul(h,fe)|0))<<13)|0;c=((a=a+Math.imul(h,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul($,G),i=(i=Math.imul($,q))+Math.imul(z,G)|0,a=Math.imul(z,q),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,Z)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,Z)|0,n=n+Math.imul(j,Y)|0,i=(i=i+Math.imul(j,J)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(M,Q)|0,a=a+Math.imul(M,ee)|0,n=n+Math.imul(A,re)|0,i=(i=i+Math.imul(A,ne)|0)+Math.imul(T,re)|0,a=a+Math.imul(T,ne)|0,n=n+Math.imul(E,ae)|0,i=(i=i+Math.imul(E,se)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,se)|0,n=n+Math.imul(_,le)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,le)|0,a=a+Math.imul(w,ce)|0,n=n+Math.imul(v,de)|0,i=(i=i+Math.imul(v,he)|0)+Math.imul(y,de)|0,a=a+Math.imul(y,he)|0;var Ae=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul($,W),i=(i=Math.imul($,Z))+Math.imul(z,W)|0,a=Math.imul(z,Z),n=n+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,J)|0,n=n+Math.imul(j,Q)|0,i=(i=i+Math.imul(j,ee)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(M,re)|0,a=a+Math.imul(M,ne)|0,n=n+Math.imul(A,ae)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(T,ae)|0,a=a+Math.imul(T,se)|0,n=n+Math.imul(E,le)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,ce)|0,n=n+Math.imul(_,de)|0,i=(i=i+Math.imul(_,he)|0)+Math.imul(w,de)|0,a=a+Math.imul(w,he)|0;var Te=(c+(n=n+Math.imul(v,fe)|0)|0)+((8191&(i=(i=i+Math.imul(v,me)|0)+Math.imul(y,fe)|0))<<13)|0;c=((a=a+Math.imul(y,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul($,Y),i=(i=Math.imul($,J))+Math.imul(z,Y)|0,a=Math.imul(z,J),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(P,Q)|0,a=a+Math.imul(P,ee)|0,n=n+Math.imul(j,re)|0,i=(i=i+Math.imul(j,ne)|0)+Math.imul(O,re)|0,a=a+Math.imul(O,ne)|0,n=n+Math.imul(I,ae)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(M,ae)|0,a=a+Math.imul(M,se)|0,n=n+Math.imul(A,le)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(T,le)|0,a=a+Math.imul(T,ce)|0,n=n+Math.imul(E,de)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(k,de)|0,a=a+Math.imul(k,he)|0;var Ne=(c+(n=n+Math.imul(_,fe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(w,fe)|0))<<13)|0;c=((a=a+Math.imul(w,me)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul($,Q),i=(i=Math.imul($,ee))+Math.imul(z,Q)|0,a=Math.imul(z,ee),n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(P,re)|0,a=a+Math.imul(P,ne)|0,n=n+Math.imul(j,ae)|0,i=(i=i+Math.imul(j,se)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,se)|0,n=n+Math.imul(I,le)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(M,le)|0,a=a+Math.imul(M,ce)|0,n=n+Math.imul(A,de)|0,i=(i=i+Math.imul(A,he)|0)+Math.imul(T,de)|0,a=a+Math.imul(T,he)|0;var Ie=(c+(n=n+Math.imul(E,fe)|0)|0)+((8191&(i=(i=i+Math.imul(E,me)|0)+Math.imul(k,fe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,re),i=(i=Math.imul($,ne))+Math.imul(z,re)|0,a=Math.imul(z,ne),n=n+Math.imul(L,ae)|0,i=(i=i+Math.imul(L,se)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,se)|0,n=n+Math.imul(j,le)|0,i=(i=i+Math.imul(j,ce)|0)+Math.imul(O,le)|0,a=a+Math.imul(O,ce)|0,n=n+Math.imul(I,de)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(M,de)|0,a=a+Math.imul(M,he)|0;var Me=(c+(n=n+Math.imul(A,fe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(T,fe)|0))<<13)|0;c=((a=a+Math.imul(T,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul($,ae),i=(i=Math.imul($,se))+Math.imul(z,ae)|0,a=Math.imul(z,se),n=n+Math.imul(L,le)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(P,le)|0,a=a+Math.imul(P,ce)|0,n=n+Math.imul(j,de)|0,i=(i=i+Math.imul(j,he)|0)+Math.imul(O,de)|0,a=a+Math.imul(O,he)|0;var Ce=(c+(n=n+Math.imul(I,fe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(M,fe)|0))<<13)|0;c=((a=a+Math.imul(M,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul($,le),i=(i=Math.imul($,ce))+Math.imul(z,le)|0,a=Math.imul(z,ce),n=n+Math.imul(L,de)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(P,de)|0,a=a+Math.imul(P,he)|0;var je=(c+(n=n+Math.imul(j,fe)|0)|0)+((8191&(i=(i=i+Math.imul(j,me)|0)+Math.imul(O,fe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,n=Math.imul($,de),i=(i=Math.imul($,he))+Math.imul(z,de)|0,a=Math.imul(z,he);var Oe=(c+(n=n+Math.imul(L,fe)|0)|0)+((8191&(i=(i=i+Math.imul(L,me)|0)+Math.imul(P,fe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var Re=(c+(n=Math.imul($,fe))|0)+((8191&(i=(i=Math.imul($,me))+Math.imul(z,fe)|0))<<13)|0;return c=((a=Math.imul(z,me))+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,l[0]=ge,l[1]=ve,l[2]=ye,l[3]=be,l[4]=_e,l[5]=we,l[6]=xe,l[7]=Ee,l[8]=ke,l[9]=Se,l[10]=Ae,l[11]=Te,l[12]=Ne,l[13]=Ie,l[14]=Me,l[15]=Ce,l[16]=je,l[17]=Oe,l[18]=Re,0!==c&&(l[19]=c,r.length++),r};function f(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(p=h),i.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?p(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var s=i;i=0;for(var o=67108863&n,l=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=l;c++){var u=a-c,d=(0|e.words[u])*(0|t.words[c]),h=67108863&d;o=67108863&(h=h+o|0),i+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[a]=o,n=s,s=i}return 0!==n?r.words[a]=n:r.length--,r.strip()}(this,e,t):f(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=Array(e),r=i.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,i,a){for(var s=0;s<a;s++)n[s]=t[e[s]],i[s]=r[e[s]]},m.prototype.transform=function(e,t,r,n,i,a){this.permute(a,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var o=s<<1,l=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),u=0;u<i;u+=o)for(var d=l,h=c,p=0;p<s;p++){var f=r[u+p],m=n[u+p],g=r[u+p+s],v=n[u+p+s],y=d*g-h*v;v=d*v+h*g,g=y,r[u+p]=f+g,n[u+p]=m+v,r[u+p+s]=f-g,n[u+p+s]=m-v,p!==o&&(y=l*d-c*h,h=l*h+c*d,d=y)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},m.prototype.convert13b=function(e,t,n,i){for(var a=0,s=0;s<t;s++)a+=0|e[s],n[2*s]=8191&a,a>>>=13,n[2*s+1]=8191&a,a>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===a),r(!(-8192&a))},m.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),a=this.stub(n),s=Array(n),o=Array(n),l=Array(n),c=Array(n),u=Array(n),d=Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,c,n),this.transform(s,a,o,l,n,i),this.transform(c,a,u,d,n,i);for(var p=0;p<n;p++){var f=o[p]*u[p]-l[p]*d[p];l[p]=o[p]*d[p]+l[p]*u[p],o[p]=f}return this.conjugate(o,l,n),this.transform(o,l,h,a,n,i),this.conjugate(h,a,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=Array(this.length+e.length),f(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,a=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=a>>>26,this.words[n]=67108863&a}return 0!==t&&(this.words[n]=t,this.length++),this.length=0===e?1:this.length,this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var a=r.sqr();n<t.length;n++,a=a.sqr())0!==t[n]&&(r=r.mul(a));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,l=(0|this.words[t])-o<<n;this.words[t]=l|s,s=o>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,s=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,l=n;if(i-=s,i=Math.max(0,i),l){for(var c=0;c<s;c++)l.words[c]=this.words[c];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var d=0|this.words[c];this.words[c]=u<<26-a|d>>>a,u=d&o}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,a=e.length+n;this._expand(a);var s,o=0;for(i=0;i<e.length;i++){s=(0|this.words[i+n])+o;var l=(0|e.words[i])*t;o=((s-=67108863&l)>>26)-(l/67108864|0),this.words[i+n]=67108863&s}for(;i<this.length-n;i++)o=(s=(0|this.words[i+n])+o)>>26,this.words[i+n]=67108863&s;if(0===o)return this.strip();for(r(-1===o),o=0,i=0;i<this.length;i++)o=(s=-(0|this.words[i])+o)>>26,this.words[i]=67108863&s;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),a=e,s=0|a.words[a.length-1];0!==(r=26-this._countBits(s))&&(a=a.ushln(r),n.iushln(r),s=0|a.words[a.length-1]);var o,l=n.length-a.length;if("mod"!==t){(o=new i(null)).length=l+1,o.words=Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var u=n.clone()._ishlnsubmul(a,1,l);0===u.negative&&(n=u,o&&(o.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|n.words[a.length+d])+(0|n.words[a.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(a,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(a,1,d),n.isZero()||(n.negative^=1);o&&(o.words[d]=h)}return o&&o.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:o||null,mod:n}},i.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(a=o.div.neg()),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:a,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(a=o.div.neg()),{div:a,mod:o.mod}):0!==(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var a,s,o},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(e<=67108863);for(var t=67108864%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},i.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new i(1),s=new i(0),o=new i(0),l=new i(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0===(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(a.isOdd()||s.isOdd())&&(a.iadd(u),s.isub(d)),a.iushrn(1),s.iushrn(1);for(var f=0,m=1;0===(n.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(u),l.isub(d)),o.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(o),s.isub(l)):(n.isub(t),o.isub(a),l.isub(s))}return{a:o,b:l,gcd:n.iushln(c)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,s=new i(1),o=new i(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,u=1;0===(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var d=0,h=1;0===(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(o)):(n.isub(t),o.isub(s))}return(a=0===t.cmpn(1)?s:o).cmpn(0)<0&&a.iadd(e),a},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var a=t;t=r,r=a}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return!(1&this.words[0])},i.prototype.isOdd=function(){return!(1&~this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,s=n;0!==a&&s<this.length;s++){var o=0|this.words[s];a=(o+=a)>>>26,o&=67108863,this.words[s]=o}return 0!==a&&(this.words[s]=a,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new x(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new i(null);return e.words=Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},n(y,v),y.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|a>>>22,a=s}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(b,v),n(_,v),n(w,v),w.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new b;else if("p192"===e)t=new _;else{if("p25519"!==e)throw Error("Unknown prime "+e);t=new w}return g[e]=t,t},x.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var a=this.m.subn(1),s=0;!a.isZero()&&0===a.andln(1);)s++,a.iushrn(1);r(!a.isZero());var o=new i(1).toRed(this),l=o.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,a),h=this.pow(e,a.addn(1).iushrn(1)),p=this.pow(e,a),f=s;0!==p.cmp(o);){for(var m=p,g=0;0!==m.cmp(o);g++)m=m.redSqr();r(g<f);var v=this.pow(d,new i(1).iushln(f-g-1));h=h.redMul(v),d=v.redSqr(),p=p.redMul(d),f=g}return h},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var a=r[0],s=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],u=l-1;u>=0;u--){var d=c>>u&1;a!==r[0]&&(a=this.sqr(a)),0!==d||0!==s?(s<<=1,s|=d,(4===++o||0===n&&0===u)&&(a=this.mul(a,r[s]),o=0,s=0)):o=0}l=26}return a},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new E(e)},n(E,x),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),s=a;return a.cmp(this.m)>=0?s=a.isub(this.m):a.cmpn(0)<0&&(s=a.iadd(this.m)),s._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(typeof t>"u"||t,e)}),$p=Zf((e,t)=>{var r=Dp(),n=bh().Buffer;t.exports=function(e,t){return n.from(e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed().toArray())}}),zp=Zf((e,t)=>{!function(e,t){function r(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a=typeof window<"u"&&typeof window.Buffer<"u"?window.Buffer:($u(),Bs(yc)).Buffer}catch(sre){}function s(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function o(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function l(e,t,n,i){for(var a=0,s=0,o=Math.min(e.length,n),l=t;l<o;l++){var c=e.charCodeAt(l)-48;a*=i,s=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&s<i,"Invalid character"),a+=s}return a}function c(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,s,o=0;if("be"===n)for(i=e.length-1,a=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===n)for(i=0,a=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this._strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,a=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=o(e,t,n)<<a,this.words[s]|=67108863&i,a>=18?(a-=18,s+=1,this.words[s]|=i>>>26):a+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=o(e,t,n)<<a,this.words[s]|=67108863&i,a>=18?(a-=18,s+=1,this.words[s]|=i>>>26):a+=8;this._strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var a=e.length-r,s=a%n,o=Math.min(a,a-s)+r,c=0,u=r;u<o;u+=n)c=l(e,u,u+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var d=1;for(c=l(e,u,e.length,t),u=0;u<s;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype._move=function(e){c(e,this)},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},typeof Symbol<"u"&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(sre){i.prototype.inspect=u}else i.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,a=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<i|a)).toString(16);a=o>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==a||s!==this.length-1?d[6-l.length]+l+n:l+n}for(0!==a&&(n=a.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],u=p[e];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modrn(u).toString(e);n=(f=f.idivn(u)).isZero()?m+n:d[c-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function f(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],a=0|t.words[0],s=i*a,o=67108863&s,l=s/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){for(var u=l>>>26,d=67108863&l,h=Math.min(c,t.length-1),p=Math.max(0,c-e.length+1);p<=h;p++){var f=c-p|0;u+=(s=(i=0|e.words[f])*(a=0|t.words[p])+d)/67108864|0,d=67108863&s}r.words[c]=0|d,l=0|u}return 0!==l?r.words[c]=0|l:r.length--,r._strip()}i.prototype.toArrayLike=function(e,t,n){this._strip();var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,a);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,i),s},i.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,a=0;i<this.length;i++){var s=this.words[i]<<a|n;e[r++]=255&s,r<e.length&&(e[r++]=s>>8&255),r<e.length&&(e[r++]=s>>16&255),6===a?(r<e.length&&(e[r++]=s>>24&255),n=0,a=0):(n=s>>>24,a+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},i.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,a=0;i<this.length;i++){var s=this.words[i]<<a|n;e[r--]=255&s,r>=0&&(e[r--]=s>>8&255),r>=0&&(e[r--]=s>>16&255),6===a?(r>=0&&(e[r--]=s>>24&255),n=0,a=0):(n=s>>>24,a+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},i.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},i.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},i.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,a=0;a<n.length;a++)t=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<r.length;a++)t=(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var a=0,s=0;s<n.length;s++)a=(t=(0|r.words[s])-(0|n.words[s])+a)>>26,this.words[s]=67108863&t;for(;0!==a&&s<r.length;s++)a=(t=(0|r.words[s])+a)>>26,this.words[s]=67108863&t;if(0===a&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,i,a,s=e.words,o=t.words,l=r.words,c=0,u=0|s[0],d=8191&u,h=u>>>13,p=0|s[1],f=8191&p,m=p>>>13,g=0|s[2],v=8191&g,y=g>>>13,b=0|s[3],_=8191&b,w=b>>>13,x=0|s[4],E=8191&x,k=x>>>13,S=0|s[5],A=8191&S,T=S>>>13,N=0|s[6],I=8191&N,M=N>>>13,C=0|s[7],j=8191&C,O=C>>>13,R=0|s[8],L=8191&R,P=R>>>13,D=0|s[9],$=8191&D,z=D>>>13,B=0|o[0],U=8191&B,F=B>>>13,H=0|o[1],G=8191&H,q=H>>>13,V=0|o[2],W=8191&V,Z=V>>>13,K=0|o[3],Y=8191&K,J=K>>>13,X=0|o[4],Q=8191&X,ee=X>>>13,te=0|o[5],re=8191&te,ne=te>>>13,ie=0|o[6],ae=8191&ie,se=ie>>>13,oe=0|o[7],le=8191&oe,ce=oe>>>13,ue=0|o[8],de=8191&ue,he=ue>>>13,pe=0|o[9],fe=8191&pe,me=pe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(c+(n=Math.imul(d,U))|0)+((8191&(i=(i=Math.imul(d,F))+Math.imul(h,U)|0))<<13)|0;c=((a=Math.imul(h,F))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(f,U),i=(i=Math.imul(f,F))+Math.imul(m,U)|0,a=Math.imul(m,F);var ve=(c+(n=n+Math.imul(d,G)|0)|0)+((8191&(i=(i=i+Math.imul(d,q)|0)+Math.imul(h,G)|0))<<13)|0;c=((a=a+Math.imul(h,q)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(v,U),i=(i=Math.imul(v,F))+Math.imul(y,U)|0,a=Math.imul(y,F),n=n+Math.imul(f,G)|0,i=(i=i+Math.imul(f,q)|0)+Math.imul(m,G)|0,a=a+Math.imul(m,q)|0;var ye=(c+(n=n+Math.imul(d,W)|0)|0)+((8191&(i=(i=i+Math.imul(d,Z)|0)+Math.imul(h,W)|0))<<13)|0;c=((a=a+Math.imul(h,Z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(_,U),i=(i=Math.imul(_,F))+Math.imul(w,U)|0,a=Math.imul(w,F),n=n+Math.imul(v,G)|0,i=(i=i+Math.imul(v,q)|0)+Math.imul(y,G)|0,a=a+Math.imul(y,q)|0,n=n+Math.imul(f,W)|0,i=(i=i+Math.imul(f,Z)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,Z)|0;var be=(c+(n=n+Math.imul(d,Y)|0)|0)+((8191&(i=(i=i+Math.imul(d,J)|0)+Math.imul(h,Y)|0))<<13)|0;c=((a=a+Math.imul(h,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(E,U),i=(i=Math.imul(E,F))+Math.imul(k,U)|0,a=Math.imul(k,F),n=n+Math.imul(_,G)|0,i=(i=i+Math.imul(_,q)|0)+Math.imul(w,G)|0,a=a+Math.imul(w,q)|0,n=n+Math.imul(v,W)|0,i=(i=i+Math.imul(v,Z)|0)+Math.imul(y,W)|0,a=a+Math.imul(y,Z)|0,n=n+Math.imul(f,Y)|0,i=(i=i+Math.imul(f,J)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,J)|0;var _e=(c+(n=n+Math.imul(d,Q)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,Q)|0))<<13)|0;c=((a=a+Math.imul(h,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(A,U),i=(i=Math.imul(A,F))+Math.imul(T,U)|0,a=Math.imul(T,F),n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,q)|0)+Math.imul(k,G)|0,a=a+Math.imul(k,q)|0,n=n+Math.imul(_,W)|0,i=(i=i+Math.imul(_,Z)|0)+Math.imul(w,W)|0,a=a+Math.imul(w,Z)|0,n=n+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(y,Y)|0,a=a+Math.imul(y,J)|0,n=n+Math.imul(f,Q)|0,i=(i=i+Math.imul(f,ee)|0)+Math.imul(m,Q)|0,a=a+Math.imul(m,ee)|0;var we=(c+(n=n+Math.imul(d,re)|0)|0)+((8191&(i=(i=i+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((a=a+Math.imul(h,ne)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(I,U),i=(i=Math.imul(I,F))+Math.imul(M,U)|0,a=Math.imul(M,F),n=n+Math.imul(A,G)|0,i=(i=i+Math.imul(A,q)|0)+Math.imul(T,G)|0,a=a+Math.imul(T,q)|0,n=n+Math.imul(E,W)|0,i=(i=i+Math.imul(E,Z)|0)+Math.imul(k,W)|0,a=a+Math.imul(k,Z)|0,n=n+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(w,Y)|0,a=a+Math.imul(w,J)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(y,Q)|0,a=a+Math.imul(y,ee)|0,n=n+Math.imul(f,re)|0,i=(i=i+Math.imul(f,ne)|0)+Math.imul(m,re)|0,a=a+Math.imul(m,ne)|0;var xe=(c+(n=n+Math.imul(d,ae)|0)|0)+((8191&(i=(i=i+Math.imul(d,se)|0)+Math.imul(h,ae)|0))<<13)|0;c=((a=a+Math.imul(h,se)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(j,U),i=(i=Math.imul(j,F))+Math.imul(O,U)|0,a=Math.imul(O,F),n=n+Math.imul(I,G)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(M,G)|0,a=a+Math.imul(M,q)|0,n=n+Math.imul(A,W)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(T,W)|0,a=a+Math.imul(T,Z)|0,n=n+Math.imul(E,Y)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(k,Y)|0,a=a+Math.imul(k,J)|0,n=n+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,Q)|0,a=a+Math.imul(w,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(y,re)|0,a=a+Math.imul(y,ne)|0,n=n+Math.imul(f,ae)|0,i=(i=i+Math.imul(f,se)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,se)|0;var Ee=(c+(n=n+Math.imul(d,le)|0)|0)+((8191&(i=(i=i+Math.imul(d,ce)|0)+Math.imul(h,le)|0))<<13)|0;c=((a=a+Math.imul(h,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,U),i=(i=Math.imul(L,F))+Math.imul(P,U)|0,a=Math.imul(P,F),n=n+Math.imul(j,G)|0,i=(i=i+Math.imul(j,q)|0)+Math.imul(O,G)|0,a=a+Math.imul(O,q)|0,n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(M,W)|0,a=a+Math.imul(M,Z)|0,n=n+Math.imul(A,Y)|0,i=(i=i+Math.imul(A,J)|0)+Math.imul(T,Y)|0,a=a+Math.imul(T,J)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(k,Q)|0,a=a+Math.imul(k,ee)|0,n=n+Math.imul(_,re)|0,i=(i=i+Math.imul(_,ne)|0)+Math.imul(w,re)|0,a=a+Math.imul(w,ne)|0,n=n+Math.imul(v,ae)|0,i=(i=i+Math.imul(v,se)|0)+Math.imul(y,ae)|0,a=a+Math.imul(y,se)|0,n=n+Math.imul(f,le)|0,i=(i=i+Math.imul(f,ce)|0)+Math.imul(m,le)|0,a=a+Math.imul(m,ce)|0;var ke=(c+(n=n+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;c=((a=a+Math.imul(h,he)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul($,U),i=(i=Math.imul($,F))+Math.imul(z,U)|0,a=Math.imul(z,F),n=n+Math.imul(L,G)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(P,G)|0,a=a+Math.imul(P,q)|0,n=n+Math.imul(j,W)|0,i=(i=i+Math.imul(j,Z)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,Z)|0,n=n+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(M,Y)|0,a=a+Math.imul(M,J)|0,n=n+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(T,Q)|0,a=a+Math.imul(T,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(k,re)|0,a=a+Math.imul(k,ne)|0,n=n+Math.imul(_,ae)|0,i=(i=i+Math.imul(_,se)|0)+Math.imul(w,ae)|0,a=a+Math.imul(w,se)|0,n=n+Math.imul(v,le)|0,i=(i=i+Math.imul(v,ce)|0)+Math.imul(y,le)|0,a=a+Math.imul(y,ce)|0,n=n+Math.imul(f,de)|0,i=(i=i+Math.imul(f,he)|0)+Math.imul(m,de)|0,a=a+Math.imul(m,he)|0;var Se=(c+(n=n+Math.imul(d,fe)|0)|0)+((8191&(i=(i=i+Math.imul(d,me)|0)+Math.imul(h,fe)|0))<<13)|0;c=((a=a+Math.imul(h,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul($,G),i=(i=Math.imul($,q))+Math.imul(z,G)|0,a=Math.imul(z,q),n=n+Math.imul(L,W)|0,i=(i=i+Math.imul(L,Z)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,Z)|0,n=n+Math.imul(j,Y)|0,i=(i=i+Math.imul(j,J)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(M,Q)|0,a=a+Math.imul(M,ee)|0,n=n+Math.imul(A,re)|0,i=(i=i+Math.imul(A,ne)|0)+Math.imul(T,re)|0,a=a+Math.imul(T,ne)|0,n=n+Math.imul(E,ae)|0,i=(i=i+Math.imul(E,se)|0)+Math.imul(k,ae)|0,a=a+Math.imul(k,se)|0,n=n+Math.imul(_,le)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,le)|0,a=a+Math.imul(w,ce)|0,n=n+Math.imul(v,de)|0,i=(i=i+Math.imul(v,he)|0)+Math.imul(y,de)|0,a=a+Math.imul(y,he)|0;var Ae=(c+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;c=((a=a+Math.imul(m,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul($,W),i=(i=Math.imul($,Z))+Math.imul(z,W)|0,a=Math.imul(z,Z),n=n+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,J)|0,n=n+Math.imul(j,Q)|0,i=(i=i+Math.imul(j,ee)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(M,re)|0,a=a+Math.imul(M,ne)|0,n=n+Math.imul(A,ae)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(T,ae)|0,a=a+Math.imul(T,se)|0,n=n+Math.imul(E,le)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(k,le)|0,a=a+Math.imul(k,ce)|0,n=n+Math.imul(_,de)|0,i=(i=i+Math.imul(_,he)|0)+Math.imul(w,de)|0,a=a+Math.imul(w,he)|0;var Te=(c+(n=n+Math.imul(v,fe)|0)|0)+((8191&(i=(i=i+Math.imul(v,me)|0)+Math.imul(y,fe)|0))<<13)|0;c=((a=a+Math.imul(y,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul($,Y),i=(i=Math.imul($,J))+Math.imul(z,Y)|0,a=Math.imul(z,J),n=n+Math.imul(L,Q)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(P,Q)|0,a=a+Math.imul(P,ee)|0,n=n+Math.imul(j,re)|0,i=(i=i+Math.imul(j,ne)|0)+Math.imul(O,re)|0,a=a+Math.imul(O,ne)|0,n=n+Math.imul(I,ae)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(M,ae)|0,a=a+Math.imul(M,se)|0,n=n+Math.imul(A,le)|0,i=(i=i+Math.imul(A,ce)|0)+Math.imul(T,le)|0,a=a+Math.imul(T,ce)|0,n=n+Math.imul(E,de)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(k,de)|0,a=a+Math.imul(k,he)|0;var Ne=(c+(n=n+Math.imul(_,fe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(w,fe)|0))<<13)|0;c=((a=a+Math.imul(w,me)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul($,Q),i=(i=Math.imul($,ee))+Math.imul(z,Q)|0,a=Math.imul(z,ee),n=n+Math.imul(L,re)|0,i=(i=i+Math.imul(L,ne)|0)+Math.imul(P,re)|0,a=a+Math.imul(P,ne)|0,n=n+Math.imul(j,ae)|0,i=(i=i+Math.imul(j,se)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,se)|0,n=n+Math.imul(I,le)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(M,le)|0,a=a+Math.imul(M,ce)|0,n=n+Math.imul(A,de)|0,i=(i=i+Math.imul(A,he)|0)+Math.imul(T,de)|0,a=a+Math.imul(T,he)|0;var Ie=(c+(n=n+Math.imul(E,fe)|0)|0)+((8191&(i=(i=i+Math.imul(E,me)|0)+Math.imul(k,fe)|0))<<13)|0;c=((a=a+Math.imul(k,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,re),i=(i=Math.imul($,ne))+Math.imul(z,re)|0,a=Math.imul(z,ne),n=n+Math.imul(L,ae)|0,i=(i=i+Math.imul(L,se)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,se)|0,n=n+Math.imul(j,le)|0,i=(i=i+Math.imul(j,ce)|0)+Math.imul(O,le)|0,a=a+Math.imul(O,ce)|0,n=n+Math.imul(I,de)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(M,de)|0,a=a+Math.imul(M,he)|0;var Me=(c+(n=n+Math.imul(A,fe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(T,fe)|0))<<13)|0;c=((a=a+Math.imul(T,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,n=Math.imul($,ae),i=(i=Math.imul($,se))+Math.imul(z,ae)|0,a=Math.imul(z,se),n=n+Math.imul(L,le)|0,i=(i=i+Math.imul(L,ce)|0)+Math.imul(P,le)|0,a=a+Math.imul(P,ce)|0,n=n+Math.imul(j,de)|0,i=(i=i+Math.imul(j,he)|0)+Math.imul(O,de)|0,a=a+Math.imul(O,he)|0;var Ce=(c+(n=n+Math.imul(I,fe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(M,fe)|0))<<13)|0;c=((a=a+Math.imul(M,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul($,le),i=(i=Math.imul($,ce))+Math.imul(z,le)|0,a=Math.imul(z,ce),n=n+Math.imul(L,de)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(P,de)|0,a=a+Math.imul(P,he)|0;var je=(c+(n=n+Math.imul(j,fe)|0)|0)+((8191&(i=(i=i+Math.imul(j,me)|0)+Math.imul(O,fe)|0))<<13)|0;c=((a=a+Math.imul(O,me)|0)+(i>>>13)|0)+(je>>>26)|0,je&=67108863,n=Math.imul($,de),i=(i=Math.imul($,he))+Math.imul(z,de)|0,a=Math.imul(z,he);var Oe=(c+(n=n+Math.imul(L,fe)|0)|0)+((8191&(i=(i=i+Math.imul(L,me)|0)+Math.imul(P,fe)|0))<<13)|0;c=((a=a+Math.imul(P,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var Re=(c+(n=Math.imul($,fe))|0)+((8191&(i=(i=Math.imul($,me))+Math.imul(z,fe)|0))<<13)|0;return c=((a=Math.imul(z,me))+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,l[0]=ge,l[1]=ve,l[2]=ye,l[3]=be,l[4]=_e,l[5]=we,l[6]=xe,l[7]=Ee,l[8]=ke,l[9]=Se,l[10]=Ae,l[11]=Te,l[12]=Ne,l[13]=Ie,l[14]=Me,l[15]=Ce,l[16]=je,l[17]=Oe,l[18]=Re,0!==c&&(l[19]=c,r.length++),r};function g(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var s=i;i=0;for(var o=67108863&n,l=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=l;c++){var u=a-c,d=(0|e.words[u])*(0|t.words[c]),h=67108863&d;o=67108863&(h=h+o|0),i+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[a]=o,n=s,s=i}return 0!==n?r.words[a]=n:r.length--,r._strip()}function v(e,t,r){return g(e,t,r)}Math.imul||(m=f),i.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?f(this,e,t):r<1024?g(this,e,t):v(this,e,t)},i.prototype.mul=function(e){var t=new i(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=Array(this.length+e.length),v(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var n=0,i=0;i<this.length;i++){var a=(0|this.words[i])*e,s=(67108863&a)+(67108863&n);n>>=26,n+=a/67108864|0,n+=s>>>26,this.words[i]=67108863&s}return 0!==n&&(this.words[i]=n,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var a=r.sqr();n<t.length;n++,a=a.sqr())0!==t[n]&&(r=r.mul(a));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,l=(0|this.words[t])-o<<n;this.words[t]=l|s,s=o>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,s=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,l=n;if(i-=s,i=Math.max(0,i),l){for(var c=0;c<s;c++)l.words[c]=this.words[c];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var d=0|this.words[c];this.words[c]=u<<26-a|d>>>a,u=d&o}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,a=e.length+n;this._expand(a);var s,o=0;for(i=0;i<e.length;i++){s=(0|this.words[i+n])+o;var l=(0|e.words[i])*t;o=((s-=67108863&l)>>26)-(l/67108864|0),this.words[i+n]=67108863&s}for(;i<this.length-n;i++)o=(s=(0|this.words[i+n])+o)>>26,this.words[i+n]=67108863&s;if(0===o)return this._strip();for(r(-1===o),o=0,i=0;i<this.length;i++)o=(s=-(0|this.words[i])+o)>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),a=e,s=0|a.words[a.length-1];0!==(r=26-this._countBits(s))&&(a=a.ushln(r),n.iushln(r),s=0|a.words[a.length-1]);var o,l=n.length-a.length;if("mod"!==t){(o=new i(null)).length=l+1,o.words=Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var u=n.clone()._ishlnsubmul(a,1,l);0===u.negative&&(n=u,o&&(o.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|n.words[a.length+d])+(0|n.words[a.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(a,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(a,1,d),n.isZero()||(n.negative^=1);o&&(o.words[d]=h)}return o&&o._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:o||null,mod:n}},i.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(a=o.div.neg()),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:a,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(a=o.div.neg()),{div:a,mod:o.mod}):0!==(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modrn(e.words[0]))}:this._wordDiv(e,t);var a,s,o},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=67108864%e,i=0,a=this.length-1;a>=0;a--)i=(n*i+(0|this.words[a]))%e;return t?-i:i},i.prototype.modn=function(e){return this.modrn(e)},i.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var a=(0|this.words[i])+67108864*n;this.words[i]=a/e|0,n=a%e}return this._strip(),t?this.ineg():this},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new i(1),s=new i(0),o=new i(0),l=new i(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0===(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(a.isOdd()||s.isOdd())&&(a.iadd(u),s.isub(d)),a.iushrn(1),s.iushrn(1);for(var f=0,m=1;0===(n.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(u),l.isub(d)),o.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(o),s.isub(l)):(n.isub(t),o.isub(a),l.isub(s))}return{a:o,b:l,gcd:n.iushln(c)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,s=new i(1),o=new i(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,u=1;0===(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var d=0,h=1;0===(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(o)):(n.isub(t),o.isub(s))}return(a=0===t.cmpn(1)?s:o).cmpn(0)<0&&a.iadd(e),a},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var a=t;t=r,r=a}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return!(1&this.words[0])},i.prototype.isOdd=function(){return!(1&~this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,s=n;0!==a&&s<this.length;s++){var o=0|this.words[s];a=(o+=a)>>>26,o&=67108863,this.words[s]=o}return 0!==a&&(this.words[s]=a,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new k(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new i(null);return e.words=Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},n(_,b),_.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|a>>>22,a=s}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},_.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(w,b),n(x,b),n(E,b),E.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new _;else if("p224"===e)t=new w;else if("p192"===e)t=new x;else{if("p25519"!==e)throw Error("Unknown prime "+e);t=new E}return y[e]=t,t},k.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(c(e,e.umod(this.m)._forceRed(this)),e)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},k.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var a=this.m.subn(1),s=0;!a.isZero()&&0===a.andln(1);)s++,a.iushrn(1);r(!a.isZero());var o=new i(1).toRed(this),l=o.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,a),h=this.pow(e,a.addn(1).iushrn(1)),p=this.pow(e,a),f=s;0!==p.cmp(o);){for(var m=p,g=0;0!==m.cmp(o);g++)m=m.redSqr();r(g<f);var v=this.pow(d,new i(1).iushln(f-g-1));h=h.redMul(v),d=v.redSqr(),p=p.redMul(d),f=g}return h},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var a=r[0],s=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],u=l-1;u>=0;u--){var d=c>>u&1;a!==r[0]&&(a=this.sqr(a)),0!==d||0!==s?(s<<=1,s|=d,(4===++o||0===n&&0===u)&&(a=this.mul(a,r[s]),o=0,s=0)):o=0}l=26}return a},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new S(e)},n(S,k),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),s=a;return a.cmp(this.m)>=0?s=a.isub(this.m):a.cmpn(0)<0&&(s=a.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(typeof t>"u"||t,e)}),Bp=Zf((e,t)=>{var r=zp(),n=ph(),i=bh().Buffer;function a(e){var t,i=e.modulus.byteLength();do{t=new r(n(i))}while(t.cmp(e.modulus)>=0||!t.umod(e.prime1)||!t.umod(e.prime2));return t}function s(e,t){var n=function(e){var t=a(e);return{blinder:t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(t),s=t.modulus.byteLength(),o=new r(e).mul(n.blinder).umod(t.modulus),l=o.toRed(r.mont(t.prime1)),c=o.toRed(r.mont(t.prime2)),u=t.coefficient,d=t.prime1,h=t.prime2,p=l.redPow(t.exponent1).fromRed(),f=c.redPow(t.exponent2).fromRed(),m=p.isub(f).imul(u).umod(d).imul(h);return f.iadd(m).imul(n.unblinder).umod(t.modulus).toArrayLike(i,"be",s)}s.getr=a,t.exports=s}),Up=Zf((e,t)=>{var r=Rp(),n=ph(),i=fh(),a=Lp(),s=Pp(),o=Dp(),l=$p(),c=Bp(),u=bh().Buffer;t.exports=function(e,t,d){var h;h=e.padding?e.padding:d?1:4;var p,f=r(e);if(4===h)p=function(e,t){var r=e.modulus.byteLength(),l=t.length,c=i("sha1").update(u.alloc(0)).digest(),d=c.length,h=2*d;if(l>r-h-2)throw Error("message too long");var p=u.alloc(r-l-h-2),f=r-d-1,m=n(d),g=s(u.concat([c,p,u.alloc(1,1),t],f),a(m,f)),v=s(m,a(g,d));return new o(u.concat([u.alloc(1),v,g],r))}(f,t);else if(1===h)p=function(e,t,r){var i,a=t.length,s=e.modulus.byteLength();if(a>s-11)throw Error("message too long");i=r?u.alloc(s-a-3,255):function(e){var t,r=u.allocUnsafe(e),i=0,a=n(2*e),s=0;for(;i<e;)s===a.length&&(a=n(2*e),s=0),(t=a[s++])&&(r[i++]=t);return r}(s-a-3);return new o(u.concat([u.from([0,r?1:2]),i,u.alloc(1),t],s))}(f,t,d);else{if(3!==h)throw Error("unknown padding");if((p=new o(t)).cmp(f.modulus)>=0)throw Error("data too long for modulus")}return d?c(p,f):l(p,f)}}),Fp=Zf((e,t)=>{var r=Rp(),n=Lp(),i=Pp(),a=Dp(),s=Bp(),o=fh(),l=$p(),c=bh().Buffer;t.exports=function(e,t,u){var d;d=e.padding?e.padding:u?1:4;var h,p=r(e),f=p.modulus.byteLength();if(t.length>f||new a(t).cmp(p.modulus)>=0)throw Error("decryption error");h=u?l(new a(t),p):s(t,p);var m=c.alloc(f-h.length);if(h=c.concat([m,h],f),4===d)return function(e,t){var r=e.modulus.byteLength(),a=o("sha1").update(c.alloc(0)).digest(),s=a.length;if(0!==t[0])throw Error("decryption error");var l=t.slice(1,s+1),u=t.slice(s+1),d=i(l,n(u,s)),h=i(u,n(d,r-s-1));if(function(e,t){e=c.from(e),t=c.from(t);var r=0,n=e.length;e.length!==t.length&&(r++,n=Math.min(e.length,t.length));var i=-1;for(;++i<n;)r+=e[i]^t[i];return r}(a,h.slice(0,s)))throw Error("decryption error");var p=s;for(;0===h[p];)p++;if(1!==h[p++])throw Error("decryption error");return h.slice(p)}(p,h);if(1===d)return function(e,t,r){var n=t.slice(0,2),i=2,a=0;for(;0!==t[i++];)if(i>=t.length){a++;break}var s=t.slice(2,i-1);("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&a++;s.length<8&&a++;if(a)throw Error("decryption error");return t.slice(i)}(0,h,u);if(3===d)return h;throw Error("unknown padding")}}),Hp=Zf(e=>{e.publicEncrypt=Up(),e.privateDecrypt=Fp(),e.privateEncrypt=function(t,r){return e.publicEncrypt(t,r,!0)},e.publicDecrypt=function(t,r){return e.privateDecrypt(t,r,!0)}}),Gp=Zf(e=>{var t=(Xf(),Bs(sh));"function"!=typeof t.publicEncrypt&&(t=Hp()),e.publicEncrypt=t.publicEncrypt,e.privateDecrypt=t.privateDecrypt,"function"!=typeof t.privateEncrypt?e.privateEncrypt=Hp().privateEncrypt:e.privateEncrypt=t.privateEncrypt,"function"!=typeof t.publicDecrypt?e.publicDecrypt=Hp().publicDecrypt:e.publicDecrypt=t.publicDecrypt}),qp=Zf(e=>{var t=bh(),r=ph(),n=t.Buffer,i=t.kMaxLength,a=globalThis.crypto||globalThis.msCrypto,s=Math.pow(2,32)-1;function o(e,t){if("number"!=typeof e||e!=e)throw TypeError("offset must be a number");if(e>s||e<0)throw TypeError("offset must be a uint32");if(e>i||e>t)throw RangeError("offset out of range")}function l(e,t,r){if("number"!=typeof e||e!=e)throw TypeError("size must be a number");if(e>s||e<0)throw TypeError("size must be a uint32");if(e+t>r||e>i)throw RangeError("buffer too small")}function c(e,t,n,i){if(!i)return r(n).copy(e,t),e;r(n,function(r,n){if(r)return i(r);n.copy(e,t),i(null,e)})}a&&a.getRandomValues,e.randomFill=function(e,t,r,i){if(!(n.isBuffer(e)||e instanceof globalThis.Uint8Array))throw TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof t)i=t,t=0,r=e.length;else if("function"==typeof r)i=r,r=e.length-t;else if("function"!=typeof i)throw TypeError('"cb" argument must be a function');return o(t,e.length),l(r,t,e.length),c(e,t,r,i)},e.randomFillSync=function(e,t,r){typeof t>"u"&&(t=0);if(!(n.isBuffer(e)||e instanceof globalThis.Uint8Array))throw TypeError('"buf" argument must be a Buffer or Uint8Array');o(t,e.length),void 0===r&&(r=e.length-t);return l(r,t,e.length),c(e,t,r)}}),Vp=Zf((e,t)=>{var r=(Xf(),Bs(sh));"function"==typeof r.randomFill&&"function"==typeof r.randomFillSync?(e.randomFill=r.randomFill,e.randomFillSync=r.randomFillSync):t.exports=qp()}),Wp=Zf(e=>{e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=ph(),e.createHash=e.Hash=fh(),e.createHmac=e.Hmac=mh();var t=gh(),r=Object.keys(t),n=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r);e.getHashes=function(){return n};var i=Eh();e.pbkdf2=i.pbkdf2,e.pbkdf2Sync=i.pbkdf2Sync;var a=kh();e.Cipher=a.Cipher,e.createCipher=a.createCipher,e.Cipheriv=a.Cipheriv,e.createCipheriv=a.createCipheriv,e.Decipher=a.Decipher,e.createDecipher=a.createDecipher,e.Decipheriv=a.Decipheriv,e.createDecipheriv=a.createDecipheriv,e.getCiphers=a.getCiphers,e.listCiphers=a.listCiphers;var s=Sh();e.DiffieHellmanGroup=s.DiffieHellmanGroup,e.createDiffieHellmanGroup=s.createDiffieHellmanGroup,e.getDiffieHellman=s.getDiffieHellman,e.createDiffieHellman=s.createDiffieHellman,e.DiffieHellman=s.DiffieHellman;var o=Ah();e.createSign=o.createSign,e.Sign=o.Sign,e.createVerify=o.createVerify,e.Verify=o.Verify,e.createECDH=up();var l=Gp();e.publicEncrypt=l.publicEncrypt,e.privateEncrypt=l.privateEncrypt,e.publicDecrypt=l.publicDecrypt,e.privateDecrypt=l.privateDecrypt;var c=Vp();e.randomFill=c.randomFill,e.randomFillSync=c.randomFillSync,e.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/browserify/crypto-browserify")},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}}),Zp=((e,t,r)=>{r=null!=e?lh(ch(e)):{};let n=!t&&e&&e.__esModule?r:uh(r,"default",{value:e,enumerable:!0});for(let i of dh(e))hh.call(n,i)||uh(n,i,{get:()=>e[i],enumerable:!0});return n})(Wp(),1),Kp=Zp.prng,Yp=Zp.pseudoRandomBytes,Jp=Zp.rng,Xp=Zp.randomBytes,Qp=Zp.Hash,ef=Zp.createHash,tf=Zp.Hmac,rf=Zp.createHmac,nf=Zp.getHashes,af=Zp.pbkdf2,sf=Zp.pbkdf2Sync,of=Zp.Cipher,lf=Zp.createCipher,cf=Zp.Cipheriv,uf=Zp.createCipheriv,df=Zp.Decipher,hf=Zp.createDecipher,pf=Zp.Decipheriv,ff=Zp.createDecipheriv,mf=Zp.getCiphers,gf=Zp.listCiphers,vf=Zp.DiffieHellmanGroup,yf=Zp.createDiffieHellmanGroup,bf=Zp.getDiffieHellman,_f=Zp.createDiffieHellman,wf=Zp.DiffieHellman,xf=Zp.createSign,Ef=Zp.Sign,kf=Zp.createVerify,Sf=Zp.Verify,Af=Zp.createECDH,Tf=Zp.publicEncrypt,Nf=Zp.privateEncrypt,If=Zp.publicDecrypt,Mf=Zp.privateDecrypt,Cf=Zp.randomFill,jf=Zp.randomFillSync,Of=Zp.createCredentials,Rf=Zp.constants,Lf=["p192","p224","p256","p384","p521","curve25519","ed25519","secp256k1","secp224r1","prime256v1","prime192v1","ed25519","secp384r1","secp521r1"],Pf=crypto,Df=crypto}),Qf=Us((e,t)=>{var r=String,n=function(){return{isColorSupported:!1,reset:r,bold:r,dim:r,italic:r,underline:r,inverse:r,hidden:r,strikethrough:r,black:r,red:r,green:r,yellow:r,blue:r,magenta:r,cyan:r,white:r,gray:r,bgBlack:r,bgRed:r,bgGreen:r,bgYellow:r,bgBlue:r,bgMagenta:r,bgCyan:r,bgWhite:r,blackBright:r,redBright:r,greenBright:r,yellowBright:r,blueBright:r,magentaBright:r,cyanBright:r,whiteBright:r,bgBlackBright:r,bgRedBright:r,bgGreenBright:r,bgYellowBright:r,bgBlueBright:r,bgMagentaBright:r,bgCyanBright:r,bgWhiteBright:r}};t.exports=n(),t.exports.createColors=n});(e=>{e.IMAGE="image",e.VIDEO="video",e.AUDIO="audio",e.DOCUMENT="document",e.LINK="link"})($f||={}),(e=>{e.DOCUMENT="document",e.FRAGMENT="fragment",e.MESSAGE="message",e.DESCRIPTION="description",e.CUSTOM="custom"})(zf||={}),(e=>{e.OWNER="OWNER",e.ADMIN="ADMIN",e.NONE="NONE"})(Bf||={}),(e=>{e.SELF="SELF",e.DM="DM",e.GROUP="GROUP",e.VOICE_DM="VOICE_DM",e.VOICE_GROUP="VOICE_GROUP",e.FEED="FEED",e.THREAD="THREAD",e.WORLD="WORLD",e.FORUM="FORUM",e.API="API"})(Uf||={}),(e=>{e.ACTIVE="active",e.INACTIVE="inactive"})(Ff||={}),(e=>{e.WORLD_JOINED="WORLD_JOINED",e.WORLD_CONNECTED="WORLD_CONNECTED",e.WORLD_LEFT="WORLD_LEFT",e.ENTITY_JOINED="ENTITY_JOINED",e.ENTITY_LEFT="ENTITY_LEFT",e.ENTITY_UPDATED="ENTITY_UPDATED",e.ROOM_JOINED="ROOM_JOINED",e.ROOM_LEFT="ROOM_LEFT",e.MESSAGE_RECEIVED="MESSAGE_RECEIVED",e.MESSAGE_SENT="MESSAGE_SENT",e.MESSAGE_DELETED="MESSAGE_DELETED",e.CHANNEL_CLEARED="CHANNEL_CLEARED",e.VOICE_MESSAGE_RECEIVED="VOICE_MESSAGE_RECEIVED",e.VOICE_MESSAGE_SENT="VOICE_MESSAGE_SENT",e.REACTION_RECEIVED="REACTION_RECEIVED",e.POST_GENERATED="POST_GENERATED",e.INTERACTION_RECEIVED="INTERACTION_RECEIVED",e.RUN_STARTED="RUN_STARTED",e.RUN_ENDED="RUN_ENDED",e.RUN_TIMEOUT="RUN_TIMEOUT",e.ACTION_STARTED="ACTION_STARTED",e.ACTION_COMPLETED="ACTION_COMPLETED",e.EVALUATOR_STARTED="EVALUATOR_STARTED",e.EVALUATOR_COMPLETED="EVALUATOR_COMPLETED",e.MODEL_USED="MODEL_USED",e.EMBEDDING_GENERATION_REQUESTED="EMBEDDING_GENERATION_REQUESTED",e.EMBEDDING_GENERATION_COMPLETED="EMBEDDING_GENERATION_COMPLETED",e.EMBEDDING_GENERATION_FAILED="EMBEDDING_GENERATION_FAILED"})(Hf||={}),(e=>{e.DISCORD="DISCORD",e.TELEGRAM="TELEGRAM",e.TWITTER="TWITTER"})(Gf||={}),(e=>{e.OFF="OFF",e.LOCAL="LOCAL",e.DOCKER="DOCKER",e.PRODUCTION="PRODUCTION"})(qf||={}),(Vf||={}).TDX_DSTACK="tdx_dstack",(e=>{e[e.ROOM_JOINING=1]="ROOM_JOINING",e[e.SEND_MESSAGE=2]="SEND_MESSAGE",e[e.MESSAGE=3]="MESSAGE",e[e.ACK=4]="ACK",e[e.THINKING=5]="THINKING",e[e.CONTROL=6]="CONTROL"})(Wf||={});var em=Object.defineProperty,tm=(e,t)=>{for(var r in t)em(e,r,{get:t[r],enumerable:!0})},rm=class{pageContent;metadata;id;constructor(e){this.pageContent=void 0!==e.pageContent?e.pageContent.toString():"",this.metadata=e.metadata??{},this.id=e.id}},nm=$s(qs(),1);function im(e,t){return t?.[e]||nm.default(e)}function am(e,t,r){let n={};for(let i in e)Object.hasOwn(e,i)&&(n[t(i,r)]=e[i]);return n}$s(Vs(),1);function sm(e){return Array.isArray(e)?[...e]:{...e}}function om(e,t){let r=sm(e);for(let[n,i]of Object.entries(t)){let[e,...t]=n.split(".").reverse(),a=r;for(let r of t.reverse()){if(void 0===a[r])break;a[r]=sm(a[r]),a=a[r]}void 0!==a[e]&&(a[e]={lc:1,type:"secret",id:[i]})}return r}function lm(e){let t=Object.getPrototypeOf(e);return"function"!=typeof e.lc_name||"function"==typeof t.lc_name&&e.lc_name()===t.lc_name()?e.name:e.lc_name()}tm({},{Serializable:()=>cm,get_lc_unique_name:()=>lm});var cm=class e{lc_serializable=!1;lc_kwargs;static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,lm(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...t){void 0!==this.lc_serializable_keys?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([e])=>this.lc_serializable_keys?.includes(e))):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof e||"object"!=typeof this.lc_kwargs||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let t={},r={},n=Object.keys(this.lc_kwargs).reduce((e,t)=>(e[t]=t in this?this[t]:this.lc_kwargs[t],e),{});for(let e=Object.getPrototypeOf(this);e;e=Object.getPrototypeOf(e))Object.assign(t,Reflect.get(e,"lc_aliases",this)),Object.assign(r,Reflect.get(e,"lc_secrets",this)),Object.assign(n,Reflect.get(e,"lc_attributes",this));return Object.keys(r).forEach(e=>{let t=this,r=n,[i,...a]=e.split(".").reverse();for(let n of a.reverse()){if(!(n in t)||void 0===t[n])return;n in r&&void 0!==r[n]||("object"==typeof t[n]&&null!=t[n]?r[n]={}:Array.isArray(t[n])&&(r[n]=[])),t=t[n],r=r[n]}i in t&&void 0!==t[i]&&(r[i]=r[i]||t[i])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:am(Object.keys(r).length?om(n,r):n,im,t)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};var um=class extends Error{output;constructor(e,t){super(e),this.output=t}},dm=Symbol.for("ls:tracing_async_local_storage"),hm=Symbol.for("lc:context_variables"),pm=()=>globalThis[dm];function fm(e){return"object"==typeof e&&null!==e&&"type"in e&&"string"==typeof e.type&&"source_type"in e&&("url"===e.source_type||"base64"===e.source_type||"text"===e.source_type||"id"===e.source_type)}function mm({dataUrl:e,asTypedArray:t=!1}){let r,n=e.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);if(n){r=n[1].toLowerCase();let e=t?Uint8Array.from(atob(n[2]),e=>e.charCodeAt(0)):n[2];return{mime_type:r,data:e}}}function gm(e,t){return vm(e)&&e.type===t}function vm(e){return"object"==typeof e&&null!==e}function ym(e){return Array.isArray(e)}function bm(e){return"string"==typeof e}function _m(e){return"number"==typeof e}function wm(e){return e instanceof Uint8Array}function xm(e){try{return JSON.parse(e)}catch{return}}var Em=e=>e();function km(e){if("char_location"===e.type&&bm(e.document_title)&&_m(e.start_char_index)&&_m(e.end_char_index)&&bm(e.cited_text)){let{document_title:t,start_char_index:r,end_char_index:n,cited_text:i,...a}=e;return{...a,type:"citation",source:"char",title:t??void 0,startIndex:r,endIndex:n,citedText:i}}if("page_location"===e.type&&bm(e.document_title)&&_m(e.start_page_number)&&_m(e.end_page_number)&&bm(e.cited_text)){let{document_title:t,start_page_number:r,end_page_number:n,cited_text:i,...a}=e;return{...a,type:"citation",source:"page",title:t??void 0,startIndex:r,endIndex:n,citedText:i}}if("content_block_location"===e.type&&bm(e.document_title)&&_m(e.start_block_index)&&_m(e.end_block_index)&&bm(e.cited_text)){let{document_title:t,start_block_index:r,end_block_index:n,cited_text:i,...a}=e;return{...a,type:"citation",source:"block",title:t??void 0,startIndex:r,endIndex:n,citedText:i}}if("web_search_result_location"===e.type&&bm(e.url)&&bm(e.title)&&bm(e.encrypted_index)&&bm(e.cited_text)){let{url:t,title:r,encrypted_index:n,cited_text:i,...a}=e;return{...a,type:"citation",source:"url",url:t,title:r,startIndex:Number(n),endIndex:Number(n),citedText:i}}if("search_result_location"===e.type&&bm(e.source)&&bm(e.title)&&_m(e.start_block_index)&&_m(e.end_block_index)&&bm(e.cited_text)){let{source:t,title:r,start_block_index:n,end_block_index:i,cited_text:a,...s}=e;return{...s,type:"citation",source:"search",url:t,title:r??void 0,startIndex:n,endIndex:i,citedText:a}}}function Sm(e){if(gm(e,"document")&&vm(e.source)&&"type"in e.source){if("base64"===e.source.type&&bm(e.source.media_type)&&bm(e.source.data))return{type:"file",mimeType:e.source.media_type,data:e.source.data};if("url"===e.source.type&&bm(e.source.url))return{type:"file",url:e.source.url};if("file"===e.source.type&&bm(e.source.file_id))return{type:"file",fileId:e.source.file_id};if("text"===e.source.type&&bm(e.source.data))return{type:"file",mimeType:String(e.source.media_type??"text/plain"),data:e.source.data}}else if(gm(e,"image")&&vm(e.source)&&"type"in e.source){if("base64"===e.source.type&&bm(e.source.media_type)&&bm(e.source.data))return{type:"image",mimeType:e.source.media_type,data:e.source.data};if("url"===e.source.type&&bm(e.source.url))return{type:"image",url:e.source.url};if("file"===e.source.type&&bm(e.source.file_id))return{type:"image",fileId:e.source.file_id}}}function Am(e){return Array.from(function*(){for(let t of e){let e=Sm(t);e?yield e:yield t}}())}function Tm(e){return Array.from(function*(){let t="string"==typeof e.content?[{type:"text",text:e.content}]:e.content;for(let r of t){if(gm(r,"text")&&bm(r.text)){let{text:e,citations:t,...n}=r;if(ym(t)&&t.length){let r=t.reduce((e,t)=>{let r=km(t);return r?[...e,r]:e},[]);yield{...n,type:"text",text:e,annotations:r};continue}yield{...n,type:"text",text:e};continue}if(gm(r,"thinking")&&bm(r.thinking)){let{thinking:e,signature:t,...n}=r;yield{...n,type:"reasoning",reasoning:e,signature:t};continue}if(gm(r,"redacted_thinking"))yield{type:"non_standard",value:r};else if(gm(r,"tool_use")&&bm(r.name)&&bm(r.id))yield{type:"tool_call",id:r.id,name:r.name,args:r.input};else{if(gm(r,"input_json_delta")){if(Im(e)&&e.tool_call_chunks?.length){let t=e.tool_call_chunks[0];yield{type:"tool_call_chunk",id:t.id,name:t.name,args:t.args,index:t.index};continue}}else if(gm(r,"server_tool_use")&&bm(r.name)&&bm(r.id)){let{name:e,id:t}=r;if("web_search"===e){let e=Em(()=>{if("string"==typeof r.input)return r.input;if(vm(r.input)&&bm(r.input.query))return r.input.query;if(bm(r.partial_json)){let e=xm(r.partial_json);if(e?.query)return e.query}return""});yield{id:t,type:"server_tool_call",name:"web_search",args:{query:e}};continue}if("code_execution"===r.name){let e=Em(()=>{if("string"==typeof r.input)return r.input;if(vm(r.input)&&bm(r.input.code))return r.input.code;if(bm(r.partial_json)){let e=xm(r.partial_json);if(e?.code)return e.code}return""});yield{id:t,type:"server_tool_call",name:"code_execution",args:{code:e}};continue}}else{if(gm(r,"web_search_tool_result")&&bm(r.tool_use_id)&&ym(r.content)){let{content:e,tool_use_id:t}=r,n=e.reduce((e,t)=>gm(t,"web_search_result")?[...e,t.url]:e,[]);yield{type:"server_tool_call_result",name:"web_search",toolCallId:t,status:"success",output:{urls:n}};continue}if(gm(r,"code_execution_tool_result")&&bm(r.tool_use_id)&&vm(r.content)){yield{type:"server_tool_call_result",name:"code_execution",toolCallId:r.tool_use_id,status:"success",output:r.content};continue}if(gm(r,"mcp_tool_use")){yield{id:r.id,type:"server_tool_call",name:"mcp_tool_use",args:r.input};continue}if(gm(r,"mcp_tool_result")&&bm(r.tool_use_id)&&vm(r.content)){yield{type:"server_tool_call_result",name:"mcp_tool_use",toolCallId:r.tool_use_id,status:"success",output:r.content};continue}if(gm(r,"container_upload")){yield{type:"server_tool_call",name:"container_upload",args:r.input};continue}if(gm(r,"search_result")){yield{id:r.id,type:"non_standard",value:r};continue}if(gm(r,"tool_result")){yield{id:r.id,type:"non_standard",value:r};continue}{let e=Sm(r);if(e){yield e;continue}}}yield{type:"non_standard",value:r}}}}())}var Nm={translateContent:Tm,translateContentChunk:Tm};function Im(e){return"function"==typeof e?._getType&&"function"==typeof e.concat&&"ai"===e._getType()}function Mm(e){return function(e){return fm(e)&&"url"===e.source_type&&"url"in e&&"string"==typeof e.url}(e)?{type:e.type,mimeType:e.mime_type,url:e.url,metadata:e.metadata}:function(e){return fm(e)&&"base64"===e.source_type&&"data"in e&&"string"==typeof e.data}(e)?{type:e.type,mimeType:e.mime_type??"application/octet-stream",data:e.data,metadata:e.metadata}:function(e){return fm(e)&&"id"===e.source_type&&"id"in e&&"string"==typeof e.id}(e)?{type:e.type,mimeType:e.mime_type,fileId:e.id,metadata:e.metadata}:e}function Cm(e){return e.map(Mm)}function jm(e){return!(!gm(e,"image_url")||!vm(e.image_url))||(!(!gm(e,"input_audio")||!vm(e.input_audio))||!(!gm(e,"file")||!vm(e.file)))}function Om(e){if(gm(e,"image_url")&&vm(e.image_url)&&bm(e.image_url.url)){let t=mm({dataUrl:e.image_url.url});return t?{type:"image",mimeType:t.mime_type,data:t.data}:{type:"image",url:e.image_url.url}}if(gm(e,"input_audio")&&vm(e.input_audio)&&bm(e.input_audio.data)&&bm(e.input_audio.format))return{type:"audio",data:e.input_audio.data,mimeType:`audio/${e.input_audio.format}`};if(gm(e,"file")&&vm(e.file)&&bm(e.file.data)){let t=mm({dataUrl:e.file.data});if(t)return{type:"file",data:t.data,mimeType:t.mime_type};if(bm(e.file.file_id))return{type:"file",fileId:e.file.file_id}}return e}function Rm(e){let t=[];for(let r of e)jm(r)?t.push(Om(r)):t.push(r);return t}function Lm(e){if("url_citation"===e.type){let{url:t,title:r,start_index:n,end_index:i}=e;return{type:"citation",url:t,title:r,startIndex:n,endIndex:i}}if("file_citation"===e.type){let{file_id:t,filename:r,index:n}=e;return{type:"citation",title:r,startIndex:n,endIndex:n,fileId:t}}return e}function Pm(e){return Array.from(function*(){vm(e.additional_kwargs?.reasoning)&&ym(e.additional_kwargs.reasoning.summary)&&(yield{type:"reasoning",reasoning:e.additional_kwargs.reasoning.summary.reduce((e,t)=>vm(t)&&bm(t.text)?`${e}${t.text}`:e,"")});let t="string"==typeof e.content?[{type:"text",text:e.content}]:e.content;for(let e of t)if(gm(e,"text")){let{text:t,annotations:r,...n}=e;Array.isArray(r)?yield{...n,type:"text",text:String(t),annotations:r.map(Lm)}:yield{...n,type:"text",text:String(t)}}for(let r of e.tool_calls??[])yield{type:"tool_call",id:r.id,name:r.name,args:r.args};if(vm(e.additional_kwargs)&&ym(e.additional_kwargs.tool_outputs))for(let r of e.additional_kwargs.tool_outputs)if(gm(r,"web_search_call"))yield{id:r.id,type:"server_tool_call",name:"web_search",args:{query:r.query}};else if(gm(r,"file_search_call"))yield{id:r.id,type:"server_tool_call",name:"file_search",args:{query:r.query}};else if(gm(r,"computer_call"))yield{type:"non_standard",value:r};else if(gm(r,"code_interpreter_call")){if(bm(r.code)&&(yield{id:r.id,type:"server_tool_call",name:"code_interpreter",args:{code:r.code}}),ym(r.outputs)){let e=Em(()=>{if("in_progress"!==r.status){if("completed"===r.status)return 0;if("incomplete"===r.status)return 127;if("interpreting"!==r.status)return"failed"===r.status?1:void 0}});for(let t of r.outputs)if(gm(t,"logs")){yield{type:"server_tool_call_result",toolCallId:r.id??"",status:"success",output:{type:"code_interpreter_output",returnCode:e??0,stderr:[0,void 0].includes(e)?void 0:String(t.logs),stdout:[0,void 0].includes(e)?String(t.logs):void 0}};continue}}}else gm(r,"mcp_call")?yield{id:r.id,type:"server_tool_call",name:"mcp_call",args:r.input}:gm(r,"mcp_list_tools")?yield{id:r.id,type:"server_tool_call",name:"mcp_list_tools",args:r.input}:(gm(r,"mcp_approval_request")||gm(r,"image_generation_call")||vm(r))&&(yield{type:"non_standard",value:r})}())}var Dm={translateContent:e=>"string"==typeof e.content?function(e){let t=[];"string"==typeof e.content?t.push({type:"text",text:e.content}):t.push(...Rm(e.content));for(let r of e.tool_calls??[])t.push({type:"tool_call",id:r.id,name:r.name,args:r.args});return t}(e):Pm(e),translateContentChunk:e=>"string"==typeof e.content?function(e){let t=[];"string"==typeof e.content?t.push({type:"text",text:e.content}):t.push(...Rm(e.content));for(let r of e.tool_calls??[])t.push({type:"tool_call",id:r.id,name:r.name,args:r.args});return t}(e):function(e){return Array.from(function*(){yield*Pm(e);for(let t of e.tool_call_chunks??[])yield{type:"tool_call_chunk",id:t.id,name:t.name,args:t.args}}())}(e)};function $m(e,t="pretty"){return"pretty"===t?function(e){let t=[],r=` ${e.type.charAt(0).toUpperCase()+e.type.slice(1)} Message `,n=Math.floor((80-r.length)/2),i="=".repeat(n),a=r.length%2==0?i:`${i}=`;if(t.push(`${i}${r}${a}`),"ai"===e.type){let r=e;if(r.tool_calls&&r.tool_calls.length>0){t.push("Tool Calls:");for(let e of r.tool_calls){t.push(`  ${e.name} (${e.id})`),t.push(` Call ID: ${e.id}`),t.push("  Args:");for(let[r,n]of Object.entries(e.args))t.push(`    ${r}: ${n}`)}}}if("tool"===e.type){let r=e;r.name&&t.push(`Name: ${r.name}`)}"string"==typeof e.content&&e.content.trim()&&(t.length>1&&t.push(""),t.push(e.content));return t.join("\n")}(e):JSON.stringify(e)}var zm=Symbol.for("langchain.message");function Bm(e,t){return"string"==typeof e?""===e?t:"string"==typeof t?e+t:Array.isArray(t)&&t.some(e=>fm(e))?[{type:"text",source_type:"text",text:e},...t]:[{type:"text",text:e},...t]:Array.isArray(t)?Gm(e,t)??[...e,...t]:""===t?e:Array.isArray(e)&&e.some(e=>fm(e))?[...e,{type:"file",source_type:"text",text:t}]:[...e,{type:"text",text:t}]}function Um(e,t){return"error"===e||"error"===t?"error":"success"}var Fm=class extends cm{lc_namespace=["langchain_core","messages"];lc_serializable=!0;get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}[zm]=!0;id;name;content;additional_kwargs;response_metadata;_getType(){return this.type}getType(){return this._getType()}constructor(e){let t="string"==typeof e||Array.isArray(e)?{content:e}:e;t.additional_kwargs||(t.additional_kwargs={}),t.response_metadata||(t.response_metadata={}),super(t),this.name=t.name,void 0===t.content&&void 0!==t.contentBlocks?(this.content=t.contentBlocks,this.response_metadata={output_version:"v1",...t.response_metadata}):void 0!==t.content?(this.content=t.content??[],this.response_metadata=t.response_metadata):(this.content=[],this.response_metadata=t.response_metadata),this.additional_kwargs=t.additional_kwargs,this.id=t.id}get text(){return"string"==typeof this.content?this.content:Array.isArray(this.content)?this.content.map(e=>"string"==typeof e?e:"text"===e.type?e.text:"").join(""):""}get contentBlocks(){let e="string"==typeof this.content?[{type:"text",text:this.content}]:this.content;return[Cm,Rm,Am].reduce((e,t)=>t(e),e)}toDict(){return{type:this.getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}static isInstance(e){return"object"==typeof e&&null!==e&&zm in e&&!0===e[zm]&&function(e){return"object"==typeof e&&null!==e&&"type"in e&&"content"in e&&("string"==typeof e.content||Array.isArray(e.content))}(e)}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(null===e)return this;let t=function(e,t){return JSON.stringify(function e(r,n){if("object"!=typeof r||null==r)return r;if(n>=t)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(t=>e(t,n+1));let i={};for(let t of Object.keys(r))i[t]=e(r[t],n+1);return i}(e,0),null,2)}(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${t}`}toFormattedString(e="pretty"){return $m(this,e)}};function Hm(e={},t={}){let r={...e};for(let[n,i]of Object.entries(t))if(null==r[n])r[n]=i;else{if(null==i)continue;if(typeof r[n]!=typeof i||Array.isArray(r[n])!==Array.isArray(i))throw Error(`field[${n}] already exists in the message chunk, but with a different type.`);if("string"==typeof r[n]){if("type"===n)continue;["id","name","output_version","model_provider"].includes(n)?r[n]=i:r[n]+=i}else if("object"!=typeof r[n]||Array.isArray(r[n]))if(Array.isArray(r[n]))r[n]=Gm(r[n],i);else{if(r[n]===i)continue;console.warn(`field[${n}] already exists in this message chunk and value has unsupported type.`)}else r[n]=Hm(r[n],i)}return r}function Gm(e,t){if(void 0!==e||void 0!==t){if(void 0===e||void 0===t)return e||t;{let r=[...e];for(let e of t)if("object"==typeof e&&null!==e&&"index"in e&&"number"==typeof e.index){let t=r.findIndex(t=>{let r="object"==typeof t,n="index"in t&&t.index===e.index;return r&&n&&("id"in t&&"id"in e&&t?.id===e?.id||!("id"in t&&t?.id&&"id"in e&&e?.id))});-1!==t&&"object"==typeof r[t]&&null!==r[t]?r[t]=Hm(r[t],e):r.push(e)}else{if("object"==typeof e&&null!==e&&"text"in e&&""===e.text)continue;r.push(e)}return r}}}function qm(e,t){if(!e&&!t)throw Error("Cannot merge two undefined objects.");if(e&&t){if(typeof e!=typeof t)throw Error(`Cannot merge objects of different types.\nLeft ${typeof e}\nRight ${typeof t}`);if("string"==typeof e&&"string"==typeof t)return e+t;if(Array.isArray(e)&&Array.isArray(t))return Gm(e,t);if("object"==typeof e&&"object"==typeof t)return Hm(e,t);if(e===t)return e;throw Error(`Can not merge objects of different types.\nLeft ${e}\nRight ${t}`)}return e||t}var Vm=class extends Fm{static isInstance(e){return super.isInstance(e)&&"concat"in e&&"function"==typeof e.concat}};function Wm(e){return null!=e&&"object"==typeof e&&"lc_direct_tool_output"in e&&!0===e.lc_direct_tool_output}tm({},{ToolMessage:()=>Zm,ToolMessageChunk:()=>Km,defaultToolCallParser:()=>Ym,isDirectToolOutput:()=>Wm,isToolMessage:()=>Jm,isToolMessageChunk:()=>Xm});var Zm=class extends Fm{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}lc_direct_tool_output=!0;type="tool";status;tool_call_id;metadata;artifact;constructor(e,t,r){let n="string"==typeof e||Array.isArray(e)?{content:e,name:r,tool_call_id:t}:e;super(n),this.tool_call_id=n.tool_call_id,this.artifact=n.artifact,this.status=n.status,this.metadata=n.metadata}static isInstance(e){return super.isInstance(e)&&"tool"===e.type}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}},Km=class extends Vm{type="tool";tool_call_id;status;artifact;constructor(e){super(e),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}concat(e){return new this.constructor({content:Bm(this.content,e.content),additional_kwargs:Hm(this.additional_kwargs,e.additional_kwargs),response_metadata:Hm(this.response_metadata,e.response_metadata),artifact:qm(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:Um(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function Ym(e){let t=[],r=[];for(let n of e){if(!n.function)continue;{let e=n.function.name;try{let r=JSON.parse(n.function.arguments);t.push({name:e||"",args:r||{},id:n.id})}catch{r.push({name:e,args:n.function.arguments,id:n.id,error:"Malformed args."})}}}return[t,r]}function Jm(e){return"object"==typeof e&&null!==e&&"getType"in e&&"function"==typeof e.getType&&"tool"===e.getType()}function Xm(e){return"tool"===e._getType()}function Qm(e){if(typeof e>"u")return null;try{return JSON.parse(e)}catch{}let t="",r=[],n=!1,i=!1;for(let a of e){if(n)'"'!==a||i?"\n"!==a||i?i="\\"===a&&!i:a="\\n":n=!1;else if('"'===a)n=!0,i=!1;else if("{"===a)r.push("}");else if("["===a)r.push("]");else if("}"===a||"]"===a){if(!r||r[r.length-1]!==a)return null;r.pop()}t+=a}n&&(t+='"');for(let a=r.length-1;a>=0;a-=1)t+=r[a];try{return JSON.parse(t)}catch{return null}}function eg(e){switch(e){case"csv":return"text/csv";case"doc":case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document";case"html":return"text/html";case"md":return"text/markdown";case"pdf":return"application/pdf";case"txt":return"text/plain";case"xls":return"application/vnd.ms-excel";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"gif":return"image/gif";case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";case"flv":return"video/flv";case"mkv":return"video/mkv";case"mov":return"video/mov";case"mp4":return"video/mp4";case"mpeg":return"video/mpeg";case"mpg":return"video/mpg";case"three_gp":return"video/three_gp";case"webm":return"video/webm";case"wmv":return"video/wmv";default:return"application/octet-stream"}}function tg(e){if(vm(e.document)&&vm(e.document.source)){let t=eg(vm(e.document)&&bm(e.document.format)?e.document.format:"");if(vm(e.document.source)){if(vm(e.document.source.s3Location)&&bm(e.document.source.s3Location.uri))return{type:"file",mimeType:t,fileId:e.document.source.s3Location.uri};if(wm(e.document.source.bytes))return{type:"file",mimeType:t,data:e.document.source.bytes};if(bm(e.document.source.text))return{type:"file",mimeType:t,data:Buffer.from(e.document.source.text).toString("base64")};if(ym(e.document.source.content)){let r=e.document.source.content.reduce((e,t)=>vm(t)&&bm(t.text)?e+t.text:e,"");return{type:"file",mimeType:t,data:r}}}}return{type:"non_standard",value:e}}function rg(e){if(gm(e,"image")&&vm(e.image)){let t=eg(vm(e.image)&&bm(e.image.format)?e.image.format:"");if(vm(e.image.source)){if(vm(e.image.source.s3Location)&&bm(e.image.source.s3Location.uri))return{type:"image",mimeType:t,fileId:e.image.source.s3Location.uri};if(wm(e.image.source.bytes))return{type:"image",mimeType:t,data:e.image.source.bytes}}}return{type:"non_standard",value:e}}function ng(e){if(gm(e,"video")&&vm(e.video)){let t=eg(vm(e.video)&&bm(e.video.format)?e.video.format:"");if(vm(e.video.source)){if(vm(e.video.source.s3Location)&&bm(e.video.source.s3Location.uri))return{type:"video",mimeType:t,fileId:e.video.source.s3Location.uri};if(wm(e.video.source.bytes))return{type:"video",mimeType:t,data:e.video.source.bytes}}}return{type:"non_standard",value:e}}function ig(e){return Array.from(function*(){let t="string"==typeof e.content?[{type:"text",text:e.content}]:e.content;for(let e of t)if(gm(e,"cache_point"))yield{type:"non_standard",value:e};else{if(gm(e,"citations_content")&&vm(e.citationsContent)){let t=ym(e.citationsContent.content)?e.citationsContent.content.reduce((e,t)=>vm(t)&&bm(t.text)?e+t.text:e,""):"",r=ym(e.citationsContent.citations)?e.citationsContent.citations.reduce((e,t)=>{if(vm(t)){let r=ym(t.sourceContent)?t.sourceContent.reduce((e,t)=>vm(t)&&bm(t.text)?e+t.text:e,""):"",n=Em(()=>{if(vm(t.location)){let e=t.location.documentChar||t.location.documentPage||t.location.documentChunk;if(vm(e))return{source:_m(e.documentIndex)?e.documentIndex.toString():void 0,startIndex:_m(e.start)?e.start:void 0,endIndex:_m(e.end)?e.end:void 0}}return{}});e.push({type:"citation",citedText:r,...n})}return e},[]):[];yield{type:"text",text:t,annotations:r};continue}gm(e,"document")&&vm(e.document)?yield tg(e):gm(e,"guard_content")?yield{type:"non_standard",value:e}:gm(e,"image")&&vm(e.image)?yield rg(e):gm(e,"reasoning_content")&&bm(e.reasoningText)?yield{type:"reasoning",reasoning:e.reasoningText}:gm(e,"text")&&bm(e.text)?yield{type:"text",text:e.text}:gm(e,"tool_result")?yield{type:"non_standard",value:e}:gm(e,"tool_call")||(gm(e,"video")&&vm(e.video)?yield ng(e):yield{type:"non_standard",value:e})}}())}var ag={translateContent:ig,translateContentChunk:ig};function sg(e){return Array.from(function*(){let t="string"==typeof e.content?[{type:"text",text:e.content}]:e.content;for(let r of t)gm(r,"text")&&bm(r.text)?yield{type:"text",text:r.text}:gm(r,"inlineData")&&vm(r.inlineData)&&bm(r.inlineData.mimeType)&&bm(r.inlineData.data)?yield{type:"file",mimeType:r.inlineData.mimeType,data:r.inlineData.data}:gm(r,"functionCall")&&vm(r.functionCall)&&bm(r.functionCall.name)&&vm(r.functionCall.args)?yield{type:"tool_call",id:e.id,name:r.functionCall.name,args:r.functionCall.args}:gm(r,"functionResponse")?yield{type:"non_standard",value:r}:gm(r,"fileData")&&vm(r.fileData)&&bm(r.fileData.mimeType)&&bm(r.fileData.fileUri)?yield{type:"file",mimeType:r.fileData.mimeType,fileId:r.fileData.fileUri}:(gm(r,"executableCode")||gm(r,"codeExecutionResult"),yield{type:"non_standard",value:r})}())}var og={translateContent:sg,translateContentChunk:sg};function lg(e){return Array.from(function*(){let t="string"==typeof e.content?[{type:"text",text:e.content}]:e.content;for(let r of t){if(gm(r,"reasoning")&&bm(r.reasoning)){let n=Em(()=>{let n=t.indexOf(r);if(ym(e.additional_kwargs?.signatures)&&n>=0)return e.additional_kwargs.signatures.at(n)});bm(n)?yield{type:"reasoning",reasoning:r.reasoning,signature:n}:yield{type:"reasoning",reasoning:r.reasoning};continue}if(gm(r,"text")&&bm(r.text))yield{type:"text",text:r.text};else if(gm(r,"image_url")){if(bm(r.image_url))if(r.image_url.startsWith("data:")){let e=/^data:([^;]+);base64,(.+)$/,t=r.image_url.match(e);t?yield{type:"image",data:t[2],mimeType:t[1]}:yield{type:"image",url:r.image_url}}else yield{type:"image",url:r.image_url}}else gm(r,"media")&&bm(r.mimeType)&&bm(r.data)?yield{type:"file",mimeType:r.mimeType,data:r.data}:yield{type:"non_standard",value:r}}}())}var cg={translateContent:lg,translateContentChunk:lg};function ug(e,t){return Hm(e??{},t??{})}function dg(e,t){let r={};return void 0===e?.audio&&void 0===t?.audio||(r.audio=(e?.audio??0)+(t?.audio??0)),void 0===e?.image&&void 0===t?.image||(r.image=(e?.image??0)+(t?.image??0)),void 0===e?.video&&void 0===t?.video||(r.video=(e?.video??0)+(t?.video??0)),void 0===e?.document&&void 0===t?.document||(r.document=(e?.document??0)+(t?.document??0)),void 0===e?.text&&void 0===t?.text||(r.text=(e?.text??0)+(t?.text??0)),r}function hg(e,t){let r={...dg(e,t)};return void 0===e?.cache_read&&void 0===t?.cache_read||(r.cache_read=(e?.cache_read??0)+(t?.cache_read??0)),void 0===e?.cache_creation&&void 0===t?.cache_creation||(r.cache_creation=(e?.cache_creation??0)+(t?.cache_creation??0)),r}function pg(e,t){let r={...dg(e,t)};return void 0===e?.reasoning&&void 0===t?.reasoning||(r.reasoning=(e?.reasoning??0)+(t?.reasoning??0)),r}globalThis.lc_block_translators_registry??=new Map([["anthropic",Nm],["bedrock-converse",ag],["google-genai",og],["google-vertexai",cg],["openai",Dm]]);var fg=class extends Vm{type="ai";tool_calls=[];invalid_tool_calls=[];tool_call_chunks=[];usage_metadata;constructor(e){let t;if("string"==typeof e||Array.isArray(e))t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(void 0===e.tool_call_chunks||0===e.tool_call_chunks.length)t={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:void 0!==e.usage_metadata?e.usage_metadata:void 0};else{let r=(e.tool_call_chunks??[]).reduce((e,t)=>{let r=e.findIndex(([e])=>"id"in t&&t.id&&"index"in t&&void 0!==t.index?t.id===e.id&&t.index===e.index:"id"in t&&t.id?t.id===e.id:"index"in t&&void 0!==t.index&&t.index===e.index);return-1!==r?e[r].push(t):e.push([t]),e},[]),n=[],i=[];for(let e of r){let t=null,r=e[0]?.name??"",a=e.map(e=>e.args||"").join(""),s=a.length?a:"{}",o=e[0]?.id;try{if(t=Qm(s),!o||null===t||"object"!=typeof t||Array.isArray(t))throw Error("Malformed tool call chunk args.");n.push({name:r,args:t,id:o,type:"tool_call"})}catch{i.push({name:r,args:s,id:o,error:"Malformed args.",type:"invalid_tool_call"})}}t={...e,tool_calls:n,invalid_tool_calls:i,usage_metadata:void 0!==e.usage_metadata?e.usage_metadata:void 0}}super(t),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}get contentBlocks(){if(this.response_metadata&&"output_version"in this.response_metadata&&"v1"===this.response_metadata.output_version)return this.content;if(this.response_metadata&&"model_provider"in this.response_metadata&&"string"==typeof this.response_metadata.model_provider){let e=function(e){return globalThis.lc_block_translators_registry.get(e)}(this.response_metadata.model_provider);if(e)return e.translateContent(this)}let e=super.contentBlocks;if(this.tool_calls&&"string"!=typeof this.content){let t=this.content.filter(e=>"tool_call"===e.type).map(e=>e.id);for(let r of this.tool_calls)r.id&&!t.includes(r.id)&&e.push({...r,type:"tool_call",id:r.id,name:r.name,args:r.args})}return e}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){let t={content:Bm(this.content,e.content),additional_kwargs:Hm(this.additional_kwargs,e.additional_kwargs),response_metadata:ug(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(void 0!==this.tool_call_chunks||void 0!==e.tool_call_chunks){let r=Gm(this.tool_call_chunks,e.tool_call_chunks);void 0!==r&&r.length>0&&(t.tool_call_chunks=r)}return void 0===this.usage_metadata&&void 0===e.usage_metadata||(t.usage_metadata=function(e,t){return{input_tokens:(e?.input_tokens??0)+(t?.input_tokens??0),output_tokens:(e?.output_tokens??0)+(t?.output_tokens??0),total_tokens:(e?.total_tokens??0)+(t?.total_tokens??0),input_token_details:hg(e?.input_token_details,t?.input_token_details),output_token_details:pg(e?.output_token_details,t?.output_token_details)}}(this.usage_metadata,e.usage_metadata)),new this.constructor(t)}static isInstance(e){return super.isInstance(e)&&"ai"===e.type}};tm({},{getEnv:()=>wg,getEnvironmentVariable:()=>Eg,getRuntimeEnvironment:()=>xg,isBrowser:()=>gg,isDeno:()=>bg,isJsDom:()=>yg,isNode:()=>_g,isWebWorker:()=>vg});var mg,gg=()=>typeof window<"u"&&typeof window.document<"u",vg=()=>"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name,yg=()=>typeof window<"u"&&"nodejs"===window.name||typeof navigator<"u"&&navigator.userAgent.includes("jsdom"),bg=()=>typeof Deno<"u",_g=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!bg(),wg=()=>{let e;return e=gg()?"browser":_g()?"node":vg()?"webworker":yg()?"jsdom":bg()?"deno":"other",e};function xg(){return void 0===mg&&(mg={library:"langchain-js",runtime:wg()}),mg}function Eg(e){try{return typeof process<"u"?Cs?.[e]:bg()?Deno?.env.get(e):void 0}catch{return}}var kg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;var Sg,Ag=function(e){return"string"==typeof e&&kg.test(e)},Tg=[];for(Sg=0;Sg<256;++Sg)Tg.push((Sg+256).toString(16).slice(1));var Ng,Ig=new Uint8Array(16);function Mg(){if(!Ng&&!(Ng=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ng(Ig)}var Cg={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var jg=function(e,t,r){if(Cg.randomUUID&&!t&&!e)return Cg.randomUUID();var n=(e=e||{}).random||(e.rng||Mg)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return function(e,t=0){return(Tg[e[t+0]]+Tg[e[t+1]]+Tg[e[t+2]]+Tg[e[t+3]]+"-"+Tg[e[t+4]]+Tg[e[t+5]]+"-"+Tg[e[t+6]]+Tg[e[t+7]]+"-"+Tg[e[t+8]]+Tg[e[t+9]]+"-"+Tg[e[t+10]]+Tg[e[t+11]]+Tg[e[t+12]]+Tg[e[t+13]]+Tg[e[t+14]]+Tg[e[t+15]]).toLowerCase()}(n)};tm({},{BaseCallbackHandler:()=>Pg,callbackHandlerPrefersStreaming:()=>Rg,isBaseCallbackHandler:()=>Dg});var Og=class{};function Rg(e){return"lc_prefer_streaming"in e&&e.lc_prefer_streaming}var Lg,Pg=class extends Og{lc_serializable=!1;get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,lm(this.constructor)]}lc_kwargs;ignoreLLM=!1;ignoreChain=!1;ignoreAgent=!1;ignoreRetriever=!1;ignoreCustomEvent=!1;raiseError=!1;awaitHandlers="false"===Eg("LANGCHAIN_CALLBACKS_BACKGROUND");constructor(e){super(),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return cm.prototype.toJSON.call(this)}toJSONNotImplemented(){return cm.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){return new class extends Pg{name=jg();constructor(){super(),Object.assign(this,e)}}}},Dg=e=>{let t=e;return void 0!==t&&"function"==typeof t.copy&&"string"==typeof t.name&&"boolean"==typeof t.awaitHandlers},$g=[];for(Lg=0;Lg<256;++Lg)$g.push((Lg+256).toString(16).slice(1));function zg(e,t=0){return($g[e[t+0]]+$g[e[t+1]]+$g[e[t+2]]+$g[e[t+3]]+"-"+$g[e[t+4]]+$g[e[t+5]]+"-"+$g[e[t+6]]+$g[e[t+7]]+"-"+$g[e[t+8]]+$g[e[t+9]]+"-"+$g[e[t+10]]+$g[e[t+11]]+$g[e[t+12]]+$g[e[t+13]]+$g[e[t+14]]+$g[e[t+15]]).toLowerCase()}var Bg,Ug=new Uint8Array(16);function Fg(){if(!Bg&&!(Bg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bg(Ug)}var Hg={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var Gg=function(e,t,r){if(Hg.randomUUID&&!t&&!e)return Hg.randomUUID();var n=(e=e||{}).random||(e.rng||Fg)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return zg(n)},qg=null,Vg=null,Wg=0;var Zg=function(e,t,r){e=e||{};var n=t&&r||0,i=t||new Uint8Array(16),a=e.random||(e.rng||Fg)(),s=void 0!==e.msecs?e.msecs:Date.now(),o=void 0!==e.seq?e.seq:null,l=Vg,c=qg;return s>Wg&&void 0===e.msecs&&(Wg=s,null!==o&&(l=null,c=null)),null!==o&&(o>2147483647&&(o=2147483647),l=o>>>19&4095,c=524287&o),null!==l&&null!==c||(l=(l=127&a[6])<<8|a[7],c=(c=(c=63&a[8])<<8|a[9])<<5|a[10]>>>3),s+1e4>Wg&&null===o?++c>524287&&(c=0,++l>4095&&(l=0,Wg++)):Wg=s,Vg=l,qg=c,i[n++]=Wg/1099511627776&255,i[n++]=Wg/4294967296&255,i[n++]=Wg/16777216&255,i[n++]=Wg/65536&255,i[n++]=Wg/256&255,i[n++]=255&Wg,i[n++]=l>>>4&15|112,i[n++]=255&l,i[n++]=c>>>13&63|128,i[n++]=c>>>5&255,i[n++]=c<<3&255|7&a[10],i[n++]=a[11],i[n++]=a[12],i[n++]=a[13],i[n++]=a[14],i[n++]=a[15],t||zg(i)},Kg="gen_ai.request.model",Yg="gen_ai.usage.input_tokens",Jg="gen_ai.usage.output_tokens",Xg="gen_ai.usage.total_tokens",Qg="langsmith.span.tags",ev=(...e)=>fetch(...e),tv=Symbol.for("ls:fetch_implementation"),rv=e=>async(...t)=>{if(e||"true"===bv("DEBUG")){let[e,r]=t;console.log(` ${r?.method||"GET"} ${e}`)}let r=await(globalThis[tv]??ev)(...t);return(e||"true"===bv("DEBUG"))&&console.log(` ${r.status} ${r.statusText} ${r.url}`),r},nv=()=>bv("PROJECT")??yv("LANGCHAIN_SESSION")??"default",iv={};function av(e){iv[e]||(console.warn(e),iv[e]=!0)}var sv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,ov=!1;function lv(e,t){if(!sv.test(e)){throw Error(void 0!==t?`Invalid UUID for ${t}: ${e}`:`Invalid UUID: ${e}`)}return e}function cv(e,t){let r=function(e){if(!sv.test(e))return null;let t=e[14];return parseInt(t,16)}(e);null===r||7===r||ov||(ov=!0,av("LangSmith now uses UUID v7 for run and trace identifiers. This warning appears when passing custom IDs. Please use: import { uuidv7 } from 'langsmith'; const id = uuidv7(); Future versions will require UUID v7."))}var uv,dv,hv,pv="0.3.80",fv=()=>typeof Deno<"u",mv=()=>uv||(uv=typeof Bun<"u"?"bun":typeof window<"u"&&typeof window.document<"u"?"browser":typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!fv()?"node":"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":typeof window<"u"&&"nodejs"===window.name||typeof navigator<"u"&&navigator.userAgent.includes("jsdom")?"jsdom":fv()?"deno":"other");function gv(){if(void 0===dv){let e=mv(),t=function(){if(void 0!==hv)return hv;let e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(let r of e){let e=yv(r);void 0!==e&&(t[r]=e)}return hv=t,t}();dv={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:pv,...t}}return dv}function vv(){let e=function(){let e={};try{if(typeof process<"u"&&Cs)for(let[t,r]of Object.entries(Cs))(t.startsWith("LANGCHAIN_")||t.startsWith("LANGSMITH_"))&&null!=r&&((t.toLowerCase().includes("key")||t.toLowerCase().includes("secret")||t.toLowerCase().includes("token"))&&"string"==typeof r?e[t]=r.slice(0,2)+"*".repeat(r.length-4)+r.slice(-2):e[t]=r)}catch(t){}return e}(),t={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(let[n,i]of Object.entries(e))"string"!=typeof i||r.includes(n)||n.toLowerCase().includes("key")||n.toLowerCase().includes("secret")||n.toLowerCase().includes("token")||("LANGCHAIN_REVISION_ID"===n?t.revision_id=i:t[n]=i);return t}function yv(e){try{return typeof process<"u"?Cs?.[e]:void 0}catch(xre){return}}function bv(e){return yv(`LANGSMITH_${e}`)||yv(`LANGCHAIN_${e}`)}function _v(){return"true"===yv("OTEL_ENABLED")||"true"===bv("OTEL_ENABLED")}class wv{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...t){let r;if(!this.hasWarned&&_v()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0),1===t.length&&"function"==typeof t[0]?r=t[0]:2===t.length&&"function"==typeof t[1]?r=t[1]:3===t.length&&"function"==typeof t[2]&&(r=t[2]),"function"==typeof r)return r()}}var xv=Symbol.for("ls:otel_trace"),Ev=Symbol.for("ls:otel_context"),kv=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),Sv=new class{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new wv})}getTracer(e,t){return this.mockTracer}getActiveSpan(){}setSpan(e,t){return e}getSpan(e){}setSpanContext(e,t){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}},Av=new class{active(){return{}}with(e,t){return t()}};var Tv=new class{getTraceInstance(){return globalThis[xv]??Sv}getContextInstance(){return globalThis[Ev]??Av}initializeGlobalInstances(e){void 0===globalThis[xv]&&(globalThis[xv]=e.trace),void 0===globalThis[Ev]&&(globalThis[Ev]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[kv]=e}getDefaultOTLPTracerComponents(){return globalThis[kv]??void 0}};function Nv(){return Tv.getTraceInstance()}var Iv={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};class Mv{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,t){for(let r of e)try{if(!r.run)continue;if("post"===r.operation){let e=this.createSpanForRun(r,r.run,t.get(r.id));e&&!r.run.end_time&&this.spans.set(r.id,e)}else this.updateSpanForRun(r,r.run)}catch(Fre){console.error(`Error processing operation ${r.id}:`,Fre)}}createSpanForRun(e,t,r){let n=r&&Nv().getSpan(r);if(n)try{return this.finishSpanSetup(n,t,e)}catch(ine){return void console.error(`Failed to create span for run ${e.id}:`,ine)}}finishSpanSetup(e,t,r){return this.setSpanAttributes(e,t,r),t.error?(e.setStatus({code:2}),e.recordException(Error(t.error))):e.setStatus({code:1}),t.end_time&&e.end(new Date(t.end_time)),e}updateSpanForRun(e,t){try{let r=this.spans.get(e.id);if(!r)return void console.debug(`No span found for run ${e.id} during update`);this.setSpanAttributes(r,t,e),t.error?(r.setStatus({code:2}),r.recordException(Error(t.error))):r.setStatus({code:1});let n=t.end_time;n&&(r.end(new Date(n)),this.spans.delete(e.id))}catch(ere){console.error(`Failed to update span for run ${e.id}:`,ere)}}extractModelName(e){if(e.extra?.metadata){let t=e.extra.metadata;if(t.ls_model_name)return t.ls_model_name;if(t.invocation_params){let e=t.invocation_params;if(e.model)return e.model;if(e.model_name)return e.model_name}}}setSpanAttributes(e,t,r){if("run_type"in t&&t.run_type){e.setAttribute("langsmith.span.kind",t.run_type);let r=function(e){return Iv[e]||e}(t.run_type||"chain");e.setAttribute("gen_ai.operation.name",r)}"name"in t&&t.name&&e.setAttribute("langsmith.trace.name",t.name),"session_id"in t&&t.session_id&&e.setAttribute("langsmith.trace.session_id",t.session_id),"session_name"in t&&t.session_name&&e.setAttribute("langsmith.trace.session_name",t.session_name),this.setGenAiSystem(e,t);let n=this.extractModelName(t);n&&e.setAttribute(Kg,n),"prompt_tokens"in t&&"number"==typeof t.prompt_tokens&&e.setAttribute(Yg,t.prompt_tokens),"completion_tokens"in t&&"number"==typeof t.completion_tokens&&e.setAttribute(Jg,t.completion_tokens),"total_tokens"in t&&"number"==typeof t.total_tokens&&e.setAttribute(Xg,t.total_tokens),this.setInvocationParameters(e,t);let i=t.extra?.metadata||{};for(let[s,o]of Object.entries(i))null!=o&&e.setAttribute(`langsmith.metadata.${s}`,String(o));let a=t.tags;if(a&&Array.isArray(a)?e.setAttribute(Qg,a.join(", ")):a&&e.setAttribute(Qg,String(a)),"serialized"in t&&"object"==typeof t.serialized){let r=t.serialized;r.name&&e.setAttribute("gen_ai.serialized.name",String(r.name)),r.signature&&e.setAttribute("gen_ai.serialized.signature",String(r.signature)),r.doc&&e.setAttribute("gen_ai.serialized.doc",String(r.doc))}this.setIOAttributes(e,r)}setGenAiSystem(e,t){let r="langchain",n=this.extractModelName(t);if(n){let e=n.toLowerCase();e.includes("anthropic")||e.startsWith("claude")?r="anthropic":e.includes("bedrock")?r="aws.bedrock":e.includes("azure")&&e.includes("openai")?r="az.ai.openai":e.includes("azure")&&e.includes("inference")?r="az.ai.inference":e.includes("cohere")?r="cohere":e.includes("deepseek")?r="deepseek":e.includes("gemini")?r="gemini":e.includes("groq")?r="groq":e.includes("watson")||e.includes("ibm")?r="ibm.watsonx.ai":e.includes("mistral")?r="mistral_ai":e.includes("gpt")||e.includes("openai")?r="openai":e.includes("perplexity")||e.includes("sonar")?r="perplexity":e.includes("vertex")?r="vertex_ai":(e.includes("xai")||e.includes("grok"))&&(r="xai")}e.setAttribute("gen_ai.system",r)}setInvocationParameters(e,t){if(!t.extra?.metadata?.invocation_params)return;let r=t.extra.metadata.invocation_params;void 0!==r.max_tokens&&e.setAttribute("gen_ai.request.max_tokens",r.max_tokens),void 0!==r.temperature&&e.setAttribute("gen_ai.request.temperature",r.temperature),void 0!==r.top_p&&e.setAttribute("gen_ai.request.top_p",r.top_p),void 0!==r.frequency_penalty&&e.setAttribute("gen_ai.request.frequency_penalty",r.frequency_penalty),void 0!==r.presence_penalty&&e.setAttribute("gen_ai.request.presence_penalty",r.presence_penalty)}setIOAttributes(e,t){if(t.run.inputs)try{let r=t.run.inputs;"object"==typeof r&&null!==r&&(r.model&&Array.isArray(r.messages)&&e.setAttribute(Kg,r.model),void 0!==r.stream&&e.setAttribute("langsmith.request.streaming",r.stream),r.extra_headers&&e.setAttribute("langsmith.request.headers",JSON.stringify(r.extra_headers)),r.extra_query&&e.setAttribute("gen_ai.request.extra_query",JSON.stringify(r.extra_query)),r.extra_body&&e.setAttribute("gen_ai.request.extra_body",JSON.stringify(r.extra_body))),e.setAttribute("gen_ai.prompt",JSON.stringify(r))}catch(ere){console.debug(`Failed to process inputs for run ${t.id}`,ere)}if(t.run.outputs)try{let r=t.run.outputs,n=this.getUnifiedRunTokens(r);if(n&&(e.setAttribute(Yg,n[0]),e.setAttribute(Jg,n[1]),e.setAttribute(Xg,n[0]+n[1])),r&&"object"==typeof r){if(r.model&&e.setAttribute("gen_ai.response.model",String(r.model)),r.id&&e.setAttribute("gen_ai.response.id",r.id),r.choices&&Array.isArray(r.choices)){let t=r.choices.map(e=>e.finish_reason).filter(e=>e).map(String);t.length>0&&e.setAttribute("gen_ai.response.finish_reasons",t.join(", "))}if(r.service_tier&&e.setAttribute("gen_ai.response.service_tier",r.service_tier),r.system_fingerprint&&e.setAttribute("gen_ai.response.system_fingerprint",r.system_fingerprint),r.usage_metadata&&"object"==typeof r.usage_metadata){let t=r.usage_metadata;t.input_token_details&&e.setAttribute("gen_ai.usage.input_token_details",JSON.stringify(t.input_token_details)),t.output_token_details&&e.setAttribute("gen_ai.usage.output_token_details",JSON.stringify(t.output_token_details))}}e.setAttribute("gen_ai.completion",JSON.stringify(r))}catch(ere){console.debug(`Failed to process outputs for run ${t.id}`,ere)}}getUnifiedRunTokens(e){if(!e)return null;let t=this.extractUnifiedRunTokens(e.usage_metadata);if(t)return t;let r=Object.keys(e);for(let a of r){let r=e[a];if(r&&"object"==typeof r){if(t=this.extractUnifiedRunTokens(r.usage_metadata),t)return t;if(1===r.lc&&r.kwargs&&"object"==typeof r.kwargs&&(t=this.extractUnifiedRunTokens(r.kwargs.usage_metadata),t))return t}}let n=e.generations||[];if(!Array.isArray(n))return null;let i=Array.isArray(n[0])?n.flat():n;for(let a of i)if("object"==typeof a&&a.message&&"object"==typeof a.message&&a.message.kwargs&&"object"==typeof a.message.kwargs&&(t=this.extractUnifiedRunTokens(a.message.kwargs.usage_metadata),t))return t;return null}extractUnifiedRunTokens(e){return e&&"object"==typeof e?"number"!=typeof e.input_tokens||"number"!=typeof e.output_tokens?null:[e.input_tokens,e.output_tokens]:null}}var Cv=$s(Ks(),1),jv=$s(to(),1),Ov=[429,500,502,503,504];class Rv{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxQueueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queueSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.maxQueueSizeBytes=e.maxQueueSizeBytes,"default"in jv.default?this.queue=new jv.default.default({concurrency:this.maxConcurrency}):this.queue=new jv.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e?.onFailedResponseHook}call(e,...t){return this.callWithOptions({},e,...t)}callWithOptions(e,t,...r){let n=e.sizeBytes??0;if(void 0!==this.maxQueueSizeBytes&&n>0&&this.queueSizeBytes+n>this.maxQueueSizeBytes)return Promise.reject(Error(`Queue size limit (${this.maxQueueSizeBytes} bytes) exceeded. Current queue size: ${this.queueSizeBytes} bytes, attempted addition: ${n} bytes.`));n>0&&(this.queueSizeBytes+=n);let i=this.onFailedResponseHook,a=this.queue.add(()=>Cv.default(()=>t(...r).catch(e=>{throw e instanceof Error?e:Error(e)}),{async onFailedAttempt(e){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||"TimeoutError"===e.name||e.message.startsWith("AbortError"))throw e;if("ECONNABORTED"===e?.code)throw e;let t=e?.response;if(i&&await i(t))return;let r=t?.status??e?.status;if(r&&!Ov.includes(+r))throw e},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0});return n>0&&(a=a.finally(()=>{this.queueSizeBytes-=n})),e.signal?Promise.race([a,new Promise((t,r)=>{e.signal?.addEventListener("abort",()=>{r(Error("AbortError"))})})]):a}}function Lv(e){return"function"==typeof e?._getType}function Pv(e){let t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}function Dv(e){if(!e||e.split("/").length>2||e.startsWith("/")||e.endsWith("/")||e.split(":").length>2)throw Error(`Invalid identifier format: ${e}`);let[t,r]=e.split(":"),n=r||"latest";if(t.includes("/")){let[r,i]=t.split("/",2);if(!r||!i)throw Error(`Invalid identifier format: ${e}`);return[r,i,n]}if(!t)throw Error(`Invalid identifier format: ${e}`);return["-",t,n]}$s(Wo(),1);class $v extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function zv(e,t,r){let n;if(e.ok)return void(r&&(n=await e.text()));if(403===e.status)try{"org_scoped_key_requires_workspace"===(await e.json())?.error&&(n="This API key is org-scoped and requires workspace specification. Please provide 'workspaceId' parameter, or set LANGSMITH_WORKSPACE_ID environment variable.")}catch(J9){let r=Error(`${e.status} ${e.statusText}`);throw r.status=e?.status,r}if(void 0===n)try{n=await e.text()}catch(J9){n=""}let i=`Failed to ${t}. Received status [${e.status}]: ${e.statusText}. Message: ${n}`;if(409===e.status)throw new $v(i);let a=Error(i);throw a.status=e.status,a}var Bv="ERR_CONFLICTING_ENDPOINTS";class Uv extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:Bv}),this.name="ConflictingEndpointsError"}}var Fv="[...]",Hv={result:"[Circular]"},Gv=[],qv=[],Vv=new TextEncoder;function Wv(e){return Vv.encode(e)}function Zv(e){if(e&&"object"==typeof e&&null!==e){if(e instanceof Map)return Object.fromEntries(e);if(e instanceof Set)return Array.from(e);if(e instanceof Date)return e.toISOString();if(e instanceof RegExp)return e.toString();if(e instanceof Error)return{name:e.name,message:e.message}}else if("bigint"==typeof e)return e.toString();return e}function Kv(e,t,r,n,i){try{let t=JSON.stringify(e,function(e,t){return Zv(t)},n);return Wv(t)}catch(a){if(!a.message?.includes("Converting circular structure to JSON"))return console.warn("[WARNING]: LangSmith received unserializable value."+(t?`\nContext: ${t}`:"")),Wv("[Unserializable]");let s;"true"!==bv("SUPPRESS_CIRCULAR_JSON_WARNINGS")&&console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. "+(t?`\nContext: ${t}`:"")),typeof i>"u"&&(i={depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}),Jv(e,"",0,[],void 0,0,i);try{s=0===qv.length?JSON.stringify(e,r,n):JSON.stringify(e,function(e){return e=typeof e<"u"?e:function(e,t){return t},function(t,r){if(qv.length>0)for(var n=0;n<qv.length;n++){var i=qv[n];if(i[1]===t&&i[0]===r){r=i[2],qv.splice(n,1);break}}return e.call(this,t,r)}}(r),n)}catch($re){return Wv("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==Gv.length;){let e=Gv.pop();4===e.length?Object.defineProperty(e[0],e[1],e[3]):e[0][e[1]]=e[2]}}return Wv(s)}}function Yv(e,t,r,n){var i=Object.getOwnPropertyDescriptor(n,r);void 0!==i.get?i.configurable?(Object.defineProperty(n,r,{value:e}),Gv.push([n,r,t,i])):qv.push([t,r,e]):(n[r]=e,Gv.push([n,r,t]))}function Jv(e,t,r,n,i,a,s){var o;if(a+=1,"object"==typeof e&&null!==e){for(o=0;o<n.length;o++)if(n[o]===e)return void Yv(Hv,e,t,i);if(typeof s.depthLimit<"u"&&a>s.depthLimit)return void Yv(Fv,e,t,i);if(typeof s.edgesLimit<"u"&&r+1>s.edgesLimit)return void Yv(Fv,e,t,i);if(n.push(e),Array.isArray(e))for(o=0;o<e.length;o++)Jv(e[o],o,o,n,e,a,s);else{e=Zv(e);var l=Object.keys(e);for(o=0;o<l.length;o++){var c=l[o];Jv(e[c],c,o,n,e,a,s)}}n.pop()}}function Xv(e,t){let r=gv(),n=t??vv(),i=e.extra??{},a=i.metadata;return e.extra={...i,runtime:{...r,...i?.runtime},metadata:{...n,...n.revision_id||"revision_id"in e&&e.revision_id?{revision_id:("revision_id"in e?e.revision_id:void 0)??n.revision_id}:{},...a}},e}function Qv(e){if(void 0!==e)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}var ey=async e=>{if(429===e?.status){let t=1e3*parseInt(e.headers.get("retry-after")??"10",10);if(t>0)return await new Promise(e=>setTimeout(e,t)),!0}return!1};function ty(e){return"number"==typeof e?Number(e.toFixed(4)):e}var ry=1073741824,ny="https://api.smith.langchain.com";class iy{constructor(e){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"maxSizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSizeBytes=e??ry}peek(){return this.items[0]}push(e){let t,r=new Promise(e=>{t=e}),n=Kv(e.item,`Serializing run with id: ${e.item.id}`).length;return this.sizeBytes+n>this.maxSizeBytes&&this.items.length>0?(console.warn(`AutoBatchQueue size limit (${this.maxSizeBytes} bytes) exceeded. Dropping run with id: ${e.item.id}. Current queue size: ${this.sizeBytes} bytes, attempted addition: ${n} bytes.`),t(),r):(this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:t,itemPromise:r,size:n}),this.sizeBytes+=n,r)}pop({upToSizeBytes:e,upToSize:t}){if(e<1)throw Error("Number of bytes to pop off may not be less than 1.");let r=[],n=0;for(;n+(this.peek()?.size??0)<e&&this.items.length>0&&r.length<t;){let e=this.items.shift();e&&(r.push(e),n+=e.size,this.sizeBytes-=e.size)}if(0===r.length&&this.items.length>0){let e=this.items.shift();r.push(e),n+=e.size,this.sizeBytes-=e.size}return[r.map(e=>({action:e.action,item:e.payload,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,size:e.size})),()=>r.forEach(e=>e.itemPromiseResolve())]}}class ay{get _fetch(){return this.fetchImplementation||rv(this.debug)}constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"workspaceId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSizeLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:"false"===yv("LANGSMITH_TRACING_BACKGROUND")}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchImplementation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachedLSEnvVarsForMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:"true"===yv("LANGSMITH_DEBUG")});let t=ay.getDefaultClientConfig();if(this.tracingSampleRate=(e=>{let t=e?.toString()??bv("TRACING_SAMPLING_RATE");if(void 0===t)return;let r=parseFloat(t);if(r<0||r>1)throw Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${r}`);return r})(e.tracingSamplingRate),this.apiUrl=Qv(e.apiUrl??t.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=Qv(e.apiKey??t.apiKey),this.webUrl=Qv(e.webUrl??t.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.workspaceId=Qv(e.workspaceId??bv("WORKSPACE_ID")),this.timeout_ms=e.timeout_ms??9e4,this.caller=new Rv({...e.callerOptions??{},maxRetries:4,debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.fetchImplementation=e.fetchImplementation;let r=e.maxIngestMemoryBytes??ry;this.batchIngestCaller=new Rv({maxRetries:4,maxConcurrency:this.traceBatchConcurrency,maxQueueSizeBytes:r,...e.callerOptions??{},onFailedResponseHook:ey,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??t.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.autoBatchQueue=new iy(r),this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.batchSizeLimit=e.batchSizeLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,_v()&&(this.langSmithToOTELTranslator=new Mv),this.cachedLSEnvVarsForMetadata=vv()}static getDefaultClientConfig(){let e=bv("API_KEY");return{apiUrl:bv("ENDPOINT")??ny,apiKey:e,webUrl:void 0,hideInputs:"true"===bv("HIDE_INPUTS"),hideOutputs:"true"===bv("HIDE_OUTPUTS")}}getHostUrl(){return this.webUrl?this.webUrl:(e=>{let t=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return"localhost"===t||"127.0.0.1"===t||"::1"===t})(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){let e={"User-Agent":`langsmith-js/${pv}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),this.workspaceId&&(e["x-tenant-id"]=this.workspaceId),e}_getPlatformEndpointPath(e){return"/v1"!==this.apiUrl.slice(-3)&&"/v1/"!==this.apiUrl.slice(-4)?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return!1===this.hideInputs?e:!0===this.hideInputs?{}:"function"==typeof this.hideInputs?this.hideInputs(e):e}async processOutputs(e){return!1===this.hideOutputs?e:!0===this.hideOutputs?{}:"function"==typeof this.hideOutputs?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){let t={...e};return void 0!==t.inputs&&(t.inputs=await this.processInputs(t.inputs)),void 0!==t.outputs&&(t.outputs=await this.processOutputs(t.outputs)),t}async _getResponse(e,t){let r=t?.toString()??"",n=`${this.apiUrl}${e}?${r}`;return await this.caller.call(async()=>{let t=await this._fetch(n,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,`fetch ${e}`),t})}async _get(e,t){return(await this._getResponse(e,t)).json()}async*_getPaginated(e,t=new URLSearchParams,r){let n=Number(t.get("offset"))||0,i=Number(t.get("limit"))||100;for(;;){t.set("offset",String(n)),t.set("limit",String(i));let a=`${this.apiUrl}${e}?${t}`,s=await this.caller.call(async()=>{let t=await this._fetch(a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,`fetch ${e}`),t}),o=r?r(await s.json()):await s.json();if(0===o.length)break;if(yield o,o.length<i)break;n+=o.length}}async*_getCursorPaginatedList(e,t=null,r="POST",n="runs"){let i=t?{...t}:{};for(;;){let t=JSON.stringify(i),a=await(await this.caller.call(async()=>{let n=await this._fetch(`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:t});return await zv(n,`fetch ${e}`),n})).json();if(!a)break;if(!a[n])break;yield a[n];let s=a.cursors;if(!s)break;if(!s.next)break;i.cursor=s.next}}_shouldSample(){return void 0===this.tracingSampleRate||Math.random()<this.tracingSampleRate}_filterForSampling(e,t=!1){if(void 0===this.tracingSampleRate)return e;if(t){let t=[];for(let r of e)this.filteredPostUuids.has(r.trace_id)?r.id===r.trace_id&&this.filteredPostUuids.delete(r.trace_id):t.push(r);return t}{let t=[];for(let r of e){let e=r.trace_id??r.id;this.filteredPostUuids.has(e)||(r.id===e?this._shouldSample()?t.push(r):this.filteredPostUuids.add(e):t.push(r))}return t}}async _getBatchSizeLimitBytes(){let e=await this._ensureServerInfo();return this.batchSizeBytesLimit??e.batch_ingest_config?.size_limit_bytes??25165824}async _getBatchSizeLimit(){let e=await this._ensureServerInfo();return this.batchSizeLimit??e.batch_ingest_config?.size_limit??100}async _getDatasetExamplesMultiPartSupport(){return(await this._ensureServerInfo()).instance_flags?.dataset_examples_multipart_enabled??!1}drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:t}){let r=[];for(;this.autoBatchQueue.items.length>0;){let[n,i]=this.autoBatchQueue.pop({upToSizeBytes:e,upToSize:t});if(!n.length){i();break}let a=n.reduce((e,t)=>{let r=t.apiUrl??this.apiUrl,n=t.apiKey??this.apiKey,i=t.apiKey===this.apiKey&&t.apiUrl===this.apiUrl?"default":`${r}|${n}`;return e[i]||(e[i]=[]),e[i].push(t),e},{}),s=[];for(let[e,t]of Object.entries(a)){let r=this._processBatch(t,{apiUrl:"default"===e?void 0:e.split("|")[0],apiKey:"default"===e?void 0:e.split("|")[1]});s.push(r)}let o=Promise.all(s).finally(i);r.push(o)}return Promise.all(r)}async _processBatch(e,t){if(!e.length)return;let r=e.reduce((e,t)=>e+(t.size??0),0);try{if(void 0!==this.langSmithToOTELTranslator)this._sendBatchToOTELTranslator(e);else{let n={runCreates:e.filter(e=>"create"===e.action).map(e=>e.item),runUpdates:e.filter(e=>"update"===e.action).map(e=>e.item)},i=await this._ensureServerInfo();if(i?.batch_ingest_config?.use_multipart_endpoint){let e=i?.instance_flags?.gzip_body_enabled;await this.multipartIngestRuns(n,{...t,useGzip:e,sizeBytes:r})}else await this.batchIngestRuns(n,{...t,sizeBytes:r})}}catch(Fre){console.error("Error exporting batch:",Fre)}}_sendBatchToOTELTranslator(e){if(void 0!==this.langSmithToOTELTranslator){let t=new Map,r=[];for(let n of e)n.item.id&&n.otelContext&&(t.set(n.item.id,n.otelContext),"create"===n.action?r.push({operation:"post",id:n.item.id,trace_id:n.item.trace_id??n.item.id,run:n.item}):r.push({operation:"patch",id:n.item.id,trace_id:n.item.trace_id??n.item.id,run:n.item}));this.langSmithToOTELTranslator.exportBatch(r,t)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=Xv(e.item,this.cachedLSEnvVarsForMetadata);let t=this.autoBatchQueue.push(e);if(this.manualFlushMode)return t;let r=await this._getBatchSizeLimitBytes(),n=await this._getBatchSizeLimit();return(this.autoBatchQueue.sizeBytes>r||this.autoBatchQueue.items.length>n)&&this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:n}),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue({batchSizeLimitBytes:r,batchSizeLimit:n})},this.autoBatchAggregationDelayMs)),t}async _getServerInfo(){let e=await(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e4),...this.fetchOptions});return await zv(e,"get server info"),e})).json();return this.debug&&console.log("\n=== LangSmith Server Configuration ===\n"+JSON.stringify(e,null,2)+"\n"),e}async _ensureServerInfo(){return void 0===this._getServerInfoPromise&&(this._getServerInfoPromise=(async()=>{if(void 0===this._serverInfo)try{this._serverInfo=await this._getServerInfo()}catch(Ms){console.warn(`[LANGSMITH]: Failed to fetch info on supported operations. Falling back to batch operations and default limits. Info: ${Ms.status??"Unspecified status code"} ${Ms.message}`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(void 0===this._serverInfo&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){let e=await this._getBatchSizeLimitBytes(),t=await this._getBatchSizeLimit();await this.drainAutoBatchQueue({batchSizeLimitBytes:e,batchSizeLimit:t})}_cloneCurrentOTELContext(){let e=Nv(),t=Tv.getContextInstance();if(void 0!==this.langSmithToOTELTranslator){let r=e.getActiveSpan();if(r)return e.setSpan(t.active(),r)}}async createRun(e,t){if(!this._filterForSampling([e]).length)return;let r={...this.headers,"Content-Type":"application/json"},n=e.project_name;delete e.project_name;let i=await this.prepareRunCreateOrUpdateInputs({session_name:n,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&void 0!==i.trace_id&&void 0!==i.dotted_order){let e=this._cloneCurrentOTELContext();return void this.processRunOperation({action:"create",item:i,otelContext:e,apiKey:t?.apiKey,apiUrl:t?.apiUrl}).catch(console.error)}let a=Xv(i,this.cachedLSEnvVarsForMetadata);void 0!==t?.apiKey&&(r["x-api-key"]=t.apiKey),void 0!==t?.workspaceId&&(r["x-tenant-id"]=t.workspaceId);let s=Kv(a,`Creating run with id: ${a.id}`);await this.caller.call(async()=>{let e=await this._fetch(`${t?.apiUrl??this.apiUrl}/runs`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await zv(e,"create run",!0),e})}async batchIngestRuns({runCreates:e,runUpdates:t},r){if(void 0===e&&void 0===t)return;let n=await Promise.all(e?.map(e=>this.prepareRunCreateOrUpdateInputs(e))??[]),i=await Promise.all(t?.map(e=>this.prepareRunCreateOrUpdateInputs(e))??[]);if(n.length>0&&i.length>0){let e=n.reduce((e,t)=>t.id?(e[t.id]=t,e):e,{}),t=[];for(let r of i)void 0!==r.id&&e[r.id]?e[r.id]={...e[r.id],...r}:t.push(r);n=Object.values(e),i=t}let a={post:n,patch:i};if(!a.post.length&&!a.patch.length)return;let s={post:[],patch:[]};for(let o of["post","patch"]){let e=o,t=a[e].reverse(),r=t.pop();for(;void 0!==r;)s[e].push(r),r=t.pop()}if(s.post.length>0||s.patch.length>0){let e=s.post.map(e=>e.id).concat(s.patch.map(e=>e.id)).join(",");await this._postBatchIngestRuns(Kv(s,`Ingesting runs with ids: ${e}`),r)}}async _postBatchIngestRuns(e,t){let r={...this.headers,"Content-Type":"application/json",Accept:"application/json"};void 0!==t?.apiKey&&(r["x-api-key"]=t.apiKey),await this.batchIngestCaller.callWithOptions({sizeBytes:t?.sizeBytes},async()=>{let n=await this._fetch(`${t?.apiUrl??this.apiUrl}/runs/batch`,{method:"POST",headers:r,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:e});return await zv(n,"batch create run",!0),n})}async multipartIngestRuns({runCreates:e,runUpdates:t},r){if(void 0===e&&void 0===t)return;let n={},i=[];for(let l of e??[]){let e=await this.prepareRunCreateOrUpdateInputs(l);void 0!==e.id&&void 0!==e.attachments&&(n[e.id]=e.attachments),delete e.attachments,i.push(e)}let a=[];for(let l of t??[])a.push(await this.prepareRunCreateOrUpdateInputs(l));if(void 0!==i.find(e=>void 0===e.trace_id||void 0===e.dotted_order))throw Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(void 0!==a.find(e=>void 0===e.trace_id||void 0===e.dotted_order))throw Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(i.length>0&&a.length>0){let e=i.reduce((e,t)=>t.id?(e[t.id]=t,e):e,{}),t=[];for(let r of a)void 0!==r.id&&e[r.id]?e[r.id]={...e[r.id],...r}:t.push(r);i=Object.values(e),a=t}if(0===i.length&&0===a.length)return;let s=[],o=[];for(let[l,c]of[["post",i],["patch",a]])for(let e of c){let{inputs:t,outputs:r,events:i,extra:a,error:c,serialized:u,attachments:d,...h}=e,p={inputs:t,outputs:r,events:i,extra:a,error:c,serialized:u},f=Kv(h,`Serializing for multipart ingestion of run with id: ${h.id}`);o.push({name:`${l}.${h.id}`,payload:new Blob([f],{type:`application/json; length=${f.length}`})});for(let[e,n]of Object.entries(p)){if(void 0===n)continue;let t=Kv(n,`Serializing ${e} for multipart ingestion of run with id: ${h.id}`);o.push({name:`${l}.${h.id}.${e}`,payload:new Blob([t],{type:`application/json; length=${t.length}`})})}if(void 0!==h.id){let e=n[h.id];if(e){delete n[h.id];for(let[t,r]of Object.entries(e)){let e,n;Array.isArray(r)?[e,n]=r:(e=r.mimeType,n=r.data),t.includes(".")?console.warn(`Skipping attachment '${t}' for run ${h.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`):o.push({name:`attachment.${h.id}.${t}`,payload:new Blob([n],{type:`${e}; length=${n.byteLength}`})})}}}s.push(`trace=${h.trace_id},id=${h.id}`)}await this._sendMultipartRequest(o,s.join("; "),r)}async _createNodeFetchBody(e,t){let r=[];for(let n of e)r.push(new Blob([`--${t}\r\n`])),r.push(new Blob([`Content-Disposition: form-data; name="${n.name}"\r\n`,`Content-Type: ${n.payload.type}\r\n\r\n`])),r.push(n.payload),r.push(new Blob(["\r\n"]));return r.push(new Blob([`--${t}--\r\n`])),await new Blob(r).arrayBuffer()}async _createMultipartStream(e,t){let r=new TextEncoder;return new ReadableStream({async start(n){let i=async e=>{"string"==typeof e?n.enqueue(r.encode(e)):n.enqueue(e)};for(let r of e){await i(`--${t}\r\n`),await i(`Content-Disposition: form-data; name="${r.name}"\r\n`),await i(`Content-Type: ${r.payload.type}\r\n\r\n`);let e=r.payload.stream().getReader();try{let t;for(;!(t=await e.read()).done;)n.enqueue(t.value)}finally{e.releaseLock()}await i("\r\n")}await i(`--${t}--\r\n`),n.close()}})}async _sendMultipartRequest(e,t,r){let n="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),i=(()=>{let e=globalThis[tv];return!!e&&"function"==typeof e&&"Headers"in e&&"Request"in e&&"Response"in e})(),a=()=>this._createNodeFetchBody(e,n),s=()=>this._createMultipartStream(e,n),o=async e=>this.batchIngestCaller.callWithOptions({sizeBytes:r?.sizeBytes},async()=>{let t=await e(),i={...this.headers,"Content-Type":`multipart/form-data; boundary=${n}`};void 0!==r?.apiKey&&(i["x-api-key"]=r.apiKey);let a=t;r?.useGzip&&"object"==typeof t&&"pipeThrough"in t&&(a=t.pipeThrough(new CompressionStream("gzip")),i["Content-Encoding"]="gzip");let s=await this._fetch(`${r?.apiUrl??this.apiUrl}/runs/multipart`,{method:"POST",headers:i,body:a,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(s,"Failed to send multipart request",!0),s});try{let e,n=!1;i||this.multipartStreamingDisabled||"bun"===mv()?e=await o(a):(n=!0,e=await o(s)),this.multipartStreamingDisabled&&!n||422!==e.status||(r?.apiUrl??this.apiUrl)===ny||(console.warn(`Streaming multipart upload to ${r?.apiUrl??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${t}".`),this.multipartStreamingDisabled=!0,e=await o(a))}catch(Pre){console.warn(`${Pre.message.trim()}\n\nContext: ${t}`)}}async updateRun(e,t,r){lv(e),t.inputs&&(t.inputs=await this.processInputs(t.inputs)),t.outputs&&(t.outputs=await this.processOutputs(t.outputs));let n={...t,id:e};if(!this._filterForSampling([n],!0).length)return;if(this.autoBatchTracing&&void 0!==n.trace_id&&void 0!==n.dotted_order){let e=this._cloneCurrentOTELContext();return void 0!==t.end_time&&void 0===n.parent_run_id&&this.blockOnRootRunFinalization&&!this.manualFlushMode?void(await this.processRunOperation({action:"update",item:n,otelContext:e,apiKey:r?.apiKey,apiUrl:r?.apiUrl}).catch(console.error)):void this.processRunOperation({action:"update",item:n,otelContext:e,apiKey:r?.apiKey,apiUrl:r?.apiUrl}).catch(console.error)}let i={...this.headers,"Content-Type":"application/json"};void 0!==r?.apiKey&&(i["x-api-key"]=r.apiKey),void 0!==r?.workspaceId&&(i["x-tenant-id"]=r.workspaceId);let a=Kv(t,`Serializing payload to update run with id: ${e}`);await this.caller.call(async()=>{let t=await this._fetch(`${r?.apiUrl??this.apiUrl}/runs/${e}`,{method:"PATCH",headers:i,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await zv(t,"update run",!0),t})}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){lv(e);let r=await this._get(`/runs/${e}`);return t&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:t,projectOpts:r}){if(void 0!==t){let e;e=t.session_id?t.session_id:r?.projectName?(await this.readProject({projectName:r?.projectName})).id:r?.projectId?r?.projectId:(await this.readProject({projectName:bv("PROJECT")||"default"})).id;let n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${e}/r/${t.id}?poll=true`}if(void 0!==e){let t=await this.readRun(e);if(!t.app_path)throw Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${t.app_path}`}throw Error("Must provide either runId or run")}async _loadChildRuns(e){let t=await async function(e){let t=[];for await(let r of e)t.push(r);return t}(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},n={};t.sort((e,t)=>(e?.dotted_order??"").localeCompare(t?.dotted_order??""));for(let i of t){if(null===i.parent_run_id||void 0===i.parent_run_id)throw Error(`Child run ${i.id} has no parent`);i.dotted_order?.startsWith(e.dotted_order??"")&&i.id!==e.id&&(i.parent_run_id in r||(r[i.parent_run_id]=[]),r[i.parent_run_id].push(i),n[i.id]=i)}e.child_runs=r[e.id]||[];for(let i in r)i!==e.id&&(n[i].child_runs=r[i]);return e}async*listRuns(e){let{projectId:t,projectName:r,parentRunId:n,traceId:i,referenceExampleId:a,startTime:s,executionOrder:o,isRoot:l,runType:c,error:u,id:d,query:h,filter:p,traceFilter:f,treeFilter:m,limit:g,select:v,order:y}=e,b=[];if(t&&(b=Array.isArray(t)?t:[t]),r){let e=Array.isArray(r)?r:[r],t=await Promise.all(e.map(e=>this.readProject({projectName:e}).then(e=>e.id)));b.push(...t)}let _={session:b.length?b:null,run_type:c,reference_example:a,query:h,filter:p,trace_filter:f,tree_filter:m,execution_order:o,parent_run:n,start_time:s?s.toISOString():null,error:u,id:d,limit:g,trace:i,select:v||["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],is_root:l,order:y};_.select.includes("child_run_ids")&&av("Deprecated: 'child_run_ids' in the listRuns select parameter is deprecated and will be removed in a future version.");let w=0;for await(let x of this._getCursorPaginatedList("/runs/query",_))if(g){if(w>=g)break;if(x.length+w>g){yield*x.slice(0,g-w);break}w+=x.length,yield*x}else yield*x}async*listGroupRuns(e){let{projectId:t,projectName:r,groupBy:n,filter:i,startTime:a,endTime:s,limit:o,offset:l}=e,c={session_id:t||(await this.readProject({projectName:r})).id,group_by:n,filter:i,start_time:a?a.toISOString():null,end_time:s?s.toISOString():null,limit:Number(o)||100},u=Number(l)||0,d="/runs/group",h=`${this.apiUrl}${d}`;for(;;){let e={...c,offset:u},t=Object.fromEntries(Object.entries(e).filter(([e,t])=>void 0!==t)),r=JSON.stringify(t),n=await(await this.caller.call(async()=>{let e=await this._fetch(h,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await zv(e,`Failed to fetch ${d}`),e})).json(),{groups:i,total:a}=n;if(0===i.length)break;for(let s of i)yield s;if(u+=i.length,u>=a)break}}async getRunStats({id:e,trace:t,parentRun:r,runType:n,projectNames:i,projectIds:a,referenceExampleIds:s,startTime:o,endTime:l,error:c,query:u,filter:d,traceFilter:h,treeFilter:p,isRoot:f,dataSourceType:m}){let g=a||[];i&&(g=[...a||[],...await Promise.all(i.map(e=>this.readProject({projectName:e}).then(e=>e.id)))]);let v=Object.fromEntries(Object.entries({id:e,trace:t,parent_run:r,run_type:n,session:g,reference_example:s,start_time:o,end_time:l,error:c,query:u,filter:d,trace_filter:h,tree_filter:p,is_root:f,data_source_type:m}).filter(([e,t])=>void 0!==t)),y=JSON.stringify(v);return await(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/runs/stats`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:y});return await zv(e,"get run stats"),e})).json()}async shareRun(e,{shareId:t}={}){let r={run_id:e,share_token:t||Gg()};lv(e);let n=JSON.stringify(r),i=await(await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await zv(t,"share run"),t})).json();if(null===i||!("share_token"in i))throw Error("Invalid response from server");return`${this.getHostUrl()}/public/${i.share_token}/r`}async unshareRun(e){lv(e),await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,"unshare run",!0),t})}async readRunSharedLink(e){lv(e);let t=await(await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,"read run shared link"),t})).json();if(null!==t&&"share_token"in t)return`${this.getHostUrl()}/public/${t.share_token}/r`}async listSharedRuns(e,{runIds:t}={}){let r=new URLSearchParams({share_token:e});if(void 0!==t)for(let n of t)r.append("id",n);return lv(e),await(await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,"list shared runs"),t})).json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id),lv(e);let r=await(await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,"read dataset shared schema"),t})).json();return r.url=`${this.getHostUrl()}/public/${r.share_token}/d`,r}async shareDataset(e,t){if(!e&&!t)throw Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id);let r={dataset_id:e};lv(e);let n=JSON.stringify(r),i=await(await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:n});return await zv(t,"share dataset"),t})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async unshareDataset(e){lv(e),await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,"unshare dataset",!0),t})}async readSharedDataset(e){return lv(e),await(await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,"read shared dataset"),t})).json()}async listSharedExamples(e,t){let r={};t?.exampleIds&&(r.id=t.exampleIds);let n=new URLSearchParams;Object.entries(r).forEach(([e,t])=>{Array.isArray(t)?t.forEach(t=>n.append(e,t)):n.append(e,t)});let i=await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/public/${e}/examples?${n.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,"list shared examples"),t}),a=await i.json();if(!i.ok){if("detail"in a)throw Error(`Failed to list shared examples.\nStatus: ${i.status}\nMessage: ${Array.isArray(a.detail)?a.detail.join("\n"):"Unspecified error"}`);throw Error(`Failed to list shared examples: ${i.status} ${i.statusText}`)}return a.map(e=>({...e,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:t=null,metadata:r=null,upsert:n=!1,projectExtra:i=null,referenceDatasetId:a=null}){let s=n?"?upsert=true":"",o=`${this.apiUrl}/sessions${s}`,l=i||{};r&&(l.metadata=r);let c={name:e,extra:l,description:t};null!==a&&(c.reference_dataset_id=a);let u=JSON.stringify(c);return await(await this.caller.call(async()=>{let e=await this._fetch(o,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:u});return await zv(e,"create project"),e})).json()}async updateProject(e,{name:t=null,description:r=null,metadata:n=null,projectExtra:i=null,endTime:a=null}){let s=`${this.apiUrl}/sessions/${e}`,o=i;n&&(o={...o||{},metadata:n});let l=JSON.stringify({name:t,extra:o,description:r,end_time:a?new Date(a).toISOString():null});return await(await this.caller.call(async()=>{let e=await this._fetch(s,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await zv(e,"update project"),e})).json()}async hasProject({projectId:e,projectName:t}){let r="/sessions",n=new URLSearchParams;if(void 0!==e&&void 0!==t)throw Error("Must provide either projectName or projectId, not both");if(void 0!==e)lv(e),r+=`/${e}`;else{if(void 0===t)throw Error("Must provide projectName or projectId");n.append("name",t)}let i=await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}${r}?${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(e,"has project"),e});try{let e=await i.json();return!!i.ok&&(!Array.isArray(e)||e.length>0)}catch(a){return!1}}async readProject({projectId:e,projectName:t,includeStats:r}){let n="/sessions",i=new URLSearchParams;if(void 0!==e&&void 0!==t)throw Error("Must provide either projectName or projectId, not both");if(void 0!==e)lv(e),n+=`/${e}`;else{if(void 0===t)throw Error("Must provide projectName or projectId");i.append("name",t)}void 0!==r&&i.append("include_stats",r.toString());let a,s=await this._get(n,i);if(Array.isArray(s)){if(0===s.length)throw Error(`Project[id=${e}, name=${t}] not found`);a=s[0]}else a=s;return a}async getProjectUrl({projectId:e,projectName:t}){if(void 0===e&&void 0===t)throw Error("Must provide either projectName or projectId");let r=await this.readProject({projectId:e,projectName:t}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:t}){if(void 0===e&&void 0===t)throw Error("Must provide either datasetName or datasetId");let r=await this.readDataset({datasetId:e,datasetName:t}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/datasets/${r.id}`}async _getTenantId(){if(null!==this._tenantId)return this._tenantId;let e=new URLSearchParams({limit:"1"});for await(let t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:t,nameContains:r,referenceDatasetId:n,referenceDatasetName:i,includeStats:a,datasetVersion:s,referenceFree:o,metadata:l}={}){let c=new URLSearchParams;if(void 0!==e)for(let u of e)c.append("id",u);if(void 0!==t&&c.append("name",t),void 0!==r&&c.append("name_contains",r),void 0!==n)c.append("reference_dataset",n);else if(void 0!==i){let e=await this.readDataset({datasetName:i});c.append("reference_dataset",e.id)}void 0!==a&&c.append("include_stats",a.toString()),void 0!==s&&c.append("dataset_version",s),void 0!==o&&c.append("reference_free",o.toString()),void 0!==l&&c.append("metadata",JSON.stringify(l));for await(let u of this._getPaginated("/sessions",c))yield*u}async deleteProject({projectId:e,projectName:t}){let r;if(void 0===e&&void 0===t)throw Error("Must provide projectName or projectId");if(void 0!==e&&void 0!==t)throw Error("Must provide either projectName or projectId, not both");r=void 0===e?(await this.readProject({projectName:t})).id:e,lv(r),await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(e,`delete session ${r} (${t})`,!0),e})}async uploadCsv({csvFile:e,fileName:t,inputKeys:r,outputKeys:n,description:i,dataType:a,name:s}){let o=`${this.apiUrl}/datasets/upload`,l=new FormData;return l.append("file",e,t),r.forEach(e=>{l.append("input_keys",e)}),n.forEach(e=>{l.append("output_keys",e)}),i&&l.append("description",i),a&&l.append("data_type",a),s&&l.append("name",s),await(await this.caller.call(async()=>{let e=await this._fetch(o,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await zv(e,"upload CSV"),e})).json()}async createDataset(e,{description:t,dataType:r,inputsSchema:n,outputsSchema:i,metadata:a}={}){let s={name:e,description:t,extra:a?{metadata:a}:void 0};r&&(s.data_type=r),n&&(s.inputs_schema_definition=n),i&&(s.outputs_schema_definition=i);let o=JSON.stringify(s);return await(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await zv(e,"create dataset"),e})).json()}async readDataset({datasetId:e,datasetName:t}){let r="/datasets",n=new URLSearchParams({limit:"1"});if(e&&t)throw Error("Must provide either datasetName or datasetId, not both");if(e)lv(e),r+=`/${e}`;else{if(!t)throw Error("Must provide datasetName or datasetId");n.append("name",t)}let i,a=await this._get(r,n);if(Array.isArray(a)){if(0===a.length)throw Error(`Dataset[id=${e}, name=${t}] not found`);i=a[0]}else i=a;return i}async hasDataset({datasetId:e,datasetName:t}){try{return await this.readDataset({datasetId:e,datasetName:t}),!0}catch(ere){if(ere instanceof Error&&ere.message.toLocaleLowerCase().includes("not found"))return!1;throw ere}}async diffDatasetVersions({datasetId:e,datasetName:t,fromVersion:r,toVersion:n}){let i=e;if(void 0===i&&void 0===t)throw Error("Must provide either datasetName or datasetId");if(void 0!==i&&void 0!==t)throw Error("Must provide either datasetName or datasetId, not both");void 0===i&&(i=(await this.readDataset({datasetName:t})).id);let a=new URLSearchParams({from_version:"string"==typeof r?r:r.toISOString(),to_version:"string"==typeof n?n:n.toISOString()});return await this._get(`/datasets/${i}/versions/diff`,a)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:t}){if(void 0!==e);else{if(void 0===t)throw Error("Must provide either datasetName or datasetId");e=(await this.readDataset({datasetName:t})).id}return(await(await this._getResponse(`/datasets/${e}/openai_ft`)).text()).trim().split("\n").map(e=>JSON.parse(e))}async*listDatasets({limit:e=100,offset:t=0,datasetIds:r,datasetName:n,datasetNameContains:i,metadata:a}={}){let s=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(void 0!==r)for(let o of r)s.append("id",o);void 0!==n&&s.append("name",n),void 0!==i&&s.append("name_contains",i),void 0!==a&&s.append("metadata",JSON.stringify(a));for await(let o of this._getPaginated("/datasets",s))yield*o}async updateDataset(e){let{datasetId:t,datasetName:r,...n}=e;if(!t&&!r)throw Error("Must provide either datasetName or datasetId");let i=t??(await this.readDataset({datasetName:r})).id;lv(i);let a=JSON.stringify(n);return await(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/datasets/${i}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await zv(e,"update dataset"),e})).json()}async updateDatasetTag(e){let{datasetId:t,datasetName:r,asOf:n,tag:i}=e;if(!t&&!r)throw Error("Must provide either datasetName or datasetId");let a=t??(await this.readDataset({datasetName:r})).id;lv(a);let s=JSON.stringify({as_of:"string"==typeof n?n:n.toISOString(),tag:i});await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/datasets/${a}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await zv(e,"update dataset tags",!0),e})}async deleteDataset({datasetId:e,datasetName:t}){let r="/datasets",n=e;if(void 0!==e&&void 0!==t)throw Error("Must provide either datasetName or datasetId, not both");if(void 0!==t&&(n=(await this.readDataset({datasetName:t})).id),void 0===n)throw Error("Must provide datasetName or datasetId");lv(n),r+=`/${n}`,await this.caller.call(async()=>{let e=await this._fetch(this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(e,`delete ${r}`,!0),e})}async indexDataset({datasetId:e,datasetName:t,tag:r}){let n=e;if(!n&&!t)throw Error("Must provide either datasetName or datasetId");if(n&&t)throw Error("Must provide either datasetName or datasetId, not both");n||(n=(await this.readDataset({datasetName:t})).id),lv(n);let i=JSON.stringify({tag:r});await(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/datasets/${n}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:i});return await zv(e,"index dataset"),e})).json()}async similarExamples(e,t,r,{filter:n}={}){let i={limit:r,inputs:e};void 0!==n&&(i.filter=n),lv(t);let a=JSON.stringify(i);return(await(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/datasets/${t}/search`,{headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,method:"POST",body:a});return await zv(e,"fetch similar examples"),e})).json()).examples}async createExample(e,t,r){if(sy(e)&&(void 0!==t||void 0!==r))throw Error("Cannot provide outputs or options when using ExampleCreate object");let n=t?r?.datasetId:e.dataset_id,i=t?r?.datasetName:e.dataset_name;if(void 0===n&&void 0===i)throw Error("Must provide either datasetName or datasetId");if(void 0!==n&&void 0!==i)throw Error("Must provide either datasetName or datasetId, not both");void 0===n&&(n=(await this.readDataset({datasetName:i})).id);let a,s=(t?r?.createdAt:e.created_at)||new Date;a=sy(e)?e:{inputs:e,outputs:t,created_at:s?.toISOString(),id:r?.exampleId,metadata:r?.metadata,split:r?.split,source_run_id:r?.sourceRunId,use_source_run_io:r?.useSourceRunIO,use_source_run_attachments:r?.useSourceRunAttachments,attachments:r?.attachments};let o=await this._uploadExamplesMultipart(n,[a]);return await this.readExample(o.example_ids?.[0]??Gg())}async createExamples(e){if(Array.isArray(e)){if(0===e.length)return[];let t=e,r=t[0].dataset_id,n=t[0].dataset_name;if(void 0===r&&void 0===n)throw Error("Must provide either datasetName or datasetId");if(void 0!==r&&void 0!==n)throw Error("Must provide either datasetName or datasetId, not both");void 0===r&&(r=(await this.readDataset({datasetName:n})).id);let i=await this._uploadExamplesMultipart(r,t);return await Promise.all(i.example_ids.map(e=>this.readExample(e)))}let{inputs:t,outputs:r,metadata:n,splits:i,sourceRunIds:a,useSourceRunIOs:s,useSourceRunAttachments:o,attachments:l,exampleIds:c,datasetId:u,datasetName:d}=e;if(void 0===t)throw Error("Must provide inputs when using legacy parameters");let h=u,p=d;if(void 0===h&&void 0===p)throw Error("Must provide either datasetName or datasetId");if(void 0!==h&&void 0!==p)throw Error("Must provide either datasetName or datasetId, not both");void 0===h&&(h=(await this.readDataset({datasetName:p})).id);let f=t.map((e,t)=>({dataset_id:h,inputs:e,outputs:r?.[t],metadata:n?.[t],split:i?.[t],id:c?.[t],attachments:l?.[t],source_run_id:a?.[t],use_source_run_io:s?.[t],use_source_run_attachments:o?.[t]})),m=await this._uploadExamplesMultipart(h,f);return await Promise.all(m.example_ids.map(e=>this.readExample(e)))}async createLLMExample(e,t,r){return this.createExample({input:e},{output:t},r)}async createChatExample(e,t,r){let n=e.map(e=>Lv(e)?Pv(e):e),i=Lv(t)?Pv(t):t;return this.createExample({input:n},{output:i},r)}async readExample(e){lv(e);let t=`/examples/${e}`,r=await this._get(t),{attachment_urls:n,...i}=r,a=i;return n&&(a.attachments=Object.entries(n).reduce((e,[t,r])=>(e[t.slice(11)]={presigned_url:r.presigned_url,mime_type:r.mime_type},e),{})),a}async*listExamples({datasetId:e,datasetName:t,exampleIds:r,asOf:n,splits:i,inlineS3Urls:a,metadata:s,limit:o,offset:l,filter:c,includeAttachments:u}={}){let d;if(void 0!==e&&void 0!==t)throw Error("Must provide either datasetName or datasetId, not both");if(void 0!==e)d=e;else{if(void 0===t)throw Error("Must provide a datasetName or datasetId");d=(await this.readDataset({datasetName:t})).id}let h=new URLSearchParams({dataset:d}),p=n?"string"==typeof n?n:n?.toISOString():void 0;p&&h.append("as_of",p);let f=a??!0;if(h.append("inline_s3_urls",f.toString()),void 0!==r)for(let g of r)h.append("id",g);if(void 0!==i)for(let g of i)h.append("splits",g);if(void 0!==s){let e=JSON.stringify(s);h.append("metadata",e)}void 0!==o&&h.append("limit",o.toString()),void 0!==l&&h.append("offset",l.toString()),void 0!==c&&h.append("filter",c),!0===u&&["attachment_urls","outputs","metadata"].forEach(e=>h.append("select",e));let m=0;for await(let g of this._getPaginated("/examples",h)){for(let e of g){let{attachment_urls:t,...r}=e,n=r;t&&(n.attachments=Object.entries(t).reduce((e,[t,r])=>(e[t.slice(11)]={presigned_url:r.presigned_url,mime_type:r.mime_type||void 0},e),{})),yield n,m++}if(void 0!==o&&m>=o)break}}async deleteExample(e){lv(e);let t=`/examples/${e}`;await this.caller.call(async()=>{let e=await this._fetch(this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(e,`delete ${t}`,!0),e})}async updateExample(e,t){let r,n,i;return r=t?e:e.id,lv(r),n=t?{id:r,...t}:e,i=void 0!==n.dataset_id?n.dataset_id:(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(i,[n])}async updateExamples(e){let t;return t=void 0===e[0].dataset_id?(await this.readExample(e[0].id)).dataset_id:e[0].dataset_id,this._updateExamplesMultipart(t,e)}async readDatasetVersion({datasetId:e,datasetName:t,asOf:r,tag:n}){let i;if(i=e||(await this.readDataset({datasetName:t})).id,lv(i),r&&n||!r&&!n)throw Error("Exactly one of asOf and tag must be specified.");let a=new URLSearchParams;return void 0!==r&&a.append("as_of","string"==typeof r?r:r.toISOString()),void 0!==n&&a.append("tag",n),await(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/datasets/${i}/version?${a.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(e,"read dataset version"),e})).json()}async listDatasetSplits({datasetId:e,datasetName:t,asOf:r}){let n;if(void 0===e&&void 0===t)throw Error("Must provide dataset name or ID");if(void 0!==e&&void 0!==t)throw Error("Must provide either datasetName or datasetId, not both");n=void 0===e?(await this.readDataset({datasetName:t})).id:e,lv(n);let i=new URLSearchParams,a=r?"string"==typeof r?r:r?.toISOString():void 0;return a&&i.append("as_of",a),await this._get(`/datasets/${n}/splits`,i)}async updateDatasetSplits({datasetId:e,datasetName:t,splitName:r,exampleIds:n,remove:i=!1}){let a;if(void 0===e&&void 0===t)throw Error("Must provide dataset name or ID");if(void 0!==e&&void 0!==t)throw Error("Must provide either datasetName or datasetId, not both");a=void 0===e?(await this.readDataset({datasetName:t})).id:e,lv(a);let s={split_name:r,examples:n.map(e=>(lv(e),e)),remove:i},o=JSON.stringify(s);await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/datasets/${a}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await zv(e,"update dataset splits",!0),e})}async evaluateRun(e,t,{sourceInfo:r,loadChildRuns:n,referenceExample:i}={loadChildRuns:!1}){let a;if(av("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead."),"string"==typeof e)a=await this.readRun(e,{loadChildRuns:n});else{if("object"!=typeof e||!("id"in e))throw Error("Invalid run type: "+typeof e);a=e}null!==a.reference_example_id&&void 0!==a.reference_example_id&&(i=await this.readExample(a.reference_example_id));let s=await t.evaluateRun(a,i),[o,l]=await this._logEvaluationFeedback(s,a,r);return l[0]}async createFeedback(e,t,{score:r,value:n,correction:i,comment:a,sourceInfo:s,feedbackSourceType:o="api",sourceRunId:l,feedbackId:c,feedbackConfig:u,projectId:d,comparativeExperimentId:h}){if(!e&&!d)throw Error("One of runId or projectId must be provided");if(e&&d)throw Error("Only one of runId or projectId can be provided");let p={type:o??"api",metadata:s??{}};void 0===l||void 0===p?.metadata||p.metadata.__run||(p.metadata.__run={run_id:l}),void 0!==p?.metadata&&void 0!==p.metadata.__run?.run_id&&lv(p.metadata.__run.run_id);let f={id:c??Gg(),run_id:e,key:t,score:ty(r),value:n,correction:i,comment:a,feedback_source:p,comparative_experiment_id:h,feedbackConfig:u,session_id:d},m=JSON.stringify(f),g=`${this.apiUrl}/feedback`;return await this.caller.call(async()=>{let e=await this._fetch(g,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:m});return await zv(e,"create feedback",!0),e}),f}async updateFeedback(e,{score:t,value:r,correction:n,comment:i}){let a={};null!=t&&(a.score=ty(t)),null!=r&&(a.value=r),null!=n&&(a.correction=n),null!=i&&(a.comment=i),lv(e);let s=JSON.stringify(a);await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await zv(t,"update feedback",!0),t})}async readFeedback(e){lv(e);let t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){lv(e);let t=`/feedback/${e}`;await this.caller.call(async()=>{let e=await this._fetch(this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(e,`delete ${t}`,!0),e})}async*listFeedback({runIds:e,feedbackKeys:t,feedbackSourceTypes:r}={}){let n=new URLSearchParams;if(e)for(let i of e)lv(i),n.append("run",i);if(t)for(let i of t)n.append("key",i);if(r)for(let i of r)n.append("source",i);for await(let i of this._getPaginated("/feedback",n))yield*i}async createPresignedFeedbackToken(e,t,{expiration:r,feedbackConfig:n}={}){let i={run_id:e,feedback_key:t,feedback_config:n};r?"string"==typeof r?i.expires_at=r:(r?.hours||r?.minutes||r?.days)&&(i.expires_in=r):i.expires_in={hours:3};let a=JSON.stringify(i);return await(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await zv(e,"create presigned feedback token"),e})).json()}async createComparativeExperiment({name:e,experimentIds:t,referenceDatasetId:r,createdAt:n,description:i,metadata:a,id:s}){if(0===t.length)throw Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:t[0]})).reference_dataset_id),null==!r)throw Error("A reference dataset is required");let o={id:s,name:e,experiment_ids:t,reference_dataset_id:r,description:i,created_at:(n??new Date)?.toISOString(),extra:{}};a&&(o.extra.metadata=a);let l=JSON.stringify(o);return(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await zv(e,"create comparative experiment"),e})).json()}async*listPresignedFeedbackTokens(e){lv(e);let t=new URLSearchParams({run_id:e});for await(let r of this._getPaginated("/feedback/tokens",t))yield*r}_selectEvalResults(e){let t;return t="results"in e?e.results:Array.isArray(e)?e:[e],t}async _logEvaluationFeedback(e,t,r){let n=this._selectEvalResults(e),i=[];for(let a of n){let e=r||{};a.evaluatorInfo&&(e={...a.evaluatorInfo,...e});let n=null;a.targetRunId?n=a.targetRunId:t&&(n=t.id),i.push(await this.createFeedback(n,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:e,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[n,i]}async logEvaluationFeedback(e,t,r){let[n]=await this._logEvaluationFeedback(e,t,r);return n}async*listAnnotationQueues(e={}){let{queueIds:t,name:r,nameContains:n,limit:i}=e,a=new URLSearchParams;t&&t.forEach((e,t)=>{lv(e,`queueIds[${t}]`),a.append("ids",e)}),r&&a.append("name",r),n&&a.append("name_contains",n),a.append("limit",(void 0!==i?Math.min(i,100):100).toString());let s=0;for await(let o of this._getPaginated("/annotation-queues",a))if(yield*o,s++,void 0!==i&&s>=i)break}async createAnnotationQueue(e){let{name:t,description:r,queueId:n,rubricInstructions:i}=e,a={name:t,description:r,id:n||Gg(),rubric_instructions:i},s=JSON.stringify(Object.fromEntries(Object.entries(a).filter(([e,t])=>void 0!==t)));return(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:s});return await zv(e,"create annotation queue"),e})).json()}async readAnnotationQueue(e){return(await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/annotation-queues/${lv(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,"read annotation queue"),t})).json()}async updateAnnotationQueue(e,t){let{name:r,description:n,rubricInstructions:i}=t,a=JSON.stringify({name:r,description:n,rubric_instructions:i});await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/annotation-queues/${lv(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await zv(t,"update annotation queue",!0),t})}async deleteAnnotationQueue(e){await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/annotation-queues/${lv(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,"delete annotation queue",!0),t})}async addRunsToAnnotationQueue(e,t){let r=JSON.stringify(t.map((e,t)=>lv(e,`runIds[${t}]`).toString()));await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/annotation-queues/${lv(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await zv(t,"add runs to annotation queue",!0),t})}async getRunFromAnnotationQueue(e,t){let r=`/annotation-queues/${lv(e,"queueId")}/run`;return(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}${r}/${t}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(e,"get run from annotation queue"),e})).json()}async deleteRunFromAnnotationQueue(e,t){await this.caller.call(async()=>{let r=await this._fetch(`${this.apiUrl}/annotation-queues/${lv(e,"queueId")}/runs/${lv(t,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(r,"delete run from annotation queue",!0),r})}async getSizeFromAnnotationQueue(e){return(await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/annotation-queues/${lv(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,"get size from annotation queue"),t})).json()}async _currentTenantIsOwner(e){let t=await this._getSettings();return"-"==e||t.tenant_handle===e}async _ownerConflictError(e,t){let r=await this._getSettings();return Error(`Cannot ${e} for another tenant.\n\n      Current tenant: ${r.tenant_handle}\n\n      Requested tenant: ${t}`)}async _getLatestCommitHash(e){let t=await(await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(t,"get latest commit hash"),t})).json();if(0!==t.commits.length)return t.commits[0].commit_hash}async _likeOrUnlikePrompt(e,t){let[r,n,i]=Dv(e),a=JSON.stringify({like:t});return(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/likes/${r}/${n}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await zv(e,(t?"like":"unlike")+" prompt"),e})).json()}async _getPromptUrl(e){let[t,r,n]=Dv(e);if(await this._currentTenantIsOwner(t)){let e=await this._getSettings();return"latest"!==n?`${this.getHostUrl()}/prompts/${r}/${n.substring(0,8)}?organizationId=${e.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${e.id}`}return"latest"!==n?`${this.getHostUrl()}/hub/${t}/${r}/${n.substring(0,8)}`:`${this.getHostUrl()}/hub/${t}/${r}`}async promptExists(e){return!!(await this.getPrompt(e))}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(let t of this._getPaginated(`/commits/${e}/`,new URLSearchParams,e=>e.commits))yield*t}async*listPrompts(e){let t=new URLSearchParams;t.append("sort_field",e?.sortField??"updated_at"),t.append("sort_direction","desc"),t.append("is_archived",(!!e?.isArchived).toString()),void 0!==e?.isPublic&&t.append("is_public",e.isPublic.toString()),e?.query&&t.append("query",e.query);for await(let r of this._getPaginated("/repos",t,e=>e.repos))yield*r}async getPrompt(e){let[t,r,n]=Dv(e),i=await((await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/repos/${t}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return 404===e?.status?null:(await zv(e,"get prompt"),e)}))?.json());return i?.repo?i.repo:null}async createPrompt(e,t){let r=await this._getSettings();if(t?.isPublic&&!r.tenant_handle)throw Error("Cannot create a public prompt without first\n\n        creating a LangChain Hub handle.\n        You can add a handle by creating a public prompt at:\n\n        https://smith.langchain.com/prompts");let[n,i,a]=Dv(e);if(!(await this._currentTenantIsOwner(n)))throw await this._ownerConflictError("create a prompt",n);let s={repo_handle:i,...t?.description&&{description:t.description},...t?.readme&&{readme:t.readme},...t?.tags&&{tags:t.tags},is_public:!!t?.isPublic},o=JSON.stringify(s),l=await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:o});return await zv(e,"create prompt"),e}),{repo:c}=await l.json();return c}async createCommit(e,t,r){if(!(await this.promptExists(e)))throw Error("Prompt does not exist, you must create it first.");let[n,i,a]=Dv(e),s="latest"!==r?.parentCommitHash&&r?.parentCommitHash?r?.parentCommitHash:await this._getLatestCommitHash(`${n}/${i}`),o={manifest:JSON.parse(JSON.stringify(t)),parent_commit:s},l=JSON.stringify(o),c=await(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/commits/${n}/${i}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:l});return await zv(e,"create commit"),e})).json();return this._getPromptUrl(`${n}/${i}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updateExamplesMultipart(e,t=[]){return this._updateExamplesMultipart(e,t)}async _updateExamplesMultipart(e,t=[]){if(!(await this._getDatasetExamplesMultiPartSupport()))throw Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let r=new FormData;for(let i of t){let e=i.id,t=Kv({...i.metadata&&{metadata:i.metadata},...i.split&&{split:i.split}},`Serializing body for example with id: ${e}`),n=new Blob([t],{type:"application/json"});if(r.append(e,n),i.inputs){let t=Kv(i.inputs,`Serializing inputs for example with id: ${e}`),n=new Blob([t],{type:"application/json"});r.append(`${e}.inputs`,n)}if(i.outputs){let t=Kv(i.outputs,`Serializing outputs whle updating example with id: ${e}`),n=new Blob([t],{type:"application/json"});r.append(`${e}.outputs`,n)}if(i.attachments)for(let[a,s]of Object.entries(i.attachments)){let t,n;Array.isArray(s)?[t,n]=s:(t=s.mimeType,n=s.data);let i=new Blob([n],{type:`${t}; length=${n.byteLength}`});r.append(`${e}.attachment.${a}`,i)}if(i.attachments_operations){let t=Kv(i.attachments_operations,`Serializing attachments while updating example with id: ${e}`),n=new Blob([t],{type:"application/json"});r.append(`${e}.attachments_operations`,n)}}let n=e??t[0]?.dataset_id;return(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${n}/examples`)}`,{method:"PATCH",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await zv(e,"update examples"),e})).json()}async uploadExamplesMultipart(e,t=[]){return this._uploadExamplesMultipart(e,t)}async _uploadExamplesMultipart(e,t=[]){if(!(await this._getDatasetExamplesMultiPartSupport()))throw Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let r=new FormData;for(let n of t){let e=(n.id??Gg()).toString(),t=Kv({created_at:n.created_at,...n.metadata&&{metadata:n.metadata},...n.split&&{split:n.split},...n.source_run_id&&{source_run_id:n.source_run_id},...n.use_source_run_io&&{use_source_run_io:n.use_source_run_io},...n.use_source_run_attachments&&{use_source_run_attachments:n.use_source_run_attachments}},`Serializing body for uploaded example with id: ${e}`),i=new Blob([t],{type:"application/json"});if(r.append(e,i),n.inputs){let t=Kv(n.inputs,`Serializing inputs for uploaded example with id: ${e}`),i=new Blob([t],{type:"application/json"});r.append(`${e}.inputs`,i)}if(n.outputs){let t=Kv(n.outputs,`Serializing outputs for uploaded example with id: ${e}`),i=new Blob([t],{type:"application/json"});r.append(`${e}.outputs`,i)}if(n.attachments)for(let[a,s]of Object.entries(n.attachments)){let t,n;Array.isArray(s)?[t,n]=s:(t=s.mimeType,n=s.data);let i=new Blob([n],{type:`${t}; length=${n.byteLength}`});r.append(`${e}.attachment.${a}`,i)}}return(await this.caller.call(async()=>{let t=await this._fetch(`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:r});return await zv(t,"upload examples"),t})).json()}async updatePrompt(e,t){if(!(await this.promptExists(e)))throw Error("Prompt does not exist, you must create it first.");let[r,n]=Dv(e);if(!(await this._currentTenantIsOwner(r)))throw await this._ownerConflictError("update a prompt",r);let i={};if(void 0!==t?.description&&(i.description=t.description),void 0!==t?.readme&&(i.readme=t.readme),void 0!==t?.tags&&(i.tags=t.tags),void 0!==t?.isPublic&&(i.is_public=t.isPublic),void 0!==t?.isArchived&&(i.is_archived=t.isArchived),0===Object.keys(i).length)throw Error("No valid update options provided");let a=JSON.stringify(i);return(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/repos/${r}/${n}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:a});return await zv(e,"update prompt"),e})).json()}async deletePrompt(e){if(!(await this.promptExists(e)))throw Error("Prompt does not exist, you must create it first.");let[t,r,n]=Dv(e);if(!(await this._currentTenantIsOwner(t)))throw await this._ownerConflictError("delete a prompt",t);return(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/repos/${t}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(e,"delete prompt"),e})).json()}async pullPromptCommit(e,t){let[r,n,i]=Dv(e),a=await(await this.caller.call(async()=>{let e=await this._fetch(`${this.apiUrl}/commits/${r}/${n}/${i}${t?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await zv(e,"pull prompt commit"),e})).json();return{owner:r,repo:n,commit_hash:a.commit_hash,manifest:a.manifest,examples:a.examples}}async _pullPrompt(e,t){let r=await this.pullPromptCommit(e,{includeModel:t?.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,t){return await this.promptExists(e)?t&&Object.keys(t).some(e=>"object"!==e)&&await this.updatePrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}):await this.createPrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}),t?.object?await this.createCommit(e,t?.object,{parentCommitHash:t?.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,t={}){let{sourceApiUrl:r=this.apiUrl,datasetName:n}=t,[i,a]=this.parseTokenOrUrl(e,r),s=new ay({apiUrl:i,apiKey:"placeholder"}),o=await s.readSharedDataset(a),l=n||o.name;try{if(await this.hasDataset({datasetId:l}))return void console.log(`Dataset ${l} already exists in your tenant. Skipping.`)}catch(oee){}let c=await s.listSharedExamples(a),u=await this.createDataset(l,{description:o.description,dataType:o.data_type||"kv",inputsSchema:o.inputs_schema_definition??void 0,outputsSchema:o.outputs_schema_definition??void 0});try{await this.createExamples({inputs:c.map(e=>e.inputs),outputs:c.flatMap(e=>e.outputs?[e.outputs]:[]),datasetId:u.id})}catch(oee){throw console.error(`An error occurred while creating dataset ${l}. You should delete it manually.`),oee}}parseTokenOrUrl(e,t,r=2,n="dataset"){try{return lv(e),[t,e]}catch(ine){}try{let i=new URL(e).pathname.split("/").filter(e=>""!==e);if(i.length>=r){return[t,i[i.length-r]]}throw Error(`Invalid public ${n} URL: ${e}`)}catch(ine){throw Error(`Invalid public ${n} URL or token: ${e}`)}}async awaitPendingTraceBatches(){if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()]),void 0!==this.langSmithToOTELTranslator&&await(Tv.getDefaultOTLPTracerComponents()?.DEFAULT_LANGSMITH_SPAN_PROCESSOR?.forceFlush())}}function sy(e){return"dataset_id"in e||"dataset_name"in e}var oy=Symbol.for("lc:context_variables");function ly(e){return e.replace(/[-:.]/g,"")}function cy(e,t=1){let r=t.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${r}Z`}function uy(e,t,r=1){let n=cy(e,r);return{dottedOrder:ly(n)+t,microsecondPrecisionDatestring:n}}class dy{constructor(e,t,r,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t,this.project_name=r,this.replicas=n}static fromHeader(e){let t,r,n=e.split(","),i={},a=[];for(let s of n){let[e,n]=s.split("="),o=decodeURIComponent(n);"langsmith-metadata"===e?i=JSON.parse(o):"langsmith-tags"===e?a=o.split(","):"langsmith-project"===e?t=o:"langsmith-replicas"===e&&(r=JSON.parse(o))}return new dy(i,a,t,r)}toHeader(){let e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class hy{constructor(e){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),function(e){return null!=e&&"function"==typeof e.createChild&&"function"==typeof e.postRun}(e))return void Object.assign(this,{...e});let t=hy.getDefaultConfig(),{metadata:r,...n}=e,i=n.client??hy.getSharedClient(),a={...r,...n?.extra?.metadata};if(n.extra={...n.extra,metadata:a},"id"in n&&null==n.id&&delete n.id,Object.assign(this,{...t,...n,client:i}),this.execution_order??=1,this.child_execution_order??=1,this.dotted_order||(this._serialized_start_time=cy(this.start_time,this.execution_order)),this.id||(this.id=function(e){let t="string"==typeof e?Date.parse(e):e;return Zg({msecs:t,seq:0})}(this._serialized_start_time??this.start_time)),n.id&&cv(n.id),this.trace_id?n.trace_id&&cv(n.trace_id):this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id,n.parent_run_id&&cv(n.parent_run_id),this.replicas=function(e){return e?e.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):function(){let e=yv("LANGSMITH_RUNS_ENDPOINTS");if(!e)return[];try{let t=JSON.parse(e);if(Array.isArray(t)){let e=[];for(let r of t)"object"==typeof r&&null!==r?"string"==typeof r.api_url?"string"==typeof r.api_key?e.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key}):console.warn("Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got "+typeof r.api_key):console.warn("Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got "+typeof r.api_url):console.warn("Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got "+typeof r);return e}if("object"==typeof t&&null!==t){!function(e){if(Object.keys(e).length>0&&bv("ENDPOINT"))throw new Uv}(t);let e=[];for(let[r,n]of Object.entries(t)){let t=r.replace(/\/$/,"");"string"==typeof n?e.push({apiUrl:t,apiKey:n}):console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got ${typeof n}`)}return e}return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got "+typeof t),[]}catch(t){if(function(e){return"object"==typeof e&&null!==e&&e.code===Bv}(t))throw t;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS  must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}()}(this.replicas),!this.dotted_order){let{dottedOrder:e}=uy(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+e:this.dotted_order=e}}set metadata(e){this.extra={...this.extra,metadata:{...this.extra?.metadata,...e}}}get metadata(){return this.extra?.metadata}static getDefaultConfig(){let e=Date.now();return{run_type:"chain",project_name:nv(),child_runs:[],api_url:yv("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:yv("LANGCHAIN_API_KEY"),caller_options:{},start_time:e,serialized:{},inputs:{},extra:{}}}static getSharedClient(){return hy.sharedClient||(hy.sharedClient=new ay),hy.sharedClient}createChild(e){let t=this.child_execution_order+1,r=new hy({...e,parent_run:this,project_name:this.project_name,replicas:this.replicas,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t});oy in this&&(r[oy]=this[oy]);let n=Symbol.for("lc:child_config"),i=e.extra?.[n]??this.extra[n];if(function(e){return null!=e&&"object"==typeof e.callbacks&&(fy(e.callbacks?.handlers)||fy(e.callbacks))}(i)){let e={...i},t=function(e){return"object"==typeof e&&null!=e&&Array.isArray(e.handlers)}(e.callbacks)?e.callbacks.copy?.():void 0;t&&(Object.assign(t,{_parentRunId:r.id}),t.handlers?.find(py)?.updateFromRunTree?.(r),e.callbacks=t),r.extra[n]=e}let a=new Set,s=this;for(;null!=s&&!a.has(s.id);)a.add(s.id),s.child_execution_order=Math.max(s.child_execution_order,t),s=s.parent_run;return this.child_runs.push(r),r}async end(e,t,r=Date.now(),n){this.outputs=this.outputs??e,this.error=this.error??t,this.end_time=this.end_time??r,n&&Object.keys(n).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...n}}:{metadata:n})}_convertToCreate(e,t,r=!0){let n,i,a=e.extra??{};if(void 0===a?.runtime?.library&&(a.runtime||(a.runtime={}),t))for(let[s,o]of Object.entries(t))a.runtime[s]||(a.runtime[s]=o);return r?(i=e.parent_run?.id??e.parent_run_id,n=[]):(n=e.child_runs.map(e=>this._convertToCreate(e,t,r)),i=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:a,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:n,parent_run_id:i,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_remapForProject(e,t,r=!0){return{...this._convertToCreate(this,t,r),session_name:e}}async postRun(e=!0){try{let t=gv();if(this.replicas&&this.replicas.length>0)for(let{projectName:e,apiKey:r,apiUrl:n,workspaceId:i}of this.replicas){let a=this._remapForProject(e??this.project_name,t,!0);await this.client.createRun(a,{apiKey:r,apiUrl:n,workspaceId:i})}else{let r=this._convertToCreate(this,t,e);await this.client.createRun(r)}if(!e){av("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(let e of this.child_runs)await e.postRun(!1)}}catch(xre){console.error(`Error in postRun for run ${this.id}:`,xre)}}async patchRun(e){if(this.replicas&&this.replicas.length>0)for(let{projectName:t,apiKey:r,apiUrl:n,workspaceId:i,updates:a}of this.replicas){let s=this._remapForProject(t??this.project_name),o={id:s.id,name:s.name,run_type:s.run_type,start_time:s.start_time,outputs:s.outputs,error:s.error,parent_run_id:s.parent_run_id,session_name:s.session_name,reference_example_id:s.reference_example_id,end_time:s.end_time,dotted_order:s.dotted_order,trace_id:s.trace_id,events:s.events,tags:s.tags,extra:s.extra,attachments:this.attachments,...a};e?.excludeInputs||(o.inputs=s.inputs),await this.client.updateRun(s.id,o,{apiKey:r,apiUrl:n,workspaceId:i})}else try{let t={name:this.name,run_type:this.run_type,start_time:this._serialized_start_time??this.start_time,end_time:this.end_time,error:this.error,outputs:this.outputs,parent_run_id:this.parent_run?.id??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};e?.excludeInputs||(t.inputs=this.inputs),await this.client.updateRun(this.id,t)}catch(xre){console.error(`Error in patchRun for run ${this.id}`,xre)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),"string"==typeof e?this.events.push({name:"event",time:(new Date).toISOString(),message:e}):this.events.push({...e,time:e.time??(new Date).toISOString()})}static fromRunnableConfig(e,t){let r,n,i,a=e?.callbacks,s=!!["TRACING_V2","TRACING"].find(e=>"true"===bv(e));if(a){let e=a?.getParentRunId?.()??"",t=a?.handlers?.find(e=>"langchain_tracer"==e?.name);r=t?.getRun?.(e),n=t?.projectName,i=t?.client,s=s||!!t}return r?new hy({name:r.name,id:r.id,trace_id:r.trace_id,dotted_order:r.dotted_order,client:i,tracingEnabled:s,project_name:n,tags:[...new Set((r?.tags??[]).concat(e?.tags??[]))],extra:{metadata:{...r?.extra?.metadata,...e?.metadata}}}).createChild(t):new hy({...t,client:i,tracingEnabled:s,project_name:n})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){let r="get"in e&&"function"==typeof e.get?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,n=r["langsmith-trace"];if(!n||"string"!=typeof n)return;let i=n.trim(),a=i.split(".").map(e=>{let[t,r]=e.split("Z");return{strTime:t,time:Date.parse(t+"Z"),uuid:r}}),s=a[0].uuid,o={...t,name:t?.name??"parent",run_type:t?.run_type??"chain",start_time:t?.start_time??Date.now(),id:a.at(-1)?.uuid,trace_id:s,dotted_order:i};if(r.baggage&&"string"==typeof r.baggage){let e=dy.fromHeader(r.baggage);o.metadata=e.metadata,o.tags=e.tags,o.project_name=e.project_name,o.replicas=e.replicas}return new hy(o)}toHeaders(e){let t={"langsmith-trace":this.dotted_order,baggage:new dy(this.extra?.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(let[r,n]of Object.entries(t))e.set(r,n);return t}}function py(e){return"object"==typeof e&&null!=e&&"string"==typeof e.name&&"langchain_tracer"===e.name}function fy(e){return Array.isArray(e)&&e.some(e=>py(e))}Object.defineProperty(hy,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});tm({},{BaseTracer:()=>yy,isBaseTracer:()=>vy});function my(e,t){if(e)return new hy({...e,start_time:e._serialized_start_time??e.start_time,parent_run:my(t),child_runs:e.child_runs.map(e=>my(e)).filter(e=>void 0!==e),extra:{...e.extra,runtime:xg()},tracingEnabled:!1})}function gy(e,t){return e&&!Array.isArray(e)&&"object"==typeof e?e:{[t]:e}}function vy(e){return"function"==typeof e._addRunToRunMap}var yy=class extends Pg{runMap=new Map;runTreeMap=new Map;usesRunTreeMap=!1;constructor(e){super(...arguments)}copy(){return this}getRunById(e){if(void 0!==e)return this.usesRunTreeMap?(e=>{if(e)return e.events=e.events??[],e.child_runs=e.child_runs??[],e})(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`\n\n${e.stack}`:""):"string"==typeof e?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){let{dottedOrder:t,microsecondPrecisionDatestring:r}=uy(new Date(e.start_time).getTime(),e.id,e.execution_order),n={...e},i=this.getRunById(n.parent_run_id);if(void 0!==n.parent_run_id?i&&(this._addChildRun(i,n),i.child_execution_order=Math.max(i.child_execution_order,n.child_execution_order),n.trace_id=i.trace_id,void 0!==i.dotted_order&&(n.dotted_order=[i.dotted_order,t].join("."),n._serialized_start_time=r)):(n.trace_id=n.id,n.dotted_order=t,n._serialized_start_time=r),this.usesRunTreeMap){let e=my(n,i);void 0!==e&&this.runTreeMap.set(n.id,e)}else this.runMap.set(n.id,n);return n}async _endTrace(e){let t=void 0!==e.parent_run_id&&this.getRunById(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),await(this.onRunUpdate?.(e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){let t=void 0!==e&&this.getRunById(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,r,n,i,a,s,o){let l=this._getExecutionOrder(n),c=Date.now(),u=s?{...i,metadata:s}:i,d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:u??{},tags:a||[]};return this._addRunToRunMap(d)}async handleLLMStart(e,t,r,n,i,a,s,o){let l=this.getRunById(r)??this._createRunForLLMStart(e,t,r,n,i,a,s,o);return await(this.onRunCreate?.(l)),await(this.onLLMStart?.(l)),l}_createRunForChatModelStart(e,t,r,n,i,a,s,o){let l=this._getExecutionOrder(n),c=Date.now(),u=s?{...i,metadata:s}:i,d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:u??{},tags:a||[]};return this._addRunToRunMap(d)}async handleChatModelStart(e,t,r,n,i,a,s,o){let l=this.getRunById(r)??this._createRunForChatModelStart(e,t,r,n,i,a,s,o);return await(this.onRunCreate?.(l)),await(this.onLLMStart?.(l)),l}async handleLLMEnd(e,t,r,n,i){let a=this.getRunById(t);if(!a||"llm"!==a?.run_type)throw Error("No LLM run to end.");return a.end_time=Date.now(),a.outputs=e,a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...i},await(this.onLLMEnd?.(a)),await this._endTrace(a),a}async handleLLMError(e,t,r,n,i){let a=this.getRunById(t);if(!a||"llm"!==a?.run_type)throw Error("No LLM run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),a.extra={...a.extra,...i},await(this.onLLMError?.(a)),await this._endTrace(a),a}_createRunForChainStart(e,t,r,n,i,a,s,o){let l=this._getExecutionOrder(n),c=Date.now(),u={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:t,execution_order:l,child_execution_order:l,run_type:s??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(u)}async handleChainStart(e,t,r,n,i,a,s,o){let l=this.getRunById(r)??this._createRunForChainStart(e,t,r,n,i,a,s,o);return await(this.onRunCreate?.(l)),await(this.onChainStart?.(l)),l}async handleChainEnd(e,t,r,n,i){let a=this.getRunById(t);if(!a)throw Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=gy(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),void 0!==i?.inputs&&(a.inputs=gy(i.inputs,"input")),await(this.onChainEnd?.(a)),await this._endTrace(a),a}async handleChainError(e,t,r,n,i){let a=this.getRunById(t);if(!a)throw Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),void 0!==i?.inputs&&(a.inputs=gy(i.inputs,"input")),await(this.onChainError?.(a)),await this._endTrace(a),a}_createRunForToolStart(e,t,r,n,i,a,s){let o=this._getExecutionOrder(n),l=Date.now(),c={id:r,name:s??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(c)}async handleToolStart(e,t,r,n,i,a,s){let o=this.getRunById(r)??this._createRunForToolStart(e,t,r,n,i,a,s);return await(this.onRunCreate?.(o)),await(this.onToolStart?.(o)),o}async handleToolEnd(e,t){let r=this.getRunById(t);if(!r||"tool"!==r?.run_type)throw Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(this.onToolEnd?.(r)),await this._endTrace(r),r}async handleToolError(e,t){let r=this.getRunById(t);if(!r||"tool"!==r?.run_type)throw Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(this.onToolError?.(r)),await this._endTrace(r),r}async handleAgentAction(e,t){let r=this.getRunById(t);if(!r||"chain"!==r?.run_type)return;let n=r;n.actions=n.actions||[],n.actions.push(e),n.events.push({name:"agent_action",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentAction?.(r))}async handleAgentEnd(e,t){let r=this.getRunById(t);r&&"chain"===r?.run_type&&(r.events.push({name:"agent_end",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentEnd?.(r)))}_createRunForRetrieverStart(e,t,r,n,i,a,s){let o=this._getExecutionOrder(n),l=Date.now(),c={id:r,name:s??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:t},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return this._addRunToRunMap(c)}async handleRetrieverStart(e,t,r,n,i,a,s){let o=this.getRunById(r)??this._createRunForRetrieverStart(e,t,r,n,i,a,s);return await(this.onRunCreate?.(o)),await(this.onRetrieverStart?.(o)),o}async handleRetrieverEnd(e,t){let r=this.getRunById(t);if(!r||"retriever"!==r?.run_type)throw Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(this.onRetrieverEnd?.(r)),await this._endTrace(r),r}async handleRetrieverError(e,t){let r=this.getRunById(t);if(!r||"retriever"!==r?.run_type)throw Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(this.onRetrieverError?.(r)),await this._endTrace(r),r}async handleText(e,t){let r=this.getRunById(t);r&&"chain"===r?.run_type&&(r.events.push({name:"text",time:(new Date).toISOString(),kwargs:{text:e}}),await(this.onText?.(r)))}async handleLLMNewToken(e,t,r,n,i,a){let s=this.getRunById(r);if(!s||"llm"!==s?.run_type)throw Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:(new Date).toISOString(),kwargs:{token:e,idx:t,chunk:a?.chunk}}),await(this.onLLMNewToken?.(s,e,{chunk:a?.chunk})),s}},by=$s(Zo(),1);function _y(e,t){return`${e.open}${t}${e.close}`}function wy(e,t){try{return JSON.stringify(e,null,2)}catch{return t}}function xy(e){return"string"==typeof e?e.trim():null==e?e:wy(e,e.toString())}function Ey(e){if(!e.end_time)return"";let t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}tm({},{ConsoleCallbackHandler:()=>Ay});var ky,{color:Sy}=by.default,Ay=class extends yy{name="console_callback_handler";persistRun(e){return Promise.resolve()}getParents(e){let t=[],r=e;for(;r.parent_run_id;){let e=this.runMap.get(r.parent_run_id);if(!e)break;t.push(e),r=e}return t}getBreadcrumbs(e){let t=[...this.getParents(e).reverse(),e].map((e,t,r)=>{let n=`${e.execution_order}:${e.run_type}:${e.name}`;return t===r.length-1?_y(by.default.bold,n):n}).join(" > ");return _y(Sy.grey,t)}onChainStart(e){let t=this.getBreadcrumbs(e);console.log(`${_y(Sy.green,"[chain/start]")} [${t}] Entering Chain run with input: ${wy(e.inputs,"[inputs]")}`)}onChainEnd(e){let t=this.getBreadcrumbs(e);console.log(`${_y(Sy.cyan,"[chain/end]")} [${t}] [${Ey(e)}] Exiting Chain run with output: ${wy(e.outputs,"[outputs]")}`)}onChainError(e){let t=this.getBreadcrumbs(e);console.log(`${_y(Sy.red,"[chain/error]")} [${t}] [${Ey(e)}] Chain run errored with error: ${wy(e.error,"[error]")}`)}onLLMStart(e){let t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(e=>e.trim())}:e.inputs;console.log(`${_y(Sy.green,"[llm/start]")} [${t}] Entering LLM run with input: ${wy(r,"[inputs]")}`)}onLLMEnd(e){let t=this.getBreadcrumbs(e);console.log(`${_y(Sy.cyan,"[llm/end]")} [${t}] [${Ey(e)}] Exiting LLM run with output: ${wy(e.outputs,"[response]")}`)}onLLMError(e){let t=this.getBreadcrumbs(e);console.log(`${_y(Sy.red,"[llm/error]")} [${t}] [${Ey(e)}] LLM run errored with error: ${wy(e.error,"[error]")}`)}onToolStart(e){let t=this.getBreadcrumbs(e);console.log(`${_y(Sy.green,"[tool/start]")} [${t}] Entering Tool run with input: "${xy(e.inputs.input)}"`)}onToolEnd(e){let t=this.getBreadcrumbs(e);console.log(`${_y(Sy.cyan,"[tool/end]")} [${t}] [${Ey(e)}] Exiting Tool run with output: "${xy(e.outputs?.output)}"`)}onToolError(e){let t=this.getBreadcrumbs(e);console.log(`${_y(Sy.red,"[tool/error]")} [${t}] [${Ey(e)}] Tool run errored with error: ${wy(e.error,"[error]")}`)}onRetrieverStart(e){let t=this.getBreadcrumbs(e);console.log(`${_y(Sy.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${wy(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){let t=this.getBreadcrumbs(e);console.log(`${_y(Sy.cyan,"[retriever/end]")} [${t}] [${Ey(e)}] Exiting Retriever run with output: ${wy(e.outputs,"[outputs]")}`)}onRetrieverError(e){let t=this.getBreadcrumbs(e);console.log(`${_y(Sy.red,"[retriever/error]")} [${t}] [${Ey(e)}] Retriever run errored with error: ${wy(e.error,"[error]")}`)}onAgentAction(e){let t=e,r=this.getBreadcrumbs(e);console.log(`${_y(Sy.blue,"[agent/action]")} [${r}] Agent selected action: ${wy(t.actions[t.actions.length-1],"[action]")}`)}},Ty=()=>{if(void 0===ky){let e="false"===Eg("LANGCHAIN_CALLBACKS_BACKGROUND")?{blockOnRootRunFinalization:!0}:{};ky=new ay(e)}return ky};var Ny=Symbol.for("ls:tracing_async_local_storage"),Iy=new class{getStore(){}run(e,t){return t()}};var My=new class{getInstance(){return globalThis[Ny]??Iy}initializeGlobalInstance(e){void 0===globalThis[Ny]&&(globalThis[Ny]=e)}};function Cy(e){return"function"==typeof e&&"langsmith:traceable"in e}tm({},{LangChainTracer:()=>Oy});var jy,Oy=class e extends yy{name="langchain_tracer";projectName;exampleId;client;replicas;usesRunTreeMap=!0;constructor(t={}){super(t);let{exampleId:r,projectName:n,client:i,replicas:a}=t;this.projectName=n??nv(),this.replicas=a,this.exampleId=r,this.client=i??Ty();let s=e.getTraceableRunTree();s&&this.updateFromRunTree(s)}async persistRun(e){}async onRunCreate(e){await(this.getRunTreeWithTracingConfig(e.id)?.postRun())}async onRunUpdate(e){await(this.getRunTreeWithTracingConfig(e.id)?.patchRun())}getRun(e){return this.runTreeMap.get(e)}updateFromRunTree(e){this.runTreeMap.set(e.id,e);let t=e,r=new Set;for(;t.parent_run&&!r.has(t.id)&&(r.add(t.id),t.parent_run);)t=t.parent_run;r.clear();let n=[t];for(;n.length>0;){let e=n.shift();e&&!r.has(e.id)&&(r.add(e.id),this.runTreeMap.set(e.id,e),e.child_runs&&n.push(...e.child_runs))}this.client=e.client??this.client,this.replicas=e.replicas??this.replicas,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(e){let t=this.runTreeMap.get(e);if(t)return new hy({...t,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return function(e=!1){let t=My.getInstance().getStore();if(!e&&void 0===t)throw Error("Could not get the current run tree.\n\nPlease make sure you are calling this method within a traceable function and that tracing is enabled.");return t}(!0)}catch{return}}},Ry=$s(to(),1);function Ly(){return typeof jy>"u"&&(jy=new("default"in Ry.default?Ry.default.default:Ry.default)({autoStart:!0,concurrency:1})),jy}async function Py(e,t){if(!0===t){let t=pm();void 0!==t?await t.run(void 0,async()=>e()):await e()}else(jy=Ly()).add(async()=>{let t=pm();void 0!==t?await t.run(void 0,async()=>e()):await e()})}async function Dy(){let e=Ty();await Promise.allSettled([typeof jy<"u"?jy.onIdle():Promise.resolve(),e.awaitPendingTraceBatches()])}tm({},{awaitAllCallbacks:()=>Dy,consumeCallback:()=>Py});function $y(e){let t=pm();if(void 0!==t)return t.getStore()?.[hm]?.[e]}var zy=Symbol("lc:configure_hooks");function By(e){return e?Array.isArray(e)||"name"in e?{callbacks:e}:e:{}}tm({},{BaseCallbackManager:()=>Uy,BaseRunManager:()=>Fy,CallbackManager:()=>Wy,CallbackManagerForChainRun:()=>qy,CallbackManagerForLLMRun:()=>Gy,CallbackManagerForRetrieverRun:()=>Hy,CallbackManagerForToolRun:()=>Vy,ensureHandler:()=>Zy,parseCallbackConfigArg:()=>By});var Uy=class{setHandler(e){return this.setHandlers([e])}},Fy=class{constructor(e,t,r,n,i,a,s,o){this.runId=e,this.handlers=t,this.inheritableHandlers=r,this.tags=n,this.inheritableTags=i,this.metadata=a,this.inheritableMetadata=s,this._parentRunId=o}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>Py(async()=>{try{await(t.handleText?.(e,this.runId,this._parentRunId,this.tags))}catch(ere){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${ere}`),t.raiseError)throw ere}},t.awaitHandlers)))}async handleCustomEvent(e,t,r,n,i){await Promise.all(this.handlers.map(r=>Py(async()=>{try{await(r.handleCustomEvent?.(e,t,this.runId,this.tags,this.metadata))}catch(J9){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleCustomEvent: ${J9}`),r.raiseError)throw J9}},r.awaitHandlers)))}},Hy=class extends Fy{getChild(e){let t=new Wy(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>Py(async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(ere){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw ere}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>Py(async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags))}catch(ere){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${ere}`),t.raiseError)throw e}},t.awaitHandlers)))}},Gy=class extends Fy{async handleLLMNewToken(e,t,r,n,i,a){await Promise.all(this.handlers.map(r=>Py(async()=>{if(!r.ignoreLLM)try{await(r.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch($re){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMNewToken: ${$re}`),r.raiseError)throw $re}},r.awaitHandlers)))}async handleLLMError(e,t,r,n,i){await Promise.all(this.handlers.map(t=>Py(async()=>{if(!t.ignoreLLM)try{await(t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags,i))}catch(J9){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMError: ${J9}`),t.raiseError)throw J9}},t.awaitHandlers)))}async handleLLMEnd(e,t,r,n,i){await Promise.all(this.handlers.map(t=>Py(async()=>{if(!t.ignoreLLM)try{await(t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags,i))}catch(J9){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMEnd: ${J9}`),t.raiseError)throw J9}},t.awaitHandlers)))}},qy=class extends Fy{getChild(e){let t=new Wy(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,r,n,i){await Promise.all(this.handlers.map(t=>Py(async()=>{if(!t.ignoreChain)try{await(t.handleChainError?.(e,this.runId,this._parentRunId,this.tags,i))}catch(J9){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainError: ${J9}`),t.raiseError)throw J9}},t.awaitHandlers)))}async handleChainEnd(e,t,r,n,i){await Promise.all(this.handlers.map(t=>Py(async()=>{if(!t.ignoreChain)try{await(t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,i))}catch(J9){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainEnd: ${J9}`),t.raiseError)throw J9}},t.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>Py(async()=>{if(!t.ignoreAgent)try{await(t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags))}catch(ere){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${ere}`),t.raiseError)throw ere}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>Py(async()=>{if(!t.ignoreAgent)try{await(t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(ere){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${ere}`),t.raiseError)throw ere}},t.awaitHandlers)))}},Vy=class extends Fy{getChild(e){let t=new Wy(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>Py(async()=>{if(!t.ignoreAgent)try{await(t.handleToolError?.(e,this.runId,this._parentRunId,this.tags))}catch(ere){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${ere}`),t.raiseError)throw ere}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>Py(async()=>{if(!t.ignoreAgent)try{await(t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(ere){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${ere}`),t.raiseError)throw ere}},t.awaitHandlers)))}},Wy=class e extends Uy{handlers=[];inheritableHandlers=[];tags=[];inheritableTags=[];metadata={};inheritableMetadata={};name="callback_manager";_parentRunId;constructor(e,t){super(),this.handlers=t?.handlers??this.handlers,this.inheritableHandlers=t?.inheritableHandlers??this.inheritableHandlers,this.tags=t?.tags??this.tags,this.inheritableTags=t?.inheritableTags??this.inheritableTags,this.metadata=t?.metadata??this.metadata,this.inheritableMetadata=t?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t,r=void 0,n=void 0,i=void 0,a=void 0,s=void 0,o=void 0){return Promise.all(t.map(async(t,n)=>{let a=0===n&&r?r:jg();return await Promise.all(this.handlers.map(r=>{if(!r.ignoreLLM)return vy(r)&&r._createRunForLLMStart(e,[t],a,this._parentRunId,i,this.tags,this.metadata,o),Py(async()=>{try{await(r.handleLLMStart?.(e,[t],a,this._parentRunId,i,this.tags,this.metadata,o))}catch(jre){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMStart: ${jre}`),r.raiseError)throw jre}},r.awaitHandlers)})),new Gy(a,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,r=void 0,n=void 0,i=void 0,a=void 0,s=void 0,o=void 0){return Promise.all(t.map(async(t,n)=>{let a=0===n&&r?r:jg();return await Promise.all(this.handlers.map(r=>{if(!r.ignoreLLM)return vy(r)&&r._createRunForChatModelStart(e,[t],a,this._parentRunId,i,this.tags,this.metadata,o),Py(async()=>{try{if(r.handleChatModelStart)await(r.handleChatModelStart?.(e,[t],a,this._parentRunId,i,this.tags,this.metadata,o));else if(r.handleLLMStart){let n=function(e,t="Human",r="AI"){let n=[];for(let i of e){let e;if("human"===i._getType())e=t;else if("ai"===i._getType())e=r;else if("system"===i._getType())e="System";else if("tool"===i._getType())e="Tool";else{if("generic"!==i._getType())throw Error(`Got unsupported message type: ${i._getType()}`);e=i.role}let a=i.name?`${i.name}, `:"",s="string"==typeof i.content?i.content:JSON.stringify(i.content,null,2);n.push(`${e}: ${a}${s}`)}return n.join("\n")}(t);await(r.handleLLMStart?.(e,[n],a,this._parentRunId,i,this.tags,this.metadata,o))}}catch(jre){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMStart: ${jre}`),r.raiseError)throw jre}},r.awaitHandlers)})),new Gy(a,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,r=jg(),n=void 0,i=void 0,a=void 0,s=void 0){return await Promise.all(this.handlers.map(i=>{if(!i.ignoreChain)return vy(i)&&i._createRunForChainStart(e,t,r,this._parentRunId,this.tags,this.metadata,n,s),Py(async()=>{try{await(i.handleChainStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,n,s))}catch(Lte){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleChainStart: ${Lte}`),i.raiseError)throw Lte}},i.awaitHandlers)})),new qy(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=jg(),n=void 0,i=void 0,a=void 0,s=void 0){return await Promise.all(this.handlers.map(n=>{if(!n.ignoreAgent)return vy(n)&&n._createRunForToolStart(e,t,r,this._parentRunId,this.tags,this.metadata,s),Py(async()=>{try{await(n.handleToolStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,s))}catch(Lte){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolStart: ${Lte}`),n.raiseError)throw Lte}},n.awaitHandlers)})),new Vy(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,r=jg(),n=void 0,i=void 0,a=void 0,s=void 0){return await Promise.all(this.handlers.map(n=>{if(!n.ignoreRetriever)return vy(n)&&n._createRunForRetrieverStart(e,t,r,this._parentRunId,this.tags,this.metadata,s),Py(async()=>{try{await(n.handleRetrieverStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,s))}catch(Lte){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverStart: ${Lte}`),n.raiseError)throw Lte}},n.awaitHandlers)})),new Hy(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,t,r,n,i){await Promise.all(this.handlers.map(n=>Py(async()=>{if(!n.ignoreCustomEvent)try{await(n.handleCustomEvent?.(e,t,r,this.tags,this.metadata))}catch($re){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleCustomEvent: ${$re}`),n.raiseError)throw $re}},n.awaitHandlers)))}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(let r of e)this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(let t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(t=[],r=!0){let n=new e(this._parentRunId);for(let e of this.handlers){let t=this.inheritableHandlers.includes(e);n.addHandler(e,t)}for(let e of this.tags){let t=this.inheritableTags.includes(e);n.addTags([e],t)}for(let e of Object.keys(this.metadata)){let t=Object.keys(this.inheritableMetadata).includes(e);n.addMetadata({[e]:this.metadata[e]},t)}for(let e of t)n.handlers.filter(e=>"console_callback_handler"===e.name).some(t=>t.name===e.name)||n.addHandler(e,r);return n}static fromHandlers(e){let t=new this;return t.addHandler(new class extends Pg{name=jg();constructor(){super(),Object.assign(this,e)}}),t}static configure(e,t,r,n,i,a,s){return this._configureSync(e,t,r,n,i,a,s)}static _configureSync(t,r,n,i,a,s,o){let l;(t||r)&&(Array.isArray(t)||!t?(l=new e,l.setHandlers(t?.map(Zy)??[],!0)):l=t,l=l.copy(Array.isArray(r)?r.map(Zy):r?.handlers,!1));let c="true"===Eg("LANGCHAIN_VERBOSE")||o?.verbose,u=Oy.getTraceableRunTree()?.tracingEnabled||!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(e=>"true"===Eg(e)),d=u||(Eg("LANGCHAIN_TRACING")??!1);if(c||d){if(l||(l=new e),c&&!l.handlers.some(e=>e.name===Ay.prototype.name)){let e=new Ay;l.addHandler(e,!0)}if(d&&!l.handlers.some(e=>"langchain_tracer"===e.name)&&u){let e=new Oy;l.addHandler(e,!0)}if(u){let e=Oy.getTraceableRunTree();e&&void 0===l._parentRunId&&(l._parentRunId=e.id,l.handlers.find(e=>"langchain_tracer"===e.name)?.updateFromRunTree(e))}}for(let{contextVar:h,inheritable:p=!0,handlerClass:f,envVar:m}of $y(zy)||[]){let t,r=m&&"true"===Eg(m)&&f,n=void 0!==h?$y(h):void 0;n&&Dg(n)?t=n:r&&(t=new f({})),void 0!==t&&(l||(l=new e),l.handlers.some(e=>e.name===t.name)||l.addHandler(t,p))}return(n||i)&&l&&(l.addTags(n??[]),l.addTags(i??[],!1)),(a||s)&&l&&(l.addMetadata(a??{}),l.addMetadata(s??{},!1)),l}};function Zy(e){return"name"in e?e:Pg.fromMethods(e)}var Ky=class{getStore(){}run(e,t){return t()}enterWith(e){}},Yy=new Ky,Jy=Symbol.for("lc:child_config"),Xy=new class{getInstance(){return pm()??Yy}getRunnableConfig(){return this.getInstance().getStore()?.extra?.[Jy]}runWithConfig(e,t,r){let n,i=Wy._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),a=this.getInstance(),s=a.getStore(),o=i?.getParentRunId(),l=i?.handlers?.find(e=>"langchain_tracer"===e?.name);return l&&o?n=l.getRunTreeWithTracingConfig(o):r||(n=new hy({name:"<runnable_lambda>",tracingEnabled:!1})),n&&(n.extra={...n.extra,[Jy]:e}),void 0!==s&&void 0!==s[hm]&&(void 0===n&&(n={}),n[hm]=s[hm]),a.run(n,t)}initializeGlobalInstance(e){void 0===pm()&&(e=>{globalThis[dm]=e})(e)}};tm({},{AsyncLocalStorageProviderSingleton:()=>Xy,MockAsyncLocalStorage:()=>Ky,_CONTEXT_VARIABLES_KEY:()=>hm});async function Qy(e){return Wy._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)}function eb(...e){let t={};for(let r of e.filter(e=>!!e))for(let e of Object.keys(r))if("metadata"===e)t[e]={...t[e],...r[e]};else if("tags"===e){let n=t[e]??[];t[e]=[...new Set(n.concat(r[e]??[]))]}else if("configurable"===e)t[e]={...t[e],...r[e]};else if("timeout"===e)void 0===t.timeout?t.timeout=r.timeout:void 0!==r.timeout&&(t.timeout=Math.min(t.timeout,r.timeout));else if("signal"===e)void 0===t.signal?t.signal=r.signal:void 0!==r.signal&&("any"in AbortSignal?t.signal=AbortSignal.any([t.signal,r.signal]):t.signal=r.signal);else if("callbacks"===e){let e=t.callbacks,n=r.callbacks;if(Array.isArray(n))if(e)if(Array.isArray(e))t.callbacks=e.concat(n);else{let r=e.copy();for(let e of n)r.addHandler(Zy(e),!0);t.callbacks=r}else t.callbacks=n;else if(n)if(e)if(Array.isArray(e)){let r=n.copy();for(let t of e)r.addHandler(Zy(t),!0);t.callbacks=r}else t.callbacks=new Wy(n._parentRunId,{handlers:e.handlers.concat(n.handlers),inheritableHandlers:e.inheritableHandlers.concat(n.inheritableHandlers),tags:Array.from(new Set(e.tags.concat(n.tags))),inheritableTags:Array.from(new Set(e.inheritableTags.concat(n.inheritableTags))),metadata:{...e.metadata,...n.metadata}});else t.callbacks=n}else{let n=e;t[n]=r[n]??t[n]}return t}var tb=new Set(["string","number","boolean"]);function rb(e){let t=Xy.getRunnableConfig(),r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(t){let{runId:e,runName:n,...i}=t;r=Object.entries(i).reduce((e,[t,r])=>(void 0!==r&&(e[t]=r),e),r)}if(e&&(r=Object.entries(e).reduce((e,[t,r])=>(void 0!==r&&(e[t]=r),e),r)),r?.configurable)for(let n of Object.keys(r.configurable))tb.has(typeof r.configurable[n])&&!r.metadata?.[n]&&(r.metadata||(r.metadata={}),r.metadata[n]=r.configurable[n]);if(void 0!==r.timeout){if(r.timeout<=0)throw Error("Timeout must be a positive number");let e=AbortSignal.timeout(r.timeout);void 0!==r.signal?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,e])):r.signal=e,delete r.timeout}return r}function nb(e={},{callbacks:t,maxConcurrency:r,recursionLimit:n,runName:i,configurable:a,runId:s}={}){let o=rb(e);return void 0!==t&&(delete o.runName,o.callbacks=t),void 0!==n&&(o.recursionLimit=n),void 0!==r&&(o.maxConcurrency=r),void 0!==i&&(o.runName=i),void 0!==a&&(o.configurable={...o.configurable,...a}),void 0!==s&&delete o.runId,o}function ib(e){if(e)return{configurable:e.configurable,recursionLimit:e.recursionLimit,callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,maxConcurrency:e.maxConcurrency,timeout:e.timeout,signal:e.signal,store:e.store}}async function ab(e,t){if(void 0===t)return e;let r;return Promise.race([e.catch(e=>{if(!t?.aborted)throw e}),new Promise((e,n)=>{r=()=>{n(sb(t))},t.addEventListener("abort",r),t.aborted&&n(sb(t))})]).finally(()=>t.removeEventListener("abort",r))}function sb(e){return e?.reason instanceof Error?e.reason:"string"==typeof e?.reason?Error(e.reason):Error("Aborted")}tm({},{AsyncGeneratorWithSetup:()=>ub,IterableReadableStream:()=>ob,atee:()=>lb,concat:()=>cb,pipeGeneratorWithSetup:()=>db});var ob=class e extends ReadableStream{reader;ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{let e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(xre){throw this.reader.releaseLock(),xre}}async return(){if(this.ensureReader(),this.locked){let e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){let e=this.reader.cancel();this.reader.releaseLock(),await e}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(t){let r=t.getReader();return new e({start:e=>function t(){return r.read().then(({done:r,value:n})=>{if(!r)return e.enqueue(n),t();e.close()})}(),cancel(){r.releaseLock()}})}static fromAsyncGenerator(t){return new e({async pull(e){let{value:r,done:n}=await t.next();n&&e.close(),e.enqueue(r)},async cancel(e){await t.return(e)}})}};function lb(e,t=2){let r=Array.from({length:t},()=>[]);return r.map(async function*(t){for(;;)if(0===t.length){let t=await e.next();for(let e of r)e.push(t)}else{if(t[0].done)return;yield t.shift().value}})}function cb(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.concat(t);if("string"==typeof e&&"string"==typeof t)return e+t;if("number"==typeof e&&"number"==typeof t)return e+t;if("concat"in e&&"function"==typeof e.concat)return e.concat(t);if("object"==typeof e&&"object"==typeof t){let r={...e};for(let[e,n]of Object.entries(t))e in r&&!Array.isArray(r[e])?r[e]=cb(r[e],n):r[e]=n;return r}throw Error(`Cannot concat ${typeof e} and ${typeof t}`)}var ub=class{generator;setup;config;signal;firstResult;firstResultUsed=!1;constructor(e){this.generator=e.generator,this.config=e.config,this.signal=e.signal??this.config?.signal,this.setup=new Promise((t,r)=>{Xy.runWithConfig(ib(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(t,r):this.firstResult.then(e=>t(void 0),r)},!0)})}async next(...e){return this.signal?.throwIfAborted(),this.firstResultUsed?Xy.runWithConfig(ib(this.config),this.signal?async()=>ab(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};async function db(e,t,r,n,...i){let a=new ub({generator:t,startSetup:r,signal:n}),s=await a.setup;return{output:e(a,s,...i),setup:s}}
/*!
* https://github.com/Starcounter-Jack/JSON-Patch
* (c) 2017-2022 Joachim Wester
* MIT licensed
*/var hb=Object.prototype.hasOwnProperty;function pb(e,t){return hb.call(e,t)}function fb(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function mb(e){let t,r=0,n=e.length;for(;r<n;){if(t=e.charCodeAt(r),!(t>=48&&t<=57))return!1;r++}return!0}function gb(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function vb(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(vb(e[r]))return!0}else if("object"==typeof e){let r=function(e){if(Array.isArray(e)){let t=Array(e.length);for(let e=0;e<t.length;e++)t[e]=""+e;return t}if(Object.keys)return Object.keys(e);let t=[];for(let r in e)pb(e,r)&&t.push(r);return t}(e),n=r.length;for(var t=0;t<n;t++)if(vb(e[r[t]]))return!0}return!1}function yb(e,t){let r=[e];for(let n in t){let e="object"==typeof t[n]?JSON.stringify(t[n],null,2):t[n];typeof e<"u"&&r.push(`${n}: ${e}`)}return r.join("\n")}var bb=class extends Error{constructor(e,t,r,n,i){super(yb(e,{name:t,index:r,operation:n,tree:i})),this.name=t,this.index=r,this.operation=n,this.tree=i,Object.setPrototypeOf(this,new.target.prototype),this.message=yb(e,{name:t,index:r,operation:n,tree:i})}},_b={};tm(_b,{JsonPatchError:()=>wb,_areEquals:()=>Cb,applyOperation:()=>Ab,applyPatch:()=>Tb,applyReducer:()=>Nb,deepClone:()=>xb,getValueByPointer:()=>Sb,validate:()=>Mb,validator:()=>Ib});var wb=bb,xb=fb,Eb={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){let n=Sb(r,this.path);n&&(n=fb(n));let i=Ab(r,{op:"remove",path:this.from}).removed;return Ab(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:n}},copy:function(e,t,r){let n=Sb(r,this.from);return Ab(r,{op:"add",path:this.path,value:fb(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:Cb(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},kb={add:function(e,t,r){return mb(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:Eb.move,copy:Eb.copy,test:Eb.test,_get:Eb._get};function Sb(e,t){if(""==t)return e;var r={op:"_get",path:t};return Ab(e,r),r.value}function Ab(e,t,r=!1,n=!0,i=!0,a=0){if(r&&("function"==typeof r?r(t,0,e,t.path):Ib(t,0)),""===t.path){let n={newDocument:e};if("add"===t.op)return n.newDocument=t.value,n;if("replace"===t.op)return n.newDocument=t.value,n.removed=e,n;if("move"===t.op||"copy"===t.op)return n.newDocument=Sb(e,t.from),"move"===t.op&&(n.removed=e),n;if("test"===t.op){if(n.test=Cb(e,t.value),!1===n.test)throw new wb("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return n.newDocument=e,n}if("remove"===t.op)return n.removed=e,n.newDocument=null,n;if("_get"===t.op)return t.value=e,n;if(r)throw new wb("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return n}{n||(e=fb(e));let s,o,l,c=(t.path||"").split("/"),u=e,d=1,h=c.length;for(l="function"==typeof r?r:Ib;;){if(o=c[d],o&&-1!=o.indexOf("~")&&(o=gb(o)),i&&("__proto__"==o||"prototype"==o&&d>0&&"constructor"==c[d-1]))throw TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&void 0===s&&(void 0===u[o]?s=c.slice(0,d).join("/"):d==h-1&&(s=t.path),void 0!==s&&l(t,0,e,s)),d++,Array.isArray(u)){if("-"===o)o=u.length;else{if(r&&!mb(o))throw new wb("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);mb(o)&&(o=~~o)}if(d>=h){if(r&&"add"===t.op&&o>u.length)throw new wb("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);let n=kb[t.op].call(t,u,o,e);if(!1===n.test)throw new wb("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return n}}else if(d>=h){let r=Eb[t.op].call(t,u,o,e);if(!1===r.test)throw new wb("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return r}if(u=u[o],r&&d<h&&(!u||"object"!=typeof u))throw new wb("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function Tb(e,t,r,n=!0,i=!0){if(r&&!Array.isArray(t))throw new wb("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=fb(e));let a=Array(t.length);for(let s=0,o=t.length;s<o;s++)a[s]=Ab(e,t[s],r,!0,i,s),e=a[s].newDocument;return a.newDocument=e,a}function Nb(e,t,r){let n=Ab(e,t);if(!1===n.test)throw new wb("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return n.newDocument}function Ib(e,t,r,n){if("object"!=typeof e||null===e||Array.isArray(e))throw new wb("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(!Eb[e.op])throw new wb("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r);if("string"!=typeof e.path)throw new wb("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new wb('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new wb("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new wb("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&vb(e.value))throw new wb("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);if(r)if("add"==e.op){var i=e.path.split("/").length,a=n.split("/").length;if(i!==a+1&&i!==a)throw new wb("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==n)throw new wb("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if("move"===e.op||"copy"===e.op){var s=Mb([{op:"_get",path:e.from,value:void 0}],r);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new wb("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}function Mb(e,t,r){try{if(!Array.isArray(e))throw new wb("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Tb(fb(t),fb(e),r||!0);else{r=r||Ib;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(ine){if(ine instanceof wb)return ine;throw ine}}function Cb(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,i,a=Array.isArray(e),s=Array.isArray(t);if(a&&s){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(!Cb(e[r],t[r]))return!1;return!0}if(a!=s)return!1;var o=Object.keys(e);if((n=o.length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!t.hasOwnProperty(o[r]))return!1;for(r=n;0!==r--;)if(!Cb(e[i=o[r]],t[i]))return!1;return!0}return e!=e&&t!=t}tm({},{LogStreamCallbackHandler:()=>Db,RunLog:()=>Ob,RunLogPatch:()=>jb,isLogStreamHandler:()=>Rb});var jb=class{ops;constructor(e){this.ops=e.ops??[]}concat(e){let t=this.ops.concat(e.ops),r=Tb({},t);return new Ob({ops:t,state:r[r.length-1].newDocument})}},Ob=class e extends jb{state;constructor(e){super(e),this.state=e.state}concat(t){let r=this.ops.concat(t.ops),n=Tb(this.state,t.ops);return new e({ops:r,state:n[n.length-1].newDocument})}static fromRunLogPatch(t){let r=Tb({},t.ops);return new e({ops:t.ops,state:r[r.length-1].newDocument})}},Rb=e=>"log_stream_tracer"===e.name;async function Lb(e,t){if("original"===t)throw Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");let{inputs:r}=e;return["retriever","llm","prompt"].includes(e.run_type)?r:1!==Object.keys(r).length||""!==r?.input?r.input:void 0}async function Pb(e,t){let{outputs:r}=e;return"original"===t||["retriever","llm","prompt"].includes(e.run_type)?r:void 0!==r&&1===Object.keys(r).length&&void 0!==r?.output?r.output:r}var Db=class extends yy{autoClose=!0;includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;_schemaFormat="original";rootId;keyMapByRunId={};counterMapByRunName={};transformStream;writer;receiveStream;name="log_stream_tracer";lc_prefer_streaming=!0;constructor(e){super({_awaitHandler:!0,...e}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=ob.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;let t=e.tags??[],r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.run_type)),void 0!==this.includeTags&&(r=r||void 0!==t.find(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.run_type)),void 0!==this.excludeTags&&(r=r&&t.every(e=>!this.excludeTags?.includes(e))),r}async*tapOutputIterable(e,t){for await(let r of t){if(e!==this.rootId){let t=this.keyMapByRunId[e];t&&await this.writer.write(new jb({ops:[{op:"add",path:`/logs/${t}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){if(void 0===this.rootId&&(this.rootId=e.id,await this.writer.write(new jb({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;void 0===this.counterMapByRunName[e.name]&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;let t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=1===t?e.name:`${e.name}:${t}`;let r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};"streaming_events"===this._schemaFormat&&(r.inputs=await Lb(e,this._schemaFormat)),await this.writer.write(new jb({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{let t=this.keyMapByRunId[e.id];if(void 0===t)return;let r=[];"streaming_events"===this._schemaFormat&&r.push({op:"replace",path:`/logs/${t}/inputs`,value:await Lb(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${t}/final_output`,value:await Pb(e,this._schemaFormat)}),void 0!==e.end_time&&r.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});let n=new jb({ops:r});await this.writer.write(n)}finally{if(e.id===this.rootId){let t=new jb({ops:[{op:"replace",path:"/final_output",value:await Pb(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,r){let n,i=this.keyMapByRunId[e.id];if(void 0===i)return;n=void 0!==e.inputs.messages?function(e){return void 0!==e&&void 0!==e.message}(r?.chunk)?r?.chunk:new fg({id:`run-${e.id}`,content:t}):t;let a=new jb({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${i}/streamed_output/-`,value:n}]});await this.writer.write(a)}};tm({},{ChatGenerationChunk:()=>Bb,GenerationChunk:()=>zb,RUN_KEY:()=>$b});var $b="__run",zb=class e{text;generationInfo;constructor(e){this.text=e.text,this.generationInfo=e.generationInfo}concat(t){return new e({text:this.text+t.text,generationInfo:{...this.generationInfo,...t.generationInfo}})}},Bb=class e extends zb{message;constructor(e){super(e),this.message=e.message}concat(t){return new e({text:this.text+t.text,generationInfo:{...this.generationInfo,...t.generationInfo},message:this.message.concat(t.message)})}};function Ub({name:e,serialized:t}){return void 0!==e?e:void 0!==t?.name?t.name:void 0!==t?.id&&Array.isArray(t?.id)?t.id[t.id.length-1]:"Unnamed"}var Fb=e=>"event_stream_tracer"===e.name,Hb=class extends yy{autoClose=!0;includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;runInfoMap=new Map;tappedPromises=new Map;transformStream;writer;receiveStream;name="event_stream_tracer";lc_prefer_streaming=!0;constructor(e){super({_awaitHandler:!0,...e}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=ob.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){let t=e.tags??[],r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.runType)),void 0!==this.includeTags&&(r=r||void 0!==t.find(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.runType)),void 0!==this.excludeTags&&(r=r&&t.every(e=>!this.excludeTags?.includes(e))),r}async*tapOutputIterable(e,t){let r=await t.next();if(r.done)return;let n=this.runInfoMap.get(e);if(void 0===n)return void(yield r.value);function i(e,t){return"llm"===e&&"string"==typeof t?new zb({text:t}):t}let a=this.tappedPromises.get(e);if(void 0===a){let s;a=new Promise(e=>{s=e}),this.tappedPromises.set(e,a);try{let a={event:`on_${n.runType}_stream`,run_id:e,name:n.name,tags:n.tags,metadata:n.metadata,data:{}};await this.send({...a,data:{chunk:i(n.runType,r.value)}},n),yield r.value;for await(let e of t)"tool"!==n.runType&&"retriever"!==n.runType&&await this.send({...a,data:{chunk:i(n.runType,e)}},n),yield e}finally{s?.()}}else{yield r.value;for await(let e of t)yield e}}async send(e,t){this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){let r=this.tappedPromises.get(e.run_id);void 0!==r?r.then(()=>{this.send(e,t)}):await this.send(e,t)}async onLLMStart(e){let t=Ub(e),r=void 0!==e.inputs.messages?"chat_model":"llm",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,n);let i=`on_${r}_start`;await this.send({event:i,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onLLMNewToken(e,t,r){let n,i,a=this.runInfoMap.get(e.id);if(void 0===a)throw Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(1!==this.runInfoMap.size){if("chat_model"===a.runType)i="on_chat_model_stream",n=void 0===r?.chunk?new fg({content:t,id:`run-${e.id}`}):r.chunk.message;else{if("llm"!==a.runType)throw Error(`Unexpected run type ${a.runType}`);i="on_llm_stream",n=void 0===r?.chunk?new zb({text:t}):r.chunk}await this.send({event:i,data:{chunk:n},run_id:e.id,name:a.name,tags:a.tags,metadata:a.metadata},a)}}async onLLMEnd(e){let t,r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===r)throw Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);let n,i=e.outputs?.generations;if("chat_model"===r.runType){for(let e of i??[]){if(void 0!==n)break;n=e[0]?.message}t="on_chat_model_end"}else{if("llm"!==r.runType)throw Error(`onLLMEnd: Unexpected run type: ${r.runType}`);n={generations:i?.map(e=>e.map(e=>({text:e.text,generationInfo:e.generationInfo}))),llmOutput:e.outputs?.llmOutput??{}},t="on_llm_end"}await this.sendEndEvent({event:t,data:{output:n,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onChainStart(e){let t=Ub(e),r=e.run_type??"chain",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:e.run_type},i={};""===e.inputs.input&&1===Object.keys(e.inputs).length?(i={},n.inputs={}):void 0!==e.inputs.input?(i.input=e.inputs.input,n.inputs=e.inputs.input):(i.input=e.inputs,n.inputs=e.inputs),this.runInfoMap.set(e.id,n),await this.send({event:`on_${r}_start`,data:i,name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onChainEnd(e){let t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw Error(`onChainEnd: Run ID ${e.id} not found in run map.`);let r=`on_${e.run_type}_end`,n=e.inputs??t.inputs??{},i={output:e.outputs?.output??e.outputs,input:n};n.input&&1===Object.keys(n).length&&(i.input=n.input,t.inputs=n.input),await this.sendEndEvent({event:r,data:i,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)}async onToolStart(e){let t=Ub(e),r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:e.extra?.metadata??{}},r)}async onToolEnd(e){let t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(void 0===t.inputs)throw Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);let r=void 0===e.outputs?.output?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){let t=Ub(e),r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,r),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},r)}async onRetrieverEnd(e){let t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:e.outputs?.documents??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,r){let n=this.runInfoMap.get(r);if(void 0===n)throw Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:n.tags,metadata:n.metadata,data:t},n)}async finish(){let e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}},Gb=$s(Ks(),1),qb=$s(to(),1);tm({},{AsyncCaller:()=>Zb});var Vb=[400,401,402,403,404,405,406,407,409],Wb=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||"AbortError"===e.name)throw e;if("ECONNABORTED"===e?.code)throw e;let t=e?.response?.status??e?.status;if(t&&Vb.includes(+t))throw e;if("insufficient_quota"===e?.error?.code){let t=Error(e?.message);throw t.name="InsufficientQuotaError",t}},Zb=class{maxConcurrency;maxRetries;onFailedAttempt;queue;constructor(e){this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??Wb;let t="default"in qb.default?qb.default.default:qb.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>Gb.default(()=>e(...t).catch(e=>{throw e instanceof Error?e:Error(e)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){if(e.signal){let n;return Promise.race([this.call(t,...r),new Promise((t,r)=>{n=()=>{r(sb(e.signal))},e.signal?.addEventListener("abort",n)})]).finally(()=>{e.signal&&n&&e.signal.removeEventListener("abort",n)})}return this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(e=>e.ok?e:Promise.reject(e)))}},Kb=class extends yy{name="RootListenersTracer";rootId;config;argOnStart;argOnEnd;argOnError;constructor({config:e,onStart:t,onEnd:r,onError:n}){super({_awaitHandler:!0}),this.config=e,this.argOnStart=t,this.argOnEnd=r,this.argOnError=n}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}};function Yb(e){return!!e&&e.lc_runnable}var Jb=class{includeNames;includeTypes;includeTags;excludeNames;excludeTypes;excludeTags;constructor(e){this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let r=void 0===this.includeNames&&void 0===this.includeTypes&&void 0===this.includeTags,n=e.tags??[];return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(t)),void 0!==this.includeTags&&(r=r||n.some(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(t)),void 0!==this.excludeTags&&(r=r&&n.every(e=>!this.excludeTags?.includes(e))),r}},Xb={};Fs(Xb,{version:()=>SE,util:()=>s_,treeifyError:()=>bw,toJSONSchema:()=>aI,toDotPath:()=>_w,safeParseAsync:()=>Iw,safeParse:()=>Tw,safeEncodeAsync:()=>Hw,safeEncode:()=>zw,safeDecodeAsync:()=>qw,safeDecode:()=>Uw,registry:()=>eT,regexes:()=>Vw,prettifyError:()=>ww,parseAsync:()=>Sw,parse:()=>Ew,locales:()=>cS,isValidJWT:()=>QE,isValidBase64URL:()=>YE,isValidBase64:()=>ZE,globalRegistry:()=>tT,globalConfig:()=>i_,formatError:()=>yw,flattenError:()=>vw,encodeAsync:()=>Lw,encode:()=>Cw,decodeAsync:()=>Dw,decode:()=>Ow,config:()=>a_,clone:()=>z_,_xid:()=>gT,_void:()=>YT,_uuidv7:()=>cT,_uuidv6:()=>lT,_uuidv4:()=>oT,_uuid:()=>sT,_url:()=>uT,_uppercase:()=>vN,_unknown:()=>ZT,_union:()=>IN,_undefined:()=>qT,_ulid:()=>mT,_uint64:()=>HT,_uint32:()=>DT,_tuple:()=>jN,_trim:()=>SN,_transform:()=>BN,_toUpperCase:()=>TN,_toLowerCase:()=>AN,_templateLiteral:()=>KN,_symbol:()=>GT,_superRefine:()=>eI,_success:()=>qN,_stringbool:()=>rI,_stringFormat:()=>nI,_string:()=>rT,_startsWith:()=>bN,_size:()=>dN,_set:()=>LN,_safeParseAsync:()=>Nw,_safeParse:()=>Aw,_safeEncodeAsync:()=>Fw,_safeEncode:()=>$w,_safeDecodeAsync:()=>Gw,_safeDecode:()=>Bw,_regex:()=>mN,_refine:()=>QN,_record:()=>ON,_readonly:()=>ZN,_property:()=>wN,_promise:()=>JN,_positive:()=>iN,_pipe:()=>WN,_parseAsync:()=>kw,_parse:()=>xw,_overwrite:()=>EN,_optional:()=>UN,_number:()=>CT,_nullable:()=>FN,_null:()=>VT,_normalize:()=>kN,_nonpositive:()=>sN,_nonoptional:()=>GN,_nonnegative:()=>oN,_never:()=>KT,_negative:()=>aN,_nativeEnum:()=>DN,_nanoid:()=>hT,_nan:()=>QT,_multipleOf:()=>lN,_minSize:()=>uN,_minLength:()=>pN,_min:()=>nN,_mime:()=>xN,_maxSize:()=>cN,_maxLength:()=>hN,_max:()=>tN,_map:()=>RN,_lte:()=>tN,_lt:()=>eN,_lowercase:()=>gN,_literal:()=>$N,_length:()=>fN,_lazy:()=>YN,_ksuid:()=>vT,_jwt:()=>ST,_isoTime:()=>IT,_isoDuration:()=>MT,_isoDateTime:()=>TT,_isoDate:()=>NT,_ipv6:()=>bT,_ipv4:()=>yT,_intersection:()=>CN,_int64:()=>FT,_int32:()=>PT,_int:()=>OT,_includes:()=>yN,_guid:()=>aT,_gte:()=>nN,_gt:()=>rN,_float64:()=>LT,_float32:()=>RT,_file:()=>zN,_enum:()=>PN,_endsWith:()=>_N,_encodeAsync:()=>Rw,_encode:()=>Mw,_emoji:()=>dT,_email:()=>iT,_e164:()=>kT,_discriminatedUnion:()=>MN,_default:()=>HN,_decodeAsync:()=>Pw,_decode:()=>jw,_date:()=>JT,_custom:()=>XN,_cuid2:()=>fT,_cuid:()=>pT,_coercedString:()=>nT,_coercedNumber:()=>jT,_coercedDate:()=>XT,_coercedBoolean:()=>zT,_coercedBigint:()=>UT,_cidrv6:()=>wT,_cidrv4:()=>_T,_check:()=>tI,_catch:()=>VN,_boolean:()=>$T,_bigint:()=>BT,_base64url:()=>ET,_base64:()=>xT,_array:()=>NN,_any:()=>WT,TimePrecision:()=>AT,NEVER:()=>Qb,JSONSchemaGenerator:()=>iI,JSONSchema:()=>oI,Doc:()=>kE,$output:()=>JA,$input:()=>XA,$constructor:()=>e_,$brand:()=>t_,$ZodXID:()=>$E,$ZodVoid:()=>pk,$ZodUnknown:()=>dk,$ZodUnion:()=>Ek,$ZodUndefined:()=>lk,$ZodUUID:()=>ME,$ZodURL:()=>jE,$ZodULID:()=>DE,$ZodType:()=>AE,$ZodTuple:()=>Nk,$ZodTransform:()=>$k,$ZodTemplateLiteral:()=>nS,$ZodSymbol:()=>ok,$ZodSuccess:()=>Wk,$ZodStringFormat:()=>NE,$ZodString:()=>TE,$ZodSet:()=>Ok,$ZodRegistry:()=>QA,$ZodRecord:()=>Mk,$ZodRealError:()=>gw,$ZodReadonly:()=>tS,$ZodPromise:()=>aS,$ZodPrefault:()=>Gk,$ZodPipe:()=>Yk,$ZodOptional:()=>Bk,$ZodObjectJIT:()=>wk,$ZodObject:()=>_k,$ZodNumberFormat:()=>nk,$ZodNumber:()=>rk,$ZodNullable:()=>Uk,$ZodNull:()=>ck,$ZodNonOptional:()=>qk,$ZodNever:()=>hk,$ZodNanoID:()=>RE,$ZodNaN:()=>Kk,$ZodMap:()=>Ck,$ZodLiteral:()=>Pk,$ZodLazy:()=>sS,$ZodKSUID:()=>zE,$ZodJWT:()=>ek,$ZodIntersection:()=>Sk,$ZodISOTime:()=>FE,$ZodISODuration:()=>HE,$ZodISODateTime:()=>BE,$ZodISODate:()=>UE,$ZodIPv6:()=>qE,$ZodIPv4:()=>GE,$ZodGUID:()=>IE,$ZodFunction:()=>iS,$ZodFile:()=>Dk,$ZodError:()=>mw,$ZodEnum:()=>Lk,$ZodEncodeError:()=>n_,$ZodEmoji:()=>OE,$ZodEmail:()=>CE,$ZodE164:()=>XE,$ZodDiscriminatedUnion:()=>kk,$ZodDefault:()=>Fk,$ZodDate:()=>fk,$ZodCustomStringFormat:()=>tk,$ZodCustom:()=>oS,$ZodCodec:()=>Xk,$ZodCheckUpperCase:()=>gE,$ZodCheckStringFormat:()=>pE,$ZodCheckStartsWith:()=>yE,$ZodCheckSizeEquals:()=>cE,$ZodCheckRegex:()=>fE,$ZodCheckProperty:()=>wE,$ZodCheckOverwrite:()=>EE,$ZodCheckNumberFormat:()=>aE,$ZodCheckMultipleOf:()=>iE,$ZodCheckMinSize:()=>lE,$ZodCheckMinLength:()=>dE,$ZodCheckMimeType:()=>xE,$ZodCheckMaxSize:()=>oE,$ZodCheckMaxLength:()=>uE,$ZodCheckLowerCase:()=>mE,$ZodCheckLessThan:()=>rE,$ZodCheckLengthEquals:()=>hE,$ZodCheckIncludes:()=>vE,$ZodCheckGreaterThan:()=>nE,$ZodCheckEndsWith:()=>bE,$ZodCheckBigIntFormat:()=>sE,$ZodCheck:()=>eE,$ZodCatch:()=>Zk,$ZodCUID2:()=>PE,$ZodCUID:()=>LE,$ZodCIDRv6:()=>WE,$ZodCIDRv4:()=>VE,$ZodBoolean:()=>ik,$ZodBigIntFormat:()=>sk,$ZodBigInt:()=>ak,$ZodBase64URL:()=>JE,$ZodBase64:()=>KE,$ZodAsyncError:()=>r_,$ZodArray:()=>gk,$ZodAny:()=>uk});var Qb=Object.freeze({status:"aborted"});function e_(e,t,r){function n(r,n){var i;Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(i=r._zod).traits??(i.traits=new Set),r._zod.traits.add(e),t(r,n);for(let e in s.prototype)e in r||Object.defineProperty(r,e,{value:s.prototype[e].bind(r)});r._zod.constr=s,r._zod.def=n}let i=r?.Parent??Object;class a extends i{}function s(e){var t;let i=r?.Parent?new a:this;n(i,e),(t=i._zod).deferred??(t.deferred=[]);for(let r of i._zod.deferred)r();return i}return Object.defineProperty(a,"name",{value:e}),Object.defineProperty(s,"init",{value:n}),Object.defineProperty(s,Symbol.hasInstance,{value:t=>!!(r?.Parent&&t instanceof r.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}var t_=Symbol("zod_brand");class r_ extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class n_ extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}var i_={};function a_(e){return e&&Object.assign(i_,e),i_}var s_={};function o_(e){return e}function l_(e){return e}function c_(e){}function u_(e){throw Error()}function d_(e){}function h_(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function p_(e,t="|"){return e.map(e=>F_(e)).join(t)}function f_(e,t){return"bigint"==typeof t?t.toString():t}function m_(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function g_(e){return null==e}function v_(e){let t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function y_(e,t){let r=(e.toString().split(".")[1]||"").length,n=t.toString(),i=(n.split(".")[1]||"").length;if(0===i&&/\d?e-\d?/.test(n)){let e=n.match(/\d?e-(\d?)/);e?.[1]&&(i=Number.parseInt(e[1]))}let a=r>i?r:i;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}Fs(s_,{unwrapMessage:()=>tw,uint8ArrayToHex:()=>hw,uint8ArrayToBase64url:()=>uw,uint8ArrayToBase64:()=>lw,stringifyPrimitive:()=>F_,shallowClone:()=>O_,safeExtend:()=>K_,required:()=>X_,randomString:()=>T_,propertyKeyTypes:()=>P_,promiseAllObject:()=>A_,primitiveTypes:()=>D_,prefixIssues:()=>ew,pick:()=>V_,partial:()=>J_,optionalKeys:()=>H_,omit:()=>W_,objectClone:()=>w_,numKeys:()=>R_,nullish:()=>g_,normalizeParams:()=>B_,mergeDefs:()=>E_,merge:()=>Y_,jsonStringifyReplacer:()=>f_,joinValues:()=>p_,issue:()=>aw,isPlainObject:()=>j_,isObject:()=>M_,hexToUint8Array:()=>dw,getSizableOrigin:()=>nw,getParsedType:()=>L_,getLengthableOrigin:()=>iw,getEnumValues:()=>h_,getElementAtPath:()=>S_,floatSafeRemainder:()=>y_,finalizeIssue:()=>rw,extend:()=>Z_,escapeRegex:()=>$_,esc:()=>N_,defineLazy:()=>__,createTransparentProxy:()=>U_,cloneDef:()=>k_,clone:()=>z_,cleanRegex:()=>v_,cleanEnum:()=>sw,captureStackTrace:()=>I_,cached:()=>m_,base64urlToUint8Array:()=>cw,base64ToUint8Array:()=>ow,assignProp:()=>x_,assertNotEqual:()=>l_,assertNever:()=>u_,assertIs:()=>c_,assertEqual:()=>o_,assert:()=>d_,allowsEval:()=>C_,aborted:()=>Q_,NUMBER_FORMAT_RANGES:()=>G_,Class:()=>pw,BIGINT_FORMAT_RANGES:()=>q_});var b_=Symbol("evaluating");function __(e,t,r){let n;Object.defineProperty(e,t,{get(){if(n!==b_)return void 0===n&&(n=b_,n=r()),n},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function w_(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function x_(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function E_(...e){let t={};for(let r of e){let e=Object.getOwnPropertyDescriptors(r);Object.assign(t,e)}return Object.defineProperties({},t)}function k_(e){return E_(e._zod.def)}function S_(e,t){return t?t.reduce((e,t)=>e?.[t],e):e}function A_(e){let t=Object.keys(e),r=t.map(t=>e[t]);return Promise.all(r).then(e=>{let r={};for(let n=0;n<t.length;n++)r[t[n]]=e[n];return r})}function T_(e=10){let t="";for(let r=0;r<e;r++)t+="abcdefghijklmnopqrstuvwxyz"[Math.floor(26*Math.random())];return t}function N_(e){return JSON.stringify(e)}var I_="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function M_(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}var C_=m_(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(Ms){return!1}});function j_(e){if(!1===M_(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!1!==M_(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function O_(e){return j_(e)?{...e}:Array.isArray(e)?[...e]:e}function R_(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}var L_=e=>{let t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":null===e?"null":e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?"promise":typeof Map<"u"&&e instanceof Map?"map":typeof Set<"u"&&e instanceof Set?"set":typeof Date<"u"&&e instanceof Date?"date":typeof File<"u"&&e instanceof File?"file":"object";default:throw Error(`Unknown data type: ${t}`)}},P_=new Set(["string","number","symbol"]),D_=new Set(["string","number","bigint","boolean","symbol","undefined"]);function $_(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function z_(e,t,r){let n=new e._zod.constr(t??e._zod.def);return t&&!r?.parent||(n._zod.parent=e),n}function B_(e){let t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}function U_(e){let t;return new Proxy({},{get:(r,n,i)=>(t??(t=e()),Reflect.get(t,n,i)),set:(r,n,i,a)=>(t??(t=e()),Reflect.set(t,n,i,a)),has:(r,n)=>(t??(t=e()),Reflect.has(t,n)),deleteProperty:(r,n)=>(t??(t=e()),Reflect.deleteProperty(t,n)),ownKeys:r=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(r,n)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,n)),defineProperty:(r,n,i)=>(t??(t=e()),Reflect.defineProperty(t,n,i))})}function F_(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function H_(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}var G_={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},q_={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function V_(e,t){let r=e._zod.def,n=E_(e._zod.def,{get shape(){let e={};for(let n in t){if(!(n in r.shape))throw Error(`Unrecognized key: "${n}"`);t[n]&&(e[n]=r.shape[n])}return x_(this,"shape",e),e},checks:[]});return z_(e,n)}function W_(e,t){let r=e._zod.def,n=E_(e._zod.def,{get shape(){let n={...e._zod.def.shape};for(let e in t){if(!(e in r.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return x_(this,"shape",n),n},checks:[]});return z_(e,n)}function Z_(e,t){if(!j_(t))throw Error("Invalid input to extend: expected a plain object");let r=e._zod.def.checks;if(r&&r.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let n=E_(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t};return x_(this,"shape",r),r},checks:[]});return z_(e,n)}function K_(e,t){if(!j_(t))throw Error("Invalid input to safeExtend: expected a plain object");let r={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return x_(this,"shape",r),r},checks:e._zod.def.checks};return z_(e,r)}function Y_(e,t){let r=E_(e._zod.def,{get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return x_(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return z_(e,r)}function J_(e,t,r){let n=E_(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in n))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(let t in n)i[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return x_(this,"shape",i),i},checks:[]});return z_(t,n)}function X_(e,t,r){let n=E_(t._zod.def,{get shape(){let n=t._zod.def.shape,i={...n};if(r)for(let t in r){if(!(t in i))throw Error(`Unrecognized key: "${t}"`);r[t]&&(i[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(let t in n)i[t]=new e({type:"nonoptional",innerType:n[t]});return x_(this,"shape",i),i},checks:[]});return z_(t,n)}function Q_(e,t=0){if(!0===e.aborted)return!0;for(let r=t;r<e.issues.length;r++)if(!0!==e.issues[r]?.continue)return!0;return!1}function ew(e,t){return t.map(t=>{var r;return(r=t).path??(r.path=[]),t.path.unshift(e),t})}function tw(e){return"string"==typeof e?e:e?.message}function rw(e,t,r){let n={...e,path:e.path??[]};if(!e.message){let i=tw(e.inst?._zod.def?.error?.(e))??tw(t?.error?.(e))??tw(r.customError?.(e))??tw(r.localeError?.(e))??"Invalid input";n.message=i}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function nw(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"}function iw(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function aw(...e){let[t,r,n]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:n}:{...t}}function sw(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function ow(e){let t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}function lw(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function cw(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");return ow(t+"=".repeat((4-t.length%4)%4))}function uw(e){return lw(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function dw(e){let t=e.replace(/^0x/,"");if(t.length%2!=0)throw Error("Invalid hex string length");let r=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)r[n/2]=Number.parseInt(t.slice(n,n+2),16);return r}function hw(e){return Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}class pw{constructor(...e){}}var fw=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,f_,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},mw=e_("$ZodError",fw),gw=e_("$ZodError",fw,{Parent:Error});function vw(e,t=e=>e.message){let r={},n=[];for(let i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}function yw(e,t){let r=t||function(e){return e.message},n={_errors:[]},i=e=>{for(let t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>i({issues:e}));else if("invalid_key"===t.code)i({issues:t.issues});else if("invalid_element"===t.code)i({issues:t.issues});else if(0===t.path.length)n._errors.push(r(t));else{let e=n,i=0;for(;i<t.path.length;){let n=t.path[i];i!==t.path.length-1?e[n]=e[n]||{_errors:[]}:(e[n]=e[n]||{_errors:[]},e[n]._errors.push(r(t))),e=e[n],i++}}};return i(e),n}function bw(e,t){let r=t||function(e){return e.message},n={errors:[]},i=(e,t=[])=>{var a,s;for(let o of e.issues)if("invalid_union"===o.code&&o.errors.length)o.errors.map(e=>i({issues:e},o.path));else if("invalid_key"===o.code)i({issues:o.issues},o.path);else if("invalid_element"===o.code)i({issues:o.issues},o.path);else{let e=[...t,...o.path];if(0===e.length){n.errors.push(r(o));continue}let i=n,l=0;for(;l<e.length;){let t=e[l],n=l===e.length-1;"string"==typeof t?(i.properties??(i.properties={}),(a=i.properties)[t]??(a[t]={errors:[]}),i=i.properties[t]):(i.items??(i.items=[]),(s=i.items)[t]??(s[t]={errors:[]}),i=i.items[t]),n&&i.errors.push(r(o)),l++}}};return i(e),n}function _w(e){let t=[],r=e.map(e=>"object"==typeof e?e.key:e);for(let n of r)"number"==typeof n?t.push(`[${n}]`):"symbol"==typeof n?t.push(`[${JSON.stringify(String(n))}]`):/[^\w$]/.test(n)?t.push(`[${JSON.stringify(n)}]`):(t.length&&t.push("."),t.push(n));return t.join("")}function ww(e){let t=[],r=[...e.issues].sort((e,t)=>(e.path??[]).length-(t.path??[]).length);for(let n of r)t.push(` ${n.message}`),n.path?.length&&t.push(`   at ${_w(n.path)}`);return t.join("\n")}var xw=e=>(t,r,n,i)=>{let a=n?Object.assign(n,{async:!1}):{async:!1},s=t._zod.run({value:r,issues:[]},a);if(s instanceof Promise)throw new r_;if(s.issues.length){let t=new(i?.Err??e)(s.issues.map(e=>rw(e,a,a_())));throw I_(t,i?.callee),t}return s.value},Ew=xw(gw),kw=e=>async(t,r,n,i)=>{let a=n?Object.assign(n,{async:!0}):{async:!0},s=t._zod.run({value:r,issues:[]},a);if(s instanceof Promise&&(s=await s),s.issues.length){let t=new(i?.Err??e)(s.issues.map(e=>rw(e,a,a_())));throw I_(t,i?.callee),t}return s.value},Sw=kw(gw),Aw=e=>(t,r,n)=>{let i=n?{...n,async:!1}:{async:!1},a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new r_;return a.issues.length?{success:!1,error:new(e??mw)(a.issues.map(e=>rw(e,i,a_())))}:{success:!0,data:a.value}},Tw=Aw(gw),Nw=e=>async(t,r,n)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},a=t._zod.run({value:r,issues:[]},i);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(e=>rw(e,i,a_())))}:{success:!0,data:a.value}},Iw=Nw(gw),Mw=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return xw(e)(t,r,i)},Cw=Mw(gw),jw=e=>(t,r,n)=>xw(e)(t,r,n),Ow=jw(gw),Rw=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return kw(e)(t,r,i)},Lw=Rw(gw),Pw=e=>async(t,r,n)=>kw(e)(t,r,n),Dw=Pw(gw),$w=e=>(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Aw(e)(t,r,i)},zw=$w(gw),Bw=e=>(t,r,n)=>Aw(e)(t,r,n),Uw=Bw(gw),Fw=e=>async(t,r,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Nw(e)(t,r,i)},Hw=Fw(gw),Gw=e=>async(t,r,n)=>Nw(e)(t,r,n),qw=Gw(gw),Vw={};Fs(Vw,{xid:()=>Yw,uuid7:()=>ax,uuid6:()=>ix,uuid4:()=>nx,uuid:()=>rx,uppercase:()=>Lx,unicodeEmail:()=>cx,undefined:()=>Ox,ulid:()=>Kw,time:()=>Sx,string:()=>Tx,sha512_hex:()=>Jx,sha512_base64url:()=>Qx,sha512_base64:()=>Xx,sha384_hex:()=>Zx,sha384_base64url:()=>Yx,sha384_base64:()=>Kx,sha256_hex:()=>qx,sha256_base64url:()=>Wx,sha256_base64:()=>Vx,sha1_hex:()=>Fx,sha1_base64url:()=>Gx,sha1_base64:()=>Hx,rfc5322Email:()=>lx,number:()=>Mx,null:()=>jx,nanoid:()=>Xw,md5_hex:()=>zx,md5_base64url:()=>Ux,md5_base64:()=>Bx,lowercase:()=>Rx,ksuid:()=>Jw,ipv6:()=>fx,ipv4:()=>px,integer:()=>Ix,idnEmail:()=>ux,html5Email:()=>ox,hostname:()=>bx,hex:()=>Px,guid:()=>tx,extendedDuration:()=>ex,emoji:()=>hx,email:()=>sx,e164:()=>wx,duration:()=>Qw,domain:()=>_x,datetime:()=>Ax,date:()=>Ex,cuid2:()=>Zw,cuid:()=>Ww,cidrv6:()=>gx,cidrv4:()=>mx,browserEmail:()=>dx,boolean:()=>Cx,bigint:()=>Nx,base64url:()=>yx,base64:()=>vx});var Ww=/^[cC][^\s-]{8,}$/,Zw=/^[0-9a-z]+$/,Kw=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Yw=/^[0-9a-vA-V]{20}$/,Jw=/^[A-Za-z0-9]{27}$/,Xw=/^[a-zA-Z0-9_-]{21}$/,Qw=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,tx=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,rx=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,nx=rx(4),ix=rx(6),ax=rx(7),sx=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ox=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,lx=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,cx=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,ux=cx,dx=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function hx(){return new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}var px=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,fx=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,mx=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,gx=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vx=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,yx=/^[A-Za-z0-9_-]*$/,bx=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,_x=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,wx=/^\+(?:[0-9]){6,14}[0-9]$/,xx="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Ex=new RegExp(`^${xx}$`);function kx(e){return"number"==typeof e.precision?-1===e.precision?"(?:[01]\\d|2[0-3]):[0-5]\\d":0===e.precision?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${e.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function Sx(e){return new RegExp(`^${kx(e)}$`)}function Ax(e){let t=kx({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${t}(?:${r.join("|")})`;return new RegExp(`^${xx}T(?:${n})$`)}var Tx=e=>new RegExp(`^${e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*"}$`),Nx=/^-?\d+n?$/,Ix=/^-?\d+$/,Mx=/^-?\d+(?:\.\d+)?/,Cx=/^(?:true|false)$/i,jx=/^null$/i,Ox=/^undefined$/i,Rx=/^[^A-Z]*$/,Lx=/^[^a-z]*$/,Px=/^[0-9a-fA-F]*$/;function Dx(e,t){return new RegExp(`^[A-Za-z0-9+/]{${e}}${t}$`)}function $x(e){return new RegExp(`^[A-Za-z0-9_-]{${e}}$`)}var zx=/^[0-9a-fA-F]{32}$/,Bx=Dx(22,"=="),Ux=$x(22),Fx=/^[0-9a-fA-F]{40}$/,Hx=Dx(27,"="),Gx=$x(27),qx=/^[0-9a-fA-F]{64}$/,Vx=Dx(43,"="),Wx=$x(43),Zx=/^[0-9a-fA-F]{96}$/,Kx=Dx(64,""),Yx=$x(64),Jx=/^[0-9a-fA-F]{128}$/,Xx=Dx(86,"=="),Qx=$x(86),eE=e_("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),tE={number:"number",bigint:"bigint",object:"date"},rE=e_("$ZodCheckLessThan",(e,t)=>{eE.init(e,t);let r=tE[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<n&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),nE=e_("$ZodCheckGreaterThan",(e,t)=>{eE.init(e,t);let r=tE[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,n=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>n&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),iE=e_("$ZodCheckMultipleOf",(e,t)=>{eE.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value!==BigInt(0):0!==y_(r.value,t.value))&&r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),aE=e_("$ZodCheckNumberFormat",(e,t)=>{eE.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),n=r?"int":"number",[i,a]=G_[t.format];e._zod.onattach.push(e=>{let n=e._zod.bag;n.format=t.format,n.minimum=i,n.maximum=a,r&&(n.pattern=Ix)}),e._zod.check=s=>{let o=s.value;if(r){if(!Number.isInteger(o))return void s.issues.push({expected:n,format:t.format,code:"invalid_type",continue:!1,input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?s.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):s.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}))}o<i&&s.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),o>a&&s.issues.push({origin:"number",input:o,code:"too_big",maximum:a,inst:e})}}),sE=e_("$ZodCheckBigIntFormat",(e,t)=>{eE.init(e,t);let[r,n]=q_[t.format];e._zod.onattach.push(e=>{let i=e._zod.bag;i.format=t.format,i.minimum=r,i.maximum=n}),e._zod.check=i=>{let a=i.value;a<r&&i.issues.push({origin:"bigint",input:a,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),a>n&&i.issues.push({origin:"bigint",input:a,code:"too_big",maximum:n,inst:e})}}),oE=e_("$ZodCheckMaxSize",(e,t)=>{var r;eE.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!g_(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;n.size<=t.maximum||r.issues.push({origin:nw(n),code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),lE=e_("$ZodCheckMinSize",(e,t)=>{var r;eE.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!g_(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;n.size>=t.minimum||r.issues.push({origin:nw(n),code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),cE=e_("$ZodCheckSizeEquals",(e,t)=>{var r;eE.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!g_(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.size,r.maximum=t.size,r.size=t.size}),e._zod.check=r=>{let n=r.value,i=n.size;if(i===t.size)return;let a=i>t.size;r.issues.push({origin:nw(n),...a?{code:"too_big",maximum:t.size}:{code:"too_small",minimum:t.size},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),uE=e_("$ZodCheckMaxLength",(e,t)=>{var r;eE.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!g_(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let n=r.value;if(n.length<=t.maximum)return;let i=iw(n);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),dE=e_("$ZodCheckMinLength",(e,t)=>{var r;eE.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!g_(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let n=r.value;if(n.length>=t.minimum)return;let i=iw(n);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:n,inst:e,continue:!t.abort})}}),hE=e_("$ZodCheckLengthEquals",(e,t)=>{var r;eE.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return!g_(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let n=r.value,i=n.length;if(i===t.length)return;let a=iw(n),s=i>t.length;r.issues.push({origin:a,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),pE=e_("$ZodCheckStringFormat",(e,t)=>{var r,n;eE.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),fE=e_("$ZodCheckRegex",(e,t)=>{pE.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),mE=e_("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Rx),pE.init(e,t)}),gE=e_("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Lx),pE.init(e,t)}),vE=e_("$ZodCheckIncludes",(e,t)=>{eE.init(e,t);let r=$_(t.includes),n=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),yE=e_("$ZodCheckStartsWith",(e,t)=>{eE.init(e,t);let r=new RegExp(`^${$_(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),bE=e_("$ZodCheckEndsWith",(e,t)=>{eE.init(e,t);let r=new RegExp(`.*${$_(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}});function _E(e,t,r){e.issues.length&&t.issues.push(...ew(r,e.issues))}var wE=e_("$ZodCheckProperty",(e,t)=>{eE.init(e,t),e._zod.check=e=>{let r=t.schema._zod.run({value:e.value[t.property],issues:[]},{});if(r instanceof Promise)return r.then(r=>_E(r,e,t.property));_E(r,e,t.property)}}),xE=e_("$ZodCheckMimeType",(e,t)=>{eE.init(e,t);let r=new Set(t.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=t.mime}),e._zod.check=n=>{r.has(n.value.type)||n.issues.push({code:"invalid_value",values:t.mime,input:n.value.type,inst:e,continue:!t.abort})}}),EE=e_("$ZodCheckOverwrite",(e,t)=>{eE.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class kE{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length)),n=t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e);for(let i of n)this.content.push(i)}compile(){let e=Function,t=this?.args,r=[...(this?.content??[""]).map(e=>`  ${e}`)];return new e(...t,r.join("\n"))}}var SE={major:4,minor:1,patch:11},AE=e_("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=SE;let n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(let i of n)for(let t of i._zod.onattach)t(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let n,i=Q_(e);for(let a of t){if(a._zod.def.when){if(!a._zod.def.when(e))continue}else if(i)continue;let t=e.issues.length,s=a._zod.check(e);if(s instanceof Promise&&!1===r?.async)throw new r_;if(n||s instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await s,e.issues.length!==t&&(i||(i=Q_(e,t)))});else{if(e.issues.length===t)continue;i||(i=Q_(e,t))}}return n?n.then(()=>e):e},r=(r,i,a)=>{if(Q_(r))return r.aborted=!0,r;let s=t(i,n,a);if(s instanceof Promise){if(!1===a.async)throw new r_;return s.then(t=>e._zod.parse(t,a))}return e._zod.parse(s,a)};e._zod.run=(i,a)=>{if(a.skipChecks)return e._zod.parse(i,a);if("backward"===a.direction){let t=e._zod.parse({value:i.value,issues:[]},{...a,skipChecks:!0});return t instanceof Promise?t.then(e=>r(e,i,a)):r(t,i,a)}let s=e._zod.parse(i,a);if(s instanceof Promise){if(!1===a.async)throw new r_;return s.then(e=>t(e,n,a))}return t(s,n,a)}}e["~standard"]={validate:t=>{try{let r=Tw(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return Iw(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),TE=e_("$ZodString",(e,t)=>{AE.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Tx(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch(ine){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),NE=e_("$ZodStringFormat",(e,t)=>{pE.init(e,t),TE.init(e,t)}),IE=e_("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=tx),NE.init(e,t)}),ME=e_("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=rx(e))}else t.pattern??(t.pattern=rx());NE.init(e,t)}),CE=e_("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=sx),NE.init(e,t)}),jE=e_("$ZodURL",(e,t)=>{NE.init(e,t),e._zod.check=r=>{try{let n=r.value.trim(),i=new URL(n);return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:bx.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),void(t.normalize?r.value=i.href:r.value=n)}catch(Fre){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),OE=e_("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=hx()),NE.init(e,t)}),RE=e_("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Xw),NE.init(e,t)}),LE=e_("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Ww),NE.init(e,t)}),PE=e_("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Zw),NE.init(e,t)}),DE=e_("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Kw),NE.init(e,t)}),$E=e_("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Yw),NE.init(e,t)}),zE=e_("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Jw),NE.init(e,t)}),BE=e_("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Ax(t)),NE.init(e,t)}),UE=e_("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Ex),NE.init(e,t)}),FE=e_("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Sx(t)),NE.init(e,t)}),HE=e_("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Qw),NE.init(e,t)}),GE=e_("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=px),NE.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),qE=e_("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=fx),NE.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),VE=e_("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=mx),NE.init(e,t)}),WE=e_("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=gx),NE.init(e,t),e._zod.check=r=>{let n=r.value.split("/");try{if(2!==n.length)throw Error();let[e,t]=n;if(!t)throw Error();let r=Number(t);if(`${r}`!==t)throw Error();if(r<0||r>128)throw Error();new URL(`http://[${e}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function ZE(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}var KE=e_("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=vx),NE.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{ZE(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function YE(e){if(!yx.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return ZE(t.padEnd(4*Math.ceil(t.length/4),"="))}var JE=e_("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=yx),NE.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{YE(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),XE=e_("$ZodE164",(e,t)=>{t.pattern??(t.pattern=wx),NE.init(e,t)});function QE(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[n]=r;if(!n)return!1;let i=JSON.parse(atob(n));return(!("typ"in i)||"JWT"===i?.typ)&&(!!i.alg&&(!t||"alg"in i&&i.alg===t))}catch{return!1}}var ek=e_("$ZodJWT",(e,t)=>{NE.init(e,t),e._zod.check=r=>{QE(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),tk=e_("$ZodCustomStringFormat",(e,t)=>{NE.init(e,t),e._zod.check=r=>{t.fn(r.value)||r.issues.push({code:"invalid_format",format:t.format,input:r.value,inst:e,continue:!t.abort})}}),rk=e_("$ZodNumber",(e,t)=>{AE.init(e,t),e._zod.pattern=e._zod.bag.pattern??Mx,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch(J9){}let i=r.value;if("number"==typeof i&&!Number.isNaN(i)&&Number.isFinite(i))return r;let a="number"==typeof i?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...a?{received:a}:{}}),r}}),nk=e_("$ZodNumber",(e,t)=>{aE.init(e,t),rk.init(e,t)}),ik=e_("$ZodBoolean",(e,t)=>{AE.init(e,t),e._zod.pattern=Cx,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Boolean(r.value)}catch(a){}let i=r.value;return"boolean"==typeof i||r.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),r}}),ak=e_("$ZodBigInt",(e,t)=>{AE.init(e,t),e._zod.pattern=Nx,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=BigInt(r.value)}catch(ine){}return"bigint"==typeof r.value||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:e}),r}}),sk=e_("$ZodBigInt",(e,t)=>{sE.init(e,t),ak.init(e,t)}),ok=e_("$ZodSymbol",(e,t)=>{AE.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return"symbol"==typeof n||t.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:e}),t}}),lk=e_("$ZodUndefined",(e,t)=>{AE.init(e,t),e._zod.pattern=Ox,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,r)=>{let n=t.value;return typeof n>"u"||t.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:e}),t}}),ck=e_("$ZodNull",(e,t)=>{AE.init(e,t),e._zod.pattern=jx,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{let n=t.value;return null===n||t.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),t}}),uk=e_("$ZodAny",(e,t)=>{AE.init(e,t),e._zod.parse=e=>e}),dk=e_("$ZodUnknown",(e,t)=>{AE.init(e,t),e._zod.parse=e=>e}),hk=e_("$ZodNever",(e,t)=>{AE.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),pk=e_("$ZodVoid",(e,t)=>{AE.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return typeof n>"u"||t.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),t}}),fk=e_("$ZodDate",(e,t)=>{AE.init(e,t),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=new Date(r.value)}catch($re){}let i=r.value,a=i instanceof Date;return a&&!Number.isNaN(i.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:i,...a?{received:"Invalid Date"}:{},inst:e}),r}});function mk(e,t,r){e.issues.length&&t.issues.push(...ew(r,e.issues)),t.value[r]=e.value}var gk=e_("$ZodArray",(e,t)=>{AE.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);let a=[];for(let e=0;e<i.length;e++){let s=i[e],o=t.element._zod.run({value:s,issues:[]},n);o instanceof Promise?a.push(o.then(t=>mk(t,r,e))):mk(o,r,e)}return a.length?Promise.all(a).then(()=>r):r}});function vk(e,t,r,n){e.issues.length&&t.issues.push(...ew(r,e.issues)),void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function yk(e){let t=Object.keys(e.shape);for(let n of t)if(!e.shape?.[n]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${n}": expected a Zod schema`);let r=H_(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function bk(e,t,r,n,i,a){let s=[],o=i.keySet,l=i.catchall._zod,c=l.def.type;for(let u of Object.keys(t)){if(o.has(u))continue;if("never"===c){s.push(u);continue}let i=l.run({value:t[u],issues:[]},n);i instanceof Promise?e.push(i.then(e=>vk(e,r,u,t))):vk(i,r,u,t)}return s.length&&r.issues.push({code:"unrecognized_keys",keys:s,input:t,inst:a}),e.length?Promise.all(e).then(()=>r):r}var _k=e_("$ZodObject",(e,t)=>{if(AE.init(e,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){let e=t.shape;Object.defineProperty(t,"shape",{get:()=>{let r={...e};return Object.defineProperty(t,"shape",{value:r}),r}})}let r=m_(()=>yk(t));__(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let n=e[t]._zod;if(n.values){r[t]??(r[t]=new Set);for(let e of n.values)r[t].add(e)}}return r});let n,i=M_,a=t.catchall;e._zod.parse=(t,s)=>{n??(n=r.value);let o=t.value;if(!i(o))return t.issues.push({expected:"object",code:"invalid_type",input:o,inst:e}),t;t.value={};let l=[],c=n.shape;for(let e of n.keys){let r=c[e]._zod.run({value:o[e],issues:[]},s);r instanceof Promise?l.push(r.then(r=>vk(r,t,e,o))):vk(r,t,e,o)}return a?bk(l,o,t,s,r.value,e):l.length?Promise.all(l).then(()=>t):t}}),wk=e_("$ZodObjectJIT",(e,t)=>{_k.init(e,t);let r,n,i=e._zod.parse,a=m_(()=>yk(t)),s=M_,o=!i_.jitless,l=o&&C_.value,c=t.catchall;e._zod.parse=(u,d)=>{n??(n=a.value);let h=u.value;return s(h)?o&&l&&!1===d?.async&&!0!==d.jitless?(r||(r=(e=>{let t=new kE(["shape","payload","ctx"]),r=a.value,n=e=>{let t=N_(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let i=Object.create(null),s=0;for(let a of r.keys)i[a]="key_"+s++;t.write("const newResult = {};");for(let a of r.keys){let e=i[a],r=N_(a);t.write(`const ${e} = ${n(a)};`),t.write(`\n        if (${e}.issues.length) {\n          payload.issues = payload.issues.concat(${e}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${r}, ...iss.path] : [${r}]\n          })));\n        }\n        \n        \n        if (${e}.value === undefined) {\n          if (${r} in input) {\n            newResult[${r}] = undefined;\n          }\n        } else {\n          newResult[${r}] = ${e}.value;\n        }\n        \n      `)}t.write("payload.value = newResult;"),t.write("return payload;");let o=t.compile();return(t,r)=>o(e,t,r)})(t.shape)),u=r(u,d),c?bk([],h,u,d,n,e):u):i(u,d):(u.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),u)}});function xk(e,t,r,n){for(let a of e)if(0===a.issues.length)return t.value=a.value,t;let i=e.filter(e=>!Q_(e));return 1===i.length?(t.value=i[0].value,i[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>rw(e,n,a_())))}),t)}var Ek=e_("$ZodUnion",(e,t)=>{AE.init(e,t),__(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),__(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),__(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),__(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>v_(e.source)).join("|")})$`)}});let r=1===t.options.length,n=t.options[0]._zod.run;e._zod.parse=(i,a)=>{if(r)return n(i,a);let s=!1,o=[];for(let e of t.options){let t=e._zod.run({value:i.value,issues:[]},a);if(t instanceof Promise)o.push(t),s=!0;else{if(0===t.issues.length)return t;o.push(t)}}return s?Promise.all(o).then(t=>xk(t,i,e,a)):xk(o,i,e,a)}}),kk=e_("$ZodDiscriminatedUnion",(e,t)=>{Ek.init(e,t);let r=e._zod.parse;__(e._zod,"propValues",()=>{let e={};for(let r of t.options){let n=r._zod.propValues;if(!n||0===Object.keys(n).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(n)){e[t]||(e[t]=new Set);for(let n of r)e[t].add(n)}}return e});let n=m_(()=>{let e=t.options,r=new Map;for(let n of e){let e=n._zod.propValues?.[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(let t of e){if(r.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,n)}}return r});e._zod.parse=(i,a)=>{let s=i.value;if(!M_(s))return i.issues.push({code:"invalid_type",expected:"object",input:s,inst:e}),i;let o=n.value.get(s?.[t.discriminator]);return o?o._zod.run(i,a):t.unionFallback?r(i,a):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:s,path:[t.discriminator],inst:e}),i)}}),Sk=e_("$ZodIntersection",(e,t)=>{AE.init(e,t),e._zod.parse=(e,r)=>{let n=e.value,i=t.left._zod.run({value:n,issues:[]},r),a=t.right._zod.run({value:n,issues:[]},r);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([t,r])=>Tk(e,t,r)):Tk(e,i,a)}});function Ak(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(j_(e)&&j_(t)){let r=Object.keys(t),n=Object.keys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(let a of n){let r=Ak(e[a],t[a]);if(!r.valid)return{valid:!1,mergeErrorPath:[a,...r.mergeErrorPath]};i[a]=r.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<e.length;n++){let i=Ak(e[n],t[n]);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Tk(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Q_(e))return e;let n=Ak(t.value,r.value);if(!n.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}var Nk=e_("$ZodTuple",(e,t)=>{AE.init(e,t);let r=t.items,n=r.length-[...r].reverse().findIndex(e=>"optional"!==e._zod.optin);e._zod.parse=(i,a)=>{let s=i.value;if(!Array.isArray(s))return i.issues.push({input:s,inst:e,expected:"tuple",code:"invalid_type"}),i;i.value=[];let o=[];if(!t.rest){let t=s.length>r.length,a=s.length<n-1;if(t||a)return i.issues.push({...t?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},input:s,inst:e,origin:"array"}),i}let l=-1;for(let e of r){if(l++,l>=s.length&&l>=n)continue;let t=e._zod.run({value:s[l],issues:[]},a);t instanceof Promise?o.push(t.then(e=>Ik(e,i,l))):Ik(t,i,l)}if(t.rest){let e=s.slice(r.length);for(let r of e){l++;let e=t.rest._zod.run({value:r,issues:[]},a);e instanceof Promise?o.push(e.then(e=>Ik(e,i,l))):Ik(e,i,l)}}return o.length?Promise.all(o).then(()=>i):i}});function Ik(e,t,r){e.issues.length&&t.issues.push(...ew(r,e.issues)),t.value[r]=e.value}var Mk=e_("$ZodRecord",(e,t)=>{AE.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!j_(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),r;let a=[];if(t.keyType._zod.values){let s,o=t.keyType._zod.values;r.value={};for(let e of o)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){let s=t.valueType._zod.run({value:i[e],issues:[]},n);s instanceof Promise?a.push(s.then(t=>{t.issues.length&&r.issues.push(...ew(e,t.issues)),r.value[e]=t.value})):(s.issues.length&&r.issues.push(...ew(e,s.issues)),r.value[e]=s.value)}for(let e in i)o.has(e)||(s=s??[],s.push(e));s&&s.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:s})}else{r.value={};for(let s of Reflect.ownKeys(i)){if("__proto__"===s)continue;let o=t.keyType._zod.run({value:s,issues:[]},n);if(o instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(o.issues.length){r.issues.push({code:"invalid_key",origin:"record",issues:o.issues.map(e=>rw(e,n,a_())),input:s,path:[s],inst:e}),r.value[o.value]=o.value;continue}let l=t.valueType._zod.run({value:i[s],issues:[]},n);l instanceof Promise?a.push(l.then(e=>{e.issues.length&&r.issues.push(...ew(s,e.issues)),r.value[o.value]=e.value})):(l.issues.length&&r.issues.push(...ew(s,l.issues)),r.value[o.value]=l.value)}}return a.length?Promise.all(a).then(()=>r):r}}),Ck=e_("$ZodMap",(e,t)=>{AE.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Map))return r.issues.push({expected:"map",code:"invalid_type",input:i,inst:e}),r;let a=[];r.value=new Map;for(let[s,o]of i){let l=t.keyType._zod.run({value:s,issues:[]},n),c=t.valueType._zod.run({value:o,issues:[]},n);l instanceof Promise||c instanceof Promise?a.push(Promise.all([l,c]).then(([t,a])=>{jk(t,a,r,s,i,e,n)})):jk(l,c,r,s,i,e,n)}return a.length?Promise.all(a).then(()=>r):r}});function jk(e,t,r,n,i,a,s){e.issues.length&&(P_.has(typeof n)?r.issues.push(...ew(n,e.issues)):r.issues.push({code:"invalid_key",origin:"map",input:i,inst:a,issues:e.issues.map(e=>rw(e,s,a_()))})),t.issues.length&&(P_.has(typeof n)?r.issues.push(...ew(n,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:i,inst:a,key:n,issues:t.issues.map(e=>rw(e,s,a_()))})),r.value.set(e.value,t.value)}var Ok=e_("$ZodSet",(e,t)=>{AE.init(e,t),e._zod.parse=(r,n)=>{let i=r.value;if(!(i instanceof Set))return r.issues.push({input:i,inst:e,expected:"set",code:"invalid_type"}),r;let a=[];r.value=new Set;for(let e of i){let i=t.valueType._zod.run({value:e,issues:[]},n);i instanceof Promise?a.push(i.then(e=>Rk(e,r))):Rk(i,r)}return a.length?Promise.all(a).then(()=>r):r}});function Rk(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}var Lk=e_("$ZodEnum",(e,t)=>{AE.init(e,t);let r=h_(t.entries),n=new Set(r);e._zod.values=n,e._zod.pattern=new RegExp(`^(${r.filter(e=>P_.has(typeof e)).map(e=>"string"==typeof e?$_(e):e.toString()).join("|")})$`),e._zod.parse=(t,i)=>{let a=t.value;return n.has(a)||t.issues.push({code:"invalid_value",values:r,input:a,inst:e}),t}}),Pk=e_("$ZodLiteral",(e,t)=>{if(AE.init(e,t),0===t.values.length)throw Error("Cannot create literal schema with no valid values");e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(e=>"string"==typeof e?$_(e):e?$_(e.toString()):String(e)).join("|")})$`),e._zod.parse=(r,n)=>{let i=r.value;return e._zod.values.has(i)||r.issues.push({code:"invalid_value",values:t.values,input:i,inst:e}),r}}),Dk=e_("$ZodFile",(e,t)=>{AE.init(e,t),e._zod.parse=(t,r)=>{let n=t.value;return n instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),t}}),$k=e_("$ZodTransform",(e,t)=>{AE.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new n_(e.constructor.name);let i=t.transform(r.value,r);if(n.async)return(i instanceof Promise?i:Promise.resolve(i)).then(e=>(r.value=e,r));if(i instanceof Promise)throw new r_;return r.value=i,r}});function zk(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}var Bk=e_("$ZodOptional",(e,t)=>{AE.init(e,t),e._zod.optin="optional",e._zod.optout="optional",__(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),__(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?new RegExp(`^(${v_(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>{if("optional"===t.innerType._zod.optin){let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>zk(t,e.value)):zk(n,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,r)}}),Uk=e_("$ZodNullable",(e,t)=>{AE.init(e,t),__(e._zod,"optin",()=>t.innerType._zod.optin),__(e._zod,"optout",()=>t.innerType._zod.optout),__(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?new RegExp(`^(${v_(e.source)}|null)$`):void 0}),__(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),Fk=e_("$ZodDefault",(e,t)=>{AE.init(e,t),e._zod.optin="optional",__(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);if(void 0===e.value)return e.value=t.defaultValue,e;let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(e=>Hk(e,t)):Hk(n,t)}});function Hk(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}var Gk=e_("$ZodPrefault",(e,t)=>{AE.init(e,t),e._zod.optin="optional",__(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>("backward"===r.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),qk=e_("$ZodNonOptional",(e,t)=>{AE.init(e,t),__(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,n)=>{let i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(t=>Vk(t,e)):Vk(i,e)}});function Vk(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}var Wk=e_("$ZodSuccess",(e,t)=>{AE.init(e,t),e._zod.parse=(e,r)=>{if("backward"===r.direction)throw new n_("ZodSuccess");let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===n.issues.length,e)}}),Zk=e_("$ZodCatch",(e,t)=>{AE.init(e,t),__(e._zod,"optin",()=>t.innerType._zod.optin),__(e._zod,"optout",()=>t.innerType._zod.optout),__(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>rw(e,r,a_()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=t.catchValue({...e,error:{issues:n.issues.map(e=>rw(e,r,a_()))},input:e.value}),e.issues=[]),e)}}),Kk=e_("$ZodNaN",(e,t)=>{AE.init(e,t),e._zod.parse=(t,r)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),Yk=e_("$ZodPipe",(e,t)=>{AE.init(e,t),__(e._zod,"values",()=>t.in._zod.values),__(e._zod,"optin",()=>t.in._zod.optin),__(e._zod,"optout",()=>t.out._zod.optout),__(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("backward"===r.direction){let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>Jk(e,t.in,r)):Jk(n,t.in,r)}let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>Jk(e,t.out,r)):Jk(n,t.out,r)}});function Jk(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}var Xk=e_("$ZodCodec",(e,t)=>{AE.init(e,t),__(e._zod,"values",()=>t.in._zod.values),__(e._zod,"optin",()=>t.in._zod.optin),__(e._zod,"optout",()=>t.out._zod.optout),__(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,r)=>{if("forward"===(r.direction||"forward")){let n=t.in._zod.run(e,r);return n instanceof Promise?n.then(e=>Qk(e,t,r)):Qk(n,t,r)}{let n=t.out._zod.run(e,r);return n instanceof Promise?n.then(e=>Qk(e,t,r)):Qk(n,t,r)}}});function Qk(e,t,r){if(e.issues.length)return e.aborted=!0,e;if("forward"===(r.direction||"forward")){let n=t.transform(e.value,e);return n instanceof Promise?n.then(n=>eS(e,n,t.out,r)):eS(e,n,t.out,r)}{let n=t.reverseTransform(e.value,e);return n instanceof Promise?n.then(n=>eS(e,n,t.in,r)):eS(e,n,t.in,r)}}function eS(e,t,r,n){return e.issues.length?(e.aborted=!0,e):r._zod.run({value:t,issues:e.issues},n)}var tS=e_("$ZodReadonly",(e,t)=>{AE.init(e,t),__(e._zod,"propValues",()=>t.innerType._zod.propValues),__(e._zod,"values",()=>t.innerType._zod.values),__(e._zod,"optin",()=>t.innerType._zod.optin),__(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,r)=>{if("backward"===r.direction)return t.innerType._zod.run(e,r);let n=t.innerType._zod.run(e,r);return n instanceof Promise?n.then(rS):rS(n)}});function rS(e){return e.value=Object.freeze(e.value),e}var nS=e_("$ZodTemplateLiteral",(e,t)=>{AE.init(e,t);let r=[];for(let n of t.parts)if("object"==typeof n&&null!==n){if(!n._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...n._zod.traits].shift()}`);let e=n._zod.pattern instanceof RegExp?n._zod.pattern.source:n._zod.pattern;if(!e)throw Error(`Invalid template literal part: ${n._zod.traits}`);let t=e.startsWith("^")?1:0,i=e.endsWith("$")?e.length-1:e.length;r.push(e.slice(t,i))}else{if(null!==n&&!D_.has(typeof n))throw Error(`Invalid template literal part: ${n}`);r.push($_(`${n}`))}e._zod.pattern=new RegExp(`^${r.join("")}$`),e._zod.parse=(r,n)=>"string"!=typeof r.value?(r.issues.push({input:r.value,inst:e,expected:"template_literal",code:"invalid_type"}),r):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:e,code:"invalid_format",format:t.format??"template_literal",pattern:e._zod.pattern.source}),r)}),iS=e_("$ZodFunction",(e,t)=>(AE.init(e,t),e._def=t,e._zod.def=t,e.implement=t=>{if("function"!=typeof t)throw Error("implement() must be called with a function");return function(...r){let n=e._def.input?Ew(e._def.input,r):r,i=Reflect.apply(t,this,n);return e._def.output?Ew(e._def.output,i):i}},e.implementAsync=t=>{if("function"!=typeof t)throw Error("implementAsync() must be called with a function");return async function(...r){let n=e._def.input?await Sw(e._def.input,r):r,i=await Reflect.apply(t,this,n);return e._def.output?await Sw(e._def.output,i):i}},e._zod.parse=(t,r)=>"function"!=typeof t.value?(t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:e}),t):(e._def.output&&"promise"===e._def.output._zod.def.type?t.value=e.implementAsync(t.value):t.value=e.implement(t.value),t),e.input=(...t)=>{let r=e.constructor;return Array.isArray(t[0])?new r({type:"function",input:new Nk({type:"tuple",items:t[0],rest:t[1]}),output:e._def.output}):new r({type:"function",input:t[0],output:e._def.output})},e.output=t=>new e.constructor({type:"function",input:e._def.input,output:t}),e)),aS=e_("$ZodPromise",(e,t)=>{AE.init(e,t),e._zod.parse=(e,r)=>Promise.resolve(e.value).then(e=>t.innerType._zod.run({value:e,issues:[]},r))}),sS=e_("$ZodLazy",(e,t)=>{AE.init(e,t),__(e._zod,"innerType",()=>t.getter()),__(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),__(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),__(e._zod,"optin",()=>e._zod.innerType._zod.optin??void 0),__(e._zod,"optout",()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(t,r)=>e._zod.innerType._zod.run(t,r)}),oS=e_("$ZodCustom",(e,t)=>{eE.init(e,t),AE.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(t=>lS(t,r,n,e));lS(i,r,n,e)}});function lS(e,t,r,n){if(!e){let e={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(aw(e))}}var cS={};Fs(cS,{zhTW:()=>ZA,zhCN:()=>VA,yo:()=>YA,vi:()=>GA,ur:()=>FA,uk:()=>zA,ua:()=>BA,tr:()=>DA,th:()=>LA,ta:()=>OA,sv:()=>CA,sl:()=>IA,ru:()=>TA,pt:()=>kA,ps:()=>_A,pl:()=>xA,ota:()=>yA,no:()=>gA,nl:()=>fA,ms:()=>hA,mk:()=>uA,lt:()=>lA,ko:()=>nA,km:()=>eA,kh:()=>tA,ka:()=>XS,ja:()=>YS,it:()=>ZS,is:()=>VS,id:()=>GS,hu:()=>FS,he:()=>BS,frCA:()=>$S,fr:()=>PS,fi:()=>RS,fa:()=>jS,es:()=>MS,eo:()=>NS,en:()=>AS,de:()=>kS,da:()=>xS,cs:()=>_S,ca:()=>yS,be:()=>gS,az:()=>pS,ar:()=>dS});var uS=()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}let r={regex:"",email:" ",url:"",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:"  ISO",time:"  ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:"   IPv4",cidrv6:"   IPv6",base64:"  base64-encoded",base64url:"  base64url-encoded",json_string:"   JSON",e164:"   E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return`  :   ${e.expected}    ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`  :   ${F_(e.values[0])}`:`  :     : ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`   :    ${e.origin??""} ${r} ${e.maximum.toString()} ${n.unit??""}`:`  :    ${e.origin??""} ${r} ${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`  :   ${e.origin}   ${r} ${e.minimum.toString()} ${n.unit}`:`  :   ${e.origin}   ${r} ${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`  :     "${e.prefix}"`:"ends_with"===t.format?`  :     "${t.suffix}"`:"includes"===t.format?`  :    "${t.includes}"`:"regex"===t.format?`  :     ${t.pattern}`:`${r[t.format]??e.format}  `}case"not_multiple_of":return`  :      ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"":""} ${e.keys.length>1?"":""}: ${p_(e.keys," ")}`;case"invalid_key":return`    ${e.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`    ${e.origin}`}}};function dS(){return{localeError:uS()}}var hS=()=>{let e={string:{unit:"simvol",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"element",verb:"olmaldr"},set:{unit:"element",verb:"olmaldr"}};function t(t){return e[t]??null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Yanl dyr: gzlniln ${e.expected}, daxil olan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Yanl dyr: gzlniln ${F_(e.values[0])}`:`Yanl seim: aadaklardan biri olmaldr: ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`ox byk: gzlniln ${e.origin??"dyr"} ${r}${e.maximum.toString()} ${n.unit??"element"}`:`ox byk: gzlniln ${e.origin??"dyr"} ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`ox kiik: gzlniln ${e.origin} ${r}${e.minimum.toString()} ${n.unit}`:`ox kiik: gzlniln ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Yanl mtn: "${t.prefix}" il balamaldr`:"ends_with"===t.format?`Yanl mtn: "${t.suffix}" il bitmlidir`:"includes"===t.format?`Yanl mtn: "${t.includes}" daxil olmaldr`:"regex"===t.format?`Yanl mtn: ${t.pattern} ablonuna uyun olmaldr`:`Yanl ${r[t.format]??e.format}`}case"not_multiple_of":return`Yanl dd: ${e.divisor} il bln biln olmaldr`;case"unrecognized_keys":return`Tannmayan aar${e.keys.length>1?"lar":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`${e.origin} daxilind yanl aar`;case"invalid_union":default:return"Yanl dyr";case"invalid_element":return`${e.origin} daxilind yanl dyr`}}};function pS(){return{localeError:hS()}}function fS(e,t,r,n){let i=Math.abs(e),a=i%10,s=i%100;return s>=11&&s<=19?n:1===a?t:a>=2&&a<=4?r:n}var mS=()=>{let e={string:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :  ${e.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?` :  ${F_(e.values[0])}`:` :    ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n){let t=fS(Number(e.maximum),n.unit.one,n.unit.few,n.unit.many);return` : ,  ${e.origin??""}  ${n.verb} ${r}${e.maximum.toString()} ${t}`}return` : ,  ${e.origin??""}   ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n){let t=fS(Number(e.minimum),n.unit.one,n.unit.few,n.unit.many);return` : ,  ${e.origin}  ${n.verb} ${r}${e.minimum.toString()} ${t}`}return` : ,  ${e.origin}   ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?` :    "${t.prefix}"`:"ends_with"===t.format?` :    "${t.suffix}"`:"includes"===t.format?` :   "${t.includes}"`:"regex"===t.format?` :    ${t.pattern}`:` ${r[t.format]??e.format}`}case"not_multiple_of":return` :    ${e.divisor}`;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return" ";case"invalid_element":return`   ${e.origin}`}}};function gS(){return{localeError:mS()}}var vS=()=>{let e={string:{unit:"carcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(t){return e[t]??null}let r={regex:"entrada",email:"adrea electrnica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adrea IPv4",ipv6:"adrea IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"};return e=>{switch(e.code){case"invalid_type":return`Tipus invlid: s'esperava ${e.expected}, s'ha rebut ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Valor invlid: s'esperava ${F_(e.values[0])}`:`Opci invlida: s'esperava una de ${p_(e.values," o ")}`;case"too_big":{let r=e.inclusive?"com a mxim":"menys de",n=t(e.origin);return n?`Massa gran: s'esperava que ${e.origin??"el valor"} contingus ${r} ${e.maximum.toString()} ${n.unit??"elements"}`:`Massa gran: s'esperava que ${e.origin??"el valor"} fos ${r} ${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?"com a mnim":"ms de",n=t(e.origin);return n?`Massa petit: s'esperava que ${e.origin} contingus ${r} ${e.minimum.toString()} ${n.unit}`:`Massa petit: s'esperava que ${e.origin} fos ${r} ${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Format invlid: ha de comenar amb "${t.prefix}"`:"ends_with"===t.format?`Format invlid: ha d'acabar amb "${t.suffix}"`:"includes"===t.format?`Format invlid: ha d'incloure "${t.includes}"`:"regex"===t.format?`Format invlid: ha de coincidir amb el patr ${t.pattern}`:`Format invlid per a ${r[t.format]??e.format}`}case"not_multiple_of":return`Nmero invlid: ha de ser mltiple de ${e.divisor}`;case"unrecognized_keys":return`Clau${e.keys.length>1?"s":""} no reconeguda${e.keys.length>1?"s":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`Clau invlida a ${e.origin}`;case"invalid_union":default:return"Entrada invlida";case"invalid_element":return`Element invlid a ${e.origin}`}}};function yS(){return{localeError:vS()}}var bS=()=>{let e={string:{unit:"znak",verb:"mt"},file:{unit:"bajt",verb:"mt"},array:{unit:"prvk",verb:"mt"},set:{unit:"prvk",verb:"mt"}};function t(t){return e[t]??null}let r={regex:"regulrn vraz",email:"e-mailov adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a as ve formtu ISO",date:"datum ve formtu ISO",time:"as ve formtu ISO",duration:"doba trvn ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"etzec zakdovan ve formtu base64",base64url:"etzec zakdovan ve formtu base64url",json_string:"etzec ve formtu JSON",e164:"slo E.164",jwt:"JWT",template_literal:"vstup"};return e=>{switch(e.code){case"invalid_type":return`Neplatn vstup: oekvno ${e.expected}, obdreno ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"slo";case"string":return"etzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":if(Array.isArray(e))return"pole";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Neplatn vstup: oekvno ${F_(e.values[0])}`:`Neplatn monost: oekvna jedna z hodnot ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Hodnota je pli velk: ${e.origin??"hodnota"} mus mt ${r}${e.maximum.toString()} ${n.unit??"prvk"}`:`Hodnota je pli velk: ${e.origin??"hodnota"} mus bt ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Hodnota je pli mal: ${e.origin??"hodnota"} mus mt ${r}${e.minimum.toString()} ${n.unit??"prvk"}`:`Hodnota je pli mal: ${e.origin??"hodnota"} mus bt ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Neplatn etzec: mus zanat na "${t.prefix}"`:"ends_with"===t.format?`Neplatn etzec: mus konit na "${t.suffix}"`:"includes"===t.format?`Neplatn etzec: mus obsahovat "${t.includes}"`:"regex"===t.format?`Neplatn etzec: mus odpovdat vzoru ${t.pattern}`:`Neplatn formt ${r[t.format]??e.format}`}case"not_multiple_of":return`Neplatn slo: mus bt nsobkem ${e.divisor}`;case"unrecognized_keys":return`Neznm kle: ${p_(e.keys,", ")}`;case"invalid_key":return`Neplatn kl v ${e.origin}`;case"invalid_union":default:return"Neplatn vstup";case"invalid_element":return`Neplatn hodnota v ${e.origin}`}}};function _S(){return{localeError:bS()}}var wS=()=>{let e={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},t={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"st",file:"fil"};function r(t){return e[t]??null}function n(e){return t[e]??e}let i={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslt",date:"ISO-dato",time:"ISO-klokkeslt",duration:"ISO-varighed",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Ugyldigt input: forventede ${n(e.expected)}, fik ${n((e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tal";case"object":return Array.isArray(e)?"liste":null===e?"null":Object.getPrototypeOf(e)!==Object.prototype&&e.constructor?e.constructor.name:"objekt"}return t})(e.input))}`;case"invalid_value":return 1===e.values.length?`Ugyldig vrdi: forventede ${F_(e.values[0])}`:`Ugyldigt valg: forventede en af flgende ${p_(e.values,"|")}`;case"too_big":{let t=e.inclusive?"<=":"<",i=r(e.origin),a=n(e.origin);return i?`For stor: forventede ${a??"value"} ${i.verb} ${t} ${e.maximum.toString()} ${i.unit??"elementer"}`:`For stor: forventede ${a??"value"} havde ${t} ${e.maximum.toString()}`}case"too_small":{let t=e.inclusive?">=":">",i=r(e.origin),a=n(e.origin);return i?`For lille: forventede ${a} ${i.verb} ${t} ${e.minimum.toString()} ${i.unit}`:`For lille: forventede ${a} havde ${t} ${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Ugyldig streng: skal starte med "${t.prefix}"`:"ends_with"===t.format?`Ugyldig streng: skal ende med "${t.suffix}"`:"includes"===t.format?`Ugyldig streng: skal indeholde "${t.includes}"`:"regex"===t.format?`Ugyldig streng: skal matche mnsteret ${t.pattern}`:`Ugyldig ${i[t.format]??e.format}`}case"not_multiple_of":return`Ugyldigt tal: skal vre deleligt med ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ukendte ngler":"Ukendt ngle"}: ${p_(e.keys,", ")}`;case"invalid_key":return`Ugyldig ngle i ${e.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig vrdi i ${e.origin}`;default:return"Ugyldigt input"}}};function xS(){return{localeError:wS()}}var ES=()=>{let e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(t){return e[t]??null}let r={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return e=>{switch(e.code){case"invalid_type":return`Ungltige Eingabe: erwartet ${e.expected}, erhalten ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Zahl";case"object":if(Array.isArray(e))return"Array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ungltige Eingabe: erwartet ${F_(e.values[0])}`:`Ungltige Option: erwartet eine von ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Zu gro: erwartet, dass ${e.origin??"Wert"} ${r}${e.maximum.toString()} ${n.unit??"Elemente"} hat`:`Zu gro: erwartet, dass ${e.origin??"Wert"} ${r}${e.maximum.toString()} ist`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Zu klein: erwartet, dass ${e.origin} ${r}${e.minimum.toString()} ${n.unit} hat`:`Zu klein: erwartet, dass ${e.origin} ${r}${e.minimum.toString()} ist`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Ungltiger String: muss mit "${t.prefix}" beginnen`:"ends_with"===t.format?`Ungltiger String: muss mit "${t.suffix}" enden`:"includes"===t.format?`Ungltiger String: muss "${t.includes}" enthalten`:"regex"===t.format?`Ungltiger String: muss dem Muster ${t.pattern} entsprechen`:`Ungltig: ${r[t.format]??e.format}`}case"not_multiple_of":return`Ungltige Zahl: muss ein Vielfaches von ${e.divisor} sein`;case"unrecognized_keys":return`${e.keys.length>1?"Unbekannte Schlssel":"Unbekannter Schlssel"}: ${p_(e.keys,", ")}`;case"invalid_key":return`Ungltiger Schlssel in ${e.origin}`;case"invalid_union":default:return"Ungltige Eingabe";case"invalid_element":return`Ungltiger Wert in ${e.origin}`}}};function kS(){return{localeError:ES()}}var SS=()=>{let e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function t(t){return e[t]??null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Invalid input: expected ${e.expected}, received ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Invalid input: expected ${F_(e.values[0])}`:`Invalid option: expected one of ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Too big: expected ${e.origin??"value"} to have ${r}${e.maximum.toString()} ${n.unit??"elements"}`:`Too big: expected ${e.origin??"value"} to be ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Too small: expected ${e.origin} to have ${r}${e.minimum.toString()} ${n.unit}`:`Too small: expected ${e.origin} to be ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Invalid string: must start with "${t.prefix}"`:"ends_with"===t.format?`Invalid string: must end with "${t.suffix}"`:"includes"===t.format?`Invalid string: must include "${t.includes}"`:"regex"===t.format?`Invalid string: must match pattern ${t.pattern}`:`Invalid ${r[t.format]??e.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${e.divisor}`;case"unrecognized_keys":return`Unrecognized key${e.keys.length>1?"s":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`Invalid key in ${e.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${e.origin}`}}};function AS(){return{localeError:SS()}}var TS=()=>{let e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function t(t){return e[t]??null}let r={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return e=>{switch(e.code){case"invalid_type":return`Nevalida enigo: atendiis ${e.expected}, riceviis ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":if(Array.isArray(e))return"tabelo";if(null===e)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Nevalida enigo: atendiis ${F_(e.values[0])}`:`Nevalida opcio: atendiis unu el ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Tro granda: atendiis ke ${e.origin??"valoro"} havu ${r}${e.maximum.toString()} ${n.unit??"elementojn"}`:`Tro granda: atendiis ke ${e.origin??"valoro"} havu ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Tro malgranda: atendiis ke ${e.origin} havu ${r}${e.minimum.toString()} ${n.unit}`:`Tro malgranda: atendiis ke ${e.origin} estu ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Nevalida karaktraro: devas komencii per "${t.prefix}"`:"ends_with"===t.format?`Nevalida karaktraro: devas finii per "${t.suffix}"`:"includes"===t.format?`Nevalida karaktraro: devas inkluzivi "${t.includes}"`:"regex"===t.format?`Nevalida karaktraro: devas kongrui kun la modelo ${t.pattern}`:`Nevalida ${r[t.format]??e.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${e.divisor}`;case"unrecognized_keys":return`Nekonata${e.keys.length>1?"j":""} losilo${e.keys.length>1?"j":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`Nevalida losilo en ${e.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${e.origin}`}}};function NS(){return{localeError:TS()}}var IS=()=>{let e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},t={string:"texto",number:"nmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"nmero grande",symbol:"smbolo",undefined:"indefinido",null:"nulo",function:"funcin",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeracin",union:"unin",literal:"literal",promise:"promesa",void:"vaco",never:"nunca",unknown:"desconocido",any:"cualquiera"};function r(t){return e[t]??null}function n(e){return t[e]??e}let i={regex:"entrada",email:"direccin de correo electrnico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duracin ISO",ipv4:"direccin IPv4",ipv6:"direccin IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"};return e=>{switch(e.code){case"invalid_type":return`Entrada invlida: se esperaba ${n(e.expected)}, recibido ${n((e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":return Array.isArray(e)?"array":null===e?"null":Object.getPrototypeOf(e)!==Object.prototype?e.constructor.name:"object"}return t})(e.input))}`;case"invalid_value":return 1===e.values.length?`Entrada invlida: se esperaba ${F_(e.values[0])}`:`Opcin invlida: se esperaba una de ${p_(e.values,"|")}`;case"too_big":{let t=e.inclusive?"<=":"<",i=r(e.origin),a=n(e.origin);return i?`Demasiado grande: se esperaba que ${a??"valor"} tuviera ${t}${e.maximum.toString()} ${i.unit??"elementos"}`:`Demasiado grande: se esperaba que ${a??"valor"} fuera ${t}${e.maximum.toString()}`}case"too_small":{let t=e.inclusive?">=":">",i=r(e.origin),a=n(e.origin);return i?`Demasiado pequeo: se esperaba que ${a} tuviera ${t}${e.minimum.toString()} ${i.unit}`:`Demasiado pequeo: se esperaba que ${a} fuera ${t}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Cadena invlida: debe comenzar con "${t.prefix}"`:"ends_with"===t.format?`Cadena invlida: debe terminar en "${t.suffix}"`:"includes"===t.format?`Cadena invlida: debe incluir "${t.includes}"`:"regex"===t.format?`Cadena invlida: debe coincidir con el patrn ${t.pattern}`:`Invlido ${i[t.format]??e.format}`}case"not_multiple_of":return`Nmero invlido: debe ser mltiplo de ${e.divisor}`;case"unrecognized_keys":return`Llave${e.keys.length>1?"s":""} desconocida${e.keys.length>1?"s":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`Llave invlida en ${n(e.origin)}`;case"invalid_union":default:return"Entrada invlida";case"invalid_element":return`Valor invlido en ${n(e.origin)}`}}};function MS(){return{localeError:IS()}}var CS=()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}let r={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ",date:" ",time:" ",duration:"  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :  ${e.expected}  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}  `;case"invalid_value":return 1===e.values.length?` :  ${F_(e.values[0])} `:` :    ${p_(e.values,"|")} `;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?` : ${e.origin??""}  ${r}${e.maximum.toString()} ${n.unit??""} `:` : ${e.origin??""}  ${r}${e.maximum.toString()} `}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?` : ${e.origin}  ${r}${e.minimum.toString()} ${n.unit} `:` : ${e.origin}  ${r}${e.minimum.toString()} `}case"invalid_format":{let t=e;return"starts_with"===t.format?` :   "${t.prefix}"  `:"ends_with"===t.format?` :   "${t.suffix}"  `:"includes"===t.format?` :   "${t.includes}" `:"regex"===t.format?` :    ${t.pattern}   `:`${r[t.format]??e.format} `}case"not_multiple_of":return` :   ${e.divisor} `;case"unrecognized_keys":return`${e.keys.length>1?"":""} : ${p_(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return" ";case"invalid_element":return`   ${e.origin}`}}};function jS(){return{localeError:CS()}}var OS=()=>{let e={string:{unit:"merkki",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"pivmrn"}};function t(t){return e[t]??null}let r={regex:"snnllinen lauseke",email:"shkpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-pivmr",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return e=>{switch(e.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${e.expected}, oli ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Virheellinen syte: tytyy olla ${F_(e.values[0])}`:`Virheellinen valinta: tytyy olla yksi seuraavista: ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Liian suuri: ${n.subject} tytyy olla ${r}${e.maximum.toString()} ${n.unit}`.trim():`Liian suuri: arvon tytyy olla ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Liian pieni: ${n.subject} tytyy olla ${r}${e.minimum.toString()} ${n.unit}`.trim():`Liian pieni: arvon tytyy olla ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Virheellinen syte: tytyy alkaa "${t.prefix}"`:"ends_with"===t.format?`Virheellinen syte: tytyy loppua "${t.suffix}"`:"includes"===t.format?`Virheellinen syte: tytyy sislt "${t.includes}"`:"regex"===t.format?`Virheellinen syte: tytyy vastata snnllist lauseketta ${t.pattern}`:`Virheellinen ${r[t.format]??e.format}`}case"not_multiple_of":return`Virheellinen luku: tytyy olla luvun ${e.divisor} monikerta`;case"unrecognized_keys":return`${e.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${p_(e.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen syte"}}};function RS(){return{localeError:OS()}}var LS=()=>{let e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}};function t(t){return e[t]??null}let r={regex:"entre",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"};return e=>{switch(e.code){case"invalid_type":return`Entre invalide : ${e.expected} attendu, ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombre";case"object":if(Array.isArray(e))return"tableau";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} reu`;case"invalid_value":return 1===e.values.length?`Entre invalide : ${F_(e.values[0])} attendu`:`Option invalide : une valeur parmi ${p_(e.values,"|")} attendue`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Trop grand : ${e.origin??"valeur"} doit ${n.verb} ${r}${e.maximum.toString()} ${n.unit??"lment(s)"}`:`Trop grand : ${e.origin??"valeur"} doit tre ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Trop petit : ${e.origin} doit ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`:`Trop petit : ${e.origin} doit tre ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Chane invalide : doit commencer par "${t.prefix}"`:"ends_with"===t.format?`Chane invalide : doit se terminer par "${t.suffix}"`:"includes"===t.format?`Chane invalide : doit inclure "${t.includes}"`:"regex"===t.format?`Chane invalide : doit correspondre au modle ${t.pattern}`:`${r[t.format]??e.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit tre un multiple de ${e.divisor}`;case"unrecognized_keys":return`Cl${e.keys.length>1?"s":""} non reconnue${e.keys.length>1?"s":""} : ${p_(e.keys,", ")}`;case"invalid_key":return`Cl invalide dans ${e.origin}`;case"invalid_union":default:return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${e.origin}`}}};function PS(){return{localeError:LS()}}var DS=()=>{let e={string:{unit:"caractres",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"lments",verb:"avoir"},set:{unit:"lments",verb:"avoir"}};function t(t){return e[t]??null}let r={regex:"entre",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dure ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chane encode en base64",base64url:"chane encode en base64url",json_string:"chane JSON",e164:"numro E.164",jwt:"JWT",template_literal:"entre"};return e=>{switch(e.code){case"invalid_type":return`Entre invalide : attendu ${e.expected}, reu ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Entre invalide : attendu ${F_(e.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"":"<",n=t(e.origin);return n?`Trop grand : attendu que ${e.origin??"la valeur"} ait ${r}${e.maximum.toString()} ${n.unit}`:`Trop grand : attendu que ${e.origin??"la valeur"} soit ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?"":">",n=t(e.origin);return n?`Trop petit : attendu que ${e.origin} ait ${r}${e.minimum.toString()} ${n.unit}`:`Trop petit : attendu que ${e.origin} soit ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Chane invalide : doit commencer par "${t.prefix}"`:"ends_with"===t.format?`Chane invalide : doit se terminer par "${t.suffix}"`:"includes"===t.format?`Chane invalide : doit inclure "${t.includes}"`:"regex"===t.format?`Chane invalide : doit correspondre au motif ${t.pattern}`:`${r[t.format]??e.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit tre un multiple de ${e.divisor}`;case"unrecognized_keys":return`Cl${e.keys.length>1?"s":""} non reconnue${e.keys.length>1?"s":""} : ${p_(e.keys,", ")}`;case"invalid_key":return`Cl invalide dans ${e.origin}`;case"invalid_union":default:return"Entre invalide";case"invalid_element":return`Valeur invalide dans ${e.origin}`}}};function $S(){return{localeError:DS()}}var zS=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:" ",url:" ",emoji:"'",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:"  ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"  64",base64url:"  64  ",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return`  :  ${e.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`  :  ${F_(e.values[0])}`:`  :     ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?` : ${e.origin??"value"}   ${r}${e.maximum.toString()} ${n.unit??"elements"}`:` : ${e.origin??"value"}   ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?` : ${e.origin}   ${r}${e.minimum.toString()} ${n.unit}`:` : ${e.origin}   ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`  :   "${t.prefix}"`:"ends_with"===t.format?`  :    "${t.suffix}"`:"includes"===t.format?`  :   "${t.includes}"`:"regex"===t.format?`  :    ${t.pattern}`:`${r[t.format]??e.format}  `}case"not_multiple_of":return`  :     ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"":""}  ${e.keys.length>1?"":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`   ${e.origin}`}}};function BS(){return{localeError:zS()}}var US=()=>{let e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(t){return e[t]??null}let r={regex:"bemenet",email:"email cm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO idblyeg",date:"ISO dtum",time:"ISO id",duration:"ISO idintervallum",ipv4:"IPv4 cm",ipv6:"IPv6 cm",cidrv4:"IPv4 tartomny",cidrv6:"IPv6 tartomny",base64:"base64-kdolt string",base64url:"base64url-kdolt string",json_string:"JSON string",e164:"E.164 szm",jwt:"JWT",template_literal:"bemenet"};return e=>{switch(e.code){case"invalid_type":return`rvnytelen bemenet: a vrt rtk ${e.expected}, a kapott rtk ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"szm";case"object":if(Array.isArray(e))return"tmb";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`rvnytelen bemenet: a vrt rtk ${F_(e.values[0])}`:`rvnytelen opci: valamelyik rtk vrt ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Tl nagy: ${e.origin??"rtk"} mrete tl nagy ${r}${e.maximum.toString()} ${n.unit??"elem"}`:`Tl nagy: a bemeneti rtk ${e.origin??"rtk"} tl nagy: ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Tl kicsi: a bemeneti rtk ${e.origin} mrete tl kicsi ${r}${e.minimum.toString()} ${n.unit}`:`Tl kicsi: a bemeneti rtk ${e.origin} tl kicsi ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`rvnytelen string: "${t.prefix}" rtkkel kell kezddnie`:"ends_with"===t.format?`rvnytelen string: "${t.suffix}" rtkkel kell vgzdnie`:"includes"===t.format?`rvnytelen string: "${t.includes}" rtket kell tartalmaznia`:"regex"===t.format?`rvnytelen string: ${t.pattern} mintnak kell megfelelnie`:`rvnytelen ${r[t.format]??e.format}`}case"not_multiple_of":return`rvnytelen szm: ${e.divisor} tbbszrsnek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${e.keys.length>1?"s":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`rvnytelen kulcs ${e.origin}`;case"invalid_union":default:return"rvnytelen bemenet";case"invalid_element":return`rvnytelen rtk: ${e.origin}`}}};function FS(){return{localeError:US()}}var HS=()=>{let e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(t){return e[t]??null}let r={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Input tidak valid: diharapkan ${e.expected}, diterima ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Input tidak valid: diharapkan ${F_(e.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Terlalu besar: diharapkan ${e.origin??"value"} memiliki ${r}${e.maximum.toString()} ${n.unit??"elemen"}`:`Terlalu besar: diharapkan ${e.origin??"value"} menjadi ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Terlalu kecil: diharapkan ${e.origin} memiliki ${r}${e.minimum.toString()} ${n.unit}`:`Terlalu kecil: diharapkan ${e.origin} menjadi ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`String tidak valid: harus dimulai dengan "${t.prefix}"`:"ends_with"===t.format?`String tidak valid: harus berakhir dengan "${t.suffix}"`:"includes"===t.format?`String tidak valid: harus menyertakan "${t.includes}"`:"regex"===t.format?`String tidak valid: harus sesuai pola ${t.pattern}`:`${r[t.format]??e.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${e.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${e.keys.length>1?"s":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${e.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${e.origin}`}}};function GS(){return{localeError:HS()}}var qS=()=>{let e={string:{unit:"stafi",verb:"a hafa"},file:{unit:"bti",verb:"a hafa"},array:{unit:"hluti",verb:"a hafa"},set:{unit:"hluti",verb:"a hafa"}};function t(t){return e[t]??null}let r={regex:"gildi",email:"netfang",url:"vefsl",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tmi",date:"ISO dagsetning",time:"ISO tmi",duration:"ISO tmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tlugildi",jwt:"JWT",template_literal:"gildi"};return e=>{switch(e.code){case"invalid_type":return`Rangt gildi:  slst inn ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmer";case"object":if(Array.isArray(e))return"fylki";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} ar sem  a vera ${e.expected}`;case"invalid_value":return 1===e.values.length?`Rangt gildi: gert r fyrir ${F_(e.values[0])}`:`gilt val: m vera eitt af eftirfarandi ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Of strt: gert er r fyrir a ${e.origin??"gildi"} hafi ${r}${e.maximum.toString()} ${n.unit??"hluti"}`:`Of strt: gert er r fyrir a ${e.origin??"gildi"} s ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Of lti: gert er r fyrir a ${e.origin} hafi ${r}${e.minimum.toString()} ${n.unit}`:`Of lti: gert er r fyrir a ${e.origin} s ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`gildur strengur: verur a byrja  "${t.prefix}"`:"ends_with"===t.format?`gildur strengur: verur a enda  "${t.suffix}"`:"includes"===t.format?`gildur strengur: verur a innihalda "${t.includes}"`:"regex"===t.format?`gildur strengur: verur a fylgja mynstri ${t.pattern}`:`Rangt ${r[t.format]??e.format}`}case"not_multiple_of":return`Rng tala: verur a vera margfeldi af ${e.divisor}`;case"unrecognized_keys":return`ekkt ${e.keys.length>1?"ir lyklar":"ur lykill"}: ${p_(e.keys,", ")}`;case"invalid_key":return`Rangur lykill  ${e.origin}`;case"invalid_union":default:return"Rangt gildi";case"invalid_element":return`Rangt gildi  ${e.origin}`}}};function VS(){return{localeError:qS()}}var WS=()=>{let e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(t){return e[t]??null}let r={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Input non valido: atteso ${e.expected}, ricevuto ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numero";case"object":if(Array.isArray(e))return"vettore";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Input non valido: atteso ${F_(e.values[0])}`:`Opzione non valida: atteso uno tra ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Troppo grande: ${e.origin??"valore"} deve avere ${r}${e.maximum.toString()} ${n.unit??"elementi"}`:`Troppo grande: ${e.origin??"valore"} deve essere ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Troppo piccolo: ${e.origin} deve avere ${r}${e.minimum.toString()} ${n.unit}`:`Troppo piccolo: ${e.origin} deve essere ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Stringa non valida: deve iniziare con "${t.prefix}"`:"ends_with"===t.format?`Stringa non valida: deve terminare con "${t.suffix}"`:"includes"===t.format?`Stringa non valida: deve includere "${t.includes}"`:"regex"===t.format?`Stringa non valida: deve corrispondere al pattern ${t.pattern}`:`Invalid ${r[t.format]??e.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${e.divisor}`;case"unrecognized_keys":return`Chiav${e.keys.length>1?"i":"e"} non riconosciut${e.keys.length>1?"e":"a"}: ${p_(e.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${e.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${e.origin}`}}};function ZS(){return{localeError:WS()}}var KS=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return`: ${e.expected}${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`: ${F_(e.values[0])}`:`: ${p_(e.values,"")}`;case"too_big":{let r=e.inclusive?"":"",n=t(e.origin);return n?`: ${e.origin??""}${e.maximum.toString()}${n.unit??""}${r}`:`: ${e.origin??""}${e.maximum.toString()}${r}`}case"too_small":{let r=e.inclusive?"":"",n=t(e.origin);return n?`: ${e.origin}${e.minimum.toString()}${n.unit}${r}`:`: ${e.origin}${e.minimum.toString()}${r}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`: "${t.prefix}"`:"ends_with"===t.format?`: "${t.suffix}"`:"includes"===t.format?`: "${t.includes}"`:"regex"===t.format?`: ${t.pattern}`:`${r[t.format]??e.format}`}case"not_multiple_of":return`: ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"":""}: ${p_(e.keys,"")}`;case"invalid_key":return`${e.origin}`;case"invalid_union":default:return"";case"invalid_element":return`${e.origin}`}}};function YS(){return{localeError:KS()}}var JS=()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}let r={regex:"",email:"- ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"-",date:"",time:"",duration:"",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :  ${e.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return{string:"",boolean:"",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:""}[t]??t})(e.input)}`;case"invalid_value":return 1===e.values.length?` :  ${F_(e.values[0])}`:` :  - ${p_(e.values,"|")}-`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?` :  ${e.origin??""} ${n.verb} ${r}${e.maximum.toString()} ${n.unit}`:` :  ${e.origin??""}  ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?` :  ${e.origin} ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`:` :  ${e.origin}  ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?` :   "${t.prefix}"-`:"ends_with"===t.format?` :   "${t.suffix}"-`:"includes"===t.format?` :   "${t.includes}"-`:"regex"===t.format?` :    ${t.pattern}`:` ${r[t.format]??e.format}`}case"not_multiple_of":return` :   ${e.divisor}- `;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`  ${e.origin}-`;case"invalid_union":default:return" ";case"invalid_element":return`  ${e.origin}-`}}};function XS(){return{localeError:JS()}}var QS=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:" base64",base64url:" base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return`  ${e.expected}  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?" (NaN)":"";case"object":if(Array.isArray(e))return" (Array)";if(null===e)return" (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`  ${F_(e.values[0])}`:`  ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`  ${e.origin??""} ${r} ${e.maximum.toString()} ${n.unit??""}`:`  ${e.origin??""} ${r} ${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`  ${e.origin} ${r} ${e.minimum.toString()} ${n.unit}`:`  ${e.origin} ${r} ${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`  "${t.prefix}"`:"ends_with"===t.format?`  "${t.suffix}"`:"includes"===t.format?`  "${t.includes}"`:"regex"===t.format?`  ${t.pattern}`:` ${r[t.format]??e.format}`}case"not_multiple_of":return`  ${e.divisor}`;case"unrecognized_keys":return` ${p_(e.keys,", ")}`;case"invalid_key":return` ${e.origin}`;case"invalid_union":default:return"";case"invalid_element":return` ${e.origin}`}}};function eA(){return{localeError:QS()}}function tA(){return eA()}var rA=()=>{let e={string:{unit:"",verb:"to have"},file:{unit:"",verb:"to have"},array:{unit:"",verb:"to have"},set:{unit:"",verb:"to have"}};function t(t){return e[t]??null}let r={regex:"",email:" ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64  ",base64url:"base64url  ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :   ${e.expected},   ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?` :  ${F_(e.values[0])}  `:` : ${p_(e.values," ")}   `;case"too_big":{let r=e.inclusive?"":"",n=""===r?" ":" ",i=t(e.origin),a=i?.unit??"";return i?`${e.origin??""}  : ${e.maximum.toString()}${a} ${r}${n}`:`${e.origin??""}  : ${e.maximum.toString()} ${r}${n}`}case"too_small":{let r=e.inclusive?"":"",n=""===r?" ":" ",i=t(e.origin),a=i?.unit??"";return i?`${e.origin??""}  : ${e.minimum.toString()}${a} ${r}${n}`:`${e.origin??""}  : ${e.minimum.toString()} ${r}${n}`}case"invalid_format":{let t=e;return"starts_with"===t.format?` : "${t.prefix}"()  `:"ends_with"===t.format?` : "${t.suffix}"()  `:"includes"===t.format?` : "${t.includes}"()  `:"regex"===t.format?` :  ${t.pattern}   `:` ${r[t.format]??e.format}`}case"not_multiple_of":return` : ${e.divisor}  `;case"unrecognized_keys":return`   : ${p_(e.keys,", ")}`;case"invalid_key":return` : ${e.origin}`;case"invalid_union":default:return" ";case"invalid_element":return` : ${e.origin}`}}};function nA(){return{localeError:rA()}}var iA=(e,t=void 0)=>{switch(e){case"number":return Number.isNaN(t)?"NaN":"skaiius";case"bigint":return"sveikasis skaiius";case"string":return"eilut";case"boolean":return"login reikm";case"undefined":case"void":return"neapibrta reikm";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return void 0===t?"neinomas objektas":null===t?"nulin reikm":Array.isArray(t)?"masyvas":Object.getPrototypeOf(t)!==Object.prototype&&t.constructor?t.constructor.name:"objektas";case"null":return"nulin reikm"}return e},aA=e=>e.charAt(0).toUpperCase()+e.slice(1);function sA(e){let t=Math.abs(e),r=t%10,n=t%100;return n>=11&&n<=19||0===r?"many":1===r?"one":"few"}var oA=()=>{let e={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli"},verb:{smaller:{inclusive:"turi bti ne ilgesn kaip",notInclusive:"turi bti trumpesn kaip"},bigger:{inclusive:"turi bti ne trumpesn kaip",notInclusive:"turi bti ilgesn kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait"},verb:{smaller:{inclusive:"turi bti ne didesnis kaip",notInclusive:"turi bti maesnis kaip"},bigger:{inclusive:"turi bti ne maesnis kaip",notInclusive:"turi bti didesnis kaip"}}},array:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}},set:{unit:{one:"element",few:"elementus",many:"element"},verb:{smaller:{inclusive:"turi turti ne daugiau kaip",notInclusive:"turi turti maiau kaip"},bigger:{inclusive:"turi turti ne maiau kaip",notInclusive:"turi turti daugiau kaip"}}}};function t(t,r,n,i){let a=e[t]??null;return null===a?a:{unit:a.unit[r],verb:a.verb[i][n?"inclusive":"notInclusive"]}}let r={regex:"vestis",email:"el. pato adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 ukoduota eilut",base64url:"base64url ukoduota eilut",json_string:"JSON eilut",e164:"E.164 numeris",jwt:"JWT",template_literal:"vestis"};return e=>{switch(e.code){case"invalid_type":return`Gautas tipas ${(e=>iA(typeof e,e))(e.input)}, o tiktasi - ${iA(e.expected)}`;case"invalid_value":return 1===e.values.length?`Privalo bti ${F_(e.values[0])}`:`Privalo bti vienas i ${p_(e.values,"|")} pasirinkim`;case"too_big":{let r=iA(e.origin),n=t(e.origin,sA(Number(e.maximum)),e.inclusive??!1,"smaller");if(n?.verb)return`${aA(r??e.origin??"reikm")} ${n.verb} ${e.maximum.toString()} ${n.unit??"element"}`;let i=e.inclusive?"ne didesnis kaip":"maesnis kaip";return`${aA(r??e.origin??"reikm")} turi bti ${i} ${e.maximum.toString()} ${n?.unit}`}case"too_small":{let r=iA(e.origin),n=t(e.origin,sA(Number(e.minimum)),e.inclusive??!1,"bigger");if(n?.verb)return`${aA(r??e.origin??"reikm")} ${n.verb} ${e.minimum.toString()} ${n.unit??"element"}`;let i=e.inclusive?"ne maesnis kaip":"didesnis kaip";return`${aA(r??e.origin??"reikm")} turi bti ${i} ${e.minimum.toString()} ${n?.unit}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Eilut privalo prasidti "${t.prefix}"`:"ends_with"===t.format?`Eilut privalo pasibaigti "${t.suffix}"`:"includes"===t.format?`Eilut privalo traukti "${t.includes}"`:"regex"===t.format?`Eilut privalo atitikti ${t.pattern}`:`Neteisingas ${r[t.format]??e.format}`}case"not_multiple_of":return`Skaiius privalo bti ${e.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpaint${e.keys.length>1?"i":"as"} rakt${e.keys.length>1?"ai":"as"}: ${p_(e.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":default:return"Klaidinga vestis";case"invalid_element":{let t=iA(e.origin);return`${aA(t??e.origin??"reikm")} turi klaiding vest`}}}};function lA(){return{localeError:oA()}}var cA=()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}let r={regex:"",email:"  -",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64- ",base64url:"base64url- ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :   ${e.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Invalid input: expected ${F_(e.values[0])}`:` :    ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?` :   ${e.origin??""}   ${r}${e.maximum.toString()} ${n.unit??""}`:` :   ${e.origin??""}   ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?` :   ${e.origin}   ${r}${e.minimum.toString()} ${n.unit}`:` :   ${e.origin}   ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?` :     "${t.prefix}"`:"ends_with"===t.format?` :     "${t.suffix}"`:"includes"===t.format?` :    "${t.includes}"`:"regex"===t.format?` :      ${t.pattern}`:`Invalid ${r[t.format]??e.format}`}case"not_multiple_of":return` :      ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?" ":" "}: ${p_(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return" ";case"invalid_element":return`   ${e.origin}`}}};function uA(){return{localeError:cA()}}var dA=()=>{let e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(t){return e[t]??null}let r={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Input tidak sah: dijangka ${e.expected}, diterima ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombor";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Input tidak sah: dijangka ${F_(e.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Terlalu besar: dijangka ${e.origin??"nilai"} ${n.verb} ${r}${e.maximum.toString()} ${n.unit??"elemen"}`:`Terlalu besar: dijangka ${e.origin??"nilai"} adalah ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Terlalu kecil: dijangka ${e.origin} ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`:`Terlalu kecil: dijangka ${e.origin} adalah ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`String tidak sah: mesti bermula dengan "${t.prefix}"`:"ends_with"===t.format?`String tidak sah: mesti berakhir dengan "${t.suffix}"`:"includes"===t.format?`String tidak sah: mesti mengandungi "${t.includes}"`:"regex"===t.format?`String tidak sah: mesti sepadan dengan corak ${t.pattern}`:`${r[t.format]??e.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${e.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${p_(e.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${e.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${e.origin}`}}};function hA(){return{localeError:dA()}}var pA=()=>{let e={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function t(t){return e[t]??null}let r={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return e=>{switch(e.code){case"invalid_type":return`Ongeldige invoer: verwacht ${e.expected}, ontving ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"getal";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ongeldige invoer: verwacht ${F_(e.values[0])}`:`Ongeldige optie: verwacht n van ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Te lang: verwacht dat ${e.origin??"waarde"} ${r}${e.maximum.toString()} ${n.unit??"elementen"} bevat`:`Te lang: verwacht dat ${e.origin??"waarde"} ${r}${e.maximum.toString()} is`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Te kort: verwacht dat ${e.origin} ${r}${e.minimum.toString()} ${n.unit} bevat`:`Te kort: verwacht dat ${e.origin} ${r}${e.minimum.toString()} is`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Ongeldige tekst: moet met "${t.prefix}" beginnen`:"ends_with"===t.format?`Ongeldige tekst: moet op "${t.suffix}" eindigen`:"includes"===t.format?`Ongeldige tekst: moet "${t.includes}" bevatten`:"regex"===t.format?`Ongeldige tekst: moet overeenkomen met patroon ${t.pattern}`:`Ongeldig: ${r[t.format]??e.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${e.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${e.keys.length>1?"s":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${e.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${e.origin}`}}};function fA(){return{localeError:pA()}}var mA=()=>{let e={string:{unit:"tegn",verb:" ha"},file:{unit:"bytes",verb:" ha"},array:{unit:"elementer",verb:" inneholde"},set:{unit:"elementer",verb:" inneholde"}};function t(t){return e[t]??null}let r={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omrde",ipv6:"IPv6-omrde",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Ugyldig input: forventet ${e.expected}, fikk ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tall";case"object":if(Array.isArray(e))return"liste";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ugyldig verdi: forventet ${F_(e.values[0])}`:`Ugyldig valg: forventet en av ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`For stor(t): forventet ${e.origin??"value"} til  ha ${r}${e.maximum.toString()} ${n.unit??"elementer"}`:`For stor(t): forventet ${e.origin??"value"} til  ha ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`For lite(n): forventet ${e.origin} til  ha ${r}${e.minimum.toString()} ${n.unit}`:`For lite(n): forventet ${e.origin} til  ha ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Ugyldig streng: m starte med "${t.prefix}"`:"ends_with"===t.format?`Ugyldig streng: m ende med "${t.suffix}"`:"includes"===t.format?`Ugyldig streng: m inneholde "${t.includes}"`:"regex"===t.format?`Ugyldig streng: m matche mnsteret ${t.pattern}`:`Ugyldig ${r[t.format]??e.format}`}case"not_multiple_of":return`Ugyldig tall: m vre et multiplum av ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ukjente nkler":"Ukjent nkkel"}: ${p_(e.keys,", ")}`;case"invalid_key":return`Ugyldig nkkel i ${e.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${e.origin}`}}};function gA(){return{localeError:mA()}}var vA=()=>{let e={string:{unit:"harf",verb:"olmaldr"},file:{unit:"bayt",verb:"olmaldr"},array:{unit:"unsur",verb:"olmaldr"},set:{unit:"unsur",verb:"olmaldr"}};function t(t){return e[t]??null}let r={regex:"giren",email:"epostagh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengm",date:"ISO tarihi",time:"ISO zaman",duration:"ISO mddeti",ipv4:"IPv4 nin",ipv6:"IPv6 nin",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-ifreli metin",base64url:"base64url-ifreli metin",json_string:"JSON metin",e164:"E.164 says",jwt:"JWT",template_literal:"giren"};return e=>{switch(e.code){case"invalid_type":return`Fsit giren: umulan ${e.expected}, alnan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numara";case"object":if(Array.isArray(e))return"saf";if(null===e)return"gayb";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Fsit giren: umulan ${F_(e.values[0])}`:`Fsit tercih: mteberler ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Fazla byk: ${e.origin??"value"}, ${r}${e.maximum.toString()} ${n.unit??"elements"} sahip olmalyd.`:`Fazla byk: ${e.origin??"value"}, ${r}${e.maximum.toString()} olmalyd.`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Fazla kk: ${e.origin}, ${r}${e.minimum.toString()} ${n.unit} sahip olmalyd.`:`Fazla kk: ${e.origin}, ${r}${e.minimum.toString()} olmalyd.`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Fsit metin: "${t.prefix}" ile balamal.`:"ends_with"===t.format?`Fsit metin: "${t.suffix}" ile bitmeli.`:"includes"===t.format?`Fsit metin: "${t.includes}" ihtiv etmeli.`:"regex"===t.format?`Fsit metin: ${t.pattern} nakna uymal.`:`Fsit ${r[t.format]??e.format}`}case"not_multiple_of":return`Fsit say: ${e.divisor} kat olmalyd.`;case"unrecognized_keys":return`Tannmayan anahtar ${e.keys.length>1?"s":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`${e.origin} iin tannmayan anahtar var.`;case"invalid_union":return"Giren tannamad.";case"invalid_element":return`${e.origin} iin tannmayan kymet var.`;default:return"Kymet tannamad."}}};function yA(){return{localeError:vA()}}var bA=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"  ",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"  ",date:"",time:"",duration:"",ipv4:" IPv4 ",ipv6:" IPv6 ",cidrv4:" IPv4 ",cidrv6:" IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:" E.164 ",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :  ${e.expected} ,  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}  `;case"invalid_value":return 1===e.values.length?` :  ${F_(e.values[0])} `:` :    ${p_(e.values,"|")}  `;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?` : ${e.origin??""}  ${r}${e.maximum.toString()} ${n.unit??""} `:` : ${e.origin??""}  ${r}${e.maximum.toString()} `}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?` : ${e.origin}  ${r}${e.minimum.toString()} ${n.unit} `:` : ${e.origin}  ${r}${e.minimum.toString()} `}case"invalid_format":{let t=e;return"starts_with"===t.format?` :   "${t.prefix}"   `:"ends_with"===t.format?` :   "${t.suffix}"    `:"includes"===t.format?` :  "${t.includes}" `:"regex"===t.format?` :   ${t.pattern}   `:`${r[t.format]??e.format}  `}case"not_multiple_of":return` :   ${e.divisor}  `;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`   ${e.origin} `;case"invalid_union":default:return" ";case"invalid_element":return`   ${e.origin} `}}};function _A(){return{localeError:bA()}}var wA=()=>{let e={string:{unit:"znakw",verb:"mie"},file:{unit:"bajtw",verb:"mie"},array:{unit:"elementw",verb:"mie"},set:{unit:"elementw",verb:"mie"}};function t(t){return e[t]??null}let r={regex:"wyraenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"cig znakw zakodowany w formacie base64",base64url:"cig znakw zakodowany w formacie base64url",json_string:"cig znakw w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejcie"};return e=>{switch(e.code){case"invalid_type":return`Nieprawidowe dane wejciowe: oczekiwano ${e.expected}, otrzymano ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"liczba";case"object":if(Array.isArray(e))return"tablica";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Nieprawidowe dane wejciowe: oczekiwano ${F_(e.values[0])}`:`Nieprawidowa opcja: oczekiwano jednej z wartoci ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Za dua warto: oczekiwano, e ${e.origin??"warto"} bdzie mie ${r}${e.maximum.toString()} ${n.unit??"elementw"}`:`Zbyt du(y/a/e): oczekiwano, e ${e.origin??"warto"} bdzie wynosi ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Za maa warto: oczekiwano, e ${e.origin??"warto"} bdzie mie ${r}${e.minimum.toString()} ${n.unit??"elementw"}`:`Zbyt ma(y/a/e): oczekiwano, e ${e.origin??"warto"} bdzie wynosi ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Nieprawidowy cig znakw: musi zaczyna si od "${t.prefix}"`:"ends_with"===t.format?`Nieprawidowy cig znakw: musi koczy si na "${t.suffix}"`:"includes"===t.format?`Nieprawidowy cig znakw: musi zawiera "${t.includes}"`:"regex"===t.format?`Nieprawidowy cig znakw: musi odpowiada wzorcowi ${t.pattern}`:`Nieprawidow(y/a/e) ${r[t.format]??e.format}`}case"not_multiple_of":return`Nieprawidowa liczba: musi by wielokrotnoci ${e.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${e.keys.length>1?"s":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`Nieprawidowy klucz w ${e.origin}`;case"invalid_union":default:return"Nieprawidowe dane wejciowe";case"invalid_element":return`Nieprawidowa warto w ${e.origin}`}}};function xA(){return{localeError:wA()}}var EA=()=>{let e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(t){return e[t]??null}let r={regex:"padro",email:"endereo de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"durao ISO",ipv4:"endereo IPv4",ipv6:"endereo IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"nmero E.164",jwt:"JWT",template_literal:"entrada"};return e=>{switch(e.code){case"invalid_type":return`Tipo invlido: esperado ${e.expected}, recebido ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmero";case"object":if(Array.isArray(e))return"array";if(null===e)return"nulo";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Entrada invlida: esperado ${F_(e.values[0])}`:`Opo invlida: esperada uma das ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Muito grande: esperado que ${e.origin??"valor"} tivesse ${r}${e.maximum.toString()} ${n.unit??"elementos"}`:`Muito grande: esperado que ${e.origin??"valor"} fosse ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Muito pequeno: esperado que ${e.origin} tivesse ${r}${e.minimum.toString()} ${n.unit}`:`Muito pequeno: esperado que ${e.origin} fosse ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Texto invlido: deve comear com "${t.prefix}"`:"ends_with"===t.format?`Texto invlido: deve terminar com "${t.suffix}"`:"includes"===t.format?`Texto invlido: deve incluir "${t.includes}"`:"regex"===t.format?`Texto invlido: deve corresponder ao padro ${t.pattern}`:`${r[t.format]??e.format} invlido`}case"not_multiple_of":return`Nmero invlido: deve ser mltiplo de ${e.divisor}`;case"unrecognized_keys":return`Chave${e.keys.length>1?"s":""} desconhecida${e.keys.length>1?"s":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`Chave invlida em ${e.origin}`;case"invalid_union":return"Entrada invlida";case"invalid_element":return`Valor invlido em ${e.origin}`;default:return"Campo invlido"}}};function kA(){return{localeError:EA()}}function SA(e,t,r,n){let i=Math.abs(e),a=i%10,s=i%100;return s>=11&&s<=19?n:1===a?t:a>=2&&a<=4?r:n}var AA=()=>{let e={string:{unit:{one:"",few:"",many:""},verb:""},file:{unit:{one:"",few:"",many:""},verb:""},array:{unit:{one:"",few:"",many:""},verb:""},set:{unit:{one:"",few:"",many:""},verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"email ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO   ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"   base64",base64url:"   base64url",json_string:"JSON ",e164:" E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` :  ${e.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?` :  ${F_(e.values[0])}`:` :    ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);if(n){let t=SA(Number(e.maximum),n.unit.one,n.unit.few,n.unit.many);return`  : ,  ${e.origin??""}   ${r}${e.maximum.toString()} ${t}`}return`  : ,  ${e.origin??""}  ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);if(n){let t=SA(Number(e.minimum),n.unit.one,n.unit.few,n.unit.many);return`  : ,  ${e.origin}   ${r}${e.minimum.toString()} ${t}`}return`  : ,  ${e.origin}  ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?` :    "${t.prefix}"`:"ends_with"===t.format?` :    "${t.suffix}"`:"includes"===t.format?` :   "${t.includes}"`:"regex"===t.format?` :    ${t.pattern}`:` ${r[t.format]??e.format}`}case"not_multiple_of":return` :    ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"":""} ${e.keys.length>1?"":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`   ${e.origin}`}}};function TA(){return{localeError:AA()}}var NA=()=>{let e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(t){return e[t]??null}let r={regex:"vnos",email:"e-potni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in as",date:"ISO datum",time:"ISO as",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 tevilka",jwt:"JWT",template_literal:"vnos"};return e=>{switch(e.code){case"invalid_type":return`Neveljaven vnos: priakovano ${e.expected}, prejeto ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tevilo";case"object":if(Array.isArray(e))return"tabela";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Neveljaven vnos: priakovano ${F_(e.values[0])}`:`Neveljavna monost: priakovano eno izmed ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Preveliko: priakovano, da bo ${e.origin??"vrednost"} imelo ${r}${e.maximum.toString()} ${n.unit??"elementov"}`:`Preveliko: priakovano, da bo ${e.origin??"vrednost"} ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Premajhno: priakovano, da bo ${e.origin} imelo ${r}${e.minimum.toString()} ${n.unit}`:`Premajhno: priakovano, da bo ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Neveljaven niz: mora se zaeti z "${t.prefix}"`:"ends_with"===t.format?`Neveljaven niz: mora se konati z "${t.suffix}"`:"includes"===t.format?`Neveljaven niz: mora vsebovati "${t.includes}"`:"regex"===t.format?`Neveljaven niz: mora ustrezati vzorcu ${t.pattern}`:`Neveljaven ${r[t.format]??e.format}`}case"not_multiple_of":return`Neveljavno tevilo: mora biti vekratnik ${e.divisor}`;case"unrecognized_keys":return`Neprepoznan${e.keys.length>1?"i kljui":" klju"}: ${p_(e.keys,", ")}`;case"invalid_key":return`Neveljaven klju v ${e.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${e.origin}`}}};function IA(){return{localeError:NA()}}var MA=()=>{let e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehlla"},set:{unit:"objekt",verb:"att innehlla"}};function t(t){return e[t]??null}let r={regex:"reguljrt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad strng",base64url:"base64url-kodad strng",json_string:"JSON-strng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return e=>{switch(e.code){case"invalid_type":return`Ogiltig inmatning: frvntat ${e.expected}, fick ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"antal";case"object":if(Array.isArray(e))return"lista";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ogiltig inmatning: frvntat ${F_(e.values[0])}`:`Ogiltigt val: frvntade en av ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Fr stor(t): frvntade ${e.origin??"vrdet"} att ha ${r}${e.maximum.toString()} ${n.unit??"element"}`:`Fr stor(t): frvntat ${e.origin??"vrdet"} att ha ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Fr lite(t): frvntade ${e.origin??"vrdet"} att ha ${r}${e.minimum.toString()} ${n.unit}`:`Fr lite(t): frvntade ${e.origin??"vrdet"} att ha ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Ogiltig strng: mste brja med "${t.prefix}"`:"ends_with"===t.format?`Ogiltig strng: mste sluta med "${t.suffix}"`:"includes"===t.format?`Ogiltig strng: mste innehlla "${t.includes}"`:"regex"===t.format?`Ogiltig strng: mste matcha mnstret "${t.pattern}"`:`Ogiltig(t) ${r[t.format]??e.format}`}case"not_multiple_of":return`Ogiltigt tal: mste vara en multipel av ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Oknda nycklar":"Oknd nyckel"}: ${p_(e.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${e.origin??"vrdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt vrde i ${e.origin??"vrdet"}`}}};function CA(){return{localeError:MA()}}var jA=()=>{let e={string:{unit:"",verb:" "},file:{unit:"",verb:" "},array:{unit:"",verb:" "},set:{unit:"",verb:" "}};function t(t){return e[t]??null}let r={regex:"",email:" ",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO  ",date:"ISO ",time:"ISO ",duration:"ISO  ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64-encoded ",base64url:"base64url-encoded ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return` :  ${e.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?" ":"";case"object":if(Array.isArray(e))return"";if(null===e)return"";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?` :  ${F_(e.values[0])}`:` :  ${p_(e.values,"|")}  `;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?` :  ${e.origin??""} ${r}${e.maximum.toString()} ${n.unit??""}   `:` :  ${e.origin??""} ${r}${e.maximum.toString()}   `}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?` :  ${e.origin} ${r}${e.minimum.toString()} ${n.unit}   `:` :  ${e.origin} ${r}${e.minimum.toString()}   `}case"invalid_format":{let t=e;return"starts_with"===t.format?` : "${t.prefix}"   `:"ends_with"===t.format?` : "${t.suffix}"   `:"includes"===t.format?` : "${t.includes}"   `:"regex"===t.format?` : ${t.pattern}   `:` ${r[t.format]??e.format}`}case"not_multiple_of":return` : ${e.divisor}    `;case"unrecognized_keys":return`  ${e.keys.length>1?"":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`${e.origin}   `;case"invalid_union":default:return" ";case"invalid_element":return`${e.origin}   `}}};function OA(){return{localeError:jA()}}var RA=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:" ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IP  IPv4",cidrv6:" IP  IPv6",base64:" Base64",base64url:" Base64  URL",json_string:" JSON",e164:" (E.164)",jwt:" JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return`:  ${e.expected}  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?" (NaN)":"";case"object":if(Array.isArray(e))return" (Array)";if(null===e)return" (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`:  ${F_(e.values[0])}`:`:  ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"":"",n=t(e.origin);return n?`: ${e.origin??""} ${r} ${e.maximum.toString()} ${n.unit??""}`:`: ${e.origin??""} ${r} ${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?"":"",n=t(e.origin);return n?`: ${e.origin} ${r} ${e.minimum.toString()} ${n.unit}`:`: ${e.origin} ${r} ${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`:  "${t.prefix}"`:"ends_with"===t.format?`:  "${t.suffix}"`:"includes"===t.format?`:  "${t.includes}" `:"regex"===t.format?`:  ${t.pattern}`:`: ${r[t.format]??e.format}`}case"not_multiple_of":return`:  ${e.divisor} `;case"unrecognized_keys":return`: ${p_(e.keys,", ")}`;case"invalid_key":return` ${e.origin}`;case"invalid_union":return": ";case"invalid_element":return` ${e.origin}`;default:return""}}};function LA(){return{localeError:RA()}}var PA=()=>{let e={string:{unit:"karakter",verb:"olmal"},file:{unit:"bayt",verb:"olmal"},array:{unit:"e",verb:"olmal"},set:{unit:"e",verb:"olmal"}};function t(t){return e[t]??null}let r={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO sre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral",cidrv6:"IPv6 aral",base64:"base64 ile ifrelenmi metin",base64url:"base64url ile ifrelenmi metin",json_string:"JSON dizesi",e164:"E.164 says",jwt:"JWT",template_literal:"ablon dizesi"};return e=>{switch(e.code){case"invalid_type":return`Geersiz deer: beklenen ${e.expected}, alnan ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Geersiz deer: beklenen ${F_(e.values[0])}`:`Geersiz seenek: aadakilerden biri olmal: ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`ok byk: beklenen ${e.origin??"deer"} ${r}${e.maximum.toString()} ${n.unit??"e"}`:`ok byk: beklenen ${e.origin??"deer"} ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`ok kk: beklenen ${e.origin} ${r}${e.minimum.toString()} ${n.unit}`:`ok kk: beklenen ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Geersiz metin: "${t.prefix}" ile balamal`:"ends_with"===t.format?`Geersiz metin: "${t.suffix}" ile bitmeli`:"includes"===t.format?`Geersiz metin: "${t.includes}" iermeli`:"regex"===t.format?`Geersiz metin: ${t.pattern} desenine uymal`:`Geersiz ${r[t.format]??e.format}`}case"not_multiple_of":return`Geersiz say: ${e.divisor} ile tam blnebilmeli`;case"unrecognized_keys":return`Tannmayan anahtar${e.keys.length>1?"lar":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`${e.origin} iinde geersiz anahtar`;case"invalid_union":default:return"Geersiz deer";case"invalid_element":return`${e.origin} iinde geersiz deer`}}};function DA(){return{localeError:PA()}}var $A=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:" ",email:"  ",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"   ISO",date:" ISO",time:" ISO",duration:" ISO",ipv4:" IPv4",ipv6:" IPv6",cidrv4:" IPv4",cidrv6:" IPv6",base64:"   base64",base64url:"   base64url",json_string:" JSON",e164:" E.164",jwt:"JWT",template_literal:" "};return e=>{switch(e.code){case"invalid_type":return`  :  ${e.expected},  ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`  :  ${F_(e.values[0])}`:` :    ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?` : ,  ${e.origin??""} ${n.verb} ${r}${e.maximum.toString()} ${n.unit??""}`:` : ,  ${e.origin??""}  ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?` : ,  ${e.origin} ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`:` : ,  ${e.origin}  ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?` :    "${t.prefix}"`:"ends_with"===t.format?` :    "${t.suffix}"`:"includes"===t.format?` :   "${t.includes}"`:"regex"===t.format?` :    ${t.pattern}`:` ${r[t.format]??e.format}`}case"not_multiple_of":return` :    ${e.divisor}`;case"unrecognized_keys":return` ${e.keys.length>1?"":""}: ${p_(e.keys,", ")}`;case"invalid_key":return`   ${e.origin}`;case"invalid_union":default:return"  ";case"invalid_element":return`   ${e.origin}`}}};function zA(){return{localeError:$A()}}function BA(){return zA()}var UA=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:" ",email:"  ",url:"  ",emoji:"",uuid:"   ",uuidv4:"     4",uuidv6:"     6",nanoid:"  ",guid:"   ",cuid:"   ",cuid2:"    2",ulid:"   ",xid:"  ",ksuid:"    ",datetime:"    ",date:"   ",time:"   ",duration:"   ",ipv4:"   4 ",ipv6:"   6 ",cidrv4:"   4 ",cidrv6:"   6 ",base64:" 64   ",base64url:" 64      ",json_string:"    ",e164:" 164 ",jwt:"  ",template_literal:" "};return e=>{switch(e.code){case"invalid_type":return`  : ${e.expected}   ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"";case"object":if(Array.isArray(e))return"";if(null===e)return"";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}  `;case"invalid_value":return 1===e.values.length?`  : ${F_(e.values[0])}  `:` : ${p_(e.values,"|")}     `;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?` : ${e.origin??""}  ${r}${e.maximum.toString()} ${n.unit??""}   `:` : ${e.origin??""}  ${r}${e.maximum.toString()}   `}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?` : ${e.origin}  ${r}${e.minimum.toString()} ${n.unit}   `:` : ${e.origin}  ${r}${e.minimum.toString()}   `}case"invalid_format":{let t=e;return"starts_with"===t.format?` : "${t.prefix}"    `:"ends_with"===t.format?` : "${t.suffix}"    `:"includes"===t.format?` : "${t.includes}"   `:"regex"===t.format?` :  ${t.pattern}    `:` ${r[t.format]??e.format}`}case"not_multiple_of":return` : ${e.divisor}    `;case"unrecognized_keys":return`   ${e.keys.length>1?"":""}: ${p_(e.keys," ")}`;case"invalid_key":return`${e.origin}   `;case"invalid_union":default:return"  ";case"invalid_element":return`${e.origin}   `}}};function FA(){return{localeError:UA()}}var HA=()=>{let e={string:{unit:"k t",verb:"c"},file:{unit:"byte",verb:"c"},array:{unit:"phn t",verb:"c"},set:{unit:"phn t",verb:"c"}};function t(t){return e[t]??null}let r={regex:"u vo",email:"a ch email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngy gi ISO",date:"ngy ISO",time:"gi ISO",duration:"khong thi gian ISO",ipv4:"a ch IPv4",ipv6:"a ch IPv6",cidrv4:"di IPv4",cidrv6:"di IPv6",base64:"chui m ha base64",base64url:"chui m ha base64url",json_string:"chui JSON",e164:"s E.164",jwt:"JWT",template_literal:"u vo"};return e=>{switch(e.code){case"invalid_type":return`u vo khng hp l: mong i ${e.expected}, nhn c ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"s";case"object":if(Array.isArray(e))return"mng";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`u vo khng hp l: mong i ${F_(e.values[0])}`:`Ty chn khng hp l: mong i mt trong cc gi tr ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Qu ln: mong i ${e.origin??"gi tr"} ${n.verb} ${r}${e.maximum.toString()} ${n.unit??"phn t"}`:`Qu ln: mong i ${e.origin??"gi tr"} ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Qu nh: mong i ${e.origin} ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`:`Qu nh: mong i ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`Chui khng hp l: phi bt u bng "${t.prefix}"`:"ends_with"===t.format?`Chui khng hp l: phi kt thc bng "${t.suffix}"`:"includes"===t.format?`Chui khng hp l: phi bao gm "${t.includes}"`:"regex"===t.format?`Chui khng hp l: phi khp vi mu ${t.pattern}`:`${r[t.format]??e.format} khng hp l`}case"not_multiple_of":return`S khng hp l: phi l bi s ca ${e.divisor}`;case"unrecognized_keys":return`Kha khng c nhn dng: ${p_(e.keys,", ")}`;case"invalid_key":return`Kha khng hp l trong ${e.origin}`;case"invalid_union":default:return"u vo khng hp l";case"invalid_element":return`Gi tr khng hp l trong ${e.origin}`}}};function GA(){return{localeError:HA()}}var qA=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"URL",emoji:"",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO",date:"ISO",time:"ISO",duration:"ISO",ipv4:"IPv4",ipv6:"IPv6",cidrv4:"IPv4",cidrv6:"IPv6",base64:"base64",base64url:"base64url",json_string:"JSON",e164:"E.164",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` ${e.expected} ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"(NaN)":"";case"object":if(Array.isArray(e))return"";if(null===e)return"(null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?` ${F_(e.values[0])}`:` ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?` ${e.origin??""} ${r}${e.maximum.toString()} ${n.unit??""}`:` ${e.origin??""} ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?` ${e.origin} ${r}${e.minimum.toString()} ${n.unit}`:` ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?` "${t.prefix}" `:"ends_with"===t.format?` "${t.suffix}" `:"includes"===t.format?` "${t.includes}"`:"regex"===t.format?` ${t.pattern}`:`${r[t.format]??e.format}`}case"not_multiple_of":return` ${e.divisor} `;case"unrecognized_keys":return`(key): ${p_(e.keys,", ")}`;case"invalid_key":return`${e.origin} (key)`;case"invalid_union":default:return"";case"invalid_element":return`${e.origin} (value)`}}};function VA(){return{localeError:qA()}}var WA=()=>{let e={string:{unit:"",verb:""},file:{unit:"",verb:""},array:{unit:"",verb:""},set:{unit:"",verb:""}};function t(t){return e[t]??null}let r={regex:"",email:"",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ",date:"ISO ",time:"ISO ",duration:"ISO ",ipv4:"IPv4 ",ipv6:"IPv6 ",cidrv4:"IPv4 ",cidrv6:"IPv6 ",base64:"base64 ",base64url:"base64url ",json_string:"JSON ",e164:"E.164 ",jwt:"JWT",template_literal:""};return e=>{switch(e.code){case"invalid_type":return` ${e.expected} ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?` ${F_(e.values[0])}`:` ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?` ${e.origin??""}  ${r}${e.maximum.toString()} ${n.unit??""}`:` ${e.origin??""}  ${r}${e.maximum.toString()}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?` ${e.origin}  ${r}${e.minimum.toString()} ${n.unit}`:` ${e.origin}  ${r}${e.minimum.toString()}`}case"invalid_format":{let t=e;return"starts_with"===t.format?` "${t.prefix}" `:"ends_with"===t.format?` "${t.suffix}" `:"includes"===t.format?` "${t.includes}"`:"regex"===t.format?` ${t.pattern}`:` ${r[t.format]??e.format}`}case"not_multiple_of":return` ${e.divisor} `;case"unrecognized_keys":return`${e.keys.length>1?"":""}${p_(e.keys,"")}`;case"invalid_key":return`${e.origin} `;case"invalid_union":default:return"";case"invalid_element":return`${e.origin} `}}};function ZA(){return{localeError:WA()}}var KA=()=>{let e={string:{unit:"mi",verb:"n"},file:{unit:"bytes",verb:"n"},array:{unit:"nkan",verb:"n"},set:{unit:"nkan",verb:"n"}};function t(t){return e[t]??null}let r={regex:"r bwl",email:"drs ml",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"kk ISO",date:"j ISO",time:"kk ISO",duration:"kk t p ISO",ipv4:"drs IPv4",ipv6:"drs IPv6",cidrv4:"gbgb IPv4",cidrv6:"gbgb IPv6",base64:"r t a k n base64",base64url:"r base64url",json_string:"r JSON",e164:"nmb E.164",jwt:"JWT",template_literal:"r bwl"};return e=>{switch(e.code){case"invalid_type":return`bwl ae: a n lti fi ${e.expected}, m a r ${(e=>{let t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nmb";case"object":if(Array.isArray(e))return"akop";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`bwl ae: a n lti fi ${F_(e.values[0])}`:`yn ae: yan kan lra ${p_(e.values,"|")}`;case"too_big":{let r=e.inclusive?"<=":"<",n=t(e.origin);return n?`T p j: a n lti j p ${e.origin??"iye"} ${n.verb} ${r}${e.maximum} ${n.unit}`:`T p j: a n lti j ${r}${e.maximum}`}case"too_small":{let r=e.inclusive?">=":">",n=t(e.origin);return n?`Kr ju: a n lti j p ${e.origin} ${n.verb} ${r}${e.minimum} ${n.unit}`:`Kr ju: a n lti j ${r}${e.minimum}`}case"invalid_format":{let t=e;return"starts_with"===t.format?`r ae: gbd br pl "${t.prefix}"`:"ends_with"===t.format?`r ae: gbd par pl "${t.suffix}"`:"includes"===t.format?`r ae: gbd n "${t.includes}"`:"regex"===t.format?`r ae: gbd b pr mu ${t.pattern}`:`Ae: ${r[t.format]??e.format}`}case"not_multiple_of":return`Nmb ae: gbd j y ppn ti ${e.divisor}`;case"unrecognized_keys":return`Btn m: ${p_(e.keys,", ")}`;case"invalid_key":return`Btn ae nn ${e.origin}`;case"invalid_union":default:return"bwl ae";case"invalid_element":return`Iye ae nn ${e.origin}`}}};function YA(){return{localeError:KA()}}var JA=Symbol("ZodOutput"),XA=Symbol("ZodInput");class QA{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};delete r.id;let n={...r,...this._map.get(e)};return Object.keys(n).length?n:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function eT(){return new QA}var tT=eT();function rT(e,t){return new e({type:"string",...B_(t)})}function nT(e,t){return new e({type:"string",coerce:!0,...B_(t)})}function iT(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...B_(t)})}function aT(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...B_(t)})}function sT(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...B_(t)})}function oT(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...B_(t)})}function lT(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...B_(t)})}function cT(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...B_(t)})}function uT(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...B_(t)})}function dT(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...B_(t)})}function hT(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...B_(t)})}function pT(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...B_(t)})}function fT(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...B_(t)})}function mT(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...B_(t)})}function gT(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...B_(t)})}function vT(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...B_(t)})}function yT(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...B_(t)})}function bT(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...B_(t)})}function _T(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...B_(t)})}function wT(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...B_(t)})}function xT(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...B_(t)})}function ET(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...B_(t)})}function kT(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...B_(t)})}function ST(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...B_(t)})}var AT={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function TT(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...B_(t)})}function NT(e,t){return new e({type:"string",format:"date",check:"string_format",...B_(t)})}function IT(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...B_(t)})}function MT(e,t){return new e({type:"string",format:"duration",check:"string_format",...B_(t)})}function CT(e,t){return new e({type:"number",checks:[],...B_(t)})}function jT(e,t){return new e({type:"number",coerce:!0,checks:[],...B_(t)})}function OT(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...B_(t)})}function RT(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...B_(t)})}function LT(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...B_(t)})}function PT(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...B_(t)})}function DT(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...B_(t)})}function $T(e,t){return new e({type:"boolean",...B_(t)})}function zT(e,t){return new e({type:"boolean",coerce:!0,...B_(t)})}function BT(e,t){return new e({type:"bigint",...B_(t)})}function UT(e,t){return new e({type:"bigint",coerce:!0,...B_(t)})}function FT(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...B_(t)})}function HT(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...B_(t)})}function GT(e,t){return new e({type:"symbol",...B_(t)})}function qT(e,t){return new e({type:"undefined",...B_(t)})}function VT(e,t){return new e({type:"null",...B_(t)})}function WT(e){return new e({type:"any"})}function ZT(e){return new e({type:"unknown"})}function KT(e,t){return new e({type:"never",...B_(t)})}function YT(e,t){return new e({type:"void",...B_(t)})}function JT(e,t){return new e({type:"date",...B_(t)})}function XT(e,t){return new e({type:"date",coerce:!0,...B_(t)})}function QT(e,t){return new e({type:"nan",...B_(t)})}function eN(e,t){return new rE({check:"less_than",...B_(t),value:e,inclusive:!1})}function tN(e,t){return new rE({check:"less_than",...B_(t),value:e,inclusive:!0})}function rN(e,t){return new nE({check:"greater_than",...B_(t),value:e,inclusive:!1})}function nN(e,t){return new nE({check:"greater_than",...B_(t),value:e,inclusive:!0})}function iN(e){return rN(0,e)}function aN(e){return eN(0,e)}function sN(e){return tN(0,e)}function oN(e){return nN(0,e)}function lN(e,t){return new iE({check:"multiple_of",...B_(t),value:e})}function cN(e,t){return new oE({check:"max_size",...B_(t),maximum:e})}function uN(e,t){return new lE({check:"min_size",...B_(t),minimum:e})}function dN(e,t){return new cE({check:"size_equals",...B_(t),size:e})}function hN(e,t){return new uE({check:"max_length",...B_(t),maximum:e})}function pN(e,t){return new dE({check:"min_length",...B_(t),minimum:e})}function fN(e,t){return new hE({check:"length_equals",...B_(t),length:e})}function mN(e,t){return new fE({check:"string_format",format:"regex",...B_(t),pattern:e})}function gN(e){return new mE({check:"string_format",format:"lowercase",...B_(e)})}function vN(e){return new gE({check:"string_format",format:"uppercase",...B_(e)})}function yN(e,t){return new vE({check:"string_format",format:"includes",...B_(t),includes:e})}function bN(e,t){return new yE({check:"string_format",format:"starts_with",...B_(t),prefix:e})}function _N(e,t){return new bE({check:"string_format",format:"ends_with",...B_(t),suffix:e})}function wN(e,t,r){return new wE({check:"property",property:e,schema:t,...B_(r)})}function xN(e,t){return new xE({check:"mime_type",mime:e,...B_(t)})}function EN(e){return new EE({check:"overwrite",tx:e})}function kN(e){return EN(t=>t.normalize(e))}function SN(){return EN(e=>e.trim())}function AN(){return EN(e=>e.toLowerCase())}function TN(){return EN(e=>e.toUpperCase())}function NN(e,t,r){return new e({type:"array",element:t,...B_(r)})}function IN(e,t,r){return new e({type:"union",options:t,...B_(r)})}function MN(e,t,r,n){return new e({type:"union",options:r,discriminator:t,...B_(n)})}function CN(e,t,r){return new e({type:"intersection",left:t,right:r})}function jN(e,t,r,n){let i=r instanceof AE;return new e({type:"tuple",items:t,rest:i?r:null,...B_(i?n:r)})}function ON(e,t,r,n){return new e({type:"record",keyType:t,valueType:r,...B_(n)})}function RN(e,t,r,n){return new e({type:"map",keyType:t,valueType:r,...B_(n)})}function LN(e,t,r){return new e({type:"set",valueType:t,...B_(r)})}function PN(e,t,r){let n=Array.isArray(t)?Object.fromEntries(t.map(e=>[e,e])):t;return new e({type:"enum",entries:n,...B_(r)})}function DN(e,t,r){return new e({type:"enum",entries:t,...B_(r)})}function $N(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...B_(r)})}function zN(e,t){return new e({type:"file",...B_(t)})}function BN(e,t){return new e({type:"transform",transform:t})}function UN(e,t){return new e({type:"optional",innerType:t})}function FN(e,t){return new e({type:"nullable",innerType:t})}function HN(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return"function"==typeof r?r():O_(r)}})}function GN(e,t,r){return new e({type:"nonoptional",innerType:t,...B_(r)})}function qN(e,t){return new e({type:"success",innerType:t})}function VN(e,t,r){return new e({type:"catch",innerType:t,catchValue:"function"==typeof r?r:()=>r})}function WN(e,t,r){return new e({type:"pipe",in:t,out:r})}function ZN(e,t){return new e({type:"readonly",innerType:t})}function KN(e,t,r){return new e({type:"template_literal",parts:t,...B_(r)})}function YN(e,t){return new e({type:"lazy",getter:t})}function JN(e,t){return new e({type:"promise",innerType:t})}function XN(e,t,r){let n=B_(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function QN(e,t,r){return new e({type:"custom",check:"custom",fn:t,...B_(r)})}function eI(e){let t=tI(r=>(r.addIssue=e=>{if("string"==typeof e)r.issues.push(aw(e,r.value,t._zod.def));else{let n=e;n.fatal&&(n.continue=!1),n.code??(n.code="custom"),n.input??(n.input=r.value),n.inst??(n.inst=t),n.continue??(n.continue=!t._zod.def.abort),r.issues.push(aw(n))}},e(r.value,r)));return t}function tI(e,t){let r=new eE({check:"custom",...B_(t)});return r._zod.check=e,r}function rI(e,t){let r=B_(t),n=r.truthy??["true","1","yes","on","y","enabled"],i=r.falsy??["false","0","no","off","n","disabled"];"sensitive"!==r.case&&(n=n.map(e=>"string"==typeof e?e.toLowerCase():e),i=i.map(e=>"string"==typeof e?e.toLowerCase():e));let a=new Set(n),s=new Set(i),o=e.Codec??Xk,l=e.Boolean??ik,c=new o({type:"pipe",in:new(e.String??TE)({type:"string",error:r.error}),out:new l({type:"boolean",error:r.error}),transform:(e,t)=>{let n=e;return"sensitive"!==r.case&&(n=n.toLowerCase()),!!a.has(n)||!s.has(n)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...a,...s],input:t.value,inst:c,continue:!1}),{})},reverseTransform:(e,t)=>!0===e?n[0]||"true":i[0]||"false",error:r.error});return c}function nI(e,t,r,n={}){let i=B_(n),a={...B_(n),check:"string_format",type:"string",format:t,fn:"function"==typeof r?r:e=>r.test(e),...i};return r instanceof RegExp&&(a.pattern=r),new e(a)}class iI{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??tT,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var r;let n=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},a=this.seen.get(e);if(a)return a.count++,t.schemaPath.includes(e)&&(a.cycle=t.path),a.schema;let s={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,s);let o=e._zod.toJSONSchema?.();if(o)s.schema=o;else{let r={...t,schemaPath:[...t.schemaPath,e],path:t.path},a=e._zod.parent;if(a)s.ref=a,this.process(a,r),this.seen.get(a).isParent=!0;else{let t=s.schema;switch(n.type){case"string":{let r=t;r.type="string";let{minimum:n,maximum:a,format:o,patterns:l,contentEncoding:c}=e._zod.bag;if("number"==typeof n&&(r.minLength=n),"number"==typeof a&&(r.maxLength=a),o&&(r.format=i[o]??o,""===r.format&&delete r.format),c&&(r.contentEncoding=c),l&&l.size>0){let e=[...l];1===e.length?r.pattern=e[0].source:e.length>1&&(s.schema.allOf=[...e.map(e=>({..."draft-7"===this.target||"draft-4"===this.target||"openapi-3.0"===this.target?{type:"string"}:{},pattern:e.source}))])}break}case"number":{let r=t,{minimum:n,maximum:i,format:a,multipleOf:s,exclusiveMaximum:o,exclusiveMinimum:l}=e._zod.bag;"string"==typeof a&&a.includes("int")?r.type="integer":r.type="number","number"==typeof l&&("draft-4"===this.target||"openapi-3.0"===this.target?(r.minimum=l,r.exclusiveMinimum=!0):r.exclusiveMinimum=l),"number"==typeof n&&(r.minimum=n,"number"==typeof l&&"draft-4"!==this.target&&(l>=n?delete r.minimum:delete r.exclusiveMinimum)),"number"==typeof o&&("draft-4"===this.target||"openapi-3.0"===this.target?(r.maximum=o,r.exclusiveMaximum=!0):r.exclusiveMaximum=o),"number"==typeof i&&(r.maximum=i,"number"==typeof o&&"draft-4"!==this.target&&(o<=i?delete r.maximum:delete r.exclusiveMaximum)),"number"==typeof s&&(r.multipleOf=s);break}case"boolean":case"success":t.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema");break;case"null":"openapi-3.0"===this.target?(t.type="string",t.nullable=!0,t.enum=[null]):t.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw Error("Void cannot be represented in JSON Schema");break;case"never":t.not={};break;case"date":if("throw"===this.unrepresentable)throw Error("Date cannot be represented in JSON Schema");break;case"array":{let i=t,{minimum:a,maximum:s}=e._zod.bag;"number"==typeof a&&(i.minItems=a),"number"==typeof s&&(i.maxItems=s),i.type="array",i.items=this.process(n.element,{...r,path:[...r.path,"items"]});break}case"object":{let e=t;e.type="object",e.properties={};let i=n.shape;for(let t in i)e.properties[t]=this.process(i[t],{...r,path:[...r.path,"properties",t]});let a=new Set(Object.keys(i)),s=new Set([...a].filter(e=>{let t=n.shape[e]._zod;return"input"===this.io?void 0===t.optin:void 0===t.optout}));s.size>0&&(e.required=Array.from(s)),"never"===n.catchall?._zod.def.type?e.additionalProperties=!1:n.catchall?n.catchall&&(e.additionalProperties=this.process(n.catchall,{...r,path:[...r.path,"additionalProperties"]})):"output"===this.io&&(e.additionalProperties=!1);break}case"union":{let e=t,i=n.options.map((e,t)=>this.process(e,{...r,path:[...r.path,"anyOf",t]}));e.anyOf=i;break}case"intersection":{let e=t,i=this.process(n.left,{...r,path:[...r.path,"allOf",0]}),a=this.process(n.right,{...r,path:[...r.path,"allOf",1]}),s=e=>"allOf"in e&&1===Object.keys(e).length,o=[...s(i)?i.allOf:[i],...s(a)?a.allOf:[a]];e.allOf=o;break}case"tuple":{let i=t;i.type="array";let a="draft-2020-12"===this.target?"prefixItems":"items",s="draft-2020-12"===this.target||"openapi-3.0"===this.target?"items":"additionalItems",o=n.items.map((e,t)=>this.process(e,{...r,path:[...r.path,a,t]})),l=n.rest?this.process(n.rest,{...r,path:[...r.path,s,..."openapi-3.0"===this.target?[n.items.length]:[]]}):null;"draft-2020-12"===this.target?(i.prefixItems=o,l&&(i.items=l)):"openapi-3.0"===this.target?(i.items={anyOf:o},l&&i.items.anyOf.push(l),i.minItems=o.length,l||(i.maxItems=o.length)):(i.items=o,l&&(i.additionalItems=l));let{minimum:c,maximum:u}=e._zod.bag;"number"==typeof c&&(i.minItems=c),"number"==typeof u&&(i.maxItems=u);break}case"record":{let e=t;e.type="object",("draft-7"===this.target||"draft-2020-12"===this.target)&&(e.propertyNames=this.process(n.keyType,{...r,path:[...r.path,"propertyNames"]})),e.additionalProperties=this.process(n.valueType,{...r,path:[...r.path,"additionalProperties"]});break}case"map":if("throw"===this.unrepresentable)throw Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw Error("Set cannot be represented in JSON Schema");break;case"enum":{let e=t,r=h_(n.entries);r.every(e=>"number"==typeof e)&&(e.type="number"),r.every(e=>"string"==typeof e)&&(e.type="string"),e.enum=r;break}case"literal":{let e=t,r=[];for(let t of n.values)if(void 0===t){if("throw"===this.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof t){if("throw"===this.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");r.push(Number(t))}else r.push(t);if(0===r.length);else if(1===r.length){let t=r[0];e.type=null===t?"null":typeof t,"draft-4"===this.target||"openapi-3.0"===this.target?e.enum=[t]:e.const=t}else r.every(e=>"number"==typeof e)&&(e.type="number"),r.every(e=>"string"==typeof e)&&(e.type="string"),r.every(e=>"boolean"==typeof e)&&(e.type="string"),r.every(e=>null===e)&&(e.type="null"),e.enum=r;break}case"file":{let r=t,n={type:"string",format:"binary",contentEncoding:"binary"},{minimum:i,maximum:a,mime:s}=e._zod.bag;void 0!==i&&(n.minLength=i),void 0!==a&&(n.maxLength=a),s?1===s.length?(n.contentMediaType=s[0],Object.assign(r,n)):r.anyOf=s.map(e=>({...n,contentMediaType:e})):Object.assign(r,n);break}case"transform":if("throw"===this.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{let e=this.process(n.innerType,r);"openapi-3.0"===this.target?(s.ref=n.innerType,t.nullable=!0):t.anyOf=[e,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(n.innerType,r),s.ref=n.innerType;break;case"default":this.process(n.innerType,r),s.ref=n.innerType,t.default=JSON.parse(JSON.stringify(n.defaultValue));break;case"prefault":this.process(n.innerType,r),s.ref=n.innerType,"input"===this.io&&(t._prefault=JSON.parse(JSON.stringify(n.defaultValue)));break;case"catch":{let e;this.process(n.innerType,r),s.ref=n.innerType;try{e=n.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}t.default=e;break}case"nan":if("throw"===this.unrepresentable)throw Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let r=t,n=e._zod.pattern;if(!n)throw Error("Pattern not found in template literal");r.type="string",r.pattern=n.source;break}case"pipe":{let e="input"===this.io?"transform"===n.in._zod.def.type?n.out:n.in:n.out;this.process(e,r),s.ref=e;break}case"readonly":this.process(n.innerType,r),s.ref=n.innerType,t.readOnly=!0;break;case"lazy":{let t=e._zod.innerType;this.process(t,r),s.ref=t;break}case"custom":if("throw"===this.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema");break;case"function":if("throw"===this.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")}}}let l=this.metadataRegistry.get(e);return l&&Object.assign(s.schema,l),"input"===this.io&&sI(e)&&(delete s.schema.examples,delete s.schema.default),"input"===this.io&&s.schema._prefault&&((r=s.schema).default??(r.default=s.schema._prefault)),delete s.schema._prefault,this.seen.get(e).schema}emit(e,t){let r={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},n=this.seen.get(e);if(!n)throw Error("Unprocessed schema. This is a bug in Zod.");let i=e=>{let t="draft-2020-12"===this.target?"$defs":"definitions";if(r.external){let n=r.external.registry.get(e[0])?.id,i=r.external.uri??(e=>e);if(n)return{ref:i(n)};let a=e[1].defId??e[1].schema.id??"schema"+this.counter++;return e[1].defId=a,{defId:a,ref:`${i("__shared")}#/${t}/${a}`}}if(e[1]===n)return{ref:"#"};let i=`#/${t}/`,a=e[1].schema.id??"__schema"+this.counter++;return{defId:a,ref:i+a}},a=e=>{if(e[1].schema.$ref)return;let t=e[1],{ref:r,defId:n}=i(e);t.def={...t.schema},n&&(t.defId=n);let a=t.schema;for(let i in a)delete a[i];a.$ref=r};if("throw"===r.cycles)for(let c of this.seen.entries()){let e=c[1];if(e.cycle)throw Error(`Cycle detected: #/${e.cycle?.join("/")}/<root>\n\nSet the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let c of this.seen.entries()){let t=c[1];if(e!==c[0]){if(r.external){let t=r.external.registry.get(c[0])?.id;if(e!==c[0]&&t){a(c);continue}}(this.metadataRegistry.get(c[0])?.id||t.cycle||t.count>1&&"ref"===r.reused)&&a(c)}else a(c)}let s=(e,t)=>{let r=this.seen.get(e),n=r.def??r.schema,i={...n};if(null===r.ref)return;let a=r.ref;if(r.ref=null,a){s(a,t);let e=this.seen.get(a).schema;!e.$ref||"draft-7"!==t.target&&"draft-4"!==t.target&&"openapi-3.0"!==t.target?(Object.assign(n,e),Object.assign(n,i)):(n.allOf=n.allOf??[],n.allOf.push(e))}r.isParent||this.override({zodSchema:e,jsonSchema:n,path:r.path??[]})};for(let c of[...this.seen.entries()].reverse())s(c[0],{target:this.target});let o={};if("draft-2020-12"===this.target?o.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?o.$schema="http://json-schema.org/draft-07/schema#":"draft-4"===this.target?o.$schema="http://json-schema.org/draft-04/schema#":"openapi-3.0"===this.target||console.warn(`Invalid target: ${this.target}`),r.external?.uri){let t=r.external.registry.get(e)?.id;if(!t)throw Error("Schema is missing an `id` property");o.$id=r.external.uri(t)}Object.assign(o,n.def);let l=r.external?.defs??{};for(let c of this.seen.entries()){let e=c[1];e.def&&e.defId&&(l[e.defId]=e.def)}r.external||Object.keys(l).length>0&&("draft-2020-12"===this.target?o.$defs=l:o.definitions=l);try{return JSON.parse(JSON.stringify(o))}catch(Lte){throw Error("Error converting schema to JSON.")}}}function aI(e,t){if(e instanceof QA){let r=new iI(t),n={};for(let t of e._idmap.entries()){let[e,n]=t;r.process(n)}let i={},a={registry:e,uri:t?.uri,defs:n};for(let s of e._idmap.entries()){let[e,n]=s;i[e]=r.emit(n,{...t,external:a})}if(Object.keys(n).length>0){let e="draft-2020-12"===r.target?"$defs":"definitions";i.__shared={[e]:n}}return{schemas:i}}let r=new iI(t);return r.process(e),r.emit(e,t)}function sI(e,t){let r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);let n=e._zod.def;switch(n.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":case"function":return!1;case"array":return sI(n.element,r);case"object":for(let e in n.shape)if(sI(n.shape[e],r))return!0;return!1;case"union":for(let e of n.options)if(sI(e,r))return!0;return!1;case"intersection":return sI(n.left,r)||sI(n.right,r);case"tuple":for(let e of n.items)if(sI(e,r))return!0;return!(!n.rest||!sI(n.rest,r));case"record":case"map":return sI(n.keyType,r)||sI(n.valueType,r);case"set":return sI(n.valueType,r);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return sI(n.innerType,r);case"lazy":return sI(n.getter(),r);case"transform":return!0;case"pipe":return sI(n.in,r)||sI(n.out,r)}throw Error(`Unknown schema type: ${n.type}`)}var oI={};function lI(e){if("object"!=typeof e||null===e)return!1;if(!("_zod"in e))return!1;let t=e._zod;return"object"==typeof t&&null!==t&&"def"in t}function cI(e){if("object"!=typeof e||null===e)return!1;if(!("_def"in e)||"_zod"in e)return!1;let t=e._def;return"object"==typeof t&&null!=t&&"typeName"in t}function uI(e){return!!function(e){return!(!e||"object"!=typeof e||Array.isArray(e)||!lI(e)&&!cI(e))}(e)&&(cI(e)?"ZodString"===e._def.typeName:!!lI(e)&&"string"===e._zod.def.type)}function dI(e){return!!lI(e)&&("object"==typeof e&&null!==e&&"_zod"in e&&"object"==typeof e._zod&&null!==e._zod&&"def"in e._zod&&"object"==typeof e._zod.def&&null!==e._zod.def&&"type"in e._zod.def&&"object"===e._zod.def.type)}function hI(e){return!!lI(e)&&("object"==typeof e&&null!==e&&"_zod"in e&&"object"==typeof e._zod&&null!==e._zod&&"def"in e._zod&&"object"==typeof e._zod.def&&null!==e._zod.def&&"type"in e._zod.def&&"array"===e._zod.def.type)}function pI(e,t=!1){if(cI(e))return e.strict();if(dI(e)){let r=e._zod.def.shape;if(t)for(let[a,s]of Object.entries(e._zod.def.shape)){if(dI(s)){let e=pI(s,t);r[a]=e}else if(hI(s)){let e=s._zod.def.element;dI(e)&&(e=pI(e,t)),r[a]=z_(s,{...s._zod.def,element:e})}else r[a]=s;let e=tT.get(s);e&&tT.add(r[a],e)}let n=z_(e,{...e._zod.def,shape:r,catchall:KT(hk)}),i=tT.get(e);return i&&tT.add(n,i),n}throw Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function fI(e,t,r){let n=r.get(e);if(void 0!==n)return n;if(cI(e))return function(e){return cI(e)&&"typeName"in e._def&&"ZodEffects"===e._def.typeName}(e)?fI(e._def.schema,t,r):e;if(lI(e)){let n=e;if(function(e){return lI(e)&&"pipe"===e._zod.def.type}(e)&&(n=fI(e._zod.def.in,t,r)),t)if(dI(n)){let e=n._zod.def.shape;for(let[i,a]of Object.entries(n._zod.def.shape))e[i]=fI(a,t,r);n=z_(n,{...n._zod.def,shape:e})}else if(hI(n)){let e=fI(n._zod.def.element,t,r);n=z_(n,{...n._zod.def,element:e})}let i=tT.get(e);return i&&tT.add(n,i),r.set(e,n),n}throw Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function mI(e){return e.replace(/[^a-zA-Z-_0-9]/g,"_")}var gI=["*","_","`"];function vI(e,t,r){let{firstNode:n,lastNode:i,nodeColors:a,withStyles:s=!0,curveStyle:o="linear",wrapLabelNWords:l=9}=r??{},c=s?`%%{init: {'flowchart': {'curve': '${o}'}}}%%\ngraph TD;\n`:"graph TD;\n";if(s){let t={default:"{0}({1})"};void 0!==n&&(t[n]="{0}([{1}]):::first"),void 0!==i&&(t[i]="{0}([{1}]):::last");for(let[r,n]of Object.entries(e)){let e=n.name.split(":").pop()??"",i=gI.some(t=>e.startsWith(t)&&e.endsWith(t))?`<p>${e}</p>`:e;Object.keys(n.metadata??{}).length&&(i+=`<hr/><small><em>${Object.entries(n.metadata??{}).map(([e,t])=>`${e} = ${t}`).join("\n")}</em></small>`);let a=(t[r]??t.default).replace("{0}",mI(r)).replace("{1}",i);c+=`\t${a}\n`}}let u={};for(let p of t){let e=p.source.split(":"),t=p.target.split(":"),r=e.filter((e,r)=>e===t[r]).join(":");u[r]||(u[r]=[]),u[r].push(p)}let d=new Set;function h(e,t){let r=1===e.length&&e[0].source===e[0].target;if(t&&!r){let e=t.split(":").pop();if(d.has(e))throw Error(`Found duplicate subgraph '${e}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);d.add(e),c+=`\tsubgraph ${e}\n`}for(let n of e){let{source:e,target:t,data:r,conditional:i}=n,a="";if(void 0!==r){let e=r,t=e.split(" ");t.length>l&&(e=Array.from({length:Math.ceil(t.length/l)},(e,r)=>t.slice(r*l,(r+1)*l).join(" ")).join("&nbsp;<br>&nbsp;")),a=i?` -. &nbsp;${e}&nbsp; .-> `:` -- &nbsp;${e}&nbsp; --\x3e `}else a=i?" -.-> ":" --\x3e ";c+=`\t${mI(e)}${a}${mI(t)};\n`}for(let n in u)n.startsWith(`${t}:`)&&n!==t&&h(u[n],n);t&&!r&&(c+="\tend\n")}h(u[""]??[],"");for(let p in u)p.includes(":")||""===p||h(u[p],p);return s&&(c+=function(e){let t="";for(let[r,n]of Object.entries(e))t+=`\tclassDef ${r} ${n};\n`;return t}(a??{})),c}var yI=Symbol("Let zodToJsonSchema decide on which parser to use"),bI={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},_I=e=>{let t=(e=>({...bI,...e}))(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}},wI=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function xI(e){if("openAi"!==e.target)return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?wI(t,e.currentPath):t.join("/")}}function EI(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function kI(e,t,r,n,i){e[t]=r,EI(e,t,n,i)}var SI,AI,TI={};Fs(TI,{void:()=>TC,util:()=>SI,unknown:()=>SC,union:()=>CC,undefined:()=>xC,tuple:()=>RC,transformer:()=>GC,symbol:()=>wC,string:()=>mC,strictObject:()=>MC,setErrorMap:()=>LI,set:()=>DC,record:()=>LC,quotelessJson:()=>CI,promise:()=>HC,preprocess:()=>WC,pipeline:()=>ZC,ostring:()=>KC,optional:()=>qC,onumber:()=>YC,oboolean:()=>JC,objectUtil:()=>AI,object:()=>IC,number:()=>gC,nullable:()=>VC,null:()=>EC,never:()=>AC,nativeEnum:()=>FC,nan:()=>vC,map:()=>PC,makeIssue:()=>DI,literal:()=>BC,lazy:()=>zC,late:()=>pC,isValid:()=>WI,isDirty:()=>VI,isAsync:()=>ZI,isAborted:()=>qI,intersection:()=>OC,instanceof:()=>fC,getParsedType:()=>II,getErrorMap:()=>PI,function:()=>$C,enum:()=>UC,effect:()=>GC,discriminatedUnion:()=>jC,defaultErrorMap:()=>OI,datetimeRegex:()=>yM,date:()=>_C,custom:()=>dC,coerce:()=>XC,boolean:()=>bC,bigint:()=>yC,array:()=>NC,any:()=>kC,addIssueToContext:()=>zI,ZodVoid:()=>RM,ZodUnknown:()=>jM,ZodUnion:()=>$M,ZodUndefined:()=>IM,ZodType:()=>XI,ZodTuple:()=>HM,ZodTransformer:()=>eC,ZodSymbol:()=>NM,ZodString:()=>xM,ZodSet:()=>VM,ZodSchema:()=>XI,ZodRecord:()=>GM,ZodReadonly:()=>cC,ZodPromise:()=>QM,ZodPipeline:()=>lC,ZodParsedType:()=>NI,ZodOptional:()=>tC,ZodObject:()=>DM,ZodNumber:()=>kM,ZodNullable:()=>rC,ZodNull:()=>MM,ZodNever:()=>OM,ZodNativeEnum:()=>XM,ZodNaN:()=>aC,ZodMap:()=>qM,ZodLiteral:()=>KM,ZodLazy:()=>ZM,ZodIssueCode:()=>MI,ZodIntersection:()=>FM,ZodFunction:()=>WM,ZodFirstPartyTypeKind:()=>hC,ZodError:()=>jI,ZodEnum:()=>JM,ZodEffects:()=>eC,ZodDiscriminatedUnion:()=>BM,ZodDefault:()=>nC,ZodDate:()=>TM,ZodCatch:()=>iC,ZodBranded:()=>oC,ZodBoolean:()=>AM,ZodBigInt:()=>SM,ZodArray:()=>LM,ZodAny:()=>CM,Schema:()=>XI,ParseStatus:()=>BI,OK:()=>GI,NEVER:()=>QC,INVALID:()=>FI,EMPTY_PATH:()=>$I,DIRTY:()=>HI,BRAND:()=>sC}),function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(SI||(SI={})),(AI||(AI={})).mergeShapes=(e,t)=>({...e,...t});var NI=SI.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),II=e=>{switch(typeof e){case"undefined":return NI.undefined;case"string":return NI.string;case"number":return Number.isNaN(e)?NI.nan:NI.number;case"boolean":return NI.boolean;case"function":return NI.function;case"bigint":return NI.bigint;case"symbol":return NI.symbol;case"object":return Array.isArray(e)?NI.array:null===e?NI.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?NI.promise:typeof Map<"u"&&e instanceof Map?NI.map:typeof Set<"u"&&e instanceof Set?NI.set:typeof Date<"u"&&e instanceof Date?NI.date:NI.object;default:return NI.unknown}},MI=SI.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),CI=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class jI extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n!==i.path.length-1?e[r]=e[r]||{_errors:[]}:(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))),e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof jI))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,SI.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)if(n.path.length>0){let r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}jI.create=e=>new jI(e);var OI=(e,t)=>{let r;switch(e.code){case MI.invalid_type:r=e.received===NI.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case MI.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,SI.jsonStringifyReplacer)}`;break;case MI.unrecognized_keys:r=`Unrecognized key(s) in object: ${SI.joinValues(e.keys,", ")}`;break;case MI.invalid_union:r="Invalid input";break;case MI.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${SI.joinValues(e.options)}`;break;case MI.invalid_enum_value:r=`Invalid enum value. Expected ${SI.joinValues(e.options)}, received '${e.received}'`;break;case MI.invalid_arguments:r="Invalid function arguments";break;case MI.invalid_return_type:r="Invalid function return type";break;case MI.invalid_date:r="Invalid date";break;case MI.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:SI.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case MI.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case MI.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case MI.custom:r="Invalid input";break;case MI.invalid_intersection_types:r="Intersection results could not be merged";break;case MI.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case MI.not_finite:r="Number must be finite";break;default:r=t.defaultError,SI.assertNever(e)}return{message:r}},RI=OI;function LI(e){RI=e}function PI(){return RI}var DI=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],s={...i,path:a};if(void 0!==i.message)return{...i,path:a,message:i.message};let o="",l=n.filter(e=>!!e).slice().reverse();for(let c of l)o=c(s,{data:t,defaultError:o}).message;return{...i,path:a,message:o}},$I=[];function zI(e,t){let r=PI(),n=DI({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===OI?void 0:OI].filter(e=>!!e)});e.common.issues.push(n)}class BI{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return FI;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let n of t){let e=await n.key,t=await n.value;r.push({key:e,value:t})}return BI.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status)return FI;if("aborted"===i.status)return FI;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(typeof i.value<"u"||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}var UI,FI=Object.freeze({status:"aborted"}),HI=e=>({status:"dirty",value:e}),GI=e=>({status:"valid",value:e}),qI=e=>"aborted"===e.status,VI=e=>"dirty"===e.status,WI=e=>"valid"===e.status,ZI=e=>typeof Promise<"u"&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(UI||(UI={}));class KI{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}var YI=(e,t)=>{if(WI(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new jI(e.common.issues);return this._error=t,this._error}}};function JI(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:a}=e;return"invalid_enum_value"===t.code?{message:a??i.defaultError}:typeof i.data>"u"?{message:a??n??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:a??r??i.defaultError}},description:i}}class XI{get description(){return this._def.description}_getType(e){return II(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:II(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new BI,ctx:{common:e.parent.common,data:e.data,parsedType:II(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(ZI(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:II(e)},n=this._parseSync({data:e,path:r.path,parent:r});return YI(r,n)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:II(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return WI(r)?{value:r.value}:{issues:t.common.issues}}catch(ere){ere?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>WI(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:II(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(ZI(n)?n:Promise.resolve(n));return YI(r,i)}refine(e,t){let r=e=>"string"==typeof t||typeof t>"u"?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),a=()=>n.addIssue({code:MI.custom,...r(t)});return typeof Promise<"u"&&i instanceof Promise?i.then(e=>!!e||(a(),!1)):!!i||(a(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new eC({schema:this,typeName:hC.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return tC.create(this,this._def)}nullable(){return rC.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return LM.create(this)}promise(){return QM.create(this,this._def)}or(e){return $M.create([this,e],this._def)}and(e){return FM.create(this,e,this._def)}transform(e){return new eC({...JI(this._def),schema:this,typeName:hC.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t="function"==typeof e?e:()=>e;return new nC({...JI(this._def),innerType:this,defaultValue:t,typeName:hC.ZodDefault})}brand(){return new oC({typeName:hC.ZodBranded,type:this,...JI(this._def)})}catch(e){let t="function"==typeof e?e:()=>e;return new iC({...JI(this._def),innerType:this,catchValue:t,typeName:hC.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return lC.create(this,e)}readonly(){return cC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var QI,eM=/^c[^\s-]{8,}$/i,tM=/^[0-9a-z]+$/,rM=/^[0-9A-HJKMNP-TV-Z]{26}$/i,nM=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,iM=/^[a-z0-9_-]{21}$/i,aM=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,sM=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,oM=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,lM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,uM=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,dM=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,hM=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pM=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,fM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",mM=new RegExp(`^${fM}$`);function gM(e){let t="[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function vM(e){return new RegExp(`^${gM(e)}$`)}function yM(e){let t=`${fM}T${gM(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function bM(e,t){return!("v4"!==t&&t||!lM.test(e))||!("v6"!==t&&t||!uM.test(e))}function _M(e,t){if(!aM.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return"object"==typeof i&&null!==i&&((!("typ"in i)||"JWT"===i?.typ)&&(!!i.alg&&(!t||i.alg===t)))}catch{return!1}}function wM(e,t){return!("v4"!==t&&t||!cM.test(e))||!("v6"!==t&&t||!dM.test(e))}class xM extends XI{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==NI.string){let t=this._getOrReturnCtx(e);return zI(t,{code:MI.invalid_type,expected:NI.string,received:t.parsedType}),FI}let t,r=new BI;for(let n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if("max"===n.kind)e.data.length>n.value&&(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if("length"===n.kind){let i=e.data.length>n.value,a=e.data.length<n.value;(i||a)&&(t=this._getOrReturnCtx(e,t),i?zI(t,{code:MI.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):a&&zI(t,{code:MI.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),r.dirty())}else if("email"===n.kind)oM.test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"email",code:MI.invalid_string,message:n.message}),r.dirty());else if("emoji"===n.kind)QI||(QI=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),QI.test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"emoji",code:MI.invalid_string,message:n.message}),r.dirty());else if("uuid"===n.kind)nM.test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"uuid",code:MI.invalid_string,message:n.message}),r.dirty());else if("nanoid"===n.kind)iM.test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"nanoid",code:MI.invalid_string,message:n.message}),r.dirty());else if("cuid"===n.kind)eM.test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"cuid",code:MI.invalid_string,message:n.message}),r.dirty());else if("cuid2"===n.kind)tM.test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"cuid2",code:MI.invalid_string,message:n.message}),r.dirty());else if("ulid"===n.kind)rM.test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"ulid",code:MI.invalid_string,message:n.message}),r.dirty());else if("url"===n.kind)try{new URL(e.data)}catch{t=this._getOrReturnCtx(e,t),zI(t,{validation:"url",code:MI.invalid_string,message:n.message}),r.dirty()}else"regex"===n.kind?(n.regex.lastIndex=0,n.regex.test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"regex",code:MI.invalid_string,message:n.message}),r.dirty())):"trim"===n.kind?e.data=e.data.trim():"includes"===n.kind?e.data.includes(n.value,n.position)||(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),r.dirty()):"toLowerCase"===n.kind?e.data=e.data.toLowerCase():"toUpperCase"===n.kind?e.data=e.data.toUpperCase():"startsWith"===n.kind?e.data.startsWith(n.value)||(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.invalid_string,validation:{startsWith:n.value},message:n.message}),r.dirty()):"endsWith"===n.kind?e.data.endsWith(n.value)||(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.invalid_string,validation:{endsWith:n.value},message:n.message}),r.dirty()):"datetime"===n.kind?yM(n).test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.invalid_string,validation:"datetime",message:n.message}),r.dirty()):"date"===n.kind?mM.test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.invalid_string,validation:"date",message:n.message}),r.dirty()):"time"===n.kind?vM(n).test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.invalid_string,validation:"time",message:n.message}),r.dirty()):"duration"===n.kind?sM.test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"duration",code:MI.invalid_string,message:n.message}),r.dirty()):"ip"===n.kind?bM(e.data,n.version)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"ip",code:MI.invalid_string,message:n.message}),r.dirty()):"jwt"===n.kind?_M(e.data,n.alg)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"jwt",code:MI.invalid_string,message:n.message}),r.dirty()):"cidr"===n.kind?wM(e.data,n.version)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"cidr",code:MI.invalid_string,message:n.message}),r.dirty()):"base64"===n.kind?hM.test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"base64",code:MI.invalid_string,message:n.message}),r.dirty()):"base64url"===n.kind?pM.test(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{validation:"base64url",code:MI.invalid_string,message:n.message}),r.dirty()):SI.assertNever(n);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:MI.invalid_string,...UI.errToObj(r)})}_addCheck(e){return new xM({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...UI.errToObj(e)})}url(e){return this._addCheck({kind:"url",...UI.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...UI.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...UI.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...UI.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...UI.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...UI.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...UI.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...UI.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...UI.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...UI.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...UI.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...UI.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...UI.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...UI.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...UI.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...UI.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...UI.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...UI.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...UI.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...UI.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...UI.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...UI.errToObj(t)})}nonempty(e){return this.min(1,UI.errToObj(e))}trim(){return new xM({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new xM({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new xM({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function EM(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}xM.create=e=>new xM({checks:[],typeName:hC.ZodString,coerce:e?.coerce??!1,...JI(e)});class kM extends XI{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==NI.number){let t=this._getOrReturnCtx(e);return zI(t,{code:MI.invalid_type,expected:NI.number,received:t.parsedType}),FI}let t,r=new BI;for(let n of this._def.checks)"int"===n.kind?SI.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==EM(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.not_finite,message:n.message}),r.dirty()):SI.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,UI.toString(t))}gt(e,t){return this.setLimit("min",e,!1,UI.toString(t))}lte(e,t){return this.setLimit("max",e,!0,UI.toString(t))}lt(e,t){return this.setLimit("max",e,!1,UI.toString(t))}setLimit(e,t,r,n){return new kM({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:UI.toString(n)}]})}_addCheck(e){return new kM({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:UI.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:UI.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:UI.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:UI.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:UI.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:UI.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:UI.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:UI.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:UI.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&SI.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}kM.create=e=>new kM({checks:[],typeName:hC.ZodNumber,coerce:e?.coerce||!1,...JI(e)});class SM extends XI{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==NI.bigint)return this._getInvalidInput(e);let t,r=new BI;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):SI.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return zI(t,{code:MI.invalid_type,expected:NI.bigint,received:t.parsedType}),FI}gte(e,t){return this.setLimit("min",e,!0,UI.toString(t))}gt(e,t){return this.setLimit("min",e,!1,UI.toString(t))}lte(e,t){return this.setLimit("max",e,!0,UI.toString(t))}lt(e,t){return this.setLimit("max",e,!1,UI.toString(t))}setLimit(e,t,r,n){return new SM({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:UI.toString(n)}]})}_addCheck(e){return new SM({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:UI.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:UI.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:UI.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:UI.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:UI.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}SM.create=e=>new SM({checks:[],typeName:hC.ZodBigInt,coerce:e?.coerce??!1,...JI(e)});class AM extends XI{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==NI.boolean){let t=this._getOrReturnCtx(e);return zI(t,{code:MI.invalid_type,expected:NI.boolean,received:t.parsedType}),FI}return GI(e.data)}}AM.create=e=>new AM({typeName:hC.ZodBoolean,coerce:e?.coerce||!1,...JI(e)});class TM extends XI{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==NI.date){let t=this._getOrReturnCtx(e);return zI(t,{code:MI.invalid_type,expected:NI.date,received:t.parsedType}),FI}if(Number.isNaN(e.data.getTime())){return zI(this._getOrReturnCtx(e),{code:MI.invalid_date}),FI}let t,r=new BI;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(t=this._getOrReturnCtx(e,t),zI(t,{code:MI.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):SI.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new TM({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:UI.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:UI.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}TM.create=e=>new TM({checks:[],coerce:e?.coerce||!1,typeName:hC.ZodDate,...JI(e)});class NM extends XI{_parse(e){if(this._getType(e)!==NI.symbol){let t=this._getOrReturnCtx(e);return zI(t,{code:MI.invalid_type,expected:NI.symbol,received:t.parsedType}),FI}return GI(e.data)}}NM.create=e=>new NM({typeName:hC.ZodSymbol,...JI(e)});class IM extends XI{_parse(e){if(this._getType(e)!==NI.undefined){let t=this._getOrReturnCtx(e);return zI(t,{code:MI.invalid_type,expected:NI.undefined,received:t.parsedType}),FI}return GI(e.data)}}IM.create=e=>new IM({typeName:hC.ZodUndefined,...JI(e)});class MM extends XI{_parse(e){if(this._getType(e)!==NI.null){let t=this._getOrReturnCtx(e);return zI(t,{code:MI.invalid_type,expected:NI.null,received:t.parsedType}),FI}return GI(e.data)}}MM.create=e=>new MM({typeName:hC.ZodNull,...JI(e)});class CM extends XI{constructor(){super(...arguments),this._any=!0}_parse(e){return GI(e.data)}}CM.create=e=>new CM({typeName:hC.ZodAny,...JI(e)});class jM extends XI{constructor(){super(...arguments),this._unknown=!0}_parse(e){return GI(e.data)}}jM.create=e=>new jM({typeName:hC.ZodUnknown,...JI(e)});class OM extends XI{_parse(e){let t=this._getOrReturnCtx(e);return zI(t,{code:MI.invalid_type,expected:NI.never,received:t.parsedType}),FI}}OM.create=e=>new OM({typeName:hC.ZodNever,...JI(e)});class RM extends XI{_parse(e){if(this._getType(e)!==NI.undefined){let t=this._getOrReturnCtx(e);return zI(t,{code:MI.invalid_type,expected:NI.void,received:t.parsedType}),FI}return GI(e.data)}}RM.create=e=>new RM({typeName:hC.ZodVoid,...JI(e)});class LM extends XI{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==NI.array)return zI(t,{code:MI.invalid_type,expected:NI.array,received:t.parsedType}),FI;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(zI(t,{code:e?MI.too_big:MI.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(zI(t,{code:MI.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(zI(t,{code:MI.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new KI(t,e,t.path,r)))).then(e=>BI.mergeArray(r,e));let i=[...t.data].map((e,r)=>n.type._parseSync(new KI(t,e,t.path,r)));return BI.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new LM({...this._def,minLength:{value:e,message:UI.toString(t)}})}max(e,t){return new LM({...this._def,maxLength:{value:e,message:UI.toString(t)}})}length(e,t){return new LM({...this._def,exactLength:{value:e,message:UI.toString(t)}})}nonempty(e){return this.min(1,e)}}function PM(e){if(e instanceof DM){let t={};for(let r in e.shape){let n=e.shape[r];t[r]=tC.create(PM(n))}return new DM({...e._def,shape:()=>t})}return e instanceof LM?new LM({...e._def,type:PM(e.element)}):e instanceof tC?tC.create(PM(e.unwrap())):e instanceof rC?rC.create(PM(e.unwrap())):e instanceof HM?HM.create(e.items.map(e=>PM(e))):e}LM.create=(e,t)=>new LM({type:e,minLength:null,maxLength:null,exactLength:null,typeName:hC.ZodArray,...JI(t)});class DM extends XI{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=SI.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==NI.object){let t=this._getOrReturnCtx(e);return zI(t,{code:MI.invalid_type,expected:NI.object,received:t.parsedType}),FI}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof OM&&"strip"===this._def.unknownKeys))for(let o in r.data)i.includes(o)||a.push(o);let s=[];for(let o of i){let e=n[o],t=r.data[o];s.push({key:{status:"valid",value:o},value:e._parse(new KI(r,t,r.path,o)),alwaysSet:o in r.data})}if(this._def.catchall instanceof OM){let e=this._def.unknownKeys;if("passthrough"===e)for(let t of a)s.push({key:{status:"valid",value:t},value:{status:"valid",value:r.data[t]}});else if("strict"===e)a.length>0&&(zI(r,{code:MI.unrecognized_keys,keys:a}),t.dirty());else if("strip"!==e)throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of a){let n=r.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new KI(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of s){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>BI.mergeObjectSync(t,e)):BI.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return UI.errToObj,new DM({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:UI.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new DM({...this._def,unknownKeys:"strip"})}passthrough(){return new DM({...this._def,unknownKeys:"passthrough"})}extend(e){return new DM({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new DM({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:hC.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new DM({...this._def,catchall:e})}pick(e){let t={};for(let r of SI.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new DM({...this._def,shape:()=>t})}omit(e){let t={};for(let r of SI.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new DM({...this._def,shape:()=>t})}deepPartial(){return PM(this)}partial(e){let t={};for(let r of SI.objectKeys(this.shape)){let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new DM({...this._def,shape:()=>t})}required(e){let t={};for(let r of SI.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof tC;)e=e._def.innerType;t[r]=e}return new DM({...this._def,shape:()=>t})}keyof(){return YM(SI.objectKeys(this.shape))}}DM.create=(e,t)=>new DM({shape:()=>e,unknownKeys:"strip",catchall:OM.create(),typeName:hC.ZodObject,...JI(t)}),DM.strictCreate=(e,t)=>new DM({shape:()=>e,unknownKeys:"strict",catchall:OM.create(),typeName:hC.ZodObject,...JI(t)}),DM.lazycreate=(e,t)=>new DM({shape:e,unknownKeys:"strip",catchall:OM.create(),typeName:hC.ZodObject,...JI(t)});class $M extends XI{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;let r=e.map(e=>new jI(e.ctx.common.issues));return zI(t,{code:MI.invalid_union,unionErrors:r}),FI});{let e,n=[];for(let a of r){let r={...t,common:{...t.common,issues:[]},parent:null},i=a._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new jI(e));return zI(t,{code:MI.invalid_union,unionErrors:i}),FI}}get options(){return this._def.options}}$M.create=(e,t)=>new $M({options:e,typeName:hC.ZodUnion,...JI(t)});var zM=e=>e instanceof ZM?zM(e.schema):e instanceof eC?zM(e.innerType()):e instanceof KM?[e.value]:e instanceof JM?e.options:e instanceof XM?SI.objectValues(e.enum):e instanceof nC?zM(e._def.innerType):e instanceof IM?[void 0]:e instanceof MM?[null]:e instanceof tC?[void 0,...zM(e.unwrap())]:e instanceof rC?[null,...zM(e.unwrap())]:e instanceof oC||e instanceof cC?zM(e.unwrap()):e instanceof iC?zM(e._def.innerType):[];class BM extends XI{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==NI.object)return zI(t,{code:MI.invalid_type,expected:NI.object,received:t.parsedType}),FI;let r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(zI(t,{code:MI.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),FI)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let i of t){let t=zM(i.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let r of t){if(n.has(r))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);n.set(r,i)}}return new BM({typeName:hC.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...JI(r)})}}function UM(e,t){let r=II(e),n=II(t);if(e===t)return{valid:!0,data:e};if(r===NI.object&&n===NI.object){let r=SI.objectKeys(t),n=SI.objectKeys(e).filter(e=>-1!==r.indexOf(e)),i={...e,...t};for(let a of n){let r=UM(e[a],t[a]);if(!r.valid)return{valid:!1};i[a]=r.data}return{valid:!0,data:i}}if(r===NI.array&&n===NI.array){if(e.length!==t.length)return{valid:!1};let r=[];for(let n=0;n<e.length;n++){let i=UM(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===NI.date&&n===NI.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class FM extends XI{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(qI(e)||qI(n))return FI;let i=UM(e.value,n.value);return i.valid?((VI(e)||VI(n))&&t.dirty(),{status:t.value,value:i.data}):(zI(r,{code:MI.invalid_intersection_types}),FI)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}FM.create=(e,t,r)=>new FM({left:e,right:t,typeName:hC.ZodIntersection,...JI(r)});class HM extends XI{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==NI.array)return zI(r,{code:MI.invalid_type,expected:NI.array,received:r.parsedType}),FI;if(r.data.length<this._def.items.length)return zI(r,{code:MI.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),FI;!this._def.rest&&r.data.length>this._def.items.length&&(zI(r,{code:MI.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new KI(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>BI.mergeArray(t,e)):BI.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new HM({...this._def,rest:e})}}HM.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new HM({items:e,typeName:hC.ZodTuple,rest:null,...JI(t)})};class GM extends XI{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==NI.object)return zI(r,{code:MI.invalid_type,expected:NI.object,received:r.parsedType}),FI;let n=[],i=this._def.keyType,a=this._def.valueType;for(let s in r.data)n.push({key:i._parse(new KI(r,s,r.path,s)),value:a._parse(new KI(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?BI.mergeObjectAsync(t,n):BI.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new GM(t instanceof XI?{keyType:e,valueType:t,typeName:hC.ZodRecord,...JI(r)}:{keyType:xM.create(),valueType:e,typeName:hC.ZodRecord,...JI(t)})}}class qM extends XI{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==NI.map)return zI(r,{code:MI.invalid_type,expected:NI.map,received:r.parsedType}),FI;let n=this._def.keyType,i=this._def.valueType,a=[...r.data.entries()].map(([e,t],a)=>({key:n._parse(new KI(r,e,r.path,[a,"key"])),value:i._parse(new KI(r,t,r.path,[a,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of a){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return FI;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of a){let{key:n,value:i}=r;if("aborted"===n.status||"aborted"===i.status)return FI;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}qM.create=(e,t,r)=>new qM({valueType:t,keyType:e,typeName:hC.ZodMap,...JI(r)});class VM extends XI{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==NI.set)return zI(r,{code:MI.invalid_type,expected:NI.set,received:r.parsedType}),FI;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(zI(r,{code:MI.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(zI(r,{code:MI.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function a(e){let r=new Set;for(let n of e){if("aborted"===n.status)return FI;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let s=[...r.data.values()].map((e,t)=>i._parse(new KI(r,e,r.path,t)));return r.common.async?Promise.all(s).then(e=>a(e)):a(s)}min(e,t){return new VM({...this._def,minSize:{value:e,message:UI.toString(t)}})}max(e,t){return new VM({...this._def,maxSize:{value:e,message:UI.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}VM.create=(e,t)=>new VM({valueType:e,minSize:null,maxSize:null,typeName:hC.ZodSet,...JI(t)});class WM extends XI{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==NI.function)return zI(t,{code:MI.invalid_type,expected:NI.function,received:t.parsedType}),FI;function r(e,r){return DI({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,PI(),OI].filter(e=>!!e),issueData:{code:MI.invalid_arguments,argumentsError:r}})}function n(e,r){return DI({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,PI(),OI].filter(e=>!!e),issueData:{code:MI.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof QM){let e=this;return GI(async function(...t){let s=new jI([]),o=await e._def.args.parseAsync(t,i).catch(e=>{throw s.addIssue(r(t,e)),s}),l=await Reflect.apply(a,this,o);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw s.addIssue(n(l,e)),s})})}{let e=this;return GI(function(...t){let s=e._def.args.safeParse(t,i);if(!s.success)throw new jI([r(t,s.error)]);let o=Reflect.apply(a,this,s.data),l=e._def.returns.safeParse(o,i);if(!l.success)throw new jI([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new WM({...this._def,args:HM.create(e).rest(jM.create())})}returns(e){return new WM({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new WM({args:e||HM.create([]).rest(jM.create()),returns:t||jM.create(),typeName:hC.ZodFunction,...JI(r)})}}class ZM extends XI{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ZM.create=(e,t)=>new ZM({getter:e,typeName:hC.ZodLazy,...JI(t)});class KM extends XI{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return zI(t,{received:t.data,code:MI.invalid_literal,expected:this._def.value}),FI}return{status:"valid",value:e.data}}get value(){return this._def.value}}function YM(e,t){return new JM({values:e,typeName:hC.ZodEnum,...JI(t)})}KM.create=(e,t)=>new KM({value:e,typeName:hC.ZodLiteral,...JI(t)});class JM extends XI{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return zI(t,{expected:SI.joinValues(r),received:t.parsedType,code:MI.invalid_type}),FI}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return zI(t,{received:t.data,code:MI.invalid_enum_value,options:r}),FI}return GI(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return JM.create(e,{...this._def,...t})}exclude(e,t=this._def){return JM.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}JM.create=YM;class XM extends XI{_parse(e){let t=SI.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==NI.string&&r.parsedType!==NI.number){let e=SI.objectValues(t);return zI(r,{expected:SI.joinValues(e),received:r.parsedType,code:MI.invalid_type}),FI}if(this._cache||(this._cache=new Set(SI.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=SI.objectValues(t);return zI(r,{received:r.data,code:MI.invalid_enum_value,options:e}),FI}return GI(e.data)}get enum(){return this._def.values}}XM.create=(e,t)=>new XM({values:e,typeName:hC.ZodNativeEnum,...JI(t)});class QM extends XI{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==NI.promise&&!1===t.common.async)return zI(t,{code:MI.invalid_type,expected:NI.promise,received:t.parsedType}),FI;let r=t.parsedType===NI.promise?t.data:Promise.resolve(t.data);return GI(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}QM.create=(e,t)=>new QM({type:e,typeName:hC.ZodPromise,...JI(t)});class eC extends XI{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===hC.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{zI(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){let e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return FI;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?FI:"dirty"===n.status||"dirty"===t.value?HI(n.value):n});{if("aborted"===t.value)return FI;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?FI:"dirty"===n.status||"dirty"===t.value?HI(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?FI:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?FI:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===n.type){if(!1===r.common.async){let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!WI(e))return FI;let a=n.transform(e.value,i);if(a instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>WI(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):FI)}SI.assertNever(n)}}eC.create=(e,t,r)=>new eC({schema:e,typeName:hC.ZodEffects,effect:t,...JI(r)}),eC.createWithPreprocess=(e,t,r)=>new eC({schema:t,effect:{type:"preprocess",transform:e},typeName:hC.ZodEffects,...JI(r)});class tC extends XI{_parse(e){return this._getType(e)===NI.undefined?GI(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tC.create=(e,t)=>new tC({innerType:e,typeName:hC.ZodOptional,...JI(t)});class rC extends XI{_parse(e){return this._getType(e)===NI.null?GI(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rC.create=(e,t)=>new rC({innerType:e,typeName:hC.ZodNullable,...JI(t)});class nC extends XI{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===NI.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}nC.create=(e,t)=>new nC({innerType:e,typeName:hC.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...JI(t)});class iC extends XI{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return ZI(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new jI(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new jI(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}iC.create=(e,t)=>new iC({innerType:e,typeName:hC.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...JI(t)});class aC extends XI{_parse(e){if(this._getType(e)!==NI.nan){let t=this._getOrReturnCtx(e);return zI(t,{code:MI.invalid_type,expected:NI.nan,received:t.parsedType}),FI}return{status:"valid",value:e.data}}}aC.create=e=>new aC({typeName:hC.ZodNaN,...JI(e)});var sC=Symbol("zod_brand");class oC extends XI{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class lC extends XI{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?FI:"dirty"===e.status?(t.dirty(),HI(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?FI:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new lC({in:e,out:t,typeName:hC.ZodPipeline})}}class cC extends XI{_parse(e){let t=this._def.innerType._parse(e),r=e=>(WI(e)&&(e.value=Object.freeze(e.value)),e);return ZI(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function uC(e,t){let r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function dC(e,t={},r){return e?CM.create().superRefine((n,i)=>{let a=e(n);if(a instanceof Promise)return a.then(e=>{if(!e){let e=uC(t,n),a=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:a})}});if(!a){let e=uC(t,n),a=e.fatal??r??!0;i.addIssue({code:"custom",...e,fatal:a})}}):CM.create()}cC.create=(e,t)=>new cC({innerType:e,typeName:hC.ZodReadonly,...JI(t)});var hC,pC={object:DM.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(hC||(hC={}));var fC=(e,t={message:`Input not instance of ${e.name}`})=>dC(t=>t instanceof e,t),mC=xM.create,gC=kM.create,vC=aC.create,yC=SM.create,bC=AM.create,_C=TM.create,wC=NM.create,xC=IM.create,EC=MM.create,kC=CM.create,SC=jM.create,AC=OM.create,TC=RM.create,NC=LM.create,IC=DM.create,MC=DM.strictCreate,CC=$M.create,jC=BM.create,OC=FM.create,RC=HM.create,LC=GM.create,PC=qM.create,DC=VM.create,$C=WM.create,zC=ZM.create,BC=KM.create,UC=JM.create,FC=XM.create,HC=QM.create,GC=eC.create,qC=tC.create,VC=rC.create,WC=eC.createWithPreprocess,ZC=lC.create,KC=()=>mC().optional(),YC=()=>gC().optional(),JC=()=>bC().optional(),XC={string:e=>xM.create({...e,coerce:!0}),number:e=>kM.create({...e,coerce:!0}),boolean:e=>AM.create({...e,coerce:!0}),bigint:e=>SM.create({...e,coerce:!0}),date:e=>TM.create({...e,coerce:!0})},QC=FI;function ej(e,t){return Tj(e.type._def,t)}function tj(e,t,r){let n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map(r=>tj(e,t,r))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return rj(e,t)}}var rj=(e,t)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(let n of e.checks)switch(n.kind){case"min":kI(r,"minimum",n.value,n.message,t);break;case"max":kI(r,"maximum",n.value,n.message,t)}return r};var nj=void 0,ij=/^[cC][^\s-]{8,}$/,aj=/^[0-9a-z]+$/,sj=/^[0-9A-HJKMNP-TV-Z]{26}$/,oj=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,lj=()=>(void 0===nj&&(nj=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),nj),cj=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,uj=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dj=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,hj=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,pj=/^[a-zA-Z0-9_-]{21}$/,fj=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function mj(e,t){let r={type:"string"};if(e.checks)for(let n of e.checks)switch(n.kind){case"min":kI(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":kI(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":yj(r,"email",n.message,t);break;case"format:idn-email":yj(r,"idn-email",n.message,t);break;case"pattern:zod":bj(r,oj,n.message,t)}break;case"url":yj(r,"uri",n.message,t);break;case"uuid":yj(r,"uuid",n.message,t);break;case"regex":bj(r,n.regex,n.message,t);break;case"cuid":bj(r,ij,n.message,t);break;case"cuid2":bj(r,aj,n.message,t);break;case"startsWith":bj(r,RegExp(`^${gj(n.value,t)}`),n.message,t);break;case"endsWith":bj(r,RegExp(`${gj(n.value,t)}$`),n.message,t);break;case"datetime":yj(r,"date-time",n.message,t);break;case"date":yj(r,"date",n.message,t);break;case"time":yj(r,"time",n.message,t);break;case"duration":yj(r,"duration",n.message,t);break;case"length":kI(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t),kI(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":bj(r,RegExp(gj(n.value,t)),n.message,t);break;case"ip":"v6"!==n.version&&yj(r,"ipv4",n.message,t),"v4"!==n.version&&yj(r,"ipv6",n.message,t);break;case"base64url":bj(r,hj,n.message,t);break;case"jwt":bj(r,fj,n.message,t);break;case"cidr":"v6"!==n.version&&bj(r,cj,n.message,t),"v4"!==n.version&&bj(r,uj,n.message,t);break;case"emoji":bj(r,lj(),n.message,t);break;case"ulid":bj(r,sj,n.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":yj(r,"binary",n.message,t);break;case"contentEncoding:base64":kI(r,"contentEncoding","base64",n.message,t);break;case"pattern:zod":bj(r,dj,n.message,t)}break;case"nanoid":bj(r,pj,n.message,t)}return r}function gj(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)vj.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}var vj=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function yj(e,t,r,n){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):kI(e,"format",t,r,n)}function bj(e,t,r,n){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:_j(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):kI(e,"pattern",_j(t,n),r,n)}function _j(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r=e.flags.includes("i"),n=e.flags.includes("m"),i=e.flags.includes("s"),a=r?e.source.toLowerCase():e.source,s="",o=!1,l=!1,c=!1;for(let u=0;u<a.length;u++)if(o)s+=a[u],o=!1;else{if(r)if(l){if(a[u].match(/[a-z]/)){c?(s+=a[u],s+=`${a[u-2]}-${a[u]}`.toUpperCase(),c=!1):"-"===a[u+1]&&a[u+2]?.match(/[a-z]/)?(s+=a[u],c=!0):s+=`${a[u]}${a[u].toUpperCase()}`;continue}}else if(a[u].match(/[a-z]/)){s+=`[${a[u]}${a[u].toUpperCase()}]`;continue}if(n){if("^"===a[u]){s+="(^|(?<=[\r\n]))";continue}if("$"===a[u]){s+="($|(?=[\r\n]))";continue}}i&&"."===a[u]?s+=l?`${a[u]}\r\n`:`[${a[u]}\r\n]`:(s+=a[u],"\\"===a[u]?o=!0:l&&"]"===a[u]?l=!1:l||"["!==a[u]||(l=!0))}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function wj(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===hC.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:Tj(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??xI(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:Tj(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===hC.ZodString&&e.keyType._def.checks?.length){let{type:n,...i}=mj(e.keyType._def,t);return{...r,propertyNames:i}}if(e.keyType?._def.typeName===hC.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===hC.ZodBranded&&e.keyType._def.type._def.typeName===hC.ZodString&&e.keyType._def.type._def.checks?.length){let{type:n,...i}=ej(e.keyType._def,t);return{...r,propertyNames:i}}return r}var xj={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};var Ej=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>Tj(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0};function kj(e,t){let r="openAi"===t.target,n={type:"object",properties:{}},i=[],a=e.shape();for(let o in a){let e=a[o];if(void 0===e||void 0===e._def)continue;let s=Sj(e);s&&r&&("ZodOptional"===e._def.typeName&&(e=e._def.innerType),e.isNullable()||(e=e.nullable()),s=!1);let l=Tj(e._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});void 0!==l&&(n.properties[o]=l,s||i.push(o))}i.length&&(n.required=i);let s=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return Tj(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==s&&(n.additionalProperties=s),n}function Sj(e){try{return e.isOptional()}catch{return!0}}var Aj=(e,t,r)=>{switch(t){case hC.ZodString:return mj(e,r);case hC.ZodNumber:return function(e,t){let r={type:"number"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"int":r.type="integer",EI(r,"type",n.message,t);break;case"min":"jsonSchema7"===t.target?n.inclusive?kI(r,"minimum",n.value,n.message,t):kI(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),kI(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?kI(r,"maximum",n.value,n.message,t):kI(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),kI(r,"maximum",n.value,n.message,t));break;case"multipleOf":kI(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case hC.ZodObject:return kj(e,r);case hC.ZodBigInt:return function(e,t){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let n of e.checks)switch(n.kind){case"min":"jsonSchema7"===t.target?n.inclusive?kI(r,"minimum",n.value,n.message,t):kI(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),kI(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?kI(r,"maximum",n.value,n.message,t):kI(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),kI(r,"maximum",n.value,n.message,t));break;case"multipleOf":kI(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case hC.ZodBoolean:return{type:"boolean"};case hC.ZodDate:return tj(e,r);case hC.ZodUndefined:return function(e){return{not:xI(e)}}(r);case hC.ZodNull:return function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}(r);case hC.ZodArray:return function(e,t){let r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==hC.ZodAny&&(r.items=Tj(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&kI(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&kI(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(kI(r,"minItems",e.exactLength.value,e.exactLength.message,t),kI(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}(e,r);case hC.ZodUnion:case hC.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return Ej(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in xj&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=xj[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":return null===t._def.value?[...e,"null"]:e;default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return Ej(e,t)}(e,r);case hC.ZodIntersection:return function(e,t){let r=[Tj(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Tj(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e),n="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(e=>{if((e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e)(e))i.push(...e.allOf),void 0===e.unevaluatedProperties&&(n=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...n}=e;t=n}else n=void 0;i.push(t)}}),i.length?{allOf:i,...n}:void 0}(e,r);case hC.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>Tj(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:Tj(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>Tj(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}(e,r);case hC.ZodRecord:return wj(e,r);case hC.ZodLiteral:return function(e,t){let r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}(e,r);case hC.ZodEnum:return function(e){return{type:"string",enum:Array.from(e.values)}}(e);case hC.ZodNativeEnum:return function(e){let t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}(e);case hC.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:xj[e.innerType._def.typeName],nullable:!0}:{type:[xj[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){let r=Tj(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}let r=Tj(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}(e,r);case hC.ZodOptional:return((e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return Tj(e.innerType._def,t);let r=Tj(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:xI(t)},r]}:xI(t)})(e,r);case hC.ZodMap:return function(e,t){return"record"===t.mapStrategy?wj(e,t):{type:"array",maxItems:125,items:{type:"array",items:[Tj(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||xI(t),Tj(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||xI(t)],minItems:2,maxItems:2}}}(e,r);case hC.ZodSet:return function(e,t){let r={type:"array",uniqueItems:!0,items:Tj(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&kI(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&kI(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}(e,r);case hC.ZodLazy:return()=>e.getter()._def;case hC.ZodPromise:return function(e,t){return Tj(e.type._def,t)}(e,r);case hC.ZodNaN:case hC.ZodNever:return function(e){return"openAi"===e.target?void 0:{not:xI({...e,currentPath:[...e.currentPath,"not"]})}}(r);case hC.ZodEffects:return function(e,t){return"input"===t.effectStrategy?Tj(e.schema._def,t):xI(t)}(e,r);case hC.ZodAny:return xI(r);case hC.ZodUnknown:return function(e){return xI(e)}(r);case hC.ZodDefault:return function(e,t){return{...Tj(e.innerType._def,t),default:e.defaultValue()}}(e,r);case hC.ZodBranded:return ej(e,r);case hC.ZodReadonly:case hC.ZodCatch:return((e,t)=>Tj(e.innerType._def,t))(e,r);case hC.ZodPipeline:return((e,t)=>{if("input"===t.pipeStrategy)return Tj(e.in._def,t);if("output"===t.pipeStrategy)return Tj(e.out._def,t);let r=Tj(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[r,Tj(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]})].filter(e=>void 0!==e)}})(e,r);case hC.ZodFunction:case hC.ZodVoid:case hC.ZodSymbol:default:return}};function Tj(e,t,r=!1){let n=t.seen.get(e);if(t.override){let i=t.override?.(e,t,n,r);if(i!==yI)return i}if(n&&!r){let e=Nj(n,t);if(void 0!==e)return e}let i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);let a=Aj(e,e.typeName,t),s="function"==typeof a?Tj(a(),t):a;if(s&&Ij(e,t,s),t.postProcess){let r=t.postProcess(s,e,t);return i.jsonSchema=s,r}return i.jsonSchema=s,s}var Nj=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:wI(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),xI(t)):"seen"===t.$refStrategy?xI(t):void 0}},Ij=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r);function Mj(e,t){let r=typeof e;if(r!==typeof t)return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;let r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(!Mj(e[n],t[n]))return!1;return!0}if("object"===r){if(!e||!t)return e===t;let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i of r)if(!Mj(e[i],t[i]))return!1;return!0}return e===t}function Cj(e){return encodeURI(function(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}(e))}var jj={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},Oj={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},Rj={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},Lj=typeof self<"u"&&self.location&&"null"!==self.location.origin?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function Pj(e,t=Object.create(null),r=Lj,n=""){if(e&&"object"==typeof e&&!Array.isArray(e)){let i=e.$id||e.id;if(i){let a=new URL(i,r.href);a.hash.length>1?t[a.href]=e:(a.hash="",""===n?r=a:Pj(e,t,r))}}else if(!0!==e&&!1!==e)return t;let i=r.href+(n?"#"+n:"");if(void 0!==t[i])throw Error(`Duplicate schema URI "${i}".`);if(t[i]=e,!0===e||!1===e)return t;if(void 0===e.__absolute_uri__&&Object.defineProperty(e,"__absolute_uri__",{enumerable:!1,value:i}),e.$ref&&void 0===e.__absolute_ref__){let t=new URL(e.$ref,r.href);t.hash=t.hash,Object.defineProperty(e,"__absolute_ref__",{enumerable:!1,value:t.href})}if(e.$recursiveRef&&void 0===e.__absolute_recursive_ref__){let t=new URL(e.$recursiveRef,r.href);t.hash=t.hash,Object.defineProperty(e,"__absolute_recursive_ref__",{enumerable:!1,value:t.href})}if(e.$anchor){t[new URL("#"+e.$anchor,r.href).href]=e}for(let a in e){if(Rj[a])continue;let i=`${n}/${Cj(a)}`,s=e[a];if(Array.isArray(s)){if(jj[a]){let e=s.length;for(let n=0;n<e;n++)Pj(s[n],t,r,`${i}/${n}`)}}else if(Oj[a])for(let e in s)Pj(s[e],t,r,`${i}/${Cj(e)}`);else Pj(s,t,r,i)}return t}var Dj=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,$j=[0,31,28,31,30,31,30,31,31,30,31,30,31],zj=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function Bj(e){return e.test.bind(e)}var Uj={date:Fj,time:Hj.bind(void 0,!1),"date-time":function(e){let t=e.split(Gj);return 2==t.length&&Fj(t[0])&&Hj(!0,t[1])},duration:e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e)),uri:function(e){return qj.test(e)&&Vj.test(e)},"uri-reference":Bj(/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i),"uri-template":Bj(/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i),url:Bj(/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu),email:e=>{if('"'===e[0])return!1;let[t,r,...n]=e.split("@");return!(!t||!r||0!==n.length||t.length>64||r.length>253)&&("."!==t[0]&&!t.endsWith(".")&&!t.includes("..")&&(!(!/^[a-z0-9.-]+$/i.test(r)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t))&&r.split(".").every(e=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(e))))},hostname:Bj(/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i),ipv4:Bj(/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/),ipv6:Bj(/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i),regex:function(e){if(Wj.test(e))return!1;try{return new RegExp(e,"u"),!0}catch(xre){return!1}},uuid:Bj(/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i),"json-pointer":Bj(/^(?:\/(?:[^~/]|~0|~1)*)*$/),"json-pointer-uri-fragment":Bj(/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i),"relative-json-pointer":Bj(/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/)};function Fj(e){let t=e.match(Dj);if(!t)return!1;let r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&i<=(2==n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:$j[n])}function Hj(e,t){let r=t.match(zj);if(!r)return!1;let n=+r[1],i=+r[2],a=+r[3],s=!!r[5];return(n<=23&&i<=59&&a<=59||23==n&&59==i&&60==a)&&(!e||s)}var Gj=/t|\s/i;var qj=/\/|:/,Vj=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;var Wj=/[^\\]\\Z/;function Zj(e,t,r="2019-09",n=Pj(t),i=!0,a=null,s="#",o="#",l=Object.create(null)){if(!0===t)return{valid:!0,errors:[]};if(!1===t)return{valid:!1,errors:[{instanceLocation:s,keyword:"false",keywordLocation:s,error:"False boolean schema."}]};let c,u=typeof e;switch(u){case"boolean":case"number":case"string":c=u;break;case"object":c=null===e?"null":Array.isArray(e)?"array":"object";break;default:throw Error(`Instances of "${u}" type are not supported.`)}let{$ref:d,$recursiveRef:h,$recursiveAnchor:p,type:f,const:m,enum:g,required:v,not:y,anyOf:b,allOf:_,oneOf:w,if:x,then:E,else:k,format:S,properties:A,patternProperties:T,additionalProperties:N,unevaluatedProperties:I,minProperties:M,maxProperties:C,propertyNames:j,dependentRequired:O,dependentSchemas:R,dependencies:L,prefixItems:P,items:D,additionalItems:$,unevaluatedItems:z,contains:B,minContains:U,maxContains:F,minItems:H,maxItems:G,uniqueItems:q,minimum:V,maximum:W,exclusiveMinimum:Z,exclusiveMaximum:K,multipleOf:Y,minLength:J,maxLength:X,pattern:Q,__absolute_ref__:ee,__absolute_recursive_ref__:te}=t,re=[];if(!0===p&&null===a&&(a=t),"#"===h){let c=null===a?n[te]:a,u=`${o}/$recursiveRef`,d=Zj(e,null===a?t:a,r,n,i,c,s,u,l);d.valid||re.push({instanceLocation:s,keyword:"$recursiveRef",keywordLocation:u,error:"A subschema had errors."},...d.errors)}if(void 0!==d){let t=n[ee||d];if(void 0===t){let e=`Unresolved $ref "${d}".`;throw ee&&ee!==d&&(e+=`  Absolute URI "${ee}".`),e+=`\nKnown schemas:\n- ${Object.keys(n).join("\n- ")}`,Error(e)}let c=`${o}/$ref`,u=Zj(e,t,r,n,i,a,s,c,l);if(u.valid||re.push({instanceLocation:s,keyword:"$ref",keywordLocation:c,error:"A subschema had errors."},...u.errors),"4"===r||"7"===r)return{valid:0===re.length,errors:re}}if(Array.isArray(f)){let t=f.length,r=!1;for(let n=0;n<t;n++)if(c===f[n]||"integer"===f[n]&&"number"===c&&e%1==0&&e==e){r=!0;break}r||re.push({instanceLocation:s,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${c}" is invalid. Expected "${f.join('", "')}".`})}else"integer"===f?("number"!==c||e%1||e!=e)&&re.push({instanceLocation:s,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${c}" is invalid. Expected "${f}".`}):void 0!==f&&c!==f&&re.push({instanceLocation:s,keyword:"type",keywordLocation:`${o}/type`,error:`Instance type "${c}" is invalid. Expected "${f}".`});if(void 0!==m&&("object"===c||"array"===c?Mj(e,m)||re.push({instanceLocation:s,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(m)}.`}):e!==m&&re.push({instanceLocation:s,keyword:"const",keywordLocation:`${o}/const`,error:`Instance does not match ${JSON.stringify(m)}.`})),void 0!==g&&("object"===c||"array"===c?g.some(t=>Mj(e,t))||re.push({instanceLocation:s,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(g)}.`}):g.some(t=>e===t)||re.push({instanceLocation:s,keyword:"enum",keywordLocation:`${o}/enum`,error:`Instance does not match any of ${JSON.stringify(g)}.`})),void 0!==y){let t=`${o}/not`;Zj(e,y,r,n,i,a,s,t).valid&&re.push({instanceLocation:s,keyword:"not",keywordLocation:t,error:'Instance matched "not" schema.'})}let ne=[];if(void 0!==b){let t=`${o}/anyOf`,c=re.length,u=!1;for(let o=0;o<b.length;o++){let c=b[o],d=Object.create(l),h=Zj(e,c,r,n,i,!0===p?a:null,s,`${t}/${o}`,d);re.push(...h.errors),u=u||h.valid,h.valid&&ne.push(d)}u?re.length=c:re.splice(c,0,{instanceLocation:s,keyword:"anyOf",keywordLocation:t,error:"Instance does not match any subschemas."})}if(void 0!==_){let t=`${o}/allOf`,c=re.length,u=!0;for(let o=0;o<_.length;o++){let c=_[o],d=Object.create(l),h=Zj(e,c,r,n,i,!0===p?a:null,s,`${t}/${o}`,d);re.push(...h.errors),u=u&&h.valid,h.valid&&ne.push(d)}u?re.length=c:re.splice(c,0,{instanceLocation:s,keyword:"allOf",keywordLocation:t,error:"Instance does not match every subschema."})}if(void 0!==w){let t=`${o}/oneOf`,c=re.length,u=w.filter((o,c)=>{let u=Object.create(l),d=Zj(e,o,r,n,i,!0===p?a:null,s,`${t}/${c}`,u);return re.push(...d.errors),d.valid&&ne.push(u),d.valid}).length;1===u?re.length=c:re.splice(c,0,{instanceLocation:s,keyword:"oneOf",keywordLocation:t,error:`Instance does not match exactly one subschema (${u} matches).`})}if("object"!==c&&"array"!==c||Object.assign(l,...ne),void 0!==x){let t=`${o}/if`;if(Zj(e,x,r,n,i,a,s,t,l).valid){if(void 0!==E){let c=Zj(e,E,r,n,i,a,s,`${o}/then`,l);c.valid||re.push({instanceLocation:s,keyword:"if",keywordLocation:t,error:'Instance does not match "then" schema.'},...c.errors)}}else if(void 0!==k){let c=Zj(e,k,r,n,i,a,s,`${o}/else`,l);c.valid||re.push({instanceLocation:s,keyword:"if",keywordLocation:t,error:'Instance does not match "else" schema.'},...c.errors)}}if("object"===c){if(void 0!==v)for(let r of v)r in e||re.push({instanceLocation:s,keyword:"required",keywordLocation:`${o}/required`,error:`Instance does not have required property "${r}".`});let t=Object.keys(e);if(void 0!==M&&t.length<M&&re.push({instanceLocation:s,keyword:"minProperties",keywordLocation:`${o}/minProperties`,error:`Instance does not have at least ${M} properties.`}),void 0!==C&&t.length>C&&re.push({instanceLocation:s,keyword:"maxProperties",keywordLocation:`${o}/maxProperties`,error:`Instance does not have at least ${C} properties.`}),void 0!==j){let t=`${o}/propertyNames`;for(let o in e){let e=`${s}/${Cj(o)}`,l=Zj(o,j,r,n,i,a,e,t);l.valid||re.push({instanceLocation:s,keyword:"propertyNames",keywordLocation:t,error:`Property name "${o}" does not match schema.`},...l.errors)}}if(void 0!==O){let t=`${o}/dependantRequired`;for(let r in O)if(r in e){let n=O[r];for(let i of n)i in e||re.push({instanceLocation:s,keyword:"dependentRequired",keywordLocation:t,error:`Instance has "${r}" but does not have "${i}".`})}}if(void 0!==R)for(let d in R){let t=`${o}/dependentSchemas`;if(d in e){let o=Zj(e,R[d],r,n,i,a,s,`${t}/${Cj(d)}`,l);o.valid||re.push({instanceLocation:s,keyword:"dependentSchemas",keywordLocation:t,error:`Instance has "${d}" but does not match dependant schema.`},...o.errors)}}if(void 0!==L){let t=`${o}/dependencies`;for(let o in L)if(o in e){let l=L[o];if(Array.isArray(l))for(let r of l)r in e||re.push({instanceLocation:s,keyword:"dependencies",keywordLocation:t,error:`Instance has "${o}" but does not have "${r}".`});else{let c=Zj(e,l,r,n,i,a,s,`${t}/${Cj(o)}`);c.valid||re.push({instanceLocation:s,keyword:"dependencies",keywordLocation:t,error:`Instance has "${o}" but does not match dependant schema.`},...c.errors)}}}let c=Object.create(null),u=!1;if(void 0!==A){let t=`${o}/properties`;for(let o in A){if(!(o in e))continue;let d=`${s}/${Cj(o)}`,h=Zj(e[o],A[o],r,n,i,a,d,`${t}/${Cj(o)}`);if(h.valid)l[o]=c[o]=!0;else if(u=i,re.push({instanceLocation:s,keyword:"properties",keywordLocation:t,error:`Property "${o}" does not match schema.`},...h.errors),u)break}}if(!u&&void 0!==T){let t=`${o}/patternProperties`;for(let o in T){let d=new RegExp(o,"u"),h=T[o];for(let p in e){if(!d.test(p))continue;let f=`${s}/${Cj(p)}`,m=Zj(e[p],h,r,n,i,a,f,`${t}/${Cj(o)}`);m.valid?l[p]=c[p]=!0:(u=i,re.push({instanceLocation:s,keyword:"patternProperties",keywordLocation:t,error:`Property "${p}" matches pattern "${o}" but does not match associated schema.`},...m.errors))}}}if(u||void 0===N){if(!u&&void 0!==I){let t=`${o}/unevaluatedProperties`;for(let o in e)if(!l[o]){let c=`${s}/${Cj(o)}`,u=Zj(e[o],I,r,n,i,a,c,t);u.valid?l[o]=!0:re.push({instanceLocation:s,keyword:"unevaluatedProperties",keywordLocation:t,error:`Property "${o}" does not match unevaluated properties schema.`},...u.errors)}}}else{let t=`${o}/additionalProperties`;for(let o in e){if(c[o])continue;let d=`${s}/${Cj(o)}`,h=Zj(e[o],N,r,n,i,a,d,t);h.valid?l[o]=!0:(u=i,re.push({instanceLocation:s,keyword:"additionalProperties",keywordLocation:t,error:`Property "${o}" does not match additional properties schema.`},...h.errors))}}}else if("array"===c){void 0!==G&&e.length>G&&re.push({instanceLocation:s,keyword:"maxItems",keywordLocation:`${o}/maxItems`,error:`Array has too many items (${e.length} > ${G}).`}),void 0!==H&&e.length<H&&re.push({instanceLocation:s,keyword:"minItems",keywordLocation:`${o}/minItems`,error:`Array has too few items (${e.length} < ${H}).`});let t=e.length,c=0,u=!1;if(void 0!==P){let d=`${o}/prefixItems`,h=Math.min(P.length,t);for(;c<h;c++){let t=Zj(e[c],P[c],r,n,i,a,`${s}/${c}`,`${d}/${c}`);if(l[c]=!0,!t.valid&&(u=i,re.push({instanceLocation:s,keyword:"prefixItems",keywordLocation:d,error:"Items did not match schema."},...t.errors),u))break}}if(void 0!==D){let d=`${o}/items`;if(Array.isArray(D)){let o=Math.min(D.length,t);for(;c<o;c++){let t=Zj(e[c],D[c],r,n,i,a,`${s}/${c}`,`${d}/${c}`);if(l[c]=!0,!t.valid&&(u=i,re.push({instanceLocation:s,keyword:"items",keywordLocation:d,error:"Items did not match schema."},...t.errors),u))break}}else for(;c<t;c++){let t=Zj(e[c],D,r,n,i,a,`${s}/${c}`,d);if(l[c]=!0,!t.valid&&(u=i,re.push({instanceLocation:s,keyword:"items",keywordLocation:d,error:"Items did not match schema."},...t.errors),u))break}if(!u&&void 0!==$){let d=`${o}/additionalItems`;for(;c<t;c++){let t=Zj(e[c],$,r,n,i,a,`${s}/${c}`,d);l[c]=!0,t.valid||(u=i,re.push({instanceLocation:s,keyword:"additionalItems",keywordLocation:d,error:"Items did not match additional items schema."},...t.errors))}}}if(void 0!==B)if(0===t&&void 0===U)re.push({instanceLocation:s,keyword:"contains",keywordLocation:`${o}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(void 0!==U&&t<U)re.push({instanceLocation:s,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array has less items (${t}) than minContains (${U}).`});else{let c=`${o}/contains`,u=re.length,d=0;for(let o=0;o<t;o++){let t=Zj(e[o],B,r,n,i,a,`${s}/${o}`,c);t.valid?(l[o]=!0,d++):re.push(...t.errors)}d>=(U||0)&&(re.length=u),void 0===U&&void 0===F&&0===d?re.splice(u,0,{instanceLocation:s,keyword:"contains",keywordLocation:c,error:"Array does not contain item matching schema."}):void 0!==U&&d<U?re.push({instanceLocation:s,keyword:"minContains",keywordLocation:`${o}/minContains`,error:`Array must contain at least ${U} items matching schema. Only ${d} items were found.`}):void 0!==F&&d>F&&re.push({instanceLocation:s,keyword:"maxContains",keywordLocation:`${o}/maxContains`,error:`Array may contain at most ${F} items matching schema. ${d} items were found.`})}if(!u&&void 0!==z){let u=`${o}/unevaluatedItems`;for(;c<t;c++){if(l[c])continue;let t=Zj(e[c],z,r,n,i,a,`${s}/${c}`,u);l[c]=!0,t.valid||re.push({instanceLocation:s,keyword:"unevaluatedItems",keywordLocation:u,error:"Items did not match unevaluated items schema."},...t.errors)}}if(q)for(let r=0;r<t;r++){let n=e[r],i="object"==typeof n&&null!==n;for(let a=0;a<t;a++){if(r===a)continue;let t=e[a];(n===t||i&&"object"==typeof t&&null!==t&&Mj(n,t))&&(re.push({instanceLocation:s,keyword:"uniqueItems",keywordLocation:`${o}/uniqueItems`,error:`Duplicate items at indexes ${r} and ${a}.`}),r=Number.MAX_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER)}}}else if("number"===c){if("4"===r?(void 0!==V&&(!0===Z&&e<=V||e<V)&&re.push({instanceLocation:s,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${e} is less than ${Z?"or equal to ":""} ${V}.`}),void 0!==W&&(!0===K&&e>=W||e>W)&&re.push({instanceLocation:s,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${e} is greater than ${K?"or equal to ":""} ${W}.`})):(void 0!==V&&e<V&&re.push({instanceLocation:s,keyword:"minimum",keywordLocation:`${o}/minimum`,error:`${e} is less than ${V}.`}),void 0!==W&&e>W&&re.push({instanceLocation:s,keyword:"maximum",keywordLocation:`${o}/maximum`,error:`${e} is greater than ${W}.`}),void 0!==Z&&e<=Z&&re.push({instanceLocation:s,keyword:"exclusiveMinimum",keywordLocation:`${o}/exclusiveMinimum`,error:`${e} is less than ${Z}.`}),void 0!==K&&e>=K&&re.push({instanceLocation:s,keyword:"exclusiveMaximum",keywordLocation:`${o}/exclusiveMaximum`,error:`${e} is greater than or equal to ${K}.`})),void 0!==Y){let t=e%Y;Math.abs(0-t)>=1.1920929e-7&&Math.abs(Y-t)>=1.1920929e-7&&re.push({instanceLocation:s,keyword:"multipleOf",keywordLocation:`${o}/multipleOf`,error:`${e} is not a multiple of ${Y}.`})}}else if("string"===c){let t=void 0===J&&void 0===X?0:function(e){let t,r=0,n=e.length,i=0;for(;i<n;)r++,t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<n&&(t=e.charCodeAt(i),56320==(64512&t)&&i++);return r}(e);void 0!==J&&t<J&&re.push({instanceLocation:s,keyword:"minLength",keywordLocation:`${o}/minLength`,error:`String is too short (${t} < ${J}).`}),void 0!==X&&t>X&&re.push({instanceLocation:s,keyword:"maxLength",keywordLocation:`${o}/maxLength`,error:`String is too long (${t} > ${X}).`}),void 0===Q||new RegExp(Q,"u").test(e)||re.push({instanceLocation:s,keyword:"pattern",keywordLocation:`${o}/pattern`,error:"String does not match pattern."}),void 0!==S&&Uj[S]&&!Uj[S](e)&&re.push({instanceLocation:s,keyword:"format",keywordLocation:`${o}/format`,error:`String does not match format "${S}".`})}return{valid:0===re.length,errors:re}}class Kj{schema;draft;shortCircuit;lookup;constructor(e,t="2019-09",r=!0){this.schema=e,this.draft=t,this.shortCircuit=r,this.lookup=Pj(e)}validate(e){return Zj(e,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(e,t){t&&(e={...e,$id:t}),Pj(e,this.lookup)}}function Yj(e){if(lI(e)){let t=function(e,t=!1){return fI(e,t,new WeakMap)}(e,!0);if(dI(t)){return aI(pI(t,!0))}return aI(e)}return cI(e)?((e,t)=>{let r,n=_I(t),i=Tj(e._def,n,!1)??xI(n);n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===n.$refStrategy?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));let a=r?{...i,[n.definitionPath]:r}:i;return"jsonSchema7"===n.target?a.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"!==n.target&&"openAi"!==n.target||(a.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===n.target&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a})(e):e}function Jj(e){if(!e||"object"!=typeof e||0===Object.keys(e).length||Array.isArray(e))return!1;if("type"in e)return"string"==typeof e.type?"string"===e.type:!!Array.isArray(e.type)&&e.type.every(e=>"string"===e);if("enum"in e)return Array.isArray(e.enum)&&e.enum.length>0&&e.enum.every(e=>"string"==typeof e);if("const"in e)return"string"==typeof e.const;if("allOf"in e&&Array.isArray(e.allOf))return e.allOf.some(e=>Jj(e));if("anyOf"in e&&Array.isArray(e.anyOf)||"oneOf"in e&&Array.isArray(e.oneOf)){let t="anyOf"in e?e.anyOf:e.oneOf;return t.length>0&&t.every(e=>Jj(e))}if("not"in e)return!1;if("$ref"in e&&"string"==typeof e.$ref){let t=e.$ref,r=Pj(e);return!!r[t]&&Jj(r[t])}return!1}tm({},{Validator:()=>Kj,deepCompareStrict:()=>Mj,toJsonSchema:()=>Yj,validatesOnlyStrings:()=>Jj});function Xj(e,t){if(void 0!==e&&!Ag(e))return e;if(!Yb(t))return t.name??"UnknownSchema";try{let e=t.getName();return e=e.startsWith("Runnable")?e.slice(8):e,e}catch{return t.getName()}}function Qj(e){return Yb(e.data)?{type:"runnable",data:{id:e.data.lc_id,name:e.data.getName()}}:{type:"schema",data:{...Yj(e.data.schema),title:e.data.name}}}tm({},{Graph:()=>eO});var eO=class e{nodes={};edges=[];constructor(e){this.nodes=e?.nodes??this.nodes,this.edges=e?.edges??this.edges}toJSON(){let e={};return Object.values(this.nodes).forEach((t,r)=>{e[t.id]=Ag(t.id)?r:t.id}),{nodes:Object.values(this.nodes).map(t=>({id:e[t.id],...Qj(t)})),edges:this.edges.map(t=>{let r={source:e[t.source],target:e[t.target]};return typeof t.data<"u"&&(r.data=t.data),typeof t.conditional<"u"&&(r.conditional=t.conditional),r})}}addNode(e,t,r){if(void 0!==t&&void 0!==this.nodes[t])throw Error(`Node with id ${t} already exists`);let n=t??jg(),i={id:n,data:e,name:Xj(t,e),metadata:r};return this.nodes[n]=i,i}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(t=>t.source!==e.id&&t.target!==e.id)}addEdge(e,t,r,n){if(void 0===this.nodes[e.id])throw Error(`Source node ${e.id} not in graph`);if(void 0===this.nodes[t.id])throw Error(`Target node ${t.id} not in graph`);let i={source:e.id,target:t.id,data:r,conditional:n};return this.edges.push(i),i}firstNode(){return tO(this)}lastNode(){return rO(this)}extend(e,t=""){let r=t;Object.values(e.nodes).map(e=>e.id).every(Ag)&&(r="");let n=e=>r?`${r}:${e}`:e;Object.entries(e.nodes).forEach(([e,t])=>{this.nodes[n(e)]={...t,id:n(e)}});let i=e.edges.map(e=>({...e,source:n(e.source),target:n(e.target)}));this.edges=[...this.edges,...i];let a=e.firstNode(),s=e.lastNode();return[a?{id:n(a.id),data:a.data}:void 0,s?{id:n(s.id),data:s.data}:void 0]}trimFirstNode(){let e=this.firstNode();e&&tO(this,[e.id])&&this.removeNode(e)}trimLastNode(){let e=this.lastNode();e&&rO(this,[e.id])&&this.removeNode(e)}reid(){let t=Object.fromEntries(Object.values(this.nodes).map(e=>[e.id,e.name])),r=new Map;Object.values(t).forEach(e=>{r.set(e,(r.get(e)||0)+1)});let n=e=>{let n=t[e];return Ag(e)&&1===r.get(n)?n:e};return new e({nodes:Object.fromEntries(Object.entries(this.nodes).map(([e,t])=>[n(e),{...t,id:n(e)}])),edges:this.edges.map(e=>({...e,source:n(e.source),target:n(e.target)}))})}drawMermaid(e){let{withStyles:t,curveStyle:r,nodeColors:n={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:i}=e??{},a=this.reid(),s=a.firstNode(),o=a.lastNode();return vI(a.nodes,a.edges,{firstNode:s?.id,lastNode:o?.id,withStyles:t,curveStyle:r,nodeColors:n,wrapLabelNWords:i})}async drawMermaidPng(e){return async function(e,t){let r=t?.backgroundColor??"white",n=t?.imageType??"png",i=btoa(e);void 0!==r&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`));let a=`https://mermaid.ink/img/${i}?bgColor=${r}&type=${n}`,s=await fetch(a);if(!s.ok)throw Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join("\n"));return await s.blob()}(this.drawMermaid(e),{backgroundColor:e?.backgroundColor})}};function tO(e,t=[]){let r=new Set(e.edges.filter(e=>!t.includes(e.source)).map(e=>e.target)),n=[];for(let i of Object.values(e.nodes))t.includes(i.id)||r.has(i.id)||n.push(i);return 1===n.length?n[0]:void 0}function rO(e,t=[]){let r=new Set(e.edges.filter(e=>!t.includes(e.target)).map(e=>e.source)),n=[];for(let i of Object.values(e.nodes))t.includes(i.id)||r.has(i.id)||n.push(i);return 1===n.length?n[0]:void 0}function nO(e){return"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.iterator]&&"function"==typeof e.next}function iO(e){return"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.asyncIterator]}function*aO(e,t){for(;;){let{value:r,done:n}=Xy.runWithConfig(ib(e),t.next.bind(t),!0);if(n)break;yield r}}async function*sO(e,t){let r=t[Symbol.asyncIterator]();for(;;){let{value:n,done:i}=await Xy.runWithConfig(ib(e),r.next.bind(t),!0);if(i)break;yield n}}var oO=$s(Ks(),1);function lO(e,t){return!e||Array.isArray(e)||e instanceof Date||"object"!=typeof e?{[t]:e}:e}var cO=class extends cm{lc_runnable=!0;name;getName(e){let t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}withRetry(e){return new dO({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new uO({bound:this,config:e,kwargs:{}})}withFallbacks(e){let t=Array.isArray(e)?e:e.fallbacks;return new gO({runnable:this,fallbacks:t})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(rb);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");let r=Object.fromEntries(Object.entries(e).filter(([e])=>"runId"!==e));return Array.from({length:t},(t,n)=>rb(0===n?e:r))}return Array.from({length:t},()=>rb(e))}async batch(e,t,r){let n=this._getOptionsList(t??{},e.length),i=n[0]?.maxConcurrency??r?.maxConcurrency,a=new Zb({maxConcurrency:i,onFailedAttempt:e=>{throw e}}),s=e.map((e,t)=>a.call(async()=>{try{return await this.invoke(e,n[t])}catch(Lte){if(r?.returnExceptions)return Lte;throw Lte}}));return Promise.all(s)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){let r=rb(t),n=new ub({generator:this._streamIterator(e,r),config:r});return await n.setup,ob.fromAsyncGenerator(n)}_separateRunnableConfigFromCallOptions(e){let t;t=rb(void 0===e?e:{callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});let r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[t,r]}async _callWithConfig(e,t,r){let n,i=rb(r),a=await((await Qy(i))?.handleChainStart(this.toJSON(),lO(t,"input"),i.runId,i?.runType,void 0,void 0,i?.runName??this.getName()));delete i.runId;try{let s=e.call(this,t,i,a);n=await ab(s,r?.signal)}catch($re){throw await(a?.handleChainError($re)),$re}return await(a?.handleChainEnd(lO(n,"output"))),n}async _batchWithConfig(e,t,r,n){let i,a=this._getOptionsList(r??{},t.length),s=await Promise.all(a.map(Qy)),o=await Promise.all(s.map(async(e,r)=>{let n=await(e?.handleChainStart(this.toJSON(),lO(t[r],"input"),a[r].runId,a[r].runType,void 0,void 0,a[r].runName??this.getName()));return delete a[r].runId,n}));try{let r=e.call(this,t,a,o,n);i=await ab(r,a?.[0]?.signal)}catch(Pre){throw await Promise.all(o.map(t=>t?.handleChainError(Pre))),Pre}return await Promise.all(o.map(e=>e?.handleChainEnd(lO(i,"output")))),i}_concatOutputChunks(e,t){return cb(e,t)}async*_transformStreamWithConfig(e,t,r){let n,i,a,s=!0,o=!0,l=rb(r),c=await Qy(l),u=this;try{let d=await db(t.bind(this),async function*(){for await(let t of e){if(s)if(void 0===n)n=t;else try{n=u._concatOutputChunks(n,t)}catch{n=void 0,s=!1}yield t}}(),async()=>c?.handleChainStart(this.toJSON(),{input:""},l.runId,l.runType,void 0,void 0,l.runName??this.getName()),r?.signal,l);delete l.runId,a=d.setup;let h=a?.handlers.find(Fb),p=d.output;void 0!==h&&void 0!==a&&(p=h.tapOutputIterable(a.runId,p));let f=a?.handlers.find(Rb);void 0!==f&&void 0!==a&&(p=f.tapOutputIterable(a.runId,p));for await(let e of p)if(yield e,o)if(void 0===i)i=e;else try{i=this._concatOutputChunks(i,e)}catch{i=void 0,o=!1}}catch(Dre){throw await(a?.handleChainError(Dre,void 0,void 0,void 0,{inputs:lO(n,"input")})),Dre}await(a?.handleChainEnd(i??{},void 0,void 0,void 0,{inputs:lO(n,"input")}))}getGraph(e){let t=new eO,r=t.addNode({name:`${this.getName()}Input`,schema:TI.any()}),n=t.addNode(this),i=t.addNode({name:`${this.getName()}Output`,schema:TI.any()});return t.addEdge(r,n),t.addEdge(n,i),t}pipe(e){return new hO({first:this,last:vO(e)})}pick(e){return this.pipe(new bO(e))}assign(e){return this.pipe(new yO(new pO({steps:e})))}async*transform(e,t){let r;for await(let n of e)r=void 0===r?n:this._concatOutputChunks(r,n);yield*this._streamIterator(r,rb(t))}async*streamLog(e,t,r){let n=new Db({...r,autoClose:!1,_schemaFormat:"original"}),i=rb(t);yield*this._streamLog(e,n,i)}async*_streamLog(e,t,r){let{callbacks:n}=r;if(void 0===n)r.callbacks=[t];else if(Array.isArray(n))r.callbacks=n.concat([t]);else{let e=n.copy();e.addHandler(t,!0),r.callbacks=e}let i=this.stream(e,r);let a=async function(){try{let e=await i;for await(let r of e){let e=new jb({ops:[{op:"add",path:"/streamed_output/-",value:r}]});await t.writer.write(e)}}finally{await t.writer.close()}}();try{for await(let e of t)yield e}finally{await a}}streamEvents(e,t,r){let n;if("v1"===t.version)n=this._streamEventsV1(e,t,r);else{if("v2"!==t.version)throw Error('Only versions "v1" and "v2" of the schema are currently supported.');n=this._streamEventsV2(e,t,r)}return"text/event-stream"===t.encoding?function(e){let t=new TextEncoder,r=new ReadableStream({async start(r){for await(let n of e)r.enqueue(t.encode(`event: data\ndata: ${JSON.stringify(n)}\n\n`));r.enqueue(t.encode("event: end\n\n")),r.close()}});return ob.fromReadableStream(r)}(n):ob.fromAsyncGenerator(n)}async*_streamEventsV2(e,t,r){let n=new Hb({...r,autoClose:!1}),i=rb(t),a=i.runId??jg();i.runId=a;let s=i.callbacks;if(void 0===s)i.callbacks=[n];else if(Array.isArray(s))i.callbacks=s.concat(n);else{let e=s.copy();e.addHandler(n,!0),i.callbacks=e}let o=new AbortController,l=this;let c,u=async function(){let r,s=null;try{t?.signal?"any"in AbortSignal?r=AbortSignal.any([o.signal,t.signal]):(r=t.signal,s=()=>{o.abort()},t.signal.addEventListener("abort",s,{once:!0})):r=o.signal;let c=await l.stream(e,{...i,signal:r}),u=n.tapOutputIterable(a,c);for await(let e of u)if(o.signal.aborted)break}finally{await n.finish(),r&&s&&r.removeEventListener("abort",s)}}(),d=!1;try{for await(let t of n)d?(t.run_id===c&&t.event.endsWith("_end")&&t.data?.input&&delete t.data.input,yield t):(t.data.input=e,d=!0,c=t.run_id,yield t)}finally{o.abort(),await u}}async*_streamEventsV1(e,t,r){let n,i=!1,a=rb(t),s=a.tags??[],o=a.metadata??{},l=a.runName??this.getName(),c=new Db({...r,autoClose:!1,_schemaFormat:"streaming_events"}),u=new Jb({...r}),d=this._streamLog(e,c,a);for await(let p of d){if(n=n?n.concat(p):Ob.fromRunLogPatch(p),void 0===n.state)throw Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!i){i=!0;let t={...n.state},r={run_id:t.id,event:`on_${t.type}_start`,name:l,tags:s,metadata:o,data:{input:e}};u.includeEvent(r,t.type)&&(yield r)}let t=p.ops.filter(e=>e.path.startsWith("/logs/")).map(e=>e.path.split("/")[2]),r=[...new Set(t)];for(let e of r){let t,r={},i=n.state.logs[e];if(t=void 0===i.end_time?i.streamed_output.length>0?"stream":"start":"end","start"===t)void 0!==i.inputs&&(r.input=i.inputs);else if("end"===t)void 0!==i.inputs&&(r.input=i.inputs),r.output=i.final_output;else if("stream"===t){let e=i.streamed_output.length;if(1!==e)throw Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${i.name}"`);r={chunk:i.streamed_output[0]},i.streamed_output=[]}yield{event:`on_${i.type}_${t}`,name:i.name,run_id:i.id,tags:i.tags,metadata:i.metadata,data:r}}let{state:a}=n;if(a.streamed_output.length>0){let e=a.streamed_output.length;if(1!==e)throw Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${a.name}"`);let t={chunk:a.streamed_output[0]};a.streamed_output=[];let r={event:`on_${a.type}_stream`,run_id:a.id,tags:s,metadata:o,name:l,data:t};u.includeEvent(r,a.type)&&(yield r)}}let h=n?.state;if(void 0!==h){let e={event:`on_${h.type}_end`,name:l,run_id:h.id,tags:s,metadata:o,data:{output:h.final_output}};u.includeEvent(e,h.type)&&(yield e)}}static isRunnable(e){return Yb(e)}withListeners({onStart:e,onEnd:t,onError:r}){return new uO({bound:this,config:{},configFactories:[n=>({callbacks:[new Kb({config:n,onStart:e,onEnd:t,onError:r})]})]})}asTool(e){return function(e,t){let r=t.name??e.getName(),n=t.description??function(e){return lI(e)?tT.get(e)?.description:cI(e)||"description"in e&&"string"==typeof e.description?e.description:void 0}(t.schema);return uI(t.schema)?new _O({name:r,description:n,schema:TI.object({input:TI.string()}).transform(e=>e.input),bound:e}):new _O({name:r,description:n,schema:t.schema,bound:e})}(this,e)}},uO=class e extends cO{static lc_name(){return"RunnableBinding"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;bound;config;kwargs;configFactories;constructor(e){super(e),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){let t=eb(this.config,...e);return eb(t,...this.configFactories?await Promise.all(this.configFactories.map(async e=>await e(t))):[])}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new dO({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e?.stopAfterAttempt,...e})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig(t,this.kwargs))}async batch(e,t,r){let n=Array.isArray(t)?await Promise.all(t.map(async e=>this._mergeConfig(rb(e),this.kwargs))):await this._mergeConfig(rb(t),this.kwargs);return this.bound.batch(e,n,r)}_concatOutputChunks(e,t){return this.bound._concatOutputChunks(e,t)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig(rb(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig(rb(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig(rb(t),this.kwargs))}streamEvents(e,t,r){let n=this;return ob.fromAsyncGenerator(async function*(){yield*n.bound.streamEvents(e,{...await n._mergeConfig(rb(t),n.kwargs),version:t.version},r)}())}static isRunnableBinding(e){return e.bound&&cO.isRunnable(e.bound)}withListeners({onStart:t,onEnd:r,onError:n}){return new e({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[e=>({callbacks:[new Kb({config:e,onStart:t,onEnd:r,onError:n})]})]})}},dO=class extends uO{static lc_name(){return"RunnableRetry"}lc_namespace=["langchain_core","runnables"];maxAttemptNumber=3;onFailedAttempt=()=>{};constructor(e){super(e),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,r){let n=e>1?`retry:attempt:${e}`:void 0;return nb(t,{callbacks:r?.getChild(n)})}async _invoke(e,t,r){return oO.default(n=>super.invoke(e,this._patchConfigForRetry(n,t,r)),{onFailedAttempt:t=>this.onFailedAttempt(t,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _batch(e,t,r,n){let i={};try{await oO.default(async a=>{let s,o=e.map((e,t)=>t).filter(e=>void 0===i[e.toString()]||i[e.toString()]instanceof Error),l=o.map(t=>e[t]),c=o.map(e=>this._patchConfigForRetry(a,t?.[e],r?.[e])),u=await super.batch(l,c,{...n,returnExceptions:!0});for(let e=0;e<u.length;e+=1){let t=u[e],r=o[e];t instanceof Error&&void 0===s&&(s=t,s.input=l[e]),i[r.toString()]=t}if(s)throw s;return u},{onFailedAttempt:e=>this.onFailedAttempt(e,e.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if(!0!==n?.returnExceptions)throw a}return Object.keys(i).sort((e,t)=>parseInt(e,10)-parseInt(t,10)).map(e=>i[parseInt(e,10)])}async batch(e,t,r){return this._batchWithConfig(this._batch.bind(this),e,t,r)}},hO=class e extends cO{static lc_name(){return"RunnableSequence"}first;middle=[];last;omitSequenceTags=!1;lc_serializable=!0;lc_namespace=["langchain_core","runnables"];constructor(e){super(e),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){let r=rb(t),n=await((await Qy(r))?.handleChainStart(this.toJSON(),lO(e,"input"),r.runId,void 0,void 0,void 0,r?.runName));delete r.runId;let i,a=e;try{let e=[this.first,...this.middle];for(let i=0;i<e.length;i+=1){let s=e[i].invoke(a,nb(r,{callbacks:n?.getChild(this.omitSequenceTags?void 0:`seq:step:${i+1}`)}));a=await ab(s,t?.signal)}if(t?.signal?.aborted)throw sb(t.signal);i=await this.last.invoke(a,nb(r,{callbacks:n?.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(Pre){throw await(n?.handleChainError(Pre)),Pre}return await(n?.handleChainEnd(lO(i,"output"))),i}async batch(e,t,r){let n=this._getOptionsList(t??{},e.length),i=await Promise.all(n.map(Qy)),a=await Promise.all(i.map(async(t,r)=>{let i=await(t?.handleChainStart(this.toJSON(),lO(e[r],"input"),n[r].runId,void 0,void 0,void 0,n[r].runName));return delete n[r].runId,i})),s=e;try{for(let e=0;e<this.steps.length;e+=1){let t=this.steps[e].batch(s,a.map((t,r)=>{let i=t?.getChild(this.omitSequenceTags?void 0:`seq:step:${e+1}`);return nb(n[r],{callbacks:i})}),r);s=await ab(t,n[0]?.signal)}}catch(Pre){throw await Promise.all(a.map(t=>t?.handleChainError(Pre))),Pre}return await Promise.all(a.map(e=>e?.handleChainEnd(lO(s,"output")))),s}_concatOutputChunks(e,t){return this.last._concatOutputChunks(e,t)}async*_streamIterator(e,t){let r,n=await Qy(t),{runId:i,...a}=t??{},s=await(n?.handleChainStart(this.toJSON(),lO(e,"input"),i,void 0,void 0,void 0,a?.runName)),o=[this.first,...this.middle,this.last],l=!0;try{let n=o[0].transform(async function*(){yield e}(),nb(a,{callbacks:s?.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let e=1;e<o.length;e+=1)n=await o[e].transform(n,nb(a,{callbacks:s?.getChild(this.omitSequenceTags?void 0:`seq:step:${e+1}`)}));for await(let e of n)if(t?.signal?.throwIfAborted(),yield e,l)if(void 0===r)r=e;else try{r=this._concatOutputChunks(r,e)}catch{r=void 0,l=!1}}catch(oee){throw await(s?.handleChainError(oee)),oee}await(s?.handleChainEnd(lO(r,"output")))}getGraph(e){let t=new eO,r=null;return this.steps.forEach((n,i)=>{let a=n.getGraph(e);0!==i&&a.trimFirstNode(),i!==this.steps.length-1&&a.trimLastNode(),t.extend(a);let s=a.firstNode();if(!s)throw Error(`Runnable ${n} has no first node`);r&&t.addEdge(r,s),r=a.lastNode()}),t}pipe(t){return e.isRunnableSequence(t)?new e({first:this.first,middle:this.middle.concat([this.last,t.first,...t.middle]),last:t.last,name:this.name??t.name}):new e({first:this.first,middle:[...this.middle,this.last],last:vO(t),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&cO.isRunnable(e)}static from([t,...r],n){let i={};return"string"==typeof n?i.name=n:void 0!==n&&(i=n),new e({...i,first:vO(t),middle:r.slice(0,-1).map(vO),last:vO(r[r.length-1])})}},pO=class e extends cO{static lc_name(){return"RunnableMap"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;steps;getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),this.steps={};for(let[t,r]of Object.entries(e.steps))this.steps[t]=vO(r)}static from(t){return new e({steps:t})}async invoke(e,t){let r=rb(t),n=await((await Qy(r))?.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r?.runName));delete r.runId;let i={};try{let a=Object.entries(this.steps).map(async([t,a])=>{i[t]=await a.invoke(e,nb(r,{callbacks:n?.getChild(`map:key:${t}`)}))});await ab(Promise.all(a),t?.signal)}catch($re){throw await(n?.handleChainError($re)),$re}return await(n?.handleChainEnd(i)),i}async*_transform(e,t,r){let n={...this.steps},i=lb(e,Object.keys(n).length),a=new Map(Object.entries(n).map(([e,n],a)=>{let s=n.transform(i[a],nb(r,{callbacks:t?.getChild(`map:key:${e}`)}));return[e,s.next().then(t=>({key:e,gen:s,result:t}))]}));for(;a.size;){let e=Promise.race(a.values()),{key:t,result:n,gen:i}=await ab(e,r?.signal);a.delete(t),n.done||(yield{[t]:n.value},a.set(t,i.next().then(e=>({key:t,gen:i,result:e}))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){let r=rb(t),n=new ub({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,ob.fromAsyncGenerator(n)}},fO=class e extends cO{lc_serializable=!1;lc_namespace=["langchain_core","runnables"];func;constructor(e){if(super(e),!Cy(e.func))throw Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,t){let[r]=this._getOptionsList(t??{},1),n=await Qy(r);return ab(this.func(nb(r,{callbacks:n}),e),r?.signal)}async*_streamIterator(e,t){let[r]=this._getOptionsList(t??{},1),n=await this.invoke(e,t);if(iO(n))for await(let i of n)r?.signal?.throwIfAborted(),yield i;else if((e=>null!=e&&"object"==typeof e&&"next"in e&&"function"==typeof e.next)(n))for(;;){r?.signal?.throwIfAborted();let e=n.next();if(e.done)break;yield e.value}else yield n}static from(t){return new e({func:t})}};var mO=class e extends cO{static lc_name(){return"RunnableLambda"}lc_namespace=["langchain_core","runnables"];func;constructor(e){if(Cy(e.func))return fO.from(e.func);super(e),function(e){if(Cy(e))throw Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}(e.func),this.func=e.func}static from(t){return new e({func:t})}async _invoke(e,t,r){return new Promise((n,i)=>{let a=nb(t,{callbacks:r?.getChild(),recursionLimit:(t?.recursionLimit??25)-1});Xy.runWithConfig(ib(a),async()=>{try{let r=await this.func(e,{...a});if(r&&cO.isRunnable(r)){if(0===t?.recursionLimit)throw Error("Recursion limit reached.");r=await r.invoke(e,{...a,recursionLimit:(a.recursionLimit??25)-1})}else if(iO(r)){let e;for await(let n of sO(a,r))if(t?.signal?.throwIfAborted(),void 0===e)e=n;else try{e=this._concatOutputChunks(e,n)}catch{e=n}r=e}else if(nO(r)){let e;for(let n of aO(a,r))if(t?.signal?.throwIfAborted(),void 0===e)e=n;else try{e=this._concatOutputChunks(e,n)}catch{e=n}r=e}n(r)}catch($re){i($re)}})})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async*_transform(e,t,r){let n;for await(let s of e)if(void 0===n)n=s;else try{n=this._concatOutputChunks(n,s)}catch{n=s}let i=nb(r,{callbacks:t?.getChild(),recursionLimit:(r?.recursionLimit??25)-1}),a=await new Promise((e,t)=>{Xy.runWithConfig(ib(i),async()=>{try{let t=await this.func(n,{...i,config:i});e(t)}catch(Lte){t(Lte)}})});if(a&&cO.isRunnable(a)){if(0===r?.recursionLimit)throw Error("Recursion limit reached.");let e=await a.stream(n,i);for await(let t of e)yield t}else if(iO(a))for await(let s of sO(i,a))r?.signal?.throwIfAborted(),yield s;else if(nO(a))for(let s of aO(i,a))r?.signal?.throwIfAborted(),yield s;else yield a}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){let r=rb(t),n=new ub({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,ob.fromAsyncGenerator(n)}},gO=class extends cO{static lc_name(){return"RunnableWithFallbacks"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;runnable;fallbacks;constructor(e){super(e),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(let e of this.fallbacks)yield e}async invoke(e,t){let r=rb(t),n=await Qy(r),{runId:i,...a}=r,s=await(n?.handleChainStart(this.toJSON(),lO(e,"input"),i,void 0,void 0,void 0,a?.runName)),o=nb(a,{callbacks:s?.getChild()});return await Xy.runWithConfig(o,async()=>{let t;for(let n of this.runnables()){r?.signal?.throwIfAborted();try{let t=await n.invoke(e,o);return await(s?.handleChainEnd(lO(t,"output"))),t}catch(oee){void 0===t&&(t=oee)}}if(void 0===t)throw Error("No error stored at end of fallback.");throw await(s?.handleChainError(t)),t})}async*_streamIterator(e,t){let r,n,i,a=rb(t),s=await Qy(a),{runId:o,...l}=a,c=await(s?.handleChainStart(this.toJSON(),lO(e,"input"),o,void 0,void 0,void 0,l?.runName));for(let u of this.runnables()){a?.signal?.throwIfAborted();let t=nb(l,{callbacks:c?.getChild()});try{n=sO(t,await u.stream(e,t));break}catch(Dre){void 0===r&&(r=Dre)}}if(void 0===n){let e=r??Error("No error stored at end of fallback.");throw await(c?.handleChainError(e)),e}try{for await(let e of n){yield e;try{i=void 0===i?i:this._concatOutputChunks(i,e)}catch{i=void 0}}}catch(Tre){throw await(c?.handleChainError(Tre)),Tre}await(c?.handleChainEnd(lO(i,"output")))}async batch(e,t,r){if(r?.returnExceptions)throw Error("Not implemented.");let n,i=this._getOptionsList(t??{},e.length),a=await Promise.all(i.map(e=>Qy(e))),s=await Promise.all(a.map(async(t,r)=>{let n=await(t?.handleChainStart(this.toJSON(),lO(e[r],"input"),i[r].runId,void 0,void 0,void 0,i[r].runName));return delete i[r].runId,n}));for(let o of this.runnables()){i[0].signal?.throwIfAborted();try{let t=await o.batch(e,s.map((e,t)=>nb(i[t],{callbacks:e?.getChild()})),r);return await Promise.all(s.map((e,r)=>e?.handleChainEnd(lO(t[r],"output")))),t}catch(Pre){void 0===n&&(n=Pre)}}if(!n)throw Error("No error stored at end of fallbacks.");throw await Promise.all(s.map(e=>e?.handleChainError(n))),n}};function vO(e){if("function"==typeof e)return new mO({func:e});if(cO.isRunnable(e))return e;if(Array.isArray(e)||"object"!=typeof e)throw Error("Expected a Runnable, function or object.\nInstead got an unsupported type.");{let t={};for(let[r,n]of Object.entries(e))t[r]=vO(n);return new pO({steps:t})}}var yO=class extends cO{static lc_name(){return"RunnableAssign"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;mapper;constructor(e){e instanceof pO&&(e={mapper:e}),super(e),this.mapper=e.mapper}async invoke(e,t){let r=await this.mapper.invoke(e,t);return{...e,...r}}async*_transform(e,t,r){let n=this.mapper.getStepsKeys(),[i,a]=lb(e),s=this.mapper.transform(a,nb(r,{callbacks:t?.getChild()})),o=s.next();for await(let l of i){if("object"!=typeof l||Array.isArray(l))throw Error("RunnableAssign can only be used with objects as input, got "+typeof l);let e=Object.fromEntries(Object.entries(l).filter(([e])=>!n.includes(e)));Object.keys(e).length>0&&(yield e)}yield(await o).value;for await(let l of s)yield l}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){let r=rb(t),n=new ub({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,ob.fromAsyncGenerator(n)}},bO=class extends cO{static lc_name(){return"RunnablePick"}lc_namespace=["langchain_core","runnables"];lc_serializable=!0;keys;constructor(e){("string"==typeof e||Array.isArray(e))&&(e={keys:e}),super(e),this.keys=e.keys}async _pick(e){if("string"==typeof this.keys)return e[this.keys];{let t=this.keys.map(t=>[t,e[t]]).filter(e=>void 0!==e[1]);return 0===t.length?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(let t of e){let e=await this._pick(t);void 0!==e&&(yield e)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){let r=rb(t),n=new ub({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,ob.fromAsyncGenerator(n)}},_O=class extends uO{name;description;schema;constructor(e){let t=hO.from([mO.from(async e=>{let t;if(function(e){return!(!e||"object"!=typeof e||!("type"in e)||"tool_call"!==e.type)}(e))try{t=await async function(e,t){if(lI(e))return await Sw(e,t);if(cI(e))return await e.parseAsync(t);throw Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}(this.schema,e.args)}catch{throw new um("Received tool input did not match expected schema",JSON.stringify(e.args))}else t=e;return t}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:t,config:e.config??{}}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};var wO=class extends cO{lc_namespace=["langchain_core","documents","transformers"];invoke(e,t){return this.transformDocuments(e)}},xO=class extends wO{async transformDocuments(e){let t=[];for(let r of e){let e=await this._transformDocument(r);t.push(e)}return t}};tm({},{BaseDocumentTransformer:()=>wO,Document:()=>rm,MappingDocumentTransformer:()=>xO});var EO=$s(Ko(),1),kO=Object.defineProperty;function SO(e,t){return 1===e.length?[t.get(e.join(","))]:function(e,t){let r=Array.from({length:e.length},(e,t)=>({start:t,end:t+1}));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){let a=e.slice(r[i].start,r[i+1].end),s=t.get(a.join(","));null!=s&&(null==n||s<n[0])&&(n=[s,i])}if(null==n)break;{let e=n[1];r[e]={start:r[e].start,end:r[e+1].end},r.splice(e+1,1)}}return r}(e,t).map(r=>t.get(e.slice(r.start,r.end).join(","))).filter(e=>null!=e)}var AO=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(e,t){this.patStr=e.pat_str;let r=e.bpe_ranks.split("\n").filter(Boolean).reduce((e,t)=>{let[r,n,...i]=t.split(" "),a=Number.parseInt(n,10);return i.forEach((t,r)=>e[t]=a+r),e},{});for(let[n,i]of Object.entries(r)){let e=EO.default.toByteArray(n);this.rankMap.set(e.join(","),i),this.textMap.set(i,e)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((e,[t,r])=>(e[r]=this.textEncoder.encode(t),e),{})}encode(e,t=[],r="all"){let n=new RegExp(this.patStr,"ug"),i=AO.specialTokenRegex(Object.keys(this.specialTokens)),a=[],s=new Set("all"===t?Object.keys(this.specialTokens):t),o=new Set("all"===r?Object.keys(this.specialTokens).filter(e=>!s.has(e)):r);if(o.size>0){let t=AO.specialTokenRegex([...o]),r=e.match(t);if(null!=r)throw Error(`The text contains a special token that is not allowed: ${r[0]}`)}let l=0;for(;;){let t=null,r=l;for(;i.lastIndex=r,t=i.exec(e),null!=t&&!s.has(t[0]);)r=t.index+1;let o=t?.index??e.length;for(let i of e.substring(l,o).matchAll(n)){let e=this.textEncoder.encode(i[0]),t=this.rankMap.get(e.join(","));null==t?a.push(...SO(e,this.rankMap)):a.push(t)}if(null==t)break;let c=this.specialTokens[t[0]];a.push(c),l=t.index+t[0].length}return a}decode(e){let t=[],r=0;for(let a=0;a<e.length;++a){let n=e[a],i=this.textMap.get(n)??this.inverseSpecialTokens[n];null!=i&&(t.push(i),r+=i.length)}let n=new Uint8Array(r),i=0;for(let a of t)n.set(a,i),i+=a.length;return this.textDecoder.decode(n)}},TO=AO;((e,t,r)=>{((e,t,r)=>{t in e?kO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,t+"",r)})(TO,"specialTokenRegex",e=>new RegExp(e.map(e=>function(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}(e)).join("|"),"g"));tm({},{encodingForModel:()=>CO,getEncoding:()=>MO});var NO={},IO=new Zb({});async function MO(e){return e in NO||(NO[e]=IO.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then(e=>e.json()).then(e=>new TO(e)).catch(t=>{throw delete NO[e],t})),await NO[e]}async function CO(e){return MO(function(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":case"gpt-5":case"gpt-5-2025-08-07":case"gpt-5-nano":case"gpt-5-nano-2025-08-07":case"gpt-5-mini":case"gpt-5-mini-2025-08-07":case"gpt-5-chat-latest":return"o200k_base";default:throw Error("Unknown model")}}(e))}$s(Dl(),1);var jO={};Fs(jO,{xid:()=>CR,void:()=>IL,uuidv7:()=>gR,uuidv6:()=>mR,uuidv4:()=>fR,uuid:()=>pR,util:()=>s_,url:()=>yR,uppercase:()=>vN,unknown:()=>SL,union:()=>BL,undefined:()=>bL,ulid:()=>IR,uint64:()=>mL,uint32:()=>lL,tuple:()=>VL,trim:()=>SN,treeifyError:()=>bw,transform:()=>lP,toUpperCase:()=>TN,toLowerCase:()=>AN,toJSONSchema:()=>aI,templateLiteral:()=>OP,symbol:()=>vL,superRefine:()=>GP,success:()=>wP,stringbool:()=>VP,stringFormat:()=>JR,string:()=>sR,strictObject:()=>DL,startsWith:()=>bN,size:()=>dN,setErrorMap:()=>JP,set:()=>QL,safeParseAsync:()=>ZO,safeParse:()=>WO,safeEncodeAsync:()=>tR,safeEncode:()=>QO,safeDecodeAsync:()=>rR,safeDecode:()=>eR,registry:()=>eT,regexes:()=>Vw,regex:()=>mN,refine:()=>HP,record:()=>ZL,readonly:()=>CP,property:()=>wN,promise:()=>DP,prettifyError:()=>ww,preprocess:()=>ZP,prefault:()=>vP,positive:()=>iN,pipe:()=>TP,partialRecord:()=>KL,parseAsync:()=>VO,parse:()=>qO,overwrite:()=>EN,optional:()=>uP,object:()=>PL,number:()=>rL,nullish:()=>pP,nullable:()=>hP,null:()=>wL,normalize:()=>kN,nonpositive:()=>sN,nonoptional:()=>bP,nonnegative:()=>oN,never:()=>TL,negative:()=>aN,nativeEnum:()=>rP,nanoid:()=>ER,nan:()=>SP,multipleOf:()=>lN,minSize:()=>uN,minLength:()=>pN,mime:()=>xN,maxSize:()=>cN,maxLength:()=>hN,map:()=>JL,lte:()=>tN,lt:()=>eN,lowercase:()=>gN,looseObject:()=>$L,locales:()=>cS,literal:()=>iP,length:()=>fN,lazy:()=>LP,ksuid:()=>OR,keyof:()=>RL,jwt:()=>KR,json:()=>WP,iso:()=>OO,ipv6:()=>DR,ipv4:()=>LR,intersection:()=>GL,int64:()=>fL,int32:()=>oL,int:()=>iL,instanceof:()=>qP,includes:()=>yN,httpUrl:()=>bR,hostname:()=>XR,hex:()=>QR,hash:()=>eL,guid:()=>dR,gte:()=>nN,gt:()=>rN,globalRegistry:()=>tT,getErrorMap:()=>XP,function:()=>zP,formatError:()=>yw,float64:()=>sL,float32:()=>aL,flattenError:()=>vw,file:()=>sP,enum:()=>tP,endsWith:()=>_N,encodeAsync:()=>JO,encode:()=>KO,emoji:()=>wR,email:()=>cR,e164:()=>WR,discriminatedUnion:()=>FL,decodeAsync:()=>XO,decode:()=>YO,date:()=>CL,custom:()=>FP,cuid2:()=>TR,cuid:()=>SR,core:()=>Xb,config:()=>a_,coerce:()=>QP,codec:()=>IP,clone:()=>z_,cidrv6:()=>UR,cidrv4:()=>zR,check:()=>UP,catch:()=>EP,boolean:()=>uL,bigint:()=>hL,base64url:()=>qR,base64:()=>HR,array:()=>OL,any:()=>EL,_function:()=>zP,_default:()=>mP,_ZodString:()=>iR,ZodXID:()=>MR,ZodVoid:()=>NL,ZodUnknown:()=>kL,ZodUnion:()=>zL,ZodUndefined:()=>yL,ZodUUID:()=>hR,ZodURL:()=>vR,ZodULID:()=>NR,ZodType:()=>nR,ZodTuple:()=>qL,ZodTransform:()=>oP,ZodTemplateLiteral:()=>jP,ZodSymbol:()=>gL,ZodSuccess:()=>_P,ZodStringFormat:()=>oR,ZodString:()=>aR,ZodSet:()=>XL,ZodRecord:()=>WL,ZodRealError:()=>GO,ZodReadonly:()=>MP,ZodPromise:()=>PP,ZodPrefault:()=>gP,ZodPipe:()=>AP,ZodOptional:()=>cP,ZodObject:()=>LL,ZodNumberFormat:()=>nL,ZodNumber:()=>tL,ZodNullable:()=>dP,ZodNull:()=>_L,ZodNonOptional:()=>yP,ZodNever:()=>AL,ZodNanoID:()=>xR,ZodNaN:()=>kP,ZodMap:()=>YL,ZodLiteral:()=>nP,ZodLazy:()=>RP,ZodKSUID:()=>jR,ZodJWT:()=>ZR,ZodIssueCode:()=>YP,ZodIntersection:()=>HL,ZodISOTime:()=>$O,ZodISODuration:()=>BO,ZodISODateTime:()=>RO,ZodISODate:()=>PO,ZodIPv6:()=>PR,ZodIPv4:()=>RR,ZodGUID:()=>uR,ZodFunction:()=>$P,ZodFirstPartyTypeKind:()=>KP,ZodFile:()=>aP,ZodError:()=>HO,ZodEnum:()=>eP,ZodEmoji:()=>_R,ZodEmail:()=>lR,ZodE164:()=>VR,ZodDiscriminatedUnion:()=>UL,ZodDefault:()=>fP,ZodDate:()=>ML,ZodCustomStringFormat:()=>YR,ZodCustom:()=>BP,ZodCodec:()=>NP,ZodCatch:()=>xP,ZodCUID2:()=>AR,ZodCUID:()=>kR,ZodCIDRv6:()=>BR,ZodCIDRv4:()=>$R,ZodBoolean:()=>cL,ZodBigIntFormat:()=>pL,ZodBigInt:()=>dL,ZodBase64URL:()=>GR,ZodBase64:()=>FR,ZodArray:()=>jL,ZodAny:()=>xL,TimePrecision:()=>AT,NEVER:()=>Qb,$output:()=>JA,$input:()=>XA,$brand:()=>t_});var OO={};Fs(OO,{time:()=>zO,duration:()=>UO,datetime:()=>LO,date:()=>DO,ZodISOTime:()=>$O,ZodISODuration:()=>BO,ZodISODateTime:()=>RO,ZodISODate:()=>PO});var RO=e_("ZodISODateTime",(e,t)=>{BE.init(e,t),oR.init(e,t)});function LO(e){return TT(RO,e)}var PO=e_("ZodISODate",(e,t)=>{UE.init(e,t),oR.init(e,t)});function DO(e){return NT(PO,e)}var $O=e_("ZodISOTime",(e,t)=>{FE.init(e,t),oR.init(e,t)});function zO(e){return IT($O,e)}var BO=e_("ZodISODuration",(e,t)=>{HE.init(e,t),oR.init(e,t)});function UO(e){return MT(BO,e)}var FO=(e,t)=>{mw.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>yw(e,t)},flatten:{value:t=>vw(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,f_,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,f_,2)}},isEmpty:{get:()=>0===e.issues.length}})},HO=e_("ZodError",FO),GO=e_("ZodError",FO,{Parent:Error}),qO=xw(GO),VO=kw(GO),WO=Aw(GO),ZO=Nw(GO),KO=Mw(GO),YO=jw(GO),JO=Rw(GO),XO=Pw(GO),QO=$w(GO),eR=Bw(GO),tR=Fw(GO),rR=Gw(GO),nR=e_("ZodType",(e,t)=>(AE.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(s_.mergeDefs(t,{checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]})),e.clone=(t,r)=>z_(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>qO(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>WO(e,t,r),e.parseAsync=async(t,r)=>VO(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>ZO(e,t,r),e.spa=e.safeParseAsync,e.encode=(t,r)=>KO(e,t,r),e.decode=(t,r)=>YO(e,t,r),e.encodeAsync=async(t,r)=>JO(e,t,r),e.decodeAsync=async(t,r)=>XO(e,t,r),e.safeEncode=(t,r)=>QO(e,t,r),e.safeDecode=(t,r)=>eR(e,t,r),e.safeEncodeAsync=async(t,r)=>tR(e,t,r),e.safeDecodeAsync=async(t,r)=>rR(e,t,r),e.refine=(t,r)=>e.check(HP(t,r)),e.superRefine=t=>e.check(GP(t)),e.overwrite=t=>e.check(EN(t)),e.optional=()=>uP(e),e.nullable=()=>hP(e),e.nullish=()=>uP(hP(e)),e.nonoptional=t=>bP(e,t),e.array=()=>OL(e),e.or=t=>BL([e,t]),e.and=t=>GL(e,t),e.transform=t=>TP(e,lP(t)),e.default=t=>mP(e,t),e.prefault=t=>vP(e,t),e.catch=t=>EP(e,t),e.pipe=t=>TP(e,t),e.readonly=()=>CP(e),e.describe=t=>{let r=e.clone();return tT.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>tT.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return tT.get(e);let r=e.clone();return tT.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),iR=e_("_ZodString",(e,t)=>{TE.init(e,t),nR.init(e,t);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(mN(...t)),e.includes=(...t)=>e.check(yN(...t)),e.startsWith=(...t)=>e.check(bN(...t)),e.endsWith=(...t)=>e.check(_N(...t)),e.min=(...t)=>e.check(pN(...t)),e.max=(...t)=>e.check(hN(...t)),e.length=(...t)=>e.check(fN(...t)),e.nonempty=(...t)=>e.check(pN(1,...t)),e.lowercase=t=>e.check(gN(t)),e.uppercase=t=>e.check(vN(t)),e.trim=()=>e.check(SN()),e.normalize=(...t)=>e.check(kN(...t)),e.toLowerCase=()=>e.check(AN()),e.toUpperCase=()=>e.check(TN())}),aR=e_("ZodString",(e,t)=>{TE.init(e,t),iR.init(e,t),e.email=t=>e.check(iT(lR,t)),e.url=t=>e.check(uT(vR,t)),e.jwt=t=>e.check(ST(ZR,t)),e.emoji=t=>e.check(dT(_R,t)),e.guid=t=>e.check(aT(uR,t)),e.uuid=t=>e.check(sT(hR,t)),e.uuidv4=t=>e.check(oT(hR,t)),e.uuidv6=t=>e.check(lT(hR,t)),e.uuidv7=t=>e.check(cT(hR,t)),e.nanoid=t=>e.check(hT(xR,t)),e.guid=t=>e.check(aT(uR,t)),e.cuid=t=>e.check(pT(kR,t)),e.cuid2=t=>e.check(fT(AR,t)),e.ulid=t=>e.check(mT(NR,t)),e.base64=t=>e.check(xT(FR,t)),e.base64url=t=>e.check(ET(GR,t)),e.xid=t=>e.check(gT(MR,t)),e.ksuid=t=>e.check(vT(jR,t)),e.ipv4=t=>e.check(yT(RR,t)),e.ipv6=t=>e.check(bT(PR,t)),e.cidrv4=t=>e.check(_T($R,t)),e.cidrv6=t=>e.check(wT(BR,t)),e.e164=t=>e.check(kT(VR,t)),e.datetime=t=>e.check(LO(t)),e.date=t=>e.check(DO(t)),e.time=t=>e.check(zO(t)),e.duration=t=>e.check(UO(t))});function sR(e){return rT(aR,e)}var oR=e_("ZodStringFormat",(e,t)=>{NE.init(e,t),iR.init(e,t)}),lR=e_("ZodEmail",(e,t)=>{CE.init(e,t),oR.init(e,t)});function cR(e){return iT(lR,e)}var uR=e_("ZodGUID",(e,t)=>{IE.init(e,t),oR.init(e,t)});function dR(e){return aT(uR,e)}var hR=e_("ZodUUID",(e,t)=>{ME.init(e,t),oR.init(e,t)});function pR(e){return sT(hR,e)}function fR(e){return oT(hR,e)}function mR(e){return lT(hR,e)}function gR(e){return cT(hR,e)}var vR=e_("ZodURL",(e,t)=>{jE.init(e,t),oR.init(e,t)});function yR(e){return uT(vR,e)}function bR(e){return uT(vR,{protocol:/^https?$/,hostname:Vw.domain,...s_.normalizeParams(e)})}var _R=e_("ZodEmoji",(e,t)=>{OE.init(e,t),oR.init(e,t)});function wR(e){return dT(_R,e)}var xR=e_("ZodNanoID",(e,t)=>{RE.init(e,t),oR.init(e,t)});function ER(e){return hT(xR,e)}var kR=e_("ZodCUID",(e,t)=>{LE.init(e,t),oR.init(e,t)});function SR(e){return pT(kR,e)}var AR=e_("ZodCUID2",(e,t)=>{PE.init(e,t),oR.init(e,t)});function TR(e){return fT(AR,e)}var NR=e_("ZodULID",(e,t)=>{DE.init(e,t),oR.init(e,t)});function IR(e){return mT(NR,e)}var MR=e_("ZodXID",(e,t)=>{$E.init(e,t),oR.init(e,t)});function CR(e){return gT(MR,e)}var jR=e_("ZodKSUID",(e,t)=>{zE.init(e,t),oR.init(e,t)});function OR(e){return vT(jR,e)}var RR=e_("ZodIPv4",(e,t)=>{GE.init(e,t),oR.init(e,t)});function LR(e){return yT(RR,e)}var PR=e_("ZodIPv6",(e,t)=>{qE.init(e,t),oR.init(e,t)});function DR(e){return bT(PR,e)}var $R=e_("ZodCIDRv4",(e,t)=>{VE.init(e,t),oR.init(e,t)});function zR(e){return _T($R,e)}var BR=e_("ZodCIDRv6",(e,t)=>{WE.init(e,t),oR.init(e,t)});function UR(e){return wT(BR,e)}var FR=e_("ZodBase64",(e,t)=>{KE.init(e,t),oR.init(e,t)});function HR(e){return xT(FR,e)}var GR=e_("ZodBase64URL",(e,t)=>{JE.init(e,t),oR.init(e,t)});function qR(e){return ET(GR,e)}var VR=e_("ZodE164",(e,t)=>{XE.init(e,t),oR.init(e,t)});function WR(e){return kT(VR,e)}var ZR=e_("ZodJWT",(e,t)=>{ek.init(e,t),oR.init(e,t)});function KR(e){return ST(ZR,e)}var YR=e_("ZodCustomStringFormat",(e,t)=>{tk.init(e,t),oR.init(e,t)});function JR(e,t,r={}){return nI(YR,e,t,r)}function XR(e){return nI(YR,"hostname",Vw.hostname,e)}function QR(e){return nI(YR,"hex",Vw.hex,e)}function eL(e,t){let r=`${e}_${t?.enc??"hex"}`,n=Vw[r];if(!n)throw Error(`Unrecognized hash format: ${r}`);return nI(YR,r,n,t)}var tL=e_("ZodNumber",(e,t)=>{rk.init(e,t),nR.init(e,t),e.gt=(t,r)=>e.check(rN(t,r)),e.gte=(t,r)=>e.check(nN(t,r)),e.min=(t,r)=>e.check(nN(t,r)),e.lt=(t,r)=>e.check(eN(t,r)),e.lte=(t,r)=>e.check(tN(t,r)),e.max=(t,r)=>e.check(tN(t,r)),e.int=t=>e.check(iL(t)),e.safe=t=>e.check(iL(t)),e.positive=t=>e.check(rN(0,t)),e.nonnegative=t=>e.check(nN(0,t)),e.negative=t=>e.check(eN(0,t)),e.nonpositive=t=>e.check(tN(0,t)),e.multipleOf=(t,r)=>e.check(lN(t,r)),e.step=(t,r)=>e.check(lN(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function rL(e){return CT(tL,e)}var nL=e_("ZodNumberFormat",(e,t)=>{nk.init(e,t),tL.init(e,t)});function iL(e){return OT(nL,e)}function aL(e){return RT(nL,e)}function sL(e){return LT(nL,e)}function oL(e){return PT(nL,e)}function lL(e){return DT(nL,e)}var cL=e_("ZodBoolean",(e,t)=>{ik.init(e,t),nR.init(e,t)});function uL(e){return $T(cL,e)}var dL=e_("ZodBigInt",(e,t)=>{ak.init(e,t),nR.init(e,t),e.gte=(t,r)=>e.check(nN(t,r)),e.min=(t,r)=>e.check(nN(t,r)),e.gt=(t,r)=>e.check(rN(t,r)),e.gte=(t,r)=>e.check(nN(t,r)),e.min=(t,r)=>e.check(nN(t,r)),e.lt=(t,r)=>e.check(eN(t,r)),e.lte=(t,r)=>e.check(tN(t,r)),e.max=(t,r)=>e.check(tN(t,r)),e.positive=t=>e.check(rN(BigInt(0),t)),e.negative=t=>e.check(eN(BigInt(0),t)),e.nonpositive=t=>e.check(tN(BigInt(0),t)),e.nonnegative=t=>e.check(nN(BigInt(0),t)),e.multipleOf=(t,r)=>e.check(lN(t,r));let r=e._zod.bag;e.minValue=r.minimum??null,e.maxValue=r.maximum??null,e.format=r.format??null});function hL(e){return BT(dL,e)}var pL=e_("ZodBigIntFormat",(e,t)=>{sk.init(e,t),dL.init(e,t)});function fL(e){return FT(pL,e)}function mL(e){return HT(pL,e)}var gL=e_("ZodSymbol",(e,t)=>{ok.init(e,t),nR.init(e,t)});function vL(e){return GT(gL,e)}var yL=e_("ZodUndefined",(e,t)=>{lk.init(e,t),nR.init(e,t)});function bL(e){return qT(yL,e)}var _L=e_("ZodNull",(e,t)=>{ck.init(e,t),nR.init(e,t)});function wL(e){return VT(_L,e)}var xL=e_("ZodAny",(e,t)=>{uk.init(e,t),nR.init(e,t)});function EL(){return WT(xL)}var kL=e_("ZodUnknown",(e,t)=>{dk.init(e,t),nR.init(e,t)});function SL(){return ZT(kL)}var AL=e_("ZodNever",(e,t)=>{hk.init(e,t),nR.init(e,t)});function TL(e){return KT(AL,e)}var NL=e_("ZodVoid",(e,t)=>{pk.init(e,t),nR.init(e,t)});function IL(e){return YT(NL,e)}var ML=e_("ZodDate",(e,t)=>{fk.init(e,t),nR.init(e,t),e.min=(t,r)=>e.check(nN(t,r)),e.max=(t,r)=>e.check(tN(t,r));let r=e._zod.bag;e.minDate=r.minimum?new Date(r.minimum):null,e.maxDate=r.maximum?new Date(r.maximum):null});function CL(e){return JT(ML,e)}var jL=e_("ZodArray",(e,t)=>{gk.init(e,t),nR.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(pN(t,r)),e.nonempty=t=>e.check(pN(1,t)),e.max=(t,r)=>e.check(hN(t,r)),e.length=(t,r)=>e.check(fN(t,r)),e.unwrap=()=>e.element});function OL(e,t){return NN(jL,e,t)}function RL(e){let t=e._zod.def.shape;return tP(Object.keys(t))}var LL=e_("ZodObject",(e,t)=>{wk.init(e,t),nR.init(e,t),s_.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>tP(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:SL()}),e.loose=()=>e.clone({...e._zod.def,catchall:SL()}),e.strict=()=>e.clone({...e._zod.def,catchall:TL()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>s_.extend(e,t),e.safeExtend=t=>s_.safeExtend(e,t),e.merge=t=>s_.merge(e,t),e.pick=t=>s_.pick(e,t),e.omit=t=>s_.omit(e,t),e.partial=(...t)=>s_.partial(cP,e,t[0]),e.required=(...t)=>s_.required(yP,e,t[0])});function PL(e,t){let r={type:"object",shape:e??{},...s_.normalizeParams(t)};return new LL(r)}function DL(e,t){return new LL({type:"object",shape:e,catchall:TL(),...s_.normalizeParams(t)})}function $L(e,t){return new LL({type:"object",shape:e,catchall:SL(),...s_.normalizeParams(t)})}var zL=e_("ZodUnion",(e,t)=>{Ek.init(e,t),nR.init(e,t),e.options=t.options});function BL(e,t){return new zL({type:"union",options:e,...s_.normalizeParams(t)})}var UL=e_("ZodDiscriminatedUnion",(e,t)=>{zL.init(e,t),kk.init(e,t)});function FL(e,t,r){return new UL({type:"union",options:t,discriminator:e,...s_.normalizeParams(r)})}var HL=e_("ZodIntersection",(e,t)=>{Sk.init(e,t),nR.init(e,t)});function GL(e,t){return new HL({type:"intersection",left:e,right:t})}var qL=e_("ZodTuple",(e,t)=>{Nk.init(e,t),nR.init(e,t),e.rest=t=>e.clone({...e._zod.def,rest:t})});function VL(e,t,r){let n=t instanceof AE,i=n?r:t;return new qL({type:"tuple",items:e,rest:n?t:null,...s_.normalizeParams(i)})}var WL=e_("ZodRecord",(e,t)=>{Mk.init(e,t),nR.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function ZL(e,t,r){return new WL({type:"record",keyType:e,valueType:t,...s_.normalizeParams(r)})}function KL(e,t,r){let n=z_(e);return n._zod.values=void 0,new WL({type:"record",keyType:n,valueType:t,...s_.normalizeParams(r)})}var YL=e_("ZodMap",(e,t)=>{Ck.init(e,t),nR.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function JL(e,t,r){return new YL({type:"map",keyType:e,valueType:t,...s_.normalizeParams(r)})}var XL=e_("ZodSet",(e,t)=>{Ok.init(e,t),nR.init(e,t),e.min=(...t)=>e.check(uN(...t)),e.nonempty=t=>e.check(uN(1,t)),e.max=(...t)=>e.check(cN(...t)),e.size=(...t)=>e.check(dN(...t))});function QL(e,t){return new XL({type:"set",valueType:e,...s_.normalizeParams(t)})}var eP=e_("ZodEnum",(e,t)=>{Lk.init(e,t),nR.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,n)=>{let i={};for(let a of e){if(!r.has(a))throw Error(`Key ${a} not found in enum`);i[a]=t.entries[a]}return new eP({...t,checks:[],...s_.normalizeParams(n),entries:i})},e.exclude=(e,n)=>{let i={...t.entries};for(let t of e){if(!r.has(t))throw Error(`Key ${t} not found in enum`);delete i[t]}return new eP({...t,checks:[],...s_.normalizeParams(n),entries:i})}});function tP(e,t){let r=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new eP({type:"enum",entries:r,...s_.normalizeParams(t)})}function rP(e,t){return new eP({type:"enum",entries:e,...s_.normalizeParams(t)})}var nP=e_("ZodLiteral",(e,t)=>{Pk.init(e,t),nR.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function iP(e,t){return new nP({type:"literal",values:Array.isArray(e)?e:[e],...s_.normalizeParams(t)})}var aP=e_("ZodFile",(e,t)=>{Dk.init(e,t),nR.init(e,t),e.min=(t,r)=>e.check(uN(t,r)),e.max=(t,r)=>e.check(cN(t,r)),e.mime=(t,r)=>e.check(xN(Array.isArray(t)?t:[t],r))});function sP(e){return zN(aP,e)}var oP=e_("ZodTransform",(e,t)=>{$k.init(e,t),nR.init(e,t),e._zod.parse=(r,n)=>{if("backward"===n.direction)throw new n_(e.constructor.name);r.addIssue=n=>{if("string"==typeof n)r.issues.push(s_.issue(n,r.value,t));else{let t=n;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=r.value),t.inst??(t.inst=e),r.issues.push(s_.issue(t))}};let i=t.transform(r.value,r);return i instanceof Promise?i.then(e=>(r.value=e,r)):(r.value=i,r)}});function lP(e){return new oP({type:"transform",transform:e})}var cP=e_("ZodOptional",(e,t)=>{Bk.init(e,t),nR.init(e,t),e.unwrap=()=>e._zod.def.innerType});function uP(e){return new cP({type:"optional",innerType:e})}var dP=e_("ZodNullable",(e,t)=>{Uk.init(e,t),nR.init(e,t),e.unwrap=()=>e._zod.def.innerType});function hP(e){return new dP({type:"nullable",innerType:e})}function pP(e){return uP(hP(e))}var fP=e_("ZodDefault",(e,t)=>{Fk.init(e,t),nR.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function mP(e,t){return new fP({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():s_.shallowClone(t)}})}var gP=e_("ZodPrefault",(e,t)=>{Gk.init(e,t),nR.init(e,t),e.unwrap=()=>e._zod.def.innerType});function vP(e,t){return new gP({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():s_.shallowClone(t)}})}var yP=e_("ZodNonOptional",(e,t)=>{qk.init(e,t),nR.init(e,t),e.unwrap=()=>e._zod.def.innerType});function bP(e,t){return new yP({type:"nonoptional",innerType:e,...s_.normalizeParams(t)})}var _P=e_("ZodSuccess",(e,t)=>{Wk.init(e,t),nR.init(e,t),e.unwrap=()=>e._zod.def.innerType});function wP(e){return new _P({type:"success",innerType:e})}var xP=e_("ZodCatch",(e,t)=>{Zk.init(e,t),nR.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function EP(e,t){return new xP({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})}var kP=e_("ZodNaN",(e,t)=>{Kk.init(e,t),nR.init(e,t)});function SP(e){return QT(kP,e)}var AP=e_("ZodPipe",(e,t)=>{Yk.init(e,t),nR.init(e,t),e.in=t.in,e.out=t.out});function TP(e,t){return new AP({type:"pipe",in:e,out:t})}var NP=e_("ZodCodec",(e,t)=>{AP.init(e,t),Xk.init(e,t)});function IP(e,t,r){return new NP({type:"pipe",in:e,out:t,transform:r.decode,reverseTransform:r.encode})}var MP=e_("ZodReadonly",(e,t)=>{tS.init(e,t),nR.init(e,t),e.unwrap=()=>e._zod.def.innerType});function CP(e){return new MP({type:"readonly",innerType:e})}var jP=e_("ZodTemplateLiteral",(e,t)=>{nS.init(e,t),nR.init(e,t)});function OP(e,t){return new jP({type:"template_literal",parts:e,...s_.normalizeParams(t)})}var RP=e_("ZodLazy",(e,t)=>{sS.init(e,t),nR.init(e,t),e.unwrap=()=>e._zod.def.getter()});function LP(e){return new RP({type:"lazy",getter:e})}var PP=e_("ZodPromise",(e,t)=>{aS.init(e,t),nR.init(e,t),e.unwrap=()=>e._zod.def.innerType});function DP(e){return new PP({type:"promise",innerType:e})}var $P=e_("ZodFunction",(e,t)=>{iS.init(e,t),nR.init(e,t)});function zP(e){return new $P({type:"function",input:Array.isArray(e?.input)?VL(e?.input):e?.input??OL(SL()),output:e?.output??SL()})}var BP=e_("ZodCustom",(e,t)=>{oS.init(e,t),nR.init(e,t)});function UP(e){let t=new eE({check:"custom"});return t._zod.check=e,t}function FP(e,t){return XN(BP,e??(()=>!0),t)}function HP(e,t={}){return QN(BP,e,t)}function GP(e){return eI(e)}function qP(e,t={error:`Input not instance of ${e.name}`}){let r=new BP({type:"custom",check:"custom",fn:t=>t instanceof e,abort:!0,...s_.normalizeParams(t)});return r._zod.bag.Class=e,r}var VP=(...e)=>rI({Codec:NP,Boolean:cL,String:aR},...e);function WP(e){let t=LP(()=>BL([sR(e),rL(),uL(),wL(),OL(t),ZL(sR(),t)]));return t}function ZP(e,t){return TP(lP(e),t)}var KP,YP={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function JP(e){a_({customError:e})}function XP(){return a_().customError}KP||(KP={});var QP={};function eD(e){return nT(aR,e)}function tD(e){return jT(tL,e)}function rD(e){return zT(cL,e)}function nD(e){return UT(dL,e)}function iD(e){return XT(ML,e)}function aD(){return typeof process<"u"&&process.versions&&process.versions.node?"node":typeof globalThis<"u"&&typeof globalThis.window<"u"&&typeof globalThis.window.document<"u"?"browser":"unknown"}Fs(QP,{string:()=>eD,number:()=>tD,date:()=>iD,boolean:()=>rD,bigint:()=>nD}),a_(AS());class sD{store={};constructor(){typeof globalThis<"u"&&globalThis.window&&globalThis.window.ENV&&(this.store={...globalThis.window.ENV}),typeof globalThis<"u"&&globalThis.__ENV__&&(this.store={...this.store,...globalThis.__ENV__})}get(e){let t=this.store[e];return void 0!==t?String(t):void 0}set(e,t){this.store[e]=t}has(e){return e in this.store}getAll(){return{...this.store}}}class oD{runtime;browserStore;cache=new Map;constructor(){this.runtime=aD(),"browser"===this.runtime&&(this.browserStore=new sD)}getRuntime(){return this.runtime}isNode(){return"node"===this.runtime}isBrowser(){return"browser"===this.runtime}get(e,t){if(this.cache.has(e)){let r=this.cache.get(e);return void 0===r&&void 0!==t?t:r}let r;switch(this.runtime){case"node":typeof process<"u"&&Cs&&(r=Cs[e]);break;case"browser":this.browserStore&&(r=this.browserStore.get(e));break;default:r=void 0}return this.cache.set(e,r),void 0===r&&void 0!==t?t:r}set(e,t){let r=String(t);switch(this.cache.delete(e),this.runtime){case"node":typeof process<"u"&&Cs&&(Cs[e]=r);break;case"browser":this.browserStore&&this.browserStore.set(e,t)}}has(e){return void 0!==this.get(e)}getAll(){switch(this.runtime){case"node":if(typeof process<"u"&&Cs)return{...Cs};break;case"browser":if(this.browserStore)return this.browserStore.getAll()}return{}}getBoolean(e,t=!1){let r=this.get(e);return void 0===r?t:["true","1","yes","on"].includes(r.toLowerCase())}getNumber(e,t){let r=this.get(e);if(void 0===r)return t;let n=Number(r);return isNaN(n)?t:n}clearCache(){this.cache.clear()}}var lD=null;function cD(e,t){return(lD||(lD=new oD),lD).get(e,t)}aD();class uD{globalStore;constructor(e){this.globalStore=e}clear(){console.clear()}filterByLabel(e){(function(e,t){return t.filter(t=>t.data?.label?.name===e)})(e,this.globalStore.cache).forEach(e=>{ED(e)})}filterByNamespace(...e){(function(e,t){return t.filter(t=>!!t.data?.namespace&&t.data.namespace.map(t=>e.includes(t)).includes(!0))})(e,this.globalStore.cache).forEach(e=>{ED(e)})}filterByLevel(e){(function(e,t){return t.filter(t=>{let r=kD(t.configuration.levels,e);return void 0!==t.data?.level&&SD("exclude",r,t.data.level)})})(e,this.globalStore.cache).forEach(e=>{ED(e)})}renderAll(){this.globalStore.cache.forEach(e=>{ED(e)})}}class dD{config;pidCounter=1;labels=new Map;_listenerCounter=0;_levelsToListeners=new Map;_cache=[];constructor(e={}){this.config=e}get cache(){return this._cache}get configuration(){return this.config}get pid(){let e=this.pidCounter;return this.pidCounter++,e}get tools(){return new uD(this)}addLogToCache(e){this._cache.length<(this.config.cacheSize??300)&&this._cache.push(e)}clearCache(){this._cache=[]}getLabel(e){return this.labels.get(e)}setLabel(e,t){this.labels.set(e,t)}addListener(e,t){let r=this._listenerCounter+=1;return kD({...KD.levels,...this.config.levels??{}},e).forEach(e=>{this._levelsToListeners.has(e)?this._levelsToListeners.get(e).set(r,t):this._levelsToListeners.set(e,new Map([[r,t]]))}),r}removeListener(e){this._levelsToListeners.forEach(t=>{t.delete(e)})}getListeners(e){return Array.from(this._levelsToListeners.get(e)?.values()??[])}}function hD(e){let t=globalThis.$adzeGlobal;if(function(e){return e instanceof dD}(t))return t;let r=new dD(e);return globalThis.$adzeGlobal=r,r}function pD(){return typeof window<"u"&&typeof window.location<"u"&&typeof window.navigator.userAgent<"u"&&!(typeof Deno<"u")}function fD(){let e=globalThis;return!!pD()&&e.navigator.userAgent.includes("Firefox")}function mD(e){return"[object String]"===Object.prototype.toString.call(e)}function gD(e){return null!==e&&"number"==typeof e&&!isNaN(Number(e))}function vD(e){return WD.includes(e)}function yD(e){return e.every(e=>mD(e))}var bD=$s(Qf(),1),_D=bD.default??bD;function wD(e){return Object.values(e).map(e=>e.level)}function xD(e,t,r){return e.filter(e=>e>=t&&e<=r)}function ED(e){e.data&&console[e.data.method](...e.data.message)}function kD(e,t){if("*"===t)return Object.values(e).map(e=>e.level);if(mD(t))return[e[t].level];if(gD(t))return[t];if(function(e){return Array.isArray(e)&&3===e.length&&"-"===e[1]}(t)){if(yD(t)){let r=e[t[0]].level,n=e[t[2]].level;return xD(wD(e),r,n)}return xD(wD(e),t[0],t[2])}return Array.isArray(t)&&yD(t)?t.map(t=>e[t].level):t}function SD(e,t,r){return 0!==t.length&&("include"===e?!t.includes(r):t.includes(r))}function AD(e,t){return 0!==e.length&&(e.length>0&&0===t.length||!t.map(t=>e.includes(t)).includes(!0))}function TD(e,t){return 0!==e.length&&(e.length>0&&0===t.length||t.map(t=>e.includes(t)).includes(!0))}var ND="object"==typeof self?self:globalThis,ID=e=>((e,t)=>{let r=(t,r)=>(e.set(r,t),t),n=i=>{if(e.has(i))return e.get(i);let[a,s]=t[i];switch(a){case 0:case-1:return r(s,i);case 1:{let e=r([],i);for(let t of s)e.push(n(t));return e}case 2:{let e=r({},i);for(let[t,r]of s)e[n(t)]=n(r);return e}case 3:return r(new Date(s),i);case 4:{let{source:e,flags:t}=s;return r(new RegExp(e,t),i)}case 5:{let e=r(new Map,i);for(let[t,r]of s)e.set(n(t),n(r));return e}case 6:{let e=r(new Set,i);for(let t of s)e.add(n(t));return e}case 7:{let{name:e,message:t}=s;return r(new ND[e](t),i)}case 8:return r(BigInt(s),i);case"BigInt":return r(Object(BigInt(s)),i)}return r(new ND[a](s),i)};return n})(new Map,e)(0),MD="",{toString:CD}={},{keys:jD}=Object,OD=e=>{let t=typeof e;if("object"!==t||!e)return[0,t];let r=CD.call(e).slice(8,-1);switch(r){case"Array":return[1,MD];case"Object":return[2,MD];case"Date":return[3,MD];case"RegExp":return[4,MD];case"Map":return[5,MD];case"Set":return[6,MD]}return r.includes("Array")?[1,r]:r.includes("Error")?[7,r]:[2,r]},RD=([e,t])=>0===e&&("function"===t||"symbol"===t),LD=(e,{json:t,lossy:r}={})=>{let n=[];return((e,t,r,n)=>{let i=(e,t)=>{let i=n.push(e)-1;return r.set(t,i),i},a=n=>{if(r.has(n))return r.get(n);let[s,o]=OD(n);switch(s){case 0:{let t=n;switch(o){case"bigint":s=8,t=n.toString();break;case"function":case"symbol":if(e)throw TypeError("unable to serialize "+o);t=null;break;case"undefined":return i([-1],n)}return i([s,t],n)}case 1:{if(o)return i([o,[...n]],n);let e=[],t=i([s,e],n);for(let r of n)e.push(a(r));return t}case 2:{if(o)switch(o){case"BigInt":return i([o,n.toString()],n);case"Boolean":case"Number":case"String":return i([o,n.valueOf()],n)}if(t&&"toJSON"in n)return a(n.toJSON());let r=[],l=i([s,r],n);for(let t of jD(n))!e&&RD(OD(n[t]))||r.push([a(t),a(n[t])]);return l}case 3:return i([s,n.toISOString()],n);case 4:{let{source:e,flags:t}=n;return i([s,{source:e,flags:t}],n)}case 5:{let t=[],r=i([s,t],n);for(let[i,s]of n)(e||!RD(OD(i))&&!RD(OD(s)))&&t.push([a(i),a(s)]);return r}case 6:{let t=[],r=i([s,t],n);for(let i of n)!e&&RD(OD(i))||t.push(a(i));return r}}let{message:l}=n;return i([s,{name:o,message:l}],n)};return a})(!(t||r),!!t,new Map,n)(e),n},PD="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?ID(LD(e,t)):structuredClone(e):(e,t)=>ID(LD(e,t));function DD(e,t,r,n){let{formatters:i,middleware:a=[],...s}=t.exportValues();return class extends e{_cfg=new YD({...PD(s),formatters:{...i},middleware:[...a]});_modifierData=PD(r);modifierQueue=[...n]}}function $D([e,t]){return`${e}s ${t/1e6}ms`}function zD(e){let t=.001*performance.now(),r=Math.floor(t),n=Math.floor(t%1*1e9);if(void 0===e)return[r,n];let i=r-e[0],a=n-e[1];return a<0&&(i-=1,a+=1e9),[i,a]}function BD(e){let t=e=>`${Math.floor(Math.abs(e))}`.padStart(2,"0"),r=-e.getTimezoneOffset(),n=`${r>=0?"+":"-"}${t(r/60)}:${t(r%60)}`;return`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}${n}`}class UD{cfg;level;timestampFormatFunction=e=>BD(e);constructor(e,t){this.cfg=e,this.level=t}get timestampFormatter(){return this.cfg.timestampFormatter?this.cfg.timestampFormatter:this.timestampFormatFunction}print(e,t,r){if(this.level.level>function(e){return gD(e.activeLevel)?e.activeLevel:e.levels[e.activeLevel].level}(this.cfg))return[];if(this.failsFilters(e))return[];if(!0===e.assertion)return[];if(!1===e.if)return[];if(e.method&&!function(e){return qD.includes(e)}(e.method)&&function(e){return ZD.includes(e)}(e.method)&&vD(e.method))return r;let n=pD()?this.formatBrowser(e,t,r):this.formatServer(e,t,r);return e.stacktrace&&n.push(e.stacktrace),n}failsFilters(e){return!!this.failsLevelSelector()||(!!this.failsNamespacesFilter(e)||!!this.failsLabelsFilter(e))}failsLevelSelector(){if(void 0===this.cfg.filters?.levels)return!1;let e=kD(this.cfg.levels,this.cfg.filters.levels.values);return!!SD(this.cfg.filters.levels.type,e,this.level.level)}failsNamespacesFilter(e){if(void 0===this.cfg.filters?.namespaces)return!1;if(this.cfg.filters.namespaces.values.length>0&&void 0===e.namespace)return!0;if("include"===this.cfg.filters.namespaces.type){let t=e.namespace??[];return AD(this.cfg.filters.namespaces.values,t)}let t=e.namespace??[];return TD(this.cfg.filters.namespaces.values,t)}failsLabelsFilter(e){if(void 0===this.cfg.filters?.labels)return!1;if(this.cfg.filters.labels.values.length>0&&void 0===e.label)return!0;let t=e.label?[e.label.name]:[];return"include"===this.cfg.filters.labels.type?AD(this.cfg.filters.labels.values,t):TD(this.cfg.filters.labels.values,t)}}var FD=class extends UD{timestampFormatFunction=e=>function(e){let t=(e,t=2)=>String(e).padStart(t,"0"),r=t(e.getDate()),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],i=e.getFullYear(),a=t(e.getHours()),s=t(e.getMinutes()),o=t(e.getSeconds()),l=-e.getTimezoneOffset(),c=l>=0?"+":"-",u=Math.abs(l);return`${r}/${n}/${i}:${a}:${s}:${o} ${c}${t(Math.floor(u/60))}${t(u%60)}`}(e);formatBrowser(e,t,r){return this.formatMessage(e,t,r)}formatServer(e,t,r){return this.formatMessage(e,t,r)}formatMessage(e,t,r){return void 0===this.cfg.meta.hostname&&console.warn(Error("Adze: 'hostname' is required for the common log format. Please provide this value in your log's meta data.")),[`${this.cfg.meta.hostname} ${this.cfg.meta.ident??"-"} ${this.cfg.meta.user??"-"} [${t}] ${r[0]}`]}};var HD=class extends UD{timestampFormatFunction=e=>BD(e);formatBrowser(e,t,r){return this.formatMessage(e,t,r)}formatServer(e,t,r){return this.formatMessage(e,t,r)}formatMessage(e,t,r){let n=hD(),i=[...r],a=i.shift();if(function(e){return"string"==typeof e.name&&"string"==typeof e.hostname}(this.cfg.meta)){let{src:r,err:s,req_id:o,req:l,res:c,latency:u,hostname:d,name:h,...p}=this.cfg.meta,{namespace:f,label:m}=e,g={v:1,level:this.level.level,levelName:this.level.levelName,name:h,hostname:d,msg:a,args:i,pid:n.pid,time:t,meta:Object.keys(p).length>0?p:void 0,namespace:f,label:m?.name,src:r,err:s,req_id:o,req:l,res:c,latency:u};return[JSON.stringify(g)]}return console.warn(Error("Adze: Required fields are missing from the log meta for generating a JSON log.")),[...i]}};var GD=class extends UD{formatBrowser(e,t,r){let n=this.formatLeader(),i=this.formatMeta(e,t);return this.cfg.withEmoji?[n,"font-size: 12px;",this.level.style,i,...r]:[n,this.level.style,i,...r]}formatServer(e,t,r){let n=`${function(e,t=!1,r){let n=(t&&r?9+r.length:9)-e.length,i=e;for(let a=0;a<=n;a+=1)i+=" ";return i}(this.formatLeader(!1),this.cfg.withEmoji,this.level.emoji)} `,i=this.formatMeta(e,t),a=function(e,t){return t.reduce((e,t)=>_D[t](e),e)}(n,this.level.terminalStyle);return[a,i,...r]}formatLeader(e=!0){let t=e?"%c":"",r=" "+function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(this.level.levelName);return this.cfg.withEmoji?`${t}${this.formatEmoji(e)}${t}${r}`:`${t}${r}`}formatEmoji(e){let t=e?" ":"";return this.level.emoji?`${this.level.emoji}${t}`:""}formatMeta(e,t){let r=this.cfg.showTimestamp?`${t} `:"",n=function(e){return e&&e.length>0?e.reduce((e,t)=>`${e}#${t} `,""):""}(e.namespace),i=function(e){return e?`[${e.name}] `:""}(e.label),a=this.formatTime(e),s=function(e){return void 0!==e?`(Count: ${e}) `:""}(e.label?.count),o=function(e,t){return void 0===e||e?"":(t?" ":"")+"Assertion failed:"}(e.assertion,this.cfg.withEmoji),l=function(e,t){return void 0!==e&&e?(t?" ":"")+"Expression passed:":""}(e.if,this.cfg.withEmoji);return r+n+i+a+s+(""!==o?o:""!==l?l:"")}formatTime(e){let t=this.cfg.withEmoji?" ":"Time elapsed: ";return e.timeNow?`(${t}${e.timeNow})`:e.label?.timeElapsed?`(${t}${e.label.timeElapsed})`:""}};var qD=["group","groupCollapsed"],VD=["dir","dirxml","table",...qD],WD=["error","warn","info","log","debug",...VD],ZD=[...VD,"clear","groupEnd"],KD={activeLevel:"log",cache:!1,cacheSize:300,dump:!1,format:"pretty",showTimestamp:!1,silent:!1,withEmoji:!1,levels:{alert:function(e={}){return{levelName:"alert",level:0,style:"padding-right: 24px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #fc8585, #fc2323); color: #fff; border-color: #b70101;",terminalStyle:["white","bold","bgRed"],method:"error",emoji:"",...e}}(),error:function(e={}){return{levelName:"error",level:1,style:"padding-right: 24px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #fff, #ffd1d1); color: #a4000f; border-color: #e3bbbb;",terminalStyle:["white","bgRed"],method:"error",emoji:"",...e}}(),warn:function(e={}){return{levelName:"warn",level:2,style:`font-size: 12px; border-radius: 4px;  background: linear-gradient(to right, #fff, #fff0a8); color: #715100; border-color: #e3d696; padding-right: ${fD()?"44px":"30px"};`,terminalStyle:["white","bgYellow"],method:"warn",emoji:"",...e}}(),info:function(e={}){return{levelName:"info",level:3,style:"padding-right: 44px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #d8ebff, #b2d7ff); color: #465464; border-color: #96b5d7;",terminalStyle:["white","bgBlue"],method:"info",emoji:"",...e}}(),fail:function(e={}){return{levelName:"fail",level:4,style:"padding-right: 44px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #ffe8e8, #ffd1d1); color: #a4000f; border-color: #e3bbbb;",terminalStyle:["white","bgRed"],method:"info",emoji:"",...e}}(),success:function(e={}){return{levelName:"success",level:5,style:"font-size: 12px; border-radius: 4px; padding-right: 22px; background: linear-gradient(to right, #e6f6e4, #ceedc9); color: #4e594d; border-color: #b7d1b3;",terminalStyle:["white","bgGreen"],method:"info",emoji:"",...e}}(),log:function(e={}){return{levelName:"log",level:6,style:"font-size: 12px; border-radius: 4px; padding-right: 51px; background: linear-gradient(to right, #ecedef, #d9dce0); color: #333435; border-color: #bfc1c5;",terminalStyle:["white","bgBlackBright"],method:"log",emoji:"",...e}}(),debug:function(e={}){return{levelName:"debug",level:7,style:"font-size: 12px; padding-right: 36px; border-right: 1px solid #d9dce0; color: #465464; border-color: #999999;",terminalStyle:["white","bgBlack"],method:"debug",emoji:"",...e}}(),verbose:function(e={}){return{levelName:"verbose",level:8,style:"font-size: 12px; padding-right: 22px; color: #999999;",terminalStyle:["black","italic"],method:"debug",emoji:"",...e}}()},formatters:{default:GD,pretty:GD,standard:class extends UD{timestampFormatFunction=e=>BD(e);formatBrowser(e,t,r){return this.formatMessage(t,e,r)}formatServer(e,t,r){return this.formatMessage(t,e,r)}formatMessage(e,t,r){let n="",{appname:i,hostname:a,port:s}=this.cfg.meta,o=gD(s)?`/${s}`:"";return n=`${mD(i)?`${i}${o}`:""}${mD(a)?` on ${a}: `:""}${this.formatNamespace(t.namespace)}${t.label?`[${t.label.name}] `:""}`,[`[${e}] ${this.level.levelName.toUpperCase()}: ${n}${r[0]} `,r.map(e=>function(e){return"object"==typeof e&&null!==e}(e)?JSON.stringify(e):e).slice(1).join(" ")]}formatNamespace(e){return e&&e.length>0?`${e.reduce((t,r,n)=>n===e.length-1?`${t}${r}`:`${t}${r}/`,"")} `:""}},common:FD,json:HD}};class YD{logCfg;glblCfg;constructor(e){this.logCfg=e??{},this.glblCfg=globalThis.$adzeGlobal?.configuration}updateConfiguration(e){this.logCfg=e}get activeLevel(){return this.glblCfg?.activeLevel??this.logCfg.activeLevel??KD.activeLevel}set activeLevel(e){this.logCfg.activeLevel=e}get cache(){return this.glblCfg?.cache??this.logCfg.cache??KD.cache}set cache(e){this.logCfg.cache=e}get cacheSize(){return this.glblCfg?.cacheSize??this.logCfg.cacheSize??KD.cacheSize}set cacheSize(e){this.logCfg.cacheSize=e}get dump(){return this.glblCfg?.dump??this.logCfg.dump??KD.dump}set dump(e){this.logCfg.dump=e}get meta(){return{...this.logCfg.meta,...this.glblCfg?.meta}}set meta(e){this.logCfg.meta=e}get silent(){return this.glblCfg?.silent??this.logCfg.silent??KD.silent}set silent(e){this.logCfg.silent=e}get showTimestamp(){return this.glblCfg?.showTimestamp??this.logCfg.showTimestamp??KD.showTimestamp}set showTimestamp(e){this.logCfg.showTimestamp=e}get withEmoji(){return this.glblCfg?.withEmoji??this.logCfg.withEmoji??KD.withEmoji}set withEmoji(e){this.logCfg.withEmoji=e}get format(){return this.glblCfg?.format??this.logCfg.format??KD.format}set format(e){this.logCfg.format=e}get levels(){return{...KD.levels,...this.logCfg.levels??{},...this.glblCfg?.levels??{}}}set levels(e){this.logCfg.levels=e}get middleware(){return[...this.glblCfg?.middleware??[],...this.logCfg.middleware??[]]}set middleware(e){this.logCfg.middleware=e}get filters(){return this.glblCfg?.filters??this.logCfg.filters}set filters(e){this.logCfg.filters=e}get timestampFormatter(){return this.glblCfg?.timestampFormatter??this.logCfg.timestampFormatter}set timestampFormatter(e){this.logCfg.timestampFormatter=e}get formatters(){return{...KD.formatters,...this.logCfg.formatters??{},...this.glblCfg?.formatters??{}}}set formatters(e){this.logCfg.formatters=e}exportValues(){return{activeLevel:this.logCfg.activeLevel,cache:this.logCfg.cache,cacheSize:this.logCfg.cacheSize,dump:this.logCfg.dump,meta:this.logCfg.meta,silent:this.logCfg.silent,showTimestamp:this.logCfg.showTimestamp,withEmoji:this.logCfg.withEmoji,format:this.logCfg.format,levels:this.logCfg.levels,middleware:this.logCfg.middleware,filters:this.logCfg.filters,timestampFormatter:this.logCfg.timestampFormatter,formatters:this.logCfg.formatters}}}class JD{globalStore;_cfg;_modifierData;_data;modifierQueue=[];constructor(e,t){this.globalStore=hD(e),this._modifierData=t??{},this._cfg=new YD(e),this.doHook(e=>{e.constructed&&e.constructed(this)})}get data(){return this._data}get modifierData(){return this._modifierData}get configuration(){return this._cfg}alert(...e){this.terminate("alert",e)}static alert(...e){(new this).alert(...e)}error(...e){this.terminate("error",e)}static error(...e){(new this).error(...e)}warn(...e){this.terminate("warn",e)}static warn(...e){(new this).warn(...e)}info(...e){this.terminate("info",e)}static info(...e){(new this).info(...e)}fail(...e){this.terminate("fail",e)}static fail(...e){(new this).fail(...e)}success(...e){this.terminate("success",e)}static success(...e){(new this).success(...e)}log(...e){this.terminate("log",e)}static log(e,...t){(new this).log(e,...t)}debug(...e){this.terminate("debug",e)}static debug(...e){(new this).debug(...e)}verbose(...e){this.terminate("verbose",e)}static verbose(...e){(new this).verbose(...e)}clear(){console.clear()}static clear(){console.clear()}clr(){console.clear()}static clr(){console.clear()}custom(e,...t){return this._cfg.levels[e]?(this.terminate(e,t),this):(console.warn(Error("Custom log level not found in configuration.")),this)}static custom(e,...t){return(new this).custom(e,...t)}seal(e){return e&&this._cfg.updateConfiguration(e),DD(JD,this._cfg,this.modifierData,this.modifierQueue)}static seal(e){return(new this).seal(e)}sealTag(e,t){return this._cfg=new YD({...this._cfg.exportValues(),...t}),(t,...r)=>{let n=String.raw({raw:t},...r),i=DD(JD,this._cfg,this.modifierData,this.modifierQueue),a=e;(function(e){return"function"==typeof e})(i[a])&&i[a](n)}}static sealTag(e,t){return(new this).sealTag(e,t)}thread(e,t){this.runModifierQueue(),this._modifierData.label&&(this._modifierData.label.context||(this._modifierData.label.context={}),this._modifierData.label.context={...this._modifierData.label.context,[e]:t})}static thread(e,t){(new this).thread(e,t)}assert(e){return this.modifierQueue.push(["assert",t=>(t.assertion=e,t)]),this}static assert(e){return(new this).assert(e)}get closeThread(){return this.modifierQueue.push(["closeThread",e=>(e.label?.context&&(e.label.context=void 0),e)]),this}static get closeThread(){return(new this).closeThread}get count(){return this.modifierQueue.push(["count",e=>(e.label&&(e.label.count=void 0!==e.label.count?e.label.count+1:1),e)]),this}static get count(){return(new this).count}get countClear(){return this.modifierQueue.push(["countClear",e=>(e.label&&delete e.label.count,e)]),this}static get countClear(){return(new this).countClear}get countReset(){return this.modifierQueue.push(["countReset",e=>(e.label&&(e.label.count=0),e)]),this}static get countReset(){return(new this).countReset}get dir(){return this.modifierQueue.push(["dir",e=>(e.method="dir",e)]),this}static get dir(){return(new this).dir}get dirxml(){return this.modifierQueue.push(["dirxml",e=>(e.method="dirxml",e)]),this}static get dirxml(){return(new this).dirxml}get dump(){return this.modifierQueue.push(["dump",(e,t)=>(t._cfg.dump=!0,e)]),this}static get dump(){return(new this).dump}format(e){return this.modifierQueue.push(["format",(t,r)=>Object.keys(r._cfg.formatters).includes(e)?(r._cfg.format=e,t):(console.warn(Error(`Adze: Formatter "${e}" not found in configuration.`)),t)]),this}static format(e){return(new this).format(e)}get group(){return this.modifierQueue.push(["group",e=>(e.method="group",e)]),this}static get group(){return(new this).group}get groupCollapsed(){return this.modifierQueue.push(["groupCollapsed",e=>(e.method="groupCollapsed",e)]),this}static get groupCollapsed(){return(new this).groupCollapsed}get groupEnd(){return this.modifierQueue.push(["groupEnd",e=>(e.method="groupEnd",e)]),this}static get groupEnd(){return(new this).groupEnd}if(e){return this.modifierQueue.push(["if",t=>(t.if=e,t)]),this}static if(e){return(new this).if(e)}test(e){return this.if(e)}static test(e){return(new this).if(e)}label(e){return this.modifierQueue.unshift(["label",t=>{let r=this.globalStore.getLabel(e)??{name:e};return t.label=r,this.globalStore.setLabel(e,r),t}]),this}static label(e){return(new this).label(e)}meta(e){return this.modifierQueue.push(["meta",(t,r)=>(r._cfg.meta={...r._cfg.meta,...e},t)]),this}static meta(e){return(new this).meta(e)}namespace(...e){return this.modifierQueue.push(["namespace",t=>{let r=t.namespace??[];return t.namespace=r.length>0?[...r,...e]:e,t}]),this}static namespace(...e){return(new this).namespace(...e)}ns(...e){return this.namespace(...e)}static ns(...e){return(new this).namespace(...e)}get silent(){return this.modifierQueue.push(["silent",(e,t)=>(t._cfg.silent=!0,e)]),this}static get silent(){return(new this).silent}get table(){return this.modifierQueue.push(["table",e=>(e.method="table",e)]),this}static get table(){return(new this).table}get time(){return this.modifierQueue.push(["time",e=>{let t=zD();return e.label&&(e.label.timeStart=t),e}]),this}static get time(){return(new this).time}get timeEnd(){return this.modifierQueue.push(["timeEnd",e=>(e.label?.timeStart&&(e.label.timeElapsed=$D(zD(e.label.timeStart))),e)]),this}static get timeEnd(){return(new this).timeEnd}get timeNow(){return this.modifierQueue.push(["timeNow",e=>(e.timeNow=$D(zD()),e)]),this}static get timeNow(){return(new this).timeNow}get timestamp(){return this.modifierQueue.push(["timestamp",(e,t)=>(t._cfg.showTimestamp=!0,e)]),this}static get timestamp(){return(new this).timestamp}get trace(){return this.modifierQueue.push(["trace",e=>(e.stacktrace=Error().stack?.replace(/^Error\n/,"\n"),e)]),this}static get trace(){return(new this).trace}get withEmoji(){return this.modifierQueue.push(["withEmoji",(e,t)=>(t._cfg.withEmoji=!0,e)]),this}static get withEmoji(){return(new this).withEmoji}print(e){(function(){let e=!1;return pD()&&(e="test"===new URLSearchParams(globalThis.location.search).get("ADZE_ENV")),"test"===globalThis.$ADZE_ENV||e})()||e.silent||e.message.length<1||(vD(e.method)?console[e.method](...e.message):console[e.method]())}terminate(e,t){this.doHook(r=>{r.beforeTerminated&&r.beforeTerminated(this,e,t)}),this.runModifierQueue();let r=this.getLevelConfig(e),n=new(this.selectFormatter(this._cfg.format))(this._cfg,r),i=n.timestampFormatter(new Date),a=function(e){return e.filter(e=>""!==e)}(n.print(this.modifierData,i,t));this._cfg.dump&&this.modifierData.label?.context&&a.push(this.modifierData.label.context),this.doHook(e=>{e.beforeFormatApplied&&(a=e.beforeFormatApplied(this,this._cfg.format,a))});let{activeLevel:s,cache:o,cacheSize:l,dump:c,format:u,meta:d,showTimestamp:h,silent:p,withEmoji:f}=this._cfg,m={activeLevel:s,cache:o,cacheSize:l,dump:c,format:u,meta:d,showTimestamp:h,silent:p,withEmoji:f,...r,...this._modifierData,terminator:e,args:t,timestamp:i,message:a};this.doHook(e=>{e.afterFormatApplied&&e.afterFormatApplied(this,this._cfg.format,a)}),this._data=m,this._cfg.cache&&this.globalStore.addLogToCache(this),this.doHook(e=>{e.beforePrint&&e.beforePrint(this)}),this.print(this._data),this.doHook(r=>{r.afterTerminated&&r.afterTerminated(this,e,t)}),this.globalStore.getListeners(r.level).forEach(e=>{e(this)})}selectFormatter(e){return this._cfg.formatters[e]}getLevelConfig(e){return this._cfg.levels[e]}runModifierQueue(){this.modifierQueue.forEach(([e,t])=>{let r=t(this.modifierData,this);this.doHook(t=>{t.beforeModifierApplied&&t.beforeModifierApplied(this,e,r)}),this._modifierData=r,this.doHook(t=>{t.afterModifierApplied&&t.afterModifierApplied(this,e,r)})})}doHook(e){this._cfg.middleware?.forEach(t=>{e(t)})}}var XD=JD,QD={trace:10,verbose:10,debug:20,success:27,progress:28,log:29,info:30,warn:40,error:50,fatal:60,alert:60},e$={10:"trace",20:"debug",27:"success",28:"progress",29:"log",30:"info",40:"warn",50:"error",60:"fatal"};function t$(e,t){return(QD[e.toLowerCase()]||30)>=(QD[t.toLowerCase()]||30)}function r$(e){try{let t=new WeakSet;return JSON.stringify(e,(e,r)=>{if("object"==typeof r&&null!==r){if(t.has(r))return"[Circular]";t.add(r)}return r})}catch{return String(e)}}function n$(e){if(!e)return!1;let t=e.toLowerCase().trim();return"true"===t||"1"===t||"yes"===t||"on"===t}var i$=cD("LOG_LEVEL")||"info",a$=n$(cD("LOG_JSON_FORMAT")),s$=n$(cD("LOG_TIMESTAMPS")??"true");var o$=function(e=100){let t=[];return{write(r){t.push(r),t.length>e&&t.shift()},clear(){t.length=0},recentLogs:()=>t.map(e=>`${s$?new Date(e.time).toISOString():""} ${e$[e.level??30]||"info"} ${e.msg}`.trim()).join("\n")}}(),l$=()=>{let e=i$.toLowerCase();return"trace"===e?"verbose":"debug"===e?"debug":"log"===e?"log":"info"===e?"info":"warn"===e?"warn":"error"===e?"error":"fatal"===e?"alert":"info"},c$=l$(),u$={alert:{levelName:"alert",level:0,style:"font-size: 12px; color: #ff0000;",terminalStyle:["bgRed","white","bold"],method:"error",emoji:""},error:{levelName:"error",level:1,style:"font-size: 12px; color: #ff0000;",terminalStyle:["bgRed","whiteBright","bold"],method:"error",emoji:""},warn:{levelName:"warn",level:2,style:"font-size: 12px; color: #ffaa00;",terminalStyle:["bgYellow","black","bold"],method:"warn",emoji:""},info:{levelName:"info",level:3,style:"font-size: 12px; color: #0099ff;",terminalStyle:["cyan"],method:"info",emoji:""},fail:{levelName:"fail",level:4,style:"font-size: 12px; color: #ff6600;",terminalStyle:["red","underline"],method:"error",emoji:""},success:{levelName:"success",level:5,style:"font-size: 12px; color: #00cc00;",terminalStyle:["green"],method:"log",emoji:""},log:{levelName:"log",level:6,style:"font-size: 12px; color: #888888;",terminalStyle:["white"],method:"log",emoji:""},debug:{levelName:"debug",level:7,style:"font-size: 12px; color: #9b59b6;",terminalStyle:["gray","dim"],method:"debug",emoji:""},verbose:{levelName:"verbose",level:8,style:"font-size: 12px; color: #666666;",terminalStyle:["gray","dim","italic"],method:"debug",emoji:""}},d$=function(e){return globalThis.$adzeGlobal=new dD(e),globalThis.$adzeGlobal}({activeLevel:c$,format:a$?"json":"pretty",timestampFormatter:s$?void 0:()=>"",withEmoji:!1,levels:u$});d$.addListener("*",e=>{try{let t=e.data,r=Array.isArray(t?.message)?t.message.map(e=>"string"==typeof e?e:r$(e)).join(" "):"string"==typeof t?.message?t.message:"",n={time:Date.now(),level:"number"==typeof t?.level?t.level:void 0,msg:r};o$.write(n)}catch{}});var h$=function e(t=!1){let{level:r,base:n,maxMemoryLogs:i}=function(e){let t,r=i$,n={};if("object"==typeof e&&null!==e){"level"in e&&(r=e.level),"maxMemoryLogs"in e&&"number"==typeof e.maxMemoryLogs&&(t=e.maxMemoryLogs);let{level:i,maxMemoryLogs:a,...s}=e;n=s}return{level:r,base:n,maxMemoryLogs:t}}(t);if("number"==typeof i&&i>0&&o$.clear(),"object"==typeof t&&t&&"__forceType"in t&&"browser"===t.__forceType){let t=("number"==typeof r?"info":r||i$).toLowerCase(),i=(...e)=>e.map(e=>"string"==typeof e?e:e instanceof Error?e.message:r$(e)).join(" "),a=(e,...r)=>{if(!t$(e,t))return;let n=i(...r),a="fatal"===e?"error":"trace"===e||"verbose"===e?"debug":"success"===e||"progress"===e?"info":"log"===e?"log":console[e]?e:"log";"function"==typeof console[a]&&console[a](n)},s=(e,t,...r)=>"string"==typeof e?void 0!==t?[e,t,...r]:[e,...r]:e instanceof Error?void 0!==t?[e.message,t,...r]:[e.message,...r]:void 0!==t?[t,e,...r]:[e,...r];return{level:t,trace:(e,t,...r)=>a("trace",...s(e,t,...r)),debug:(e,t,...r)=>a("debug",...s(e,t,...r)),info:(e,t,...r)=>a("info",...s(e,t,...r)),warn:(e,t,...r)=>a("warn",...s(e,t,...r)),error:(e,t,...r)=>a("error",...s(e,t,...r)),fatal:(e,t,...r)=>a("fatal",...s(e,t,...r)),success:(e,t,...r)=>a("success",...s(e,t,...r)),progress:(e,t,...r)=>a("progress",...s(e,t,...r)),log:(e,t,...r)=>a("log",...s(e,t,...r)),clear:()=>{"function"==typeof console.clear&&console.clear()},child:r=>e({level:t,...n,...r,__forceType:"browser"})}}let a=function(e){let t=XD,r=[];"string"==typeof e.namespace&&r.push(e.namespace),Array.isArray(e.namespaces)&&r.push(...e.namespaces),r.length>0&&(t=t.ns(...r));let n={...e};if(delete n.namespace,delete n.namespaces,a$&&(n.name||(n.name="elizaos"),!n.hostname)){let e="unknown";if(typeof process<"u"&&process.platform)try{e=(vc(),Bs(Ql)).hostname()}catch{e="localhost"}else typeof window<"u"&&window.location&&(e=window.location.hostname||"browser");n.hostname=e}let i={activeLevel:l$(),format:a$?"json":"pretty",timestampFormatter:s$?void 0:()=>"",withEmoji:!1,levels:u$};return t.meta(n).seal(i)}(n),s=("number"==typeof r?"info":r||i$).toLowerCase(),o=(e,...t)=>{if(!t$(e,s))return;try{let r="";t.length>0&&(r=t.map(e=>"string"==typeof e?e:e instanceof Error?e.message:r$(e)).join(" ")),n.namespace&&(r=`#${n.namespace}  ${r}`);let i={time:Date.now(),level:QD[e.toLowerCase()]||QD.info,msg:r};o$.write(i)}catch{}let r=e,i=t;"fatal"===e?r="alert":"progress"===e?(r="info",i=["[PROGRESS]",...t]):"success"===e?(r="info",i=["[SUCCESS]",...t]):"trace"===e&&(r="verbose");try{a[r](...i)}catch(o){console.log(`[${e.toUpperCase()}]`,...t)}},l=(e,t,...r)=>"string"==typeof e?void 0!==t?[e,t,...r]:[e,...r]:e instanceof Error?void 0!==t?[e.message,{error:e},t,...r]:[e.message,{error:e},...r]:void 0!==t?[t,e,...r]:[e,...r];return{level:s,trace:(e,t,...r)=>o("verbose",...l(e,t,...r)),debug:(e,t,...r)=>o("debug",...l(e,t,...r)),info:(e,t,...r)=>o("info",...l(e,t,...r)),warn:(e,t,...r)=>o("warn",...l(e,t,...r)),error:(e,t,...r)=>o("error",...l(e,t,...r)),fatal:(e,t,...r)=>o("fatal",...l(e,t,...r)),success:(e,t,...r)=>o("success",...l(e,t,...r)),progress:(e,t,...r)=>o("progress",...l(e,t,...r)),log:(e,t,...r)=>o("log",...l(e,t,...r)),clear:()=>{try{"function"==typeof console?.clear&&console.clear()}catch{}o$.clear()},child:t=>e({level:s,...n,...t})}}(),p$=h$,f$=jO.string().regex(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,"Invalid UUID format");function m$(e){let t=f$.safeParse(e);return t.success?t.data:null}var g$=e=>e.startsWith("image/")?"image":e.startsWith("video/")?"video":e.startsWith("audio/")?"audio":e.includes("pdf")||e.includes("document")||e.startsWith("text/")?"document":void 0,v$=jO.string().regex(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,"Invalid UUID format").describe("Unique identifier for the character in UUID format"),y$=jO.object({id:jO.string().describe("Unique identifier for the media"),url:jO.string().describe("URL of the media file"),title:jO.string().optional().describe("Media title"),source:jO.string().optional().describe("Media source"),description:jO.string().optional().describe("Media description"),text:jO.string().optional().describe("Text content associated with the media"),contentType:jO.nativeEnum($f).optional().describe("Type of media content")}).loose().describe("Media attachment with URL and metadata"),b$=jO.object({text:jO.string().optional().describe("The main text content of the message"),thought:jO.string().optional().describe("Internal thought process or reasoning"),actions:jO.array(jO.string()).optional().describe("Actions to be taken in response"),providers:jO.array(jO.string()).optional().describe("Data providers to use (e.g., KNOWLEDGE)"),source:jO.string().optional().describe("Source of the content"),target:jO.string().optional().describe("Target of the content"),url:jO.string().optional().describe("Related URL"),inReplyTo:v$.optional().describe("UUID of message this is replying to"),attachments:jO.array(y$).optional().describe("Array of media attachments (images, videos, documents, etc.)"),channelType:jO.enum(Uf).optional().describe("Type of channel this content is for")}).catchall(jO.unknown()).describe("Content structure for messages in conversation examples"),_$=jO.object({name:jO.string().describe("Name of the speaker (can use {{name1}} placeholder for dynamic names)"),content:b$}).describe("A single message in a conversation example"),w$=jO.object({directory:jO.string().describe("Path to a directory containing knowledge files"),shared:jO.boolean().optional().describe("Whether this knowledge is shared across characters")}).describe("Directory-based knowledge source"),x$=jO.union([jO.string().describe("File path to a knowledge document"),jO.object({path:jO.string().describe("Path to a knowledge file"),shared:jO.boolean().optional().describe("Whether this knowledge is shared across characters")}),w$]).describe("Knowledge source - can be a file path, file object, or directory"),E$=jO.union([jO.string().describe("Template string with placeholders"),jO.function().optional()]).describe("Template for generating text - can be a string template or function"),k$=jO.object({all:jO.array(jO.string()).optional().describe("Style guidelines applied to all types of responses"),chat:jO.array(jO.string()).optional().describe("Style guidelines specific to chat/conversation responses"),post:jO.array(jO.string()).optional().describe("Style guidelines specific to social media posts")}).optional().describe("Style configuration defining how the character communicates across different contexts"),S$=jO.record(jO.string(),jO.union([jO.string(),jO.boolean(),jO.number(),jO.object({}).loose(),jO.array(jO.any())])).optional().describe("Character-specific settings like avatar URL, preferences, and configuration"),A$=jO.record(jO.string(),jO.union([jO.string(),jO.boolean(),jO.number()])).optional().describe("Secret values and API keys (should not be committed to version control)");function T$(){return typeof Buffer<"u"&&"function"==typeof Buffer.from}function N$(e){if(T$()&&Buffer.isBuffer(e))return e.toString("hex");let t=e instanceof Uint8Array?e:new Uint8Array(e),r="";for(let n=0;n<t.length;n++){let e=t[n].toString(16);r+=1===e.length?"0"+e:e}return r}jO.object({id:v$.optional().describe("Unique identifier for the character"),name:jO.string().min(1,"Character name is required").describe('The name of the character (e.g., "Eliza")'),username:jO.string().optional().describe("Username for the character on various platforms"),system:jO.string().optional().describe("System prompt that defines the character's core behavior and response style"),templates:jO.record(jO.string(),E$).optional().describe("Custom templates for generating different types of content"),bio:jO.union([jO.string(),jO.array(jO.string())]).describe("Character biography - can be a single string or array of biographical points"),messageExamples:jO.array(jO.array(_$)).optional().describe("Example conversations showing how the character responds in different scenarios"),postExamples:jO.array(jO.string()).optional().describe("Example social media posts demonstrating the character's voice and topics"),topics:jO.array(jO.string()).optional().describe("Topics the character is knowledgeable about and engages with"),adjectives:jO.array(jO.string()).optional().describe("Adjectives that describe the character's personality and traits"),knowledge:jO.array(x$).optional().describe("Knowledge sources (files, directories) the character can reference"),plugins:jO.array(jO.string()).optional().describe('List of plugin package names to load (e.g., ["@elizaos/plugin-sql", "@elizaos/plugin-bootstrap"] - these are commonly required)'),settings:S$,secrets:A$,style:k$}).strict().describe("Complete character definition including personality, behavior, and capabilities");var I$={fromHex:function(e){let t=e.replace(/[^0-9a-fA-F]/g,"");if(T$())return Buffer.from(t,"hex");let r=new Uint8Array(t.length/2);for(let n=0;n<r.length;n++)r[n]=parseInt(t.substr(2*n,2),16);return r},fromString:function(e,t="utf8"){if(T$()){let r="utf-8"===t?"utf8":t;return Buffer.from(e,r)}if("base64"===t){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}return(new TextEncoder).encode(e)},fromBytes:function(e){return T$()?Buffer.from(e):new Uint8Array(e)},toHex:N$,toString:function(e,t="utf8"){if(T$()&&Buffer.isBuffer(e)){let r="utf-8"===t?"utf8":t;return e.toString(r)}let r=e instanceof Uint8Array?e:new Uint8Array(e);if("hex"===t)return N$(r);if("base64"===t){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return btoa(e)}return(new TextDecoder).decode(r)},isBuffer:function(e){return!!e&&(!(!T$()||!Buffer.isBuffer(e))||(e instanceof Uint8Array||e instanceof ArrayBuffer||"object"==typeof e&&e.buffer instanceof ArrayBuffer&&"number"==typeof e.byteLength&&!Array.isArray(e)))},alloc:function(e){return T$()?Buffer.alloc(e):new Uint8Array(e)},concat:function(e){if(T$()&&e.every(e=>Buffer.isBuffer(e)))return Buffer.concat(e);let t=0;for(let i of e)t+=i.length;let r=new Uint8Array(t),n=0;for(let i of e){let e=i instanceof Uint8Array?i:new Uint8Array(i);r.set(e,n),n+=e.length}return r},slice:function(e,t,r){return T$()&&Buffer.isBuffer(e)?e.slice(t,r):(e instanceof Uint8Array?e:new Uint8Array(e)).slice(t,r)},equals:function(e,t){if(e.length!==t.length)return!1;let r=e instanceof Uint8Array?e:new Uint8Array(e),n=t instanceof Uint8Array?t:new Uint8Array(t);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0},byteLength:function(e){return e.length},randomBytes:function(e){let t=new Uint8Array(e),r=typeof globalThis<"u"?globalThis.crypto||globalThis.webcrypto:void 0;if(r&&"function"==typeof r.getRandomValues)r.getRandomValues(t);else for(let n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}},M$=[];for(let goe=0;goe<256;++goe)M$.push((goe+256).toString(16).slice(1));function C$(){return function(){try{return typeof process<"u"&&(void 0!==process.versions?.node||void 0!==process.versions?.bun)}catch{return!1}}()?(Xf(),Bs(sh)):Gs("crypto-browserify")}typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var j$=null,O$=!1;function R$(e,t){try{if(null==e)return e;if("boolean"==typeof e||"number"==typeof e)return e;if("string"!=typeof e)return h$.debug(`Value is not a string (type: ${typeof e}), returning as is`),e;let r=e.split(":");if(2!==r.length)return e;let n=I$.fromHex(r[0]),i=r[1];if(16!==n.length)return n.length&&h$.debug(`Invalid IV length (${n.length}) - expected 16 bytes`),e;let a=function(e){let t=C$().createHash(e);return{update(e){return t.update(e),this},digest:()=>new Uint8Array(t.digest())}}("sha256").update(t).digest().slice(0,32),s=function(e,t,r){return C$().createDecipheriv(e,t,r)}("aes-256-cbc",a,n),o=s.update(i,"hex","utf8");return o+=s.final("utf8"),o}catch(ere){return h$.error(`Error decrypting value: ${ere}`),e}}const L$=(e,...t)=>{p$.info({source:"client"},e,...t)},P$=(e,...t)=>{p$.error({source:"client"},e,...t)},D$=(e,...t)=>{p$.warn({source:"client"},e,...t)},$$=(e,...t)=>{p$.debug({source:"client"},e,...t)},z$=["@elizaos/plugin-bootstrap","@elizaos/plugin-sql"];function B$(e){return z$.includes(e)}function U$(e,t){if(B$(e))return[];if(!t)return[];if(t?.agentConfig?.pluginParameters){const e=[];for(const[r,n]of Object.entries(t.agentConfig.pluginParameters))!0===n.required&&e.push({name:r,description:n.description,required:!0,example:n.example});return e}return t?.elizaos?.secrets?t.elizaos.secrets.filter(e=>e.required):t?.elizaos?.requiredSecrets?t.elizaos.requiredSecrets.map(e=>({name:e,required:!0})):[]}function F$(e){const t=i.useMemo(()=>[...e].sort().join(","),[e]);return G({queryKey:["plugin-details",t],queryFn:async()=>{$$("[usePluginDetails] Starting fetch for plugins:",e);const t=[],r=e.filter(B$),n=e.filter(e=>!B$(e));if($$("[usePluginDetails] Core plugins:",r),$$("[usePluginDetails] External plugins:",n),r.forEach(e=>{t.push({name:e,requiredSecrets:[]})}),n.length>0){const e=await async function(){try{const e=await fetch("https://raw.githubusercontent.com/elizaos-plugins/registry/refs/heads/main/generated-registry.json");if(!e.ok)throw new Error(`Failed to fetch registry: ${e.status}`);return await e.json()}catch(e){return P$("Failed to fetch plugin registry:",e),null}}();if($$("[usePluginDetails] Registry data fetched:",e?"success":"failed"),e){const t=Object.keys(e.registry);$$("[usePluginDetails] Available plugins in registry:",t)}const r=n.map(async t=>{const r=function(e,t){if(B$(e))return null;if(!t)return D$(`No registry data available for ${e}`),null;const r=function(e){return e.startsWith("@elizaos-plugins/")?e:e.replace("@elizaos/","@elizaos-plugins/")}(e),n=e;$$(`Looking for ${e} in registry as ${r} or ${n}`);let i=t.registry[r];if(i||r===n||(i=t.registry[n],i&&$$(`Found plugin under alternative name: ${n}`)),!i?.git?.repo)return D$(`No GitHub repo found in registry for plugin: ${e} (tried ${r} and ${n})`),null;$$(`Found repo info for ${e}: ${i.git.repo}`);const a=i.git.v1.branch?i.git.v1:i.git.v0,s=a?.branch||"main";let o;a?.branch?$$(`Branch for ${e}: ${s}`):D$(`No branch information found for plugin: ${e}`);const l=i.git.repo.match(/github\.com[:/]([^/]+\/[^/.]+)(\.git)?$/);if(l)o=l[1];else{const e=i.git.repo.match(/^([^/]+\/[^/.]+)$/);if(!e)return D$(`Could not parse GitHub repo URL: ${i.git.repo}`),null;o=e[1]}$$(`Parsed owner/repo for ${e}: ${o}`);const c=`${o}/${s}`;return $$(`Initial path for ${e}: ${c}`),c}(t,e),n=await async function(e,t){if(B$(e))return null;if(!t)return D$(`No repo path available for plugin: ${e}`),null;$$(`Starting package.json fetch for ${e} with initial path: ${t}`);const r=t.split("/"),n=r[0],i=r[1],a=r[2]||"main",s=e.replace("@elizaos/","");$$(`Extracted parts - owner: ${n}, repo: ${i}, branch: ${a}, packageName: ${s}`);const o=[...new Set([`${n}/${i}/${a}`,`${n}/${i}/main`,`${n}/${i}/master`,`${n}/${i}/1.x`,`${n}/${i}/v1`,`${n}/${i}/v2`,`${n}/${i}/${a}/packages/${s}`,`${n}/${i}/main/packages/${s}`,`${n}/${i}/master/packages/${s}`])];$$(`Will try ${o.length} unique paths for ${e}:`,o);for(const c of o)try{const t=`https://raw.githubusercontent.com/${c}/package.json`;$$(`Trying URL for ${e}: ${t}`);const r=await fetch(t);if(r.ok){const n=await r.json();return $$(` Found package.json for ${e} at ${t}`),n}$$(` Failed to fetch ${e} from ${t}: HTTP ${r.status}`)}catch(l){$$(` Error fetching ${e} from ${c}: ${l instanceof Error?l.message:String(l)}`)}return D$(`Could not find package.json for ${e} in any of the expected locations`),null}(t,r);return{name:t,packageJson:n}}),i=await Promise.all(r);for(const{name:n,packageJson:a}of i){const e=U$(n,a);t.push({name:n,requiredSecrets:e})}}return $$("[usePluginDetails] Final details:",t),t},enabled:e.length>0,staleTime:3e5,retry:2,refetchOnMount:!1,refetchOnWindowFocus:!1})}function H$(e){const{data:t,isLoading:r,error:n}=F$(e),a=i.useMemo(()=>t?t.reduce((e,t)=>(t.requiredSecrets.forEach(r=>{e.find(e=>e.name===r.name)||e.push({...r,plugin:t.name})}),e),[]):[],[t]);return{requiredSecrets:a,isLoading:r,error:n}}class G$ extends Error{code;details;status;constructor(e,t,r,n){super(t),this.code=e,this.details=r,this.status=n,this.name="ApiError"}}class q${baseUrl;apiKey;timeout;defaultHeaders;constructor(e){this.baseUrl=e.baseUrl.replace(/\/$/,""),this.apiKey=e.apiKey,this.timeout=e.timeout||3e4,this.defaultHeaders={"Content-Type":"application/json",...e.headers},this.apiKey&&(this.defaultHeaders["X-API-KEY"]=this.apiKey)}createNoContentResponse(){return{success:!0}}async request(e,t,r){let n;n=this.baseUrl?new URL(`${this.baseUrl}${t}`):"undefined"!=typeof window&&window.location?new URL(t,window.location.origin):new URL(t,"http://localhost:3000"),r?.params&&Object.entries(r.params).forEach(([e,t])=>{null!=t&&n.searchParams.append(e,String(t))});const i=new AbortController,a=setTimeout(()=>i.abort(),this.timeout);try{const t={...this.defaultHeaders,...r?.config?.headers,...r?.headers};r?.body instanceof FormData&&delete t["Content-Type"];const o=await fetch(n.toString(),{method:e,headers:t,body:r?.body instanceof FormData?r.body:r?.body?JSON.stringify(r.body):void 0,signal:i.signal});if(clearTimeout(a),204===o.status||"0"===o.headers.get("content-length"))return this.createNoContentResponse();let l;try{l=await o.json()}catch(s){if(o.ok)return this.createNoContentResponse();throw new G$("PARSE_ERROR","Failed to parse response as JSON",void 0,o.status)}if(!o.ok){const e=l?.error||{code:"HTTP_ERROR",message:`HTTP ${o.status}: ${o.statusText}`};throw new G$(e.code,e.message,e.details,o.status)}if(l&&"object"==typeof l&&"success"in l){const e=l;if(!e.success){const t="error"in e?e.error:{code:"UNKNOWN_ERROR",message:"An unknown error occurred"};throw new G$(t.code,t.message,t.details,o.status)}return e.data}return l}catch(s){if(clearTimeout(a),s instanceof G$)throw s;if(s instanceof Error){if("AbortError"===s.name)throw new G$("TIMEOUT","Request timed out");throw new G$("NETWORK_ERROR",s.message)}throw new G$("UNKNOWN_ERROR","An unknown error occurred")}}async get(e,t){return this.request("GET",e,t)}async post(e,t,r){return this.request("POST",e,{...r,body:t})}async put(e,t,r){return this.request("PUT",e,{...r,body:t})}async patch(e,t,r){return this.request("PATCH",e,{...r,body:t})}async delete(e,t){return this.request("DELETE",e,t)}}class V$ extends q${async listAgents(){return this.get("/api/agents")}async getAgent(e){return this.get(`/api/agents/${e}`)}async createAgent(e){return this.post("/api/agents",e)}async updateAgent(e,t){return this.patch(`/api/agents/${e}`,t)}async deleteAgent(e){return this.delete(`/api/agents/${e}`)}async startAgent(e){return this.post(`/api/agents/${e}/start`)}async stopAgent(e){return this.post(`/api/agents/${e}/stop`)}async getWorlds(){return this.get("/api/agents/worlds")}async addAgentToWorld(e,t){return this.post(`/api/agents/${e}/worlds`,{worldId:t})}async updateAgentWorldSettings(e,t,r){return this.patch(`/api/agents/${e}/worlds/${t}`,{settings:r})}async getAgentPanels(e){const t=await this.get(`/api/agents/${e}/panels`);return{panels:(Array.isArray(t)?t:[]).map((e,t)=>({id:`${e.name}-${t}`,name:e.name,url:e.path,type:"plugin"}))}}async getAgentLogs(e,t){return this.get(`/api/agents/${e}/logs`,{params:t})}async deleteAgentLog(e,t){return this.delete(`/api/agents/${e}/logs/${t}`)}async getAgentsForServer(e){return this.get(`/api/messaging/servers/${e}/agents`)}async addAgentToServer(e,t){return this.post(`/api/messaging/servers/${e}/agents`,{agentId:t})}async removeAgentFromServer(e,t){return this.delete(`/api/messaging/servers/${e}/agents/${t}`)}async getServersForAgent(e){return this.get(`/api/messaging/agents/${e}/servers`)}}class W$ extends q${async submitMessage(e){return this.post("/api/messaging/submit",e)}async completeMessage(e){return this.post("/api/messaging/complete",e)}async ingestExternalMessages(e){return this.post("/api/messaging/ingest-external",e)}async createChannel(e){const t={name:e.name,type:e.type,server_id:e.serverId||"00000000-0000-0000-0000-000000000000",metadata:e.metadata};return this.post("/api/messaging/central-channels",t)}async createGroupChannel(e){let t,r,n;if(e.metadata){const i={...e.metadata};"server_id"in i&&(r=i.server_id,delete i.server_id),"type"in i&&(n=i.type,delete i.type),Object.keys(i).length>0&&(t=i)}const i={name:e.name,server_id:r||"00000000-0000-0000-0000-000000000000",participantCentralUserIds:e.participantIds,...n?{type:n}:{},...t?{metadata:t}:{}};return this.post("/api/messaging/central-channels",i)}async getOrCreateDmChannel(e){const[t,r]=e.participantIds,n={currentUserId:t,targetUserId:r,dmServerId:"00000000-0000-0000-0000-000000000000"};return this.get("/api/messaging/dm-channel",{params:n})}async getChannelDetails(e){return this.get(`/api/messaging/central-channels/${e}/details`)}async getChannelParticipants(e){return this.get(`/api/messaging/central-channels/${e}/participants`)}async addAgentToChannel(e,t){return this.post(`/api/messaging/central-channels/${e}/agents`,{agentId:t})}async removeAgentFromChannel(e,t){return this.delete(`/api/messaging/central-channels/${e}/agents/${t}`)}async deleteChannel(e){return this.delete(`/api/messaging/central-channels/${e}`)}async clearChannelHistory(e){return this.delete(`/api/messaging/central-channels/${e}/messages`)}async postMessage(e,t,r){return this.post(`/api/messaging/central-channels/${e}/messages`,{content:t,metadata:r})}async getChannelMessages(e,t){return this.get(`/api/messaging/central-channels/${e}/messages`,{params:t})}async getMessage(e){return this.get(`/api/messaging/messages/${e}`)}async deleteMessage(e,t){return this.delete(`/api/messaging/central-channels/${e}/messages/${t}`)}async updateMessage(e,t){return this.patch(`/api/messaging/messages/${e}`,{content:t})}async searchMessages(e){return this.post("/api/messaging/messages/search",e)}async listServers(){return this.get("/api/messaging/central-servers")}async getServerChannels(e){return this.get(`/api/messaging/central-servers/${e}/channels`)}async createServer(e){return this.post("/api/messaging/servers",e)}async syncServerChannels(e,t){return this.post(`/api/messaging/servers/${e}/sync-channels`,t)}async deleteServer(e){return this.delete(`/api/messaging/servers/${e}`)}async updateChannel(e,t){return this.patch(`/api/messaging/central-channels/${e}`,t)}async generateChannelTitle(e,t){return this.post(`/api/messaging/central-channels/${e}/generate-title`,{agentId:t})}async addUserToChannel(e,t){const r=await this.getChannelDetails(e),n=r.metadata?.participantCentralUserIds||[];if(!n.includes(t)){const r=[...n,t];return this.updateChannel(e,{participantCentralUserIds:r})}return{success:!0,data:r}}async addUsersToChannel(e,t){const r=await this.getChannelDetails(e),n=[...r.metadata?.participantCentralUserIds||[]];for(const i of t)n.includes(i)||n.push(i);return this.updateChannel(e,{participantCentralUserIds:n})}async removeUserFromChannel(e,t){const r=await this.getChannelDetails(e),n=(r.metadata?.participantCentralUserIds||[]).filter(e=>e!==t);return this.updateChannel(e,{participantCentralUserIds:n})}}class Z$ extends q${async getAgentMemories(e,t){return this.get(`/api/memory/${e}/memories`,{params:t})}async getRoomMemories(e,t,r){return this.get(`/api/memory/${e}/rooms/${t}/memories`,{params:r})}async updateMemory(e,t,r){return this.patch(`/api/memory/${e}/memories/${t}`,r)}async clearAgentMemories(e){return this.delete(`/api/memory/${e}/memories`)}async clearRoomMemories(e,t){return this.delete(`/api/memory/${e}/memories/all/${t}`)}async listAgentRooms(e){return this.get(`/api/memory/${e}/rooms`)}async getRoom(e,t){return this.get(`/api/memory/${e}/rooms/${t}`)}async createRoom(e,t){return this.post(`/api/memory/${e}/rooms`,t)}async createWorldFromServer(e,t){return this.post(`/api/memory/groups/${e}`,t)}async deleteWorld(e){return this.delete(`/api/memory/groups/${e}`)}async clearWorldMemories(e){return this.delete(`/api/memory/groups/${e}/memories`)}async deleteMemory(e,t){return this.delete(`/api/memory/${e}/memories/${t}`)}async getAgentInternalMemories(e,t,r){return this.get(`/api/memory/${e}/rooms/${t}/memories`,{params:{includeEmbedding:r}})}async deleteAgentInternalMemory(e,t){return this.delete(`/api/memory/${e}/memories/${t}`)}async deleteAllAgentInternalMemories(e,t){return this.delete(`/api/memory/${e}/memories/all/${t}`)}async updateAgentInternalMemory(e,t,r){return this.patch(`/api/memory/${e}/memories/${t}`,r)}async deleteGroupMemory(e,t){return this.delete(`/api/messaging/central-channels/${e}/messages/${t}`)}async clearGroupChat(e){return this.delete(`/api/messaging/central-channels/${e}/messages`)}}class K$ extends q${async requestBinary(e,t,r){let n;n=this.baseUrl?new URL(`${this.baseUrl}${t}`):"undefined"!=typeof window&&window.location?new URL(t,window.location.origin):new URL(t,"http://localhost:3000"),r?.params&&Object.entries(r.params).forEach(([e,t])=>{null!=t&&n.searchParams.append(e,String(t))});const i=new AbortController,a=setTimeout(()=>i.abort(),this.timeout);try{const t={...this.defaultHeaders,...r?.headers};r?.body instanceof FormData&&delete t["Content-Type"];const s=await fetch(n.toString(),{method:e,headers:t,body:r?.body instanceof FormData?r.body:r?.body?JSON.stringify(r.body):void 0,signal:i.signal});if(clearTimeout(a),!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.arrayBuffer()}catch(s){if(clearTimeout(a),s instanceof Error){if("AbortError"===s.name)throw new Error("Request timed out");throw s}throw new Error("An unknown error occurred")}}processAudioInput(e){if(e instanceof Blob)return e;if("string"==typeof e){if(e.startsWith("data:"))try{const[t,r]=e.split(","),n=t.match(/data:([^;]+)/),i=n?n[1]:"audio/wav",a=atob(r),s=new Uint8Array(a.length);for(let e=0;e<a.length;e++)s[e]=a.charCodeAt(e);return new Blob([s],{type:i})}catch(r){throw new Error(`Invalid base64 data URL: ${r instanceof Error?r.message:"Unknown error"}`)}if(this.isBase64String(e))try{const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return new Blob([r],{type:"audio/wav"})}catch(r){return e}return e}if(this.isBuffer(e))return new Blob([new Uint8Array(e)],{type:"audio/wav"});const t=e;if(t instanceof ArrayBuffer)return new Blob([t],{type:"audio/wav"});if(t&&"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer)return new Blob([t.buffer],{type:"audio/wav"});throw new Error(`Unsupported audio input type: ${typeof e}. Expected Blob, Buffer, ArrayBuffer, or string.`)}isBase64String(e){return!(e.length<4||e.length%4!=0)&&/^[A-Za-z0-9+/]*={0,2}$/.test(e)}isBuffer(e){return null!=e&&"object"==typeof e&&"function"==typeof e.constructor&&"Buffer"===e.constructor.name&&"function"==typeof e.readUInt8}async speechConversation(e,t){const r=new FormData,n=this.processAudioInput(t.audio);return Blob,r.append("file",n),t.format&&r.append("format",t.format),t.language&&r.append("language",t.language),t.metadata&&r.append("metadata",JSON.stringify(t.metadata)),this.request("POST",`/api/audio/${e}/speech/conversation`,{body:r})}async generateSpeech(e,t){const r=await this.requestBinary("POST",`/api/audio/${e}/speech/generate`,{body:t}),n=new Uint8Array(r);let i="";for(let a=0;a<n.byteLength;a++)i+=String.fromCharCode(n[a]);return{audio:btoa(i),format:"mpeg"}}async synthesizeAudioMessage(e,t){return this.post(`/api/audio/${e}/audio-messages/synthesize`,t)}async transcribe(e,t){const r=new FormData,n=this.processAudioInput(t.audio);return Blob,r.append("file",n),t.format&&r.append("format",t.format),t.language&&r.append("language",t.language),this.request("POST",`/api/audio/${e}/transcriptions`,{body:r})}async processSpeech(e,t,r){const n=new FormData,i=this.processAudioInput(t);return Blob,n.append("file",i),r&&n.append("metadata",JSON.stringify(r)),this.request("POST",`/api/audio/${e}/speech`,{body:n})}}class Y$ extends q${async uploadAgentMedia(e,t){const r=new FormData;return r.append("file",t.file,t.filename),t.contentType&&r.append("contentType",t.contentType),t.metadata&&r.append("metadata",JSON.stringify(t.metadata)),this.request("POST",`/api/media/agents/${e}/upload-media`,{body:r})}async uploadChannelMedia(e,t){const r=new FormData;return r.append("file",t),this.request("POST",`/api/messaging/central-channels/${e}/upload-media`,{body:r})}}class J$ extends q${async checkHealth(){return this.get("/api/server/health")}async ping(){return this.get("/api/server/ping")}async hello(){return this.get("/api/server/hello")}async getStatus(){return this.get("/api/server/status")}async stopServer(){return this.post("/api/server/stop")}async getDebugInfo(){return this.get("/api/server/debug/servers")}async submitLogs(e){return this.post("/api/server/logs",{logs:e})}async clearLogs(){return this.delete("/api/server/logs")}}class X$ extends q${async getVersion(){return this.get("/api/system/version")}async getEnvironment(){return this.get("/api/system/env/local")}async updateLocalEnvironment(e){if(!e||"object"!=typeof e)throw new Error("updateLocalEnvironment requires a configuration object");let t;return t="variables"in e?{content:e.variables}:"content"in e?{content:e.content}:{content:e},this.post("/api/system/env/local",t)}async getGlobalLogs(e){const t=await fetch(this.buildUrl("/api/server/logs",{params:e}),{method:"GET",headers:this.getHeaders()});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const r=await t.json();return{logs:r.logs||[],count:r.count||0,total:r.total||0,level:r.requestedLevel||r.level||"all",levels:r.levels||[]}}buildUrl(e,t){const r=new URL(`${this.baseUrl}${e}`);return t?.params&&Object.entries(t.params).forEach(([e,t])=>{null!=t&&r.searchParams.append(e,String(t))}),r.toString()}getHeaders(){return{...this.defaultHeaders}}async deleteGlobalLogs(){return this.delete("/api/server/logs")}async deleteLog(e){throw new Error("Individual log deletion is not supported. Use deleteGlobalLogs() to clear all logs.")}}function Q$(e,t){if(!e)return;let r;if(e instanceof Date)r=e.getTime();else if("string"==typeof e){if(r=new Date(e).getTime(),isNaN(r))return void console.warn(`Invalid date string for ${t}: ${e}`)}else{if("number"!=typeof e)return void console.warn(`Invalid type for ${t}: ${typeof e}`);r=e}return r.toString()}function ez(e,t){if(!e||""===e.trim())throw new Error(`${t} is required and cannot be empty`)}class tz extends q${async checkHealth(){return this.get("/api/messaging/sessions/health")}async createSession(e){return this.post("/api/messaging/sessions",e)}async getSession(e){return ez(e,"sessionId"),this.get(`/api/messaging/sessions/${e}`)}async sendMessage(e,t){return ez(e,"sessionId"),ez(t?.content,"content"),this.post(`/api/messaging/sessions/${e}/messages`,t)}async getMessages(e,t){ez(e,"sessionId");const r={};t?.limit&&(r.limit=t.limit.toString());const n=Q$(t?.before,"before");n&&(r.before=n);const i=Q$(t?.after,"after");return i&&(r.after=i),this.get(`/api/messaging/sessions/${e}/messages`,{params:r})}async deleteSession(e){return ez(e,"sessionId"),this.delete(`/api/messaging/sessions/${e}`)}async listSessions(){return this.get("/api/messaging/sessions")}}class rz extends q${async listRuns(e,t){return this.get(`/api/agents/${e}/runs`,{params:t})}async getRun(e,t,r){return this.get(`/api/agents/${e}/runs/${t}`,{params:r?{roomId:r}:void 0})}}var nz,iz;(iz=nz||={}).PENDING="pending",iz.PROCESSING="processing",iz.COMPLETED="completed",iz.FAILED="failed",iz.TIMEOUT="timeout";class az extends q${async create(e){return this.post("/api/messaging/jobs",e)}async getJob(e){return this.get(`/api/messaging/jobs/${e}`)}async list(e){return this.get("/api/messaging/jobs",{params:e})}async health(){return this.get("/api/messaging/jobs/health")}async poll(e,t={}){const{interval:r=1e3,maxAttempts:n=30,timeout:i,onProgress:a}=t,s=Date.now();let o=0;const l=i?Math.ceil(i/r):n;for(;o<l;){if(i&&Date.now()-s>i){return{success:!1,job:await this.getJob(e),attempts:o,timeMs:Date.now()-s}}o>0&&await new Promise(e=>setTimeout(e,r)),o++;const t=await this.getJob(e);if(a&&a(t,o),"completed"===t.status)return{success:!0,job:t,attempts:o,timeMs:Date.now()-s};if("failed"===t.status||"timeout"===t.status)return{success:!1,job:t,attempts:o,timeMs:Date.now()-s}}return{success:!1,job:await this.getJob(e),attempts:o,timeMs:Date.now()-s}}async createAndPoll(e,t){const r=await this.create(e);return this.poll(r.jobId,t)}async createAndPollWithBackoff(e,t={}){const{initialInterval:r=500,maxInterval:n=5e3,multiplier:i=1.5,maxAttempts:a=40,timeout:s,onProgress:o}=t,l=(await this.create(e)).jobId,c=Date.now();let u=0,d=r;for(;u<a;){if(s&&Date.now()-c>s){return{success:!1,job:await this.getJob(l),attempts:u,timeMs:Date.now()-c}}u>0&&(await new Promise(e=>setTimeout(e,d)),d=Math.min(d*i,n)),u++;const e=await this.getJob(l);if(o&&o(e,u),"completed"===e.status)return{success:!0,job:e,attempts:u,timeMs:Date.now()-c};if("failed"===e.status||"timeout"===e.status)return{success:!1,job:e,attempts:u,timeMs:Date.now()-c}}return{success:!1,job:await this.getJob(l),attempts:u,timeMs:Date.now()-c}}async ask(e,t,r,n){const i=await this.createAndPoll({userId:e,content:t,...r&&{agentId:r}},n);if(!i.success||!i.job.result)throw new Error(i.job.error||"Job failed or timed out without a response");return i.job.result.message.content}}class sz{agents;messaging;memory;audio;media;server;system;sessions;runs;jobs;constructor(e){this.agents=new V$(e),this.messaging=new W$(e),this.memory=new Z$(e),this.audio=new K$(e),this.media=new Y$(e),this.server=new J$(e),this.system=new X$(e),this.sessions=new tz(e),this.runs=new rz(e),this.jobs=new az(e)}static create(e){return new sz(e)}}let oz=null;function lz(){return oz||(oz=sz.create(function(){const e=localStorage.getItem(`eliza-api-key-${window.location.origin}`),t={baseUrl:window.location.origin,timeout:3e4,headers:{Accept:"application/json"}};return e&&(t.apiKey=e),t}())),oz}function cz(e){const t=()=>`eliza-api-key-${window.location.origin}`;e?localStorage.setItem(t(),e):localStorage.removeItem(t()),oz=null}function uz(){return G({queryKey:["plugins"],queryFn:async()=>{try{const t=lz(),[r,n]=await Promise.all([fetch("https://raw.githubusercontent.com/elizaos-plugins/registry/refs/heads/main/generated-registry.json"),t.agents.listAgents()]),i=await r.json(),a=Object.entries(i.registry||{}).filter(([e,t])=>{const r=e.includes("plugin"),n=!0===t.supports.v1,i=null!==t.npm.v1||null!==t.git.v1.version&&null!==t.git.v1.branch;return r&&n&&i}).map(([e])=>e.replace(/^@elizaos-plugins\//,"@elizaos/")).sort();let s=[];try{const e=n?.agents||[];if(e.length>0){const r=e.find(e=>"active"===e.status);if(r&&r.id){const e=await t.agents.getAgent(r.id),n=e?.plugins;Array.isArray(n)&&(s=n)}}}catch(e){D$("Could not fetch agent plugins:",e)}return[...new Set([...a,...s])].sort()}catch(t){return P$("Failed to fetch from registry, falling back to basic list:",t),["@elizaos/plugin-bootstrap","@elizaos/plugin-evm","@elizaos/plugin-discord","@elizaos/plugin-elevenlabs","@elizaos/plugin-anthropic","@elizaos/plugin-browser","@elizaos/plugin-farcaster","@elizaos/plugin-groq"].filter(e=>e.includes("plugin")).sort()}}})}const dz={google:"@elizaos/plugin-google-genai",llama_local:"@elizaos/plugin-ollama"},hz={},pz=["@elizaos/plugin-sql","@elizaos/plugin-bootstrap"];function fz(){const{data:e=[]}=uz();return{convertCharacter:t=>{const r=[...Array.isArray(t.bio)?t.bio:t.bio?[t.bio]:[],...t.lore??[]],n=(t.messageExamples??[]).map(e=>e.map(e=>{return"object"==typeof(t=e)&&null!==t&&"user"in t?{name:e.user,content:e.content}:e;var t}))??[],i=(t=>{const r=new Set;if(Array.isArray(t.clients))for(const i of t.clients){const t=i.toLowerCase(),n=hz[t];if(n&&e.includes(n))r.add(n);else{const n=`@elizaos/plugin-${t}`;e.includes(n)&&r.add(n)}}let n=!1;if("string"==typeof t.modelProvider){const i=t.modelProvider.toLowerCase(),a=dz[i];if(a&&e.includes(a))r.add(a),n=!0;else{const t=`@elizaos/plugin-${i}`;e.includes(t)&&(r.add(t),n=!0)}n||e.includes("@elizaos/plugin-openai")&&r.add("@elizaos/plugin-openai")}else e.includes("@elizaos/plugin-openai")&&r.add("@elizaos/plugin-openai");for(const i of pz)e.includes(i)&&r.add(i);return Array.from(r).sort()})(t);return{name:t.name,username:t.username,system:t.system,settings:t.settings,plugins:i,bio:r,topics:t.topics,style:t.style,adjectives:t.adjectives,messageExamples:n,postExamples:t.postExamples}}}}function mz({characterValue:e,setCharacterValue:t,title:n,description:a,onSubmit:s,onDelete:o,onReset:l,onStopAgent:c,isDeleting:u=!1,isStopping:d=!1,customComponents:h=[],onTemplateChange:p,secretPanelRef:f}){const{toast:m}=Va(),{data:g,isLoading:v}=function(){const[e,t]=i.useState(null);return i.useEffect(()=>{const e=localStorage.getItem("ELEVENLABS_API_KEY");t(e)},[]),G({queryKey:["elevenlabs-voices",e],queryFn:async()=>{if(!e)return[];try{const t=await fetch("https://api.elevenlabs.io/v2/voices",{method:"GET",headers:{"xi-api-key":e}});if(!t.ok)return console.error("Failed to fetch ElevenLabs voices:",t.statusText),[];const r=await t.json(),n=os.map(e=>e.value);return r.voices.filter(e=>!n.includes(e.voice_id)).map(e=>({value:e.voice_id,label:`ElevenLabs - ${e.name} (Custom)`,provider:"elevenlabs",gender:"female"===e.labels?.gender?"female":"male",language:"en",features:[e.category||"professional",e.labels?.description||"natural"]}))}catch(t){return console.error("Error fetching ElevenLabs voices:",t),[]}},staleTime:36e5,refetchOnWindowFocus:!1})}(),[y,b]=i.useState(!1),[_,w]=i.useState("none"),[x,E]=i.useState("basic"),k=i.useRef(null),[S,A]=i.useState(!1),[T,N]=i.useState(!1),[I,M]=i.useState(!1),[C,j]=i.useState(null),[O,R]=i.useState({}),L=i.useMemo(()=>e?.plugins||[],[e?.plugins]),{requiredSecrets:P}=H$(L),{convertCharacter:D}=fz();i.useEffect(()=>{(async()=>{try{const e=lz(),t=await e.system.getEnvironment();R(t||{})}catch(e){console.error("Failed to fetch global environment variables:",e),R({})}})()},[]);const{containerRef:$,showLabels:z}=((e=768)=>{const t=i.useRef(null),[r,n]=i.useState(!0),a=i.useRef(null),s=i.useRef(0);return i.useEffect(()=>{const r=t.current;if(!r)return;const i=t=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{const r=t>=e;n(e=>e!==r?r:e),s.current=t},150)},o=new ResizeObserver(e=>{for(const t of e){const{width:e}=t.contentRect;Math.abs(e-s.current)>5&&i(e)}});return o.observe(r),setTimeout(()=>{const{width:t}=r.getBoundingClientRect();s.current=t,n(t>=e)},0),()=>{o.disconnect(),a.current&&clearTimeout(a.current)}},[e]),{containerRef:t,showLabels:r}})(640),B=i.useCallback(()=>{const e=k.current;if(!e)return;const{scrollLeft:t,scrollWidth:r,clientWidth:n}=e;A(t>0),N(t+n<r-1)},[]);i.useEffect(()=>{const e=k.current;if(e)return B(),e.addEventListener("scroll",B),window.addEventListener("resize",B),()=>{e.removeEventListener("scroll",B),window.removeEventListener("resize",B)}},[B,h.length]);const U=e=>{const t=k.current;if(!t)return;const r=.8*t.clientWidth;t.scrollBy({left:"left"===e?-r:r,behavior:"smooth"})},F=i.useMemo(()=>{const e=cs();if(g&&!v){return[...e.filter(e=>"elevenlabs"!==e.provider),...g]}return e},[g,v]),H=i.useMemo(()=>[{sectionTitle:"Basic Info",sectionValue:"basic",sectionType:"input",fields:[{title:"Name",name:"name",description:"The primary identifier for this agent",fieldType:"text",getValue:e=>e.name||"",tooltip:"Display name that will be visible to users. Required for identification purposes."},{title:"Username",name:"username",description:"Used in URLs and API endpoints",fieldType:"text",getValue:e=>e.username||"",tooltip:"Unique identifier for your agent. Used in APIs/URLs and Rooms."},{title:"System",name:"system",description:"System prompt defining agent behavior",fieldType:"textarea",getValue:e=>e.system||"",tooltip:"Instructions for the AI model that establish core behavior patterns and personality traits."},{title:"Voice Model",name:"settings.voice.model",description:"Voice model for audio synthesis",fieldType:"select",getValue:e=>e.settings?.voice?.model||"",options:F.map(e=>({value:e.value,label:e.label})),tooltip:"Select a voice that aligns with the agent's intended persona."}]},{sectionTitle:"Content",sectionValue:"content",sectionType:"array",fields:[{title:"Bio",description:"Bio data for this agent",path:"bio",getData:e=>Array.isArray(e.bio)?e.bio:[],tooltip:"Biographical details that establish the agent's background and context."},{title:"Topics",description:"Topics this agent can talk about",path:"topics",getData:e=>e.topics||[],tooltip:"Subject domains the agent can discuss with confidence."},{title:"Adjectives",description:"Descriptive personality traits",path:"adjectives",getData:e=>e.adjectives||[],tooltip:"Key personality attributes that define the agent's character."}]},{sectionTitle:"Style",sectionValue:"style",sectionType:"array",fields:[{title:"All Styles",description:"Writing style for all content types",path:"style.all",getData:e=>e.style?.all||[],tooltip:"Core writing style guidelines applied across all content formats."},{title:"Chat Style",description:"Style specific to chat interactions",path:"style.chat",getData:e=>e.style?.chat||[],tooltip:"Writing style specific to conversational exchanges."},{title:"Post Style",description:"Style for long-form content",path:"style.post",getData:e=>e.style?.post||[],tooltip:"Writing style for structured content such as articles or posts."}]}],[F]),q=e=>{const{name:r,value:n,type:i}=e.target,a=e.target.checked;if("checkbox"===i)t.updateField(r,a);else if(r.startsWith("settings.")){const e=r.substring(9);t.updateSetting?t.updateSetting(e,n):t.updateField(r,n)}else t.updateField(r,n)},V=n=>r.jsxs("div",{className:`w-full ${"name"===n.name?"agent-form-name":""} ${"system"===n.name?"agent-form-system-prompt":""}`,children:[r.jsxs(Na,{htmlFor:n.name,className:"text-sm font-normal block mb-2",children:[n.title,n.name in _n&&_n[n.name]===bn.REQUIRED&&r.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),"textarea"===n.fieldType?r.jsx(Da,{id:n.name,name:n.name,value:n.getValue(e),onChange:q,className:"min-h-[120px] resize-y"}):"checkbox"===n.fieldType?r.jsx(Ji,{id:n.name,name:n.name,type:"checkbox",checked:"true"===e[n.name],onChange:q}):"select"===n.fieldType?r.jsxs(Za,{name:n.name,value:n.getValue(e),onValueChange:r=>((r,n)=>{if(n.startsWith("settings.")){const i=n.substring(9);if(t.updateSetting){if(t.updateSetting(i,r),"voice.model"===i&&r){const n=us(r);if(n){const r=Array.isArray(e.plugins)?[...e.plugins]:[],i=us(e.settings?.voice?.model),a=is[n.provider],s=[...r];a&&!r.includes(a)&&s.push(a),t.setPlugins?t.setPlugins(s):t.updateField&&t.updateField("plugins",s),i?.provider!==n.provider&&m({title:"Plugin Updated",description:`${a} plugin has been set for the selected voice model.`})}}}else t.updateField(n,r)}else t.updateField(n,r)})(r,n.name),children:[r.jsx(Ja,{children:r.jsx(Ya,{placeholder:n.name.includes("voice.model")&&v?"Loading voice models...":"Select a voice model"})}),r.jsx(es,{children:"settings.voice.model"===n.name?r.jsxs(r.Fragment,{children:[r.jsx(Ka,{children:r.jsx(rs,{value:"none",children:"No Voice"})}),r.jsx(ns,{}),r.jsxs(Ka,{children:[r.jsx(ts,{children:"OpenAI Voices"}),ls.map(e=>r.jsx(rs,{value:e.value,children:e.label.replace("OpenAI - ","")},e.value))]}),r.jsx(ns,{}),r.jsxs(Ka,{children:[r.jsx(ts,{children:"ElevenLabs Voices"}),os.map(e=>r.jsx(rs,{value:e.value,children:e.label.replace("ElevenLabs - ","")},e.value)),g&&g.length>0&&g.map(e=>r.jsx(rs,{value:e.value,children:e.label.replace("ElevenLabs - ","")},e.value))]})]}):n.options?.map(e=>r.jsx(rs,{value:e.value,children:e.label},e.value))})]}):r.jsx(Ji,{id:n.name,name:n.name,type:n.fieldType,value:n.getValue(e),onChange:q}),n.description&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n.description})]},n.name),W=n=>r.jsxs("div",{className:"w-full",children:[r.jsxs(Na,{htmlFor:n.path,className:"text-sm font-normal block mb-2",children:[n.title,n.path in _n&&_n[n.path]===bn.REQUIRED&&r.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),r.jsx(ja,{data:n.getData(e),onChange:e=>((e,r)=>{if(!e.includes("."))return void t.updateField(e,r);const n=e.split(".");2!==n.length||"style"!==n[0]?t.updateField(e,r):t.setStyleArray?t.setStyleArray(n[1],r):t.updateField(e,r)})(n.path,e)}),n.description&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n.description})]},n.path);const Z=i.useRef(null),K=i.useMemo(()=>{const e=[];return c&&e.push({label:"Stop Agent",description:"Stop running",onClick:c}),o&&e.push({label:"Delete Agent",description:"Delete permanently",onClick:()=>o()}),e},[c,o]),Y=i.useCallback(e=>{if(w(e),"none"===e&&l)return void l();const r=ys(e);r&&t.importAgent&&(t.importAgent(r.template),p?.())},[l,t,p]),J=[...H.map(e=>({value:e.sectionValue,label:e.sectionTitle,shortLabel:e.sectionTitle.split(" ")[0]})),...h.map(e=>({value:`custom-${e.name}`,label:e.name,shortLabel:e.shortLabel||e.name.split(" ")[0]}))];return r.jsxs("div",{ref:$,className:"w-full max-w-full mx-auto p-6 sm:p-8 h-full overflow-y-auto",children:[(n||a)&&r.jsxs("div",{className:"mb-8",children:[n&&r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:n}),a&&r.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:a})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx(Na,{htmlFor:"template-selector",className:"text-sm",children:"Start with a template"}),r.jsxs(Za,{value:_,onValueChange:Y,children:[r.jsx(Ja,{className:"w-full mt-1",children:r.jsx(Ya,{placeholder:"None (blank start)"})}),r.jsx(es,{children:vs.map(e=>r.jsx(rs,{value:e.id,children:r.jsx(sa,{children:r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx("span",{className:"w-full text-left",children:e.label})}),r.jsx(ca,{side:"right",children:r.jsx("p",{className:"max-w-xs",children:e.description})})]})})},e.id))})]})]}),r.jsxs("form",{onSubmit:async t=>{t.preventDefault(),b(!0);try{const t=await(async e=>{if(e.settings?.avatar){const t=new Image;if(t.src=e.settings.avatar,await new Promise(e=>t.onload=e),t.width>yn||t.height>yn){const t=await fetch(e.settings.avatar),r=await t.blob(),n=new File([r],"avatar.jpg",{type:r.type}),i=await qi(n);return{...e,settings:{...e.settings,avatar:i}}}}return e})(e);let r=[];if(f?.current){r=f.current.validateSecrets().missingSecrets}else{const e=t.settings?.secrets,n=e&&"object"==typeof e&&!Array.isArray(e)?e:{};r=P.filter(e=>{const t=n[e.name];if(t&&"string"==typeof t&&""!==t.trim())return!1;const r=O[e.name];return!r||""===r.trim()}).map(e=>e.name)}if(r.length>0)return b(!1),j(t),void M(!0);await s(t)}catch(r){m({title:"Error",description:r instanceof Error?r.message:"Failed to update agent",variant:"destructive"})}finally{b(!1)}},children:[r.jsxs(Oa,{value:x,onValueChange:E,className:"w-full",children:[r.jsxs("div",{className:"relative mb-4",children:[S&&r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 h-8 w-8 p-0 bg-background/80 backdrop-blur-sm shadow-md",onClick:()=>U("left"),children:r.jsx(oe,{className:"h-4 w-4"})}),r.jsx("div",{ref:k,className:"overflow-x-auto scrollbar-hide",children:r.jsx(Ra,{className:"inline-flex h-10 items-center justify-start text-muted-foreground w-full",children:J.map(e=>r.jsx(La,{value:e.value,className:Bi("whitespace-nowrap",!z&&"px-2 text-xs"),children:z?e.label:e.shortLabel},e.value))})}),T&&r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 h-8 w-8 p-0 bg-background/80 backdrop-blur-sm shadow-md",onClick:()=>U("right"),children:r.jsx(le,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"max-h-[100vh] overflow-y-auto pb-4 px-1",children:[H.map(e=>r.jsx(Pa,{value:e.sectionValue,className:"space-y-6 mt-0 focus:outline-none",children:"input"===e.sectionType?e.fields.map(V):e.fields.map(W)},e.sectionValue)),h.map(e=>r.jsx(Pa,{value:`custom-${e.name}`,className:"mt-0 focus:outline-none",children:r.jsx("div",{className:"h-full",children:e.component})},`custom-${e.name}`))]})]}),r.jsxs("div",{className:"flex items-center justify-between w-full mt-6",children:[r.jsxs(ds,{children:[r.jsx(hs,{asChild:!0,children:r.jsxs(Yi,{type:"button",variant:"outline",size:"icon",className:"flex-shrink-0 p-2.5",children:[r.jsx(ce,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"More options"})]})}),r.jsxs(ps,{align:"start",side:"top",children:[r.jsxs(fs,{onClick:()=>{Z.current?.click()},children:[r.jsx(ue,{className:"h-4 w-4 mr-2"}),"Import"]}),r.jsxs(fs,{onClick:()=>{Wa(e,m)},children:[r.jsx(de,{className:"h-4 w-4 mr-2"}),"Export"]}),K.length>0&&r.jsx(gs,{}),K.length>0&&K.map(e=>{const t="Stop Agent"===e.label,n="Delete Agent"===e.label,i=t?d:!!n&&u;return r.jsxs(fs,{onClick:e.onClick,disabled:i,className:n?"text-destructive focus:text-destructive hover:bg-red-50 dark:hover:bg-red-950/50":"",children:[i?r.jsx(he,{className:"h-4 w-4 animate-spin mr-2"}):t?r.jsx(pe,{className:"h-4 w-4 mr-2"}):r.jsx(fe,{className:"h-4 w-4 mr-2"}),i?(t?"Stopping":"Deleting")+"...":e.label]},e.label)})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(sa,{children:r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsxs(Yi,{type:"button",variant:"outline",onClick:()=>{l?.()},children:[r.jsx(me,{className:"h-4 w-4"}),r.jsx("span",{className:"ml-2",children:"Reset"})]})}),r.jsx(ca,{children:r.jsx("p",{children:"Reset all form fields to their original values"})})]})}),r.jsx(sa,{children:r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx(Yi,{type:"submit",disabled:y,className:"agent-form-submit",children:y?r.jsxs(r.Fragment,{children:[r.jsx(he,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Saving..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(ge,{className:"h-4 w-4"}),r.jsx("span",{className:"ml-2",children:"Save"})]})})}),r.jsx(ca,{children:r.jsx("p",{children:"Save all changes to the agent configuration"})})]})})]}),r.jsx("input",{ref:Z,type:"file",accept:".json",onChange:async e=>{const r=e.target.files?.[0];var n;if(r)try{const e=await r.text();let i=JSON.parse(e);"object"==typeof(n=i)&&null!==n&&("lore"in n||"clients"in n||"modelProvider"in n)&&(i=D(i));const a=Object.keys(_n).filter(e=>{if(_n[e]!==bn.REQUIRED)return!1;const t=e.split(".");let r=i;for(const n of t)if(r=r?.[n],void 0===r)return!0;return!1});if(a.length>0)return void m({title:"Import Failed",description:`Missing required fields: ${a.join(", ")}`,variant:"destructive"});t.importAgent?t.importAgent(i):console.warn("Missing importAgent method"),m({title:"Agent Imported",description:"Agent data has been successfully loaded."})}catch(i){m({title:"Import Failed",description:i instanceof Error?i.message:"Invalid JSON file",variant:"destructive"})}finally{e.target.value=""}},className:"hidden"})]})]}),r.jsx(Is,{open:I,onOpenChange:M,missingSecrets:(()=>{let t=[];if(f?.current){t=f.current.validateSecrets().missingSecrets}else{const r=e.settings?.secrets,n=r&&"object"==typeof r&&!Array.isArray(r)?r:{};t=P.filter(e=>{const t=n[e.name];if(t&&"string"==typeof t&&""!==t.trim())return!1;const r=O[e.name];return!r||""===r.trim()}).map(e=>e.name)}return t.map(e=>{const t=P.find(t=>t.name===e);return{name:e,plugin:t?.plugin,description:t?.description}})})(),onConfirm:async()=>{if(M(!1),C){b(!0);try{await s(C)}catch(e){m({title:"Error",description:e instanceof Error?e.message:"Failed to update agent",variant:"destructive"})}finally{b(!1),j(null)}}},onCancel:()=>{M(!1),j(null),E("custom-Secret")}})]})}function gz({characterValue:e,setCharacterValue:t}){const n=()=>{const t=e?.settings?.avatar;return"string"==typeof t?t:null},[a,s]=i.useState(n()),[o,l]=i.useState(!1),c=i.useRef(null);i.useEffect(()=>{s(n()),l(!1)},[e.id]);const u=e=>{t.updateAvatar?t.updateAvatar(e):t.updateSetting?t.updateSetting("avatar",e):t.updateField&&t.updateField("settings.avatar",e)};return r.jsxs("div",{className:"rounded-lg w-full",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 pb-5 ml-1",children:"Avatar Settings"}),r.jsxs("div",{className:"flex flex-col items-center gap-4 pb-4 max-w-sm mx-auto",children:[a?r.jsx("div",{className:"w-64 h-64 mb-2",children:r.jsx("img",{src:a,alt:"Agent Avatar",className:"object-cover w-full h-full rounded-lg border"})}):r.jsx("div",{className:"w-64 h-64 flex items-center justify-center border border-dashed rounded-lg text-gray-500 mb-2 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>c.current?.click(),children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(ve,{className:"w-10 h-10"}),r.jsx("span",{className:"text-sm",children:"Click to upload"})]})}),r.jsxs("div",{className:"flex flex-col gap-3 w-64",children:[r.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:c,onChange:async e=>{const t=e.target.files?.[0];if(t)try{const e=await qi(t);s(e),l(!0),u(e)}catch(r){console.error("Error compressing image:",r)}}}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Yi,{type:"button",className:"flex items-center gap-2 flex-1",onClick:()=>c.current?.click(),children:[r.jsx(ye,{className:"w-5 h-5"}),a?"Replace":"Upload"]}),a&&r.jsx(Yi,{type:"button",variant:"outline",className:"flex items-center",onClick:()=>{a&&(s(null),l(!0),u(""))},children:r.jsx(d,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-muted-foreground mt-1",children:[r.jsx(be,{className:"w-3.5 h-3.5"}),r.jsxs("span",{children:["Images greater than ",yn,"x",yn," will be resized"]})]})]})]})]})}const vz=s,yz=o,bz=l,_z=i.forwardRef(({className:e,...t},n)=>r.jsx(h,{ref:n,className:Bi("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));_z.displayName=h.displayName;const wz=i.forwardRef(({className:e,children:t,...n},i)=>r.jsxs(bz,{children:[r.jsx(_z,{}),r.jsxs(c,{ref:i,className:Bi("fixed left-[50%] top-[50%] z-50 bg-card grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,r.jsxs(u,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(d,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wz.displayName=c.displayName;const xz=({className:e,...t})=>r.jsx("div",{className:Bi("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});xz.displayName="DialogHeader";const Ez=({className:e,...t})=>r.jsx("div",{className:Bi("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ez.displayName="DialogFooter";const kz=i.forwardRef(({className:e,...t},n)=>r.jsx(p,{ref:n,className:Bi("text-lg font-semibold leading-none tracking-tight",e),...t}));kz.displayName=p.displayName;const Sz=i.forwardRef(({className:e,...t},n)=>r.jsx(f,{ref:n,className:Bi("text-sm text-muted-foreground",e),...t}));Sz.displayName=f.displayName;const Az={"@elizaos/plugin-sql":{title:"Essential Plugin: SQL",description:"Provides memory and state storage. If removed, replace with an adapter plugin or your agent may lose conversation history and memory capabilities."},"@elizaos/plugin-openai":{title:"Essential Plugin: OpenAI",description:"Provides language model access. If removed, replace with another LLM plugin or your agent may fail to function properly."},"@elizaos/plugin-bootstrap":{title:"Essential Plugin: Bootstrap",description:"Provides default message processing, event handling, and attachment workflows for your agent. If removed, ensure you have a custom plugin handling these responsibilities, or your agent may not process events or respond to messages as expected."}};function Tz({characterValue:e,setCharacterValue:t,initialPlugins:n}){const{data:a,error:s}=uz(),{toast:o}=Va(),[l,c]=i.useState(""),[u,d]=i.useState(!1),[h,p]=i.useState(null),[f,m]=i.useState(!1),g=i.useMemo(()=>Array.isArray(e?.plugins)?e.plugins:[],[e?.plugins]),v=i.useMemo(()=>{const e=["@elizaos/plugin-sql"];return a?[...e,...(Array.isArray(a)?a:Object.keys(a)).filter(t=>!e.includes(t))]:e},[a]),y=i.useMemo(()=>{const t=e?.settings;if(!t||"object"!=typeof t||Array.isArray(t))return null;const r=t.voice;if(!r||"object"!=typeof r||Array.isArray(r))return null;const n=r.model;if(!n||"string"!=typeof n)return null;const i=us(n);if(!i)return null;const a=is[i.provider],s=g.includes(a);return{provider:i.provider,requiredPlugin:a,isPluginEnabled:s}},[e?.settings,g]),b=i.useMemo(()=>!!n&&(n.length!==g.length||!n?.every(e=>g.includes(e))),[g,n]),_=i.useMemo(()=>v.filter(e=>!g.includes(e)).filter(e=>e.toLowerCase().includes(l.toLowerCase())),[v,g,l]),w=e=>{const r=g.indexOf(e);if(-1!==r)if(t.removePlugin)t.removePlugin(r);else if(t.updateField){const e=[...g];e.splice(r,1),t.updateField("plugins",e)}};return r.jsx("div",{className:"space-y-6",children:r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Plugins"}),s?r.jsxs("p",{className:"text-destructive",children:["Failed to load plugins: ",s.message]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx(bs,{open:f,onOpenChange:m,children:r.jsxs(xs,{children:[r.jsxs(Es,{children:[r.jsx(Ss,{children:h&&Object.keys(Az).includes(h)?Az[h].title:"Warning: Essential Plugin"}),r.jsx(As,{children:h&&Object.keys(Az).includes(h)?Az[h].description:"This plugin provides essential functionality for your agent."})]}),r.jsxs(ks,{children:[r.jsx(Ns,{onClick:()=>{p(null),m(!1)},children:"Cancel"}),r.jsx(Ts,{onClick:()=>{h&&(w(h),p(null)),m(!1)},children:"Confirm Removal"})]})]})}),y&&r.jsxs("div",{className:"rounded-md border p-4 mb-4 flex items-center gap-2",children:[r.jsx(se,{className:"h-4 w-4 text-yellow-500"}),r.jsx("p",{className:"text-xs text-white",children:(()=>{switch(y.provider){case"elevenlabs":return"ElevenLabs plugin is required for the selected voice model.";case"openai":return"OpenAI plugin is required for the selected voice model.";case"none":return'No voice plugin required for "No Voice" option.';default:return`${y.provider} plugin is required for the selected voice model.`}})()})]}),g.length>0&&r.jsxs("div",{className:"rounded-md bg-muted p-4",children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Currently Enabled"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:[...g].sort((e,t)=>{const r=Object.keys(Az).includes(e);return r===Object.keys(Az).includes(t)?0:r?-1:1}).map(e=>{const t=y?.requiredPlugin===e,n=Object.keys(Az).includes(e);return r.jsxs(Yi,{type:"button",variant:"ghost",size:"sm",className:`inline-flex items-center rounded-full ${n?"bg-blue-800 text-blue-700 hover:bg-blue-600":"bg-primary/10 text-primary hover:bg-primary/20"} px-2.5 py-0.5 text-xs font-medium h-auto`,title:t?"Required by voice model":n?"Essential plugin for agent functionality":"",children:[n&&r.jsx("span",{className:"w-2 h-2 rounded-full bg-white inline-block"}),r.jsx("span",{className:"text-white font-semibold",children:e}),r.jsx("span",{className:dn("ml-1 opacity-70 hover:opacity-100",n&&"text-white"),onClick:()=>{t?o({title:"Can't Remove Plugin",description:"This plugin is required by the selected voice model.",variant:"destructive"}):(e=>{if(Object.keys(Az).includes(e))return p(e),void m(!0);w(e)})(e)},children:""})]},e)})}),r.jsx("div",{className:"mt-3 text-xs text-muted-foreground",children:r.jsxs("span",{className:"inline-flex items-center",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-600 mr-1"}),"Essential plugins provide core functionality"]})})]}),r.jsx("div",{className:"space-y-2",children:r.jsxs(vz,{open:u,onOpenChange:d,children:[r.jsx(yz,{asChild:!0,children:r.jsx(Yi,{variant:"outline",className:"w-full justify-start",children:"Search and add plugins..."})}),r.jsxs(wz,{className:"max-w-[400px]",children:[r.jsx(xz,{children:r.jsx(kz,{children:"Add Plugins"})}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsx("div",{className:"space-y-2",children:r.jsx(Ji,{type:"search",placeholder:"Search plugins...",value:l,onChange:e=>c(e.target.value)})}),r.jsx("div",{className:"max-h-[300px] overflow-y-auto space-y-2",children:0===_.length?r.jsx("p",{className:"text-sm text-muted-foreground",children:"No plugins found."}):_.map(n=>r.jsx(Yi,{variant:"ghost",className:"w-full justify-start font-normal",onClick:()=>{(r=>{if(!g.includes(r))if(t.addPlugin)t.addPlugin(r);else if(t.updateField){const n=Array.isArray(e.plugins)?[...e.plugins]:[];t.updateField("plugins",[...n,r])}})(n),c(""),d(!1)},children:n},n))})]})]})]})}),b&&r.jsx("p",{className:"text-xs text-yellow-500",children:"Plugins configuration has been changed"})]})]})})})}const Nz=i.forwardRef(({className:e,children:t,...n},i)=>r.jsxs(_e,{ref:i,className:Bi("relative overflow-hidden",e),...n,children:[r.jsx(we,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(Iz,{}),r.jsx(xe,{})]}));Nz.displayName=_e.displayName;const Iz=i.forwardRef(({className:e,orientation:t="vertical",...n},i)=>r.jsx(Ee,{ref:i,orientation:t,className:Bi("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:r.jsx(ke,{className:"relative flex-1 rounded-full bg-border"})}));Iz.displayName=Ee.displayName;const Mz=fn("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Cz=i.forwardRef(({className:e,variant:t,...n},i)=>r.jsx("div",{ref:i,role:"alert",className:Bi(Mz({variant:t}),e),...n}));Cz.displayName="Alert";i.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:Bi("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";const jz=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Bi("text-sm [&_p]:leading-relaxed",e),...t}));jz.displayName="AlertDescription";const Oz=i.forwardRef(({characterValue:e,onChange:t},n)=>{const[a,s]=i.useState([]),[o,l]=i.useState(""),[c,u]=i.useState(""),[h,p]=i.useState(!1),[f,m]=i.useState(null),[g,v]=i.useState(""),[y,b]=i.useState(!1),[_,w]=i.useState([]),[x,E]=i.useState(new Set),[k,S]=i.useState({}),[A,T]=i.useState(!0),[N,I]=i.useState(!1),[M,C]=i.useState(""),j=i.useRef(null),O=i.useRef(""),R=i.useRef(null),L=i.useRef(""),P=i.useMemo(()=>e?.plugins||[],[e?.plugins]),{requiredSecrets:$,isLoading:z}=H$(P);i.useEffect(()=>{(async()=>{try{T(!0);const e=lz(),t=await e.system.getEnvironment();S(t||{})}catch(e){console.error("Failed to fetch global environment variables:",e),S({})}finally{T(!1)}})()},[]);const B=i.useCallback(()=>{const e={};return a.forEach(({name:t,value:r})=>{e[t]=r}),_.forEach(t=>{e[t]=null}),e},[a,_]),U=i.useCallback(()=>{const e=B(),t=(z?a.filter(e=>e.isRequired):$).filter(t=>{const r="object"==typeof t&&"name"in t?t.name:t,n=e[r];return(!n||""===n.trim())&&(!k[r]||""===k[r].trim())}).map(e=>"object"==typeof e&&"name"in e?e.name:e);return{isValid:0===t.length,missingSecrets:t}},[B,$,z,a,k]);i.useImperativeHandle(n,()=>({getSecrets:B,validateSecrets:U}),[B,U]);const F=e=>{E(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},H=i.useCallback(()=>{const e=[];e.push("# Environment Variables"),e.push("");const t=a.filter(e=>e.isRequired),r=a.filter(e=>!e.isRequired&&e.value&&""!==e.value.trim());return t.length>0&&(e.push("# Required Secrets"),t.forEach(t=>{t.plugin&&e.push(`# Required by ${t.plugin}`),t.description&&e.push(`# ${t.description}`),e.push(`${t.name}=${t.value||""}`),e.push("")})),r.length>0&&(e.push("# Optional Variables"),r.forEach(t=>{e.push(`${t.name}=${t.value}`)})),e.join("\n")},[a]),G=i.useCallback(e=>{const t=e.split("\n"),r={};for(const n of t){const e=n.trim();if(!e||e.startsWith("#"))continue;const[t,...i]=e.split("="),a=i.join("=").trim().replace(/^['"]|['"]$/g,"");t&&t.trim()&&(r[t.trim()]=a)}return r},[]);i.useEffect(()=>{if(!(z||A||e.id===j.current&&j.current&&0!==a.length)){const t=function(){let e=cD("SECRET_SALT","secretsalt")||"secretsalt",t=Date.now();return null!==j$&&t-j$.timestamp<3e5&&j$.value===e?j$.value:("secretsalt"!==e||O$||(h$.warn("SECRET_SALT is not set or using default value"),O$=!0),j$={value:e,timestamp:t},e)}(),r=e?.settings?.secrets||{},n="object"!=typeof r||Array.isArray(r)||null===r?{}:function(e,t){let r={};for(let[n,i]of Object.entries(e))r[n]="string"==typeof i&&i?R$(i,t):i;return r}(r,t),i=Object.entries(n).map(([e,t])=>{const r=String(t);return{name:e,value:r.startsWith("process.env.")?"":r,isNew:!1,isModified:!1,isDeleted:!1,isRequired:!1,description:void 0,example:void 0,plugin:void 0}}),a=new Map(i.map(e=>[e.name,e])),o=[...i];$.forEach(e=>{if(a.has(e.name)){const t=o.findIndex(t=>t.name===e.name);-1!==t&&(o[t]={...o[t],isRequired:!0,description:e.description,example:e.example,plugin:e.plugin})}else{const t=`eliza_secret_${e.name}`,r=localStorage.getItem(t);o.push({name:e.name,value:r||"",isNew:!0,isModified:!1,isDeleted:!1,isRequired:!0,description:e.description,example:e.example,plugin:e.plugin})}}),o.sort((e,t)=>e.isRequired&&!t.isRequired?-1:!e.isRequired&&t.isRequired?1:e.name.localeCompare(t.name)),s(o),w([]),j.current=e.id||"new-agent";const l=$.map(e=>e.name).sort().join(",");L.current=l}},[e.id,e.settings?.secrets,$,z,k,A]),i.useEffect(()=>{if(z)return;const e=$.map(e=>e.name).sort().join(",");if(e===L.current)return;L.current=e;const t=new Set($.map(e=>e.name));s(e=>{const r=e.map(e=>{const r=t.has(e.name),n=$.find(t=>t.name===e.name);return e.isRequired&&!r?(setTimeout(()=>{w(t=>t.includes(e.name)?t:[...t,e.name])},0),null):r&&n?{...e,isRequired:!0,description:n.description,example:n.example,plugin:n.plugin}:{...e,isRequired:r,description:r?e.description:void 0,example:r?e.example:void 0,plugin:r?e.plugin:void 0}}).filter(Boolean),n=new Set(r.map(e=>e.name));return $.forEach(e=>{if(!n.has(e.name)){const t=`eliza_secret_${e.name}`,n=localStorage.getItem(t);r.push({name:e.name,value:n||"",isNew:!0,isModified:!1,isDeleted:!1,isRequired:!0,description:e.description,example:e.example,plugin:e.plugin})}}),r.sort((e,t)=>e.isRequired&&!t.isRequired?-1:!e.isRequired&&t.isRequired?1:e.name.localeCompare(t.name)),r})},[$,z,k]),i.useEffect(()=>{const e=new Set($.map(e=>e.name));s(t=>t.filter(t=>{const r=e.has(t.name)||!t.isRequired&&t.value&&""!==t.value.trim();return!r&&t.isRequired&&w(e=>e.includes(t.name)?e:[...e,t.name]),r}))},[$]),i.useEffect(()=>{if(!t)return;const r=setTimeout(()=>{const r=B(),n=new Set(a.map(e=>e.name)),i=e?.settings?.secrets||{};Object.keys(i).forEach(e=>{n.has(e)||_.includes(e)||(r[e]=null)}),a.forEach(e=>{if(!_.includes(e.name)&&e.value&&""!==e.value.trim()){const t=`eliza_secret_${e.name}`;localStorage.setItem(t,e.value)}});const s=Object.keys(r).sort().reduce((e,t)=>(e[t]=r[t],e),{}),o=JSON.stringify(s);o!==O.current&&(O.current=o,t(r))},100);return()=>clearTimeout(r)},[a,_,t,e?.settings?.secrets,B]);const q=i.useCallback(e=>{const t=new FileReader;t.onload=e=>{const t=e.target?.result,r=t.split("\n"),n={};for(const i of r){const e=i.trim();if(!e||e.startsWith("#"))continue;const[t,...r]=e.split("="),a=r.join("=").trim().replace(/^['"]|['"]$/g,"");t&&(n[t.trim()]=a)}s(e=>{const t=new Map(e.map(({name:e,value:t,...r})=>[e,{value:t,...r}]));for(const[i,a]of Object.entries(n)){const e=a.startsWith("process.env.")?"":a,r=t.get(i);if(r)t.set(i,{...r,value:e,isModified:!0});else{const r=$.find(e=>e.name===i);t.set(i,{value:e,isNew:!0,isModified:!1,isRequired:r?.required||!1,description:r?.description,example:r?.example,plugin:r?.plugin})}}const r=Array.from(t.entries()).map(([e,t])=>({name:e,...t}));return r.sort((e,t)=>e.isRequired&&!t.isRequired?-1:!e.isRequired&&t.isRequired?1:e.name.localeCompare(t.name)),r}),_.length>0&&w(e=>e.filter(e=>!Object.keys(n).includes(e)))},t.readAsText(e)},[$,_]);i.useEffect(()=>{const e=R.current;if(!e)return;const t=e=>{e.preventDefault(),e.stopPropagation()},r=()=>{b(!0)},n=()=>{b(!1)},i=e=>{t(e),n();const r=e.dataTransfer?.files?.[0];r&&r.name.endsWith(".env")&&q(r)};return["dragenter","dragover"].forEach(t=>e.addEventListener(t,r)),["dragleave","drop"].forEach(t=>e.addEventListener(t,n)),["dragenter","dragover","dragleave","drop"].forEach(r=>e.addEventListener(r,t)),e.addEventListener("drop",i),()=>{["dragenter","dragover","dragleave","drop"].forEach(r=>e.removeEventListener(r,t)),["dragenter","dragover"].forEach(t=>e.removeEventListener(t,r)),["dragleave","drop"].forEach(t=>e.removeEventListener(t,n)),e.removeEventListener("drop",i)}},[q]);const V=()=>{if(o&&c){const e=a.some(e=>e.name===o),t=c.startsWith("process.env.")?"":c;if(e){s(a.map(e=>e.name===o?{...e,value:t,isModified:!0}:e));const e=`eliza_secret_${o}`;localStorage.setItem(e,t),l(""),u("")}else{_.includes(o)&&w(_.filter(e=>e!==o));const e=$.find(e=>e.name===o),r={name:o,value:t,isNew:!0,isRequired:e?.required||!1,description:e?.description,example:e?.example,plugin:e?.plugin},n=`eliza_secret_${o}`;localStorage.setItem(n,t);const i=[...a,r];i.sort((e,t)=>e.isRequired&&!t.isRequired?-1:!e.isRequired&&t.isRequired?1:e.name.localeCompare(t.name)),s(i),l(""),u("")}}},W=e=>{null!==f&&f!==e&&m(null),m(e),v(a[e].value),E(t=>new Set(t).add(e))},Z=e=>{const t=[...a],r=g.startsWith("process.env.")?"":g;if(t[e].value!==r){t[e].value=r,t[e].isModified=!0;const n=`eliza_secret_${t[e].name}`;localStorage.setItem(n,r)}s(t),m(null),v(""),E(t=>{const r=new Set(t);return r.delete(e),r})},K=()=>{const e=f;m(null),v(""),null!==e&&E(t=>{const r=new Set(t);return r.delete(e),r})},Y=e=>{const t=a[e].name,r=`eliza_secret_${t}`;localStorage.removeItem(r),w([..._,t]),s(a.filter((t,r)=>r!==e)),m(null)},J=$.filter(e=>{const t=a.find(t=>t.name===e.name),r=t&&t.value&&""!==t.value.trim(),n=k[e.name]&&""!==k[e.name].trim();return!r&&!n}),X=i.useCallback(e=>k[e]&&""!==k[e].trim(),[k]),Q="scrollbar-visible";return r.jsxs("div",{className:"w-full h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Variables"}),r.jsxs(Aa,{variant:"secondary",className:"text-xs",children:[a.filter(e=>e.value&&""!==e.value.trim()).length," Service Variables"]})]}),r.jsxs(Yi,{type:"button",variant:"outline",size:"sm",onClick:()=>{C(H()),I(!0)},className:"flex items-center gap-2",children:[r.jsx(Se,{className:"w-4 h-4"}),"Raw Editor"]})]}),r.jsx(Nz,{className:"flex-1",children:r.jsxs("div",{className:"p-4 space-y-4",children:[(z||A)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(aa,{className:"h-4 w-48"}),r.jsx(aa,{className:"h-4 w-64"})]}),!z&&!A&&J.length>0&&r.jsxs(Cz,{children:[r.jsx(se,{className:"h-4 w-4"}),r.jsxs(jz,{children:[r.jsx("strong",{children:"Missing required secrets:"}),r.jsx("ul",{className:"mt-2 space-y-1",children:J.map(e=>r.jsxs("li",{className:"text-sm",children:[" ",r.jsx("code",{className:"font-mono",children:e.name}),e.plugin&&r.jsxs("span",{className:"text-muted-foreground ml-1",children:["(required by ",e.plugin,")"]})]},e.name))})]})]}),!z&&!A&&$.some(e=>X(e.name)&&!a.find(t=>t.name===e.name)?.value)&&r.jsxs(Cz,{className:"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-900/20",children:[r.jsx(Ae,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),r.jsxs(jz,{className:"text-blue-800 dark:text-blue-200",children:[r.jsx("strong",{children:"Global environment variables detected:"}),r.jsx("p",{className:"text-sm mt-1",children:"Some required secrets are automatically using values from your global environment settings. To override any of these for this specific agent, simply enter a new value in the field."})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"hidden md:grid md:grid-cols-[minmax(200px,1fr)_2fr_auto] gap-2 items-end",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{htmlFor:"new-secret-name",className:"text-xs font-medium text-muted-foreground uppercase",children:"Name"}),r.jsx(Ji,{id:"new-secret-name",placeholder:"VARIABLE_NAME",value:o,onChange:e=>l(e.target.value),className:"font-mono text-sm",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),V())}})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{htmlFor:"new-secret-value",className:"text-xs font-medium text-muted-foreground uppercase",children:"Value"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`rounded border ${Q}`,children:r.jsx(Ji,{id:"new-secret-value",type:h?"text":"password",placeholder:"Enter value...",value:c,onChange:e=>u(e.target.value),className:"font-mono text-sm pr-10 border-0 focus-visible:ring-0 w-auto min-w-full rounded",style:{minWidth:"100%"},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),V())}})}),r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 p-0",onClick:()=>p(!h),children:h?r.jsx(Te,{className:"w-4 h-4"}):r.jsx(Ne,{className:"w-4 h-4"})})]})]}),r.jsx(Yi,{type:"button",onClick:V,size:"sm",children:"Add"})]}),r.jsxs("div",{className:"md:hidden space-y-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{htmlFor:"new-secret-name-mobile",className:"text-xs font-medium text-muted-foreground uppercase",children:"Name"}),r.jsx(Ji,{id:"new-secret-name-mobile",placeholder:"VARIABLE_NAME",value:o,onChange:e=>l(e.target.value),className:"font-mono text-sm w-full",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),document.getElementById("new-secret-value-mobile")?.focus())}})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{htmlFor:"new-secret-value-mobile",className:"text-xs font-medium text-muted-foreground uppercase",children:"Value"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`rounded border ${Q}`,children:r.jsx(Ji,{id:"new-secret-value-mobile",type:h?"text":"password",placeholder:"Enter value...",value:c,onChange:e=>u(e.target.value),className:"font-mono text-sm pr-10 border-0 focus-visible:ring-0 w-auto min-w-full rounded",style:{minWidth:"100%"},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),V())}})}),r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 p-0",onClick:()=>p(!h),children:h?r.jsx(Te,{className:"w-4 h-4"}):r.jsx(Ne,{className:"w-4 h-4"})})]})]}),r.jsx(Yi,{type:"button",onClick:V,size:"sm",className:"w-full",children:"Add Variable"})]})]}),a.length>0&&r.jsxs(sa,{children:[r.jsxs("div",{className:"hidden md:block border rounded-lg overflow-hidden relative",children:[r.jsx("div",{className:"bg-muted/50 px-4 py-2 border-b",children:r.jsxs("div",{className:"grid grid-cols-[minmax(200px,1fr)_2fr_auto] gap-4 text-xs font-medium text-muted-foreground uppercase",children:[r.jsx("div",{children:"Name"}),r.jsx("div",{children:"Value"}),r.jsx("div",{className:"text-center",children:"Actions"})]})}),r.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:a.map((e,t)=>r.jsxs("div",{className:"grid grid-cols-[minmax(200px,1fr)_2fr_auto] gap-4 items-center px-4 py-3 border-b last:border-b-0 hover:bg-muted/10 transition-colors "+(!e.isRequired||e.value&&""!==e.value.trim()||X(e.name)?"":"bg-red-500/5"),children:[r.jsxs("div",{className:"pr-2",children:[r.jsxs("div",{className:"flex items-start gap-2 flex-wrap",children:[r.jsx("code",{className:"font-mono text-sm font-medium break-words cursor-default",children:e.name}),e.isRequired&&r.jsx(Aa,{variant:"outline",className:"text-xs shrink-0",children:"Required"}),X(e.name)&&r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsxs(Aa,{variant:"secondary",className:"text-xs shrink-0 flex items-center gap-1",children:[r.jsx(Ae,{className:"w-3 h-3"}),"Global"]})}),r.jsx(ca,{children:r.jsx("p",{children:e.value?"Overriding global value":"Value pulled from global environment. Add new value to override."})})]})]}),e.description&&r.jsx("div",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.description}),e.plugin&&r.jsxs("div",{className:"text-xs text-muted-foreground truncate",children:["Required by: ",e.plugin]})]}),r.jsx("div",{className:"min-w-0",children:f===t?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"relative flex-1",children:r.jsx("div",{className:`rounded border ${Q}`,children:r.jsx(Ji,{value:g,onChange:e=>v(e.target.value),className:"font-mono text-sm border-0 focus-visible:ring-0 w-auto min-w-full rounded",style:{minWidth:"100%"},type:x.has(t)?"text":"password",placeholder:X(e.name)&&!e.value?"Using global (enter to override)":e.example||"Enter value...",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),Z(t)):"Escape"===e.key&&K()}})})}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",onClick:()=>F(t),className:"h-8 w-8 p-0",children:x.has(t)?r.jsx(Te,{className:"w-4 h-4"}):r.jsx(Ne,{className:"w-4 h-4"})}),r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",onClick:()=>Z(t),className:"h-8 w-8 p-0 text-green-600 hover:text-green-700",children:r.jsx(D,{className:"w-4 h-4"})}),r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",onClick:K,className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:r.jsx(d,{className:"w-4 h-4"})})]})]}):r.jsxs("div",{className:"flex items-center gap-2 group",children:[r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx("div",{className:`flex-1 border rounded px-3 py-1 ${Q}`,children:x.has(t)?r.jsx("code",{className:"font-mono text-sm whitespace-nowrap block",children:e.value||r.jsx("span",{className:"text-muted-foreground italic",children:X(e.name)?"Using global value":e.example?`e.g. ${e.example}`:"Not set"})}):e.value?r.jsx("code",{className:"font-mono text-sm text-muted-foreground block",children:""}):r.jsx("span",{className:"text-muted-foreground italic text-sm block",children:X(e.name)?"Using global value":"Not set"})})}),X(e.name)&&r.jsx(ca,{className:"max-w-xs",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-semibold",children:"Global Environment Variable"}),r.jsx("p",{className:"text-sm",children:e.value?"You've entered a custom value for this agent. This overrides the global environment setting. Clear the field to use the global value.":"This secret is currently using the value from your global environment settings. The actual value is hidden for security. Enter a value here if you want to override it for this agent only."})]})})]}),r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",onClick:()=>F(t),className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:x.has(t)?r.jsx(Te,{className:"w-4 h-4"}):r.jsx(Ne,{className:"w-4 h-4"})})]})}),r.jsxs("div",{className:"flex items-center justify-center gap-1",children:[r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",onClick:()=>W(t),disabled:null!==f&&f!==t,className:"h-8 w-8 p-0",children:r.jsx(Ie,{className:"w-4 h-4"})}),r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",onClick:()=>Y(t),disabled:null!==f,className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:r.jsx(Me,{className:"w-4 h-4"})})]})]},`${e.name}-${t}`))})]}),r.jsx("div",{className:"md:hidden space-y-3",children:a.map((e,t)=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-3 "+(!e.isRequired||e.value&&""!==e.value.trim()?"":"border-red-500/50 bg-red-500/5"),children:[r.jsx("div",{className:"space-y-1",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("code",{className:"font-mono text-sm font-medium break-all",children:e.name}),e.isRequired&&r.jsx(Aa,{variant:"outline",className:"text-xs",children:"Required"}),X(e.name)&&r.jsxs(Aa,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[r.jsx(Ae,{className:"w-3 h-3"}),"Global"]})]}),e.description&&r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.description}),e.plugin&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Required by: ",e.plugin]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",onClick:()=>W(t),disabled:null!==f&&f!==t,className:"h-8 w-8 p-0",children:r.jsx(Ie,{className:"w-4 h-4"})}),r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",onClick:()=>Y(t),disabled:null!==f,className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:r.jsx(Me,{className:"w-4 h-4"})})]})]})}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Value"}),f===t?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`rounded border ${Q}`,children:r.jsx(Ji,{value:g,onChange:e=>v(e.target.value),className:"font-mono text-sm pr-10 border-0 focus-visible:ring-0 w-auto min-w-full rounded",style:{minWidth:"100%"},type:x.has(t)?"text":"password",placeholder:X(e.name)&&!e.value?"Using global (enter to override)":e.example||"Enter value...",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),Z(t)):"Escape"===e.key&&K()}})}),r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",onClick:()=>F(t),className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 p-0",children:x.has(t)?r.jsx(Te,{className:"w-4 h-4"}):r.jsx(Ne,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(Yi,{type:"button",variant:"outline",size:"sm",onClick:()=>Z(t),className:"flex-1",children:[r.jsx(D,{className:"w-4 h-4 mr-2"}),"Save"]}),r.jsxs(Yi,{type:"button",variant:"ghost",size:"sm",onClick:K,className:"flex-1",children:[r.jsx(d,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx("div",{className:`flex-1 border rounded px-3 py-1 ${Q}`,children:x.has(t)?r.jsx("code",{className:"font-mono text-sm whitespace-nowrap block",children:e.value||r.jsx("span",{className:"text-muted-foreground italic",children:X(e.name)?"Using global value":e.example?`e.g. ${e.example}`:"Not set"})}):e.value?r.jsx("code",{className:"font-mono text-sm text-muted-foreground block",children:""}):r.jsx("span",{className:"text-muted-foreground italic text-sm block",children:X(e.name)?"Using global value":"Not set"})})}),X(e.name)&&r.jsx(ca,{className:"max-w-xs",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-semibold",children:"Global Environment Variable"}),r.jsx("p",{className:"text-sm",children:e.value?"You've entered a custom value for this agent. This overrides the global environment setting. Clear the field to use the global value.":"This secret is currently using the value from your global environment settings. The actual value is hidden for security. Enter a value here if you want to override it for this agent only."})]})})]}),r.jsx(Yi,{type:"button",variant:"ghost",size:"sm",onClick:()=>F(t),className:"h-8 w-8 p-0",children:x.has(t)?r.jsx(Te,{className:"w-4 h-4"}):r.jsx(Ne,{className:"w-4 h-4"})})]})]})]},`${e.name}-${t}-mobile`))})]}),r.jsxs("div",{ref:R,className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors "+(y?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-muted-foreground/50"),onClick:()=>document.getElementById("env-upload")?.click(),children:[r.jsx(Ce,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Drag & drop ",r.jsx("code",{className:"bg-muted px-1 rounded",children:".env"})," file or click to select"]}),r.jsx("input",{id:"env-upload",type:"file",accept:"*/*",className:"hidden",onChange:e=>{const t=e.target.files?.[0];t&&t.name.endsWith(".env")&&q(t)}})]})]})}),r.jsx(vz,{open:N,onOpenChange:I,children:r.jsxs(wz,{className:"max-w-3xl h-[600px] flex flex-col",children:[r.jsxs(xz,{children:[r.jsx(kz,{children:"Raw Editor"}),r.jsx(Sz,{children:"Add, edit, or delete your project variables in .env format"})]}),r.jsx("div",{className:"flex-1 border rounded-lg overflow-hidden",children:r.jsx(Da,{value:M,onChange:e=>C(e.target.value),placeholder:"# Environment Variables\n\n# Required Secrets\nAPI_KEY=your_api_key_here\n\n# Optional Variables\nDEBUG=true\n\n# Comments are supported",className:"w-full h-full resize-none border-0 font-mono text-sm focus-visible:ring-0"})}),r.jsxs(Ez,{children:[r.jsxs(Yi,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(M)},children:[r.jsx(je,{className:"w-4 h-4 mr-2"}),"Copy ENV"]}),r.jsx(Yi,{variant:"outline",size:"sm",onClick:()=>I(!1),children:"Cancel"}),r.jsx(Yi,{size:"sm",onClick:()=>{const e=G(M),t=a.map(t=>{if(e.hasOwnProperty(t.name)){const r=e[t.name].startsWith("process.env.")?"":e[t.name];return{...t,value:r,isModified:t.value!==r}}if(t.isRequired){const e=`eliza_secret_${t.name}`,r=localStorage.getItem(e);return{...t,value:r||"",isModified:t.value!==(r||"")}}return null}).filter(Boolean);Object.entries(e).forEach(([e,r])=>{if(!t.some(t=>t.name===e)){const n=r.startsWith("process.env.")?"":r,i=$.find(t=>t.name===e);t.push({name:e,value:n,isNew:!0,isModified:!1,isDeleted:!1,isRequired:i?.required||!1,description:i?.description,example:i?.example,plugin:i?.plugin})}}),t.sort((e,t)=>e.isRequired&&!t.isRequired?-1:!e.isRequired&&t.isRequired?1:e.name.localeCompare(t.name)),s(t),I(!1)},children:"Update Variables"})]})]})})]})});function Rz(e){const t=i.useRef(JSON.parse(JSON.stringify(e))),{value:r,updateField:n,addArrayItem:a,removeArrayItem:s,reset:o,updateSettings:l}=function(e){const[t,r]=i.useState(e),n=i.useCallback((e,t)=>{r(r=>{if(!e.includes("."))return{...r,[e]:t};const n=e.split("."),i=n[0],s=n.slice(1).join(".");if(!isNaN(Number(n[1]))){const e=n[0],i=Number(n[1]),s=r[e],o=Array.isArray(s)?[...s]:[];if(2===n.length)o[i]=t;else{const e=n.slice(2).join(".");o[i]=a(o[i],e,t)}return{...r,[e]:o}}if(e.startsWith("settings.secrets.")){const n=e.split(".")[2],i=r.settings||{},a={...i.secrets||{},[n]:t};return{...r,settings:{...i,secrets:a}}}return{...r,[i]:a(r[i],s,t)}})},[]),a=(e,t,r)=>{if(!t.includes("."))return{...e,[t]:r};const[n,...i]=t.split("."),s=i.join(".");return{...e,[n]:a(e[n]||{},s,r)}},s=i.useCallback((e,t)=>{r(r=>{const n=e.split(".");if(1===n.length){const e=n[0],i=Array.isArray(r[e])?[...r[e]]:[];return{...r,[e]:[...i,t]}}const i=e,a=l(r,i),s=Array.isArray(a)?[...a]:[];return c(r,i,[...s,t])})},[]),o=i.useCallback((e,t)=>{r(r=>{const n=e.split(".");if(1===n.length){const e=n[0],i=Array.isArray(r[e])?[...r[e]]:[];return t<0||t>=i.length?r:{...r,[e]:[...i.slice(0,t),...i.slice(t+1)]}}const i=e,a=l(r,i);if(!Array.isArray(a)||t<0||t>=a.length)return r;const s=[...a.slice(0,t),...a.slice(t+1)];return c(r,i,s)})},[]),l=(e,t)=>{const r=t.split(".");let n=e;for(const i of r){if(null==n)return;n=n[i]}return n},c=(e,t,r)=>{const n=t.split(".");if(1===n.length)return{...e,[n[0]]:r};const[i,...a]=n,s=e[i]||{};return{...e,[i]:c(s,a.join("."),r)}},u=i.useCallback(()=>{r(e)},[e]),d=i.useCallback(e=>{r(t=>{const{secrets:r,avatar:n,...i}=e,a={...t.settings,...i};if("string"==typeof n&&(a.avatar=n),r){const e={};Object.entries(r).forEach(([t,r])=>{null!==r&&(e[t]=r)}),a.secrets=e}return{...t,settings:a}})},[]);return{value:t,updateField:n,addArrayItem:s,removeArrayItem:o,reset:u,updateSettings:d}}(e),c=i.useCallback(e=>{Object.entries(e).forEach(([e,t])=>{"settings"===e&&t?l({...r.settings,...t}):"style"===e&&t?n("style",{all:t.all||[],chat:t.chat||[],post:t.post||[]}):Array.isArray(t)?n(e,[...t]):n(e,t)})},[r.settings,n,l]),u=i.useCallback((e,t)=>{n(`settings.${e}`,t)},[n]),d=i.useCallback(e=>{l(e)},[l]),h=i.useCallback(e=>{n("system",e)},[n]),p=i.useCallback((e,t)=>{const n=r.settings||{},i=n.secrets||{},a={..."object"!=typeof i||null===i||Array.isArray(i)?{}:i,[e]:t};l({...n,secrets:a})},[r.settings,l]),f=i.useCallback(e=>{const t=r.settings||{},n=t.secrets||{},i={..."object"!=typeof n||null===n||Array.isArray(n)?{}:n};delete i[e];const a={...t,secrets:i};l(a)},[r.settings,l]),m=i.useCallback((e,t)=>{a(e,t)},[a]),g=i.useCallback((e,t)=>{s(e,t)},[s]),v=i.useCallback((e,t,r)=>{n(`${e}.${t}`,r)},[n]),y=i.useCallback((e,t)=>{a(`style.${e}`,t)},[a]),b=i.useCallback((e,t)=>{s(`style.${e}`,t)},[s]),_=i.useCallback((e,t,r)=>{n(`style.${e}.${t}`,r)},[n]),w=i.useCallback((e,t)=>{n(`style.${e}`,t)},[n]),x=i.useCallback(e=>{a("plugins",e)},[a]),E=i.useCallback(e=>{s("plugins",e)},[s]),k=i.useCallback(e=>{n("plugins",e)},[n]),S=i.useCallback(e=>{u("avatar",e)},[u]),A=i.useCallback(()=>{const e={},n=r,i=t.current;["name","username","system"].forEach(t=>{n[t]!==i[t]&&(e[t]=n[t])}),n.enabled!==i.enabled&&(e.enabled=n.enabled),JSON.stringify(n.bio)!==JSON.stringify(i.bio)&&(e.bio=n.bio),JSON.stringify(n.topics)!==JSON.stringify(i.topics)&&(e.topics=n.topics),JSON.stringify(n.adjectives)!==JSON.stringify(i.adjectives)&&(e.adjectives=n.adjectives),JSON.stringify(n.plugins)!==JSON.stringify(i.plugins)&&(e.plugins=n.plugins),JSON.stringify(n.style)!==JSON.stringify(i.style)&&(e.style=n.style);const a=i.settings||{},s=n.settings||{};if(JSON.stringify(s)!==JSON.stringify(a)){if(e.settings={},s.avatar!==a.avatar&&(e.settings.avatar=s.avatar),JSON.stringify(s.voice)!==JSON.stringify(a.voice)&&(e.settings.voice=s.voice),JSON.stringify(s.secrets)!==JSON.stringify(a.secrets)){const t=a.secrets||{},r=s.secrets||{},n="object"!=typeof t||null===t||Array.isArray(t)?{}:t,i="object"!=typeof r||null===r||Array.isArray(r)?{}:r,o={};let l=!1;Object.entries(i).forEach(([e,t])=>{n[e]!==t&&(o[e]=t,l=!0)}),Object.keys(n).forEach(e=>{void 0===i[e]&&(o[e]=null,l=!0)}),l&&(e.settings||(e.settings={}),e.settings.secrets=o)}0===Object.keys(e.settings).length&&delete e.settings}return e},[r]);return{agent:r,updateField:n,reset:o,updateSettings:l,setSettings:d,getChangedFields:A,updateSetting:u,updateSystemPrompt:h,updateSecret:p,removeSecret:f,addContentItem:m,removeContentItem:g,updateContentItem:v,addStyleRule:y,removeStyleRule:b,updateStyleRule:_,setStyleArray:w,addPlugin:x,removePlugin:E,setPlugins:k,updateAvatar:S,importAgent:c}}Oz.displayName="SecretPanel";const Lz=ys("none")?.template||{name:"",username:"",system:"",bio:[],topics:[],adjectives:[],plugins:["@elizaos/plugin-sql","@elizaos/plugin-openai","@elizaos/plugin-bootstrap"],settings:{secrets:{}}};function Pz(){const e=Oe(),{toast:t}=Va(),n=Re(),[a]=i.useState({...Lz}),s=i.useRef(null),[o,l]=i.useState({}),c=Rz(a);return r.jsx("div",{className:"h-full w-full",children:r.jsx(mz,{characterValue:c.agent,setCharacterValue:c,title:"Create Agent",description:"Configure your AI agent's behavior and capabilities.",onSubmit:async r=>{try{const i=(e=>({...e,bio:e.bio??[],messageExamples:e.messageExamples??[],postExamples:e.postExamples??[],topics:e.topics??[],adjectives:e.adjectives??[],plugins:e.plugins??[],style:{all:e.style?.all??[],chat:e.style?.chat??[],post:e.style?.post??[]},settings:e.settings??{secrets:{}}}))(r),a=o||s.current?.getSecrets()||{};a&&Object.keys(a).length>0&&(i.settings={...i.settings,secrets:a});const l=lz();await l.agents.createAgent({agent:i}),n.invalidateQueries({queryKey:["characters"]}),t({title:"Success",description:"Agent created successfully!"}),n.invalidateQueries({queryKey:["agents"]}),e("/")}catch(i){t({title:"Error",description:i instanceof Error?i.message:"Failed to create agent",variant:"destructive"})}},onReset:()=>{c.reset(),l({})},onDelete:()=>{e("/")},onTemplateChange:()=>{l({})},isAgent:!0,secretPanelRef:s,customComponents:[{name:"Plugins",component:r.jsx(Tz,{characterValue:c.agent,setCharacterValue:c})},{name:"Secret",component:r.jsx(Oz,{characterValue:c.agent,ref:s,onChange:e=>{l(e)}})},{name:"Avatar",component:r.jsx(gz,{characterValue:c.agent,setCharacterValue:c})}]})})}function Dz({open:e,onOpenChange:t,title:n,description:i,confirmText:a="Confirm",cancelText:s="Cancel",onConfirm:o,variant:l="destructive"}){return r.jsx(bs,{open:e,onOpenChange:t,children:r.jsxs(xs,{children:[r.jsxs(Es,{children:[r.jsx(Ss,{children:n}),r.jsx(As,{children:i})]}),r.jsxs(ks,{children:[r.jsx(Ns,{children:s}),r.jsx(Ts,{onClick:()=>{o(),t(!1)},className:"destructive"===l?"bg-destructive text-destructive-foreground":void 0,children:a})]})]})})}function $z({open:e,onOpenChange:t,onApiKeySaved:n}){const[a,s]=i.useState(""),[o,l]=i.useState(!1),{toast:c}=Va(),u="undefined"==typeof window?"eliza-api-key":`eliza-api-key-${window.location.origin}`;i.useEffect(()=>{if(e)try{const e=localStorage.getItem(u);e&&s(e)}catch(t){console.error("Unable to access localStorage",t)}},[e,u]);return r.jsx(vz,{open:e,onOpenChange:t,children:r.jsxs(wz,{className:"sm:max-w-[425px]",children:[r.jsxs(xz,{children:[r.jsx(kz,{children:"API Key Required"}),r.jsx(Sz,{children:"Please enter the API key required to connect to the Eliza server. This key will be stored locally in your browser."})]}),r.jsx("div",{className:"grid gap-4 py-4",children:r.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[r.jsx(Na,{htmlFor:"api-key",className:"text-right",children:"API Key"}),r.jsxs("div",{className:"col-span-3 relative",children:[r.jsx(Ji,{id:"api-key",type:o?"text":"password",value:a,onChange:e=>s(e.target.value),className:"pr-10"}),r.jsx(Yi,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 h-7 w-7 -translate-y-1/2 text-muted-foreground",onClick:()=>l(!o),"aria-label":o?"Hide API key":"Show API key",children:o?r.jsx(Te,{className:"h-4 w-4"}):r.jsx(Ne,{className:"h-4 w-4"})})]})]})}),r.jsx(Ez,{children:r.jsx(Yi,{type:"button",onClick:()=>{if(a.trim()){try{localStorage.setItem(u,a)}catch(e){return void c({title:"Storage Error",description:"Unable to save the API key (browser storage blocked).",variant:"destructive"})}n(),c({title:"API Key Saved",description:"The API key has been stored locally."}),t(!1)}else c({title:"API Key Required",description:"Please enter a valid API key.",variant:"destructive"})},children:"Save Key"})})]})})}const zz=i.createContext(void 0),Bz=({children:e})=>{const t=Re(),[n,a]=i.useState(!1),[s,o]=i.useState(null),[l,c]=i.useState(!0);i.useEffect(()=>{u()},[]);const u=async()=>{const e=localStorage.getItem("token");if(e){try{const t=await fetch("/api/auth/verify",{headers:{Authorization:`Bearer ${e}`}}),r=await t.json();r.success?o(r.user):localStorage.removeItem("token")}catch(t){console.error("Auth check failed:",t),localStorage.removeItem("token")}c(!1)}else c(!1)},d=i.useCallback(()=>{a(!0)},[]),h=i.useCallback(()=>{a(!1),L$("API key saved via dialog, invalidating ping query."),t.invalidateQueries({queryKey:["ping"]})},[t]);return r.jsxs(zz.Provider,{value:{user:s,isAuthenticated:!!s,isLoading:l,login:async e=>{try{const t=await fetch("/api/auth/telegram",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!r.success)throw new Error(r.error||"Login failed");localStorage.setItem("token",r.token),o(r.user)}catch(t){throw console.error("Login error:",t),t}},logout:async()=>{const e=localStorage.getItem("token");if(e)try{await fetch("/api/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${e}`}})}catch(t){console.error("Logout error:",t)}localStorage.removeItem("token"),o(null)},openApiKeyDialog:d},children:[e,r.jsx($z,{open:n,onOpenChange:a,onApiKeySaved:h})]})},Uz=()=>{const e=i.useContext(zz);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e};var Fz={},Hz={},Gz={};Object.defineProperty(Gz,"__esModule",{value:!0});var qz={},Vz={},Wz={};Object.defineProperty(Wz,"__esModule",{value:!0}),Wz.typeGuard=function(e,t){return t},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CtxLike=void 0;var t=Wz;!function(e){e.match=function(e){return(0,t.typeGuard)(e,!0)&&e instanceof Object&&"function"==typeof e.done&&"function"==typeof e.abort&&"function"==typeof e.zz__addHandler&&"function"==typeof e.zz__removeHandler}}(e.CtxLike||(e.CtxLike={}))}(Vz),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=t&&t.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),n(Vz,e)}(qz);var Zz={};Object.defineProperty(Zz,"__esModule",{value:!0}),Zz.__hack=void 0,
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0
 
THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.
 
See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
Zz.__hack="NOT TYPE ONLY";var Kz={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EventTargetLike=void 0;var t=Wz;!function(e){var r,n,i,a;!function(e){e.match=function(e){return(0,t.typeGuard)(e,!0)&&e instanceof Object&&"function"==typeof e.subscribe}}(r=e.RxJSSubject||(e.RxJSSubject={})),function(e){e.match=function(e){return(0,t.typeGuard)(e,!0)&&e instanceof Object&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}}(n=e.NodeStyleEventEmitter||(e.NodeStyleEventEmitter={})),function(e){e.match=function(e){return(0,t.typeGuard)(e,!0)&&e instanceof Object&&"function"==typeof e.on&&"function"==typeof e.off}}(i=e.JQueryStyleEventEmitter||(e.JQueryStyleEventEmitter={})),function(e){e.match=function(e){return(0,t.typeGuard)(e,!0)&&e instanceof Object&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}}(a=e.HasEventTargetAddRemove||(e.HasEventTargetAddRemove={})),e.canBe=function(e){try{return a.match(e)||n.match(e)||i.match(e)||r.match(e)}catch(t){return!1}}}(e.EventTargetLike||(e.EventTargetLike={}))}(Kz);var Yz,Jz={},Xz=t&&t.__extends||(Yz=function(e,t){return Yz=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Yz(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Yz(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Jz,"__esModule",{value:!0}),Jz.DetachedEvtError=Jz.TimeoutEvtError=void 0;var Qz=function(e){function t(t){var r=this.constructor,n=e.call(this,"Evt timeout after ".concat(t,"ms"))||this;return n.timeout=t,Object.setPrototypeOf(n,r.prototype),n}return Xz(t,e),t}(Error);Jz.TimeoutEvtError=Qz;var eB=function(e){function t(){var t=this.constructor,r=e.call(this,"Evt handler detached")||this;return Object.setPrototypeOf(r,t.prototype),r}return Xz(t,e),t}(Error);Jz.DetachedEvtError=eB;var tB={};Object.defineProperty(tB,"__esModule",{value:!0}),function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=t&&t.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=t&&t.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},a=t&&t.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(e,"__esModule",{value:!0}),e.dom=void 0,i(Gz,e),i(qz,e),e.dom=a(Zz),i(Kz,e),i(Jz,e),i(tB,e)}(Hz);var rB,nB={},iB={},aB={};rB=aB,Object.defineProperty(rB,"__esModule",{value:!0}),rB.convertOperatorToStatelessF=void 0,rB.convertOperatorToStatelessF=function(e){return"function"!=typeof e?(r=(t=e)[1],function(e,n){var i=t[0](e,r,n);return null!==i&&n(function(){return r=i[0]}),i}):function(e){return function(t,r){var n=e(t,r);return n instanceof Object&&!("input"in n)&&1===n.length?n:n?[t]:null}}(e);var t,r};var sB={};Object.defineProperty(sB,"__esModule",{value:!0}),sB.id=void 0;sB.id=function(e){return e};var oB=t&&t.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s},lB=t&&t.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(iB,"__esModule",{value:!0}),iB.compose=void 0;var cB=aB,uB=sB;iB.compose=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(1===t.length){var n=oB(t,1)[0];return(0,cB.convertOperatorToStatelessF)(n)}var i=oB(t),a=i[0],s=i[1],o=i.slice(2),l=function(e,t){var r=(0,cB.convertOperatorToStatelessF)(e),n=(0,cB.convertOperatorToStatelessF)(t);return(0,uB.id)(function(e,t){var i=r(e,t);if(!i)return null;var a=oB(i,1)[0],s=n(a,t);return s?[s[0]]:s})}(a,s);return 0===o.length?l:e.apply(void 0,lB([l],oB(o),!1))},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.compose=void 0;var t=iB;Object.defineProperty(e,"compose",{enumerable:!0,get:function(){return t.compose}})}(nB);var dB={},hB={},pB={__esModule:!0};pB.Polyfill=pB.LightMapImpl=void 0;var fB=function(){function e(){this.record=[]}return e.prototype.has=function(e){return this.record.map(function(e){return e[0]}).indexOf(e)>=0},e.prototype.get=function(e){var t=this.record.filter(function(t){return t[0]===e})[0];if(void 0!==t)return t[1]},e.prototype.set=function(e,t){var r=this.record.filter(function(t){return t[0]===e})[0];return void 0===r?this.record.push([e,t]):r[1]=t,this},e.prototype.delete=function(e){var t=this.record.map(function(e){return e[0]}).indexOf(e);return!(t<0)&&(this.record.splice(t,1),!0)},e.prototype.keys=function(){return this.record.map(function(e){return e[0]})},e}();pB.LightMapImpl=fB,pB.Polyfill="undefined"!=typeof Map?Map:fB,hB.__esModule=!0,hB.Polyfill=hB.LightSetImpl=void 0;var mB=pB,gB=function(){function e(e){if(this.map=new mB.Polyfill,void 0!==e)for(var t=0,r=e;t<r.length;t++){var n=r[t];this.add(n)}}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.add=function(e){return this.map.set(e,!0),this},e.prototype.values=function(){return this.map.keys()},e.prototype.delete=function(e){return this.map.delete(e)},e}();hB.LightSetImpl=gB,hB.Polyfill="undefined"!=typeof Set?Set:gB;var vB={__esModule:!0,Polyfill:void 0},yB=pB;vB.Polyfill="undefined"!=typeof WeakMap?WeakMap:yB.Polyfill;var bB={},_B=t&&t.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(bB,"__esModule",{value:!0}),bB.AssertionError=void 0,bB.assert=function e(t,r){0===arguments.length&&(t=!0);if(void 0!==xB)return void(xB=void 0);if(!t){var n=new wB("function"==typeof r?r():r);throw Error.captureStackTrace&&Error.captureStackTrace(n,e),n}},bB.is=function(e){var t={};if(void 0!==xB)throw xB=void 0,new Error(EB);return xB=t,Promise.resolve().then(function(){if(xB===t)throw new Error(EB)}),null};var wB=function(e){function t(t){var r=this.constructor,n=e.call(this,"Wrong assertion encountered"+(t?': "'.concat(t,'"'):""))||this;return n.originalMessage=t,Object.setPrototypeOf(n,r.prototype),n}return _B(t,e),t}(Error);bB.AssertionError=wB;var xB=void 0;var EB="Wrong usage of the `is` function refer to https://docs.tsafe.dev/is";var kB={},SB={},AB=t&&t.__assign||function(){return AB=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},AB.apply(this,arguments)};Object.defineProperty(SB,"__esModule",{value:!0}),SB.overwriteReadonlyProp=function(e,t,r){try{e[t]=r}catch(a){}if(e[t]===r)return r;var n=void 0,i=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!0,configurable:!0};if(i.get)throw new Error("Probably a wrong idea to overwrite ".concat(String(t)," getter"));try{Object.defineProperty(e,t,AB(AB({},i),{value:r}))}catch(s){n=s}if(e[t]!==r)throw n||new Error("Can't assign");return r};var TB={};Object.defineProperty(TB,"__esModule",{value:!0}),TB.importProxy=void 0,TB.importProxy={},Object.defineProperty(kB,"__esModule",{value:!0}),kB.LazyEvt=void 0;var NB=SB,IB=TB,MB=function(){function e(){this.initialPostCount=0}return Object.defineProperty(e.prototype,"evt",{get:function(){return void 0===this.__evt&&(this.__evt=new IB.importProxy.Evt,(0,NB.overwriteReadonlyProp)(this.__evt,"postCount",this.initialPostCount)),this.__evt},enumerable:!1,configurable:!0}),e.prototype.__post=function(e,t){return void 0===this.__evt?++this.initialPostCount:this.__evt[t?"postAndWait":"post"](e)},e.prototype.post=function(e){return this.__post(e,!1)},e.prototype.postAndWait=function(e){return this.__post(e,!0)},e}();kB.LazyEvt=MB,function(e){var r=t&&t.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},n=t&&t.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Ctx=void 0;var i=hB,a=vB,s=bB,o=kB,l=TB,c=SB,u=function(){function e(){this.lazyEvtAttach=new o.LazyEvt,this.lazyEvtDetach=new o.LazyEvt,this.lazyEvtDoneOrAborted=new o.LazyEvt,this.handlers=new i.Polyfill,this.evtByHandler=new a.Polyfill}return Object.defineProperty(e.prototype,"evtDoneOrAborted",{get:function(){return this.lazyEvtDoneOrAborted.evt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"evtAttach",{get:function(){return this.lazyEvtAttach.evt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"evtDetach",{get:function(){return this.lazyEvtDetach.evt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completionStatus",{get:function(){return this.__completionStatus},enumerable:!1,configurable:!0}),e.prototype.onDoneOrAborted=function(e){this.__completionStatus=e,this.lazyEvtDoneOrAborted.post(e)},e.prototype.waitFor=function(e){var t=this;return this.evtDoneOrAborted.waitFor(e).then(function(e){if("ABORTED"===e.type)throw e.error;return e.result},function(e){throw t.abort(e),e})},e.prototype.abort=function(e){return this.__done(e)},e.prototype.done=function(e){return this.__done(void 0,e)},e.prototype.__done=function(e,t){var i,a,s=[];try{for(var o=n(this.handlers.values()),l=o.next();!l.done;l=o.next()){var c=l.value,u=this.evtByHandler.get(c);c.detach()&&s.push({handler:c,evt:u})}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return this.onDoneOrAborted(r(r({},e?{type:"ABORTED",error:e}:{type:"DONE",result:t}),{handlers:s})),s},e.prototype.getHandlers=function(){var e=this;return Array.from(this.handlers.values()).map(function(t){return{handler:t,evt:e.evtByHandler.get(t)}})},e.prototype.zz__addHandler=function(e,t){(0,s.assert)(e.ctx===this),(0,s.assert)((0,s.is)(e)),void 0===this.completionStatus?(this.handlers.add(e),this.evtByHandler.set(e,t),this.lazyEvtAttach.post({handler:e,evt:t})):e.detach()},e.prototype.zz__removeHandler=function(e){(0,s.assert)(e.ctx===this),(0,s.assert)((0,s.is)(e)),this.lazyEvtDetach.post({handler:e,evt:this.evtByHandler.get(e)}),this.handlers.delete(e)},e}();e.Ctx=u;try{(0,c.overwriteReadonlyProp)(e.Ctx,"name","Ctx")}catch(d){}l.importProxy.Ctx=e.Ctx}(dB);var CB={};Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],i=0;i<r;){var a=t[i];if(e.call(n,a,i,t))return a;i++}},configurable:!0,writable:!0});var jB={};Object.defineProperty(jB,"__esModule",{value:!0}),jB.create=void 0;var OB=TB;jB.create=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?new OB.importProxy.Evt:new OB.importProxy.StatefulEvt(e[0])};var RB={};Object.defineProperty(RB,"__esModule",{value:!0}),RB.getCtxFactory=void 0;var LB=vB,PB=TB;RB.getCtxFactory=function(){var e=new LB.Polyfill;return function(t){var r=e.get(t);return void 0===r&&(r=new PB.importProxy.Ctx,e.set(t,r)),r}};var DB={};Object.defineProperty(DB,"__esModule",{value:!0}),DB.factorize=void 0,DB.factorize=function(e){return e};var $B={};Object.defineProperty($B,"__esModule",{value:!0}),$B.merge=$B.mergeImpl=void 0;var zB=TB;function BB(e,t){var r=new zB.importProxy.Evt,n=function(e){return r.post(e)};return t.forEach(function(t){void 0===e?t.attach(n):t.attach(e,n)}),r}$B.mergeImpl=BB,$B.merge=function(e,t){return"length"in e?BB(void 0,e):BB(e,t)};var UB={},FB=t&&t.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),HB=t&&t.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),GB=t&&t.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&FB(t,e,r);return HB(t,e),t},qB=t&&t.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s};Object.defineProperty(UB,"__esModule",{value:!0}),UB.from=void 0;var VB=sB,WB=bB,ZB=Wz,KB=$B,YB=TB,JB=GB(Kz).EventTargetLike;function XB(e,t,r,n){var i,a,s,o;if(s=t,!JB.canBe(s)){if("then"in t){var l=new YB.importProxy.Evt,c=(a=(i=function(){return null==e?void 0:e.evtDoneOrAborted.postCount})(),function(){return a!==i()});return t.then(function(e){c()||l.post(e)}),l}return(0,KB.mergeImpl)(e,Array.from(t).map(function(t){return XB(e,t,r,n)}))}if(JB.HasEventTargetAddRemove.match(t))o={on:function(e,r,n){return t.addEventListener(r,e,n)},off:function(e,r,n){return t.removeEventListener(r,e,n)}};else if(JB.NodeStyleEventEmitter.match(t))o={on:function(e,r){return t.addListener(r,e)},off:function(e,r){return t.removeListener(r,e)}};else if(JB.JQueryStyleEventEmitter.match(t))o={on:function(e,r){return t.on(r,e)},off:function(e,r){return t.off(r,e)}};else if(JB.RxJSSubject.match(t)){var u;o={on:function(e){return u=t.subscribe(function(t){return e(t)})},off:function(){return u.unsubscribe()}}}else(0,VB.id)(t),(0,WB.assert)(!1);var d=new YB.importProxy.Evt,h=function(e){return d.post(e)};return null==e||e.evtDoneOrAborted.attachOnce(function(){return o.off(h,r,n)}),o.on(h,r,n),d}function QB(e,t,r){var n=YB.importProxy.Evt.create(),i=new t(function(e){var t=qB(e,1)[0];return n.post(t)});return i.observe(r),null==e||e.evtDoneOrAborted.attachOnce(function(){return i.disconnect()}),n}UB.from=function(e,t,r,n){return"evtDoneOrAborted"in e?((0,WB.assert)((0,ZB.typeGuard)(t,!0)&&(0,ZB.typeGuard)(r,!0)&&(0,ZB.typeGuard)(n,!0)),"function"==typeof t?((0,WB.assert)((0,ZB.typeGuard)(r,!0)&&(0,ZB.typeGuard)(n,!0)),QB(e,t,r)):((0,WB.assert)((0,ZB.typeGuard)(r,!0)),XB(e,t,r,n))):((0,WB.assert)((0,ZB.typeGuard)(e,!0)&&(0,ZB.typeGuard)(t,!0)&&(0,ZB.typeGuard)(r,!0)),"function"==typeof e?((0,WB.assert)((0,ZB.typeGuard)(t,!0)&&(0,ZB.typeGuard)(r,!0)),QB(void 0,e,t)):((0,WB.assert)((0,ZB.typeGuard)(t,!0)),XB(void 0,e,t,r)))};var eU={};Object.defineProperty(eU,"__esModule",{value:!0}),eU.asPostable=void 0,eU.asPostable=function(e){return e};var tU={},rU=t&&t.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{l(n.next(e))}catch(En){a(En)}}function o(e){try{l(n.throw(e))}catch(En){a(En)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,o)}l((n=n.apply(e,t||[])).next())})},nU=t&&t.__generator||function(e,t){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(En){a=[6,En],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}};Object.defineProperty(tU,"__esModule",{value:!0}),tU.asyncPipe=void 0;var iU=TB;tU.asyncPipe=function(e,t){var r=this,n="state"in e?iU.importProxy.Evt.create(void 0):iU.importProxy.Evt.create(),i=0;return e.attach(function(a){return rU(r,void 0,void 0,function(){var r,s,o;return nU(this,function(l){switch(l.label){case 0:return i++,r=i,null!==(s=t(a))&&"then"in s?[4,s]:[3,2];case 1:return o=l.sent(),"state"in e&&r!==i?[2]:[3,3];case 2:o=s,l.label=3;case 3:return o?(n.post(o[0]),[2]):[2]}})})}),n};var aU={};Object.defineProperty(aU,"__esModule",{value:!0}),aU.asNonPostable=void 0,aU.asNonPostable=function(e){return e};var sU={},oU=t&&t.__assign||function(){return oU=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oU.apply(this,arguments)},lU=t&&t.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s},cU=t&&t.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(sU,"__esModule",{value:!0}),sU.parsePropsFromArgs=sU.matchAll=void 0;var uU=sB,dU=iB,hU=Wz;function pU(){return!0}sU.matchAll=pU;var fU=function(e){return void 0!==e&&(0,hU.typeGuard)(e,!0)&&("function"==typeof e||"function"==typeof e[0])},mU={op:pU,ctx:void 0,timeout:void 0,callback:void 0};sU.parsePropsFromArgs=function e(t,r){switch(r){case"pipe":var n=function(e){return 0===e.length?{}:{op:1===e.length?e[0]:dU.compose.apply(void 0,cU([],lU(e),!1))}};if(fU(t[0]))return(0,uU.id)(oU(oU({},mU),n(t)));var i=lU(t),a=i[0],s=i.slice(1);return(0,uU.id)(oU(oU(oU({},mU),void 0!==a?{ctx:a}:{}),n(s)));case"waitFor":return e(cU(cU([],lU(t.filter(function(e,r){return!(r===t.length-1&&void 0===e)})),!1),[mU.callback],!1),"attach*");case"attach*":switch(t.length){case 4:var o=lU(t,4),l=o[0],c=o[1],u=o[2],d=o[3];return(0,uU.id)(oU(oU({},mU),{op:l,ctx:c,timeout:u,callback:d}));case 3:var h=lU(t,3);l=h[0],c=h[1],u=h[2];if("number"==typeof c){var p=c,f=u;return fU(l)?(0,uU.id)(oU(oU({},mU),{timeout:p,callback:f,op:l})):(0,uU.id)(oU(oU({},mU),{timeout:p,callback:f,ctx:l}))}return(0,uU.id)(oU(oU({},mU),{op:l,ctx:c,callback:u}));case 2:var m=lU(t,2);l=m[0],c=m[1];if("number"==typeof l)return(0,uU.id)(oU(oU({},mU),{timeout:l,callback:c}));f=c;return fU(l)?(0,uU.id)(oU(oU({},mU),{callback:f,op:l})):(0,uU.id)(oU(oU({},mU),{callback:f,ctx:l}));case 1:var g=lU(t,1)[0];return(0,uU.id)(oU(oU({},mU),{callback:g}));case 0:return(0,uU.id)(oU({},mU))}}};var gU={};Object.defineProperty(gU,"__esModule",{value:!0}),gU.newCtx=void 0;var vU=TB;gU.newCtx=function(){return new vU.importProxy.Ctx};var yU={},bU=t&&t.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,i++)n[i]=a[s];return n};yU.__esModule=!0,yU.buildMethodCb=yU.buildCb=yU.getPrComplete=yU.isRunning=yU.cancelAllQueuedCalls=yU.getQueuedCallCount=yU.buildMethod=yU.build=yU.createGroupRef=void 0;var _U=vB,wU=function(){function e(){this.queuedCalls=[],this.isRunning=!1,this.prComplete=Promise.resolve()}return e.prototype.cancelAllQueuedCalls=function(){var e;return this.queuedCalls.splice(0,e=this.queuedCalls.length),e},e}(),xU={},EU=new _U.Polyfill;function kU(e,t){var r=EU.get(e);r||(r=new _U.Polyfill,EU.set(e,r));var n=r.get(t);return n||(n=new wU,r.set(t,n)),n}function SU(){return new Array(0)}yU.createGroupRef=SU,yU.build=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];switch(e.length){case 1:return NU(!0,SU(),e[0]);case 2:return NU(!0,e[0],e[1])}},yU.buildMethod=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];switch(e.length){case 1:return NU(!1,SU(),e[0]);case 2:return NU(!1,e[0],e[1])}},yU.getQueuedCallCount=function(e,t){var r=TU(e,t);return r?r.queuedCalls.length:0},yU.cancelAllQueuedCalls=function(e,t){var r=TU(e,t);return r?r.cancelAllQueuedCalls():0},yU.isRunning=function(e,t){var r=TU(e,t);return!!r&&r.isRunning},yU.getPrComplete=function(e,t){var r=TU(e,t);return r?r.prComplete:Promise.resolve()};var AU=new _U.Polyfill;function TU(e,t){void 0===t&&(t=xU);var r=AU.get(e);if(!r)throw Error("Not a run exclusiveFunction");var n=EU.get(t);if(n)return n.get(r)}function NU(e,t,r){var n,i=function(){for(var i=this,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(!e){if(!(this instanceof Object))throw new Error("Run exclusive, <this> should be an object");n=kU(this,t)}return new Promise(function(e,t){var s;n.prComplete=new Promise(function(e){return s=function(){return e()}});var o=function(r){s(),n.isRunning=!1,n.queuedCalls.length&&n.queuedCalls.shift()(),"data"in r?e(r.data):t(r.reason)};(function e(){for(var t=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(n.isRunning)n.queuedCalls.push(function(){return e.apply(t,i)});else{n.isRunning=!0;try{r.apply(this,i).then(function(e){return o({data:e})}).catch(function(e){return o({reason:e})})}catch(s){o({reason:s})}}}).apply(i,a)})};return e&&(n=kU(xU,t)),AU.set(i,t),i}function IU(e,t,r){var n,i=function(){for(var i=this,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(!e){if(!(this instanceof Object))throw new Error("Run exclusive, <this> should be an object");n=kU(this,t)}var o,l=void 0;a.length&&"function"==typeof a[a.length-1]&&(l=a.pop()),n.prComplete=new Promise(function(e){return o=function(){return e()}});var c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o(),n.isRunning=!1,n.queuedCalls.length&&n.queuedCalls.shift()(),l&&l.apply(i,e)};c.hasCallback=!!l,function e(){for(var t=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(n.isRunning)n.queuedCalls.push(function(){return e.apply(t,i)});else{n.isRunning=!0;try{r.apply(this,bU(i,[c]))}catch(s){throw s.message+=" ( This exception should not have been thrown, miss use of run-exclusive buildCb )",s}}}.apply(this,a)};return e&&(n=kU(xU,t)),AU.set(i,t),i}yU.buildCb=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];switch(e.length){case 1:return IU(!0,SU(),e[0]);case 2:return IU(!0,e[0],e[1])}},yU.buildMethodCb=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];switch(e.length){case 1:return IU(!1,SU(),e[0]);case 2:return IU(!1,e[0],e[1])}};var MU={},CU=t&&t.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(MU,"__esModule",{value:!0}),MU.VoidDeferred=MU.Deferred=void 0;var jU=SB,OU=function(){var e,t,r=this;this.isPending=!0,this.pr=new Promise(function(n,i){e=function(e){(0,jU.overwriteReadonlyProp)(r,"isPending",!1),n(e)},t=function(e){(0,jU.overwriteReadonlyProp)(r,"isPending",!1),i(e)}}),this.resolve=e,this.reject=t};MU.Deferred=OU;var RU=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return CU(t,e),t}(OU);MU.VoidDeferred=RU;var LU={};Object.defineProperty(LU,"__esModule",{value:!0}),LU.loosenType=void 0,LU.loosenType=function(e){return e};var PU={};Object.defineProperty(PU,"__esModule",{value:!0}),PU.safeClearTimeout=PU.safeSetTimeout=void 0;PU.safeSetTimeout=function(e,t){return setTimeout(e,t)};PU.safeClearTimeout=function(e){return clearTimeout(e)};var DU={};Object.defineProperty(DU,"__esModule",{value:!0}),DU.isPromiseLike=function(e){return"object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then},function(e){var r=t&&t.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},n=t&&t.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=t&&t.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=t&&t.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=t&&t.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(e){try{l(n.next(e))}catch(En){a(En)}}function o(e){try{l(n.throw(e))}catch(En){a(En)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r(function(t){t(e)})}(e.value).then(s,o)}l((n=n.apply(e,t||[])).next())})},o=t&&t.__generator||function(e,t){var r,n,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(En){a=[6,En],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},l=t&&t.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s},c=t&&t.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},u=t&&t.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Evt=e.onAddHandlerByEvt=void 0;var d=pB,h=vB,p=TB,f=jB,m=RB,g=DB,v=$B,y=UB,b=eU,_=tU,w=aU,x=sU,E=gU,k=kB,S=a(yU),A=SB,T=Wz,N=MU,I=LU,M=PU,C=DU,j=Jz,O=a(Vz),R=aB,L=function(e){return e()},P=O.CtxLike,D=function(){function t(){this.lazyEvtAttach=new k.LazyEvt,this.lazyEvtDetach=new k.LazyEvt,this.__maxHandlers=void 0,this.postCount=0,this.traceId=null,this.handlers=[],this.handlerTriggers=new d.Polyfill,this.__currentChronologyMark=0,this.asyncHandlerCount=0}return t.setDefaultMaxHandlers=function(e){this.__defaultMaxHandlers=isFinite(e)?e:0},t.prototype.toStateful=function(e,t){var r=P.match(e),n=r?void 0:e,i=t||(r?e:void 0),a=new p.importProxy.StatefulEvt(n),s=function(e){return a.post(e)};return i?this.attach(i,s):this.attach(s),a},Object.defineProperty(t.prototype,"evtAttach",{get:function(){return this.lazyEvtAttach.evt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"evtDetach",{get:function(){return this.lazyEvtDetach.evt},enumerable:!1,configurable:!0}),t.prototype.setMaxHandlers=function(e){return this.__maxHandlers=isFinite(e)?e:0,this},t.prototype.enableTrace=function(e){var t=e.id,r=e.formatter,n=e.log;this.traceId=t,this.traceFormatter=r||function(e){try{return JSON.stringify(e,null,2)}catch(t){return"".concat(e)}},this.log=void 0===n?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.log.apply(console,c([],l(e),!1))}:!1===n?void 0:n},t.prototype.disableTrace=function(){return this.traceId=null,this},Object.defineProperty(t.prototype,"asyncHandlerChronologyMark",{get:function(){var e,t,r;return null!==(t=(r=null!==(e=this["~internal"])&&void 0!==e?e:this["~internal"]={}).asyncHandlerChronologyMark)&&void 0!==t?t:r.asyncHandlerChronologyMark=new h.Polyfill},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"asyncHandlerChronologyExceptionRange",{get:function(){var e,t,r;return null!==(t=(r=null!==(e=this["~internal"])&&void 0!==e?e:this["~internal"]={}).asyncHandlerChronologyExceptionRange)&&void 0!==t?t:r.asyncHandlerChronologyExceptionRange=new h.Polyfill},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"invocableOpByOp",{get:function(){var e,t,r;return null!==(t=(r=null!==(e=this["~internal"])&&void 0!==e?e:this["~internal"]={}).invocableOpByOp)&&void 0!==t?t:r.invocableOpByOp=new h.Polyfill},enumerable:!1,configurable:!0}),t.prototype.getInvocableOp=function(e){var t=this.invocableOpByOp.get(e);if(void 0===t)throw new Error(["Provided operator isn't the operator of any handler","currently attached to the Evt instance"].join(" "));return t},t.prototype.getChronologyMark=function(){return this.__currentChronologyMark++},t.prototype.detachHandler=function(e,t,r){var n=this.handlers.indexOf(e);return!(n<0)&&((0,T.typeGuard)(e,!!e.ctx)&&e.ctx.zz__removeHandler(e),this.handlers.splice(n,1),e.async&&this.asyncHandlerCount--,this.handlerTriggers.delete(e),void 0!==t[0]&&((0,M.safeClearTimeout)(t[0]),r(new j.DetachedEvtError)),this.lazyEvtDetach.post(e),!0)},t.prototype.triggerHandler=function(e,t,r,n){var i=e.callback,a=e.once;void 0!==t[0]&&((0,M.safeClearTimeout)(t[0]),t[0]=void 0),a&&e.detach();var s=l(n,1)[0],o=null==i?void 0:i.call(this,s);return null==r||r(s),(0,C.isPromiseLike)(o)?o:void 0},t.prototype.addHandler=function(t,n){var i,a=this;this.invocableOpByOp.set(t.op,(0,R.convertOperatorToStatelessF)(t.op));var s=new N.Deferred,o=[void 0],l=r(r(r({},t),n),{detach:function(){return a.detachHandler(l,o,s.reject)},promise:s.pr});"number"==typeof l.timeout&&(o[0]=(0,M.safeSetTimeout)(function(){o[0]=void 0,l.detach(),s.reject(new j.TimeoutEvtError(l.timeout))},l.timeout));var c=function(e){return a.triggerHandler(l,o,s.isPending?s.resolve:void 0,e)};if(this.handlerTriggers.set(l,c),l.async&&this.asyncHandlerChronologyMark.set(l,this.getChronologyMark()),l.prepend){var u=void 0;for(u=0;u<this.handlers.length&&this.handlers[u].extract;u++);this.handlers.splice(u,0,l)}else this.handlers.push(l);return l.async&&this.asyncHandlerCount++,this.checkForPotentialMemoryLeak(),(0,T.typeGuard)(l,!!l.ctx)&&l.ctx.zz__addHandler(l,this),null===(i=e.onAddHandlerByEvt.get(this))||void 0===i||i(l,c),this.handlerTriggers.has(l)&&this.lazyEvtAttach.post(l),l},t.prototype.checkForPotentialMemoryLeak=function(){var e=void 0!==this.__maxHandlers?this.__maxHandlers:t.__defaultMaxHandlers;if(0!==e&&this.handlers.length%(e+1)===0){var n=["MaxHandlersExceededWarning: Possible Evt memory leak detected.","".concat(this.handlers.length," handlers attached").concat(this.traceId?' to "'.concat(this.traceId,'"'):"",".\n"),"Use Evt.prototype.setMaxHandlers(n) to increase limit on a specific Evt.\n","Use Evt.setDefaultMaxHandlers(n) to change the default limit currently set to ".concat(t.__defaultMaxHandlers,".\n")].join(""),i=new d.Polyfill;this.getHandlers().map(function(e){var t=e.ctx,n=e.async,i=e.once,a=e.prepend,s=e.extract,o=e.op,l=e.callback;return r(r({hasCtx:!!t,once:i,prepend:a,extract:s,isWaitFor:n},o===x.matchAll?{}:{op:o.toString()}),l?{callback:l.toString()}:{})}).map(function(e){return"{\n"+Object.keys(e).map(function(t){return"  ".concat(t,": ").concat(e[t])}).join(",\n")+"\n}"}).forEach(function(e){return i.set(e,(i.has(e)?i.get(e):0)+1)}),n+="\n"+Array.from(i.keys()).map(function(e){return"".concat(i.get(e)," handler").concat(1===i.get(e)?"":"s"," like:\n").concat(e)}).join("\n")+"\n",null===this.traceId&&(n+="\n"+["To validate the identify of the Evt instance that is triggering this warning you can call",'Evt.prototype.enableTrace({ "id": "My evt id", "log": false }) on the Evt that you suspect.\n'].join(" "));try{console.warn(n)}catch(a){}}},t.prototype.isHandledByOp=function(e,t){var r,n=!1;try{r=this.getInvocableOp(e)}catch(i){return!1}return null!==r(t,function(){return n=!0})||n},t.prototype.trace=function(e){var t,r=this;if(null!==this.traceId){var n="(".concat(this.traceId,") "),i=!!this.handlers.find(function(t){var n=t.extract,i=t.op;return n&&r.isHandledByOp(i,e)});if(i)n+="extracted ";else{var a=this.handlers.filter(function(t){var n=t.extract,i=t.op;return!n&&r.isHandledByOp(i,e)}).length;n+="".concat(a," handler").concat(a>1?"s":"",", ")}null===(t=this.log)||void 0===t||t.call(this,n+this.traceFormatter(e))}},t.prototype.postSync=function(e){var t,r,n=[],i=function(e){return[e,Promise.all(n).then(function(){})]};try{for(var a=u(c([],l(this.handlers),!1)),s=a.next();!s.done;s=a.next()){var o=s.value,d=o.async,h=o.op,p=o.extract;if(!d){var f=this.handlerTriggers.get(o),m=this.getInvocableOp(h)(e,L);if(null!==m&&f){var g=f(m);if(void 0!==g&&n.push(g),p)return i(!0)}}}}catch(v){t={error:v}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i(!1)},t.prototype.postAsyncFactory=function(){var e=this;return S.buildMethodCb(function(t,r,n){var i,a;if(0!==e.asyncHandlerCount){var s,o=[];Promise.resolve().then(function(){return s=e.getChronologyMark()});var d=function(n){if(!n.async)return"continue";var i=e.getInvocableOp(n.op)(t,L);if(null===i)return"continue";var a=e.handlerTriggers.get(n);return a&&function(){var t=e.asyncHandlerChronologyMark.get(n);if(r>t)return!0;var i=e.asyncHandlerChronologyExceptionRange.get(n);return void 0!==i&&i.lowerMark<r&&r<i.upperMark&&t>i.upperMark}()?(o.push(new Promise(function(e){return n.promise.then(function(){return e()}).catch(function(){return e()})})),void a(i)):"continue"};try{for(var h=u(c([],l(e.handlers),!1)),p=h.next();!p.done;p=h.next()){d(p.value)}}catch(m){i={error:m}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}if(0!==o.length){var f=c([],l(e.handlers),!1);Promise.all(o).then(function(){var t,i;try{for(var a=u(e.handlers),o=a.next();!o.done;o=a.next()){var l=o.value;l.async&&(f.indexOf(l)>=0||e.asyncHandlerChronologyExceptionRange.set(l,{lowerMark:r,upperMark:s}))}}catch(c){t={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}n()})}else n()}else n()})},t.prototype.isHandled=function(e){var t=this;return!!this.getHandlers().find(function(r){var n=r.op;return t.isHandledByOp(n,e)})},t.prototype.getHandlers=function(){return c([],l(this.handlers),!1)},t.prototype.detach=function(e){var t,r,n=[];try{for(var i=u(this.getHandlers()),a=i.next();!a.done;a=i.next()){var s=a.value;if(void 0===e||s.ctx===e)s.detach()&&n.push(s)}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=new t;return this.addHandler(r(r({},(0,x.parsePropsFromArgs)(e,"pipe")),{callback:function(e){return i.post(e)}}),t.propsFormMethodNames.attach),i},t.prototype.waitFor=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.addHandler((0,x.parsePropsFromArgs)(e,"waitFor"),t.propsFormMethodNames.waitFor).promise},t.prototype[Symbol.asyncIterator]=function(){return this.iter()[Symbol.asyncIterator]()},t.prototype.iter=function(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=(0,x.parsePropsFromArgs)(r,"waitFor"),a=null!==(t=i.ctx)&&void 0!==t?t:(0,E.newCtx)(),l=this;return(e={ctx:a})[Symbol.asyncIterator]=function(){var e=a.evtDoneOrAborted.postCount,t=function(){var e=i.timeout;if(void 0!==e){var t=function(){var t=new j.TimeoutEvtError(e);a.abort(t)},r=setTimeout(t,e);return{timeout:e,setTimeoutCallback:t,timer:r}}}(),r=l.pipe(a,i.op).pipe(function(e,r){return void 0!==t&&r(function(){clearTimeout(t.timer),t.timer=setTimeout(t.setTimeoutCallback,t.timeout)}),[e]}),n=[];if(r.attach(function(e){return n.push([e])}),void 0!==t){var c=t.timer;a.evtDoneOrAborted.attachOnce(function(e){return"DONE"===e.type},function(){return clearTimeout(c)})}return{next:function(){return s(this,void 0,void 0,function(){var t,i,s;return o(this,function(o){switch(o.label){case 0:return void 0!==(t=n.shift())?[3,2]:(i=new N.Deferred,e<a.evtDoneOrAborted.postCount?[2,{done:!0}]:(s=(0,E.newCtx)(),a.evtDoneOrAborted.attachOnce(s,function(){return i.resolve(void 0)}),r.attachOnceExtract(s,function(e){s.done(),i.resolve([e])}),[4,i.pr]));case 1:if(void 0===(t=o.sent()))return[2,{done:!0}];o.label=2;case 2:return[2,{done:!1,value:t[0]}]}})})},return:function(){return l.detach(a),{done:!0}},throw:function(e){return l.detach(a),Promise.reject(e)}}},e},t.prototype.$attach=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.attach.apply(this,c([],l(e),!1))},t.prototype.attach=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.__attachX(e,"attach")},t.prototype.$attachOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.attachOnce.apply(this,c([],l(e),!1))},t.prototype.attachOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.__attachX(e,"attachOnce")},t.prototype.$attachExtract=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.attachExtract.apply(this,c([],l(e),!1))},t.prototype.attachExtract=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.__attachX(e,"attachExtract")},t.prototype.$attachPrepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.attachPrepend.apply(this,c([],l(e),!1))},t.prototype.attachPrepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.__attachX(e,"attachPrepend")},t.prototype.$attachOncePrepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.attachOncePrepend.apply(this,c([],l(e),!1))},t.prototype.attachOncePrepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.__attachX(e,"attachOncePrepend")},t.prototype.$attachOnceExtract=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.attachOnceExtract.apply(this,c([],l(e),!1))},t.prototype.attachOnceExtract=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.__attachX(e,"attachOnceExtract")},t.prototype.__attachX=function(e,r){var n=(0,x.parsePropsFromArgs)(e,"attach*"),i=this.addHandler(n,t.propsFormMethodNames[r]);return void 0===n.timeout?this:i.promise},t.prototype.postAsyncOnceHandled=function(e){var t=this;if(this.isHandled(e))return this.post(e);var r=new N.Deferred;return this.evtAttach.attachOnce(function(r){var n=r.op;return t.isHandledByOp(n,e)},function(){return Promise.resolve().then(function(){return r.resolve(t.post(e))})}),r.pr},t.prototype.postOrPostAndWait=function(e,t){var r=this;this.trace(e),(0,A.overwriteReadonlyProp)(this,"postCount",this.postCount+1);var n=this.getChronologyMark(),i=l(this.postSync(e),2),a=i[0],s=i[1],o=t?function(){return s}:function(){return r.postCount};if(a)return o();if(void 0===this.postAsync){if(0===this.asyncHandlerCount)return o();this.postAsync=this.postAsyncFactory()}return this.postAsync(e,n),o()},t.prototype.post=function(e){return this.postOrPostAndWait(e,!1)},t.prototype.postAndWait=function(e){return this.postOrPostAndWait(e,!0)},t.create=f.create,t.newCtx=E.newCtx,t.merge=v.merge,t.from=y.from,t.getCtx=(0,m.getCtxFactory)(),t.loosenType=I.loosenType,t.factorize=g.factorize,t.asPostable=b.asPostable,t.asyncPipe=_.asyncPipe,t.asNonPostable=w.asNonPostable,t.__defaultMaxHandlers=25,t.propsFormMethodNames={waitFor:{async:!0,extract:!1,once:!0,prepend:!1},attach:{async:!1,extract:!1,once:!1,prepend:!1},attachExtract:{async:!1,extract:!0,once:!1,prepend:!0},attachPrepend:{async:!1,extract:!1,once:!1,prepend:!0},attachOnce:{async:!1,extract:!1,once:!0,prepend:!1},attachOncePrepend:{async:!1,extract:!1,once:!0,prepend:!0},attachOnceExtract:{async:!1,extract:!0,once:!0,prepend:!0}},t}();e.onAddHandlerByEvt=new h.Polyfill,e.Evt=D;try{(0,A.overwriteReadonlyProp)(e.Evt,"name","Evt")}catch($){}p.importProxy.Evt=e.Evt}(CB);var $U={};Object.is||(Object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t});var zU={};Object.defineProperty(zU,"__esModule",{value:!0}),zU.LazyStatefulEvt=void 0;var BU=SB,UU=TB,FU=function(){function e(e){this.initialPostCount=0,this.initialState=e}return Object.defineProperty(e.prototype,"evt",{get:function(){return void 0===this.__evt&&(this.__evt=new UU.importProxy.StatefulEvt(this.initialState),this.initialState=null,(0,BU.overwriteReadonlyProp)(this.__evt,"postCount",this.initialPostCount)),this.__evt},enumerable:!1,configurable:!0}),e.prototype.__post=function(e,t){return void 0===this.__evt?(this.initialState=e,++this.initialPostCount):this.__evt[t?"postAndWait":"post"](e)},e.prototype.post=function(e){return this.__post(e,!1)},e.prototype.postAndWait=function(e){return this.__post(e,!0)},e}();zU.LazyStatefulEvt=FU,function(e){var r=t&&t.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),n=t&&t.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s},i=t&&t.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.StatefulEvt=void 0;var a=kB,s=zU,o=TB,l=CB,c=bB,u=sB,d=function(e){return e()},h=function(e){function t(t){var r=e.call(this)||this;return r.lazyEvtDiff=new a.LazyEvt,r.lazyEvtChangeDiff=new a.LazyEvt,r.__state=t,r.lazyEvtChange=new s.LazyStatefulEvt(r.__state),l.onAddHandlerByEvt.set(r,function(e,t){if(!e.extract){var n=(0,u.id)(void 0),i=r.getInvocableOp(e.op)(r.__state,void 0!==r.setOpResultForPipe?function(e){return n=e}:d);void 0!==r.setOpResultForPipe&&(r.setOpResultForPipe(i),void 0!==n&&n()),i&&t(i)}}),r}return r(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this.__state},set:function(e){this.state!==e&&this.post(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"evtDiff",{get:function(){return this.lazyEvtDiff.evt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"evtChange",{get:function(){return this.lazyEvtChange.evt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"evtChangeDiff",{get:function(){return this.lazyEvtChangeDiff.evt},enumerable:!1,configurable:!0}),t.prototype.post=function(e){return this.__post(e,!1,!1)},t.prototype.postForceChange=function(e){return this.__post(e?e[0]:this.state,!0,!1)},t.prototype.postAndWait=function(e){return this.__post(e,!1,!0)},t.prototype.__post=function(t,r,n){var i=this.state;this.__state=t;var a={prevState:i,newState:this.state},s=n?"postAndWait":"post",o=[],l=this.lazyEvtDiff[s](a);if(n&&o.push(l),r||!Object.is(i,this.state)){var c=this.lazyEvtChange[s](this.state),u=this.lazyEvtChangeDiff[s](a);n&&o.push(c,u)}var d=e.prototype[s].call(this,t);return n?(o.push(d),Promise.all(o).then(function(){})):d},t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=void 0;this.setOpResultForPipe=function(e){return a=e};var s=e.prototype.pipe.apply(this,i([],n(t),!1));if((0,c.assert)(void 0!==a),this.setOpResultForPipe=void 0,!a)throw new Error(["Cannot pipe StatefulEvt because the operator does not match","it's current state. You would end up with evt.state === undefined","Use evt.toStateless([ctx]).pipe(op).toStatic(initialState)","to be sure the StatefulEvt does not have an undefined state"].join(" "));return s.toStateful(a[0])},t.prototype.toStateless=function(t){var r=l.onAddHandlerByEvt.get(this);l.onAddHandlerByEvt.delete(this);var n=t?e.prototype.pipe.call(this,t):e.prototype.pipe.call(this);return l.onAddHandlerByEvt.set(this,r),n},t}(l.Evt);e.StatefulEvt=h,o.importProxy.StatefulEvt=e.StatefulEvt}($U);var HU={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.to=void 0;var t=new Map;e.to=function(r){var n;return null!==(n=t.get(r))&&void 0!==n?n:(t.set(r,function(e){return e[0]!==r?null:[e[1]]}),(0,e.to)(r))}}(HU);var GU={};Object.defineProperty(GU,"__esModule",{value:!0}),GU.throttleTime=void 0;var qU=iB;GU.throttleTime=function(e){return(0,qU.compose)([function(t,r){var n=r.lastClick,i=Date.now();return i-n<e?null:[{data:t,lastClick:i}]},{lastClick:0,data:null}],function(e){return[e.data]})};var VU={};Object.defineProperty(VU,"__esModule",{value:!0}),VU.nonNullable=void 0;var WU=function(e){return null==e?null:[e]};VU.nonNullable=function(){return WU};var ZU={},KU=t&&t.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)s.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return s},YU=t&&t.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(ZU,"__esModule",{value:!0}),ZU.distinct=void 0;var JU=iB;ZU.distinct=function(e,t){var r;return(0,JU.compose)(function(r){var n,i;return[{data:r,selectedKey:null!==(n=null==e?void 0:e(r))&&void 0!==n?n:r,currentFlushCount:null!==(i=null==t?void 0:t.evtDoneOrAborted.postCount)&&void 0!==i?i:0}]},[function(e,t){var r=e.data,n=e.selectedKey,i=e.currentFlushCount,a=t.alreadyPostedData,s=t.previousFlushCount;return[{boxedData:i===s&&a.has(n)?null:[r],alreadyPostedData:new Set(YU(YU([],KU(i!==s?[]:Array.from(a)),!1),[n],!1)),previousFlushCount:i}]},{boxedData:null,alreadyPostedData:new Set,previousFlushCount:null!==(r=null==t?void 0:t.evtDoneOrAborted.postCount)&&void 0!==r?r:0}],function(e){return e.boxedData})},function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=t&&t.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.distinct=e.nonNullable=e.throttleTime=e.to=e.StatefulEvt=e.Evt=e.Ctx=void 0,n(Hz,e),n(nB,e);var i=dB;Object.defineProperty(e,"Ctx",{enumerable:!0,get:function(){return i.Ctx}});var a=CB;Object.defineProperty(e,"Evt",{enumerable:!0,get:function(){return a.Evt}});var s=$U;Object.defineProperty(e,"StatefulEvt",{enumerable:!0,get:function(){return s.StatefulEvt}});var o=HU;Object.defineProperty(e,"to",{enumerable:!0,get:function(){return o.to}});var l=GU;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return l.throttleTime}});var c=VU;Object.defineProperty(e,"nonNullable",{enumerable:!0,get:function(){return c.nonNullable}});var u=ZU;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return u.distinct}})}(Fz);const XU=Object.create(null);XU.open="0",XU.close="1",XU.ping="2",XU.pong="3",XU.message="4",XU.upgrade="5",XU.noop="6";const QU=Object.create(null);Object.keys(XU).forEach(e=>{QU[XU[e]]=e});const eF={type:"error",data:"parser error"},tF="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),rF="function"==typeof ArrayBuffer,nF=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,iF=({type:e,data:t},r,n)=>tF&&t instanceof Blob?r?n(t):aF(t,n):rF&&(t instanceof ArrayBuffer||nF(t))?r?n(t):aF(new Blob([t]),n):n(XU[e]+(t||"")),aF=(e,t)=>{const r=new FileReader;return r.onload=function(){const e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};function sF(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let oF;const lF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cF="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let goe=0;goe<64;goe++)cF[lF.charCodeAt(goe)]=goe;const uF="function"==typeof ArrayBuffer,dF=(e,t)=>{if("string"!=typeof e)return{type:"message",data:pF(e,t)};const r=e.charAt(0);if("b"===r)return{type:"message",data:hF(e.substring(1),t)};return QU[r]?e.length>1?{type:QU[r],data:e.substring(1)}:{type:QU[r]}:eF},hF=(e,t)=>{if(uF){const r=(e=>{let t,r,n,i,a,s=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const c=new ArrayBuffer(s),u=new Uint8Array(c);for(t=0;t<o;t+=4)r=cF[e.charCodeAt(t)],n=cF[e.charCodeAt(t+1)],i=cF[e.charCodeAt(t+2)],a=cF[e.charCodeAt(t+3)],u[l++]=r<<2|n>>4,u[l++]=(15&n)<<4|i>>2,u[l++]=(3&i)<<6|63&a;return c})(e);return pF(r,t)}return{base64:!0,data:e}},pF=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,fF=String.fromCharCode(30);function mF(){return new TransformStream({transform(e,t){!function(e,t){tF&&e.data instanceof Blob?e.data.arrayBuffer().then(sF).then(t):rF&&(e.data instanceof ArrayBuffer||nF(e.data))?t(sF(e.data)):iF(e,!1,e=>{oF||(oF=new TextEncoder),t(oF.encode(e))})}(e,r=>{const n=r.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const e=new DataView(i.buffer);e.setUint8(0,126),e.setUint16(1,n)}else{i=new Uint8Array(9);const e=new DataView(i.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(n))}e.data&&"string"!=typeof e.data&&(i[0]|=128),t.enqueue(i),t.enqueue(r)})}})}let gF;function vF(e){return e.reduce((e,t)=>e+t.length,0)}function yF(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let i=0;i<t;i++)r[i]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function bF(e){if(e)return function(e){for(var t in bF.prototype)e[t]=bF.prototype[t];return e}(e)}bF.prototype.on=bF.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},bF.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},bF.prototype.off=bF.prototype.removeListener=bF.prototype.removeAllListeners=bF.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},bF.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,t)}return this},bF.prototype.emitReserved=bF.prototype.emit,bF.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},bF.prototype.hasListeners=function(e){return!!this.listeners(e).length};const _F="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),wF="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function xF(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}const EF=wF.setTimeout,kF=wF.clearTimeout;function SF(e,t){t.useNativeTimers?(e.setTimeoutFn=EF.bind(wF),e.clearTimeoutFn=kF.bind(wF)):(e.setTimeoutFn=wF.setTimeout.bind(wF),e.clearTimeoutFn=wF.clearTimeout.bind(wF))}function AF(e){return"string"==typeof e?function(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))}function TF(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class NF extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class IF extends bF{constructor(e){super(),this.writable=!1,SF(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new NF(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=dF(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e);return t.length?"?"+t:""}}class MF extends IF{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const r=e.split(fF),n=[];for(let i=0;i<r.length;i++){const e=dF(r[i],t);if(n.push(e),"error"===e.type)break}return n})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const r=e.length,n=new Array(r);let i=0;e.forEach((e,a)=>{iF(e,!1,e=>{n[a]=e,++i===r&&t(n.join(fF))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=TF()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let CF=!1;try{CF="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(moe){}const jF=CF;function OF(){}class RF extends MF{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class LF extends bF{constructor(e,t,r){super(),this.createRequest=e,SF(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=void 0!==r.data?r.data:null,this._create()}_create(){var e;const t=xF(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(En){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(En){}try{r.setRequestHeader("Accept","*/*")}catch(En){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},r.send(this._data)}catch(En){return void this.setTimeoutFn(()=>{this._onError(En)},0)}"undefined"!=typeof document&&(this._index=LF.requestsCount++,LF.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=OF,e)try{this._xhr.abort()}catch(En){}"undefined"!=typeof document&&delete LF.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(LF.requestsCount=0,LF.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",PF);else if("function"==typeof addEventListener){addEventListener("onpagehide"in wF?"pagehide":"unload",PF,!1)}function PF(){for(let e in LF.requests)LF.requests.hasOwnProperty(e)&&LF.requests[e].abort()}const DF=function(){const e=$F({xdomain:!1});return e&&null!==e.responseType}();function $F(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||jF))return new XMLHttpRequest}catch(En){}if(!t)try{return new(wF[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(En){}}const zF="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class BF extends IF{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=zF?{}:xF(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(moe){return this.emitReserved("error",moe)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],n=t===e.length-1;iF(r,this.supportsBinary,e=>{try{this.doWrite(r,e)}catch(En){}n&&_F(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=TF()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const UF=wF.WebSocket||wF.MozWebSocket;const FF={websocket:class extends BF{createSocket(e,t,r){return zF?new UF(e,t,r):t?new UF(e,t):new UF(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends IF{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(moe){return this.emitReserved("error",moe)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){gF||(gF=new TextDecoder);const r=[];let n=0,i=-1,a=!1;return new TransformStream({transform(s,o){for(r.push(s);;){if(0===n){if(vF(r)<1)break;const e=yF(r,1);a=!(128&~e[0]),i=127&e[0],n=i<126?3:126===i?1:2}else if(1===n){if(vF(r)<2)break;const e=yF(r,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),n=3}else if(2===n){if(vF(r)<8)break;const e=yF(r,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>Math.pow(2,21)-1){o.enqueue(eF);break}i=a*Math.pow(2,32)+t.getUint32(4),n=3}else{if(vF(r)<i)break;const e=yF(r,i);o.enqueue(dF(a?e:gF.decode(e),t)),n=0}if(0===i||i>e){o.enqueue(eF);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),n=mF();n.readable.pipeTo(e.writable),this._writer=n.writable.getWriter();const i=()=>{r.read().then(({done:e,value:t})=>{e||(this.onPacket(t),i())}).catch(e=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],n=t===e.length-1;this._writer.write(r).then(()=>{n&&_F(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends RF{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=DF&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new LF($F,this.uri(),e)}}},HF=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,GF=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function qF(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=HF.exec(e||""),a={},s=14;for(;s--;)a[GF[s]]=i[s]||"";return-1!=r&&-1!=n&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1);"/"==t.slice(-1)&&n.splice(n.length-1,1);return n}(0,a.path),a.queryKey=function(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(r[t]=n)}),r}(0,a.query),a}const VF="function"==typeof addEventListener&&"function"==typeof removeEventListener,WF=[];VF&&addEventListener("offline",()=>{WF.forEach(e=>e())},!1);class ZF extends bF{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const r=qF(e);t.hostname=r.host,t.secure="https"===r.protocol||"wss"===r.protocol,t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=qF(t.host).host);SF(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let n=0,i=r.length;n<i;n++){let e=r[n].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),VF&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},WF.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&ZF.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",ZF.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const r=this.writeBuffer[t].data;if(r&&(e+=AF(r)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,_F(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const i={type:e,data:t,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ZF.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),VF&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=WF.indexOf(this._offlineEventListener);-1!==e&&WF.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ZF.protocol=4;class KF extends ZF{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;ZF.priorWebsocketSuccess=!1;const n=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!r)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ZF.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{r||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function i(){r||(r=!0,c(),t.close(),t=null)}const a=e=>{const r=new Error("probe error: "+e);r.transport=t.name,i(),this.emitReserved("upgradeError",r)};function s(){a("transport closed")}function o(){a("socket closed")}function l(e){t&&e.name!==t.name&&i()}const c=()=>{t.removeListener("open",n),t.removeListener("error",a),t.removeListener("close",s),this.off("close",o),this.off("upgrading",l)};t.once("open",n),t.once("error",a),t.once("close",s),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let YF=class extends KF{constructor(e,t={}){const r="object"==typeof e?e:t;(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(e=>FF[e]).filter(e=>!!e)),super(e,r)}};const JF="function"==typeof ArrayBuffer,XF=Object.prototype.toString,QF="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===XF.call(Blob),eH="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===XF.call(File);function tH(e){return JF&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||QF&&e instanceof Blob||eH&&e instanceof File}function rH(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(rH(e[t]))return!0;return!1}if(tH(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return rH(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&rH(e[r]))return!0;return!1}function nH(e){const t=[],r=e.data,n=e;return n.data=iH(r,t),n.attachments=t.length,{packet:n,buffers:t}}function iH(e,t){if(!e)return e;if(tH(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=iH(e[n],t);return r}if("object"==typeof e&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=iH(e[n],t));return r}return e}function aH(e,t){return e.data=sH(e.data,t),delete e.attachments,e}function sH(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=sH(e[r],t);else if("object"==typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=sH(e[r],t));return e}const oH=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var lH;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(lH||(lH={}));function cH(e){return"[object Object]"===Object.prototype.toString.call(e)}class uH extends bF{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===lH.BINARY_EVENT;r||t.type===lH.BINARY_ACK?(t.type=r?lH.EVENT:lH.ACK,this.reconstructor=new dH(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!tH(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(void 0===lH[r.type])throw new Error("unknown packet type "+r.type);if(r.type===lH.BINARY_EVENT||r.type===lH.BINARY_ACK){const n=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(n,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(t+1)){const n=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(n,t)}else r.nsp="/";const n=e.charAt(t+1);if(""!==n&&Number(n)==n){const n=t+1;for(;++t;){const r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){const n=this.tryParse(e.substr(t));if(!uH.isPayloadValid(r.type,n))throw new Error("invalid payload");r.data=n}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(En){return!1}}static isPayloadValid(e,t){switch(e){case lH.CONNECT:return cH(t);case lH.DISCONNECT:return void 0===t;case lH.CONNECT_ERROR:return"string"==typeof t||cH(t);case lH.EVENT:case lH.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===oH.indexOf(t[0]));case lH.ACK:case lH.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class dH{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=aH(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const hH=Object.freeze(Object.defineProperty({__proto__:null,Decoder:uH,Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==lH.EVENT&&e.type!==lH.ACK||!rH(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===lH.EVENT?lH.BINARY_EVENT:lH.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==lH.BINARY_EVENT&&e.type!==lH.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=nH(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}},get PacketType(){return lH},protocol:5},Symbol.toStringTag,{value:"Module"}));function pH(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const fH=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class mH extends bF{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[pH(e,"open",this.onopen.bind(this)),pH(e,"packet",this.onpacket.bind(this)),pH(e,"error",this.onerror.bind(this)),pH(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,n,i;if(fH.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:lH.EVENT,data:t,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,r=t.pop();this._registerAckCallback(e,r),a.id=e}const s=null===(n=null===(r=this.io.engine)||void 0===r?void 0:r.transport)||void 0===n?void 0:n.writable,o=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!s||(o?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var r;const n=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===n)return void(this.acks[e]=t);const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},n),a=(...e)=>{this.io.clearTimeoutFn(i),t.apply(this,e)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((r,n)=>{const i=(e,t)=>e?n(e):r(t);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...n)=>{if(r!==this._queue[0])return;return null!==e?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...n)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:lH.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case lH.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case lH.EVENT:case lH.BINARY_EVENT:this.onevent(e);break;case lH.ACK:case lH.BINARY_ACK:this.onack(e);break;case lH.DISCONNECT:this.ondisconnect();break;case lH.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...n){r||(r=!0,t.packet({type:lH.ACK,id:e,data:n}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:lH.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function gH(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}gH.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+r:e-r}return 0|Math.min(e,this.max)},gH.prototype.reset=function(){this.attempts=0},gH.prototype.setMin=function(e){this.ms=e},gH.prototype.setMax=function(e){this.max=e},gH.prototype.setJitter=function(e){this.jitter=e};class vH extends bF{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,SF(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new gH({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||hH;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new YF(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=pH(t,"open",function(){r.onopen(),e&&e()}),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},a=pH(t,"error",i);if(!1!==this._timeout){const e=this._timeout,r=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),t.close()},e);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(n),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(pH(e,"ping",this.onping.bind(this)),pH(e,"data",this.ondata.bind(this)),pH(e,"error",this.onerror.bind(this)),pH(e,"close",this.onclose.bind(this)),pH(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(En){this.onclose("parse error",En)}}ondecoded(e){_F(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new mH(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t){if(this.nsps[r].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),null===(r=this.engine)||void 0===r||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const yH={};function bH(e,t){"object"==typeof e&&(t=e,e=void 0);const r=function(e,t="",r){let n=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),n=qF(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}(e,(t=t||{}).path||"/socket.io"),n=r.source,i=r.id,a=r.path,s=yH[i]&&a in yH[i].nsps;let o;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?o=new vH(n,t):(yH[i]||(yH[i]=new vH(n,t)),o=yH[i]),r.query&&!t.query&&(t.query=r.queryKey),o.socket(r.path,t)}Object.assign(bH,{Manager:vH,Socket:mH,io:bH,connect:bH});class _H{events={};constructor(){this.events.messageBroadcast=Fz.Evt.create(),this.events.messageComplete=Fz.Evt.create(),this.events.controlMessage=Fz.Evt.create(),this.events.messageDeleted=Fz.Evt.create(),this.events.channelCleared=Fz.Evt.create(),this.events.channelDeleted=Fz.Evt.create(),this.events.logStream=Fz.Evt.create()}on(e,t){return this.events[e]||(this.events[e]=Fz.Evt.create()),this.events[e].attach(t),this}off(e,t){if(this.events[e]){const r=this.events[e].getHandlers();for(const e of r)e.callback===t&&e.detach()}return this}emit(e,...t){return this.events[e]&&this.events[e].post(1===t.length?t[0]:t),this}once(e,t){return this.events[e]||(this.events[e]=Fz.Evt.create()),this.events[e].attachOnce(t),this}listenerCount(e){return this.events[e]?this.events[e].getHandlers().length:0}_getEvt(e){return this.events[e]}}class wH extends _H{static instance=null;socket=null;isConnected=!1;connectPromise=null;resolveConnect=null;activeChannelIds=new Set;clientEntityId=null;logStreamSubscribed=!1;get evtMessageBroadcast(){return this._getEvt("messageBroadcast")}get evtMessageComplete(){return this._getEvt("messageComplete")}get evtControlMessage(){return this._getEvt("controlMessage")}get evtMessageDeleted(){return this._getEvt("messageDeleted")}get evtChannelCleared(){return this._getEvt("channelCleared")}get evtChannelDeleted(){return this._getEvt("channelDeleted")}get evtLogStream(){return this._getEvt("logStream")}constructor(){super()}static getInstance(){return wH.instance||(wH.instance=new wH),wH.instance}static isConnected(){return wH.instance?.isConnected||!1}isChannelActive(e){return this.activeChannelIds.has(e)}initialize(e){if(this.clientEntityId=e,this.socket)return void $$("[SocketIO] Socket already initialized");const t=window.location.origin+"/";L$("connecting to",t),this.socket=bH(t,{autoConnect:!0,reconnection:!0}),this.connectPromise=new Promise(e=>{this.resolveConnect=e}),this.socket.on("connect",()=>{L$("[SocketIO] Connected to server"),this.isConnected=!0,this.resolveConnect?.(),this.emit("connect")}),this.socket.on("unauthorized",e=>{this.emit("unauthorized",e)}),this.socket.on("messageBroadcast",e=>{const t="string"==typeof e?(()=>{try{return JSON.parse(e)}catch(En){return D$("[SocketIO] Failed to parse string messageBroadcast payload:",e),{}}})():e;L$("[SocketIO] Message broadcast received:",t);const r=t&&"object"==typeof t,n=r?Object.keys(t):[];$$("[SocketIO] Message broadcast data structure:",{keys:n,senderId:t.senderId,senderNameType:typeof t.senderName,textType:typeof t.text,textLength:t.text?t.text.length:0,hasThought:r&&"thought"in t,hasActions:r&&"actions"in t,additionalKeys:n.filter(e=>!["senderId","senderName","text","roomId","createdAt","source","thought","actions"].includes(e))});const i=t.channelId||t.roomId;i&&this.activeChannelIds.has(i)?(L$(`[SocketIO] Handling message for active channel ${i}`),this.emit("messageBroadcast",{...t,channelId:i,roomId:i,name:t.senderName})):D$(`[SocketIO] Received message for inactive channel ${i}, active channels:`,Array.from(this.activeChannelIds))}),this.socket.on("messageComplete",e=>{this.emit("messageComplete",e)}),this.socket.on("controlMessage",e=>{L$("[SocketIO] Control message received:",e);const t=e.channelId||e.roomId;t&&this.activeChannelIds.has(t)?(L$(`[SocketIO] Handling control message for active channel ${t}`),this.emit("controlMessage",{...e,channelId:t,roomId:t})):D$(`[SocketIO] Received control message for inactive channel ${t}, active channels:`,Array.from(this.activeChannelIds))}),this.socket.on("messageDeleted",e=>{$$("[SocketIO] Message deleted event received:",e);const t=e.channelId||e.roomId;t&&this.activeChannelIds.has(t)?(L$(`[SocketIO] Handling message deletion for active channel ${t}`),this.emit("messageDeleted",{...e,channelId:t,roomId:t})):D$(`[SocketIO] Received message deleted event for inactive channel ${t}, active channels:`,Array.from(this.activeChannelIds))}),this.socket.on("channelCleared",e=>{L$("[SocketIO] Channel cleared event received:",e);const t=e.channelId||e.roomId;t&&this.activeChannelIds.has(t)?(L$(`[SocketIO] Handling channel cleared for active channel ${t}`),this.emit("channelCleared",{...e,channelId:t,roomId:t})):D$(`[SocketIO] Received channel cleared event for inactive channel ${t}, active channels:`,Array.from(this.activeChannelIds))}),this.socket.on("channelDeleted",e=>{L$("[SocketIO] Channel deleted event received:",e);const t=e.channelId||e.roomId;t&&this.activeChannelIds.has(t)?(L$(`[SocketIO] Handling channel deleted for active channel ${t}`),this.emit("channelDeleted",{...e,channelId:t,roomId:t})):D$(`[SocketIO] Received channel deleted event for inactive channel ${t}, active channels:`,Array.from(this.activeChannelIds))}),this.socket.on("disconnect",e=>{L$(`[SocketIO] Disconnected. Reason: ${e}`),this.isConnected=!1,this.emit("disconnect",e),this.connectPromise=new Promise(e=>{this.resolveConnect=e}),"io server disconnect"===e&&this.socket?.connect()}),this.socket.on("reconnect_attempt",e=>{L$("[SocketIO] Reconnect attempt",e),this.emit("reconnect_attempt",e)}),this.socket.on("reconnect",e=>{L$(`[SocketIO] Reconnected after ${e} attempts`),this.emit("reconnect",e)}),this.socket.on("connect_error",e=>{P$("[SocketIO] Connection error:",e),this.emit("connect_error",e)}),this.socket.on("log_stream",e=>{$$("[SocketIO] Log stream data received:",e),"log_entry"===e.type&&e.payload&&this.emit("logStream",e.payload)}),this.socket.on("log_subscription_confirmed",e=>{L$("[SocketIO] Log subscription confirmed:",e),this.logStreamSubscribed=e.subscribed})}async joinChannel(e){this.socket?(this.isConnected||await this.connectPromise,L$(`[SocketIO] joinChannel: Attempting to join ${e}. Current activeChannelIds before add:`,new Set(this.activeChannelIds)),this.activeChannelIds.add(e),L$(`[SocketIO] joinChannel: Joined ${e}. Current activeChannelIds after add:`,new Set(this.activeChannelIds)),this.socket.emit("message",{type:Wf.ROOM_JOINING,payload:{channelId:e,roomId:e,entityId:this.clientEntityId}}),L$(`[SocketIO] Emitted ROOM_JOINING for ${e}`)):P$("[SocketIO] Cannot join channel: socket not initialized")}async joinRoom(e){return this.joinChannel(e)}leaveChannel(e){this.socket&&this.isConnected?(L$(`[SocketIO] leaveChannel: Attempting to leave ${e}. Current activeChannelIds before delete:`,new Set(this.activeChannelIds)),this.activeChannelIds.delete(e),L$(`[SocketIO] leaveChannel: Left ${e}. Current activeChannelIds after delete:`,new Set(this.activeChannelIds))):D$(`[SocketIO] Cannot leave channel ${e}: not connected`)}leaveRoom(e){return this.leaveChannel(e)}async sendMessage(e,t,r,n,i,a,s){if(!this.socket)return void P$("[SocketIO] Cannot send message: socket not initialized");this.isConnected||await this.connectPromise;const o=a||Hi();L$(`[SocketIO] Sending message to central channel ${t} on server ${r}`),this.socket.emit("message",{type:Wf.SEND_MESSAGE,payload:{senderId:this.clientEntityId,senderName:mn,message:e,channelId:t,roomId:t,serverId:r,messageId:o,source:n,attachments:i,metadata:s}})}async subscribeToLogStream(){this.socket?(this.isConnected||await this.connectPromise,this.socket.emit("subscribe_logs"),L$("[SocketIO] Subscribed to log stream")):P$("[SocketIO] Cannot subscribe to logs: socket not initialized")}async unsubscribeFromLogStream(){this.socket?(this.isConnected||await this.connectPromise,this.socket.emit("unsubscribe_logs"),L$("[SocketIO] Unsubscribed from log stream")):P$("[SocketIO] Cannot unsubscribe from logs: socket not initialized")}async updateLogStreamFilters(e){this.socket?(this.isConnected||await this.connectPromise,this.socket.emit("update_log_filters",e),L$("[SocketIO] Updated log stream filters:",e)):P$("[SocketIO] Cannot update log filters: socket not initialized")}isLogStreamSubscribed(){return this.logStreamSubscribed}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1,this.activeChannelIds.clear(),this.logStreamSubscribed=!1,L$("[SocketIO] Disconnected from server"))}}const xH={setUnauthorized:e=>{console.warn("setUnauthorized called before ConnectionContext is ready",e)},setOfflineStatus:e=>{console.warn("setOfflineStatus called before ConnectionContext is ready",e)}},EH=i.createContext(void 0),kH=({children:e})=>{const{toast:t}=Va(),[n,a]=i.useState("loading"),[s,o]=i.useState(null),l=i.useRef(!0),c=wH.getInstance(),u=i.useCallback(e=>{a("unauthorized"),o(e),t({title:"Authorization Required",description:e||"Please provide a valid API Key.",variant:"destructive"})},[t]),d=i.useCallback(e=>{e?"error"!==n&&"unauthorized"!==n&&(a("error"),o("Network connection appears to be offline."),t({title:"Network Offline",description:"Please check your internet connection.",variant:"destructive"})):"error"===n&&s?.includes("offline")},[n,s,t]),h=i.useCallback(e=>{try{void 0!==e&&cz(e),console.log("API client refreshed with new configuration")}catch(t){console.error("Failed to refresh API client:",t)}},[]);return i.useEffect(()=>{xH.setUnauthorized=u,xH.setOfflineStatus=d},[u,d]),i.useEffect(()=>{const e=()=>{a("connected"),o(null),xH.setOfflineStatus&&xH.setOfflineStatus(!1),l.current?l.current=!1:t({title:"Connection Restored",description:"Successfully reconnected to the Eliza server."})},r=e=>{a("error"),o(`Connection lost: ${e}`),xH.setOfflineStatus&&xH.setOfflineStatus(!0),t({title:"Connection Lost",description:"Attempting to reconnect to the Eliza server",variant:"destructive"})},n=()=>{a("reconnecting"),o("Reconnecting...")},i=e=>{a("error"),o(e.message),xH.setOfflineStatus&&xH.setOfflineStatus(!0)},s=e=>{a("unauthorized"),o(`Unauthorized: ${e}`),t({title:"Unauthorized",description:"Please log in again.",variant:"destructive"})};return c.on("connect",e),c.on("disconnect",r),c.on("reconnect",e),c.on("reconnect_attempt",n),c.on("connect_error",i),c.on("unauthorized",s),wH.isConnected()&&e(),()=>{c.off("connect",e),c.off("disconnect",r),c.off("reconnect",e),c.off("reconnect_attempt",n),c.off("connect_error",i),c.off("unauthorized",s)}},[t,c,d]),r.jsx(EH.Provider,{value:{status:n,error:s,setUnauthorizedFromApi:u,setOfflineStatusFromProvider:d,refreshApiClient:h},children:e})},SH=()=>{const e=i.useContext(EH);if(!e)throw new Error("useConnection must be inside ConnectionProvider");return e};function AH(){const{toast:e}=Va(),[t,n]=i.useState(null),{openApiKeyDialog:a}=Uz(),{status:s,error:o}=SH(),l="loading"===s,c="connected"===s,u="error"===s,d="unauthorized"===s,h=u||d;i.useEffect(()=>{"error"!==t&&"unauthorized"!==t&&"disconnected"!==t||!c?"connected"===t&&(u||d)&&e({title:"Connection Lost",description:"Attempting to reconnect to the Eliza server...",variant:"destructive"}):e({title:"Connection Restored",description:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Le,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{children:"Successfully reconnected to the Eliza server."})]})}),n(s)},[s,t,c,u,d,e]),i.useEffect(()=>{d&&"unauthorized"!==t&&a()},[d,t,a]);return r.jsx(wa,{"data-testid":"connection-status",children:r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx(Ea,{className:"rounded",children:r.jsx("div",{className:"flex flex-col gap-1 select-none",children:r.jsxs("div",{className:"flex items-center gap-1",children:[h||d?r.jsx(se,{className:Bi("h-3.5 w-3.5",d?"text-yellow-500":"text-red-600")}):r.jsx("div",{className:Bi(["h-2.5 w-2.5 rounded-full",d?"bg-yellow-500":l?"bg-muted-foreground":c?"bg-green-600":"bg-red-600"])}),r.jsx("span",{className:Bi("text-xs",d?"text-yellow-500":l?"text-muted-foreground":c?"text-green-600":"text-red-600"),children:d?"Unauthorized":l?"Connecting...":c?"Connected":"Disconnected"})]})})})}),h&&r.jsx(ca,{side:"top",align:"center",className:"max-w-xs",children:r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:Bi("font-semibold",d?"text-yellow-500":"text-red-500"),children:o?d?"Unauthorized: Invalid or missing API Key. Check client configuration or server logs.":o.includes("NetworkError")||o.includes("Failed to fetch")?"Cannot reach server":o.includes("ECONNREFUSED")?"Connection refused":o.includes("timeout")?"Connection timeout":o.includes("404")||o.includes("not found")||o.includes("API endpoint not found")?"Endpoint not found":o:"Connection failed"}),r.jsx("p",{className:"text-xs",children:"Please ensure the Eliza server is running and accessible."}),!d&&r.jsx("p",{className:"text-xs",children:"Try refreshing the connection or check server logs."}),d&&r.jsx("p",{className:"text-xs",children:"Check the X-API-KEY configured in your client or the ELIZA_SERVER_AUTH_TOKEN on the server."})]})})]})})}const TH=i.forwardRef(({className:e,...t},n)=>r.jsx(Pe,{ref:n,className:Bi("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-md",e),"data-testid":t["data-testid"]||"avatar",...t}));TH.displayName=Pe.displayName;const NH=i.forwardRef(({className:e,...t},n)=>r.jsx(De,{ref:n,className:Bi("aspect-square h-full w-full object-cover",e),"data-testid":t["data-testid"]||"avatar-image",...t}));NH.displayName=De.displayName;const IH=i.forwardRef(({className:e,...t},n)=>r.jsx($e,{ref:n,className:Bi("flex h-full w-full items-center justify-center rounded-md bg-muted",e),"data-testid":t["data-testid"]||"avatar-fallback",...t}));function MH(){const[e,t]=i.useState({open:!1,options:null,onConfirm:null}),r=i.useCallback((e,r)=>{t({open:!0,options:e,onConfirm:r})},[]),n=i.useCallback(e=>{e||t({open:!1,options:null,onConfirm:null})},[]),a=i.useCallback(()=>{e.onConfirm&&e.onConfirm(),n(!1)},[e.onConfirm,n]);return{confirm:r,isOpen:e.open,onOpenChange:n,onConfirm:a,options:e.options}}function CH(e){return{...e,id:e.id,status:(t=e.status,"active"===t?Ff.ACTIVE:Ff.INACTIVE),createdAt:e.createdAt instanceof Date?e.createdAt.getTime():new Date(e.createdAt).getTime(),updatedAt:e.updatedAt instanceof Date?e.updatedAt.getTime():new Date(e.updatedAt).getTime()};var t}function jH(e){return e instanceof Date?e.getTime():"string"==typeof e?new Date(e).getTime():e}function OH(e){return e instanceof Date?e.toISOString():e}function RH(e){return{...e,id:e.id,messageServerId:e.messageServerId,type:e.type,createdAt:OH(e.createdAt),updatedAt:OH(e.updatedAt)}}function LH(e){return{...e,id:e.id,createdAt:OH(e.createdAt),updatedAt:OH(e.updatedAt)}}function PH(e){return{id:e.id,type:e?.type||e.body?.modelType,timestamp:e.timestamp?jH(e.timestamp):void 0,message:e.message,details:e.details,roomId:e.roomId,body:e.body,createdAt:e.createdAt?jH(e.createdAt):void 0}}function DH(e){const t=e.entityId||e.metadata?.entityId||e.metadata?.userId||e.agentId;return{id:e.id,entityId:t,agentId:e.agentId,content:e.content,embedding:e.embedding,roomId:e.roomId,createdAt:jH(e.createdAt),unique:e.metadata?.unique}}IH.displayName=$e.displayName;const $H=lz(),zH=3e4,BH=12e4,UH=6e5,FH=Number.POSITIVE_INFINITY,HH=()=>{const e="undefined"!=typeof navigator&&"connection"in navigator?navigator.connection:null;return{isOffline:"undefined"!=typeof navigator&&!navigator.onLine,effectiveType:e?.effectiveType||"unknown",saveData:e?.saveData||!1}};function GH(e={}){const t=HH();return G({queryKey:["agents"],queryFn:async()=>({data:{agents:(await $H.agents.listAgents()).agents.map(e=>CH(e))}}),staleTime:zH,refetchInterval:!t.isOffline&&zH,refetchIntervalInBackground:!1,...!t.isOffline&&"slow-2g"===t.effectiveType&&{refetchInterval:BH},...e})}function qH(e,t={}){const r=HH();return G({queryKey:["agent",e],queryFn:async()=>{if(!e)throw new Error("Agent ID is required");return{data:CH(await $H.agents.getAgent(e))}},staleTime:zH,enabled:Boolean(e),refetchInterval:!(r.isOffline||!Boolean(e))&&zH,refetchIntervalInBackground:!1,...!r.isOffline&&"slow-2g"===r.effectiveType&&{refetchInterval:BH},...t})}function VH(e,t){const r=Gi(),[n,a]=i.useState([]),[s,o]=i.useState(null),[l,c]=i.useState(!0),[u,d]=i.useState(!0),[h,p]=i.useState(!1),[f,m]=i.useState(null),[g,v]=i.useState(!1),y=i.useCallback((e,n)=>{const i=e.authorId!==r;let a=Date.now();if("number"==typeof e.createdAt)a=e.createdAt;else if("string"==typeof e.createdAt){const t=Date.parse(e.createdAt);isNaN(t)?D$("[transformServerMessageToUiMessage] createdAt string was not directly parsable by Date.parse():",e.createdAt,"for message id:",e.id):a=t}else if(e.createdAt)try{const t=new Date(e.createdAt).getTime();isNaN(t)||(a=t)}catch(En){D$("[transformServerMessageToUiMessage] Could not process createdAt (unknown type):",e.createdAt,"for message:",e.id)}return{id:e.id,text:e.content,name:i?e.metadata?.agentName||e.metadata?.authorDisplayName||e.authorDisplayName||"Agent":mn,senderId:e.authorId,isAgent:i,createdAt:a,attachments:e.metadata?.attachments,thought:i?e.metadata?.thought:void 0,actions:i?e.metadata?.actions:void 0,channelId:e.channelId,serverId:n||e.metadata?.serverId||e.serverId||t,source:e.sourceType,isLoading:!1,prompt:i?e.metadata?.prompt:void 0}},[r,t]),b=i.useCallback(async r=>{if(!e)return a([]),void d(!1);r?v(!0):d(!0),p(!1),m(null);try{const n=(await $H.messaging.getChannelMessages(e,{limit:30,before:r?new Date(r).toISOString():void 0})).messages.map(e=>function(e,t){const r=e.metadata?.attachments?.map(e=>({id:e.id||crypto.randomUUID(),url:e.url,title:e.title||e.name,source:e.source,description:e.description,text:e.text,contentType:e.contentType||e.type}))||void 0,n=e.sourceType,i=e.rawMessage;return{id:e.id,text:e.content,name:e.metadata?.authorDisplayName||e.metadata?.agentName||"Unknown",senderId:e.authorId,isAgent:Boolean(e.metadata?.isAgent)||!1,createdAt:jH(e.createdAt),channelId:e.channelId,serverId:t||e.metadata?.serverId,prompt:e.metadata?.prompt,attachments:r,thought:e.metadata?.thought,actions:e.metadata?.actions,type:n,rawMessage:i}}(e,t||e.metadata?.serverId));if(a(e=>{const t=r?[...n,...e]:n;return Array.from(new Map(t.map(e=>[e.id,e])).values()).sort((e,t)=>e.createdAt-t.createdAt)}),n.length>0){const e=Math.min(...n.map(e=>e.createdAt));(!r||e<(s||1/0))&&o(e)}c(n.length>=30)}catch(moe){p(!0),m(moe),P$(`Failed to fetch messages for channel ${e}:`,moe)}finally{d(!1),v(!1)}},[e,y,t]);i.useEffect(()=>{e?(L$(`[useChannelMessages] ChannelId changed or became available: ${e}. Clearing messages and fetching initial set.`),a([]),o(null),c(!0),b()):(L$("[useChannelMessages] ChannelId is undefined. Clearing messages."),a([]),o(null),c(!0),d(!1))},[e,b]);const _=i.useCallback(e=>{a(t=>{const r=t.findIndex(t=>t.id===e.id);if(r>=0){const n=[...t];return n[r]=e,n.sort((e,t)=>e.createdAt-t.createdAt)}return[...t,e].sort((e,t)=>e.createdAt-t.createdAt)})},[]),w=i.useCallback((e,t)=>{a(r=>r.map(r=>r.id===e?{...r,...t}:r))},[]),x=i.useCallback(e=>{a(t=>t.filter(t=>t.id!==e))},[]),E=i.useCallback(()=>{a([]),o(null),c(!0)},[]);return{data:n,isLoading:u&&0===n.length,isError:h,error:f,fetchNextPage:async()=>{l&&!g&&s&&await b(s-1)},hasNextPage:l,isFetchingNextPage:g,addMessage:_,updateMessage:w,removeMessage:x,clearMessages:E}}function WH(e,t,r,n=!1){return G({queryKey:r?["agents",e,"channels",r,"memories",t,n]:["agents",e,"memories",t,n],queryFn:async()=>{const i={tableName:t,includeEmbedding:n},a=r?await $H.memory.getRoomMemories(e,r,i):await $H.memory.getAgentMemories(e,i);console.log("Agent memories result:",{agentId:e,tableName:t,includeEmbedding:n,channelId:r,result:a,dataLength:a.memories?.length,firstMemory:a.memories?.[0],hasEmbeddings:(a.memories||[]).some(e=>e.embedding?.length>0)});return(a.memories||[]).map(DH)},enabled:Boolean(e&&t),staleTime:1e3,refetchInterval:1e4})}function ZH(){const e=HH(),{data:t,isLoading:r}=GH(),n=t?.data?.agents?.map(e=>e.id)||[],i=ze({queries:n.map(t=>({queryKey:["agent",t],queryFn:async()=>({data:await $H.agents.getAgent(t)}),staleTime:zH,enabled:Boolean(t),refetchInterval:!(e.isOffline||!Boolean(t))&&zH,refetchIntervalInBackground:!1,...!e.isOffline&&"slow-2g"===e.effectiveType&&{refetchInterval:BH}}))}),a=r||i.some(e=>e.isLoading),s=i.some(e=>e.isError),o=i.find(e=>e.error)?.error;return{data:{agents:i.filter(e=>Boolean(e.data?.data)).map(e=>e.data.data)},isLoading:a,isError:s,error:o}}function KH(e={}){const t=HH();return G({queryKey:["servers"],queryFn:async()=>{const e=await $H.messaging.listServers();return{data:{servers:(t=e.servers,t.map(LH))}};var t},staleTime:UH,refetchInterval:!t.isOffline&&UH,...e})}function YH(e,t={}){const r=HH();return G({queryKey:["channels",e],queryFn:async()=>{if(!e)return Promise.resolve({data:{channels:[]}});const t=await $H.messaging.getServerChannels(e);return{data:{channels:(r=t.channels,r.map(RH))}};var r},enabled:!!e,staleTime:BH,refetchInterval:!(r.isOffline||!e)&&BH,...t})}function JH(e,t={}){const r=HH();return G({queryKey:["channelParticipants",e],queryFn:async()=>{if(!e)return Promise.resolve({success:!0,data:[]});try{const t=await $H.messaging.getChannelParticipants(e);let r=[];return t&&Array.isArray(t.participants)?r=t.participants.map(e=>e.userId):t&&Array.isArray(t)&&(r=t.map(e=>e.userId||e.id||e)),{success:!0,data:r}}catch(t){return console.error("[useChannelParticipants] Error:",t),{success:!1,data:[]}}},enabled:!!e,staleTime:BH,refetchInterval:!(r.isOffline||!e)&&zH,...t})}function XH(){return G({queryKey:["server-version"],queryFn:async()=>{try{const e=lz();return await e.system.getVersion()}catch(e){throw P$("Error fetching server version:",e),e}},staleTime:3e5,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)})}const QH=({children:e,className:t=""})=>r.jsx("div",{className:Bi("px-4 pt-1 pb-0 text-sm font-medium text-muted-foreground sidebar-section-header",t),children:e}),eG=({title:e,children:t,className:n=""})=>r.jsxs(r.Fragment,{children:[r.jsx(QH,{className:n,children:e}),r.jsx(ya,{children:r.jsx(ba,{className:"mt-0",children:r.jsx(_a,{children:t})})})]}),tG=({agent:e,isOnline:t,active:n})=>r.jsx(wa,{children:r.jsx(Ve,{to:`/chat/${e.id}`,children:r.jsxs(Ea,{isActive:n,className:"px-2 py-2 my-1 h-full rounded justify-between cursor-pointer",children:[r.jsx("span",{className:"text-base truncate max-w-36",children:e.name}),r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{className:"relative",children:[r.jsxs(TH,{className:"h-6 w-6 rounded-full",children:[r.jsx(NH,{src:Wi(e),alt:e.name||"avatar"}),r.jsx(IH,{className:"rounded-full",children:Fi(e.name||"")})]}),r.jsx("span",{className:Bi("absolute bottom-0 right-0 w-[8px] h-[8px] rounded border border-white",t?"bg-green-500":"bg-muted-foreground")})]})})]})})}),rG=({channel:e,serverId:t,active:n})=>{const i=Gi(),{data:a}=ZH(),s=a?.agents||[],{data:o}=JH(e.id),l=o?.data,c=l&&Array.isArray(l)?l:[],u=s.filter(e=>e.id&&c.includes(e.id)),d=u.slice(0,3),h=u.length>3?u.length-3:0;return r.jsx(wa,{children:r.jsx(Ve,{to:`/group/${e.id}?serverId=${t}`,className:"flex-1",children:r.jsxs(Ea,{isActive:n,className:"px-2 py-2 my-1 h-full rounded justify-between cursor-pointer",children:[r.jsx("span",{className:"text-base truncate max-w-36",children:e.name||Zi(e,e.participants||[],i)}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"flex -space-x-2",children:[d.map(e=>r.jsxs(TH,{className:"h-6 w-6 rounded-full border border-background",children:[r.jsx(NH,{src:"string"==typeof e.settings?.avatar?e.settings.avatar:"",alt:e.name||""}),r.jsx(IH,{className:"rounded-full text-xs",children:Fi(e.name||"")})]},e.id)),h>0&&r.jsxs("div",{className:"w-6 h-6 rounded-full bg-muted text-[10px] flex items-center justify-center border border-background",children:["+",h]})]})})]})})})},nG=({agents:e,activePath:t})=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center px-4 pt-1 pb-0 text-muted-foreground",children:[r.jsx(QH,{className:"px-0 py-0 text-xs flex gap-1 mr-2",children:r.jsx("div",{children:"Agents"})}),r.jsx(Xi,{})]}),r.jsx(ya,{children:r.jsx(ba,{className:"px-1 mt-0",children:r.jsx(_a,{children:e.map(e=>r.jsx(tG,{agent:e,isOnline:e.status===Ff.ACTIVE,active:t.includes(`/chat/${String(e?.id)}`)},e?.id))})})})]}),iG=({servers:e,isLoadingServers:t,activePath:n})=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center px-4 pt-1 pb-0 text-muted-foreground",children:[r.jsx(QH,{className:"px-0 py-0 text-xs flex gap-1 mr-2",children:r.jsx("div",{children:"Groups"})}),r.jsx(Xi,{})]}),r.jsx(ya,{children:r.jsx(ba,{className:"px-1 mt-0",children:r.jsxs(_a,{children:[t&&Array.from({length:3}).map((e,t)=>r.jsx(wa,{children:r.jsx(ka,{})},`skel-group-${t}`)),e?.map(e=>r.jsx(aG,{serverId:e.id,activePath:n},e.id)),(!e||0===e.length)&&!t&&r.jsx(wa,{children:r.jsx("div",{className:"p-4 text-xs text-muted-foreground",children:"No groups found."})})]})})})]}),aG=({serverId:e,activePath:t})=>{const{data:n,isLoading:a}=YH(e),s=i.useMemo(()=>n?.data?.channels?.filter(e=>e.type===Uf.GROUP)||[],[n]);return a?r.jsx(wa,{children:r.jsx(ka,{})}):s.length?r.jsx(r.Fragment,{children:s.map(n=>r.jsx(rG,{channel:n,serverId:e,active:t.includes(`/group/${n.id}`)},n.id))}):null};function sG({refreshHomePage:e,isMobile:t=!1}){const n=Ue(),a=Oe(),s=Re(),o=function(){const{data:e}=XH();return e?.version||"0.0.0-loading"}(),{data:l,error:c,isLoading:u}=ZH(),{data:d,isLoading:h}=KH(),p=i.useMemo(()=>l?.agents||[],[l]),f=i.useMemo(()=>d?.data?.servers||[],[d]),[m,g]=i.useMemo(()=>((e,t)=>{const r=[],n=[];return e.forEach(e=>(t(e)?r:n).push(e)),[r,n]})(p,e=>e.status===Ff.ACTIVE),[p]),v=c?"Error loading agents: NetworkError: Unable to connect to the server. Please check if the server is running.":void 0;return r.jsx(r.Fragment,{children:r.jsxs(pa,{className:Bi("bg-background border-r overflow-hidden",t?"p-3 pt-12 w-full h-full":"p-4 w-72 fixed left-0 top-0 z-40 h-screen",!t&&"hidden md:flex md:flex-col"),collapsible:"none","data-testid":"app-sidebar",children:[r.jsx(ma,{children:r.jsx(_a,{children:r.jsx(wa,{children:r.jsx(Ea,{size:"lg",asChild:!0,children:r.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),L$("[AppSidebar] handleLogoClick triggered",{currentPath:n.pathname}),s.invalidateQueries({queryKey:["agents"]}),s.invalidateQueries({queryKey:["agentsWithDetails"]}),s.invalidateQueries({queryKey:["servers"]}),s.invalidateQueries({queryKey:["channels"]}),"/"===n.pathname?(L$("[AppSidebar] Already on home page. Calling refreshHomePage()."),e()):(L$('[AppSidebar] Not on home page. Navigating to "/".'),a("/"))},className:"px-4 py-2 h-full sidebar-logo no-underline cursor-pointer",children:r.jsxs("div",{className:"flex flex-col pt-2 gap-1 items-start justify-center",children:[r.jsx("img",{alt:"vibee-logo",src:"/vibee-logo-light.svg",className:"w-48 max-full"}),r.jsxs("span",{className:"text-xs font-mono text-muted-foreground",children:["v",o]})]})})})})})}),r.jsxs(va,{className:"flex-1 overflow-y-auto",children:[v&&r.jsx("div",{className:"px-4 py-2 text-xs text-red-500",children:v}),r.jsx(_a,{className:"my-2",children:r.jsx(wa,{className:"list-none",children:function(){const e=Oe();return r.jsxs(ds,{children:[r.jsx(hs,{asChild:!0,children:r.jsxs(Yi,{variant:"ghost",className:"w-full bg-sidebar-accent hover:bg-sidebar-accent/80 h-10 rounded justify-start",children:[r.jsx(qe,{className:"w-4 h-4 bg"}),"Create New"]})}),r.jsxs(ps,{align:"start",className:"w-full min-w-[var(--radix-dropdown-menu-trigger-width)]",children:[r.jsx(fs,{onClick:()=>{e("/create")},className:"w-full",children:"Create New Agent"}),r.jsx(fs,{onClick:()=>{e("/group/new")},className:"w-full",children:"Create New Group"})]})]})}()})}),r.jsxs("div",{className:"pt-2",children:[u&&!v&&r.jsx(eG,{title:"Agents",children:r.jsx(ka,{})}),!u&&!v&&r.jsxs(r.Fragment,{children:[r.jsx(nG,{agents:[...m,...g],activePath:n.pathname}),r.jsx(iG,{servers:f,isLoadingServers:h,activePath:n.pathname})]})]})]}),r.jsx(ga,{className:"px-2 py-4",children:r.jsxs(_a,{children:[r.jsx(oG,{to:"https://eliza.how/",Icon:Fe,label:"Documentation"}),r.jsx(oG,{to:"/logs",Icon:He,label:"Logs"}),r.jsx(oG,{to:"/settings",Icon:Ge,label:"Settings"}),r.jsx(AH,{})]})})]})})}const oG=({to:e,Icon:t,label:n})=>e.startsWith("http://")||e.startsWith("https://")?r.jsx(wa,{children:r.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:r.jsxs(Ea,{className:"rounded cursor-pointer",children:[r.jsx(t,{className:"h-4 w-4 mr-3"}),n]})})}):r.jsx(wa,{children:r.jsx(Ve,{to:e,children:r.jsxs(Ea,{className:"rounded cursor-pointer",children:[r.jsx(t,{className:"h-4 w-4 mr-3"}),n]})})});function lG({className:e}){const{status:t,error:n}=SH();if(!("error"===t||"unauthorized"===t))return null;let i="Connection Failed",a="Please ensure the Eliza server is running and accessible.";const s="unauthorized"===t;if(n){const e=n;s?(i="Unauthorized",a="Invalid or missing API Key provided."):e.includes("NetworkError")||e.includes("Failed to fetch")?(i="Network Error",a="Cannot reach the server. Please check your network connection."):e.includes("ECONNREFUSED")?(i="Connection Refused",a="The server refused the connection. Please ensure it is running."):e.includes("timeout")?(i="Connection Timeout",a="The server took too long to respond."):e.includes("404")||e.includes("not found")||e.includes("API endpoint not found")||e.includes("Endpoint not found")?(i="Endpoint Not Found",a="The server API endpoint could not be found."):a=e}return r.jsx("div",{className:Bi("bg-opacity-10 border rounded-md p-3 mb-4 w-full md:max-w-4xl","flex items-center justify-between w-full mt-4",s?"bg-yellow-900/20 border-yellow-700 text-yellow-100":"bg-red-900/20 border-red-700 text-red-100",e),children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(se,{className:Bi("h-5 w-5 flex-shrink-0",s?"text-yellow-400":"text-red-400")}),r.jsxs("div",{children:[r.jsx("h4",{className:Bi("font-medium text-sm",s?"text-yellow-200":"text-red-200"),children:i}),r.jsx("p",{className:Bi("text-xs mt-1",s?"text-yellow-300":"text-red-300"),children:a}),r.jsx("div",{className:"mt-2 flex space-x-4",children:r.jsxs("a",{href:"https://eliza.how",target:"_blank",rel:"noopener noreferrer",className:Bi("text-xs flex items-center",s?"hover:text-yellow-200 text-yellow-300":"hover:text-red-200 text-red-300"),children:[r.jsx(We,{className:"h-3 w-3 mr-1"}),"Troubleshooting Guide"]})})]})]})})}const cG=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Bi("rounded-lg border bg-card text-card-foreground shadow-sm",e),"data-slot":"card",...t}));cG.displayName="Card";const uG=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Bi("flex flex-col space-y-1.5 bg-black/50 rounded-t-lg p-2",e),"data-slot":"card-header",...t}));uG.displayName="CardHeader";const dG=i.forwardRef(({className:e,...t},n)=>r.jsx("h3",{ref:n,className:Bi("text-2xl font-semibold leading-none tracking-tight",e),"data-slot":"card-title",...t}));dG.displayName="CardTitle";i.forwardRef(({className:e,...t},n)=>r.jsx("p",{ref:n,className:Bi("text-sm text-muted-foreground",e),"data-slot":"card-description",...t})).displayName="CardDescription";const hG=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Bi("p-6 pt-0",e),"data-slot":"card-content",...t}));hG.displayName="CardContent";const pG=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Bi("flex items-center p-6 pt-0",e),"data-slot":"card-footer",...t}));function fG(){const[e,t]=i.useState(""),[n,a]=i.useState(""),[s,o]=i.useState(!1),[l,c]=i.useState(null),[u,h]=i.useState(null),[p,f]=i.useState(""),[m,g]=i.useState({}),v=i.useRef(null),[y,b]=i.useState(!1),[_,w]=i.useState(!1),{toast:x}=Va();i.useEffect(()=>{const e=e=>{v.current&&!v.current.contains(e.target)&&c(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),i.useEffect(()=>{E()},[]);const E=async()=>{const e=lz(),t=await e.system.getEnvironment();g(t)};return r.jsxs("div",{className:"container max-w-4xl mx-auto p-6",children:[r.jsx($z,{open:_,onOpenChange:w,onApiKeySaved:()=>{console.log("API Key was saved")}}),r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Env settings"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Env settings"})]}),r.jsxs(Yi,{onClick:()=>w(!0),"aria-label":"Manage API Key",children:[r.jsx(Ze,{className:"h-5 w-5"}),"Manage API Key"]})]}),r.jsx(cG,{children:r.jsx(hG,{className:"p-6",children:r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"rounded-lg w-full flex flex-col gap-3",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 pb-5 ml-1",children:"Environment Settings"}),r.jsxs("div",{className:"grid grid-cols-[1fr_2fr_auto] gap-4 items-end w-full pb-4",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{htmlFor:"secret-name",className:"ml-2 text-xs font-medium text-gray-400",children:"NAME"}),r.jsx(Ji,{id:"secret-name",placeholder:"VARIABLE_NAME",value:e,onChange:e=>t(e.target.value)})]}),r.jsxs("div",{className:"flex flex-col gap-1 relative",children:[r.jsx("label",{htmlFor:"secret-value",className:"ml-2 text-xs font-medium text-gray-400",children:"VALUE"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ji,{id:"secret-value",type:s?"text":"password",placeholder:"i9ju23nfsdf56",value:n,onChange:e=>a(e.target.value),className:"pr-10"}),r.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center cursor-pointer text-gray-500",onClick:()=>o(!s),children:s?r.jsx(Te,{}):r.jsx(Ne,{})})]})]}),r.jsx(Yi,{className:"shrink-0",onClick:()=>{e&&n&&(g({...m,[e]:n}),t(""),a(""),h(null))},children:"Add"})]}),Object.keys(m).length>0&&r.jsxs("div",{className:"grid grid-cols-[1fr_2fr_auto] gap-4 mt-6 font-medium text-gray-400 border-b pb-2 ml-1",children:[r.jsx("div",{children:"Name"}),r.jsx("div",{children:"Value"}),r.jsx("div",{children:"Action"})]}),r.jsx("div",{className:"mt-2",children:Object.entries(m).map(([e,t],n)=>r.jsxs("div",{className:"grid grid-cols-[1fr_2fr_auto] gap-4 items-center border-b py-2 ml-1 relative",children:[r.jsx("div",{className:"truncate max-w-48",children:e}),r.jsx("div",{children:u===n?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ji,{value:p,onChange:e=>f(e.target.value),className:"w-full"}),r.jsx(Yi,{variant:"ghost",onClick:()=>(e=>{g({...m,[e]:p}),h(null)})(e),children:r.jsx(D,{className:"w-5 h-5 text-green-500"})}),r.jsx(Yi,{variant:"ghost",onClick:()=>h(null),children:r.jsx(d,{className:"w-5 h-5 text-red-500"})})]}):r.jsx("div",{className:"truncate text-gray-500",children:"Encrypted"})}),r.jsxs("div",{className:"relative",children:[r.jsx(Yi,{variant:"ghost",className:"p-2 text-gray-500",onClick:()=>c(l===n?null:n),children:r.jsx(ce,{className:"h-5 w-5"})}),l===n&&r.jsx("div",{ref:v,className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-card ring-1 ring-black ring-opacity-5 z-10",children:r.jsxs("div",{className:"py-1",children:[r.jsx("button",{onClick:()=>(e=>{h(l),f(m[e]),c(null)})(e),className:"w-full text-left px-4 py-2 text-sm text-muted-foreground hover:bg-accent hover:text-accent-foreground",children:"Edit"}),r.jsx("button",{onClick:()=>(e=>{const t={...m};delete t[e],g(t),c(null)})(e),className:"w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-accent",children:"Remove"})]})})]})]},n))})]})})})}),r.jsxs("div",{className:"flex gap-2 mt-4 justify-end",children:[r.jsx(Yi,{variant:"outline",onClick:async()=>{await E(),h(null),c(null),t(""),a("")},children:"Reset"}),r.jsx(Yi,{type:"submit",disabled:y,onClick:async()=>{b(!0);try{const e=lz();await e.system.updateLocalEnvironment(m),x({title:"Success",description:"Environment variables updated successfully!"})}catch(e){x({title:"Error",description:"Failed to update environment variables.",variant:"destructive"})}finally{b(!1)}},children:"Save Changes"})]})]})}pG.displayName="CardFooter";const mG={10:"TRACE",20:"DEBUG",27:"SUCCESS",28:"PROGRESS",29:"LOG",30:"INFO",40:"WARN",50:"ERROR",60:"FATAL"};function gG(e){return mG[e]||"UNKNOWN"}function vG(e){return e>=50?"bg-red-600/80":e>=40?"bg-amber-600/80":e>=27?"bg-emerald-600/80":"bg-slate-500"}function yG({data:e}){const t=Math.max(...e.map(e=>e.total),1);return r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-500"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Info"," ",r.jsx("span",{className:"font-mono",children:e.reduce((e,t)=>e+t.info,0).toLocaleString()})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-red-600/80"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Errors"," ",r.jsx("span",{className:"font-mono",children:e.reduce((e,t)=>e+t.errors,0).toLocaleString()})]})]})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[e[e.length-1]?.timestamp.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})," ","- (UTC-7)"]})]}),r.jsx("div",{className:"h-32 flex items-end gap-1 bg-muted/30 rounded p-4",children:e.map((e,n)=>r.jsxs("div",{className:"flex-1 flex flex-col justify-end",children:[r.jsx("div",{style:{height:e.info/t*100+"%"},className:"bg-slate-500 rounded-sm min-h-[2px] transition-all duration-200",title:`${e.timestamp.toLocaleTimeString()}: ${e.info} info logs`},`${e.timestamp.getTime()}-info`),r.jsx("div",{style:{height:e.errors/t*100+"%"},className:"bg-red-600/80 rounded-sm min-h-[2px] transition-all duration-200",title:`${e.timestamp.toLocaleTimeString()}: ${e.errors} error logs`},`${e.timestamp.getTime()}-errors`)]},n))}),r.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-2",children:[r.jsx("span",{children:e[0]?.timestamp.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),r.jsx("span",{children:e[e.length-1]?.timestamp.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit"})})]})]})}function bG(){return r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx(et,{className:"h-8 w-8 animate-spin text-muted-foreground"}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-medium",children:"Loading Logs"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching system logs..."})]})]})})}function _G({selectedLevel:e,searchQuery:t}){return r.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[r.jsx(Ke,{className:"h-16 w-16 text-muted-foreground/30 mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Logs Found"}),r.jsx("p",{className:"text-muted-foreground max-w-md",children:t?`No logs match "${t}". Try adjusting your search or filter.`:"all"===e?"No logs available. Logs will appear here as the system generates them.":`No ${e.toUpperCase()} logs found.`})]})}function wG({agentName:e,level:t}){const[n,a]=i.useState(t||"all"),[s,o]=i.useState(e||"all"),[l,c]=i.useState(""),[u,d]=i.useState("7 days"),[h,p]=i.useState(!0),[f,m]=i.useState(!1),[g,v]=i.useState([]),[y,b]=i.useState(!1),_=Re(),{confirm:w,isOpen:x,onOpenChange:E,onConfirm:k,options:S}=MH(),{data:A,isLoading:T,error:N,refetch:I}=G({queryKey:["logs",n,s],queryFn:async()=>{const e=lz();return await e.system.getGlobalLogs({level:"all"===n?"":n,agentName:"all"===s?void 0:s})},refetchInterval:!(!h||y)&&5e3,staleTime:1e3,enabled:!0}),{data:M}=GH(),C=i.useCallback(e=>{!("all"!==n&&gG(e.level).toLowerCase()!==n.toLowerCase()||"all"!==s&&e.agentName!==s)&&v(t=>[e,...t].slice(0,1e3))},[n,s]);i.useEffect(()=>{if(h&&y){const e=wH.getInstance();return e.subscribeToLogStream().catch(console.error),e.on("logStream",C),()=>{e.off("logStream",C),e.unsubscribeFromLogStream().catch(console.error)}}},[h,y,C]),i.useEffect(()=>{h?wH.isConnected()?b(!0):b(!1):(b(!1),v([]))},[h]),i.useEffect(()=>{if(y&&h){wH.getInstance().updateLogStreamFilters({agentName:s,level:n}).catch(console.error)}},[s,n,y,h]);const j=A?.logs||[];let O;O=y&&h&&g.length>0?g:j;const R=O.sort((e,t)=>t.time-e.time),L=A?.levels||[],P=M?.data?.agents?.map(e=>e.name)||[],D=R.filter(e=>{if(l.trim()){const t=l.toLowerCase(),r=[e.msg,e.agentName,e.roomId,gG(e.level),...Object.entries(e).filter(([e])=>!Number.isNaN(Number(e))).map(([e,t])=>String(t))].filter(Boolean).join(" ").toLowerCase();return r.includes(t)}return!0}),$=function(e){const t=Date.now(),r={};for(let i=23;i>=0;i--){const e=new Date(t-60*i*60*1e3);e.setMinutes(0,0,0);const n=e.toISOString();r[n]={info:0,errors:0}}const n=t-864e5;return e.forEach(e=>{if(e.time>=n){const t=new Date(e.time);t.setMinutes(0,0,0);const n=t.toISOString();r[n]&&(e.level>=50?r[n].errors++:r[n].info++)}}),Object.entries(r).map(([e,t])=>({timestamp:new Date(e),...t,total:t.info+t.errors}))}(D);if(T&&0===R.length)return r.jsx("div",{className:"flex flex-col h-[calc(100vh-100px)] min-h-[400px] w-full",children:r.jsx(bG,{})});if(N){const e=N.message?.includes("404")||N.message?.includes("endpoint not found")||N.message?.includes("Not Found");return r.jsx("div",{className:"flex flex-col h-[calc(100vh-100px)] min-h-[400px] w-full",children:r.jsx("div",{className:"flex items-center justify-center flex-1",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx(Ke,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),r.jsx("h3",{className:"font-medium mb-2",children:e?"Global Logs API Not Available":"Failed to Load Logs"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:e?"The server does not have the global logs API endpoint configured. You can still view individual agent logs from the agent details pages.":`There was an error loading the system logs: ${N.message}`}),!e&&r.jsxs(Yi,{variant:"outline",size:"sm",onClick:()=>I?.(),children:[r.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})})}return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col h-[calc(100vh-100px)] min-h-[400px] w-full",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6 px-4 pt-4 flex-none",children:[r.jsxs(Za,{value:n,onValueChange:a,children:[r.jsxs(Ja,{className:"w-32 h-9",children:[r.jsx(Je,{className:"h-4 w-4 mr-2"}),r.jsx(Ya,{placeholder:"Filter"})]}),r.jsxs(es,{children:[r.jsx(rs,{value:"all",children:"ALL"}),L.map(e=>r.jsx(rs,{value:e,children:e.toUpperCase()},e))]})]}),r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Ji,{placeholder:"Full-text log search",value:l,onChange:e=>c(e.target.value),className:"pl-10 h-9"})]}),P&&P.length>0&&!e&&r.jsxs(Za,{value:s,onValueChange:o,children:[r.jsx(Ja,{className:"w-40 h-9",children:r.jsx(Ya,{placeholder:"Agent"})}),r.jsxs(es,{children:[r.jsx(rs,{value:"all",children:"ALL AGENTS"}),P?.map(e=>r.jsx(rs,{value:e,children:e},e))]})]}),r.jsxs(Za,{value:u,onValueChange:d,children:[r.jsxs(Ja,{className:"w-32 h-9",children:[r.jsx(Qe,{className:"h-4 w-4 mr-2"}),r.jsx(Ya,{})]}),r.jsxs(es,{children:[r.jsx(rs,{value:"1 hour",children:"1 hour"}),r.jsx(rs,{value:"6 hours",children:"6 hours"}),r.jsx(rs,{value:"24 hours",children:"24 hours"}),r.jsx(rs,{value:"7 days",children:"7 days"}),r.jsx(rs,{value:"30 days",children:"30 days"})]})]}),r.jsx(Yi,{variant:"outline",size:"sm",onClick:()=>{y&&h?v([]):I&&I()},className:"h-9 w-9 p-0",children:r.jsx(Ye,{className:"h-4 w-4"})}),r.jsxs(Yi,{variant:h?"default":"outline",size:"sm",onClick:()=>p(!h),className:"h-9 px-3",title:h?y?"Live mode (WebSocket)":"Live mode (Polling)":"Live mode disabled",children:[r.jsx("div",{className:"w-2 h-2 rounded-full mr-2 "+(h?"bg-emerald-500 animate-pulse":"bg-slate-400")}),"Live"]})]}),r.jsx("div",{className:"flex-1 overflow-hidden px-4 pb-4",children:0===D.length?r.jsx(_G,{selectedLevel:n,searchQuery:l}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(yG,{data:$}),r.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[r.jsx("div",{className:"bg-muted/50 border-b px-4 py-3",children:r.jsxs("div",{className:"grid grid-cols-[200px_1fr] gap-4",children:[r.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Timestamp"}),r.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Message"})]})}),r.jsx("div",{className:"divide-y max-h-[400px] overflow-y-auto",children:D.slice(0,100).map((e,t)=>{return r.jsxs("div",{className:"grid grid-cols-[200px_1fr] gap-4 px-4 py-3 hover:bg-muted/30 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-1 h-6 rounded-full ${vG(e.level)}`}),r.jsx("div",{className:"text-sm font-mono text-muted-foreground",children:(n=e.time,new Date(n).toLocaleDateString("en-US",{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}))})]}),r.jsxs("div",{className:"flex items-start gap-2 min-w-0",children:[r.jsx("div",{className:"font-mono text-sm leading-relaxed break-all",children:e.msg}),e.agentName&&r.jsx(Aa,{variant:"secondary",className:"text-xs flex-shrink-0",children:e.agentName})]})]},`${e.time}-${e.msg}-${t}`);var n})}),D.length>100&&r.jsx("div",{className:"border-t bg-muted/30 px-4 py-3 text-center",children:r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing first 100 of ",D.length.toLocaleString()," logs"]})})]})]})}),r.jsxs("div",{className:"border-t bg-muted/30 px-4 py-3 flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:h&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),r.jsxs("span",{children:["Live updates enabled ",y?"(streaming)":"(polling)"]})]})}),r.jsxs(Yi,{variant:"destructive",size:"sm",onClick:()=>{w({title:"Clear All Logs",description:"Are you sure you want to permanently delete all system logs? This action cannot be undone.",confirmText:"Delete",variant:"destructive"},async()=>{try{m(!0);const e=lz();await e.system.deleteGlobalLogs(),_.invalidateQueries({queryKey:["logs"]}),y&&v([])}catch(e){console.error("Failed to clear logs:",e)}finally{m(!1)}})},disabled:f,className:"h-8 px-3 text-xs",children:[r.jsx(Me,{className:"h-3 w-3 mr-1"}),f?"Clearing...":"Clear All Logs"]})]})]}),r.jsx(Dz,{open:x,onOpenChange:E,title:S?.title||"",description:S?.description||"",confirmText:S?.confirmText,cancelText:S?.cancelText,variant:S?.variant,onConfirm:k})]})}const xG="eliza-onboarding-completed";function EG(){const{onboardingCompleted:e,completeOnboarding:t}=(()=>{const[e,t]=i.useState(()=>{try{return"true"===localStorage.getItem(xG)}catch(e){return P$("Error accessing localStorage:",e),!1}});return i.useEffect(()=>{try{localStorage.setItem(xG,e.toString())}catch(t){P$("Error writing to localStorage:",t)}},[e]),{onboardingCompleted:e,completeOnboarding:()=>{t(!0)},resetOnboarding:()=>{t(!1)}}})(),[n,a]=i.useState(!1),s=Ue(),[o,l]=i.useState(0),c=[{target:".sidebar-logo",content:"Welcome to ElizaOS! This is your gateway to creating and managing intelligent AI agents.",disableBeacon:!0,title:"Welcome to ElizaOS"},{target:".sidebar-create-button",content:"This is your main creation button. Click here to create new agents or rooms quickly.",title:"Create Button"},{target:".sidebar-online-section, .sidebar-offline-section",content:"Your agents are organized here. Online agents (green dot) are ready to chat, while offline agents need to be activated first.",title:"Your Agents"},{target:".sidebar-groups-section",content:"Access your agent groups from here to see collaborative conversations between multiple agents.",title:"Groups Navigation"},{target:".sidebar-docs-button, .sidebar-logs-button, .sidebar-settings-button",content:"Access documentation, system logs, and global settings from these utility buttons.",title:"System Utilities"},{target:".sidebar-connection-status",content:"This indicator shows your connection status to the ElizaOS server.",title:"Connection Status"},{target:".agents-section",content:'This is your main workspace showing all your agents. Active agents have a green dot, while inactive ones appear grayed out with an "Offline" label.',title:"Agent Dashboard"},{target:".message-button, .start-button",content:'Click "Message" to chat with active agents, or "Start" to activate offline agents first.',title:"Agent Interaction"},{target:".agent-info-button, .agent-settings-button",content:"View agent details or configure settings using these buttons on each agent card.",title:"Agent Management"},{target:".groups-section",content:"This section displays your agent groups for collaborative interactions between multiple agents.",title:"Agent Groups"},{target:".groups-create-button",content:"Create a new group by clicking this button. Groups allow multiple agents to interact together.",title:"Create New Group"},{target:".create-agent-button",content:"Let's create your first agent! Click this button to get started.",title:"Create Your First Agent",spotlightClicks:!0}],u="/"===s.pathname?c:"/create"===s.pathname?[{target:".agent-form-name",content:"Give your agent a name that reflects its purpose or personality.",title:"Name Your Agent",disableBeacon:!0},{target:".agent-form-system-prompt",content:"The system prompt defines your agent's behavior and capabilities. This is the most important field for shaping how your agent will respond.",title:"Define Agent Behavior"},{target:".tabs-list",content:"Switch between these tabs to configure different aspects of your agent such as content, style, plugins, and appearance.",title:"Configuration Tabs"},{target:".agent-form-submit",content:"Click Save to create your agent and return to the dashboard.",title:"Save Your Agent",spotlightClicks:!0}]:[];i.useEffect(()=>{if("/"===s.pathname&&!e&&0===o){const e=setTimeout(()=>{a(!0)},1e3);return()=>clearTimeout(e)}if("/create"===s.pathname&&!e&&1===o){const e=setTimeout(()=>{a(!0)},1e3);return()=>clearTimeout(e)}a(!1)},[s.pathname,e,o]);return e||0===u.length?null:r.jsx(tt,{callback:e=>{const{status:r,index:n,type:i,action:o}=e;"/"===s.pathname&&"step:after"===i&&n===c.length-1&&(l(1),a(!1)),r!==rt.FINISHED&&r!==rt.SKIPPED&&o!==nt.CLOSE||(t(),a(!1))},continuous:!0,run:n,scrollToFirstStep:!0,showProgress:!0,showSkipButton:!0,steps:u,floaterProps:{disableAnimation:!1,styles:{floater:{filter:"drop-shadow(0 10px 15px rgba(0, 0, 0, 0.25))"}}},styles:{options:{primaryColor:"#3b82f6",backgroundColor:"#1f2937",textColor:"#f3f4f6",overlayColor:"rgba(0, 0, 0, 0.6)",zIndex:9999,arrowColor:"#1f2937",beaconSize:36},tooltip:{fontSize:"14px",padding:"16px",borderRadius:"10px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.3)"},tooltipContainer:{textAlign:"left"},tooltipTitle:{fontSize:"16px",fontWeight:"600",marginBottom:"8px"},tooltipContent:{padding:"5px 0",fontSize:"14px",lineHeight:"1.5"},buttonClose:{color:"#9ca3af",opacity:.8},buttonBack:{color:"#9ca3af",fontSize:"14px",fontWeight:"500",padding:"8px 12px",borderRadius:"6px",marginRight:"8px",transition:"background-color 0.2s ease"},buttonNext:{backgroundColor:"#3b82f6",fontSize:"14px",fontWeight:"500",padding:"8px 16px",borderRadius:"6px",color:"white",border:"none",boxShadow:"0 4px 6px rgba(59, 130, 246, 0.3)",transition:"all 0.2s ease"},buttonSkip:{color:"#9ca3af",fontSize:"14px",padding:"8px 12px",borderRadius:"6px",transition:"background-color 0.2s ease"},spotlight:{borderRadius:"8px",backgroundColor:"transparent"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.7)"}}})}const kG=at,SG=i.forwardRef(({className:e,...t},n)=>r.jsx(ut,{ref:n,className:Bi("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));SG.displayName=ut.displayName;const AG=fn("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),TG=i.forwardRef(({className:e,variant:t,...n},i)=>r.jsx(st,{ref:i,className:Bi(AG({variant:t}),e),...n}));TG.displayName=st.displayName;const NG=i.forwardRef(({className:e,...t},n)=>r.jsx(it,{ref:n,className:Bi("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));NG.displayName=it.displayName;const IG=i.forwardRef(({className:e,...t},n)=>r.jsx(ct,{ref:n,className:Bi("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(d,{className:"h-4 w-4"})}));IG.displayName=ct.displayName;const MG=i.forwardRef(({className:e,...t},n)=>r.jsx(ot,{ref:n,className:Bi("text-sm font-semibold [&+div]:text-xs",e),...t}));MG.displayName=ot.displayName;const CG=i.forwardRef(({className:e,...t},n)=>r.jsx(lt,{ref:n,className:Bi("text-sm opacity-90",e),...t}));function jG(){const{toasts:e}=Va();return r.jsxs(kG,{children:[e.map(({id:e,title:t,description:n,action:i,...a})=>r.jsxs(TG,{...a,children:[r.jsxs("div",{className:"grid gap-1",children:[t&&r.jsx(MG,{children:t}),n&&r.jsx(CG,{children:n})]}),i,r.jsx(IG,{})]},e)),r.jsx(SG,{})]})}CG.displayName=lt.displayName;var OG={exports:{}};var RG={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},LG={};var PG="object"==typeof process&&LG&&LG.NODE_DEBUG&&/\bsemver\b/i.test(LG.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=RG,a=PG,s=(t=e.exports={}).re=[],o=t.safeRe=[],l=t.src=[],c=t.safeSrc=[],u=t.t={};let d=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[h,n]],f=(e,t,r)=>{const n=(e=>{for(const[t,r]of p)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=d++;a(e,i,t),u[e]=i,l[i]=t,c[i]=n,s[i]=new RegExp(t,r?"g":void 0),o[i]=new RegExp(n,r?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),f("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NONNUMERICIDENTIFIER]}|${l[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${h}+`),f("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),f("FULL",`^${l[u.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),f("LOOSE",`^${l[u.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),f("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),f("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?`+`(?:${l[u.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",l[u.COERCE],!0),f("COERCERTLFULL",l[u.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(OG,OG.exports);var DG=OG.exports;const $G=Object.freeze({loose:!0}),zG=Object.freeze({});var BG=e=>e?"object"!=typeof e?$G:e:zG;const UG=/^[0-9]+$/,FG=(e,t)=>{if("number"==typeof e&&"number"==typeof t)return e===t?0:e<t?-1:1;const r=UG.test(e),n=UG.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1};var HG={compareIdentifiers:FG,rcompareIdentifiers:(e,t)=>FG(t,e)};const GG=PG,{MAX_LENGTH:qG,MAX_SAFE_INTEGER:VG}=RG,{safeRe:WG,t:ZG}=DG,KG=BG,{compareIdentifiers:YG}=HG;var JG=class e{constructor(t,r){if(r=KG(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>qG)throw new TypeError(`version is longer than ${qG} characters`);GG("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?WG[ZG.LOOSE]:WG[ZG.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>VG||this.major<0)throw new TypeError("Invalid major version");if(this.minor>VG||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>VG||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<VG)return t}return e}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(GG("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const e=this.prerelease[r],n=t.prerelease[r];if(GG("prerelease compare",r,e,n),void 0===e&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===e)return-1;if(e!==n)return YG(e,n)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{const e=this.build[r],n=t.build[r];if(GG("build compare",r,e,n),void 0===e&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===e)return-1;if(e!==n)return YG(e,n)}while(++r)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=`-${t}`.match(this.options.loose?WG[ZG.PRERELEASELOOSE]:WG[ZG.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===YG(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const XG=JG;var QG=(e,t,r=!1)=>{if(e instanceof XG)return e;try{return new XG(e,t)}catch(ep){if(!r)return null;throw ep}};const eq=QG;var tq=(e,t)=>{const r=eq(e,t);return r?r.version:null};const rq=QG;var nq=(e,t)=>{const r=rq(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};const iq=JG;var aq=(e,t,r,n,i)=>{"string"==typeof r&&(i=n,n=r,r=void 0);try{return new iq(e instanceof iq?e.version:e,r).inc(t,n,i).version}catch(ep){return null}};const sq=QG;var oq=(e,t)=>{const r=sq(e,null,!0),n=sq(t,null,!0),i=r.compare(n);if(0===i)return null;const a=i>0,s=a?r:n,o=a?n:r,l=!!s.prerelease.length;if(!!o.prerelease.length&&!l){if(!o.patch&&!o.minor)return"major";if(0===o.compareMain(s))return o.minor&&!o.patch?"minor":"patch"}const c=l?"pre":"";return r.major!==n.major?c+"major":r.minor!==n.minor?c+"minor":r.patch!==n.patch?c+"patch":"prerelease"};const lq=JG;var cq=(e,t)=>new lq(e,t).major;const uq=JG;var dq=(e,t)=>new uq(e,t).minor;const hq=JG;var pq=(e,t)=>new hq(e,t).patch;const fq=QG;var mq=(e,t)=>{const r=fq(e,t);return r&&r.prerelease.length?r.prerelease:null};const gq=JG;var vq=(e,t,r)=>new gq(e,r).compare(new gq(t,r));const yq=vq;var bq=(e,t,r)=>yq(t,e,r);const _q=vq;var wq=(e,t)=>_q(e,t,!0);const xq=JG;var Eq=(e,t,r)=>{const n=new xq(e,r),i=new xq(t,r);return n.compare(i)||n.compareBuild(i)};const kq=Eq;var Sq=(e,t)=>e.sort((e,r)=>kq(e,r,t));const Aq=Eq;var Tq=(e,t)=>e.sort((e,r)=>Aq(r,e,t));const Nq=vq;var Iq=(e,t,r)=>Nq(e,t,r)>0;const Mq=vq;var Cq=(e,t,r)=>Mq(e,t,r)<0;const jq=vq;var Oq=(e,t,r)=>0===jq(e,t,r);const Rq=vq;var Lq=(e,t,r)=>0!==Rq(e,t,r);const Pq=vq;var Dq=(e,t,r)=>Pq(e,t,r)>=0;const $q=vq;var zq=(e,t,r)=>$q(e,t,r)<=0;const Bq=Oq,Uq=Lq,Fq=Iq,Hq=Dq,Gq=Cq,qq=zq;var Vq=(e,t,r,n)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Bq(e,r,n);case"!=":return Uq(e,r,n);case">":return Fq(e,r,n);case">=":return Hq(e,r,n);case"<":return Gq(e,r,n);case"<=":return qq(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};const Wq=JG,Zq=QG,{safeRe:Kq,t:Yq}=DG;var Jq=(e,t)=>{if(e instanceof Wq)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?Kq[Yq.COERCERTLFULL]:Kq[Yq.COERCERTL];let i;for(;(i=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&i.index+i[0].length===r.index+r[0].length||(r=i),n.lastIndex=i.index+i[1].length+i[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?Kq[Yq.COERCEFULL]:Kq[Yq.COERCE]);if(null===r)return null;const n=r[2],i=r[3]||"0",a=r[4]||"0",s=t.includePrerelease&&r[5]?`-${r[5]}`:"",o=t.includePrerelease&&r[6]?`+${r[6]}`:"";return Zq(`${n}.${i}.${a}${s}${o}`,t)};var Xq,Qq,eV,tV,rV=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}};function nV(){if(Qq)return Xq;Qq=1;const e=/\s+/g;class t{constructor(r,a){if(a=n(a),r instanceof t)return r.loose===!!a.loose&&r.includePrerelease===!!a.includePrerelease?r:new t(r.raw,a);if(r instanceof i)return this.raw=r.value,this.set=[[r]],this.formatted=void 0,this;if(this.options=a,this.loose=!!a.loose,this.includePrerelease=!!a.includePrerelease,this.raw=r.trim().replace(e," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter(e=>!f(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&m(t[0])){this.set=[t];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+e,n=r.get(t);if(n)return n;const s=this.options.loose,m=s?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];e=e.replace(m,T(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(o[l.COMPARATORTRIM],c),a("comparator trim",e),e=e.replace(o[l.TILDETRIM],u),a("tilde trim",e),e=e.replace(o[l.CARETTRIM],d),a("caret trim",e);let g=e.split(" ").map(e=>v(e,this.options)).join(" ").split(/\s+/).map(e=>A(e,this.options));s&&(g=g.filter(e=>(a("loose invalid filter",e,this.options),!!e.match(o[l.COMPARATORLOOSE])))),a("range list",g);const y=new Map,b=g.map(e=>new i(e,this.options));for(const r of b){if(f(r))return[r];y.set(r.value,r)}y.size>1&&y.has("")&&y.delete("");const _=[...y.values()];return r.set(t,_),_}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(t=>g(t,r)&&e.set.some(e=>g(e,r)&&t.every(t=>e.every(e=>t.intersects(e,r)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new s(e,this.options)}catch(ep){return!1}for(let t=0;t<this.set.length;t++)if(N(this.set[t],e,this.options))return!0;return!1}}Xq=t;const r=new rV,n=BG,i=iV(),a=PG,s=JG,{safeRe:o,t:l,comparatorTrimReplace:c,tildeTrimReplace:u,caretTrimReplace:d}=DG,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=RG,f=e=>"<0.0.0-0"===e.value,m=e=>""===e.value,g=(e,t)=>{let r=!0;const n=e.slice();let i=n.pop();for(;r&&n.length;)r=n.every(e=>i.intersects(e,t)),i=n.pop();return r},v=(e,t)=>(e=e.replace(o[l.BUILD],""),a("comp",e,t),e=w(e,t),a("caret",e),e=b(e,t),a("tildes",e),e=E(e,t),a("xrange",e),e=S(e,t),a("stars",e),e),y=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map(e=>_(e,t)).join(" "),_=(e,t)=>{const r=t.loose?o[l.TILDELOOSE]:o[l.TILDE];return e.replace(r,(t,r,n,i,s)=>{let o;return a("tilde",e,t,r,n,i,s),y(r)?o="":y(n)?o=`>=${r}.0.0 <${+r+1}.0.0-0`:y(i)?o=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:s?(a("replaceTilde pr",s),o=`>=${r}.${n}.${i}-${s} <${r}.${+n+1}.0-0`):o=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,a("tilde return",o),o})},w=(e,t)=>e.trim().split(/\s+/).map(e=>x(e,t)).join(" "),x=(e,t)=>{a("caret",e,t);const r=t.loose?o[l.CARETLOOSE]:o[l.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,i,s,o)=>{let l;return a("caret",e,t,r,i,s,o),y(r)?l="":y(i)?l=`>=${r}.0.0${n} <${+r+1}.0.0-0`:y(s)?l="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:o?(a("replaceCaret pr",o),l="0"===r?"0"===i?`>=${r}.${i}.${s}-${o} <${r}.${i}.${+s+1}-0`:`>=${r}.${i}.${s}-${o} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${s}-${o} <${+r+1}.0.0-0`):(a("no pr"),l="0"===r?"0"===i?`>=${r}.${i}.${s}${n} <${r}.${i}.${+s+1}-0`:`>=${r}.${i}.${s}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${s} <${+r+1}.0.0-0`),a("caret return",l),l})},E=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map(e=>k(e,t)).join(" ")),k=(e,t)=>{e=e.trim();const r=t.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return e.replace(r,(r,n,i,s,o,l)=>{a("xRange",e,r,n,i,s,o,l);const c=y(i),u=c||y(s),d=u||y(o),h=d;return"="===n&&h&&(n=""),l=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(u&&(s=0),o=0,">"===n?(n=">=",u?(i=+i+1,s=0,o=0):(s=+s+1,o=0)):"<="===n&&(n="<",u?i=+i+1:s=+s+1),"<"===n&&(l="-0"),r=`${n+i}.${s}.${o}${l}`):u?r=`>=${i}.0.0${l} <${+i+1}.0.0-0`:d&&(r=`>=${i}.${s}.0${l} <${i}.${+s+1}.0-0`),a("xRange return",r),r})},S=(e,t)=>(a("replaceStars",e,t),e.trim().replace(o[l.STAR],"")),A=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(o[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),T=e=>(t,r,n,i,a,s,o,l,c,u,d,h)=>`${r=y(n)?"":y(i)?`>=${n}.0.0${e?"-0":""}`:y(a)?`>=${n}.${i}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=y(c)?"":y(u)?`<${+c+1}.0.0-0`:y(d)?`<${c}.${+u+1}.0-0`:h?`<=${c}.${u}.${d}-${h}`:e?`<${c}.${u}.${+d+1}-0`:`<=${l}`}`.trim(),N=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(a(e[r].semver),e[r].semver!==i.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0};return Xq}function iV(){if(tV)return eV;tV=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(n,i){if(i=r(i),n instanceof t){if(n.loose===!!i.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),s("comparator",n,i),this.options=i,this.loose=!!i.loose,this.parse(n),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(t){const r=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],a=t.match(r);if(!a)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==a[1]?a[1]:"","="===this.operator&&(this.operator=""),a[2]?this.semver=new o(a[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(s("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new o(t,this.options)}catch(ep){return!1}return a(t,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new l(e.value,n).test(this.value):""===e.operator?""===e.value||new l(this.value,n).test(e.semver):(!(n=r(n)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(a(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(a(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}eV=t;const r=BG,{safeRe:n,t:i}=DG,a=Vq,s=PG,o=JG,l=nV();return eV}const aV=nV();var sV=(e,t,r)=>{try{t=new aV(t,r)}catch(ep){return!1}return t.test(e)};const oV=nV();var lV=(e,t)=>new oV(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "));const cV=JG,uV=nV();var dV=(e,t,r)=>{let n=null,i=null,a=null;try{a=new uV(t,r)}catch(ep){return null}return e.forEach(e=>{a.test(e)&&(n&&-1!==i.compare(e)||(n=e,i=new cV(n,r)))}),n};const hV=JG,pV=nV();var fV=(e,t,r)=>{let n=null,i=null,a=null;try{a=new pV(t,r)}catch(ep){return null}return e.forEach(e=>{a.test(e)&&(n&&1!==i.compare(e)||(n=e,i=new hV(n,r)))}),n};const mV=JG,gV=nV(),vV=Iq;var yV=(e,t)=>{e=new gV(e,t);let r=new mV("0.0.0");if(e.test(r))return r;if(r=new mV("0.0.0-0"),e.test(r))return r;r=null;for(let n=0;n<e.set.length;++n){const t=e.set[n];let i=null;t.forEach(e=>{const t=new mV(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!vV(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}),!i||r&&!vV(r,i)||(r=i)}return r&&e.test(r)?r:null};const bV=nV();var _V=(e,t)=>{try{return new bV(e,t).range||"*"}catch(ep){return null}};const wV=JG,xV=iV(),{ANY:EV}=xV,kV=nV(),SV=sV,AV=Iq,TV=Cq,NV=zq,IV=Dq;var MV=(e,t,r,n)=>{let i,a,s,o,l;switch(e=new wV(e,n),t=new kV(t,n),r){case">":i=AV,a=NV,s=TV,o=">",l=">=";break;case"<":i=TV,a=IV,s=AV,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(SV(e,t,n))return!1;for(let c=0;c<t.set.length;++c){const r=t.set[c];let u=null,d=null;if(r.forEach(e=>{e.semver===EV&&(e=new xV(">=0.0.0")),u=u||e,d=d||e,i(e.semver,u.semver,n)?u=e:s(e.semver,d.semver,n)&&(d=e)}),u.operator===o||u.operator===l)return!1;if((!d.operator||d.operator===o)&&a(e,d.semver))return!1;if(d.operator===l&&s(e,d.semver))return!1}return!0};const CV=MV;var jV=(e,t,r)=>CV(e,t,">",r);const OV=MV;var RV=(e,t,r)=>OV(e,t,"<",r);const LV=nV();var PV=(e,t,r)=>(e=new LV(e,r),t=new LV(t,r),e.intersects(t,r));const DV=sV,$V=vq;const zV=nV(),BV=iV(),{ANY:UV}=BV,FV=sV,HV=vq,GV=[new BV(">=0.0.0-0")],qV=[new BV(">=0.0.0")],VV=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===UV){if(1===t.length&&t[0].semver===UV)return!0;e=r.includePrerelease?GV:qV}if(1===t.length&&t[0].semver===UV){if(r.includePrerelease)return!0;t=qV}const n=new Set;let i,a,s,o,l,c,u;for(const p of e)">"===p.operator||">="===p.operator?i=WV(i,p,r):"<"===p.operator||"<="===p.operator?a=ZV(a,p,r):n.add(p.semver);if(n.size>1)return null;if(i&&a){if(s=HV(i.semver,a.semver,r),s>0)return null;if(0===s&&(">="!==i.operator||"<="!==a.operator))return null}for(const p of n){if(i&&!FV(p,String(i),r))return null;if(a&&!FV(p,String(a),r))return null;for(const e of t)if(!FV(p,String(e),r))return!1;return!0}let d=!(!a||r.includePrerelease||!a.semver.prerelease.length)&&a.semver,h=!(!i||r.includePrerelease||!i.semver.prerelease.length)&&i.semver;d&&1===d.prerelease.length&&"<"===a.operator&&0===d.prerelease[0]&&(d=!1);for(const p of t){if(u=u||">"===p.operator||">="===p.operator,c=c||"<"===p.operator||"<="===p.operator,i)if(h&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===h.major&&p.semver.minor===h.minor&&p.semver.patch===h.patch&&(h=!1),">"===p.operator||">="===p.operator){if(o=WV(i,p,r),o===p&&o!==i)return!1}else if(">="===i.operator&&!FV(i.semver,String(p),r))return!1;if(a)if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),"<"===p.operator||"<="===p.operator){if(l=ZV(a,p,r),l===p&&l!==a)return!1}else if("<="===a.operator&&!FV(a.semver,String(p),r))return!1;if(!p.operator&&(a||i)&&0!==s)return!1}return!(i&&c&&!a&&0!==s)&&(!(a&&u&&!i&&0!==s)&&(!h&&!d))},WV=(e,t,r)=>{if(!e)return t;const n=HV(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},ZV=(e,t,r)=>{if(!e)return t;const n=HV(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};var KV=(e,t,r={})=>{if(e===t)return!0;e=new zV(e,r),t=new zV(t,r);let n=!1;e:for(const i of e.set){for(const e of t.set){const t=VV(i,e,r);if(n=n||null!==t,t)continue e}if(n)return!1}return!0};const YV=DG,JV=RG,XV=JG,QV=HG,eW=(e,t,r)=>{const n=[];let i=null,a=null;const s=e.sort((e,t)=>$V(e,t,r));for(const u of s){DV(u,t,r)?(a=u,i||(i=u)):(a&&n.push([i,a]),a=null,i=null)}i&&n.push([i,null]);const o=[];for(const[u,d]of n)u===d?o.push(u):d||u!==s[0]?d?u===s[0]?o.push(`<=${d}`):o.push(`${u} - ${d}`):o.push(`>=${u}`):o.push("*");const l=o.join(" || "),c="string"==typeof t.raw?t.raw:String(t);return l.length<c.length?l:t};const tW=e({parse:QG,valid:tq,clean:nq,inc:aq,diff:oq,major:cq,minor:dq,patch:pq,prerelease:mq,compare:vq,rcompare:bq,compareLoose:wq,compareBuild:Eq,sort:Sq,rsort:Tq,gt:Iq,lt:Cq,eq:Oq,neq:Lq,gte:Dq,lte:zq,cmp:Vq,coerce:Jq,Comparator:iV(),Range:nV(),satisfies:sV,toComparators:lV,maxSatisfying:dV,minSatisfying:fV,minVersion:yV,validRange:_V,outside:MV,gtr:jV,ltr:RV,intersects:PV,simplifyRange:eW,subset:KV,SemVer:XV,re:YV.re,src:YV.src,tokens:YV.t,SEMVER_SPEC_VERSION:JV.SEMVER_SPEC_VERSION,RELEASE_TYPES:JV.RELEASE_TYPES,compareIdentifiers:QV.compareIdentifiers,rcompareIdentifiers:QV.rcompareIdentifiers});function rW(){const{toast:e}=Va(),{data:t}=XH();const n=i.useCallback(async()=>{try{const n=await async function(e){const t=`https://api.github.com/repos/${e}/releases/latest`;try{const e=await fetch(t,{headers:{Accept:"application/vnd.github.v3+json","User-Agent":"fetch-latest-release"}});if(!e.ok)throw new Error(`Failed to fetch latest release: ${e.status} ${e.statusText}`);return(await e.json()).tag_name}catch{}}("elizaos/eliza"),i=t?.version;n&&i&&tW.gt(n.replace("v",""),i.replace("v",""))&&e({variant:"default",title:`New version ${n} is available.`,description:"Visit GitHub for more information.",action:r.jsx(Ve,{to:"https://github.com/elizaos/eliza/releases",target:"_blank",children:r.jsx(NG,{altText:"Update",children:"Update"})})})}catch(En){P$(`Unable to retrieve latest version from GitHub: ${En}`)}},[e,t?.version]);return i.useEffect(()=>{n()},[n]),null}const nW=({text:e})=>{const[t,n]=i.useState(!1);return r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx(Yi,{onClick:()=>{navigator.clipboard.writeText(e).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)})},variant:"ghost",size:"icon",className:"flex items-center space-x-2 text-muted-foreground",children:t?r.jsx(D,{className:"size-3"}):r.jsx(je,{className:"size-3"})})}),r.jsx(ca,{side:"bottom",children:r.jsx("p",{children:"Copy"})})]})},iW=({onClick:e})=>r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx(Yi,{onClick:e,variant:"ghost",size:"icon",className:"text-muted-foreground",children:r.jsx(Me,{className:"size-3"})})}),r.jsx(ca,{side:"bottom",children:r.jsx("p",{children:"Delete"})})]});function aW({onClick:e,className:t}){return r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx(Yi,{variant:"ghost",size:"icon",className:`text-muted-foreground ${t}`,onClick:e,children:r.jsx(dt,{className:"size-3"})})}),r.jsx(ca,{side:"bottom",children:r.jsx("p",{children:"Retry message"})})]})}function sW({url:e,title:t,className:n,maxWidth:a=600,maxHeight:s=400}){const[o,l]=i.useState(!0),[c,u]=i.useState(!1),d=()=>l(!1),h=()=>{l(!1),u(!0)},p=(e=>{const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/watch\?.*v=([^&\n?#]+)/];for(const r of t){const t=e.match(r);if(t)return t[1]}return null})(e);if(p)return r.jsxs("div",{className:Bi("relative rounded-lg overflow-hidden bg-muted",n),style:{maxWidth:a,maxHeight:s},children:[o&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:r.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[r.jsx(ht,{className:"w-6 h-6"}),r.jsx("span",{children:"Loading video..."})]})}),r.jsx("iframe",{src:`https://www.youtube.com/embed/${p}`,title:t||"YouTube video",className:"w-full aspect-video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,onLoad:d,onError:h})]});const f=(e=>{const t=e.match(/spotify\.com\/(track|album|playlist|episode|show)\/([a-zA-Z0-9]+)(?:\?.*)?/);return t?{type:t[1],id:t[2]}:null})(e);if(f){const e="track"===f.type?152:"episode"===f.type?232:352;return r.jsxs("div",{className:Bi("relative rounded-lg overflow-hidden bg-muted",n),style:{maxWidth:a},children:[o&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:r.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[r.jsx(pt,{className:"w-6 h-6"}),r.jsx("span",{children:"Loading Spotify content..."})]})}),r.jsx("iframe",{src:`https://open.spotify.com/embed/${f.type}/${f.id}?utm_source=generator`,width:"100%",height:e,frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:t||"Spotify content",onLoad:d,onError:h})]})}return(e=>/\.(jpg|jpeg|png|gif|webp|svg|bmp|ico)(\?.*)?$/i.test(e))(e)?r.jsxs("div",{className:Bi("relative rounded-lg overflow-hidden bg-muted",n),style:{maxWidth:a,maxHeight:s},children:[o&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:r.jsx("div",{className:"animate-pulse w-full h-32 bg-muted-foreground/20 rounded"})}),c?r.jsxs("div",{className:"flex items-center justify-center p-4 text-muted-foreground",children:[r.jsx(se,{className:"w-6 h-6 mr-2"}),r.jsx("span",{children:"Failed to load image"})]}):r.jsx("img",{src:e||"/placeholder.svg",alt:t||"Image",width:a,height:s,className:"w-full h-auto object-contain",onLoad:d,onError:h})]}):(e=>/\.(mp4|webm|ogg|mov|avi|wmv|flv|mkv)(\?.*)?$/i.test(e))(e)?r.jsx("div",{className:Bi("relative rounded-lg overflow-hidden bg-muted",n),style:{maxWidth:a,maxHeight:s},children:c?r.jsxs("div",{className:"flex items-center justify-center p-4 text-muted-foreground",children:[r.jsx(se,{className:"w-6 h-6 mr-2"}),r.jsx("span",{children:"Failed to load video"})]}):r.jsxs("video",{controls:!0,preload:"metadata",className:"w-full h-auto",onLoadedData:d,onError:h,crossOrigin:"anonymous",children:[r.jsx("source",{src:e}),"Your browser does not support the video tag."]})}):(e=>/\.(mp3|wav|ogg|aac|flac|m4a|wma)(\?.*)?$/i.test(e))(e)?r.jsxs("div",{className:Bi("relative rounded-lg bg-card border p-4",n),style:{maxWidth:a},children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-3 overflow-hidden",children:[r.jsx(pt,{className:"w-5 h-5 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-primary font-medium truncate whitespace-nowrap overflow-hidden text-ellipsis max-w-44",children:t||"Audio File"})]}),c?r.jsxs("div",{className:"flex items-center text-muted-foreground",children:[r.jsx(se,{className:"w-4 h-4 mr-2"}),r.jsx("span",{className:"text-sm",children:"Failed to load audio"})]}):r.jsxs("audio",{controls:!0,className:"w-full",preload:"metadata",onLoadedData:d,onError:h,crossOrigin:"anonymous",children:[r.jsx("source",{src:e}),"Your browser does not support the audio tag."]})]}):(e=>/\.pdf(\?.*)?$/i.test(e)||e.includes("pdf"))(e)?r.jsxs("div",{className:Bi("relative rounded-lg overflow-hidden bg-card border",n),style:{maxWidth:a},children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 border-b gap-10",children:[r.jsxs("div",{className:"flex items-center space-x-2 overflow-hidden",children:[r.jsx(Se,{className:"w-5 h-5 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-primary font-medium truncate whitespace-nowrap overflow-hidden text-ellipsis max-w-44",children:t||"PDF Document"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-primary hover:text-primary/80 text-sm",children:[r.jsx(We,{className:"w-4 h-4"}),r.jsx("span",{children:"View"})]}),r.jsxs("a",{href:e,download:!0,className:"flex items-center space-x-1 text-primary hover:text-primary/80 text-sm",children:[r.jsx(ft,{className:"w-4 h-4"}),r.jsx("span",{children:"Download"})]})]})]}),r.jsx("div",{className:"relative",style:{height:Math.min(s,500)},children:c?r.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-muted-foreground h-full",children:[r.jsx(se,{className:"w-8 h-8 mb-2"}),r.jsx("span",{className:"text-center mb-4",children:"PDF preview not available"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(e)}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-primary text-primary-foreground rounded text-sm hover:bg-primary/90",children:"Open in Google Viewer"}),r.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-secondary text-secondary-foreground rounded text-sm hover:bg-secondary/90",children:"Open Original"})]})]}):r.jsxs(r.Fragment,{children:[o&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:r.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[r.jsx(Se,{className:"w-6 h-6"}),r.jsx("span",{children:"Loading PDF..."})]})}),r.jsx("iframe",{src:`https://docs.google.com/viewer?url=${encodeURIComponent(e)}&embedded=true`,className:"w-full h-full border-0",title:t||"PDF Document",onLoad:d,onError:()=>{const r=document.createElement("iframe");r.src=`${e}#toolbar=0&navpanes=0&scrollbar=0`,r.className="w-full h-full border-0",r.title=t||"PDF Document",r.onload=d,r.onerror=h;const n=document.querySelector(`[data-pdf-container="${e}"]`);n&&(n.innerHTML="",n.appendChild(r))}}),r.jsx("div",{"data-pdf-container":e,className:"hidden"})]})}),r.jsx("div",{className:"p-2 bg-muted/50 border-t text-xs text-muted-foreground",children:r.jsx("span",{children:'PDF Document  Click "View" or "Download" if preview doesn\'t load'})})]}):(e=>/\.(pdf|doc|docx|ppt|pptx|xls|xlsx|txt)(\?.*)?$/i.test(e))(e)?r.jsx("div",{className:Bi("rounded-lg bg-card border p-4",n),style:{maxWidth:a},children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Se,{className:"w-8 h-8 text-muted-foreground"}),r.jsxs("div",{className:"flex-1 overflow-hidden mr-6",children:[r.jsx("p",{className:"text-sm text-primary font-medium truncate whitespace-nowrap overflow-hidden text-ellipsis max-w-44",children:t||"Document"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.split(".").pop()?.toUpperCase()," file"]})]}),r.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-primary hover:text-primary/80 text-sm font-medium",children:[r.jsx(We,{className:"w-4 h-4"}),r.jsx("span",{children:"Open"})]})]})}):r.jsx("div",{className:Bi("rounded-lg bg-card border p-4",n),style:{maxWidth:a},children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(We,{className:"w-8 h-8 text-muted-foreground"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-primary font-medium",children:t||"External Link"}),r.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e})]}),r.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-primary hover:text-primary/80 text-sm font-medium",children:[r.jsx(We,{className:"w-4 h-4"}),r.jsx("span",{children:"Open"})]})]})})}function oW(){Oe(),Re();const{toast:e}=Va(),t=function(){const e=Re(),{toast:t}=Va();return Be({mutationFn:async e=>{try{return{data:{id:e,name:"Agent",status:(await $H.agents.startAgent(e)).status}}}catch(t){if(t instanceof Error&&t.message.includes("already running"))throw new Error("Agent is already running.");throw t}},onMutate:async e=>(t({title:"Starting Agent",description:"Initializing agent..."}),{}),onSuccess:(r,n)=>{e.invalidateQueries({queryKey:["agents"]}),e.invalidateQueries({queryKey:["agent",n]}),t({title:"Agent Started",description:`${r?.data?.name||"Agent"} is now running`})},onError:e=>{const r=e instanceof Error?e.message:"Failed to start agent";t({title:"Error Starting Agent",description:`${r}. Please try again.`,variant:"destructive"})}})}(),r=function(){const e=Re(),{toast:t}=Va();return Be({mutationFn:async e=>({data:{message:`Agent ${(await $H.agents.stopAgent(e)).status}`}}),onMutate:async r=>{const n=e.getQueryData(["agent",r]);n&&t({title:"Stopping Agent",description:`Stopping ${n.name}...`})},onSuccess:(r,n)=>{e.invalidateQueries({queryKey:["agents"]}),e.invalidateQueries({queryKey:["agent",n]}),t({title:"Agent Stopped",description:r?.data?.message||"The agent has been successfully stopped"})},onError:(r,n)=>{e.invalidateQueries({queryKey:["agents"]}),e.invalidateQueries({queryKey:["agent",n]}),t({title:"Error",description:r instanceof Error?r.message:"Failed to stop agent",variant:"destructive"})}})}(),[n,a]=i.useState([]),[s,o]=i.useState([]);return{startAgent:async r=>{if(!r.id)return void e({title:"Error",description:"Agent ID is missing",variant:"destructive"});const i=r.id;if(!n.includes(i))try{a(e=>[...e,i]),await t.mutateAsync(i)}catch(s){console.error("Failed to start agent:",s)}finally{a(e=>e.filter(e=>e!==i))}},stopAgent:async t=>{if(!t.id)return void e({title:"Error",description:"Agent ID is missing",variant:"destructive"});const n=t.id;if(!s.includes(n))try{o(e=>[...e,n]),await r.mutateAsync(n),e({title:"Agent Stopped",description:`${t.name} has been stopped`})}catch(i){console.error("Failed to stop agent:",i)}finally{o(e=>e.filter(e=>e!==n))}},isAgentStarting:e=>!!e&&n.includes(e),isAgentStopping:e=>!!e&&s.includes(e),startingAgents:n,stoppingAgents:s}}function lW({agent:e,variant:t="destructive",size:n="default",className:i="",showIcon:a=!0,redirectToHome:s=!1,onStopComplete:o}){const{stopAgent:l,isAgentStopping:c}=oW(),u=Oe(),d=c(e.id),{confirm:h,isOpen:p,onOpenChange:f,onConfirm:m,options:g}=MH();return r.jsxs(r.Fragment,{children:[r.jsx(Yi,{type:"button",variant:t,size:n,className:i,onClick:()=>{h({title:"Stop Agent",description:`Are you sure you want to stop "${e.name}"?`,confirmText:"Stop",variant:"destructive"},async()=>{try{await l(e),o&&o(),s&&u("/")}catch(t){P$("Error stopping agent:",t)}})},disabled:d,children:d?r.jsxs(r.Fragment,{children:[a&&r.jsx(he,{className:"mr-2 h-4 w-4 animate-spin"}),"Stopping..."]}):r.jsxs(r.Fragment,{children:[a&&r.jsx(mt,{className:"mr-2 h-4 w-4"}),"Stop"]})}),r.jsx(Dz,{open:p,onOpenChange:f,title:g?.title||"",description:g?.description||"",confirmText:g?.confirmText,cancelText:g?.cancelText,variant:g?.variant,onConfirm:m})]})}function cW({isOpen:e,onClose:t,agentId:n}){if(!e)return null;const{startAgent:i,isAgentStarting:a,isAgentStopping:s}=oW(),{toast:o}=Va(),l=Oe(),{data:c}=qH(n),u=c?.data,h=u?.status===Ff.ACTIVE,p=a(n),f=s(n),m=p||f,g={label:"Start",icon:r.jsx(ht,{className:"w-4 h-4"})};p&&(g.label="Starting...",g.icon=r.jsx(he,{className:"animate-spin w-4 h-4"}));return r.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onClick:t,onKeyUp:e=>{"Enter"!==e.key&&" "!==e.key||t()},children:r.jsxs(cG,{className:"flex flex-col w-full max-w-md md:max-w-xl overflow-hidden relative",onClick:e=>e.stopPropagation(),children:[r.jsxs(uG,{className:"p-0 space-y-0",children:[r.jsx("div",{className:"absolute top-4 right-4 z-10",children:r.jsx(Yi,{variant:"ghost",size:"icon",onClick:t,children:r.jsx(d,{className:"w-5 h-5"})})}),r.jsx("div",{className:"p-6 w-full flex items-end bg-gradient-to-b from-primary/20 to-background",children:r.jsx("div",{className:"flex w-full justify-between items-end",children:r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"w-24 h-24 flex justify-center items-center relative",children:[r.jsx("div",{className:"text-4xl bg-muted rounded-full h-full w-full flex justify-center items-center overflow-hidden border-4 border-background",children:"string"==typeof u?.settings?.avatar?r.jsx("img",{src:u.settings.avatar,alt:"Agent Avatar",className:"w-full h-full object-cover"}):Fi(u?.name??"")}),r.jsx("div",{className:"absolute bottom-1 right-1 w-4 h-4 rounded-full border-2 border-background "+(h?"bg-emerald-500":"bg-muted-foreground")})]}),r.jsxs("div",{className:"flex flex-col justify-center mr-4",children:[r.jsx("div",{className:"text-xl font-bold truncate max-w-48",children:u?.name}),r.jsx("div",{className:"text-xs text-muted-foreground",children:r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsxs("span",{className:"cursor-pointer hover:underline",onClick:e=>{e.stopPropagation(),u?.id&&navigator.clipboard.writeText(u.id)},onKeyUp:e=>{"Enter"!==e.key&&" "!==e.key||(e.stopPropagation(),u?.id&&navigator.clipboard.writeText(u.id))},children:["ID: ",u?.id??"N/A"]})}),r.jsx(ca,{side:"bottom",children:r.jsx("p",{children:"Click to copy agent ID"})})]})})]})]})})})]}),r.jsxs(hG,{className:"p-6 overflow-auto",children:[r.jsxs("div",{className:"rounded-md bg-muted p-4 mb-6 max-h-60 overflow-y-auto",children:[r.jsx("p",{className:"font-medium text-sm mb-2",children:"About Me"}),r.jsx("p",{className:"font-light text-sm text-gray-500",children:c?.data?.system})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm mb-2",children:"Status"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-3 h-3 rounded-full mr-2 "+(h?"bg-green-500":"bg-gray-400")}),r.jsx("span",{className:"text-sm",children:h?"Active":"Inactive"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm mb-2",children:"Model"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(gt,{className:"w-4 h-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm",children:"string"==typeof u?.settings?.model?u.settings.model:void 0!==u?.settings?.model?String(u.settings.model):"Default"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm mb-2",children:"Created"}),r.jsx("p",{className:"text-sm text-gray-500",children:u?.createdAt?Ui(u.createdAt).format("LLL"):Ui().format("LLL")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm mb-2",children:"Plugins"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:u?.plugins&&u.plugins.length>0?u.plugins.map((e,t)=>{const n=e.replace("@elizaos/plugin-","").replace("@elizaos-plugins/plugin-","");return r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-muted text-muted-foreground border border-border",children:n},t)}):r.jsx("p",{className:"text-sm text-gray-500",children:"No plugins enabled"})})]})]})]}),r.jsxs(pG,{className:"flex justify-between items-center p-4 border-t",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[h?r.jsx(lW,{agent:u,showIcon:!0,size:"default",className:"h-9"}):r.jsxs(Yi,{variant:"default",onClick:()=>{m||i(u)},disabled:m,className:"h-9",children:[g.icon,r.jsx("span",{className:"ml-2",children:g.label})]}),r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsxs(Yi,{variant:"outline",onClick:()=>{if(!c?.data)return;Wa({...c.data,createdAt:c.data.createdAt||Date.now(),updatedAt:c.data.updatedAt||Date.now()},o)},disabled:!u,className:"h-9",size:"sm",children:["Export",r.jsx(ft,{size:16})]})}),r.jsx(ca,{side:"bottom",children:r.jsx("p",{children:"Export character as JSON"})})]}),r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsxs(Yi,{variant:"outline",onClick:()=>l(`/settings/${n}`),disabled:!u,className:"h-9",size:"sm",children:[r.jsx(Ze,{size:16,className:"mr-1"}),"Settings"]})}),r.jsx(ca,{side:"bottom",children:r.jsx("p",{children:"Configure agent settings"})})]})]}),h&&r.jsx(Yi,{variant:"default",className:"h-9",onClick:()=>l(`/chat/${u.id}`),children:"Message"})]})]})})}function uW(){return r.jsxs("svg",{role:"img","aria-label":"Loading animation",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground","data-testid":"loading",children:[r.jsx("circle",{cx:"4",cy:"12",r:"2",fill:"currentColor",children:r.jsx("animate",{id:"spinner_qFRN",begin:"0;spinner_OcgL.end+0.25s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),r.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor",children:r.jsx("animate",{begin:"spinner_qFRN.begin+0.1s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})}),r.jsx("circle",{cx:"20",cy:"12",r:"2",fill:"currentColor",children:r.jsx("animate",{id:"spinner_OcgL",begin:"spinner_qFRN.begin+0.2s",attributeName:"cy",calcMode:"spline",dur:"0.6s",values:"12;6;12",keySplines:".33,.66,.66,1;.33,0,.66,.33"})})]})}const dW=fn("flex gap-2 max-w-[60%] relative group",{variants:{variant:{received:"self-start",sent:"self-end flex-row-reverse"},layout:{default:"",ai:"max-w-full w-full items-center"}},defaultVariants:{variant:"received",layout:"default"}}),hW=i.forwardRef(({className:e,variant:t,layout:n,children:a,...s},o)=>r.jsx("div",{className:Bi(dW({variant:t,layout:n,className:e}),"relative group"),ref:o,...s,children:i.Children.map(a,e=>i.isValidElement(e)&&"string"!=typeof e.type&&e.type!==i.Fragment?i.cloneElement(e,{variant:t,layout:n}):e)}));hW.displayName="ChatBubble";const pW=fn("",{variants:{variant:{received:"text-secondary-foreground",sent:"px-5 py-2.5 bg-secondary text-secondary-foreground rounded-lg"},layout:{default:"",ai:"border-t w-full rounded-none bg-transparent"}},defaultVariants:{variant:"received",layout:"default"}}),fW=i.forwardRef(({className:e,variant:t,layout:n,isLoading:i=!1,children:a,...s},o)=>r.jsx("div",{className:Bi(pW({variant:t,layout:n,className:e}),"break-words max-w-full whitespace-pre-wrap"),ref:o,...s,children:i?r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx(uW,{})}):a}));fW.displayName="ChatBubbleMessage";const mW=({timestamp:e,className:t,...n})=>r.jsx("div",{className:Bi("text-xs text-right select-none",t),...n,children:e});i.forwardRef(({variant:e,className:t,children:n,...i},a)=>r.jsx("div",{ref:a,className:Bi("absolute top-1/2 -translate-y-1/2 flex opacity-0 group-hover:opacity-100 transition-opacity duration-200","sent"===e?"-left-1 -translate-x-full flex-row-reverse":"-right-1 translate-x-full",t),...i,children:n})).displayName="ChatBubbleActionWrapper";let gW=null;function vW({agentId:e,text:t}){const{toast:n}=Va(),[a,s]=i.useState(!1),[o,l]=i.useState(null),[c,u]=i.useState(null),d=i.useRef(null),h=i.useRef(null),p=lz();i.useEffect(()=>()=>{c&&URL.revokeObjectURL(c)},[c]);const f=Be({mutationKey:["tts",t],mutationFn:async()=>{console.log(" Starting TTS API call..."),console.log(" agentId:",e),console.log(" text:",t);const r=await p.audio.generateSpeech(e,{text:t});console.log(" TTS API response:",r);const{audio:n,format:i}=r;let a,s;if(n.startsWith("data:")){const[e,t]=n.split(","),r=e.match(/data:([^;]+)/);s=r?r[1]:`audio/${i||"mpeg"}`,a=t}else a=n,s=`audio/${i||"mpeg"}`;const o=atob(a),l=new Uint8Array(o.length);for(let e=0;e<o.length;e++)l[e]=o.charCodeAt(e);return new Blob([l],{type:s})},onSuccess:e=>{l(e),h.current=e;const t=URL.createObjectURL(e);u(t),setTimeout(()=>{m()},100)},onError:e=>{n({variant:"destructive",title:"Unable to read message aloud",description:e.message})}}),m=async()=>{if(d.current)try{gW&&gW!==d.current&&(gW.pause(),gW.currentTime=0),gW=d.current,d.current.volume=1,d.current.muted=!1,await d.current.play(),s(!0)}catch(moe){n({variant:"destructive",title:"Audio playback failed",description:moe.message}),s(!1)}},g=async()=>{if(f?.isPending)return;if(a)return d.current&&(d.current.pause(),d.current.currentTime=0,gW===d.current&&(gW=null)),void s(!1);o||h.current||d.current?.src&&d.current.src.startsWith("blob:")?await m():f.mutate()},v="text-muted-foreground size-3";return r.jsxs(r.Fragment,{children:[o?r.jsx("audio",{crossOrigin:"anonymous",playsInline:!0,ref:d,src:c||"",onEnded:()=>{s(!1),gW===d.current&&(gW=null)},children:"Your browser does not support the audio element."}):null,r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx(Yi,{size:"icon",variant:"ghost",type:"button",onClick:()=>g(),disabled:f?.isPending,children:f?.isPending?r.jsx(vt,{className:v}):a?r.jsx(pe,{className:v}):r.jsx(pt,{className:v})})}),r.jsx(ca,{side:"bottom",children:r.jsx("p",{children:a?"Stop":"Read aloud"})})]})]})}function yW(e,t){if("string"!=typeof e)return null;try{return new URL(e)}catch{if(t)try{return new URL(e,t)}catch{return null}return null}}const bW=new Set(["https:","http:","irc:","ircs:","mailto:","xmpp:"]);function _W(e,t,r,n=!1,i=!1){if(!e)return null;if("string"==typeof e&&e.startsWith("#")&&!i)try{if(new URL(e,"http://example.com").hash===e)return e}catch{}if("string"==typeof e&&e.startsWith("data:"))return i&&n&&e.startsWith("data:image/")?e:null;const a=yW(e,r);if(!a)return null;if(!bW.has(a.protocol))return null;if("mailto:"===a.protocol)return a.href;const s=function(e){return"string"==typeof e&&e.startsWith("/")}(e);return a&&t.some(e=>{const t=yW(e,r);return!!t&&(t.origin===a.origin&&a.href.startsWith(t.href))})?s?a.pathname+a.search+a.hash:a.href:t.includes("*")?"https:"!==a.protocol&&"http:"!==a.protocol?null:s?a.pathname+a.search+a.hash:a.href:null}const wW=Symbol("node-seen"),xW=(e,t,r,n,i,a)=>{const s=(o,l,c)=>{if("element"!==o.type||o[wW])return bt;if("a"===o.tagName){const r=_W(o.properties.href,t,e,!1,!1);return null===r?(o[wW]=!0,yt(o,s),c&&"number"==typeof l&&(c.children[l]={type:"element",tagName:"span",properties:{title:"Blocked URL: "+String(o.properties.href),class:a},children:[...o.children,{type:"text",value:" [blocked]"}]}),_t):(o.properties.href=r,o.properties.target="_blank",o.properties.rel="noopener noreferrer",bt)}if("img"===o.tagName){const t=_W(o.properties.src,r,e,n,!0);return null===t?(o[wW]=!0,yt(o,s),c&&"number"==typeof l&&(c.children[l]={type:"element",tagName:"span",properties:{class:i},children:[{type:"text",value:"[Image blocked: "+String(o.properties.alt||"No description")+"]"}]}),_t):(o.properties.src=t,bt)}return bt};return s},EW=/[#.]/g;function kW(e,t,r){const n=r?function(e){const t=new Map;for(const r of e)t.set(r.toLowerCase(),r);return t}(r):void 0;return function(r,i,...a){let s;if(null==r){s={type:"root",children:[]};const e=i;a.unshift(e)}else{s=function(e,t){const r=e||"",n={};let i,a,s=0;for(;s<r.length;){EW.lastIndex=s;const e=EW.exec(r),t=r.slice(s,e?e.index:r.length);t&&(i?"#"===i?n.id=t:Array.isArray(n.className)?n.className.push(t):n.className=[t]:a=t,s+=t.length),e&&(i=e[0],s++)}return{type:"element",tagName:a||t||"div",properties:n,children:[]}}(r,t);const o=s.tagName.toLowerCase(),l=n?n.get(o):void 0;if(s.tagName=l||o,function(e){if(null===e||"object"!=typeof e||Array.isArray(e))return!0;if("string"!=typeof e.type)return!1;const t=e,r=Object.keys(e);for(const n of r){const e=t[n];if(e&&"object"==typeof e){if(!Array.isArray(e))return!0;const t=e;for(const e of t)if("number"!=typeof e&&"string"!=typeof e)return!0}}if("children"in e&&Array.isArray(e.children))return!0;return!1}(i))a.unshift(i);else for(const[t,r]of Object.entries(i))SW(e,s.properties,t,r)}for(const e of a)AW(s.children,e);return"element"===s.type&&"template"===s.tagName&&(s.content={type:"root",children:s.children},s.children=[]),s}}function SW(e,t,r,n){const i=wt(e,r);let a;if(null!=n){if("number"==typeof n){if(Number.isNaN(n))return;a=n}else a="boolean"==typeof n?n:"string"==typeof n?i.spaceSeparated?xt(n):i.commaSeparated?Et(n):i.commaOrSpaceSeparated?xt(Et(n).join(" ")):TW(i,i.property,n):Array.isArray(n)?[...n]:"style"===i.property?function(e){const t=[];for(const[r,n]of Object.entries(e))t.push([r,n].join(": "));return t.join("; ")}(n):String(n);if(Array.isArray(a)){const e=[];for(const t of a)e.push(TW(i,i.property,t));a=e}"className"===i.property&&Array.isArray(t.className)&&(a=t.className.concat(a)),t[i.property]=a}}function AW(e,t){if(null==t);else if("number"==typeof t||"string"==typeof t)e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const r of t)AW(e,r);else{if("object"!=typeof t||!("type"in t))throw new Error("Expected node, nodes, or string, got `"+t+"`");"root"===t.type?AW(e,t.children):e.push(t)}}function TW(e,t,r){if("string"==typeof r){if(e.number&&r&&!Number.isNaN(Number(r)))return Number(r);if((e.boolean||e.overloadedBoolean)&&(""===r||kt(r)===kt(t)))return!0}return r}const NW=kW(St,"div"),IW=kW(At,"g",["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]),MW={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function CW(e,t){const r=function(e,t){switch(e.nodeType){case 1:return function(e,t){const r=e.namespaceURI,n=r===MW.svg?IW:NW,i=r===MW.html?e.tagName.toLowerCase():e.tagName,a=r===MW.html&&"template"===i?e.content:e,s=e.getAttributeNames(),o={};let l=-1;for(;++l<s.length;)o[s[l]]=e.getAttribute(s[l])||"";return n(i,o,OW(a,t))}(e,t);case 3:return function(e){return{type:"text",value:e.nodeValue||""}}(e);case 8:return function(e){return{type:"comment",value:e.nodeValue||""}}(e);case 9:return jW(e,t);case 10:return{type:"doctype"};case 11:return jW(e,t);default:return}}(e,t);return r&&t.afterTransform&&t.afterTransform(e,r),r}function jW(e,t){return{type:"root",children:OW(e,t)}}function OW(e,t){const r=e.childNodes,n=[];let i=-1;for(;++i<r.length;){const e=CW(r[i],t);void 0!==e&&n.push(e)}return n}function RW(e,t){const r=function(e){const t=document.createElement("template");return t.innerHTML=e,t.content}(e);return CW(r,{})||{type:"root",children:[]}}new DOMParser;const LW=function(e,t,r){const n=Tt(r);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if("number"==typeof t){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if((t=e.children.indexOf(t))<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(n(e.children[t],t,e))return e.children[t]},PW=function(e){if(null==e)return $W;if("string"==typeof e)return function(e){return DW(t);function t(t){return t.tagName===e}}(e);if("object"==typeof e)return function(e){const t=[];let r=-1;for(;++r<e.length;)t[r]=PW(e[r]);return DW(n);function n(...e){let r=-1;for(;++r<t.length;)if(t[r].apply(this,e))return!0;return!1}}(e);if("function"==typeof e)return DW(e);throw new Error("Expected function, string, or array as `test`")};function DW(e){return function(t,r,n){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e&&"tagName"in e}(t)&&e.call(this,t,"number"==typeof r?r:void 0,n||void 0))}}function $W(e){return Boolean(e&&"object"==typeof e&&"type"in e&&"element"===e.type&&"tagName"in e&&"string"==typeof e.tagName)}const zW=/\n/g,BW=/[\t ]+/g,UW=PW("br"),FW=PW(function(e){return"td"===e.tagName||"th"===e.tagName}),HW=PW("p"),GW=PW("tr"),qW=PW(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",function(e){return Boolean((e.properties||{}).hidden)},function(e){return"dialog"===e.tagName&&!(e.properties||{}).open}]),VW=PW(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function WW(e,t,r){return"element"===e.type?function(e,t,r){const n=YW(e,r),i=e.children||[];let a,s,o=-1,l=[];if(qW(e))return l;UW(e)||GW(e)&&LW(t,e,GW)?s="\n":HW(e)?(a=2,s=2):VW(e)&&(a=1,s=1);for(;++o<i.length;)l=l.concat(WW(i[o],e,{whitespace:n,breakBefore:o?void 0:a,breakAfter:o<i.length-1?UW(i[o+1]):s}));FW(e)&&LW(t,e,FW)&&l.push("\t");a&&l.unshift(a);s&&l.push(s);return l}(e,t,r):"text"===e.type?"normal"===r.whitespace?ZW(e,r):function(e){return[String(e.value)]}(e):[]}function ZW(e,t){const r=String(e.value),n=[],i=[];let a=0;for(;a<=r.length;){zW.lastIndex=a;const e=zW.exec(r),i=e&&"index"in e?e.index:r.length;n.push(KW(r.slice(a,i).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),0!==a||t.breakBefore,i!==r.length||t.breakAfter)),a=i+1}let s,o=-1;for(;++o<n.length;)8203===n[o].charCodeAt(n[o].length-1)||o<n.length-1&&8203===n[o+1].charCodeAt(0)?(i.push(n[o]),s=void 0):n[o]?("number"==typeof s&&i.push(s),i.push(n[o]),s=0):0!==o&&o!==n.length-1||i.push(0);return i}function KW(e,t,r){const n=[];let i,a=0;for(;a<e.length;){BW.lastIndex=a;const r=BW.exec(e);i=r?r.index:e.length,a||i||!r||t||n.push(""),a!==i&&n.push(e.slice(a,i)),a=r?i+r[0].length:i}return a===i||r||n.push(""),n.join(" ")}function YW(e,t){if("element"===e.type){const r=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return r.wrap?"pre-wrap":"pre";case"td":case"th":return r.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}class JW{constructor(e,t,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=r}static range(e,t){return t?e&&e.loc&&t.loc&&e.loc.lexer===t.loc.lexer?new JW(e.loc.lexer,e.loc.start,t.loc.end):null:e&&e.loc}}class XW{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new XW(t,JW.range(this,e))}}class QW{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r,n,i="KaTeX parse error: "+e,a=t&&t.loc;if(a&&a.start<=a.end){var s=a.lexer.input;r=a.start,n=a.end,r===s.length?i+=" at end of input: ":i+=" at position "+(r+1)+": ";var o=s.slice(r,n).replace(/[^]/g,"$&");i+=(r>15?""+s.slice(r-15,r):s.slice(0,r))+o+(n+15<s.length?s.slice(n,n+15)+"":s.slice(n))}var l=new Error(i);return l.name="ParseError",l.__proto__=QW.prototype,l.position=r,null!=r&&null!=n&&(l.length=n-r),l.rawMessage=e,l}}QW.prototype.__proto__=Error.prototype;var eZ=/([A-Z])/g,tZ={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},rZ=/[&><"']/g;var nZ=function e(t){return"ordgroup"===t.type||"color"===t.type?1===t.body.length?e(t.body[0]):t:"font"===t.type?e(t.body):t},iZ={deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(rZ,e=>tZ[e])},hyphenate:function(e){return e.replace(eZ,"-$1").toLowerCase()},getBaseElem:nZ,isCharacterBox:function(e){var t=nZ(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},protocolFromUrl:function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?":"!==t[2]?null:/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?t[1].toLowerCase():null:"_relative"}},aZ={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>"Infinity"===e?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function sZ(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if("string"!=typeof r)return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class oZ{constructor(e){for(var t in this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{},aZ)if(aZ.hasOwnProperty(t)){var r=aZ[t];this[t]=void 0!==e[t]?r.processor?r.processor(e[t]):e[t]:sZ(r)}}reportNonstrict(e,t,r){var n=this.strict;if("function"==typeof n&&(n=n(e,t,r)),n&&"ignore"!==n){if(!0===n||"error"===n)throw new QW("LaTeX-incompatible input and strict mode is set to 'error': "+t+" ["+e+"]",r);"warn"===n?"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"):"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+n+"': "+t+" ["+e+"]")}}useStrictBehavior(e,t,r){var n=this.strict;if("function"==typeof n)try{n=n(e,t,r)}catch(i){n="error"}return!(!n||"ignore"===n)&&(!0===n||"error"===n||("warn"===n?("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"),!1):("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+n+"': "+t+" ["+e+"]"),!1)))}isTrusted(e){if(e.url&&!e.protocol){var t=iZ.protocolFromUrl(e.url);if(null==t)return!1;e.protocol=t}var r="function"==typeof this.trust?this.trust(e):this.trust;return Boolean(r)}}class lZ{constructor(e,t,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=r}sup(){return cZ[uZ[this.id]]}sub(){return cZ[dZ[this.id]]}fracNum(){return cZ[hZ[this.id]]}fracDen(){return cZ[pZ[this.id]]}cramp(){return cZ[fZ[this.id]]}text(){return cZ[mZ[this.id]]}isTight(){return this.size>=2}}var cZ=[new lZ(0,0,!1),new lZ(1,0,!0),new lZ(2,1,!1),new lZ(3,1,!0),new lZ(4,2,!1),new lZ(5,2,!0),new lZ(6,3,!1),new lZ(7,3,!0)],uZ=[4,5,4,5,6,7,6,7],dZ=[5,5,5,5,7,7,7,7],hZ=[2,3,4,5,6,7,6,7],pZ=[3,3,5,5,7,7,7,7],fZ=[1,1,3,3,5,5,7,7],mZ=[0,1,2,3,2,3,2,3],gZ={DISPLAY:cZ[0],TEXT:cZ[2],SCRIPT:cZ[4],SCRIPTSCRIPT:cZ[6]},vZ=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];var yZ=[];function bZ(e){for(var t=0;t<yZ.length;t+=2)if(e>=yZ[t]&&e<=yZ[t+1])return!0;return!1}vZ.forEach(e=>e.blocks.forEach(e=>yZ.push(...e)));var _Z=80,wZ={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"};class xZ{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){return this.children.map(e=>e.toText()).join("")}}var EZ={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},kZ={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},SZ={"":"A","":"D","":"o","":"a","":"d","":"o","":"A","":"B","":"B","":"F","":"A","":"E","":"K","":"3","":"N","":"N","":"K","":"N","":"M","":"H","":"O","":"N","":"P","":"C","":"T","":"y","":"O","":"X","":"U","":"h","":"W","":"W","":"B","":"X","":"B","":"3","":"X","":"R","":"a","":"b","":"a","":"r","":"y","":"e","":"m","":"e","":"n","":"n","":"n","":"n","":"m","":"n","":"o","":"n","":"p","":"c","":"o","":"y","":"b","":"x","":"n","":"n","":"w","":"w","":"a","":"m","":"a","":"e","":"m","":"r"};function AZ(e,t){EZ[e]=t}function TZ(e,t,r){if(!EZ[t])throw new Error("Font metrics not found for font: "+t+".");var n=e.charCodeAt(0),i=EZ[t][n];if(!i&&e[0]in SZ&&(n=SZ[e[0]].charCodeAt(0),i=EZ[t][n]),i||"text"!==r||bZ(n)&&(i=EZ[t][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var NZ={};var IZ=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],MZ=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],CZ=function(e,t){return t.size<2?e:IZ[e-1][t.size-1]};class jZ{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||jZ.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=MZ[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return new jZ(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:CZ(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:MZ[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=CZ(jZ.BASESIZE,e);return this.size===t&&this.textSize===jZ.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==jZ.BASESIZE?["sizing","reset-size"+this.size,"size"+jZ.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=function(e){var t;if(!NZ[t=e>=5?0:e>=3?1:2]){var r=NZ[t]={cssEmPerMu:kZ.quad[t]/18};for(var n in kZ)kZ.hasOwnProperty(n)&&(r[n]=kZ[n][t])}return NZ[t]}(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}jZ.BASESIZE=6;var OZ={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},RZ={ex:!0,em:!0,mu:!0},LZ=function(e){return"string"!=typeof e&&(e=e.unit),e in OZ||e in RZ||"ex"===e},PZ=function(e,t){var r;if(e.unit in OZ)r=OZ[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if("mu"===e.unit)r=t.fontMetrics().cssEmPerMu;else{var n;if(n=t.style.isTight()?t.havingStyle(t.style.text()):t,"ex"===e.unit)r=n.fontMetrics().xHeight;else{if("em"!==e.unit)throw new QW("Invalid unit: '"+e.unit+"'");r=n.fontMetrics().quad}n!==t&&(r*=n.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*r,t.maxSize)},DZ=function(e){return+e.toFixed(4)+"em"},$Z=function(e){return e.filter(e=>e).join(" ")},zZ=function(e,t,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},t){t.style.isTight()&&this.classes.push("mtight");var n=t.getColor();n&&(this.style.color=n)}},BZ=function(e){var t=document.createElement(e);for(var r in t.className=$Z(this.classes),this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);for(var n in this.attributes)this.attributes.hasOwnProperty(n)&&t.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},UZ=/[\s"'>/=\x00-\x1f]/,FZ=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+iZ.escape($Z(this.classes))+'"');var r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=iZ.hyphenate(n)+":"+this.style[n]+";");for(var i in r&&(t+=' style="'+iZ.escape(r)+'"'),this.attributes)if(this.attributes.hasOwnProperty(i)){if(UZ.test(i))throw new QW("Invalid attribute name '"+i+"'");t+=" "+i+'="'+iZ.escape(this.attributes[i])+'"'}t+=">";for(var a=0;a<this.children.length;a++)t+=this.children[a].toMarkup();return t+="</"+e+">"};class HZ{constructor(e,t,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,zZ.call(this,e,r,n),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return this.classes.includes(e)}toNode(){return BZ.call(this,"span")}toMarkup(){return FZ.call(this,"span")}}class GZ{constructor(e,t,r,n){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,zZ.call(this,t,n),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return this.classes.includes(e)}toNode(){return BZ.call(this,"a")}toMarkup(){return FZ.call(this,"a")}}class qZ{constructor(e,t,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");for(var t in e.src=this.src,e.alt=this.alt,e.className="mord",this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+iZ.escape(this.src)+'" alt="'+iZ.escape(this.alt)+'"',t="";for(var r in this.style)this.style.hasOwnProperty(r)&&(t+=iZ.hyphenate(r)+":"+this.style[r]+";");return t&&(e+=' style="'+iZ.escape(t)+'"'),e+="'/>"}}var VZ={"":"","":"","":"","":""};class WZ{constructor(e,t,r,n,i,a,s,o){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=r||0,this.italic=n||0,this.skew=i||0,this.width=a||0,this.classes=s||[],this.style=o||{},this.maxFontSize=0;var l=function(e){for(var t=0;t<vZ.length;t++)for(var r=vZ[t],n=0;n<r.blocks.length;n++){var i=r.blocks[n];if(e>=i[0]&&e<=i[1])return r.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[]/.test(this.text)&&(this.text=VZ[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),t=null;for(var r in this.italic>0&&((t=document.createElement("span")).style.marginRight=DZ(this.italic)),this.classes.length>0&&((t=t||document.createElement("span")).className=$Z(this.classes)),this.style)this.style.hasOwnProperty(r)&&((t=t||document.createElement("span")).style[r]=this.style[r]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=iZ.escape($Z(this.classes)),t+='"');var r="";for(var n in this.italic>0&&(r+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(n)&&(r+=iZ.hyphenate(n)+":"+this.style[n]+";");r&&(e=!0,t+=' style="'+iZ.escape(r)+'"');var i=iZ.escape(this.text);return e?(t+=">",t+=i,t+="</span>"):i}}class ZZ{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+iZ.escape(this.attributes[t])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>"}}class KZ{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",wZ[this.pathName]),e}toMarkup(){return this.alternate?'<path d="'+iZ.escape(this.alternate)+'"/>':'<path d="'+iZ.escape(wZ[this.pathName])+'"/>'}}class YZ{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","line");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);return e}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+iZ.escape(this.attributes[t])+'"');return e+="/>"}}function JZ(e){if(e instanceof WZ)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}var XZ={bin:1,close:1,inner:1,open:1,punct:1,rel:1},QZ={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},eK={math:{},text:{}};function tK(e,t,r,n,i,a){eK[e][i]={font:t,group:r,replace:n},a&&n&&(eK[e][n]=eK[e][i])}var rK="math",nK="text",iK="main",aK="ams",sK="accent-token",oK="bin",lK="close",cK="inner",uK="mathord",dK="op-token",hK="open",pK="punct",fK="rel",mK="spacing",gK="textord";tK(rK,iK,fK,"","\\equiv",!0),tK(rK,iK,fK,"","\\prec",!0),tK(rK,iK,fK,"","\\succ",!0),tK(rK,iK,fK,"","\\sim",!0),tK(rK,iK,fK,"","\\perp"),tK(rK,iK,fK,"","\\preceq",!0),tK(rK,iK,fK,"","\\succeq",!0),tK(rK,iK,fK,"","\\simeq",!0),tK(rK,iK,fK,"","\\mid",!0),tK(rK,iK,fK,"","\\ll",!0),tK(rK,iK,fK,"","\\gg",!0),tK(rK,iK,fK,"","\\asymp",!0),tK(rK,iK,fK,"","\\parallel"),tK(rK,iK,fK,"","\\bowtie",!0),tK(rK,iK,fK,"","\\smile",!0),tK(rK,iK,fK,"","\\sqsubseteq",!0),tK(rK,iK,fK,"","\\sqsupseteq",!0),tK(rK,iK,fK,"","\\doteq",!0),tK(rK,iK,fK,"","\\frown",!0),tK(rK,iK,fK,"","\\ni",!0),tK(rK,iK,fK,"","\\propto",!0),tK(rK,iK,fK,"","\\vdash",!0),tK(rK,iK,fK,"","\\dashv",!0),tK(rK,iK,fK,"","\\owns"),tK(rK,iK,pK,".","\\ldotp"),tK(rK,iK,pK,"","\\cdotp"),tK(rK,iK,gK,"#","\\#"),tK(nK,iK,gK,"#","\\#"),tK(rK,iK,gK,"&","\\&"),tK(nK,iK,gK,"&","\\&"),tK(rK,iK,gK,"","\\aleph",!0),tK(rK,iK,gK,"","\\forall",!0),tK(rK,iK,gK,"","\\hbar",!0),tK(rK,iK,gK,"","\\exists",!0),tK(rK,iK,gK,"","\\nabla",!0),tK(rK,iK,gK,"","\\flat",!0),tK(rK,iK,gK,"","\\ell",!0),tK(rK,iK,gK,"","\\natural",!0),tK(rK,iK,gK,"","\\clubsuit",!0),tK(rK,iK,gK,"","\\wp",!0),tK(rK,iK,gK,"","\\sharp",!0),tK(rK,iK,gK,"","\\diamondsuit",!0),tK(rK,iK,gK,"","\\Re",!0),tK(rK,iK,gK,"","\\heartsuit",!0),tK(rK,iK,gK,"","\\Im",!0),tK(rK,iK,gK,"","\\spadesuit",!0),tK(rK,iK,gK,"","\\S",!0),tK(nK,iK,gK,"","\\S"),tK(rK,iK,gK,"","\\P",!0),tK(nK,iK,gK,"","\\P"),tK(rK,iK,gK,"","\\dag"),tK(nK,iK,gK,"","\\dag"),tK(nK,iK,gK,"","\\textdagger"),tK(rK,iK,gK,"","\\ddag"),tK(nK,iK,gK,"","\\ddag"),tK(nK,iK,gK,"","\\textdaggerdbl"),tK(rK,iK,lK,"","\\rmoustache",!0),tK(rK,iK,hK,"","\\lmoustache",!0),tK(rK,iK,lK,"","\\rgroup",!0),tK(rK,iK,hK,"","\\lgroup",!0),tK(rK,iK,oK,"","\\mp",!0),tK(rK,iK,oK,"","\\ominus",!0),tK(rK,iK,oK,"","\\uplus",!0),tK(rK,iK,oK,"","\\sqcap",!0),tK(rK,iK,oK,"","\\ast"),tK(rK,iK,oK,"","\\sqcup",!0),tK(rK,iK,oK,"","\\bigcirc",!0),tK(rK,iK,oK,"","\\bullet",!0),tK(rK,iK,oK,"","\\ddagger"),tK(rK,iK,oK,"","\\wr",!0),tK(rK,iK,oK,"","\\amalg"),tK(rK,iK,oK,"&","\\And"),tK(rK,iK,fK,"","\\longleftarrow",!0),tK(rK,iK,fK,"","\\Leftarrow",!0),tK(rK,iK,fK,"","\\Longleftarrow",!0),tK(rK,iK,fK,"","\\longrightarrow",!0),tK(rK,iK,fK,"","\\Rightarrow",!0),tK(rK,iK,fK,"","\\Longrightarrow",!0),tK(rK,iK,fK,"","\\leftrightarrow",!0),tK(rK,iK,fK,"","\\longleftrightarrow",!0),tK(rK,iK,fK,"","\\Leftrightarrow",!0),tK(rK,iK,fK,"","\\Longleftrightarrow",!0),tK(rK,iK,fK,"","\\mapsto",!0),tK(rK,iK,fK,"","\\longmapsto",!0),tK(rK,iK,fK,"","\\nearrow",!0),tK(rK,iK,fK,"","\\hookleftarrow",!0),tK(rK,iK,fK,"","\\hookrightarrow",!0),tK(rK,iK,fK,"","\\searrow",!0),tK(rK,iK,fK,"","\\leftharpoonup",!0),tK(rK,iK,fK,"","\\rightharpoonup",!0),tK(rK,iK,fK,"","\\swarrow",!0),tK(rK,iK,fK,"","\\leftharpoondown",!0),tK(rK,iK,fK,"","\\rightharpoondown",!0),tK(rK,iK,fK,"","\\nwarrow",!0),tK(rK,iK,fK,"","\\rightleftharpoons",!0),tK(rK,aK,fK,"","\\nless",!0),tK(rK,aK,fK,"","\\@nleqslant"),tK(rK,aK,fK,"","\\@nleqq"),tK(rK,aK,fK,"","\\lneq",!0),tK(rK,aK,fK,"","\\lneqq",!0),tK(rK,aK,fK,"","\\@lvertneqq"),tK(rK,aK,fK,"","\\lnsim",!0),tK(rK,aK,fK,"","\\lnapprox",!0),tK(rK,aK,fK,"","\\nprec",!0),tK(rK,aK,fK,"","\\npreceq",!0),tK(rK,aK,fK,"","\\precnsim",!0),tK(rK,aK,fK,"","\\precnapprox",!0),tK(rK,aK,fK,"","\\nsim",!0),tK(rK,aK,fK,"","\\@nshortmid"),tK(rK,aK,fK,"","\\nmid",!0),tK(rK,aK,fK,"","\\nvdash",!0),tK(rK,aK,fK,"","\\nvDash",!0),tK(rK,aK,fK,"","\\ntriangleleft"),tK(rK,aK,fK,"","\\ntrianglelefteq",!0),tK(rK,aK,fK,"","\\subsetneq",!0),tK(rK,aK,fK,"","\\@varsubsetneq"),tK(rK,aK,fK,"","\\subsetneqq",!0),tK(rK,aK,fK,"","\\@varsubsetneqq"),tK(rK,aK,fK,"","\\ngtr",!0),tK(rK,aK,fK,"","\\@ngeqslant"),tK(rK,aK,fK,"","\\@ngeqq"),tK(rK,aK,fK,"","\\gneq",!0),tK(rK,aK,fK,"","\\gneqq",!0),tK(rK,aK,fK,"","\\@gvertneqq"),tK(rK,aK,fK,"","\\gnsim",!0),tK(rK,aK,fK,"","\\gnapprox",!0),tK(rK,aK,fK,"","\\nsucc",!0),tK(rK,aK,fK,"","\\nsucceq",!0),tK(rK,aK,fK,"","\\succnsim",!0),tK(rK,aK,fK,"","\\succnapprox",!0),tK(rK,aK,fK,"","\\ncong",!0),tK(rK,aK,fK,"","\\@nshortparallel"),tK(rK,aK,fK,"","\\nparallel",!0),tK(rK,aK,fK,"","\\nVDash",!0),tK(rK,aK,fK,"","\\ntriangleright"),tK(rK,aK,fK,"","\\ntrianglerighteq",!0),tK(rK,aK,fK,"","\\@nsupseteqq"),tK(rK,aK,fK,"","\\supsetneq",!0),tK(rK,aK,fK,"","\\@varsupsetneq"),tK(rK,aK,fK,"","\\supsetneqq",!0),tK(rK,aK,fK,"","\\@varsupsetneqq"),tK(rK,aK,fK,"","\\nVdash",!0),tK(rK,aK,fK,"","\\precneqq",!0),tK(rK,aK,fK,"","\\succneqq",!0),tK(rK,aK,fK,"","\\@nsubseteqq"),tK(rK,aK,oK,"","\\unlhd"),tK(rK,aK,oK,"","\\unrhd"),tK(rK,aK,fK,"","\\nleftarrow",!0),tK(rK,aK,fK,"","\\nrightarrow",!0),tK(rK,aK,fK,"","\\nLeftarrow",!0),tK(rK,aK,fK,"","\\nRightarrow",!0),tK(rK,aK,fK,"","\\nleftrightarrow",!0),tK(rK,aK,fK,"","\\nLeftrightarrow",!0),tK(rK,aK,fK,"","\\vartriangle"),tK(rK,aK,gK,"","\\hslash"),tK(rK,aK,gK,"","\\triangledown"),tK(rK,aK,gK,"","\\lozenge"),tK(rK,aK,gK,"","\\circledS"),tK(rK,aK,gK,"","\\circledR"),tK(nK,aK,gK,"","\\circledR"),tK(rK,aK,gK,"","\\measuredangle",!0),tK(rK,aK,gK,"","\\nexists"),tK(rK,aK,gK,"","\\mho"),tK(rK,aK,gK,"","\\Finv",!0),tK(rK,aK,gK,"","\\Game",!0),tK(rK,aK,gK,"","\\backprime"),tK(rK,aK,gK,"","\\blacktriangle"),tK(rK,aK,gK,"","\\blacktriangledown"),tK(rK,aK,gK,"","\\blacksquare"),tK(rK,aK,gK,"","\\blacklozenge"),tK(rK,aK,gK,"","\\bigstar"),tK(rK,aK,gK,"","\\sphericalangle",!0),tK(rK,aK,gK,"","\\complement",!0),tK(rK,aK,gK,"","\\eth",!0),tK(nK,iK,gK,"",""),tK(rK,aK,gK,"","\\diagup"),tK(rK,aK,gK,"","\\diagdown"),tK(rK,aK,gK,"","\\square"),tK(rK,aK,gK,"","\\Box"),tK(rK,aK,gK,"","\\Diamond"),tK(rK,aK,gK,"","\\yen",!0),tK(nK,aK,gK,"","\\yen",!0),tK(rK,aK,gK,"","\\checkmark",!0),tK(nK,aK,gK,"","\\checkmark"),tK(rK,aK,gK,"","\\beth",!0),tK(rK,aK,gK,"","\\daleth",!0),tK(rK,aK,gK,"","\\gimel",!0),tK(rK,aK,gK,"","\\digamma",!0),tK(rK,aK,gK,"","\\varkappa"),tK(rK,aK,hK,"","\\@ulcorner",!0),tK(rK,aK,lK,"","\\@urcorner",!0),tK(rK,aK,hK,"","\\@llcorner",!0),tK(rK,aK,lK,"","\\@lrcorner",!0),tK(rK,aK,fK,"","\\leqq",!0),tK(rK,aK,fK,"","\\leqslant",!0),tK(rK,aK,fK,"","\\eqslantless",!0),tK(rK,aK,fK,"","\\lesssim",!0),tK(rK,aK,fK,"","\\lessapprox",!0),tK(rK,aK,fK,"","\\approxeq",!0),tK(rK,aK,oK,"","\\lessdot"),tK(rK,aK,fK,"","\\lll",!0),tK(rK,aK,fK,"","\\lessgtr",!0),tK(rK,aK,fK,"","\\lesseqgtr",!0),tK(rK,aK,fK,"","\\lesseqqgtr",!0),tK(rK,aK,fK,"","\\doteqdot"),tK(rK,aK,fK,"","\\risingdotseq",!0),tK(rK,aK,fK,"","\\fallingdotseq",!0),tK(rK,aK,fK,"","\\backsim",!0),tK(rK,aK,fK,"","\\backsimeq",!0),tK(rK,aK,fK,"","\\subseteqq",!0),tK(rK,aK,fK,"","\\Subset",!0),tK(rK,aK,fK,"","\\sqsubset",!0),tK(rK,aK,fK,"","\\preccurlyeq",!0),tK(rK,aK,fK,"","\\curlyeqprec",!0),tK(rK,aK,fK,"","\\precsim",!0),tK(rK,aK,fK,"","\\precapprox",!0),tK(rK,aK,fK,"","\\vartriangleleft"),tK(rK,aK,fK,"","\\trianglelefteq"),tK(rK,aK,fK,"","\\vDash",!0),tK(rK,aK,fK,"","\\Vvdash",!0),tK(rK,aK,fK,"","\\smallsmile"),tK(rK,aK,fK,"","\\smallfrown"),tK(rK,aK,fK,"","\\bumpeq",!0),tK(rK,aK,fK,"","\\Bumpeq",!0),tK(rK,aK,fK,"","\\geqq",!0),tK(rK,aK,fK,"","\\geqslant",!0),tK(rK,aK,fK,"","\\eqslantgtr",!0),tK(rK,aK,fK,"","\\gtrsim",!0),tK(rK,aK,fK,"","\\gtrapprox",!0),tK(rK,aK,oK,"","\\gtrdot"),tK(rK,aK,fK,"","\\ggg",!0),tK(rK,aK,fK,"","\\gtrless",!0),tK(rK,aK,fK,"","\\gtreqless",!0),tK(rK,aK,fK,"","\\gtreqqless",!0),tK(rK,aK,fK,"","\\eqcirc",!0),tK(rK,aK,fK,"","\\circeq",!0),tK(rK,aK,fK,"","\\triangleq",!0),tK(rK,aK,fK,"","\\thicksim"),tK(rK,aK,fK,"","\\thickapprox"),tK(rK,aK,fK,"","\\supseteqq",!0),tK(rK,aK,fK,"","\\Supset",!0),tK(rK,aK,fK,"","\\sqsupset",!0),tK(rK,aK,fK,"","\\succcurlyeq",!0),tK(rK,aK,fK,"","\\curlyeqsucc",!0),tK(rK,aK,fK,"","\\succsim",!0),tK(rK,aK,fK,"","\\succapprox",!0),tK(rK,aK,fK,"","\\vartriangleright"),tK(rK,aK,fK,"","\\trianglerighteq"),tK(rK,aK,fK,"","\\Vdash",!0),tK(rK,aK,fK,"","\\shortmid"),tK(rK,aK,fK,"","\\shortparallel"),tK(rK,aK,fK,"","\\between",!0),tK(rK,aK,fK,"","\\pitchfork",!0),tK(rK,aK,fK,"","\\varpropto"),tK(rK,aK,fK,"","\\blacktriangleleft"),tK(rK,aK,fK,"","\\therefore",!0),tK(rK,aK,fK,"","\\backepsilon"),tK(rK,aK,fK,"","\\blacktriangleright"),tK(rK,aK,fK,"","\\because",!0),tK(rK,aK,fK,"","\\llless"),tK(rK,aK,fK,"","\\gggtr"),tK(rK,aK,oK,"","\\lhd"),tK(rK,aK,oK,"","\\rhd"),tK(rK,aK,fK,"","\\eqsim",!0),tK(rK,iK,fK,"","\\Join"),tK(rK,aK,fK,"","\\Doteq",!0),tK(rK,aK,oK,"","\\dotplus",!0),tK(rK,aK,oK,"","\\smallsetminus"),tK(rK,aK,oK,"","\\Cap",!0),tK(rK,aK,oK,"","\\Cup",!0),tK(rK,aK,oK,"","\\doublebarwedge",!0),tK(rK,aK,oK,"","\\boxminus",!0),tK(rK,aK,oK,"","\\boxplus",!0),tK(rK,aK,oK,"","\\divideontimes",!0),tK(rK,aK,oK,"","\\ltimes",!0),tK(rK,aK,oK,"","\\rtimes",!0),tK(rK,aK,oK,"","\\leftthreetimes",!0),tK(rK,aK,oK,"","\\rightthreetimes",!0),tK(rK,aK,oK,"","\\curlywedge",!0),tK(rK,aK,oK,"","\\curlyvee",!0),tK(rK,aK,oK,"","\\circleddash",!0),tK(rK,aK,oK,"","\\circledast",!0),tK(rK,aK,oK,"","\\centerdot"),tK(rK,aK,oK,"","\\intercal",!0),tK(rK,aK,oK,"","\\doublecap"),tK(rK,aK,oK,"","\\doublecup"),tK(rK,aK,oK,"","\\boxtimes",!0),tK(rK,aK,fK,"","\\dashrightarrow",!0),tK(rK,aK,fK,"","\\dashleftarrow",!0),tK(rK,aK,fK,"","\\leftleftarrows",!0),tK(rK,aK,fK,"","\\leftrightarrows",!0),tK(rK,aK,fK,"","\\Lleftarrow",!0),tK(rK,aK,fK,"","\\twoheadleftarrow",!0),tK(rK,aK,fK,"","\\leftarrowtail",!0),tK(rK,aK,fK,"","\\looparrowleft",!0),tK(rK,aK,fK,"","\\leftrightharpoons",!0),tK(rK,aK,fK,"","\\curvearrowleft",!0),tK(rK,aK,fK,"","\\circlearrowleft",!0),tK(rK,aK,fK,"","\\Lsh",!0),tK(rK,aK,fK,"","\\upuparrows",!0),tK(rK,aK,fK,"","\\upharpoonleft",!0),tK(rK,aK,fK,"","\\downharpoonleft",!0),tK(rK,iK,fK,"","\\origof",!0),tK(rK,iK,fK,"","\\imageof",!0),tK(rK,aK,fK,"","\\multimap",!0),tK(rK,aK,fK,"","\\leftrightsquigarrow",!0),tK(rK,aK,fK,"","\\rightrightarrows",!0),tK(rK,aK,fK,"","\\rightleftarrows",!0),tK(rK,aK,fK,"","\\twoheadrightarrow",!0),tK(rK,aK,fK,"","\\rightarrowtail",!0),tK(rK,aK,fK,"","\\looparrowright",!0),tK(rK,aK,fK,"","\\curvearrowright",!0),tK(rK,aK,fK,"","\\circlearrowright",!0),tK(rK,aK,fK,"","\\Rsh",!0),tK(rK,aK,fK,"","\\downdownarrows",!0),tK(rK,aK,fK,"","\\upharpoonright",!0),tK(rK,aK,fK,"","\\downharpoonright",!0),tK(rK,aK,fK,"","\\rightsquigarrow",!0),tK(rK,aK,fK,"","\\leadsto"),tK(rK,aK,fK,"","\\Rrightarrow",!0),tK(rK,aK,fK,"","\\restriction"),tK(rK,iK,gK,"","`"),tK(rK,iK,gK,"$","\\$"),tK(nK,iK,gK,"$","\\$"),tK(nK,iK,gK,"$","\\textdollar"),tK(rK,iK,gK,"%","\\%"),tK(nK,iK,gK,"%","\\%"),tK(rK,iK,gK,"_","\\_"),tK(nK,iK,gK,"_","\\_"),tK(nK,iK,gK,"_","\\textunderscore"),tK(rK,iK,gK,"","\\angle",!0),tK(rK,iK,gK,"","\\infty",!0),tK(rK,iK,gK,"","\\prime"),tK(rK,iK,gK,"","\\triangle"),tK(rK,iK,gK,"","\\Gamma",!0),tK(rK,iK,gK,"","\\Delta",!0),tK(rK,iK,gK,"","\\Theta",!0),tK(rK,iK,gK,"","\\Lambda",!0),tK(rK,iK,gK,"","\\Xi",!0),tK(rK,iK,gK,"","\\Pi",!0),tK(rK,iK,gK,"","\\Sigma",!0),tK(rK,iK,gK,"","\\Upsilon",!0),tK(rK,iK,gK,"","\\Phi",!0),tK(rK,iK,gK,"","\\Psi",!0),tK(rK,iK,gK,"","\\Omega",!0),tK(rK,iK,gK,"A",""),tK(rK,iK,gK,"B",""),tK(rK,iK,gK,"E",""),tK(rK,iK,gK,"Z",""),tK(rK,iK,gK,"H",""),tK(rK,iK,gK,"I",""),tK(rK,iK,gK,"K",""),tK(rK,iK,gK,"M",""),tK(rK,iK,gK,"N",""),tK(rK,iK,gK,"O",""),tK(rK,iK,gK,"P",""),tK(rK,iK,gK,"T",""),tK(rK,iK,gK,"X",""),tK(rK,iK,gK,"","\\neg",!0),tK(rK,iK,gK,"","\\lnot"),tK(rK,iK,gK,"","\\top"),tK(rK,iK,gK,"","\\bot"),tK(rK,iK,gK,"","\\emptyset"),tK(rK,aK,gK,"","\\varnothing"),tK(rK,iK,uK,"","\\alpha",!0),tK(rK,iK,uK,"","\\beta",!0),tK(rK,iK,uK,"","\\gamma",!0),tK(rK,iK,uK,"","\\delta",!0),tK(rK,iK,uK,"","\\epsilon",!0),tK(rK,iK,uK,"","\\zeta",!0),tK(rK,iK,uK,"","\\eta",!0),tK(rK,iK,uK,"","\\theta",!0),tK(rK,iK,uK,"","\\iota",!0),tK(rK,iK,uK,"","\\kappa",!0),tK(rK,iK,uK,"","\\lambda",!0),tK(rK,iK,uK,"","\\mu",!0),tK(rK,iK,uK,"","\\nu",!0),tK(rK,iK,uK,"","\\xi",!0),tK(rK,iK,uK,"","\\omicron",!0),tK(rK,iK,uK,"","\\pi",!0),tK(rK,iK,uK,"","\\rho",!0),tK(rK,iK,uK,"","\\sigma",!0),tK(rK,iK,uK,"","\\tau",!0),tK(rK,iK,uK,"","\\upsilon",!0),tK(rK,iK,uK,"","\\phi",!0),tK(rK,iK,uK,"","\\chi",!0),tK(rK,iK,uK,"","\\psi",!0),tK(rK,iK,uK,"","\\omega",!0),tK(rK,iK,uK,"","\\varepsilon",!0),tK(rK,iK,uK,"","\\vartheta",!0),tK(rK,iK,uK,"","\\varpi",!0),tK(rK,iK,uK,"","\\varrho",!0),tK(rK,iK,uK,"","\\varsigma",!0),tK(rK,iK,uK,"","\\varphi",!0),tK(rK,iK,oK,"","*",!0),tK(rK,iK,oK,"+","+"),tK(rK,iK,oK,"","-",!0),tK(rK,iK,oK,"","\\cdot",!0),tK(rK,iK,oK,"","\\circ",!0),tK(rK,iK,oK,"","\\div",!0),tK(rK,iK,oK,"","\\pm",!0),tK(rK,iK,oK,"","\\times",!0),tK(rK,iK,oK,"","\\cap",!0),tK(rK,iK,oK,"","\\cup",!0),tK(rK,iK,oK,"","\\setminus",!0),tK(rK,iK,oK,"","\\land"),tK(rK,iK,oK,"","\\lor"),tK(rK,iK,oK,"","\\wedge",!0),tK(rK,iK,oK,"","\\vee",!0),tK(rK,iK,gK,"","\\surd"),tK(rK,iK,hK,"","\\langle",!0),tK(rK,iK,hK,"","\\lvert"),tK(rK,iK,hK,"","\\lVert"),tK(rK,iK,lK,"?","?"),tK(rK,iK,lK,"!","!"),tK(rK,iK,lK,"","\\rangle",!0),tK(rK,iK,lK,"","\\rvert"),tK(rK,iK,lK,"","\\rVert"),tK(rK,iK,fK,"=","="),tK(rK,iK,fK,":",":"),tK(rK,iK,fK,"","\\approx",!0),tK(rK,iK,fK,"","\\cong",!0),tK(rK,iK,fK,"","\\ge"),tK(rK,iK,fK,"","\\geq",!0),tK(rK,iK,fK,"","\\gets"),tK(rK,iK,fK,">","\\gt",!0),tK(rK,iK,fK,"","\\in",!0),tK(rK,iK,fK,"","\\@not"),tK(rK,iK,fK,"","\\subset",!0),tK(rK,iK,fK,"","\\supset",!0),tK(rK,iK,fK,"","\\subseteq",!0),tK(rK,iK,fK,"","\\supseteq",!0),tK(rK,aK,fK,"","\\nsubseteq",!0),tK(rK,aK,fK,"","\\nsupseteq",!0),tK(rK,iK,fK,"","\\models"),tK(rK,iK,fK,"","\\leftarrow",!0),tK(rK,iK,fK,"","\\le"),tK(rK,iK,fK,"","\\leq",!0),tK(rK,iK,fK,"<","\\lt",!0),tK(rK,iK,fK,"","\\rightarrow",!0),tK(rK,iK,fK,"","\\to"),tK(rK,aK,fK,"","\\ngeq",!0),tK(rK,aK,fK,"","\\nleq",!0),tK(rK,iK,mK,"","\\ "),tK(rK,iK,mK,"","\\space"),tK(rK,iK,mK,"","\\nobreakspace"),tK(nK,iK,mK,"","\\ "),tK(nK,iK,mK,""," "),tK(nK,iK,mK,"","\\space"),tK(nK,iK,mK,"","\\nobreakspace"),tK(rK,iK,mK,null,"\\nobreak"),tK(rK,iK,mK,null,"\\allowbreak"),tK(rK,iK,pK,",",","),tK(rK,iK,pK,";",";"),tK(rK,aK,oK,"","\\barwedge",!0),tK(rK,aK,oK,"","\\veebar",!0),tK(rK,iK,oK,"","\\odot",!0),tK(rK,iK,oK,"","\\oplus",!0),tK(rK,iK,oK,"","\\otimes",!0),tK(rK,iK,gK,"","\\partial",!0),tK(rK,iK,oK,"","\\oslash",!0),tK(rK,aK,oK,"","\\circledcirc",!0),tK(rK,aK,oK,"","\\boxdot",!0),tK(rK,iK,oK,"","\\bigtriangleup"),tK(rK,iK,oK,"","\\bigtriangledown"),tK(rK,iK,oK,"","\\dagger"),tK(rK,iK,oK,"","\\diamond"),tK(rK,iK,oK,"","\\star"),tK(rK,iK,oK,"","\\triangleleft"),tK(rK,iK,oK,"","\\triangleright"),tK(rK,iK,hK,"{","\\{"),tK(nK,iK,gK,"{","\\{"),tK(nK,iK,gK,"{","\\textbraceleft"),tK(rK,iK,lK,"}","\\}"),tK(nK,iK,gK,"}","\\}"),tK(nK,iK,gK,"}","\\textbraceright"),tK(rK,iK,hK,"{","\\lbrace"),tK(rK,iK,lK,"}","\\rbrace"),tK(rK,iK,hK,"[","\\lbrack",!0),tK(nK,iK,gK,"[","\\lbrack",!0),tK(rK,iK,lK,"]","\\rbrack",!0),tK(nK,iK,gK,"]","\\rbrack",!0),tK(rK,iK,hK,"(","\\lparen",!0),tK(rK,iK,lK,")","\\rparen",!0),tK(nK,iK,gK,"<","\\textless",!0),tK(nK,iK,gK,">","\\textgreater",!0),tK(rK,iK,hK,"","\\lfloor",!0),tK(rK,iK,lK,"","\\rfloor",!0),tK(rK,iK,hK,"","\\lceil",!0),tK(rK,iK,lK,"","\\rceil",!0),tK(rK,iK,gK,"\\","\\backslash"),tK(rK,iK,gK,"","|"),tK(rK,iK,gK,"","\\vert"),tK(nK,iK,gK,"|","\\textbar",!0),tK(rK,iK,gK,"","\\|"),tK(rK,iK,gK,"","\\Vert"),tK(nK,iK,gK,"","\\textbardbl"),tK(nK,iK,gK,"~","\\textasciitilde"),tK(nK,iK,gK,"\\","\\textbackslash"),tK(nK,iK,gK,"^","\\textasciicircum"),tK(rK,iK,fK,"","\\uparrow",!0),tK(rK,iK,fK,"","\\Uparrow",!0),tK(rK,iK,fK,"","\\downarrow",!0),tK(rK,iK,fK,"","\\Downarrow",!0),tK(rK,iK,fK,"","\\updownarrow",!0),tK(rK,iK,fK,"","\\Updownarrow",!0),tK(rK,iK,dK,"","\\coprod"),tK(rK,iK,dK,"","\\bigvee"),tK(rK,iK,dK,"","\\bigwedge"),tK(rK,iK,dK,"","\\biguplus"),tK(rK,iK,dK,"","\\bigcap"),tK(rK,iK,dK,"","\\bigcup"),tK(rK,iK,dK,"","\\int"),tK(rK,iK,dK,"","\\intop"),tK(rK,iK,dK,"","\\iint"),tK(rK,iK,dK,"","\\iiint"),tK(rK,iK,dK,"","\\prod"),tK(rK,iK,dK,"","\\sum"),tK(rK,iK,dK,"","\\bigotimes"),tK(rK,iK,dK,"","\\bigoplus"),tK(rK,iK,dK,"","\\bigodot"),tK(rK,iK,dK,"","\\oint"),tK(rK,iK,dK,"","\\oiint"),tK(rK,iK,dK,"","\\oiiint"),tK(rK,iK,dK,"","\\bigsqcup"),tK(rK,iK,dK,"","\\smallint"),tK(nK,iK,cK,"","\\textellipsis"),tK(rK,iK,cK,"","\\mathellipsis"),tK(nK,iK,cK,"","\\ldots",!0),tK(rK,iK,cK,"","\\ldots",!0),tK(rK,iK,cK,"","\\@cdots",!0),tK(rK,iK,cK,"","\\ddots",!0),tK(rK,iK,gK,"","\\varvdots"),tK(nK,iK,gK,"","\\varvdots"),tK(rK,iK,sK,"","\\acute"),tK(rK,iK,sK,"","\\grave"),tK(rK,iK,sK,"","\\ddot"),tK(rK,iK,sK,"~","\\tilde"),tK(rK,iK,sK,"","\\bar"),tK(rK,iK,sK,"","\\breve"),tK(rK,iK,sK,"","\\check"),tK(rK,iK,sK,"^","\\hat"),tK(rK,iK,sK,"","\\vec"),tK(rK,iK,sK,"","\\dot"),tK(rK,iK,sK,"","\\mathring"),tK(rK,iK,uK,"","\\@imath"),tK(rK,iK,uK,"","\\@jmath"),tK(rK,iK,gK,"",""),tK(rK,iK,gK,"",""),tK(nK,iK,gK,"","\\i",!0),tK(nK,iK,gK,"","\\j",!0),tK(nK,iK,gK,"","\\ss",!0),tK(nK,iK,gK,"","\\ae",!0),tK(nK,iK,gK,"","\\oe",!0),tK(nK,iK,gK,"","\\o",!0),tK(nK,iK,gK,"","\\AE",!0),tK(nK,iK,gK,"","\\OE",!0),tK(nK,iK,gK,"","\\O",!0),tK(nK,iK,sK,"","\\'"),tK(nK,iK,sK,"","\\`"),tK(nK,iK,sK,"","\\^"),tK(nK,iK,sK,"","\\~"),tK(nK,iK,sK,"","\\="),tK(nK,iK,sK,"","\\u"),tK(nK,iK,sK,"","\\."),tK(nK,iK,sK,"","\\c"),tK(nK,iK,sK,"","\\r"),tK(nK,iK,sK,"","\\v"),tK(nK,iK,sK,"",'\\"'),tK(nK,iK,sK,"","\\H"),tK(nK,iK,sK,"","\\textcircled");var vK={"--":!0,"---":!0,"``":!0,"''":!0};tK(nK,iK,gK,"","--",!0),tK(nK,iK,gK,"","\\textendash"),tK(nK,iK,gK,"","---",!0),tK(nK,iK,gK,"","\\textemdash"),tK(nK,iK,gK,"","`",!0),tK(nK,iK,gK,"","\\textquoteleft"),tK(nK,iK,gK,"","'",!0),tK(nK,iK,gK,"","\\textquoteright"),tK(nK,iK,gK,"","``",!0),tK(nK,iK,gK,"","\\textquotedblleft"),tK(nK,iK,gK,"","''",!0),tK(nK,iK,gK,"","\\textquotedblright"),tK(rK,iK,gK,"","\\degree",!0),tK(nK,iK,gK,"","\\degree"),tK(nK,iK,gK,"","\\textdegree",!0),tK(rK,iK,gK,"","\\pounds"),tK(rK,iK,gK,"","\\mathsterling",!0),tK(nK,iK,gK,"","\\pounds"),tK(nK,iK,gK,"","\\textsterling",!0),tK(rK,aK,gK,"","\\maltese"),tK(nK,aK,gK,"","\\maltese");for(var yK='0123456789/@."',bK=0;bK<14;bK++){var _K=yK.charAt(bK);tK(rK,iK,gK,_K,_K)}for(var wK='0123456789!@*()-=+";:?/.,',xK=0;xK<25;xK++){var EK=wK.charAt(xK);tK(nK,iK,gK,EK,EK)}for(var kK="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",SK=0;SK<52;SK++){var AK=kK.charAt(SK);tK(rK,iK,uK,AK,AK),tK(nK,iK,gK,AK,AK)}tK(rK,aK,gK,"C",""),tK(nK,aK,gK,"C",""),tK(rK,aK,gK,"H",""),tK(nK,aK,gK,"H",""),tK(rK,aK,gK,"N",""),tK(nK,aK,gK,"N",""),tK(rK,aK,gK,"P",""),tK(nK,aK,gK,"P",""),tK(rK,aK,gK,"Q",""),tK(nK,aK,gK,"Q",""),tK(rK,aK,gK,"R",""),tK(nK,aK,gK,"R",""),tK(rK,aK,gK,"Z",""),tK(nK,aK,gK,"Z",""),tK(rK,iK,uK,"h",""),tK(nK,iK,uK,"h","");for(var TK="",NK=0;NK<52;NK++){var IK=kK.charAt(NK);tK(rK,iK,uK,IK,TK=String.fromCharCode(55349,56320+NK)),tK(nK,iK,gK,IK,TK),tK(rK,iK,uK,IK,TK=String.fromCharCode(55349,56372+NK)),tK(nK,iK,gK,IK,TK),tK(rK,iK,uK,IK,TK=String.fromCharCode(55349,56424+NK)),tK(nK,iK,gK,IK,TK),tK(rK,iK,uK,IK,TK=String.fromCharCode(55349,56580+NK)),tK(nK,iK,gK,IK,TK),tK(rK,iK,uK,IK,TK=String.fromCharCode(55349,56684+NK)),tK(nK,iK,gK,IK,TK),tK(rK,iK,uK,IK,TK=String.fromCharCode(55349,56736+NK)),tK(nK,iK,gK,IK,TK),tK(rK,iK,uK,IK,TK=String.fromCharCode(55349,56788+NK)),tK(nK,iK,gK,IK,TK),tK(rK,iK,uK,IK,TK=String.fromCharCode(55349,56840+NK)),tK(nK,iK,gK,IK,TK),tK(rK,iK,uK,IK,TK=String.fromCharCode(55349,56944+NK)),tK(nK,iK,gK,IK,TK),NK<26&&(tK(rK,iK,uK,IK,TK=String.fromCharCode(55349,56632+NK)),tK(nK,iK,gK,IK,TK),tK(rK,iK,uK,IK,TK=String.fromCharCode(55349,56476+NK)),tK(nK,iK,gK,IK,TK))}tK(rK,iK,uK,"k",TK=String.fromCharCode(55349,56668)),tK(nK,iK,gK,"k",TK);for(var MK=0;MK<10;MK++){var CK=MK.toString();tK(rK,iK,uK,CK,TK=String.fromCharCode(55349,57294+MK)),tK(nK,iK,gK,CK,TK),tK(rK,iK,uK,CK,TK=String.fromCharCode(55349,57314+MK)),tK(nK,iK,gK,CK,TK),tK(rK,iK,uK,CK,TK=String.fromCharCode(55349,57324+MK)),tK(nK,iK,gK,CK,TK),tK(rK,iK,uK,CK,TK=String.fromCharCode(55349,57334+MK)),tK(nK,iK,gK,CK,TK)}for(var jK="",OK=0;OK<3;OK++){var RK=jK.charAt(OK);tK(rK,iK,uK,RK,RK),tK(nK,iK,gK,RK,RK)}var LK=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],PK=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],DK=function(e,t,r){return eK[r][e]&&eK[r][e].replace&&(e=eK[r][e].replace),{value:e,metrics:TZ(e,t,r)}},$K=function(e,t,r,n,i){var a,s=DK(e,t,r),o=s.metrics;if(e=s.value,o){var l=o.italic;("text"===r||n&&"mathit"===n.font)&&(l=0),a=new WZ(e,o.height,o.depth,l,o.skew,o.width,i)}else"undefined"!=typeof console&&console.warn("No character metrics for '"+e+"' in style '"+t+"' and mode '"+r+"'"),a=new WZ(e,0,0,0,0,0,i);if(n){a.maxFontSize=n.sizeMultiplier,n.style.isTight()&&a.classes.push("mtight");var c=n.getColor();c&&(a.style.color=c)}return a},zK=(e,t)=>{if($Z(e.classes)!==$Z(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(1===e.classes.length){var r=e.classes[0];if("mbin"===r||"mord"===r)return!1}for(var n in e.style)if(e.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;for(var i in t.style)if(t.style.hasOwnProperty(i)&&e.style[i]!==t.style[i])return!1;return!0},BK=function(e){for(var t=0,r=0,n=0,i=0;i<e.children.length;i++){var a=e.children[i];a.height>t&&(t=a.height),a.depth>r&&(r=a.depth),a.maxFontSize>n&&(n=a.maxFontSize)}e.height=t,e.depth=r,e.maxFontSize=n},UK=function(e,t,r,n){var i=new HZ(e,t,r,n);return BK(i),i},FK=(e,t,r,n)=>new HZ(e,t,r,n),HK=function(e){var t=new xZ(e);return BK(t),t},GK=function(e,t,r){var n="";switch(e){case"amsrm":n="AMS";break;case"textrm":n="Main";break;case"textsf":n="SansSerif";break;case"texttt":n="Typewriter";break;default:n=e}return n+"-"+("textbf"===t&&"textit"===r?"BoldItalic":"textbf"===t?"Bold":"textit"===t?"Italic":"Regular")},qK={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},VK={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},WK={fontMap:qK,makeSymbol:$K,mathsym:function(e,t,r,n){return void 0===n&&(n=[]),"boldsymbol"===r.font&&DK(e,"Main-Bold",t).metrics?$K(e,"Main-Bold",t,r,n.concat(["mathbf"])):"\\"===e||"main"===eK[t][e].font?$K(e,"Main-Regular",t,r,n):$K(e,"AMS-Regular",t,r,n.concat(["amsrm"]))},makeSpan:UK,makeSvgSpan:FK,makeLineSpan:function(e,t,r){var n=UK([e],[],t);return n.height=Math.max(r||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),n.style.borderBottomWidth=DZ(n.height),n.maxFontSize=1,n},makeAnchor:function(e,t,r,n){var i=new GZ(e,t,r,n);return BK(i),i},makeFragment:HK,wrapFragment:function(e,t){return e instanceof xZ?UK([],[e],t):e},makeVList:function(e,t){for(var{children:r,depth:n}=function(e){if("individualShift"===e.positionType){for(var t=e.children,r=[t[0]],n=-t[0].shift-t[0].elem.depth,i=n,a=1;a<t.length;a++){var s=-t[a].shift-i-t[a].elem.depth,o=s-(t[a-1].elem.height+t[a-1].elem.depth);i+=s,r.push({type:"kern",size:o}),r.push(t[a])}return{children:r,depth:n}}var l;if("top"===e.positionType){for(var c=e.positionData,u=0;u<e.children.length;u++){var d=e.children[u];c-="kern"===d.type?d.size:d.elem.height+d.elem.depth}l=c}else if("bottom"===e.positionType)l=-e.positionData;else{var h=e.children[0];if("elem"!==h.type)throw new Error('First child must have type "elem".');if("shift"===e.positionType)l=-h.elem.depth-e.positionData;else{if("firstBaseline"!==e.positionType)throw new Error("Invalid positionType "+e.positionType+".");l=-h.elem.depth}}return{children:e.children,depth:l}}(e),i=0,a=0;a<r.length;a++){var s=r[a];if("elem"===s.type){var o=s.elem;i=Math.max(i,o.maxFontSize,o.height)}}i+=2;var l=UK(["pstrut"],[]);l.style.height=DZ(i);for(var c=[],u=n,d=n,h=n,p=0;p<r.length;p++){var f=r[p];if("kern"===f.type)h+=f.size;else{var m=f.elem,g=f.wrapperClasses||[],v=f.wrapperStyle||{},y=UK(g,[l,m],void 0,v);y.style.top=DZ(-i-h-m.depth),f.marginLeft&&(y.style.marginLeft=f.marginLeft),f.marginRight&&(y.style.marginRight=f.marginRight),c.push(y),h+=m.height+m.depth}u=Math.min(u,h),d=Math.max(d,h)}var b,_=UK(["vlist"],c);if(_.style.height=DZ(d),u<0){var w=UK([],[]),x=UK(["vlist"],[w]);x.style.height=DZ(-u);var E=UK(["vlist-s"],[new WZ("")]);b=[UK(["vlist-r"],[_,E]),UK(["vlist-r"],[x])]}else b=[UK(["vlist-r"],[_])];var k=UK(["vlist-t"],b);return 2===b.length&&k.classes.push("vlist-t2"),k.height=d,k.depth=-u,k},makeOrd:function(e,t,r){var n=e.mode,i=e.text,a=["mord"],s="math"===n||"text"===n&&t.font,o=s?t.font:t.fontFamily,l="",c="";if(55349===i.charCodeAt(0)&&([l,c]=function(e,t){var r=1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536,n="math"===t?0:1;if(119808<=r&&r<120484){var i=Math.floor((r-119808)/26);return[LK[i][2],LK[i][n]]}if(120782<=r&&r<=120831){var a=Math.floor((r-120782)/10);return[PK[a][2],PK[a][n]]}if(120485===r||120486===r)return[LK[0][2],LK[0][n]];if(120486<r&&r<120782)return["",""];throw new QW("Unsupported character: "+e)}(i,n)),l.length>0)return $K(i,l,n,t,a.concat(c));if(o){var u,d;if("boldsymbol"===o){var h=function(e,t,r,n,i){return"textord"!==i&&DK(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(i,n,0,0,r);u=h.fontName,d=[h.fontClass]}else s?(u=qK[o].fontName,d=[o]):(u=GK(o,t.fontWeight,t.fontShape),d=[o,t.fontWeight,t.fontShape]);if(DK(i,u,n).metrics)return $K(i,u,n,t,a.concat(d));if(vK.hasOwnProperty(i)&&"Typewriter"===u.slice(0,10)){for(var p=[],f=0;f<i.length;f++)p.push($K(i[f],u,n,t,a.concat(d)));return HK(p)}}if("mathord"===r)return $K(i,"Math-Italic",n,t,a.concat(["mathnormal"]));if("textord"===r){var m=eK[n][i]&&eK[n][i].font;if("ams"===m){var g=GK("amsrm",t.fontWeight,t.fontShape);return $K(i,g,n,t,a.concat("amsrm",t.fontWeight,t.fontShape))}if("main"!==m&&m){var v=GK(m,t.fontWeight,t.fontShape);return $K(i,v,n,t,a.concat(v,t.fontWeight,t.fontShape))}var y=GK("textrm",t.fontWeight,t.fontShape);return $K(i,y,n,t,a.concat(t.fontWeight,t.fontShape))}throw new Error("unexpected type: "+r+" in makeOrd")},makeGlue:(e,t)=>{var r=UK(["mspace"],[],t),n=PZ(e,t);return r.style.marginRight=DZ(n),r},staticSvg:function(e,t){var[r,n,i]=VK[e],a=new KZ(r),s=new ZZ([a],{width:DZ(n),height:DZ(i),style:"width:"+DZ(n),viewBox:"0 0 "+1e3*n+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),o=FK(["overlay"],[s],t);return o.height=i,o.style.height=DZ(i),o.style.width=DZ(n),o},svgData:VK,tryCombineChars:e=>{for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1];r instanceof WZ&&n instanceof WZ&&zK(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,e.splice(t+1,1),t--)}return e}},ZK={number:3,unit:"mu"},KK={number:4,unit:"mu"},YK={number:5,unit:"mu"},JK={mord:{mop:ZK,mbin:KK,mrel:YK,minner:ZK},mop:{mord:ZK,mop:ZK,mrel:YK,minner:ZK},mbin:{mord:KK,mop:KK,mopen:KK,minner:KK},mrel:{mord:YK,mop:YK,mopen:YK,minner:YK},mopen:{},mclose:{mop:ZK,mbin:KK,mrel:YK,minner:ZK},mpunct:{mord:ZK,mop:ZK,mrel:YK,mopen:ZK,mclose:ZK,mpunct:ZK,minner:ZK},minner:{mord:ZK,mop:ZK,mbin:KK,mrel:YK,mopen:ZK,mpunct:ZK,minner:ZK}},XK={mord:{mop:ZK},mop:{mord:ZK,mop:ZK},mbin:{},mrel:{},mopen:{},mclose:{mop:ZK},mpunct:{},minner:{mop:ZK}},QK={},eY={},tY={};function rY(e){for(var{type:t,names:r,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=e,o={type:t,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:void 0===n.allowedInMath||n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},l=0;l<r.length;++l)QK[r[l]]=o;t&&(a&&(eY[t]=a),s&&(tY[t]=s))}function nY(e){var{type:t,htmlBuilder:r,mathmlBuilder:n}=e;rY({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var iY=function(e){return"ordgroup"===e.type&&1===e.body.length?e.body[0]:e},aY=function(e){return"ordgroup"===e.type?e.body:[e]},sY=WK.makeSpan,oY=["leftmost","mbin","mopen","mrel","mop","mpunct"],lY=["rightmost","mrel","mclose","mpunct"],cY={display:gZ.DISPLAY,text:gZ.TEXT,script:gZ.SCRIPT,scriptscript:gZ.SCRIPTSCRIPT},uY={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},dY=function(e,t,r,n){void 0===n&&(n=[null,null]);for(var i=[],a=0;a<e.length;a++){var s=vY(e[a],t);if(s instanceof xZ){var o=s.children;i.push(...o)}else i.push(s)}if(WK.tryCombineChars(i),!r)return i;var l=t;if(1===e.length){var c=e[0];"sizing"===c.type?l=t.havingSize(c.size):"styling"===c.type&&(l=t.havingStyle(cY[c.style]))}var u=sY([n[0]||"leftmost"],[],t),d=sY([n[1]||"rightmost"],[],t),h="root"===r;return hY(i,(e,t)=>{var r=t.classes[0],n=e.classes[0];"mbin"===r&&lY.includes(n)?t.classes[0]="mord":"mbin"===n&&oY.includes(r)&&(e.classes[0]="mord")},{node:u},d,h),hY(i,(e,t)=>{var r=mY(t),n=mY(e),i=r&&n?e.hasClass("mtight")?XK[r][n]:JK[r][n]:null;if(i)return WK.makeGlue(i,l)},{node:u},d,h),i},hY=function e(t,r,n,i,a){i&&t.push(i);for(var s=0;s<t.length;s++){var o=t[s],l=pY(o);if(l)e(l.children,r,n,null,a);else{var c=!o.hasClass("mspace");if(c){var u=r(o,n.node);u&&(n.insertAfter?n.insertAfter(u):(t.unshift(u),s++))}c?n.node=o:a&&o.hasClass("newline")&&(n.node=sY(["leftmost"])),n.insertAfter=(e=>r=>{t.splice(e+1,0,r),s++})(s)}}i&&t.pop()},pY=function(e){return e instanceof xZ||e instanceof GZ||e instanceof HZ&&e.hasClass("enclosing")?e:null},fY=function e(t,r){var n=pY(t);if(n){var i=n.children;if(i.length){if("right"===r)return e(i[i.length-1],"right");if("left"===r)return e(i[0],"left")}}return t},mY=function(e,t){return e?(t&&(e=fY(e,t)),uY[e.classes[0]]||null):null},gY=function(e,t){var r=["nulldelimiter"].concat(e.baseSizingClasses());return sY(t.concat(r))},vY=function(e,t,r){if(!e)return sY();if(eY[e.type]){var n=eY[e.type](e,t);if(r&&t.size!==r.size){n=sY(t.sizingClasses(r),[n],t);var i=t.sizeMultiplier/r.sizeMultiplier;n.height*=i,n.depth*=i}return n}throw new QW("Got group of unknown type: '"+e.type+"'")};function yY(e,t){var r=sY(["base"],e,t),n=sY(["strut"]);return n.style.height=DZ(r.height+r.depth),r.depth&&(n.style.verticalAlign=DZ(-r.depth)),r.children.unshift(n),r}function bY(e,t){var r=null;1===e.length&&"tag"===e[0].type&&(r=e[0].tag,e=e[0].body);var n,i=dY(e,t,"root");2===i.length&&i[1].hasClass("tag")&&(n=i.pop());for(var a,s=[],o=[],l=0;l<i.length;l++)if(o.push(i[l]),i[l].hasClass("mbin")||i[l].hasClass("mrel")||i[l].hasClass("allowbreak")){for(var c=!1;l<i.length-1&&i[l+1].hasClass("mspace")&&!i[l+1].hasClass("newline");)l++,o.push(i[l]),i[l].hasClass("nobreak")&&(c=!0);c||(s.push(yY(o,t)),o=[])}else i[l].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(yY(o,t)),o=[]),s.push(i[l]));o.length>0&&s.push(yY(o,t)),r?((a=yY(dY(r,t,!0))).classes=["tag"],s.push(a)):n&&s.push(n);var u=sY(["katex-html"],s);if(u.setAttribute("aria-hidden","true"),a){var d=a.children[0];d.style.height=DZ(u.height+u.depth),u.depth&&(d.style.verticalAlign=DZ(-u.depth))}return u}function _Y(e){return new xZ(e)}class wY{constructor(e,t,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=r||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=$Z(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof xY&&this.children[r+1]instanceof xY){for(var n=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof xY;)n+=this.children[++r].toText();e.appendChild(new xY(n).toNode())}else e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=iZ.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+iZ.escape($Z(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">"}toText(){return this.children.map(e=>e.toText()).join("")}}class xY{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return iZ.escape(this.toText())}toText(){return this.text}}var EY={MathNode:wY,TextNode:xY,SpaceNode:class{constructor(e){this.width=void 0,this.character=void 0,this.width=e,this.character=e>=.05555&&e<=.05556?"":e>=.1666&&e<=.1667?"":e>=.2222&&e<=.2223?"":e>=.2777&&e<=.2778?"":e>=-.05556&&e<=-.05555?"":e>=-.1667&&e<=-.1666?"":e>=-.2223&&e<=-.2222?"":e>=-.2778&&e<=-.2777?"":null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",DZ(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+DZ(this.width)+'"/>'}toText(){return this.character?this.character:" "}},newDocumentFragment:_Y},kY=function(e,t,r){return!eK[t][e]||!eK[t][e].replace||55349===e.charCodeAt(0)||vK.hasOwnProperty(e)&&r&&(r.fontFamily&&"tt"===r.fontFamily.slice(4,6)||r.font&&"tt"===r.font.slice(4,6))||(e=eK[t][e].replace),new EY.TextNode(e)},SY=function(e){return 1===e.length?e[0]:new EY.MathNode("mrow",e)},AY=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";var r=t.font;if(!r||"mathnormal"===r)return null;var n=e.mode;if("mathit"===r)return"italic";if("boldsymbol"===r)return"textord"===e.type?"bold":"bold-italic";if("mathbf"===r)return"bold";if("mathbb"===r)return"double-struck";if("mathsfit"===r)return"sans-serif-italic";if("mathfrak"===r)return"fraktur";if("mathscr"===r||"mathcal"===r)return"script";if("mathsf"===r)return"sans-serif";if("mathtt"===r)return"monospace";var i=e.text;return["\\imath","\\jmath"].includes(i)?null:(eK[n][i]&&eK[n][i].replace&&(i=eK[n][i].replace),TZ(i,WK.fontMap[r].fontName,n)?WK.fontMap[r].variant:null)};function TY(e){if(!e)return!1;if("mi"===e.type&&1===e.children.length){var t=e.children[0];return t instanceof xY&&"."===t.text}if("mo"===e.type&&1===e.children.length&&"true"===e.getAttribute("separator")&&"0em"===e.getAttribute("lspace")&&"0em"===e.getAttribute("rspace")){var r=e.children[0];return r instanceof xY&&","===r.text}return!1}var NY=function(e,t,r){if(1===e.length){var n=MY(e[0],t);return r&&n instanceof wY&&"mo"===n.type&&(n.setAttribute("lspace","0em"),n.setAttribute("rspace","0em")),[n]}for(var i,a=[],s=0;s<e.length;s++){var o=MY(e[s],t);if(o instanceof wY&&i instanceof wY){if("mtext"===o.type&&"mtext"===i.type&&o.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...o.children);continue}if("mn"===o.type&&"mn"===i.type){i.children.push(...o.children);continue}if(TY(o)&&"mn"===i.type){i.children.push(...o.children);continue}if("mn"===o.type&&TY(i))o.children=[...i.children,...o.children],a.pop();else if(("msup"===o.type||"msub"===o.type)&&o.children.length>=1&&("mn"===i.type||TY(i))){var l=o.children[0];l instanceof wY&&"mn"===l.type&&(l.children=[...i.children,...l.children],a.pop())}else if("mi"===i.type&&1===i.children.length){var c=i.children[0];if(c instanceof xY&&""===c.text&&("mo"===o.type||"mi"===o.type||"mn"===o.type)){var u=o.children[0];u instanceof xY&&u.text.length>0&&(u.text=u.text.slice(0,1)+""+u.text.slice(1),a.pop())}}}a.push(o),i=o}return a},IY=function(e,t,r){return SY(NY(e,t,r))},MY=function(e,t){if(!e)return new EY.MathNode("mrow");if(tY[e.type])return tY[e.type](e,t);throw new QW("Got group of unknown type: '"+e.type+"'")};function CY(e,t,r,n,i){var a,s=NY(e,r);a=1===s.length&&s[0]instanceof wY&&["mrow","mtable"].includes(s[0].type)?s[0]:new EY.MathNode("mrow",s);var o=new EY.MathNode("annotation",[new EY.TextNode(t)]);o.setAttribute("encoding","application/x-tex");var l=new EY.MathNode("semantics",[a,o]),c=new EY.MathNode("math",[l]);c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&c.setAttribute("display","block");var u=i?"katex":"katex-mathml";return WK.makeSpan([u],[c])}var jY=function(e){return new jZ({style:e.displayMode?gZ.DISPLAY:gZ.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},OY=function(e,t){if(t.displayMode){var r=["katex-display"];t.leqno&&r.push("leqno"),t.fleqn&&r.push("fleqn"),e=WK.makeSpan(r,[e])}return e},RY={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},LY={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},PY=function(e,t,r,n,i){var a,s=e.height+e.depth+r+n;if(/fbox|color|angl/.test(t)){if(a=WK.makeSpan(["stretchy",t],[],i),"fbox"===t){var o=i.color&&i.getColor();o&&(a.style.borderColor=o)}}else{var l=[];/^[bx]cancel$/.test(t)&&l.push(new YZ({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&l.push(new YZ({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var c=new ZZ(l,{width:"100%",height:DZ(s)});a=WK.makeSvgSpan([],[c],i)}return a.height=s,a.style.height=DZ(s),a},DY=function(e){var t=new EY.MathNode("mo",[new EY.TextNode(RY[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},$Y=function(e,t){var{span:r,minWidth:n,height:i}=function(){var r=4e5,n=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(n)){var i,a,s,o="ordgroup"===(p=e.base).type?p.body.length:1;if(o>5)"widehat"===n||"widecheck"===n?(i=420,r=2364,s=.42,a=n+"4"):(i=312,r=2340,s=.34,a="tilde4");else{var l=[1,1,2,2,3,3][o];"widehat"===n||"widecheck"===n?(r=[0,1062,2364,2364,2364][l],i=[0,239,300,360,420][l],s=[0,.24,.3,.3,.36,.42][l],a=n+l):(r=[0,600,1033,2339,2340][l],i=[0,260,286,306,312][l],s=[0,.26,.286,.3,.306,.34][l],a="tilde"+l)}var c=new KZ(a),u=new ZZ([c],{width:"100%",height:DZ(s),viewBox:"0 0 "+r+" "+i,preserveAspectRatio:"none"});return{span:WK.makeSvgSpan([],[u],t),minWidth:0,height:s}}var d,h,p,f=[],m=LY[n],[g,v,y]=m,b=y/1e3,_=g.length;if(1===_)d=["hide-tail"],h=[m[3]];else if(2===_)d=["halfarrow-left","halfarrow-right"],h=["xMinYMin","xMaxYMin"];else{if(3!==_)throw new Error("Correct katexImagesData or update code here to support\n                    "+_+" children.");d=["brace-left","brace-center","brace-right"],h=["xMinYMin","xMidYMin","xMaxYMin"]}for(var w=0;w<_;w++){var x=new KZ(g[w]),E=new ZZ([x],{width:"400em",height:DZ(b),viewBox:"0 0 "+r+" "+y,preserveAspectRatio:h[w]+" slice"}),k=WK.makeSvgSpan([d[w]],[E],t);if(1===_)return{span:k,minWidth:v,height:b};k.style.height=DZ(b),f.push(k)}return{span:WK.makeSpan(["stretchy"],f,t),minWidth:v,height:b}}();return r.height=i,r.style.height=DZ(i),n>0&&(r.style.minWidth=DZ(n)),r};function zY(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function BY(e){var t=UY(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function UY(e){return e&&("atom"===e.type||QZ.hasOwnProperty(e.type))?e:null}var FY=(e,t)=>{var r,n,i;e&&"supsub"===e.type?(r=(n=zY(e.base,"accent")).base,e.base=r,i=function(e){if(e instanceof HZ)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}(vY(e,t)),e.base=n):r=(n=zY(e,"accent")).base;var a=vY(r,t.havingCrampedStyle()),s=0;if(n.isShifty&&iZ.isCharacterBox(r)){var o=iZ.getBaseElem(r);s=JZ(vY(o,t.havingCrampedStyle())).skew}var l,c="\\c"===n.label,u=c?a.height+a.depth:Math.min(a.height,t.fontMetrics().xHeight);if(n.isStretchy)l=$Y(n,t),l=WK.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:s>0?{width:"calc(100% - "+DZ(2*s)+")",marginLeft:DZ(2*s)}:void 0}]},t);else{var d,h;"\\vec"===n.label?(d=WK.staticSvg("vec",t),h=WK.svgData.vec[1]):((d=JZ(d=WK.makeOrd({mode:n.mode,text:n.label},t,"textord"))).italic=0,h=d.width,c&&(u+=d.depth)),l=WK.makeSpan(["accent-body"],[d]);var p="\\textcircled"===n.label;p&&(l.classes.push("accent-full"),u=a.height);var f=s;p||(f-=h/2),l.style.left=DZ(f),"\\textcircled"===n.label&&(l.style.top=".2em"),l=WK.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-u},{type:"elem",elem:l}]},t)}var m=WK.makeSpan(["mord","accent"],[l],t);return i?(i.children[0]=m,i.height=Math.max(m.height,i.height),i.classes[0]="mord",i):m},HY=(e,t)=>{var r=e.isStretchy?DY(e.label):new EY.MathNode("mo",[kY(e.label,e.mode)]),n=new EY.MathNode("mover",[MY(e.base,t),r]);return n.setAttribute("accent","true"),n},GY=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));rY({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=iY(t[0]),n=!GY.test(e.funcName),i=!n||"\\widehat"===e.funcName||"\\widetilde"===e.funcName||"\\widecheck"===e.funcName;return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,isShifty:i,base:r}},htmlBuilder:FY,mathmlBuilder:HY}),rY({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],n=e.parser.mode;return"math"===n&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:FY,mathmlBuilder:HY}),rY({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0];return{type:"accentUnder",mode:r.mode,label:n,base:i}},htmlBuilder:(e,t)=>{var r=vY(e.base,t),n=$Y(e,t),i="\\utilde"===e.label?.12:0,a=WK.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:r}]},t);return WK.makeSpan(["mord","accentunder"],[a],t)},mathmlBuilder:(e,t)=>{var r=DY(e.label),n=new EY.MathNode("munder",[MY(e.base,t),r]);return n.setAttribute("accentunder","true"),n}});var qY=e=>{var t=new EY.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};rY({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n,funcName:i}=e;return{type:"xArrow",mode:n.mode,label:i,body:t[0],below:r[0]}},htmlBuilder(e,t){var r,n=t.style,i=t.havingStyle(n.sup()),a=WK.wrapFragment(vY(e.body,i,t),t),s="\\x"===e.label.slice(0,2)?"x":"cd";a.classes.push(s+"-arrow-pad"),e.below&&(i=t.havingStyle(n.sub()),(r=WK.wrapFragment(vY(e.below,i,t),t)).classes.push(s+"-arrow-pad"));var o,l=$Y(e,t),c=-t.fontMetrics().axisHeight+.5*l.height,u=-t.fontMetrics().axisHeight-.5*l.height-.111;if((a.depth>.25||"\\xleftequilibrium"===e.label)&&(u-=a.depth),r){var d=-t.fontMetrics().axisHeight+r.height+.5*l.height+.111;o=WK.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:u},{type:"elem",elem:l,shift:c},{type:"elem",elem:r,shift:d}]},t)}else o=WK.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:u},{type:"elem",elem:l,shift:c}]},t);return o.children[0].children[0].children[1].classes.push("svg-align"),WK.makeSpan(["mrel","x-arrow"],[o],t)},mathmlBuilder(e,t){var r,n=DY(e.label);if(n.setAttribute("minsize","x"===e.label.charAt(0)?"1.75em":"3.0em"),e.body){var i=qY(MY(e.body,t));if(e.below){var a=qY(MY(e.below,t));r=new EY.MathNode("munderover",[n,a,i])}else r=new EY.MathNode("mover",[n,i])}else if(e.below){var s=qY(MY(e.below,t));r=new EY.MathNode("munder",[n,s])}else r=qY(),r=new EY.MathNode("mover",[n,r]);return r}});var VY=WK.makeSpan;function WY(e,t){var r=dY(e.body,t,!0);return VY([e.mclass],r,t)}function ZY(e,t){var r,n=NY(e.body,t);return"minner"===e.mclass?r=new EY.MathNode("mpadded",n):"mord"===e.mclass?e.isCharacterBox?(r=n[0]).type="mi":r=new EY.MathNode("mi",n):(e.isCharacterBox?(r=n[0]).type="mo":r=new EY.MathNode("mo",n),"mbin"===e.mclass?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):"mpunct"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):"mopen"===e.mclass||"mclose"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0em"):"minner"===e.mclass&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}rY({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:aY(i),isCharacterBox:iZ.isCharacterBox(i)}},htmlBuilder:WY,mathmlBuilder:ZY});var KY=e=>{var t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"!==t.type||"bin"!==t.family&&"rel"!==t.family?"mord":"m"+t.family};rY({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:KY(t[0]),body:aY(t[1]),isCharacterBox:iZ.isCharacterBox(t[1])}}}),rY({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var r,{parser:n,funcName:i}=e,a=t[1],s=t[0];r="\\stackrel"!==i?KY(a):"mrel";var o={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==i,body:aY(a)},l={type:"supsub",mode:s.mode,base:o,sup:"\\underset"===i?null:s,sub:"\\underset"===i?s:null};return{type:"mclass",mode:n.mode,mclass:r,body:[l],isCharacterBox:iZ.isCharacterBox(l)}},htmlBuilder:WY,mathmlBuilder:ZY}),rY({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:KY(t[0]),body:aY(t[0])}},htmlBuilder(e,t){var r=dY(e.body,t,!0),n=WK.makeSpan([e.mclass],r,t);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(e,t){var r=NY(e.body,t),n=new EY.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var YY={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},JY=()=>({type:"styling",body:[],mode:"math",style:"display"}),XY=e=>"textord"===e.type&&"@"===e.text,QY=(e,t)=>("mathord"===e.type||"atom"===e.type)&&e.text===t;function eJ(e,t,r){var n=YY[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":var i={type:"atom",text:n,mode:"math",family:"rel"},a={type:"ordgroup",mode:"math",body:[r.callFunction("\\\\cdleft",[t[0]],[]),r.callFunction("\\Big",[i],[]),r.callFunction("\\\\cdright",[t[1]],[])]};return r.callFunction("\\\\cdparent",[a],[]);case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return r.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}rY({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),n=WK.wrapFragment(vY(e.label,r,t),t);return n.classes.push("cd-label-"+e.side),n.style.bottom=DZ(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(e,t){var r=new EY.MathNode("mrow",[MY(e.label,t)]);return(r=new EY.MathNode("mpadded",[r])).setAttribute("width","0"),"left"===e.side&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),(r=new EY.MathNode("mstyle",[r])).setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}}),rY({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=WK.wrapFragment(vY(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder:(e,t)=>new EY.MathNode("mrow",[MY(e.fragment,t)])}),rY({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,n=zY(t[0],"ordgroup").body,i="",a=0;a<n.length;a++){i+=zY(n[a],"textord").text}var s,o=parseInt(i);if(isNaN(o))throw new QW("\\@char has non-numeric argument "+i);if(o<0||o>=1114111)throw new QW("\\@char with invalid code point "+i);return o<=65535?s=String.fromCharCode(o):(o-=65536,s=String.fromCharCode(55296+(o>>10),56320+(1023&o))),{type:"textord",mode:r.mode,text:s}}});var tJ=(e,t)=>{var r=dY(e.body,t.withColor(e.color),!1);return WK.makeFragment(r)},rJ=(e,t)=>{var r=NY(e.body,t.withColor(e.color)),n=new EY.MathNode("mstyle",r);return n.setAttribute("mathcolor",e.color),n};rY({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,n=zY(t[0],"color-token").color,i=t[1];return{type:"color",mode:r.mode,color:n,body:aY(i)}},htmlBuilder:tJ,mathmlBuilder:rJ}),rY({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:n}=e,i=zY(t[0],"color-token").color;r.gullet.macros.set("\\current@color",i);var a=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:i,body:a}},htmlBuilder:tJ,mathmlBuilder:rJ}),rY({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:n}=e,i="["===n.gullet.future().text?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:i&&zY(i,"size").value}},htmlBuilder(e,t){var r=WK.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=DZ(PZ(e.size,t)))),r},mathmlBuilder(e,t){var r=new EY.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",DZ(PZ(e.size,t)))),r}});var nJ={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},iJ=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new QW("Expected a control sequence",e);return t},aJ=(e,t,r,n)=>{var i=e.gullet.macros.get(r.text);null==i&&(r.noexpand=!0,i={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,i,n)};rY({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var n=t.fetch();if(nJ[n.text])return"\\global"!==r&&"\\\\globallong"!==r||(n.text=nJ[n.text]),zY(t.parseFunction(),"internal");throw new QW("Invalid token after macro prefix",n)}}),rY({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=t.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new QW("Expected a control sequence",n);for(var a,s=0,o=[[]];"{"!==t.gullet.future().text;)if("#"===(n=t.gullet.popToken()).text){if("{"===t.gullet.future().text){a=t.gullet.future(),o[s].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new QW('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==s+1)throw new QW('Argument number "'+n.text+'" out of order');s++,o.push([])}else{if("EOF"===n.text)throw new QW("Expected a macro definition");o[s].push(n.text)}var{tokens:l}=t.gullet.consumeArg();return a&&l.unshift(a),"\\edef"!==r&&"\\xdef"!==r||(l=t.gullet.expandTokens(l)).reverse(),t.gullet.macros.set(i,{tokens:l,numArgs:s,delimiters:o},r===nJ[r]),{type:"internal",mode:t.mode}}}),rY({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=iJ(t.gullet.popToken());t.gullet.consumeSpaces();var i=(e=>{var t=e.gullet.popToken();return"="===t.text&&" "===(t=e.gullet.popToken()).text&&(t=e.gullet.popToken()),t})(t);return aJ(t,n,i,"\\\\globallet"===r),{type:"internal",mode:t.mode}}}),rY({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=iJ(t.gullet.popToken()),i=t.gullet.popToken(),a=t.gullet.popToken();return aJ(t,n,a,"\\\\globalfuture"===r),t.gullet.pushToken(a),t.gullet.pushToken(i),{type:"internal",mode:t.mode}}});var sJ=function(e,t,r){var n=TZ(eK.math[e]&&eK.math[e].replace||e,t,r);if(!n)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return n},oJ=function(e,t,r,n){var i=r.havingBaseStyle(t),a=WK.makeSpan(n.concat(i.sizingClasses(r)),[e],r),s=i.sizeMultiplier/r.sizeMultiplier;return a.height*=s,a.depth*=s,a.maxFontSize=i.sizeMultiplier,a},lJ=function(e,t,r){var n=t.havingBaseStyle(r),i=(1-t.sizeMultiplier/n.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=DZ(i),e.height-=i,e.depth+=i},cJ=function(e,t,r,n,i,a){var s=function(e,t,r,n){return WK.makeSymbol(e,"Size"+t+"-Regular",r,n)}(e,t,i,n),o=oJ(WK.makeSpan(["delimsizing","size"+t],[s],n),gZ.TEXT,n,a);return r&&lJ(o,n,gZ.TEXT),o},uJ=function(e,t,r){var n;return n="Size1-Regular"===t?"delim-size1":"delim-size4",{type:"elem",elem:WK.makeSpan(["delimsizinginner",n],[WK.makeSpan([],[WK.makeSymbol(e,t,r)])])}},dJ=function(e,t,r){var n=EZ["Size4-Regular"][e.charCodeAt(0)]?EZ["Size4-Regular"][e.charCodeAt(0)][4]:EZ["Size1-Regular"][e.charCodeAt(0)][4],i=new KZ("inner",function(e,t){switch(e){case"":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145zM367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z";case"":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257zM478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z";default:return""}}(e,Math.round(1e3*t))),a=new ZZ([i],{width:DZ(n),height:DZ(t),style:"width:"+DZ(n),viewBox:"0 0 "+1e3*n+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),s=WK.makeSvgSpan([],[a],r);return s.height=t,s.style.height=DZ(t),s.style.width=DZ(n),{type:"elem",elem:s}},hJ={type:"kern",size:-.008},pJ=["|","\\lvert","\\rvert","\\vert"],fJ=["\\|","\\lVert","\\rVert","\\Vert"],mJ=function(e,t,r,n,i,a){var s,o,l,c,u="",d=0;s=l=c=e,o=null;var h="Size1-Regular";"\\uparrow"===e?l=c="":"\\Uparrow"===e?l=c="":"\\downarrow"===e?s=l="":"\\Downarrow"===e?s=l="":"\\updownarrow"===e?(s="\\uparrow",l="",c="\\downarrow"):"\\Updownarrow"===e?(s="\\Uparrow",l="",c="\\Downarrow"):pJ.includes(e)?(l="",u="vert",d=333):fJ.includes(e)?(l="",u="doublevert",d=556):"["===e||"\\lbrack"===e?(s="",l="",c="",h="Size4-Regular",u="lbrack",d=667):"]"===e||"\\rbrack"===e?(s="",l="",c="",h="Size4-Regular",u="rbrack",d=667):"\\lfloor"===e||""===e?(l=s="",c="",h="Size4-Regular",u="lfloor",d=667):"\\lceil"===e||""===e?(s="",l=c="",h="Size4-Regular",u="lceil",d=667):"\\rfloor"===e||""===e?(l=s="",c="",h="Size4-Regular",u="rfloor",d=667):"\\rceil"===e||""===e?(s="",l=c="",h="Size4-Regular",u="rceil",d=667):"("===e||"\\lparen"===e?(s="",l="",c="",h="Size4-Regular",u="lparen",d=875):")"===e||"\\rparen"===e?(s="",l="",c="",h="Size4-Regular",u="rparen",d=875):"\\{"===e||"\\lbrace"===e?(s="",o="",c="",l="",h="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(s="",o="",c="",l="",h="Size4-Regular"):"\\lgroup"===e||""===e?(s="",c="",l="",h="Size4-Regular"):"\\rgroup"===e||""===e?(s="",c="",l="",h="Size4-Regular"):"\\lmoustache"===e||""===e?(s="",c="",l="",h="Size4-Regular"):"\\rmoustache"!==e&&""!==e||(s="",c="",l="",h="Size4-Regular");var p=sJ(s,h,i),f=p.height+p.depth,m=sJ(l,h,i),g=m.height+m.depth,v=sJ(c,h,i),y=v.height+v.depth,b=0,_=1;if(null!==o){var w=sJ(o,h,i);b=w.height+w.depth,_=2}var x=f+y+b,E=x+Math.max(0,Math.ceil((t-x)/(_*g)))*_*g,k=n.fontMetrics().axisHeight;r&&(k*=n.sizeMultiplier);var S=E/2-k,A=[];if(u.length>0){var T=E-f-y,N=Math.round(1e3*E),I=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+" v1759 h347 v-84\nH403z M403 1759 V0 H319 V1759 v"+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+" v1759 H0 v84 H347z\nM347 1759 V0 H263 V1759 v"+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+t+" v585 h43z\nM367 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M410 15 H367 v585 v"+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+" v1715 h263 v84 H319z\nMM319 602 V0 H403 V602 v"+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+" v1799 H0 v-84 H319z\nMM319 602 V0 H403 V602 v"+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+" v602 h84z\nM403 1759 V0 H319 V1759 v"+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+" v602 h84z\nM347 1759 V0 h-84 V1759 v"+t+" v602 h84z";case"lparen":return"M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1\nc-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,\n-36,557 l0,"+(t+84)+"c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,\n949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9\nc0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,\n-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189\nl0,-"+(t+92)+"c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,\n-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z";case"rparen":return"M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,\n63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5\nc11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,"+(t+9)+"\nc-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664\nc-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11\nc0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17\nc242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558\nl0,-"+(t+144)+"c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,\n-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z";default:throw new Error("Unknown stretchy delimiter.")}}(u,Math.round(1e3*T)),M=new KZ(u,I),C=(d/1e3).toFixed(3)+"em",j=(N/1e3).toFixed(3)+"em",O=new ZZ([M],{width:C,height:j,viewBox:"0 0 "+d+" "+N}),R=WK.makeSvgSpan([],[O],n);R.height=N/1e3,R.style.width=C,R.style.height=j,A.push({type:"elem",elem:R})}else{if(A.push(uJ(c,h,i)),A.push(hJ),null===o){var L=E-f-y+.016;A.push(dJ(l,L,n))}else{var P=(E-f-y-b)/2+.016;A.push(dJ(l,P,n)),A.push(hJ),A.push(uJ(o,h,i)),A.push(hJ),A.push(dJ(l,P,n))}A.push(hJ),A.push(uJ(s,h,i))}var D=n.havingBaseStyle(gZ.TEXT),$=WK.makeVList({positionType:"bottom",positionData:S,children:A},D);return oJ(WK.makeSpan(["delimsizing","mult"],[$],D),gZ.TEXT,n,a)},gJ=.08,vJ=function(e,t,r,n,i){var a=function(e,t,r){t*=1e3;var n="";switch(e){case"sqrtMain":n=function(e){return"M95,"+(622+e+_Z)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+e/2.075+" -"+e+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+e)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+e)+" "+_Z+"h400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize1":n=function(e){return"M263,"+(601+e+_Z)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+e/2.084+" -"+e+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+e)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+e)+" "+_Z+"h400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize2":n=function(e){return"M983 "+(10+e+_Z)+"\nl"+e/3.13+" -"+e+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+e)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+e)+" "+_Z+"h400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize3":n=function(e){return"M424,"+(2398+e+_Z)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+e/4.223+" -"+e+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+e)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+e)+" "+_Z+"\nh400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize4":n=function(e){return"M473,"+(2713+e+_Z)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+e/5.298+" -"+e+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+e)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+e)+" "+_Z+"h400000v"+(40+e)+"H1017.7z"}(t);break;case"sqrtTall":n=function(e,t,r){return"M702 "+(e+_Z)+"H400000"+(40+e)+"\nH742v"+(r-54-_Z-e)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+_Z+"H400000v"+(40+e)+"H742z"}(t,0,r)}return n}(e,n,r),s=new KZ(e,a),o=new ZZ([s],{width:"400em",height:DZ(t),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return WK.makeSvgSpan(["hide-tail"],[o],i)},yJ=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],bJ=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],_J=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],wJ=[0,1.2,1.8,2.4,3],xJ=[{type:"small",style:gZ.SCRIPTSCRIPT},{type:"small",style:gZ.SCRIPT},{type:"small",style:gZ.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],EJ=[{type:"small",style:gZ.SCRIPTSCRIPT},{type:"small",style:gZ.SCRIPT},{type:"small",style:gZ.TEXT},{type:"stack"}],kJ=[{type:"small",style:gZ.SCRIPTSCRIPT},{type:"small",style:gZ.SCRIPT},{type:"small",style:gZ.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],SJ=function(e){if("small"===e.type)return"Main-Regular";if("large"===e.type)return"Size"+e.size+"-Regular";if("stack"===e.type)return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},AJ=function(e,t,r,n){for(var i=Math.min(2,3-n.style.size);i<r.length&&"stack"!==r[i].type;i++){var a=sJ(e,SJ(r[i]),"math"),s=a.height+a.depth;if("small"===r[i].type&&(s*=n.havingBaseStyle(r[i].style).sizeMultiplier),s>t)return r[i]}return r[r.length-1]},TJ=function(e,t,r,n,i,a){var s;"<"===e||"\\lt"===e||""===e?e="\\langle":">"!==e&&"\\gt"!==e&&""!==e||(e="\\rangle"),s=_J.includes(e)?xJ:yJ.includes(e)?kJ:EJ;var o=AJ(e,t,s,n);return"small"===o.type?function(e,t,r,n,i,a){var s=WK.makeSymbol(e,"Main-Regular",i,n),o=oJ(s,t,n,a);return r&&lJ(o,n,t),o}(e,o.style,r,n,i,a):"large"===o.type?cJ(e,o.size,r,n,i,a):mJ(e,t,r,n,i,a)},NJ={sqrtImage:function(e,t){var r,n,i=t.havingBaseSizing(),a=AJ("\\surd",e*i.sizeMultiplier,kJ,i),s=i.sizeMultiplier,o=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),l=0,c=0,u=0;return"small"===a.type?(e<1?s=1:e<1.4&&(s=.7),c=(1+o)/s,(r=vJ("sqrtMain",l=(1+o+gJ)/s,u=1e3+1e3*o+80,o,t)).style.minWidth="0.853em",n=.833/s):"large"===a.type?(u=1080*wJ[a.size],c=(wJ[a.size]+o)/s,l=(wJ[a.size]+o+gJ)/s,(r=vJ("sqrtSize"+a.size,l,u,o,t)).style.minWidth="1.02em",n=1/s):(l=e+o+gJ,c=e+o,u=Math.floor(1e3*e+o)+80,(r=vJ("sqrtTall",l,u,o,t)).style.minWidth="0.742em",n=1.056),r.height=c,r.style.height=DZ(l),{span:r,advanceWidth:n,ruleWidth:(t.fontMetrics().sqrtRuleThickness+o)*s}},sizedDelim:function(e,t,r,n,i){if("<"===e||"\\lt"===e||""===e?e="\\langle":">"!==e&&"\\gt"!==e&&""!==e||(e="\\rangle"),yJ.includes(e)||_J.includes(e))return cJ(e,t,!1,r,n,i);if(bJ.includes(e))return mJ(e,wJ[t],!1,r,n,i);throw new QW("Illegal delimiter: '"+e+"'")},sizeToMaxHeight:wJ,customSizedDelim:TJ,leftRightDelim:function(e,t,r,n,i,a){var s=n.fontMetrics().axisHeight*n.sizeMultiplier,o=5/n.fontMetrics().ptPerEm,l=Math.max(t-s,r+s),c=Math.max(l/500*901,2*l-o);return TJ(e,c,!0,n,i,a)}},IJ={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},MJ=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function CJ(e,t){var r=UY(e);if(r&&MJ.includes(r.text))return r;throw new QW(r?"Invalid delimiter '"+r.text+"' after '"+t.funcName+"'":"Invalid delimiter type '"+e.type+"'",e)}function jJ(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}rY({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=CJ(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:IJ[e.funcName].size,mclass:IJ[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>"."===e.delim?WK.makeSpan([e.mclass]):NJ.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];"."!==e.delim&&t.push(kY(e.delim,e.mode));var r=new EY.MathNode("mo",t);"mopen"===e.mclass||"mclose"===e.mclass?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=DZ(NJ.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}}),rY({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&"string"!=typeof r)throw new QW("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:CJ(t[0],e).text,color:r}}}),rY({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=CJ(t[0],e),n=e.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=zY(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:r.text,right:a.delim,rightColor:a.color}},htmlBuilder:(e,t)=>{jJ(e);for(var r,n,i=dY(e.body,t,!0,["mopen","mclose"]),a=0,s=0,o=!1,l=0;l<i.length;l++)i[l].isMiddle?o=!0:(a=Math.max(i[l].height,a),s=Math.max(i[l].depth,s));if(a*=t.sizeMultiplier,s*=t.sizeMultiplier,r="."===e.left?gY(t,["mopen"]):NJ.leftRightDelim(e.left,a,s,t,e.mode,["mopen"]),i.unshift(r),o)for(var c=1;c<i.length;c++){var u=i[c].isMiddle;u&&(i[c]=NJ.leftRightDelim(u.delim,a,s,u.options,e.mode,[]))}if("."===e.right)n=gY(t,["mclose"]);else{var d=e.rightColor?t.withColor(e.rightColor):t;n=NJ.leftRightDelim(e.right,a,s,d,e.mode,["mclose"])}return i.push(n),WK.makeSpan(["minner"],i,t)},mathmlBuilder:(e,t)=>{jJ(e);var r=NY(e.body,t);if("."!==e.left){var n=new EY.MathNode("mo",[kY(e.left,e.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if("."!==e.right){var i=new EY.MathNode("mo",[kY(e.right,e.mode)]);i.setAttribute("fence","true"),e.rightColor&&i.setAttribute("mathcolor",e.rightColor),r.push(i)}return SY(r)}}),rY({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=CJ(t[0],e);if(!e.parser.leftrightDepth)throw new QW("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if("."===e.delim)r=gY(t,[]);else{r=NJ.sizedDelim(e.delim,1,t,e.mode,[]);var n={delim:e.delim,options:t};r.isMiddle=n}return r},mathmlBuilder:(e,t)=>{var r="\\vert"===e.delim||"|"===e.delim?kY("|","text"):kY(e.delim,e.mode),n=new EY.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var OJ=(e,t)=>{var r,n,i=WK.wrapFragment(vY(e.body,t),t),a=e.label.slice(1),s=t.sizeMultiplier,o=0,l=iZ.isCharacterBox(e.body);if("sout"===a)(r=WK.makeSpan(["stretchy","sout"])).height=t.fontMetrics().defaultRuleThickness/s,o=-.5*t.fontMetrics().xHeight;else if("phase"===a){var c=PZ({number:.6,unit:"pt"},t),u=PZ({number:.35,unit:"ex"},t);s/=t.havingBaseSizing().sizeMultiplier;var d=i.height+i.depth+c+u;i.style.paddingLeft=DZ(d/2+c);var h=Math.floor(1e3*d*s),p=function(e){return"M400000 "+e+" H0 L"+e/2+" 0 l65 45 L145 "+(e-80)+" H400000z"}(h),f=new ZZ([new KZ("phase",p)],{width:"400em",height:DZ(h/1e3),viewBox:"0 0 400000 "+h,preserveAspectRatio:"xMinYMin slice"});(r=WK.makeSvgSpan(["hide-tail"],[f],t)).style.height=DZ(d),o=i.depth+c+u}else{/cancel/.test(a)?l||i.classes.push("cancel-pad"):"angl"===a?i.classes.push("anglpad"):i.classes.push("boxpad");var m=0,g=0,v=0;/box/.test(a)?(v=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),g=m=t.fontMetrics().fboxsep+("colorbox"===a?0:v)):"angl"===a?(m=4*(v=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness)),g=Math.max(0,.25-i.depth)):g=m=l?.2:0,r=PY(i,a,m,g,t),/fbox|boxed|fcolorbox/.test(a)?(r.style.borderStyle="solid",r.style.borderWidth=DZ(v)):"angl"===a&&.049!==v&&(r.style.borderTopWidth=DZ(v),r.style.borderRightWidth=DZ(v)),o=i.depth+g,e.backgroundColor&&(r.style.backgroundColor=e.backgroundColor,e.borderColor&&(r.style.borderColor=e.borderColor))}if(e.backgroundColor)n=WK.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:o},{type:"elem",elem:i,shift:0}]},t);else{var y=/cancel|phase/.test(a)?["svg-align"]:[];n=WK.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:0},{type:"elem",elem:r,shift:o,wrapperClasses:y}]},t)}return/cancel/.test(a)&&(n.height=i.height,n.depth=i.depth),/cancel/.test(a)&&!l?WK.makeSpan(["mord","cancel-lap"],[n],t):WK.makeSpan(["mord"],[n],t)},RJ=(e,t)=>{var r=0,n=new EY.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[MY(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),"\\fcolorbox"===e.label){var i=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};rY({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:n,funcName:i}=e,a=zY(t[0],"color-token").color,s=t[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:a,body:s}},htmlBuilder:OJ,mathmlBuilder:RJ}),rY({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:n,funcName:i}=e,a=zY(t[0],"color-token").color,s=zY(t[1],"color-token").color,o=t[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,borderColor:a,body:o}},htmlBuilder:OJ,mathmlBuilder:RJ}),rY({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}}),rY({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];return{type:"enclose",mode:r.mode,label:n,body:i}},htmlBuilder:OJ,mathmlBuilder:RJ}),rY({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var LJ={};function PJ(e){for(var{type:t,names:r,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=e,o={type:t,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<r.length;++l)LJ[r[l]]=o;a&&(eY[t]=a),s&&(tY[t]=s)}var DJ={};function $J(e,t){DJ[e]=t}function zJ(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for("\\relax"===r&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);"\\hline"===r||"\\hdashline"===r;)e.consume(),t.push("\\hdashline"===r),e.consumeSpaces(),r=e.fetch().text;return t}var BJ=e=>{if(!e.parser.settings.displayMode)throw new QW("{"+e.envName+"} can be used only in display mode.")};function UJ(e){if(-1===e.indexOf("ed"))return-1===e.indexOf("*")}function FJ(e,t,r){var{hskipBeforeAndAfter:n,addJot:i,cols:a,arraystretch:s,colSeparationType:o,autoTag:l,singleRow:c,emptySingleRow:u,maxNumCols:d,leqno:h}=t;if(e.gullet.beginGroup(),c||e.gullet.macros.set("\\cr","\\\\\\relax"),!s){var p=e.gullet.expandMacroAsText("\\arraystretch");if(null==p)s=1;else if(!(s=parseFloat(p))||s<0)throw new QW("Invalid \\arraystretch: "+p)}e.gullet.beginGroup();var f=[],m=[f],g=[],v=[],y=null!=l?[]:void 0;function b(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function _(){y&&(e.gullet.macros.get("\\df@tag")?(y.push(e.subparse([new XW("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):y.push(Boolean(l)&&"1"===e.gullet.macros.get("\\@eqnsw")))}for(b(),v.push(zJ(e));;){var w=e.parseExpression(!1,c?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),w={type:"ordgroup",mode:e.mode,body:w},r&&(w={type:"styling",mode:e.mode,style:r,body:[w]}),f.push(w);var x=e.fetch().text;if("&"===x){if(d&&f.length===d){if(c||o)throw new QW("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else{if("\\end"===x){_(),1===f.length&&"styling"===w.type&&0===w.body[0].body.length&&(m.length>1||!u)&&m.pop(),v.length<m.length+1&&v.push([]);break}if("\\\\"!==x)throw new QW("Expected & or \\\\ or \\cr or \\end",e.nextToken);e.consume();var E=void 0;" "!==e.gullet.future().text&&(E=e.parseSizeGroup(!0)),g.push(E?E.value:null),_(),v.push(zJ(e)),f=[],m.push(f),b()}}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:i,arraystretch:s,body:m,cols:a,rowGaps:g,hskipBeforeAndAfter:n,hLinesBeforeRow:v,colSeparationType:o,tags:y,leqno:h}}function HJ(e){return"d"===e.slice(0,1)?"display":"text"}var GJ=function(e,t){var r,n,i=e.body.length,a=e.hLinesBeforeRow,s=0,o=new Array(i),l=[],c=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),u=1/t.fontMetrics().ptPerEm,d=5*u;e.colSeparationType&&"small"===e.colSeparationType&&(d=t.havingStyle(gZ.SCRIPT).sizeMultiplier/t.sizeMultiplier*.2778);var h="CD"===e.colSeparationType?PZ({number:3,unit:"ex"},t):12*u,p=3*u,f=e.arraystretch*h,m=.7*f,g=.3*f,v=0;function y(e){for(var t=0;t<e.length;++t)t>0&&(v+=.25),l.push({pos:v,isDashed:e[t]})}for(y(a[0]),r=0;r<e.body.length;++r){var b=e.body[r],_=m,w=g;s<b.length&&(s=b.length);var x=new Array(b.length);for(n=0;n<b.length;++n){var E=vY(b[n],t);w<E.depth&&(w=E.depth),_<E.height&&(_=E.height),x[n]=E}var k=e.rowGaps[r],S=0;k&&(S=PZ(k,t))>0&&(w<(S+=g)&&(w=S),S=0),e.addJot&&(w+=p),x.height=_,x.depth=w,v+=_,x.pos=v,v+=w+S,o[r]=x,y(a[r+1])}var A,T,N=v/2+t.fontMetrics().axisHeight,I=e.cols||[],M=[],C=[];if(e.tags&&e.tags.some(e=>e))for(r=0;r<i;++r){var j=o[r],O=j.pos-N,R=e.tags[r],L=void 0;(L=!0===R?WK.makeSpan(["eqn-num"],[],t):!1===R?WK.makeSpan([],[],t):WK.makeSpan([],dY(R,t,!0),t)).depth=j.depth,L.height=j.height,C.push({type:"elem",elem:L,shift:O})}for(n=0,T=0;n<s||T<I.length;++n,++T){for(var P=I[T]||{},D=!0;"separator"===P.type;){if(D||((A=WK.makeSpan(["arraycolsep"],[])).style.width=DZ(t.fontMetrics().doubleRuleSep),M.push(A)),"|"!==P.separator&&":"!==P.separator)throw new QW("Invalid separator type: "+P.separator);var $="|"===P.separator?"solid":"dashed",z=WK.makeSpan(["vertical-separator"],[],t);z.style.height=DZ(v),z.style.borderRightWidth=DZ(c),z.style.borderRightStyle=$,z.style.margin="0 "+DZ(-c/2);var B=v-N;B&&(z.style.verticalAlign=DZ(-B)),M.push(z),P=I[++T]||{},D=!1}if(!(n>=s)){var U=void 0;(n>0||e.hskipBeforeAndAfter)&&0!==(U=iZ.deflt(P.pregap,d))&&((A=WK.makeSpan(["arraycolsep"],[])).style.width=DZ(U),M.push(A));var F=[];for(r=0;r<i;++r){var H=o[r],G=H[n];if(G){var q=H.pos-N;G.depth=H.depth,G.height=H.height,F.push({type:"elem",elem:G,shift:q})}}F=WK.makeVList({positionType:"individualShift",children:F},t),F=WK.makeSpan(["col-align-"+(P.align||"c")],[F]),M.push(F),(n<s-1||e.hskipBeforeAndAfter)&&0!==(U=iZ.deflt(P.postgap,d))&&((A=WK.makeSpan(["arraycolsep"],[])).style.width=DZ(U),M.push(A))}}if(o=WK.makeSpan(["mtable"],M),l.length>0){for(var V=WK.makeLineSpan("hline",t,c),W=WK.makeLineSpan("hdashline",t,c),Z=[{type:"elem",elem:o,shift:0}];l.length>0;){var K=l.pop(),Y=K.pos-N;K.isDashed?Z.push({type:"elem",elem:W,shift:Y}):Z.push({type:"elem",elem:V,shift:Y})}o=WK.makeVList({positionType:"individualShift",children:Z},t)}if(0===C.length)return WK.makeSpan(["mord"],[o],t);var J=WK.makeVList({positionType:"individualShift",children:C},t);return J=WK.makeSpan(["tag"],[J],t),WK.makeFragment([o,J])},qJ={c:"center ",l:"left ",r:"right "},VJ=function(e,t){for(var r=[],n=new EY.MathNode("mtd",[],["mtr-glue"]),i=new EY.MathNode("mtd",[],["mml-eqn-num"]),a=0;a<e.body.length;a++){for(var s=e.body[a],o=[],l=0;l<s.length;l++)o.push(new EY.MathNode("mtd",[MY(s[l],t)]));e.tags&&e.tags[a]&&(o.unshift(n),o.push(n),e.leqno?o.unshift(i):o.push(i)),r.push(new EY.MathNode("mtr",o))}var c=new EY.MathNode("mtable",r),u=.5===e.arraystretch?.1:.16+e.arraystretch-1+(e.addJot?.09:0);c.setAttribute("rowspacing",DZ(u));var d="",h="";if(e.cols&&e.cols.length>0){var p=e.cols,f="",m=!1,g=0,v=p.length;"separator"===p[0].type&&(d+="top ",g=1),"separator"===p[p.length-1].type&&(d+="bottom ",v-=1);for(var y=g;y<v;y++)"align"===p[y].type?(h+=qJ[p[y].align],m&&(f+="none "),m=!0):"separator"===p[y].type&&m&&(f+="|"===p[y].separator?"solid ":"dashed ",m=!1);c.setAttribute("columnalign",h.trim()),/[sd]/.test(f)&&c.setAttribute("columnlines",f.trim())}if("align"===e.colSeparationType){for(var b=e.cols||[],_="",w=1;w<b.length;w++)_+=w%2?"0em ":"1em ";c.setAttribute("columnspacing",_.trim())}else"alignat"===e.colSeparationType||"gather"===e.colSeparationType?c.setAttribute("columnspacing","0em"):"small"===e.colSeparationType?c.setAttribute("columnspacing","0.2778em"):"CD"===e.colSeparationType?c.setAttribute("columnspacing","0.5em"):c.setAttribute("columnspacing","1em");var x="",E=e.hLinesBeforeRow;d+=E[0].length>0?"left ":"",d+=E[E.length-1].length>0?"right ":"";for(var k=1;k<E.length-1;k++)x+=0===E[k].length?"none ":E[k][0]?"dashed ":"solid ";return/[sd]/.test(x)&&c.setAttribute("rowlines",x.trim()),""!==d&&(c=new EY.MathNode("menclose",[c])).setAttribute("notation",d.trim()),e.arraystretch&&e.arraystretch<1&&(c=new EY.MathNode("mstyle",[c])).setAttribute("scriptlevel","1"),c},WJ=function(e,t){-1===e.envName.indexOf("ed")&&BJ(e);var r,n=[],i=e.envName.indexOf("at")>-1?"alignat":"align",a="split"===e.envName,s=FJ(e.parser,{cols:n,addJot:!0,autoTag:a?void 0:UJ(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:a?2:void 0,leqno:e.parser.settings.leqno},"display"),o=0,l={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&"ordgroup"===t[0].type){for(var c="",u=0;u<t[0].body.length;u++){c+=zY(t[0].body[u],"textord").text}r=Number(c),o=2*r}var d=!o;s.body.forEach(function(e){for(var t=1;t<e.length;t+=2){var n=zY(e[t],"styling");zY(n.body[0],"ordgroup").body.unshift(l)}if(d)o<e.length&&(o=e.length);else{var i=e.length/2;if(r<i)throw new QW("Too many math in a row: expected "+r+", but got "+i,e[0])}});for(var h=0;h<o;++h){var p="r",f=0;h%2==1?p="l":h>0&&d&&(f=1),n[h]={type:"align",align:p,pregap:f,postgap:0}}return s.colSeparationType=d?"align":"alignat",s};PJ({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=(UY(t[0])?[t[0]]:zY(t[0],"ordgroup").body).map(function(e){var t=BY(e).text;if(-1!=="lcr".indexOf(t))return{type:"align",align:t};if("|"===t)return{type:"separator",separator:"|"};if(":"===t)return{type:"separator",separator:":"};throw new QW("Unknown column alignment: "+t,e)}),n={cols:r,hskipBeforeAndAfter:!0,maxNumCols:r.length};return FJ(e.parser,n,HJ(e.envName))},htmlBuilder:GJ,mathmlBuilder:VJ}),PJ({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if("*"===e.envName.charAt(e.envName.length-1)){var i=e.parser;if(i.consumeSpaces(),"["===i.fetch().text){if(i.consume(),i.consumeSpaces(),r=i.fetch().text,-1==="lcr".indexOf(r))throw new QW("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:r}]}}var a=FJ(e.parser,n,HJ(e.envName)),s=Math.max(0,...a.body.map(e=>e.length));return a.cols=new Array(s).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:GJ,mathmlBuilder:VJ}),PJ({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t=FJ(e.parser,{arraystretch:.5},"script");return t.colSeparationType="small",t},htmlBuilder:GJ,mathmlBuilder:VJ}),PJ({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=(UY(t[0])?[t[0]]:zY(t[0],"ordgroup").body).map(function(e){var t=BY(e).text;if(-1!=="lc".indexOf(t))return{type:"align",align:t};throw new QW("Unknown column alignment: "+t,e)});if(r.length>1)throw new QW("{subarray} can contain only one column");var n={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if((n=FJ(e.parser,n,"script")).body.length>0&&n.body[0].length>1)throw new QW("{subarray} can contain only one column");return n},htmlBuilder:GJ,mathmlBuilder:VJ}),PJ({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t=FJ(e.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},HJ(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:GJ,mathmlBuilder:VJ}),PJ({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:WJ,htmlBuilder:GJ,mathmlBuilder:VJ}),PJ({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&BJ(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:UJ(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return FJ(e.parser,t,"display")},htmlBuilder:GJ,mathmlBuilder:VJ}),PJ({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:WJ,htmlBuilder:GJ,mathmlBuilder:VJ}),PJ({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){BJ(e);var t={autoTag:UJ(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return FJ(e.parser,t,"display")},htmlBuilder:GJ,mathmlBuilder:VJ}),PJ({type:"array",names:["CD"],props:{numArgs:0},handler:e=>(BJ(e),function(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if("&"!==r&&"\\\\"!==r){if("\\end"===r){0===t[t.length-1].length&&t.pop();break}throw new QW("Expected \\\\ or \\cr or \\end",e.nextToken)}e.consume()}for(var n=[],i=[n],a=0;a<t.length;a++){for(var s=t[a],o=JY(),l=0;l<s.length;l++)if(XY(s[l])){n.push(o);var c=BY(s[l+=1]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(c)>-1);else{if(!("<>AV".indexOf(c)>-1))throw new QW('Expected one of "<>AV=|." after @',s[l]);for(var d=0;d<2;d++){for(var h=!0,p=l+1;p<s.length;p++){if(QY(s[p],c)){h=!1,l=p;break}if(XY(s[p]))throw new QW("Missing a "+c+" character to complete a CD arrow.",s[p]);u[d].body.push(s[p])}if(h)throw new QW("Missing a "+c+" character to complete a CD arrow.",s[l])}}var f={type:"styling",body:[eJ(c,u,e)],mode:"math",style:"display"};n.push(f),o=JY()}else o.body.push(s[l]);a%2==0?n.push(o):n.shift(),n=[],i.push(n)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25}),colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}(e.parser)),htmlBuilder:GJ,mathmlBuilder:VJ}),$J("\\nonumber","\\gdef\\@eqnsw{0}"),$J("\\notag","\\nonumber"),rY({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new QW(e.funcName+" valid only within array environment")}});var ZJ=LJ;rY({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];if("ordgroup"!==i.type)throw new QW("Invalid environment name",i);for(var a="",s=0;s<i.body.length;++s)a+=zY(i.body[s],"textord").text;if("\\begin"===n){if(!ZJ.hasOwnProperty(a))throw new QW("No such environment: "+a,i);var o=ZJ[a],{args:l,optArgs:c}=r.parseArguments("\\begin{"+a+"}",o),u={mode:r.mode,envName:a,parser:r},d=o.handler(u,l,c);r.expect("\\end",!1);var h=r.nextToken,p=zY(r.parseFunction(),"environment");if(p.name!==a)throw new QW("Mismatch: \\begin{"+a+"} matched by \\end{"+p.name+"}",h);return d}return{type:"environment",mode:r.mode,name:a,nameGroup:i}}});var KJ=(e,t)=>{var r=e.font,n=t.withFont(r);return vY(e.body,n)},YJ=(e,t)=>{var r=e.font,n=t.withFont(r);return MY(e.body,n)},JJ={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};rY({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=iY(t[0]),a=n;return a in JJ&&(a=JJ[a]),{type:"font",mode:r.mode,font:a.slice(1),body:i}},htmlBuilder:KJ,mathmlBuilder:YJ}),rY({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,n=t[0],i=iZ.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:KY(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}}),rY({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,breakOnTokenText:i}=e,{mode:a}=r,s=r.parseExpression(!0,i);return{type:"font",mode:a,font:"math"+n.slice(1),body:{type:"ordgroup",mode:r.mode,body:s}}},htmlBuilder:KJ,mathmlBuilder:YJ});var XJ=(e,t)=>{var r=t;return"display"===e?r=r.id>=gZ.SCRIPT.id?r.text():gZ.DISPLAY:"text"===e&&r.size===gZ.DISPLAY.size?r=gZ.TEXT:"script"===e?r=gZ.SCRIPT:"scriptscript"===e&&(r=gZ.SCRIPTSCRIPT),r},QJ=(e,t)=>{var r,n=XJ(e.size,t.style),i=n.fracNum(),a=n.fracDen();r=t.havingStyle(i);var s=vY(e.numer,r,t);if(e.continued){var o=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;s.height=s.height<o?o:s.height,s.depth=s.depth<l?l:s.depth}r=t.havingStyle(a);var c,u,d,h,p,f,m,g,v,y,b=vY(e.denom,r,t);if(e.hasBarLine?(e.barSize?(u=PZ(e.barSize,t),c=WK.makeLineSpan("frac-line",t,u)):c=WK.makeLineSpan("frac-line",t),u=c.height,d=c.height):(c=null,u=0,d=t.fontMetrics().defaultRuleThickness),n.size===gZ.DISPLAY.size||"display"===e.size?(h=t.fontMetrics().num1,p=u>0?3*d:7*d,f=t.fontMetrics().denom1):(u>0?(h=t.fontMetrics().num2,p=d):(h=t.fontMetrics().num3,p=3*d),f=t.fontMetrics().denom2),c){var _=t.fontMetrics().axisHeight;h-s.depth-(_+.5*u)<p&&(h+=p-(h-s.depth-(_+.5*u))),_-.5*u-(b.height-f)<p&&(f+=p-(_-.5*u-(b.height-f)));var w=-(_-.5*u);m=WK.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:f},{type:"elem",elem:c,shift:w},{type:"elem",elem:s,shift:-h}]},t)}else{var x=h-s.depth-(b.height-f);x<p&&(h+=.5*(p-x),f+=.5*(p-x)),m=WK.makeVList({positionType:"individualShift",children:[{type:"elem",elem:b,shift:f},{type:"elem",elem:s,shift:-h}]},t)}return r=t.havingStyle(n),m.height*=r.sizeMultiplier/t.sizeMultiplier,m.depth*=r.sizeMultiplier/t.sizeMultiplier,g=n.size===gZ.DISPLAY.size?t.fontMetrics().delim1:n.size===gZ.SCRIPTSCRIPT.size?t.havingStyle(gZ.SCRIPT).fontMetrics().delim2:t.fontMetrics().delim2,v=null==e.leftDelim?gY(t,["mopen"]):NJ.customSizedDelim(e.leftDelim,g,!0,t.havingStyle(n),e.mode,["mopen"]),y=e.continued?WK.makeSpan([]):null==e.rightDelim?gY(t,["mclose"]):NJ.customSizedDelim(e.rightDelim,g,!0,t.havingStyle(n),e.mode,["mclose"]),WK.makeSpan(["mord"].concat(r.sizingClasses(t)),[v,WK.makeSpan(["mfrac"],[m]),y],t)},eX=(e,t)=>{var r=new EY.MathNode("mfrac",[MY(e.numer,t),MY(e.denom,t)]);if(e.hasBarLine){if(e.barSize){var n=PZ(e.barSize,t);r.setAttribute("linethickness",DZ(n))}}else r.setAttribute("linethickness","0px");var i=XJ(e.size,t.style);if(i.size!==t.style.size){r=new EY.MathNode("mstyle",[r]);var a=i.size===gZ.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(null!=e.leftDelim||null!=e.rightDelim){var s=[];if(null!=e.leftDelim){var o=new EY.MathNode("mo",[new EY.TextNode(e.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),s.push(o)}if(s.push(r),null!=e.rightDelim){var l=new EY.MathNode("mo",[new EY.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),s.push(l)}return SY(s)}return r};rY({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var r,{parser:n,funcName:i}=e,a=t[0],s=t[1],o=null,l=null,c="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":r=!0;break;case"\\\\atopfrac":r=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":r=!1,o="(",l=")";break;case"\\\\bracefrac":r=!1,o="\\{",l="\\}";break;case"\\\\brackfrac":r=!1,o="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":c="display";break;case"\\tfrac":case"\\tbinom":c="text"}return{type:"genfrac",mode:n.mode,continued:!1,numer:a,denom:s,hasBarLine:r,leftDelim:o,rightDelim:l,size:c,barSize:null}},htmlBuilder:QJ,mathmlBuilder:eX}),rY({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0],a=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:i,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),rY({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var t,{parser:r,funcName:n,token:i}=e;switch(n){case"\\over":t="\\frac";break;case"\\choose":t="\\binom";break;case"\\atop":t="\\\\atopfrac";break;case"\\brace":t="\\\\bracefrac";break;case"\\brack":t="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:r.mode,replaceWith:t,token:i}}});var tX=["display","text","script","scriptscript"],rX=function(e){var t=null;return e.length>0&&(t="."===(t=e)?null:t),t};rY({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var r,{parser:n}=e,i=t[4],a=t[5],s=iY(t[0]),o="atom"===s.type&&"open"===s.family?rX(s.text):null,l=iY(t[1]),c="atom"===l.type&&"close"===l.family?rX(l.text):null,u=zY(t[2],"size"),d=null;r=!!u.isBlank||(d=u.value).number>0;var h="auto",p=t[3];if("ordgroup"===p.type){if(p.body.length>0){var f=zY(p.body[0],"textord");h=tX[Number(f.text)]}}else p=zY(p,"textord"),h=tX[Number(p.text)];return{type:"genfrac",mode:n.mode,numer:i,denom:a,continued:!1,hasBarLine:r,barSize:d,leftDelim:o,rightDelim:c,size:h}},htmlBuilder:QJ,mathmlBuilder:eX}),rY({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:n,token:i}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:zY(t[0],"size").value,token:i}}}),rY({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0],a=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e}(zY(t[1],"infix").size),s=t[2],o=a.number>0;return{type:"genfrac",mode:r.mode,numer:i,denom:s,continued:!1,hasBarLine:o,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:QJ,mathmlBuilder:eX});var nX=(e,t)=>{var r,n,i=t.style;"supsub"===e.type?(r=e.sup?vY(e.sup,t.havingStyle(i.sup()),t):vY(e.sub,t.havingStyle(i.sub()),t),n=zY(e.base,"horizBrace")):n=zY(e,"horizBrace");var a,s=vY(n.base,t.havingBaseStyle(gZ.DISPLAY)),o=$Y(n,t);if(n.isOver?(a=WK.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},t)).children[0].children[0].children[1].classes.push("svg-align"):(a=WK.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},t)).children[0].children[0].children[0].classes.push("svg-align"),r){var l=WK.makeSpan(["mord",n.isOver?"mover":"munder"],[a],t);a=n.isOver?WK.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:r}]},t):WK.makeVList({positionType:"bottom",positionData:l.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return WK.makeSpan(["mord",n.isOver?"mover":"munder"],[a],t)};rY({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:t[0]}},htmlBuilder:nX,mathmlBuilder:(e,t)=>{var r=DY(e.label);return new EY.MathNode(e.isOver?"mover":"munder",[MY(e.base,t),r])}}),rY({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[1],i=zY(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:r.mode,href:i,body:aY(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=dY(e.body,t,!1);return WK.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=IY(e.body,t);return r instanceof wY||(r=new wY("mrow",[r])),r.setAttribute("href",e.href),r}}),rY({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=zY(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var i=[],a=0;a<n.length;a++){var s=n[a];"~"===s&&(s="\\textasciitilde"),i.push({type:"textord",mode:"text",text:s})}var o={type:"text",mode:r.mode,font:"\\texttt",body:i};return{type:"href",mode:r.mode,href:n,body:aY(o)}}}),rY({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:aY(t[0])}},htmlBuilder(e,t){var r=dY(e.body,t,!1);return WK.makeFragment(r)},mathmlBuilder:(e,t)=>new EY.MathNode("mrow",NY(e.body,t))}),rY({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var r,{parser:n,funcName:i,token:a}=e,s=zY(t[0],"raw").string,o=t[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l={};switch(i){case"\\htmlClass":l.class=s,r={command:"\\htmlClass",class:s};break;case"\\htmlId":l.id=s,r={command:"\\htmlId",id:s};break;case"\\htmlStyle":l.style=s,r={command:"\\htmlStyle",style:s};break;case"\\htmlData":for(var c=s.split(","),u=0;u<c.length;u++){var d=c[u].split("=");if(2!==d.length)throw new QW("Error parsing key-value for \\htmlData");l["data-"+d[0].trim()]=d[1].trim()}r={command:"\\htmlData",attributes:l};break;default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(r)?{type:"html",mode:n.mode,attributes:l,body:aY(o)}:n.formatUnsupportedCmd(i)},htmlBuilder:(e,t)=>{var r=dY(e.body,t,!1),n=["enclosing"];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/));var i=WK.makeSpan(n,r,t);for(var a in e.attributes)"class"!==a&&e.attributes.hasOwnProperty(a)&&i.setAttribute(a,e.attributes[a]);return i},mathmlBuilder:(e,t)=>IY(e.body,t)}),rY({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:aY(t[0]),mathml:aY(t[1])}},htmlBuilder:(e,t)=>{var r=dY(e.html,t,!1);return WK.makeFragment(r)},mathmlBuilder:(e,t)=>IY(e.mathml,t)});var iX=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new QW("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(t[1]+t[2]),unit:t[3]};if(!LZ(r))throw new QW("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};rY({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:n}=e,i={number:0,unit:"em"},a={number:.9,unit:"em"},s={number:0,unit:"em"},o="";if(r[0])for(var l=zY(r[0],"raw").string.split(","),c=0;c<l.length;c++){var u=l[c].split("=");if(2===u.length){var d=u[1].trim();switch(u[0].trim()){case"alt":o=d;break;case"width":i=iX(d);break;case"height":a=iX(d);break;case"totalheight":s=iX(d);break;default:throw new QW("Invalid key: '"+u[0]+"' in \\includegraphics.")}}}var h=zY(t[0],"url").url;return""===o&&(o=(o=(o=h).replace(/^.*[\\/]/,"")).substring(0,o.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:h})?{type:"includegraphics",mode:n.mode,alt:o,width:i,height:a,totalheight:s,src:h}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=PZ(e.height,t),n=0;e.totalheight.number>0&&(n=PZ(e.totalheight,t)-r);var i=0;e.width.number>0&&(i=PZ(e.width,t));var a={height:DZ(r+n)};i>0&&(a.width=DZ(i)),n>0&&(a.verticalAlign=DZ(-n));var s=new qZ(e.src,e.alt,a);return s.height=r,s.depth=n,s},mathmlBuilder:(e,t)=>{var r=new EY.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var n=PZ(e.height,t),i=0;if(e.totalheight.number>0&&(i=PZ(e.totalheight,t)-n,r.setAttribute("valign",DZ(-i))),r.setAttribute("height",DZ(n+i)),e.width.number>0){var a=PZ(e.width,t);r.setAttribute("width",DZ(a))}return r.setAttribute("src",e.src),r}}),rY({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,i=zY(t[0],"size");if(r.settings.strict){var a="m"===n[1],s="mu"===i.value.unit;a?(s||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, not "+i.value.unit+" units"),"math"!==r.mode&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):s&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:i.value}},htmlBuilder:(e,t)=>WK.makeGlue(e.dimension,t),mathmlBuilder(e,t){var r=PZ(e.dimension,t);return new EY.SpaceNode(r)}}),rY({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:i}},htmlBuilder:(e,t)=>{var r;"clap"===e.alignment?(r=WK.makeSpan([],[vY(e.body,t)]),r=WK.makeSpan(["inner"],[r],t)):r=WK.makeSpan(["inner"],[vY(e.body,t)]);var n=WK.makeSpan(["fix"],[]),i=WK.makeSpan([e.alignment],[r,n],t),a=WK.makeSpan(["strut"]);return a.style.height=DZ(i.height+i.depth),i.depth&&(a.style.verticalAlign=DZ(-i.depth)),i.children.unshift(a),i=WK.makeSpan(["thinbox"],[i],t),WK.makeSpan(["mord","vbox"],[i],t)},mathmlBuilder:(e,t)=>{var r=new EY.MathNode("mpadded",[MY(e.body,t)]);if("rlap"!==e.alignment){var n="llap"===e.alignment?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}}),rY({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:n}=e,i=n.mode;n.switchMode("math");var a="\\("===r?"\\)":"$",s=n.parseExpression(!1,a);return n.expect(a),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:s}}}),rY({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new QW("Mismatched "+e.funcName)}});var aX=(e,t)=>{switch(t.style.size){case gZ.DISPLAY.size:return e.display;case gZ.TEXT.size:return e.text;case gZ.SCRIPT.size:return e.script;case gZ.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};rY({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:aY(t[0]),text:aY(t[1]),script:aY(t[2]),scriptscript:aY(t[3])}},htmlBuilder:(e,t)=>{var r=aX(e,t),n=dY(r,t,!1);return WK.makeFragment(n)},mathmlBuilder:(e,t)=>{var r=aX(e,t);return IY(r,t)}});var sX=(e,t,r,n,i,a,s)=>{e=WK.makeSpan([],[e]);var o,l,c,u=r&&iZ.isCharacterBox(r);if(t){var d=vY(t,n.havingStyle(i.sup()),n);l={elem:d,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-d.depth)}}if(r){var h=vY(r,n.havingStyle(i.sub()),n);o={elem:h,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-h.height)}}if(l&&o){var p=n.fontMetrics().bigOpSpacing5+o.elem.height+o.elem.depth+o.kern+e.depth+s;c=WK.makeVList({positionType:"bottom",positionData:p,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:o.elem,marginLeft:DZ(-a)},{type:"kern",size:o.kern},{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:DZ(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(o){var f=e.height-s;c=WK.makeVList({positionType:"top",positionData:f,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:o.elem,marginLeft:DZ(-a)},{type:"kern",size:o.kern},{type:"elem",elem:e}]},n)}else{if(!l)return e;var m=e.depth+s;c=WK.makeVList({positionType:"bottom",positionData:m,children:[{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:DZ(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}var g=[c];if(o&&0!==a&&!u){var v=WK.makeSpan(["mspace"],[],n);v.style.marginRight=DZ(a),g.unshift(v)}return WK.makeSpan(["mop","op-limits"],g,n)},oX=["\\smallint"],lX=(e,t)=>{var r,n,i,a=!1;"supsub"===e.type?(r=e.sup,n=e.sub,i=zY(e.base,"op"),a=!0):i=zY(e,"op");var s,o=t.style,l=!1;if(o.size===gZ.DISPLAY.size&&i.symbol&&!oX.includes(i.name)&&(l=!0),i.symbol){var c=l?"Size2-Regular":"Size1-Regular",u="";if("\\oiint"!==i.name&&"\\oiiint"!==i.name||(u=i.name.slice(1),i.name="oiint"===u?"\\iint":"\\iiint"),s=WK.makeSymbol(i.name,c,"math",t,["mop","op-symbol",l?"large-op":"small-op"]),u.length>0){var d=s.italic,h=WK.staticSvg(u+"Size"+(l?"2":"1"),t);s=WK.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:0},{type:"elem",elem:h,shift:l?.08:0}]},t),i.name="\\"+u,s.classes.unshift("mop"),s.italic=d}}else if(i.body){var p=dY(i.body,t,!0);1===p.length&&p[0]instanceof WZ?(s=p[0]).classes[0]="mop":s=WK.makeSpan(["mop"],p,t)}else{for(var f=[],m=1;m<i.name.length;m++)f.push(WK.mathsym(i.name[m],i.mode,t));s=WK.makeSpan(["mop"],f,t)}var g=0,v=0;return(s instanceof WZ||"\\oiint"===i.name||"\\oiiint"===i.name)&&!i.suppressBaseShift&&(g=(s.height-s.depth)/2-t.fontMetrics().axisHeight,v=s.italic),a?sX(s,r,n,t,o,v,g):(g&&(s.style.position="relative",s.style.top=DZ(g)),s)},cX=(e,t)=>{var r;if(e.symbol)r=new wY("mo",[kY(e.name,e.mode)]),oX.includes(e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new wY("mo",NY(e.body,t));else{r=new wY("mi",[new xY(e.name.slice(1))]);var n=new wY("mo",[kY("","text")]);r=e.parentIsSupSub?new wY("mrow",[r,n]):_Y([r,n])}return r},uX={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};rY({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=n;return 1===i.length&&(i=uX[i]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:lX,mathmlBuilder:cX}),rY({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:aY(n)}},htmlBuilder:lX,mathmlBuilder:cX});var dX={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};rY({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:lX,mathmlBuilder:cX}),rY({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:lX,mathmlBuilder:cX}),rY({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,n=r;return 1===n.length&&(n=dX[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:lX,mathmlBuilder:cX});var hX=(e,t)=>{var r,n,i,a,s=!1;if("supsub"===e.type?(r=e.sup,n=e.sub,i=zY(e.base,"operatorname"),s=!0):i=zY(e,"operatorname"),i.body.length>0){for(var o=i.body.map(e=>{var t=e.text;return"string"==typeof t?{type:"textord",mode:e.mode,text:t}:e}),l=dY(o,t.withFont("mathrm"),!0),c=0;c<l.length;c++){var u=l[c];u instanceof WZ&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}a=WK.makeSpan(["mop"],l,t)}else a=WK.makeSpan(["mop"],[],t);return s?sX(a,r,n,t,t.style,0,0):a};function pX(e,t,r){for(var n=dY(e,t,!1),i=t.sizeMultiplier/r.sizeMultiplier,a=0;a<n.length;a++){var s=n[a].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[a].classes,t.sizingClasses(r)):n[a].classes[s+1]==="reset-size"+t.size&&(n[a].classes[s+1]="reset-size"+r.size),n[a].height*=i,n[a].depth*=i}return WK.makeFragment(n)}rY({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,i=t[0];return{type:"operatorname",mode:r.mode,body:aY(i),alwaysHandleSupSub:"\\operatornamewithlimits"===n,limits:!1,parentIsSupSub:!1}},htmlBuilder:hX,mathmlBuilder:(e,t)=>{for(var r=NY(e.body,t.withFont("mathrm")),n=!0,i=0;i<r.length;i++){var a=r[i];if(a instanceof EY.SpaceNode);else if(a instanceof EY.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var s=a.children[0];1===a.children.length&&s instanceof EY.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break;default:n=!1}else n=!1}if(n){var o=r.map(e=>e.toText()).join("");r=[new EY.TextNode(o)]}var l=new EY.MathNode("mi",r);l.setAttribute("mathvariant","normal");var c=new EY.MathNode("mo",[kY("","text")]);return e.parentIsSupSub?new EY.MathNode("mrow",[l,c]):EY.newDocumentFragment([l,c])}}),$J("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),nY({type:"ordgroup",htmlBuilder:(e,t)=>e.semisimple?WK.makeFragment(dY(e.body,t,!1)):WK.makeSpan(["mord"],dY(e.body,t,!0),t),mathmlBuilder:(e,t)=>IY(e.body,t,!0)}),rY({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,n=t[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(e,t){var r=vY(e.body,t.havingCrampedStyle()),n=WK.makeLineSpan("overline-line",t),i=t.fontMetrics().defaultRuleThickness,a=WK.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},t);return WK.makeSpan(["mord","overline"],[a],t)},mathmlBuilder(e,t){var r=new EY.MathNode("mo",[new EY.TextNode("")]);r.setAttribute("stretchy","true");var n=new EY.MathNode("mover",[MY(e.body,t),r]);return n.setAttribute("accent","true"),n}}),rY({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"phantom",mode:r.mode,body:aY(n)}},htmlBuilder:(e,t)=>{var r=dY(e.body,t.withPhantom(),!1);return WK.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=NY(e.body,t);return new EY.MathNode("mphantom",r)}}),rY({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=WK.makeSpan([],[vY(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=WK.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),WK.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=NY(aY(e.body),t),n=new EY.MathNode("mphantom",r),i=new EY.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}}),rY({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=WK.makeSpan(["inner"],[vY(e.body,t.withPhantom())]),n=WK.makeSpan(["fix"],[]);return WK.makeSpan(["mord","rlap"],[r,n],t)},mathmlBuilder:(e,t)=>{var r=NY(aY(e.body),t),n=new EY.MathNode("mphantom",r),i=new EY.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}}),rY({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,n=zY(t[0],"size").value,i=t[1];return{type:"raisebox",mode:r.mode,dy:n,body:i}},htmlBuilder(e,t){var r=vY(e.body,t),n=PZ(e.dy,t);return WK.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new EY.MathNode("mpadded",[MY(e.body,t)]),n=e.dy.number+e.dy.unit;return r.setAttribute("voffset",n),r}}),rY({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}}),rY({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:n}=e,i=r[0],a=zY(t[0],"size"),s=zY(t[1],"size");return{type:"rule",mode:n.mode,shift:i&&zY(i,"size").value,width:a.value,height:s.value}},htmlBuilder(e,t){var r=WK.makeSpan(["mord","rule"],[],t),n=PZ(e.width,t),i=PZ(e.height,t),a=e.shift?PZ(e.shift,t):0;return r.style.borderRightWidth=DZ(n),r.style.borderTopWidth=DZ(i),r.style.bottom=DZ(a),r.width=n,r.height=i+a,r.depth=-a,r.maxFontSize=1.125*i*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=PZ(e.width,t),n=PZ(e.height,t),i=e.shift?PZ(e.shift,t):0,a=t.color&&t.getColor()||"black",s=new EY.MathNode("mspace");s.setAttribute("mathbackground",a),s.setAttribute("width",DZ(r)),s.setAttribute("height",DZ(n));var o=new EY.MathNode("mpadded",[s]);return i>=0?o.setAttribute("height",DZ(i)):(o.setAttribute("height",DZ(i)),o.setAttribute("depth",DZ(-i))),o.setAttribute("voffset",DZ(i)),o}});var fX=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];rY({type:"sizing",names:fX,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:n,parser:i}=e,a=i.parseExpression(!1,r);return{type:"sizing",mode:i.mode,size:fX.indexOf(n)+1,body:a}},htmlBuilder:(e,t)=>{var r=t.havingSize(e.size);return pX(e.body,r,t)},mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),n=NY(e.body,r),i=new EY.MathNode("mstyle",n);return i.setAttribute("mathsize",DZ(r.sizeMultiplier)),i}}),rY({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:n}=e,i=!1,a=!1,s=r[0]&&zY(r[0],"ordgroup");if(s)for(var o="",l=0;l<s.body.length;++l){if("t"===(o=s.body[l].text))i=!0;else{if("b"!==o){i=!1,a=!1;break}a=!0}}else i=!0,a=!0;var c=t[0];return{type:"smash",mode:n.mode,body:c,smashHeight:i,smashDepth:a}},htmlBuilder:(e,t)=>{var r=WK.makeSpan([],[vY(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].depth=0;var a=WK.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return WK.makeSpan(["mord"],[a],t)},mathmlBuilder:(e,t)=>{var r=new EY.MathNode("mpadded",[MY(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}}),rY({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n}=e,i=r[0],a=t[0];return{type:"sqrt",mode:n.mode,body:a,index:i}},htmlBuilder(e,t){var r=vY(e.body,t.havingCrampedStyle());0===r.height&&(r.height=t.fontMetrics().xHeight),r=WK.wrapFragment(r,t);var n=t.fontMetrics().defaultRuleThickness,i=n;t.style.id<gZ.TEXT.id&&(i=t.fontMetrics().xHeight);var a=n+i/4,s=r.height+r.depth+a+n,{span:o,ruleWidth:l,advanceWidth:c}=NJ.sqrtImage(s,t),u=o.height-l;u>r.height+r.depth+a&&(a=(a+u-r.height-r.depth)/2);var d=o.height-r.height-a-l;r.style.paddingLeft=DZ(c);var h=WK.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+d)},{type:"elem",elem:o},{type:"kern",size:l}]},t);if(e.index){var p=t.havingStyle(gZ.SCRIPTSCRIPT),f=vY(e.index,p,t),m=.6*(h.height-h.depth),g=WK.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:f}]},t),v=WK.makeSpan(["root"],[g]);return WK.makeSpan(["mord","sqrt"],[v,h],t)}return WK.makeSpan(["mord","sqrt"],[h],t)},mathmlBuilder(e,t){var{body:r,index:n}=e;return n?new EY.MathNode("mroot",[MY(r,t),MY(n,t)]):new EY.MathNode("msqrt",[MY(r,t)])}});var mX={display:gZ.DISPLAY,text:gZ.TEXT,script:gZ.SCRIPT,scriptscript:gZ.SCRIPTSCRIPT};rY({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:n,parser:i}=e,a=i.parseExpression(!0,r),s=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:s,body:a}},htmlBuilder(e,t){var r=mX[e.style],n=t.havingStyle(r).withFont("");return pX(e.body,n,t)},mathmlBuilder(e,t){var r=mX[e.style],n=t.havingStyle(r),i=NY(e.body,n),a=new EY.MathNode("mstyle",i),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[e.style];return a.setAttribute("scriptlevel",s[0]),a.setAttribute("displaystyle",s[1]),a}});nY({type:"supsub",htmlBuilder(e,t){var r=function(e,t){var r=e.base;return r?"op"===r.type?r.limits&&(t.style.size===gZ.DISPLAY.size||r.alwaysHandleSupSub)?lX:null:"operatorname"===r.type?r.alwaysHandleSupSub&&(t.style.size===gZ.DISPLAY.size||r.limits)?hX:null:"accent"===r.type?iZ.isCharacterBox(r.base)?FY:null:"horizBrace"===r.type&&!e.sub===r.isOver?nX:null:null}(e,t);if(r)return r(e,t);var n,i,a,{base:s,sup:o,sub:l}=e,c=vY(s,t),u=t.fontMetrics(),d=0,h=0,p=s&&iZ.isCharacterBox(s);if(o){var f=t.havingStyle(t.style.sup());n=vY(o,f,t),p||(d=c.height-f.fontMetrics().supDrop*f.sizeMultiplier/t.sizeMultiplier)}if(l){var m=t.havingStyle(t.style.sub());i=vY(l,m,t),p||(h=c.depth+m.fontMetrics().subDrop*m.sizeMultiplier/t.sizeMultiplier)}a=t.style===gZ.DISPLAY?u.sup1:t.style.cramped?u.sup3:u.sup2;var g,v=t.sizeMultiplier,y=DZ(.5/u.ptPerEm/v),b=null;if(i){var _=e.base&&"op"===e.base.type&&e.base.name&&("\\oiint"===e.base.name||"\\oiiint"===e.base.name);(c instanceof WZ||_)&&(b=DZ(-c.italic))}if(n&&i){d=Math.max(d,a,n.depth+.25*u.xHeight),h=Math.max(h,u.sub2);var w=4*u.defaultRuleThickness;if(d-n.depth-(i.height-h)<w){h=w-(d-n.depth)+i.height;var x=.8*u.xHeight-(d-n.depth);x>0&&(d+=x,h-=x)}var E=[{type:"elem",elem:i,shift:h,marginRight:y,marginLeft:b},{type:"elem",elem:n,shift:-d,marginRight:y}];g=WK.makeVList({positionType:"individualShift",children:E},t)}else if(i){h=Math.max(h,u.sub1,i.height-.8*u.xHeight);var k=[{type:"elem",elem:i,marginLeft:b,marginRight:y}];g=WK.makeVList({positionType:"shift",positionData:h,children:k},t)}else{if(!n)throw new Error("supsub must have either sup or sub.");d=Math.max(d,a,n.depth+.25*u.xHeight),g=WK.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:n,marginRight:y}]},t)}var S=mY(c,"right")||"mord";return WK.makeSpan([S],[c,WK.makeSpan(["msupsub"],[g])],t)},mathmlBuilder(e,t){var r,n=!1;e.base&&"horizBrace"===e.base.type&&!!e.sup===e.base.isOver&&(n=!0,r=e.base.isOver),!e.base||"op"!==e.base.type&&"operatorname"!==e.base.type||(e.base.parentIsSupSub=!0);var i,a=[MY(e.base,t)];if(e.sub&&a.push(MY(e.sub,t)),e.sup&&a.push(MY(e.sup,t)),n)i=r?"mover":"munder";else if(e.sub)if(e.sup){var s=e.base;i=s&&"op"===s.type&&s.limits&&t.style===gZ.DISPLAY||s&&"operatorname"===s.type&&s.alwaysHandleSupSub&&(t.style===gZ.DISPLAY||s.limits)?"munderover":"msubsup"}else{var o=e.base;i=o&&"op"===o.type&&o.limits&&(t.style===gZ.DISPLAY||o.alwaysHandleSupSub)||o&&"operatorname"===o.type&&o.alwaysHandleSupSub&&(o.limits||t.style===gZ.DISPLAY)?"munder":"msub"}else{var l=e.base;i=l&&"op"===l.type&&l.limits&&(t.style===gZ.DISPLAY||l.alwaysHandleSupSub)||l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||t.style===gZ.DISPLAY)?"mover":"msup"}return new EY.MathNode(i,a)}}),nY({type:"atom",htmlBuilder:(e,t)=>WK.mathsym(e.text,e.mode,t,["m"+e.family]),mathmlBuilder(e,t){var r=new EY.MathNode("mo",[kY(e.text,e.mode)]);if("bin"===e.family){var n=AY(e,t);"bold-italic"===n&&r.setAttribute("mathvariant",n)}else"punct"===e.family?r.setAttribute("separator","true"):"open"!==e.family&&"close"!==e.family||r.setAttribute("stretchy","false");return r}});var gX={mi:"italic",mn:"normal",mtext:"normal"};nY({type:"mathord",htmlBuilder:(e,t)=>WK.makeOrd(e,t,"mathord"),mathmlBuilder(e,t){var r=new EY.MathNode("mi",[kY(e.text,e.mode,t)]),n=AY(e,t)||"italic";return n!==gX[r.type]&&r.setAttribute("mathvariant",n),r}}),nY({type:"textord",htmlBuilder:(e,t)=>WK.makeOrd(e,t,"textord"),mathmlBuilder(e,t){var r,n=kY(e.text,e.mode,t),i=AY(e,t)||"normal";return r="text"===e.mode?new EY.MathNode("mtext",[n]):/[0-9]/.test(e.text)?new EY.MathNode("mn",[n]):"\\prime"===e.text?new EY.MathNode("mo",[n]):new EY.MathNode("mi",[n]),i!==gX[r.type]&&r.setAttribute("mathvariant",i),r}});var vX={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},yX={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};nY({type:"spacing",htmlBuilder(e,t){if(yX.hasOwnProperty(e.text)){var r=yX[e.text].className||"";if("text"===e.mode){var n=WK.makeOrd(e,t,"textord");return n.classes.push(r),n}return WK.makeSpan(["mspace",r],[WK.mathsym(e.text,e.mode,t)],t)}if(vX.hasOwnProperty(e.text))return WK.makeSpan(["mspace",vX[e.text]],[],t);throw new QW('Unknown type of space "'+e.text+'"')},mathmlBuilder(e,t){if(!yX.hasOwnProperty(e.text)){if(vX.hasOwnProperty(e.text))return new EY.MathNode("mspace");throw new QW('Unknown type of space "'+e.text+'"')}return new EY.MathNode("mtext",[new EY.TextNode("")])}});var bX=()=>{var e=new EY.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};nY({type:"tag",mathmlBuilder(e,t){var r=new EY.MathNode("mtable",[new EY.MathNode("mtr",[bX(),new EY.MathNode("mtd",[IY(e.body,t)]),bX(),new EY.MathNode("mtd",[IY(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var _X={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},wX={"\\textbf":"textbf","\\textmd":"textmd"},xX={"\\textit":"textit","\\textup":"textup"},EX=(e,t)=>{var r=e.font;return r?_X[r]?t.withTextFontFamily(_X[r]):wX[r]?t.withTextFontWeight(wX[r]):"\\emph"===r?"textit"===t.fontShape?t.withTextFontShape("textup"):t.withTextFontShape("textit"):t.withTextFontShape(xX[r]):t};rY({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,i=t[0];return{type:"text",mode:r.mode,body:aY(i),font:n}},htmlBuilder(e,t){var r=EX(e,t),n=dY(e.body,r,!0);return WK.makeSpan(["mord","text"],n,r)},mathmlBuilder(e,t){var r=EX(e,t);return IY(e.body,r)}}),rY({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=vY(e.body,t),n=WK.makeLineSpan("underline-line",t),i=t.fontMetrics().defaultRuleThickness,a=WK.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r}]},t);return WK.makeSpan(["mord","underline"],[a],t)},mathmlBuilder(e,t){var r=new EY.MathNode("mo",[new EY.TextNode("")]);r.setAttribute("stretchy","true");var n=new EY.MathNode("munder",[MY(e.body,t),r]);return n.setAttribute("accentunder","true"),n}}),rY({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=vY(e.body,t),n=t.fontMetrics().axisHeight,i=.5*(r.height-n-(r.depth+n));return WK.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:r}]},t)},mathmlBuilder:(e,t)=>new EY.MathNode("mpadded",[MY(e.body,t)],["vcenter"])}),rY({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new QW("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=kX(e),n=[],i=t.havingStyle(t.style.text()),a=0;a<r.length;a++){var s=r[a];"~"===s&&(s="\\textasciitilde"),n.push(WK.makeSymbol(s,"Typewriter-Regular",e.mode,i,["mord","texttt"]))}return WK.makeSpan(["mord","text"].concat(i.sizingClasses(t)),WK.tryCombineChars(n),i)},mathmlBuilder(e,t){var r=new EY.TextNode(kX(e)),n=new EY.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var kX=e=>e.body.replace(/ /g,e.star?"":""),SX=QK,AX="[ \r\n\t]",TX="(\\\\[a-zA-Z@]+)"+AX+"*",NX="[-]",IX=new RegExp(NX+"+$"),MX="("+AX+"+)|\\\\(\n|[ \r\t]+\n?)[ \r\t]*|([!-\\[\\]---]"+NX+"*|[\ud800-\udbff][\udc00-\udfff]"+NX+"*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|"+TX+"|\\\\[^\ud800-\udfff])";class CX{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(MX,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new XW("EOF",new JW(this,t,t));var r=this.tokenRegex.exec(e);if(null===r||r.index!==t)throw new QW("Unexpected character: '"+e[t]+"'",new XW(e[t],new JW(this,t,t+1)));var n=r[6]||r[3]||(r[2]?"\\ ":" ");if(14===this.catcodes[n]){var i=e.indexOf("\n",this.tokenRegex.lastIndex);return-1===i?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new XW(n,new JW(this,t,this.tokenRegex.lastIndex))}}class jX{constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(0===this.undefStack.length)throw new QW("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(null==e[t]?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,r){if(void 0===r&&(r=!1),r){for(var n=0;n<this.undefStack.length;n++)delete this.undefStack[n][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}null==t?delete this.current[e]:this.current[e]=t}}var OX=DJ;$J("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}}),$J("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}}),$J("\\@firstoftwo",function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}}),$J("\\@secondoftwo",function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}}),$J("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return 1===t[0].length&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}}),$J("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),$J("\\TextOrMath",function(e){var t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var RX={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};$J("\\char",function(e){var t,r=e.popToken(),n="";if("'"===r.text)t=8,r=e.popToken();else if('"'===r.text)t=16,r=e.popToken();else if("`"===r.text)if("\\"===(r=e.popToken()).text[0])n=r.text.charCodeAt(1);else{if("EOF"===r.text)throw new QW("\\char` missing argument");n=r.text.charCodeAt(0)}else t=10;if(t){if(null==(n=RX[r.text])||n>=t)throw new QW("Invalid base-"+t+" digit "+r.text);for(var i;null!=(i=RX[e.future().text])&&i<t;)n*=t,n+=i,e.popToken()}return"\\@char{"+n+"}"});var LX=(e,t,r,n)=>{var i=e.consumeArg().tokens;if(1!==i.length)throw new QW("\\newcommand's first argument must be a macro name");var a=i[0].text,s=e.isDefined(a);if(s&&!t)throw new QW("\\newcommand{"+a+"} attempting to redefine "+a+"; use \\renewcommand");if(!s&&!r)throw new QW("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var o=0;if(1===(i=e.consumeArg().tokens).length&&"["===i[0].text){for(var l="",c=e.expandNextToken();"]"!==c.text&&"EOF"!==c.text;)l+=c.text,c=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new QW("Invalid number of arguments: "+l);o=parseInt(l),i=e.consumeArg().tokens}return s&&n||e.macros.set(a,{tokens:i,numArgs:o}),""};$J("\\newcommand",e=>LX(e,!1,!0,!1)),$J("\\renewcommand",e=>LX(e,!0,!1,!1)),$J("\\providecommand",e=>LX(e,!0,!0,!0)),$J("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(e=>e.text).join("")),""}),$J("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(e=>e.text).join("")),""}),$J("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),SX[r],eK.math[r],eK.text[r]),""}),$J("\\bgroup","{"),$J("\\egroup","}"),$J("~","\\nobreakspace"),$J("\\lq","`"),$J("\\rq","'"),$J("\\aa","\\r a"),$J("\\AA","\\r A"),$J("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}"),$J("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),$J("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}"),$J("","\\mathscr{B}"),$J("","\\mathscr{E}"),$J("","\\mathscr{F}"),$J("","\\mathscr{H}"),$J("","\\mathscr{I}"),$J("","\\mathscr{L}"),$J("","\\mathscr{M}"),$J("","\\mathscr{R}"),$J("","\\mathfrak{C}"),$J("","\\mathfrak{H}"),$J("","\\mathfrak{Z}"),$J("\\Bbbk","\\Bbb{k}"),$J("","\\cdotp"),$J("\\llap","\\mathllap{\\textrm{#1}}"),$J("\\rlap","\\mathrlap{\\textrm{#1}}"),$J("\\clap","\\mathclap{\\textrm{#1}}"),$J("\\mathstrut","\\vphantom{(}"),$J("\\underbar","\\underline{\\text{#1}}"),$J("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),$J("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}"),$J("\\ne","\\neq"),$J("","\\neq"),$J("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}"),$J("","\\notin"),$J("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}"),$J("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}"),$J("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}"),$J("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}"),$J("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}"),$J("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}"),$J("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}"),$J("","\\perp"),$J("","\\mathclose{!\\mkern-0.8mu!}"),$J("","\\notni"),$J("","\\ulcorner"),$J("","\\urcorner"),$J("","\\llcorner"),$J("","\\lrcorner"),$J("","\\copyright"),$J("","\\textregistered"),$J("","\\textregistered"),$J("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),$J("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),$J("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),$J("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),$J("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),$J("","\\vdots"),$J("\\varGamma","\\mathit{\\Gamma}"),$J("\\varDelta","\\mathit{\\Delta}"),$J("\\varTheta","\\mathit{\\Theta}"),$J("\\varLambda","\\mathit{\\Lambda}"),$J("\\varXi","\\mathit{\\Xi}"),$J("\\varPi","\\mathit{\\Pi}"),$J("\\varSigma","\\mathit{\\Sigma}"),$J("\\varUpsilon","\\mathit{\\Upsilon}"),$J("\\varPhi","\\mathit{\\Phi}"),$J("\\varPsi","\\mathit{\\Psi}"),$J("\\varOmega","\\mathit{\\Omega}"),$J("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),$J("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),$J("\\boxed","\\fbox{$\\displaystyle{#1}$}"),$J("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),$J("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),$J("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),$J("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),$J("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var PX={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};$J("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in PX?t=PX[r]:("\\not"===r.slice(0,4)||r in eK.math&&["bin","rel"].includes(eK.math[r].group))&&(t="\\dotsb"),t});var DX={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};$J("\\dotso",function(e){return e.future().text in DX?"\\ldots\\,":"\\ldots"}),$J("\\dotsc",function(e){var t=e.future().text;return t in DX&&","!==t?"\\ldots\\,":"\\ldots"}),$J("\\cdots",function(e){return e.future().text in DX?"\\@cdots\\,":"\\@cdots"}),$J("\\dotsb","\\cdots"),$J("\\dotsm","\\cdots"),$J("\\dotsi","\\!\\cdots"),$J("\\dotsx","\\ldots\\,"),$J("\\DOTSI","\\relax"),$J("\\DOTSB","\\relax"),$J("\\DOTSX","\\relax"),$J("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),$J("\\,","\\tmspace+{3mu}{.1667em}"),$J("\\thinspace","\\,"),$J("\\>","\\mskip{4mu}"),$J("\\:","\\tmspace+{4mu}{.2222em}"),$J("\\medspace","\\:"),$J("\\;","\\tmspace+{5mu}{.2777em}"),$J("\\thickspace","\\;"),$J("\\!","\\tmspace-{3mu}{.1667em}"),$J("\\negthinspace","\\!"),$J("\\negmedspace","\\tmspace-{4mu}{.2222em}"),$J("\\negthickspace","\\tmspace-{5mu}{.277em}"),$J("\\enspace","\\kern.5em "),$J("\\enskip","\\hskip.5em\\relax"),$J("\\quad","\\hskip1em\\relax"),$J("\\qquad","\\hskip2em\\relax"),$J("\\tag","\\@ifstar\\tag@literal\\tag@paren"),$J("\\tag@paren","\\tag@literal{({#1})}"),$J("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new QW("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),$J("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),$J("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),$J("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),$J("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),$J("\\newline","\\\\\\relax"),$J("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var $X=DZ(EZ["Main-Regular"]["T".charCodeAt(0)][1]-.7*EZ["Main-Regular"]["A".charCodeAt(0)][1]);$J("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+$X+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),$J("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+$X+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),$J("\\hspace","\\@ifstar\\@hspacer\\@hspace"),$J("\\@hspace","\\hskip #1\\relax"),$J("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),$J("\\ordinarycolon",":"),$J("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),$J("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),$J("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),$J("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),$J("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),$J("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),$J("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),$J("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),$J("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),$J("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),$J("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),$J("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),$J("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),$J("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),$J("","\\dblcolon"),$J("","\\eqcolon"),$J("","\\coloneqq"),$J("","\\eqqcolon"),$J("","\\Coloneqq"),$J("\\ratio","\\vcentcolon"),$J("\\coloncolon","\\dblcolon"),$J("\\colonequals","\\coloneqq"),$J("\\coloncolonequals","\\Coloneqq"),$J("\\equalscolon","\\eqqcolon"),$J("\\equalscoloncolon","\\Eqqcolon"),$J("\\colonminus","\\coloneq"),$J("\\coloncolonminus","\\Coloneq"),$J("\\minuscolon","\\eqcolon"),$J("\\minuscoloncolon","\\Eqcolon"),$J("\\coloncolonapprox","\\Colonapprox"),$J("\\coloncolonsim","\\Colonsim"),$J("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),$J("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),$J("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),$J("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),$J("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}"),$J("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),$J("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),$J("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),$J("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),$J("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),$J("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),$J("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),$J("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),$J("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}"),$J("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}"),$J("\\ngeqq","\\html@mathml{\\@ngeqq}{}"),$J("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}"),$J("\\nleqq","\\html@mathml{\\@nleqq}{}"),$J("\\nleqslant","\\html@mathml{\\@nleqslant}{}"),$J("\\nshortmid","\\html@mathml{\\@nshortmid}{}"),$J("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}"),$J("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}"),$J("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}"),$J("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}"),$J("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}"),$J("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}"),$J("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}"),$J("\\imath","\\html@mathml{\\@imath}{}"),$J("\\jmath","\\html@mathml{\\@jmath}{}"),$J("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),$J("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}"),$J("","\\llbracket"),$J("","\\rrbracket"),$J("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),$J("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}"),$J("","\\lBrace"),$J("","\\rBrace"),$J("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}"),$J("","\\minuso"),$J("\\darr","\\downarrow"),$J("\\dArr","\\Downarrow"),$J("\\Darr","\\Downarrow"),$J("\\lang","\\langle"),$J("\\rang","\\rangle"),$J("\\uarr","\\uparrow"),$J("\\uArr","\\Uparrow"),$J("\\Uarr","\\Uparrow"),$J("\\N","\\mathbb{N}"),$J("\\R","\\mathbb{R}"),$J("\\Z","\\mathbb{Z}"),$J("\\alef","\\aleph"),$J("\\alefsym","\\aleph"),$J("\\Alpha","\\mathrm{A}"),$J("\\Beta","\\mathrm{B}"),$J("\\bull","\\bullet"),$J("\\Chi","\\mathrm{X}"),$J("\\clubs","\\clubsuit"),$J("\\cnums","\\mathbb{C}"),$J("\\Complex","\\mathbb{C}"),$J("\\Dagger","\\ddagger"),$J("\\diamonds","\\diamondsuit"),$J("\\empty","\\emptyset"),$J("\\Epsilon","\\mathrm{E}"),$J("\\Eta","\\mathrm{H}"),$J("\\exist","\\exists"),$J("\\harr","\\leftrightarrow"),$J("\\hArr","\\Leftrightarrow"),$J("\\Harr","\\Leftrightarrow"),$J("\\hearts","\\heartsuit"),$J("\\image","\\Im"),$J("\\infin","\\infty"),$J("\\Iota","\\mathrm{I}"),$J("\\isin","\\in"),$J("\\Kappa","\\mathrm{K}"),$J("\\larr","\\leftarrow"),$J("\\lArr","\\Leftarrow"),$J("\\Larr","\\Leftarrow"),$J("\\lrarr","\\leftrightarrow"),$J("\\lrArr","\\Leftrightarrow"),$J("\\Lrarr","\\Leftrightarrow"),$J("\\Mu","\\mathrm{M}"),$J("\\natnums","\\mathbb{N}"),$J("\\Nu","\\mathrm{N}"),$J("\\Omicron","\\mathrm{O}"),$J("\\plusmn","\\pm"),$J("\\rarr","\\rightarrow"),$J("\\rArr","\\Rightarrow"),$J("\\Rarr","\\Rightarrow"),$J("\\real","\\Re"),$J("\\reals","\\mathbb{R}"),$J("\\Reals","\\mathbb{R}"),$J("\\Rho","\\mathrm{P}"),$J("\\sdot","\\cdot"),$J("\\sect","\\S"),$J("\\spades","\\spadesuit"),$J("\\sub","\\subset"),$J("\\sube","\\subseteq"),$J("\\supe","\\supseteq"),$J("\\Tau","\\mathrm{T}"),$J("\\thetasym","\\vartheta"),$J("\\weierp","\\wp"),$J("\\Zeta","\\mathrm{Z}"),$J("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),$J("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),$J("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),$J("\\bra","\\mathinner{\\langle{#1}|}"),$J("\\ket","\\mathinner{|{#1}\\rangle}"),$J("\\braket","\\mathinner{\\langle{#1}\\rangle}"),$J("\\Bra","\\left\\langle#1\\right|"),$J("\\Ket","\\left|#1\\right\\rangle");var zX=e=>t=>{var r=t.consumeArg().tokens,n=t.consumeArg().tokens,i=t.consumeArg().tokens,a=t.consumeArg().tokens,s=t.macros.get("|"),o=t.macros.get("\\|");t.macros.beginGroup();var l=t=>r=>{e&&(r.macros.set("|",s),i.length&&r.macros.set("\\|",o));var a=t;!t&&i.length&&("|"===r.future().text&&(r.popToken(),a=!0));return{tokens:a?i:n,numArgs:0}};t.macros.set("|",l(!1)),i.length&&t.macros.set("\\|",l(!0));var c=t.consumeArg().tokens,u=t.expandTokens([...a,...c,...r]);return t.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};$J("\\bra@ket",zX(!1)),$J("\\bra@set",zX(!0)),$J("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),$J("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),$J("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),$J("\\angln","{\\angl n}"),$J("\\blue","\\textcolor{##6495ed}{#1}"),$J("\\orange","\\textcolor{##ffa500}{#1}"),$J("\\pink","\\textcolor{##ff00af}{#1}"),$J("\\red","\\textcolor{##df0030}{#1}"),$J("\\green","\\textcolor{##28ae7b}{#1}"),$J("\\gray","\\textcolor{gray}{#1}"),$J("\\purple","\\textcolor{##9d38bd}{#1}"),$J("\\blueA","\\textcolor{##ccfaff}{#1}"),$J("\\blueB","\\textcolor{##80f6ff}{#1}"),$J("\\blueC","\\textcolor{##63d9ea}{#1}"),$J("\\blueD","\\textcolor{##11accd}{#1}"),$J("\\blueE","\\textcolor{##0c7f99}{#1}"),$J("\\tealA","\\textcolor{##94fff5}{#1}"),$J("\\tealB","\\textcolor{##26edd5}{#1}"),$J("\\tealC","\\textcolor{##01d1c1}{#1}"),$J("\\tealD","\\textcolor{##01a995}{#1}"),$J("\\tealE","\\textcolor{##208170}{#1}"),$J("\\greenA","\\textcolor{##b6ffb0}{#1}"),$J("\\greenB","\\textcolor{##8af281}{#1}"),$J("\\greenC","\\textcolor{##74cf70}{#1}"),$J("\\greenD","\\textcolor{##1fab54}{#1}"),$J("\\greenE","\\textcolor{##0d923f}{#1}"),$J("\\goldA","\\textcolor{##ffd0a9}{#1}"),$J("\\goldB","\\textcolor{##ffbb71}{#1}"),$J("\\goldC","\\textcolor{##ff9c39}{#1}"),$J("\\goldD","\\textcolor{##e07d10}{#1}"),$J("\\goldE","\\textcolor{##a75a05}{#1}"),$J("\\redA","\\textcolor{##fca9a9}{#1}"),$J("\\redB","\\textcolor{##ff8482}{#1}"),$J("\\redC","\\textcolor{##f9685d}{#1}"),$J("\\redD","\\textcolor{##e84d39}{#1}"),$J("\\redE","\\textcolor{##bc2612}{#1}"),$J("\\maroonA","\\textcolor{##ffbde0}{#1}"),$J("\\maroonB","\\textcolor{##ff92c6}{#1}"),$J("\\maroonC","\\textcolor{##ed5fa6}{#1}"),$J("\\maroonD","\\textcolor{##ca337c}{#1}"),$J("\\maroonE","\\textcolor{##9e034e}{#1}"),$J("\\purpleA","\\textcolor{##ddd7ff}{#1}"),$J("\\purpleB","\\textcolor{##c6b9fc}{#1}"),$J("\\purpleC","\\textcolor{##aa87ff}{#1}"),$J("\\purpleD","\\textcolor{##7854ab}{#1}"),$J("\\purpleE","\\textcolor{##543b78}{#1}"),$J("\\mintA","\\textcolor{##f5f9e8}{#1}"),$J("\\mintB","\\textcolor{##edf2df}{#1}"),$J("\\mintC","\\textcolor{##e0e5cc}{#1}"),$J("\\grayA","\\textcolor{##f6f7f7}{#1}"),$J("\\grayB","\\textcolor{##f0f1f2}{#1}"),$J("\\grayC","\\textcolor{##e3e5e6}{#1}"),$J("\\grayD","\\textcolor{##d6d8da}{#1}"),$J("\\grayE","\\textcolor{##babec2}{#1}"),$J("\\grayF","\\textcolor{##888d93}{#1}"),$J("\\grayG","\\textcolor{##626569}{#1}"),$J("\\grayH","\\textcolor{##3b3e40}{#1}"),$J("\\grayI","\\textcolor{##21242c}{#1}"),$J("\\kaBlue","\\textcolor{##314453}{#1}"),$J("\\kaGreen","\\textcolor{##71B307}{#1}");var BX={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class UX{constructor(e,t,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new jX(OX,t.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new CX(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,r,n;if(e){if(this.consumeSpaces(),"["!==this.future().text)return null;t=this.popToken(),({tokens:n,end:r}=this.consumeArg(["]"]))}else({tokens:n,start:t,end:r}=this.consumeArg());return this.pushToken(new XW("EOF",r.loc)),this.pushTokens(n),new XW("",JW.range(t,r))}consumeSpaces(){for(;;){if(" "!==this.future().text)break;this.stack.pop()}}consumeArg(e){var t=[],r=e&&e.length>0;r||this.consumeSpaces();var n,i=this.future(),a=0,s=0;do{if(n=this.popToken(),t.push(n),"{"===n.text)++a;else if("}"===n.text){if(-1===--a)throw new QW("Extra }",n)}else if("EOF"===n.text)throw new QW("Unexpected end of input in a macro argument, expected '"+(e&&r?e[s]:"}")+"'",n);if(e&&r)if((0===a||1===a&&"{"===e[s])&&n.text===e[s]){if(++s===e.length){t.splice(-s,s);break}}else s=0}while(0!==a||r);return"{"===i.text&&"}"===t[t.length-1].text&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:n}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new QW("The length of delimiters doesn't match the number of args!");for(var r=t[0],n=0;n<r.length;n++){var i=this.popToken();if(r[n]!==i.text)throw new QW("Use of the macro doesn't match its definition",i)}}for(var a=[],s=0;s<e;s++)a.push(this.consumeArg(t&&t[s+1]).tokens);return a}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new QW("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),r=t.text,n=t.noexpand?null:this._getExpansion(r);if(null==n||e&&n.unexpandable){if(e&&null==n&&"\\"===r[0]&&!this.isDefined(r))throw new QW("Undefined control sequence: "+r);return this.pushToken(t),!1}this.countExpansion(1);var i=n.tokens,a=this.consumeArgs(n.numArgs,n.delimiters);if(n.numArgs)for(var s=(i=i.slice()).length-1;s>=0;--s){var o=i[s];if("#"===o.text){if(0===s)throw new QW("Incomplete placeholder at end of macro body",o);if("#"===(o=i[--s]).text)i.splice(s+1,1);else{if(!/^[1-9]$/.test(o.text))throw new QW("Not a valid argument number",o);i.splice(s,2,...a[+o.text-1])}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(!1===this.expandOnce()){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new XW(e)]):void 0}expandTokens(e){var t=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(!1===this.expandOnce(!0)){var n=this.stack.pop();n.treatAsRelax&&(n.noexpand=!1,n.treatAsRelax=!1),t.push(n)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t?t.map(e=>e.text).join(""):t}_getExpansion(e){var t=this.macros.get(e);if(null==t)return t;if(1===e.length){var r=this.lexer.catcodes[e];if(null!=r&&13!==r)return}var n="function"==typeof t?t(this):t;if("string"==typeof n){var i=0;if(-1!==n.indexOf("#"))for(var a=n.replace(/##/g,"");-1!==a.indexOf("#"+(i+1));)++i;for(var s=new CX(n,this.settings),o=[],l=s.lex();"EOF"!==l.text;)o.push(l),l=s.lex();return o.reverse(),{tokens:o,numArgs:i}}return n}isDefined(e){return this.macros.has(e)||SX.hasOwnProperty(e)||eK.math.hasOwnProperty(e)||eK.text.hasOwnProperty(e)||BX.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return null!=t?"string"==typeof t||"function"==typeof t||!t.unexpandable:SX.hasOwnProperty(e)&&!SX[e].primitive}}var FX=/^[]/,HX=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"w","":"x","":"y","":"z","":"","":"","":"","":"","":"","":""}),GX={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},qX={"":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"k","":"k","":"k","":"l","":"l","":"l","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"p","":"p","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"K","":"K","":"K","":"L","":"L","":"L","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"P","":"P","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};let VX=class e{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new UX(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(void 0===t&&(t=!0),this.fetch().text!==e)throw new QW("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new XW("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,r}parseExpression(t,r){for(var n=[];;){"math"===this.mode&&this.consumeSpaces();var i=this.fetch();if(-1!==e.endOfExpression.indexOf(i.text))break;if(r&&i.text===r)break;if(t&&SX[i.text]&&SX[i.text].infix)break;var a=this.parseAtom(r);if(!a)break;"internal"!==a.type&&n.push(a)}return"text"===this.mode&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var t,r=-1,n=0;n<e.length;n++)if("infix"===e[n].type){if(-1!==r)throw new QW("only one infix operator per group",e[n].token);r=n,t=e[n].replaceWith}if(-1!==r&&t){var i,a,s=e.slice(0,r),o=e.slice(r+1);return i=1===s.length&&"ordgroup"===s[0].type?s[0]:{type:"ordgroup",mode:this.mode,body:s},a=1===o.length&&"ordgroup"===o[0].type?o[0]:{type:"ordgroup",mode:this.mode,body:o},["\\\\abovefrac"===t?this.callFunction(t,[i,e[r],a],[]):this.callFunction(t,[i,a],[])]}return e}handleSupSubscript(e){var t,r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();do{var i;t=this.parseGroup(e)}while("internal"===(null==(i=t)?void 0:i.type));if(!t)throw new QW("Expected group after '"+n+"'",r);return t}formatUnsupportedCmd(e){for(var t=[],r=0;r<e.length;r++)t.push({type:"textord",mode:"text",text:e[r]});var n={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[n]}}parseAtom(e){var t,r,n=this.parseGroup("atom",e);if("internal"===(null==n?void 0:n.type))return n;if("text"===this.mode)return n;for(;;){this.consumeSpaces();var i=this.fetch();if("\\limits"===i.text||"\\nolimits"===i.text){if(n&&"op"===n.type){var a="\\limits"===i.text;n.limits=a,n.alwaysHandleSupSub=!0}else{if(!n||"operatorname"!==n.type)throw new QW("Limit controls must follow a math operator",i);n.alwaysHandleSupSub&&(n.limits="\\limits"===i.text)}this.consume()}else if("^"===i.text){if(t)throw new QW("Double superscript",i);t=this.handleSupSubscript("superscript")}else if("_"===i.text){if(r)throw new QW("Double subscript",i);r=this.handleSupSubscript("subscript")}else if("'"===i.text){if(t)throw new QW("Double superscript",i);var s={type:"textord",mode:this.mode,text:"\\prime"},o=[s];for(this.consume();"'"===this.fetch().text;)o.push(s),this.consume();"^"===this.fetch().text&&o.push(this.handleSupSubscript("superscript")),t={type:"ordgroup",mode:this.mode,body:o}}else{if(!HX[i.text])break;var l=FX.test(i.text),c=[];for(c.push(new XW(HX[i.text])),this.consume();;){var u=this.fetch().text;if(!HX[u])break;if(FX.test(u)!==l)break;c.unshift(new XW(HX[u])),this.consume()}var d=this.subparse(c);l?r={type:"ordgroup",mode:"math",body:d}:t={type:"ordgroup",mode:"math",body:d}}}return t||r?{type:"supsub",mode:this.mode,base:n,sup:t,sub:r}:n}parseFunction(e,t){var r=this.fetch(),n=r.text,i=SX[n];if(!i)return null;if(this.consume(),t&&"atom"!==t&&!i.allowedInArgument)throw new QW("Got function '"+n+"' with no arguments"+(t?" as "+t:""),r);if("text"===this.mode&&!i.allowedInText)throw new QW("Can't use function '"+n+"' in text mode",r);if("math"===this.mode&&!1===i.allowedInMath)throw new QW("Can't use function '"+n+"' in math mode",r);var{args:a,optArgs:s}=this.parseArguments(n,i);return this.callFunction(n,a,s,r,e)}callFunction(e,t,r,n,i){var a={funcName:e,parser:this,token:n,breakOnTokenText:i},s=SX[e];if(s&&s.handler)return s.handler(a,t,r);throw new QW("No function handler for "+e)}parseArguments(e,t){var r=t.numArgs+t.numOptionalArgs;if(0===r)return{args:[],optArgs:[]};for(var n=[],i=[],a=0;a<r;a++){var s=t.argTypes&&t.argTypes[a],o=a<t.numOptionalArgs;(t.primitive&&null==s||"sqrt"===t.type&&1===a&&null==i[0])&&(s="primitive");var l=this.parseGroupOfType("argument to '"+e+"'",s,o);if(o)i.push(l);else{if(null==l)throw new QW("Null argument, please report this as a bug");n.push(l)}}return{args:n,optArgs:i}}parseGroupOfType(e,t,r){switch(t){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,t);case"hbox":var n=this.parseArgumentGroup(r,"text");return null!=n?{type:"styling",mode:n.mode,body:[n],style:"text"}:null;case"raw":var i=this.parseStringGroup("raw",r);return null!=i?{type:"raw",mode:"text",string:i.text}:null;case"primitive":if(r)throw new QW("A primitive argument cannot be optional");var a=this.parseGroup(e);if(null==a)throw new QW("Expected group as "+e,this.fetch());return a;case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new QW("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;" "===this.fetch().text;)this.consume()}parseStringGroup(e,t){var r=this.gullet.scanArgument(t);if(null==r)return null;for(var n,i="";"EOF"!==(n=this.fetch()).text;)i+=n.text,this.consume();return this.consume(),r.text=i,r}parseRegexGroup(e,t){for(var r,n=this.fetch(),i=n,a="";"EOF"!==(r=this.fetch()).text&&e.test(a+r.text);)a+=(i=r).text,this.consume();if(""===a)throw new QW("Invalid "+t+": '"+n.text+"'",n);return n.range(i,a)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(null==t)return null;var r=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!r)throw new QW("Invalid color: '"+t.text+"'",t);var n=r[0];return/^[0-9a-f]{6}$/i.test(n)&&(n="#"+n),{type:"color-token",mode:this.mode,color:n}}parseSizeGroup(e){var t,r=!1;if(this.gullet.consumeSpaces(),!(t=e||"{"===this.gullet.future().text?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||0!==t.text.length||(t.text="0pt",r=!0);var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!n)throw new QW("Invalid size: '"+t.text+"'",t);var i={number:+(n[1]+n[2]),unit:n[3]};if(!LZ(i))throw new QW("Invalid unit: '"+i.unit+"'",t);return{type:"size",mode:this.mode,value:i,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==t)return null;var r=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,t){var r=this.gullet.scanArgument(e);if(null==r)return null;var n=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var a={type:"ordgroup",mode:this.mode,loc:r.loc,body:i};return t&&this.switchMode(n),a}parseGroup(e,t){var r,n=this.fetch(),i=n.text;if("{"===i||"\\begingroup"===i){this.consume();var a="{"===i?"}":"\\endgroup";this.gullet.beginGroup();var s=this.parseExpression(!1,a),o=this.fetch();this.expect(a),this.gullet.endGroup(),r={type:"ordgroup",mode:this.mode,loc:JW.range(n,o),body:s,semisimple:"\\begingroup"===i||void 0}}else if(null==(r=this.parseFunction(t,e)||this.parseSymbol())&&"\\"===i[0]&&!BX.hasOwnProperty(i)){if(this.settings.throwOnError)throw new QW("Undefined control sequence: "+i,n);r=this.formatUnsupportedCmd(i),this.consume()}return r}formLigatures(e){for(var t=e.length-1,r=0;r<t;++r){var n=e[r],i=n.text;"-"===i&&"-"===e[r+1].text&&(r+1<t&&"-"===e[r+2].text?(e.splice(r,3,{type:"textord",mode:"text",loc:JW.range(n,e[r+2]),text:"---"}),t-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:JW.range(n,e[r+1]),text:"--"}),t-=1)),"'"!==i&&"`"!==i||e[r+1].text!==i||(e.splice(r,2,{type:"textord",mode:"text",loc:JW.range(n,e[r+1]),text:i+i}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var r=t.slice(5),n="*"===r.charAt(0);if(n&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new QW("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:r=r.slice(1,-1),star:n}}qX.hasOwnProperty(t[0])&&!eK[this.mode][t[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=qX[t[0]]+t.slice(1));var i,a=IX.exec(t);if(a&&("i"===(t=t.substring(0,a.index))?t="":"j"===t&&(t="")),eK[this.mode][t]){this.settings.strict&&"math"===this.mode&&jK.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var s,o=eK[this.mode][t].group,l=JW.range(e);if(XZ.hasOwnProperty(o)){var c=o;s={type:"atom",mode:this.mode,family:c,loc:l,text:t}}else s={type:o,mode:this.mode,loc:l,text:t};i=s}else{if(!(t.charCodeAt(0)>=128))return null;this.settings.strict&&(bZ(t.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'" ('+t.charCodeAt(0)+")",e)),i={type:"textord",mode:"text",loc:JW.range(e),text:t}}if(this.consume(),a)for(var u=0;u<a[0].length;u++){var d=a[0][u];if(!GX[d])throw new QW("Unknown accent ' "+d+"'",e);var h=GX[d][this.mode]||GX[d].text;if(!h)throw new QW("Accent "+d+" unsupported in "+this.mode+" mode",e);i={type:"accent",mode:this.mode,loc:JW.range(e),label:h,isStretchy:!1,isShifty:!0,base:i}}return i}};VX.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var WX=function(e,t){if(!("string"==typeof e||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new VX(e,t);delete r.gullet.macros.current["\\df@tag"];var n=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new QW("\\tag works only in display equations");n=[{type:"tag",mode:"text",body:n,tag:r.subparse([new XW("\\df@tag")])}]}return n},ZX=function(e,t,r){t.textContent="";var n=XX(e,r).toNode();t.appendChild(n)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),ZX=function(){throw new QW("KaTeX doesn't work in quirks mode.")});var KX=function(e,t){return XX(e,t).toMarkup()},YX=function(e,t){var r=new oZ(t);return WX(e,r)},JX=function(e,t,r){if(r.throwOnError||!(e instanceof QW))throw e;var n=WK.makeSpan(["katex-error"],[new WZ(t)]);return n.setAttribute("title",e.toString()),n.setAttribute("style","color:"+r.errorColor),n},XX=function(e,t){var r=new oZ(t);try{return function(e,t,r){var n,i=jY(r);if("mathml"===r.output)return CY(e,t,i,r.displayMode,!0);if("html"===r.output){var a=bY(e,i);n=WK.makeSpan(["katex"],[a])}else{var s=CY(e,t,i,r.displayMode,!1),o=bY(e,i);n=WK.makeSpan(["katex"],[s,o])}return OY(n,r)}(WX(e,r),e,r)}catch(n){return JX(n,e,r)}},QX=function(e,t){var r=new oZ(t);try{return function(e,t,r){var n=bY(e,jY(r)),i=WK.makeSpan(["katex"],[n]);return OY(i,r)}(WX(e,r),0,r)}catch(n){return JX(n,e,r)}},eQ="0.16.25",tQ={Span:HZ,Anchor:GZ,SymbolNode:WZ,SvgNode:ZZ,PathNode:KZ,LineNode:YZ},rQ={version:eQ,render:ZX,renderToString:KX,ParseError:QW,SETTINGS_SCHEMA:aZ,__parse:YX,__renderToDomTree:XX,__renderToHTMLTree:QX,__setFontMetrics:AZ,__defineSymbol:tK,__defineFunction:rY,__defineMacro:$J,__domTree:tQ};const nQ=Object.freeze(Object.defineProperty({__proto__:null,ParseError:QW,SETTINGS_SCHEMA:aZ,__defineFunction:rY,__defineMacro:$J,__defineSymbol:tK,__domTree:tQ,__parse:YX,__renderToDomTree:XX,__renderToHTMLTree:QX,__setFontMetrics:AZ,default:rQ,get render(){return ZX},renderToString:KX,version:eQ},Symbol.toStringTag,{value:"Module"})),iQ={},aQ=[];function sQ(e){const t=e||iQ;return function(e,r){Nt(e,"element",function(e,n){const i=Array.isArray(e.properties.className)?e.properties.className:aQ,a=i.includes("language-math"),s=i.includes("math-display"),o=i.includes("math-inline");let l=s;if(!a&&!s&&!o)return;let c=n[n.length-1],u=e;if("code"===e.tagName&&a&&c&&"element"===c.type&&"pre"===c.tagName&&(u=c,c=n[n.length-2],l=!0),!c)return;const d=function(e,t){const r=t||{},n="children"in e?e.children:[],i=VW(e),a=YW(e,{whitespace:r.whitespace||"normal"}),s=[];"text"!==e.type&&"comment"!==e.type||s.push(...ZW(e,{breakBefore:!0,breakAfter:!0}));let o=-1;for(;++o<n.length;)s.push(...WW(n[o],e,{whitespace:a,breakBefore:o?void 0:i,breakAfter:o<n.length-1?UW(n[o+1]):i}));const l=[];let c;for(o=-1;++o<s.length;){const e=s[o];"number"==typeof e?void 0!==c&&e>c&&(c=e):e&&(void 0!==c&&c>-1&&l.push("\n".repeat(c)||" "),c=-1,l.push(e))}return l.join("")}(u,{whitespace:"pre"});let h;try{h=rQ.renderToString(d,{...t,displayMode:l,throwOnError:!0})}catch(f){const i=f,a=i.name.toLowerCase();r.message("Could not render math with KaTeX",{ancestors:[...n,e],cause:i,place:e.position,ruleId:a,source:"rehype-katex"});try{h=rQ.renderToString(d,{...t,displayMode:l,strict:"ignore",throwOnError:!1})}catch{h=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(t.errorColor||"#cc0000"),title:String(f)},children:[{type:"text",value:d}]}]}}if("string"==typeof h){h=RW(h).children}const p=c.children.indexOf(u);return c.children.splice(p,1,...h),_t})}}function oQ(e,t){const r=e.indexOf("\r",t),n=e.indexOf("\n",t);return-1===n?r:-1===r||r+1===n?n:r<n?r:n}const lQ={}.hasOwnProperty,cQ=Object.prototype;function uQ(e,t){let r;switch(t.nodeName){case"#comment":{const n=t;return r={type:"comment",value:n.data},hQ(e,n,r),r}case"#document":case"#document-fragment":{const n=t,i="mode"in n&&("quirks"===n.mode||"limited-quirks"===n.mode);if(r={type:"root",children:dQ(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const t=String(e.file),n=function(e){const t=String(e),r=[];return{toOffset:function(e){if(e&&"number"==typeof e.line&&"number"==typeof e.column&&!Number.isNaN(e.line)&&!Number.isNaN(e.column)){for(;r.length<e.line;){const e=r[r.length-1],n=oQ(t,e),i=-1===n?t.length+1:n+1;if(e===i)break;r.push(i)}const n=(e.line>1?r[e.line-2]:0)+e.column-1;if(n<r[e.line-1])return n}},toPoint:function(e){if("number"==typeof e&&e>-1&&e<=t.length){let n=0;for(;;){let i=r[n];if(void 0===i){const e=oQ(t,r[n-1]);i=-1===e?t.length+1:e+1,r[n]=i}if(i>e)return{line:n+1,column:e-(n>0?r[n-1]:0)+1,offset:e};n++}}}}}(t),i=n.toPoint(0),a=n.toPoint(t.length);r.position={start:i,end:a}}return r}case"#documentType":return r={type:"doctype"},hQ(e,t,r),r;case"#text":{const n=t;return r={type:"text",value:n.value},hQ(e,n,r),r}default:return r=function(e,t){const r=e.schema;e.schema=t.namespaceURI===MW.svg?At:St;let n=-1;const i={};for(;++n<t.attrs.length;){const e=t.attrs[n],r=(e.prefix?e.prefix+":":"")+e.name;lQ.call(cQ,r)||(i[r]=e.value)}const a="svg"===e.schema.space?IW:NW,s=a(t.tagName,i,dQ(e,t.childNodes));if(hQ(e,t,s),"template"===s.tagName){const r=t,n=r.sourceCodeLocation,i=n&&n.startTag&&fQ(n.startTag),a=n&&n.endTag&&fQ(n.endTag),o=uQ(e,r.content);i&&a&&e.file&&(o.position={start:i.end,end:a.start}),s.content=o}return e.schema=r,s}(e,t),r}}function dQ(e,t){let r=-1;const n=[];for(;++r<t.length;){const i=uQ(e,t[r]);n.push(i)}return n}function hQ(e,t,r){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const n=pQ(e,r,t.sourceCodeLocation);n&&(e.location=!0,r.position=n)}}function pQ(e,t,r){const n=fQ(r);if("element"===t.type){const i=t.children[t.children.length-1];if(n&&!r.endTag&&i&&i.position&&i.position.end&&(n.end=Object.assign({},i.position.end)),e.verbose){const n={};let i;if(r.attrs)for(i in r.attrs)lQ.call(r.attrs,i)&&(n[wt(e.schema,i).property]=fQ(r.attrs[i]));It(r.startTag);const a=fQ(r.startTag),s=r.endTag?fQ(r.endTag):void 0,o={opening:a};s&&(o.closing=s),o.properties=n,t.data={position:o}}}return n}function fQ(e){const t=mQ({line:e.startLine,column:e.startCol,offset:e.startOffset}),r=mQ({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||r?{start:t,end:r}:void 0}function mQ(e){return e.line&&e.column?e:void 0}class gQ{constructor(e,t,r){this.property=e,this.normal=t,r&&(this.space=r)}}function vQ(e,t){const r={},n={};let i=-1;for(;++i<e.length;)Object.assign(r,e[i].property),Object.assign(n,e[i].normal);return new gQ(r,n,t)}function yQ(e){return e.toLowerCase()}gQ.prototype.property={},gQ.prototype.normal={},gQ.prototype.space=null;class bQ{constructor(e,t){this.property=e,this.attribute=t}}bQ.prototype.space=null,bQ.prototype.boolean=!1,bQ.prototype.booleanish=!1,bQ.prototype.overloadedBoolean=!1,bQ.prototype.number=!1,bQ.prototype.commaSeparated=!1,bQ.prototype.spaceSeparated=!1,bQ.prototype.commaOrSpaceSeparated=!1,bQ.prototype.mustUseProperty=!1,bQ.prototype.defined=!1;let _Q=0;const wQ=NQ(),xQ=NQ(),EQ=NQ(),kQ=NQ(),SQ=NQ(),AQ=NQ(),TQ=NQ();function NQ(){return 2**++_Q}const IQ=Object.freeze(Object.defineProperty({__proto__:null,boolean:wQ,booleanish:xQ,commaOrSpaceSeparated:TQ,commaSeparated:AQ,number:kQ,overloadedBoolean:EQ,spaceSeparated:SQ},Symbol.toStringTag,{value:"Module"})),MQ=Object.keys(IQ);class CQ extends bQ{constructor(e,t,r,n){let i=-1;if(super(e,t),jQ(this,"space",n),"number"==typeof r)for(;++i<MQ.length;){const e=MQ[i];jQ(this,MQ[i],(r&IQ[e])===IQ[e])}}}function jQ(e,t,r){r&&(e[t]=r)}CQ.prototype.defined=!0;const OQ={}.hasOwnProperty;function RQ(e){const t={},r={};let n;for(n in e.properties)if(OQ.call(e.properties,n)){const i=e.properties[n],a=new CQ(n,e.transform(e.attributes||{},n),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(n)&&(a.mustUseProperty=!0),t[n]=a,r[yQ(n)]=n,r[yQ(a.attribute)]=n}return new gQ(t,r,e.space)}const LQ=RQ({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),PQ=RQ({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function DQ(e,t){return t in e?e[t]:t}function $Q(e,t){return DQ(e,t.toLowerCase())}const zQ=RQ({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:$Q,properties:{xmlns:null,xmlnsXLink:null}}),BQ=RQ({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:xQ,ariaAutoComplete:null,ariaBusy:xQ,ariaChecked:xQ,ariaColCount:kQ,ariaColIndex:kQ,ariaColSpan:kQ,ariaControls:SQ,ariaCurrent:null,ariaDescribedBy:SQ,ariaDetails:null,ariaDisabled:xQ,ariaDropEffect:SQ,ariaErrorMessage:null,ariaExpanded:xQ,ariaFlowTo:SQ,ariaGrabbed:xQ,ariaHasPopup:null,ariaHidden:xQ,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:SQ,ariaLevel:kQ,ariaLive:null,ariaModal:xQ,ariaMultiLine:xQ,ariaMultiSelectable:xQ,ariaOrientation:null,ariaOwns:SQ,ariaPlaceholder:null,ariaPosInSet:kQ,ariaPressed:xQ,ariaReadOnly:xQ,ariaRelevant:null,ariaRequired:xQ,ariaRoleDescription:SQ,ariaRowCount:kQ,ariaRowIndex:kQ,ariaRowSpan:kQ,ariaSelected:xQ,ariaSetSize:kQ,ariaSort:null,ariaValueMax:kQ,ariaValueMin:kQ,ariaValueNow:kQ,ariaValueText:null,role:null}}),UQ=RQ({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:$Q,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:AQ,acceptCharset:SQ,accessKey:SQ,action:null,allow:null,allowFullScreen:wQ,allowPaymentRequest:wQ,allowUserMedia:wQ,alt:null,as:null,async:wQ,autoCapitalize:null,autoComplete:SQ,autoFocus:wQ,autoPlay:wQ,blocking:SQ,capture:null,charSet:null,checked:wQ,cite:null,className:SQ,cols:kQ,colSpan:null,content:null,contentEditable:xQ,controls:wQ,controlsList:SQ,coords:kQ|AQ,crossOrigin:null,data:null,dateTime:null,decoding:null,default:wQ,defer:wQ,dir:null,dirName:null,disabled:wQ,download:EQ,draggable:xQ,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:wQ,formTarget:null,headers:SQ,height:kQ,hidden:wQ,high:kQ,href:null,hrefLang:null,htmlFor:SQ,httpEquiv:SQ,id:null,imageSizes:null,imageSrcSet:null,inert:wQ,inputMode:null,integrity:null,is:null,isMap:wQ,itemId:null,itemProp:SQ,itemRef:SQ,itemScope:wQ,itemType:SQ,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:wQ,low:kQ,manifest:null,max:null,maxLength:kQ,media:null,method:null,min:null,minLength:kQ,multiple:wQ,muted:wQ,name:null,nonce:null,noModule:wQ,noValidate:wQ,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:wQ,optimum:kQ,pattern:null,ping:SQ,placeholder:null,playsInline:wQ,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:wQ,referrerPolicy:null,rel:SQ,required:wQ,reversed:wQ,rows:kQ,rowSpan:kQ,sandbox:SQ,scope:null,scoped:wQ,seamless:wQ,selected:wQ,shadowRootClonable:wQ,shadowRootDelegatesFocus:wQ,shadowRootMode:null,shape:null,size:kQ,sizes:null,slot:null,span:kQ,spellCheck:xQ,src:null,srcDoc:null,srcLang:null,srcSet:null,start:kQ,step:null,style:null,tabIndex:kQ,target:null,title:null,translate:null,type:null,typeMustMatch:wQ,useMap:null,value:xQ,width:kQ,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:SQ,axis:null,background:null,bgColor:null,border:kQ,borderColor:null,bottomMargin:kQ,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:wQ,declare:wQ,event:null,face:null,frame:null,frameBorder:null,hSpace:kQ,leftMargin:kQ,link:null,longDesc:null,lowSrc:null,marginHeight:kQ,marginWidth:kQ,noResize:wQ,noHref:wQ,noShade:wQ,noWrap:wQ,object:null,profile:null,prompt:null,rev:null,rightMargin:kQ,rules:null,scheme:null,scrolling:xQ,standby:null,summary:null,text:null,topMargin:kQ,valueType:null,version:null,vAlign:null,vLink:null,vSpace:kQ,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:wQ,disableRemotePlayback:wQ,prefix:null,property:null,results:kQ,security:null,unselectable:null}}),FQ=RQ({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:DQ,properties:{about:TQ,accentHeight:kQ,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:kQ,amplitude:kQ,arabicForm:null,ascent:kQ,attributeName:null,attributeType:null,azimuth:kQ,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:kQ,by:null,calcMode:null,capHeight:kQ,className:SQ,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:kQ,diffuseConstant:kQ,direction:null,display:null,dur:null,divisor:kQ,dominantBaseline:null,download:wQ,dx:null,dy:null,edgeMode:null,editable:null,elevation:kQ,enableBackground:null,end:null,event:null,exponent:kQ,externalResourcesRequired:null,fill:null,fillOpacity:kQ,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:AQ,g2:AQ,glyphName:AQ,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:kQ,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:kQ,horizOriginX:kQ,horizOriginY:kQ,id:null,ideographic:kQ,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:kQ,k:kQ,k1:kQ,k2:kQ,k3:kQ,k4:kQ,kernelMatrix:TQ,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:kQ,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:kQ,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:kQ,overlineThickness:kQ,paintOrder:null,panose1:null,path:null,pathLength:kQ,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:SQ,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:kQ,pointsAtY:kQ,pointsAtZ:kQ,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:TQ,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:TQ,rev:TQ,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:TQ,requiredFeatures:TQ,requiredFonts:TQ,requiredFormats:TQ,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:kQ,specularExponent:kQ,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:kQ,strikethroughThickness:kQ,string:null,stroke:null,strokeDashArray:TQ,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:kQ,strokeOpacity:kQ,strokeWidth:null,style:null,surfaceScale:kQ,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:TQ,tabIndex:kQ,tableValues:null,target:null,targetX:kQ,targetY:kQ,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:TQ,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:kQ,underlineThickness:kQ,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:kQ,values:null,vAlphabetic:kQ,vMathematical:kQ,vectorEffect:null,vHanging:kQ,vIdeographic:kQ,version:null,vertAdvY:kQ,vertOriginX:kQ,vertOriginY:kQ,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:kQ,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),HQ=/^data[-\w.:]+$/i,GQ=/-[a-z]/g,qQ=/[A-Z]/g;function VQ(e){return"-"+e.toLowerCase()}function WQ(e){return e.charAt(1).toUpperCase()}const ZQ=vQ([PQ,LQ,zQ,BQ,UQ],"html"),KQ=vQ([PQ,LQ,zQ,BQ,FQ],"svg"),YQ={}.hasOwnProperty;function JQ(e,t){const r=t||{};function n(t,...r){let i=n.invalid;const a=n.handlers;if(t&&YQ.call(t,e)){const r=String(t[e]);i=YQ.call(a,r)?a[r]:n.unknown}if(i)return i.call(this,t,...r)}return n.handlers=r.handlers||{},n.invalid=r.invalid,n.unknown=r.unknown,n}const XQ={},QQ={}.hasOwnProperty,e0=JQ("type",{handlers:{root:function(e,t){const r={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return r.childNodes=r0(e.children,r,t),n0(e,r),r},element:function(e,t){const r=t;let n=r;"element"===e.type&&"svg"===e.tagName.toLowerCase()&&"html"===r.space&&(n=KQ);const i=[];let a;if(e.properties)for(a in e.properties)if("children"!==a&&QQ.call(e.properties,a)){const t=t0(n,a,e.properties[a]);t&&i.push(t)}const s=n.space,o={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:MW[s],childNodes:[],parentNode:null};o.childNodes=r0(e.children,o,n),n0(e,o),"template"===e.tagName&&e.content&&(o.content=function(e,t){const r={nodeName:"#document-fragment",childNodes:[]};return r.childNodes=r0(e.children,r,t),n0(e,r),r}(e.content,n));return o},text:function(e){const t={nodeName:"#text",value:e.value,parentNode:null};return n0(e,t),t},comment:function(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return n0(e,t),t},doctype:function(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return n0(e,t),t}}});function t0(e,t,r){const n=function(e,t){const r=yQ(t);let n=t,i=bQ;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&"data"===r.slice(0,4)&&HQ.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(GQ,WQ);n="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!GQ.test(e)){let r=e.replace(qQ,VQ);"-"!==r.charAt(0)&&(r="-"+r),t="data"+r}}i=CQ}return new i(n,t)}(e,t);if(!1===r||null==r||"number"==typeof r&&Number.isNaN(r)||!r&&n.boolean)return;Array.isArray(r)&&(r=n.commaSeparated?Mt(r):Ct(r));const i={name:n.attribute,value:!0===r?"":String(r)};if(n.space&&"html"!==n.space&&"svg"!==n.space){const e=i.name.indexOf(":");e<0?i.prefix="":(i.name=i.name.slice(e+1),i.prefix=n.attribute.slice(0,e)),i.namespace=MW[n.space]}return i}function r0(e,t,r){let n=-1;const i=[];if(e)for(;++n<e.length;){const a=e0(e[n],r);a.parentNode=t,i.push(a)}return i}function n0(e,t){const r=e.position;r&&r.start&&r.end&&(It("number"==typeof r.start.offset),It("number"==typeof r.end.offset),t.sourceCodeLocation={startLine:r.start.line,startCol:r.start.column,startOffset:r.start.offset,endLine:r.end.line,endCol:r.end.column,endOffset:r.end.offset})}const i0=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],a0=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),s0="";var o0;!function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"}(o0||(o0={}));const l0="--",c0="[CDATA[",u0="doctype",d0="script",h0="public",p0="system";function f0(e){return e>=55296&&e<=57343}function m0(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159}function g0(e){return e>=64976&&e<=65007||a0.has(e)}var v0;!function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(v0||(v0={}));class y0{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,t){const{line:r,col:n,offset:i}=this,a=n+t,s=i+t;return{code:e,startLine:r,endLine:r,startCol:a,endCol:a,startOffset:s,endOffset:s}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const t=this.html.charCodeAt(this.pos+1);if(function(e){return e>=56320&&e<=57343}(t))return this.pos++,this._addGap(),1024*(e-55296)+9216+t}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,o0.EOF;return this._err(v0.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++){if((32|this.html.charCodeAt(this.pos+r))!==e.charCodeAt(r))return!1}return!0}peek(e){const t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,o0.EOF;const r=this.html.charCodeAt(t);return r===o0.CARRIAGE_RETURN?o0.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,o0.EOF;let e=this.html.charCodeAt(this.pos);if(e===o0.CARRIAGE_RETURN)return this.isEol=!0,this.skipNextNewLine=!0,o0.LINE_FEED;if(e===o0.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine))return this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance();this.skipNextNewLine=!1,f0(e)&&(e=this._processSurrogate(e));return null===this.handler.onParseError||e>31&&e<127||e===o0.LINE_FEED||e===o0.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e}_checkForProblematicCharacters(e){m0(e)?this._err(v0.controlCharacterInInputStream):g0(e)&&this._err(v0.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var b0;function _0(e,t){for(let r=e.attrs.length-1;r>=0;r--)if(e.attrs[r].name===t)return e.attrs[r].value;return null}!function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"}(b0||(b0={}));const w0=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),x0=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var E0;!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(E0||(E0={}));var k0,S0,A0,T0,N0,I0,M0,C0;function j0(e){return e>=E0.ZERO&&e<=E0.NINE}function O0(e){return e>=E0.UPPER_A&&e<=E0.UPPER_F||e>=E0.LOWER_A&&e<=E0.LOWER_F}function R0(e){return e===E0.EQUALS||function(e){return e>=E0.UPPER_A&&e<=E0.UPPER_Z||e>=E0.LOWER_A&&e<=E0.LOWER_Z||j0(e)}(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(k0||(k0={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(S0||(S0={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(A0||(A0={}));class L0{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=S0.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=A0.Strict}startEntity(e){this.decodeMode=e,this.state=S0.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case S0.EntityStart:return e.charCodeAt(t)===E0.NUM?(this.state=S0.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=S0.NamedEntity,this.stateNamedEntity(e,t));case S0.NumericStart:return this.stateNumericStart(e,t);case S0.NumericDecimal:return this.stateNumericDecimal(e,t);case S0.NumericHex:return this.stateNumericHex(e,t);case S0.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===E0.LOWER_X?(this.state=S0.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=S0.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,n){if(t!==r){const i=r-t;this.result=this.result*Math.pow(n,i)+Number.parseInt(e.substr(t,i),n),this.consumed+=i}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const n=e.charCodeAt(t);if(!j0(n)&&!O0(n))return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(n,3);t+=1}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const n=e.charCodeAt(t);if(!j0(n))return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(n,2);t+=1}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return null===(r=this.errors)||void 0===r||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===E0.SEMI)this.consumed+=1;else if(this.decodeMode===A0.Strict)return 0;return this.emitCodePoint(function(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=x0.get(e))&&void 0!==t?t:e}(this.result),this.consumed),this.errors&&(e!==E0.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let n=r[this.treeIndex],i=(n&k0.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const a=e.charCodeAt(t);if(this.treeIndex=P0(r,n,this.treeIndex+Math.max(1,i),a),this.treeIndex<0)return 0===this.result||this.decodeMode===A0.Attribute&&(0===i||R0(a))?0:this.emitNotTerminatedNamedEntity();if(n=r[this.treeIndex],i=(n&k0.VALUE_LENGTH)>>14,0!==i){if(a===E0.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==A0.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,n=(r[t]&k0.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,n,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:n}=this;return this.emitCodePoint(1===t?n[e]&~k0.VALUE_LENGTH:n[e+1],r),3===t&&this.emitCodePoint(n[e+2],r),r}end(){var e;switch(this.state){case S0.NamedEntity:return 0===this.result||this.decodeMode===A0.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case S0.NumericDecimal:return this.emitNumericEntity(0,2);case S0.NumericHex:return this.emitNumericEntity(0,3);case S0.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case S0.EntityStart:return 0}}}function P0(e,t,r,n){const i=(t&k0.BRANCH_LENGTH)>>7,a=t&k0.JUMP_TABLE;if(0===i)return 0!==a&&n===a?r:-1;if(a){const t=n-a;return t<0||t>=i?-1:e[r+t]-1}let s=r,o=s+i-1;for(;s<=o;){const t=s+o>>>1,r=e[t];if(r<n)s=t+1;else{if(!(r>n))return e[t+i];o=t-1}}return-1}!function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"}(T0||(T0={})),function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"}(N0||(N0={})),function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"}(I0||(I0={})),function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"}(M0||(M0={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"}(C0||(C0={}));const D0=new Map([[M0.A,C0.A],[M0.ADDRESS,C0.ADDRESS],[M0.ANNOTATION_XML,C0.ANNOTATION_XML],[M0.APPLET,C0.APPLET],[M0.AREA,C0.AREA],[M0.ARTICLE,C0.ARTICLE],[M0.ASIDE,C0.ASIDE],[M0.B,C0.B],[M0.BASE,C0.BASE],[M0.BASEFONT,C0.BASEFONT],[M0.BGSOUND,C0.BGSOUND],[M0.BIG,C0.BIG],[M0.BLOCKQUOTE,C0.BLOCKQUOTE],[M0.BODY,C0.BODY],[M0.BR,C0.BR],[M0.BUTTON,C0.BUTTON],[M0.CAPTION,C0.CAPTION],[M0.CENTER,C0.CENTER],[M0.CODE,C0.CODE],[M0.COL,C0.COL],[M0.COLGROUP,C0.COLGROUP],[M0.DD,C0.DD],[M0.DESC,C0.DESC],[M0.DETAILS,C0.DETAILS],[M0.DIALOG,C0.DIALOG],[M0.DIR,C0.DIR],[M0.DIV,C0.DIV],[M0.DL,C0.DL],[M0.DT,C0.DT],[M0.EM,C0.EM],[M0.EMBED,C0.EMBED],[M0.FIELDSET,C0.FIELDSET],[M0.FIGCAPTION,C0.FIGCAPTION],[M0.FIGURE,C0.FIGURE],[M0.FONT,C0.FONT],[M0.FOOTER,C0.FOOTER],[M0.FOREIGN_OBJECT,C0.FOREIGN_OBJECT],[M0.FORM,C0.FORM],[M0.FRAME,C0.FRAME],[M0.FRAMESET,C0.FRAMESET],[M0.H1,C0.H1],[M0.H2,C0.H2],[M0.H3,C0.H3],[M0.H4,C0.H4],[M0.H5,C0.H5],[M0.H6,C0.H6],[M0.HEAD,C0.HEAD],[M0.HEADER,C0.HEADER],[M0.HGROUP,C0.HGROUP],[M0.HR,C0.HR],[M0.HTML,C0.HTML],[M0.I,C0.I],[M0.IMG,C0.IMG],[M0.IMAGE,C0.IMAGE],[M0.INPUT,C0.INPUT],[M0.IFRAME,C0.IFRAME],[M0.KEYGEN,C0.KEYGEN],[M0.LABEL,C0.LABEL],[M0.LI,C0.LI],[M0.LINK,C0.LINK],[M0.LISTING,C0.LISTING],[M0.MAIN,C0.MAIN],[M0.MALIGNMARK,C0.MALIGNMARK],[M0.MARQUEE,C0.MARQUEE],[M0.MATH,C0.MATH],[M0.MENU,C0.MENU],[M0.META,C0.META],[M0.MGLYPH,C0.MGLYPH],[M0.MI,C0.MI],[M0.MO,C0.MO],[M0.MN,C0.MN],[M0.MS,C0.MS],[M0.MTEXT,C0.MTEXT],[M0.NAV,C0.NAV],[M0.NOBR,C0.NOBR],[M0.NOFRAMES,C0.NOFRAMES],[M0.NOEMBED,C0.NOEMBED],[M0.NOSCRIPT,C0.NOSCRIPT],[M0.OBJECT,C0.OBJECT],[M0.OL,C0.OL],[M0.OPTGROUP,C0.OPTGROUP],[M0.OPTION,C0.OPTION],[M0.P,C0.P],[M0.PARAM,C0.PARAM],[M0.PLAINTEXT,C0.PLAINTEXT],[M0.PRE,C0.PRE],[M0.RB,C0.RB],[M0.RP,C0.RP],[M0.RT,C0.RT],[M0.RTC,C0.RTC],[M0.RUBY,C0.RUBY],[M0.S,C0.S],[M0.SCRIPT,C0.SCRIPT],[M0.SEARCH,C0.SEARCH],[M0.SECTION,C0.SECTION],[M0.SELECT,C0.SELECT],[M0.SOURCE,C0.SOURCE],[M0.SMALL,C0.SMALL],[M0.SPAN,C0.SPAN],[M0.STRIKE,C0.STRIKE],[M0.STRONG,C0.STRONG],[M0.STYLE,C0.STYLE],[M0.SUB,C0.SUB],[M0.SUMMARY,C0.SUMMARY],[M0.SUP,C0.SUP],[M0.TABLE,C0.TABLE],[M0.TBODY,C0.TBODY],[M0.TEMPLATE,C0.TEMPLATE],[M0.TEXTAREA,C0.TEXTAREA],[M0.TFOOT,C0.TFOOT],[M0.TD,C0.TD],[M0.TH,C0.TH],[M0.THEAD,C0.THEAD],[M0.TITLE,C0.TITLE],[M0.TR,C0.TR],[M0.TRACK,C0.TRACK],[M0.TT,C0.TT],[M0.U,C0.U],[M0.UL,C0.UL],[M0.SVG,C0.SVG],[M0.VAR,C0.VAR],[M0.WBR,C0.WBR],[M0.XMP,C0.XMP]]);function $0(e){var t;return null!==(t=D0.get(e))&&void 0!==t?t:C0.UNKNOWN}const z0=C0,B0={[T0.HTML]:new Set([z0.ADDRESS,z0.APPLET,z0.AREA,z0.ARTICLE,z0.ASIDE,z0.BASE,z0.BASEFONT,z0.BGSOUND,z0.BLOCKQUOTE,z0.BODY,z0.BR,z0.BUTTON,z0.CAPTION,z0.CENTER,z0.COL,z0.COLGROUP,z0.DD,z0.DETAILS,z0.DIR,z0.DIV,z0.DL,z0.DT,z0.EMBED,z0.FIELDSET,z0.FIGCAPTION,z0.FIGURE,z0.FOOTER,z0.FORM,z0.FRAME,z0.FRAMESET,z0.H1,z0.H2,z0.H3,z0.H4,z0.H5,z0.H6,z0.HEAD,z0.HEADER,z0.HGROUP,z0.HR,z0.HTML,z0.IFRAME,z0.IMG,z0.INPUT,z0.LI,z0.LINK,z0.LISTING,z0.MAIN,z0.MARQUEE,z0.MENU,z0.META,z0.NAV,z0.NOEMBED,z0.NOFRAMES,z0.NOSCRIPT,z0.OBJECT,z0.OL,z0.P,z0.PARAM,z0.PLAINTEXT,z0.PRE,z0.SCRIPT,z0.SECTION,z0.SELECT,z0.SOURCE,z0.STYLE,z0.SUMMARY,z0.TABLE,z0.TBODY,z0.TD,z0.TEMPLATE,z0.TEXTAREA,z0.TFOOT,z0.TH,z0.THEAD,z0.TITLE,z0.TR,z0.TRACK,z0.UL,z0.WBR,z0.XMP]),[T0.MATHML]:new Set([z0.MI,z0.MO,z0.MN,z0.MS,z0.MTEXT,z0.ANNOTATION_XML]),[T0.SVG]:new Set([z0.TITLE,z0.FOREIGN_OBJECT,z0.DESC]),[T0.XLINK]:new Set,[T0.XML]:new Set,[T0.XMLNS]:new Set},U0=new Set([z0.H1,z0.H2,z0.H3,z0.H4,z0.H5,z0.H6]);var F0;new Set([M0.STYLE,M0.SCRIPT,M0.XMP,M0.IFRAME,M0.NOEMBED,M0.NOFRAMES,M0.PLAINTEXT]),function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"}(F0||(F0={}));const H0={DATA:F0.DATA,RCDATA:F0.RCDATA,RAWTEXT:F0.RAWTEXT,SCRIPT_DATA:F0.SCRIPT_DATA,PLAINTEXT:F0.PLAINTEXT,CDATA_SECTION:F0.CDATA_SECTION};function G0(e){return e>=o0.LATIN_CAPITAL_A&&e<=o0.LATIN_CAPITAL_Z}function q0(e){return function(e){return e>=o0.LATIN_SMALL_A&&e<=o0.LATIN_SMALL_Z}(e)||G0(e)}function V0(e){return q0(e)||function(e){return e>=o0.DIGIT_0&&e<=o0.DIGIT_9}(e)}function W0(e){return e+32}function Z0(e){return e===o0.SPACE||e===o0.LINE_FEED||e===o0.TABULATION||e===o0.FORM_FEED}function K0(e){return Z0(e)||e===o0.SOLIDUS||e===o0.GREATER_THAN_SIGN}class Y0{constructor(e,t){this.options=e,this.handler=t,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=F0.DATA,this.returnState=F0.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new y0(t),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new L0(w0,(e,t)=>{this.preprocessor.pos=this.entityStartPos+t-1,this._flushCodePointConsumedAsCharacterReference(e)},t.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(v0.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:e=>{this._err(v0.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+e)},validateNumericCharacterReference:e=>{const t=function(e){return e===o0.NULL?v0.nullCharacterReference:e>1114111?v0.characterReferenceOutsideUnicodeRange:f0(e)?v0.surrogateCharacterReference:g0(e)?v0.noncharacterCharacterReference:m0(e)||e===o0.CARRIAGE_RETURN?v0.controlCharacterReference:null}(e);t&&this._err(t,1)}}:void 0)}_err(e,t=0){var r,n;null===(n=(r=this.handler).onParseError)||void 0===n||n.call(r,this.preprocessor.getError(e,t))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null==e||e())}write(e,t,r){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||null==r||r()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}_createStartTagToken(){this.currentToken={type:b0.START_TAG,tagName:"",tagID:C0.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:b0.END_TAG,tagName:"",tagID:C0.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:b0.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:b0.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;const r=this.currentToken;if(null===_0(r,this.currentAttr.name)){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){(null!==(e=(t=r.location).attrs)&&void 0!==e?e:t.attrs=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(v0.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=$0(e.tagName),e.type===b0.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(v0.endTagWithAttributes),e.selfClosing&&this._err(v0.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case b0.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case b0.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case b0.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:b0.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken){if(this.currentCharacterToken.type===e)return void(this.currentCharacterToken.chars+=t);this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk()}this._createCharacterToken(e,t)}_emitCodePoint(e){const t=Z0(e)?b0.WHITESPACE_CHARACTER:e===o0.NULL?b0.NULL_CHARACTER:b0.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(b0.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=F0.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?A0.Attribute:A0.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===F0.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===F0.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===F0.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case F0.DATA:this._stateData(e);break;case F0.RCDATA:this._stateRcdata(e);break;case F0.RAWTEXT:this._stateRawtext(e);break;case F0.SCRIPT_DATA:this._stateScriptData(e);break;case F0.PLAINTEXT:this._statePlaintext(e);break;case F0.TAG_OPEN:this._stateTagOpen(e);break;case F0.END_TAG_OPEN:this._stateEndTagOpen(e);break;case F0.TAG_NAME:this._stateTagName(e);break;case F0.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case F0.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case F0.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case F0.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case F0.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case F0.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case F0.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case F0.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case F0.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case F0.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case F0.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case F0.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case F0.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case F0.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case F0.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case F0.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case F0.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case F0.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case F0.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case F0.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case F0.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case F0.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case F0.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case F0.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case F0.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case F0.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case F0.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case F0.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case F0.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case F0.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case F0.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case F0.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case F0.BOGUS_COMMENT:this._stateBogusComment(e);break;case F0.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case F0.COMMENT_START:this._stateCommentStart(e);break;case F0.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case F0.COMMENT:this._stateComment(e);break;case F0.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case F0.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case F0.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case F0.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case F0.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case F0.COMMENT_END:this._stateCommentEnd(e);break;case F0.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case F0.DOCTYPE:this._stateDoctype(e);break;case F0.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case F0.DOCTYPE_NAME:this._stateDoctypeName(e);break;case F0.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case F0.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case F0.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case F0.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case F0.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case F0.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case F0.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case F0.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case F0.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case F0.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case F0.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case F0.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case F0.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case F0.CDATA_SECTION:this._stateCdataSection(e);break;case F0.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case F0.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case F0.CHARACTER_REFERENCE:this._stateCharacterReference();break;case F0.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;default:throw new Error("Unknown state")}}_stateData(e){switch(e){case o0.LESS_THAN_SIGN:this.state=F0.TAG_OPEN;break;case o0.AMPERSAND:this._startCharacterReference();break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this._emitCodePoint(e);break;case o0.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case o0.AMPERSAND:this._startCharacterReference();break;case o0.LESS_THAN_SIGN:this.state=F0.RCDATA_LESS_THAN_SIGN;break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this._emitChars(s0);break;case o0.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case o0.LESS_THAN_SIGN:this.state=F0.RAWTEXT_LESS_THAN_SIGN;break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this._emitChars(s0);break;case o0.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case o0.LESS_THAN_SIGN:this.state=F0.SCRIPT_DATA_LESS_THAN_SIGN;break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this._emitChars(s0);break;case o0.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case o0.NULL:this._err(v0.unexpectedNullCharacter),this._emitChars(s0);break;case o0.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateTagOpen(e){if(q0(e))this._createStartTagToken(),this.state=F0.TAG_NAME,this._stateTagName(e);else switch(e){case o0.EXCLAMATION_MARK:this.state=F0.MARKUP_DECLARATION_OPEN;break;case o0.SOLIDUS:this.state=F0.END_TAG_OPEN;break;case o0.QUESTION_MARK:this._err(v0.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=F0.BOGUS_COMMENT,this._stateBogusComment(e);break;case o0.EOF:this._err(v0.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(v0.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=F0.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(q0(e))this._createEndTagToken(),this.state=F0.TAG_NAME,this._stateTagName(e);else switch(e){case o0.GREATER_THAN_SIGN:this._err(v0.missingEndTagName),this.state=F0.DATA;break;case o0.EOF:this._err(v0.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(v0.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=F0.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const t=this.currentToken;switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:this.state=F0.BEFORE_ATTRIBUTE_NAME;break;case o0.SOLIDUS:this.state=F0.SELF_CLOSING_START_TAG;break;case o0.GREATER_THAN_SIGN:this.state=F0.DATA,this.emitCurrentTagToken();break;case o0.NULL:this._err(v0.unexpectedNullCharacter),t.tagName+=s0;break;case o0.EOF:this._err(v0.eofInTag),this._emitEOFToken();break;default:t.tagName+=String.fromCodePoint(G0(e)?W0(e):e)}}_stateRcdataLessThanSign(e){e===o0.SOLIDUS?this.state=F0.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=F0.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){q0(e)?(this.state=F0.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=F0.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();this.currentToken.tagName=this.lastStartTagName;switch(this.preprocessor.peek(this.lastStartTagName.length)){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=F0.BEFORE_ATTRIBUTE_NAME,!1;case o0.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=F0.SELF_CLOSING_START_TAG,!1;case o0.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=F0.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=F0.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===o0.SOLIDUS?this.state=F0.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=F0.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){q0(e)?(this.state=F0.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=F0.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=F0.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case o0.SOLIDUS:this.state=F0.SCRIPT_DATA_END_TAG_OPEN;break;case o0.EXCLAMATION_MARK:this.state=F0.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=F0.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){q0(e)?(this.state=F0.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=F0.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=F0.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===o0.HYPHEN_MINUS?(this.state=F0.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=F0.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===o0.HYPHEN_MINUS?(this.state=F0.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=F0.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case o0.HYPHEN_MINUS:this.state=F0.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case o0.LESS_THAN_SIGN:this.state=F0.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this._emitChars(s0);break;case o0.EOF:this._err(v0.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case o0.HYPHEN_MINUS:this.state=F0.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case o0.LESS_THAN_SIGN:this.state=F0.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this.state=F0.SCRIPT_DATA_ESCAPED,this._emitChars(s0);break;case o0.EOF:this._err(v0.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=F0.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case o0.HYPHEN_MINUS:this._emitChars("-");break;case o0.LESS_THAN_SIGN:this.state=F0.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case o0.GREATER_THAN_SIGN:this.state=F0.SCRIPT_DATA,this._emitChars(">");break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this.state=F0.SCRIPT_DATA_ESCAPED,this._emitChars(s0);break;case o0.EOF:this._err(v0.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=F0.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===o0.SOLIDUS?this.state=F0.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:q0(e)?(this._emitChars("<"),this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=F0.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){q0(e)?(this.state=F0.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=F0.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=F0.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(d0,!1)&&K0(this.preprocessor.peek(d0.length))){this._emitCodePoint(e);for(let e=0;e<d0.length;e++)this._emitCodePoint(this._consume());this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=F0.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case o0.HYPHEN_MINUS:this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case o0.LESS_THAN_SIGN:this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this._emitChars(s0);break;case o0.EOF:this._err(v0.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case o0.HYPHEN_MINUS:this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case o0.LESS_THAN_SIGN:this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(s0);break;case o0.EOF:this._err(v0.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case o0.HYPHEN_MINUS:this._emitChars("-");break;case o0.LESS_THAN_SIGN:this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case o0.GREATER_THAN_SIGN:this.state=F0.SCRIPT_DATA,this._emitChars(">");break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(s0);break;case o0.EOF:this._err(v0.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===o0.SOLIDUS?(this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(d0,!1)&&K0(this.preprocessor.peek(d0.length))){this._emitCodePoint(e);for(let e=0;e<d0.length;e++)this._emitCodePoint(this._consume());this.state=F0.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=F0.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:break;case o0.SOLIDUS:case o0.GREATER_THAN_SIGN:case o0.EOF:this.state=F0.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case o0.EQUALS_SIGN:this._err(v0.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=F0.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=F0.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:case o0.SOLIDUS:case o0.GREATER_THAN_SIGN:case o0.EOF:this._leaveAttrName(),this.state=F0.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case o0.EQUALS_SIGN:this._leaveAttrName(),this.state=F0.BEFORE_ATTRIBUTE_VALUE;break;case o0.QUOTATION_MARK:case o0.APOSTROPHE:case o0.LESS_THAN_SIGN:this._err(v0.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this.currentAttr.name+=s0;break;default:this.currentAttr.name+=String.fromCodePoint(G0(e)?W0(e):e)}}_stateAfterAttributeName(e){switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:break;case o0.SOLIDUS:this.state=F0.SELF_CLOSING_START_TAG;break;case o0.EQUALS_SIGN:this.state=F0.BEFORE_ATTRIBUTE_VALUE;break;case o0.GREATER_THAN_SIGN:this.state=F0.DATA,this.emitCurrentTagToken();break;case o0.EOF:this._err(v0.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=F0.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:break;case o0.QUOTATION_MARK:this.state=F0.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case o0.APOSTROPHE:this.state=F0.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case o0.GREATER_THAN_SIGN:this._err(v0.missingAttributeValue),this.state=F0.DATA,this.emitCurrentTagToken();break;default:this.state=F0.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case o0.QUOTATION_MARK:this.state=F0.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case o0.AMPERSAND:this._startCharacterReference();break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this.currentAttr.value+=s0;break;case o0.EOF:this._err(v0.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case o0.APOSTROPHE:this.state=F0.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case o0.AMPERSAND:this._startCharacterReference();break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this.currentAttr.value+=s0;break;case o0.EOF:this._err(v0.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:this._leaveAttrValue(),this.state=F0.BEFORE_ATTRIBUTE_NAME;break;case o0.AMPERSAND:this._startCharacterReference();break;case o0.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=F0.DATA,this.emitCurrentTagToken();break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this.currentAttr.value+=s0;break;case o0.QUOTATION_MARK:case o0.APOSTROPHE:case o0.LESS_THAN_SIGN:case o0.EQUALS_SIGN:case o0.GRAVE_ACCENT:this._err(v0.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case o0.EOF:this._err(v0.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:this._leaveAttrValue(),this.state=F0.BEFORE_ATTRIBUTE_NAME;break;case o0.SOLIDUS:this._leaveAttrValue(),this.state=F0.SELF_CLOSING_START_TAG;break;case o0.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=F0.DATA,this.emitCurrentTagToken();break;case o0.EOF:this._err(v0.eofInTag),this._emitEOFToken();break;default:this._err(v0.missingWhitespaceBetweenAttributes),this.state=F0.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case o0.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=F0.DATA,this.emitCurrentTagToken();break;case o0.EOF:this._err(v0.eofInTag),this._emitEOFToken();break;default:this._err(v0.unexpectedSolidusInTag),this.state=F0.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const t=this.currentToken;switch(e){case o0.GREATER_THAN_SIGN:this.state=F0.DATA,this.emitCurrentComment(t);break;case o0.EOF:this.emitCurrentComment(t),this._emitEOFToken();break;case o0.NULL:this._err(v0.unexpectedNullCharacter),t.data+=s0;break;default:t.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(l0,!0)?(this._createCommentToken(l0.length+1),this.state=F0.COMMENT_START):this._consumeSequenceIfMatch(u0,!1)?(this.currentLocation=this.getCurrentLocation(u0.length+1),this.state=F0.DOCTYPE):this._consumeSequenceIfMatch(c0,!0)?this.inForeignNode?this.state=F0.CDATA_SECTION:(this._err(v0.cdataInHtmlContent),this._createCommentToken(c0.length+1),this.currentToken.data="[CDATA[",this.state=F0.BOGUS_COMMENT):this._ensureHibernation()||(this._err(v0.incorrectlyOpenedComment),this._createCommentToken(2),this.state=F0.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case o0.HYPHEN_MINUS:this.state=F0.COMMENT_START_DASH;break;case o0.GREATER_THAN_SIGN:{this._err(v0.abruptClosingOfEmptyComment),this.state=F0.DATA;const e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=F0.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const t=this.currentToken;switch(e){case o0.HYPHEN_MINUS:this.state=F0.COMMENT_END;break;case o0.GREATER_THAN_SIGN:this._err(v0.abruptClosingOfEmptyComment),this.state=F0.DATA,this.emitCurrentComment(t);break;case o0.EOF:this._err(v0.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=F0.COMMENT,this._stateComment(e)}}_stateComment(e){const t=this.currentToken;switch(e){case o0.HYPHEN_MINUS:this.state=F0.COMMENT_END_DASH;break;case o0.LESS_THAN_SIGN:t.data+="<",this.state=F0.COMMENT_LESS_THAN_SIGN;break;case o0.NULL:this._err(v0.unexpectedNullCharacter),t.data+=s0;break;case o0.EOF:this._err(v0.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const t=this.currentToken;switch(e){case o0.EXCLAMATION_MARK:t.data+="!",this.state=F0.COMMENT_LESS_THAN_SIGN_BANG;break;case o0.LESS_THAN_SIGN:t.data+="<";break;default:this.state=F0.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===o0.HYPHEN_MINUS?this.state=F0.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=F0.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===o0.HYPHEN_MINUS?this.state=F0.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=F0.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==o0.GREATER_THAN_SIGN&&e!==o0.EOF&&this._err(v0.nestedComment),this.state=F0.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const t=this.currentToken;switch(e){case o0.HYPHEN_MINUS:this.state=F0.COMMENT_END;break;case o0.EOF:this._err(v0.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=F0.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const t=this.currentToken;switch(e){case o0.GREATER_THAN_SIGN:this.state=F0.DATA,this.emitCurrentComment(t);break;case o0.EXCLAMATION_MARK:this.state=F0.COMMENT_END_BANG;break;case o0.HYPHEN_MINUS:t.data+="-";break;case o0.EOF:this._err(v0.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--",this.state=F0.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const t=this.currentToken;switch(e){case o0.HYPHEN_MINUS:t.data+="--!",this.state=F0.COMMENT_END_DASH;break;case o0.GREATER_THAN_SIGN:this._err(v0.incorrectlyClosedComment),this.state=F0.DATA,this.emitCurrentComment(t);break;case o0.EOF:this._err(v0.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--!",this.state=F0.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:this.state=F0.BEFORE_DOCTYPE_NAME;break;case o0.GREATER_THAN_SIGN:this.state=F0.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case o0.EOF:{this._err(v0.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(v0.missingWhitespaceBeforeDoctypeName),this.state=F0.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(G0(e))this._createDoctypeToken(String.fromCharCode(W0(e))),this.state=F0.DOCTYPE_NAME;else switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:break;case o0.NULL:this._err(v0.unexpectedNullCharacter),this._createDoctypeToken(s0),this.state=F0.DOCTYPE_NAME;break;case o0.GREATER_THAN_SIGN:{this._err(v0.missingDoctypeName),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=F0.DATA;break}case o0.EOF:{this._err(v0.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=F0.DOCTYPE_NAME}}_stateDoctypeName(e){const t=this.currentToken;switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:this.state=F0.AFTER_DOCTYPE_NAME;break;case o0.GREATER_THAN_SIGN:this.state=F0.DATA,this.emitCurrentDoctype(t);break;case o0.NULL:this._err(v0.unexpectedNullCharacter),t.name+=s0;break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.name+=String.fromCodePoint(G0(e)?W0(e):e)}}_stateAfterDoctypeName(e){const t=this.currentToken;switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:break;case o0.GREATER_THAN_SIGN:this.state=F0.DATA,this.emitCurrentDoctype(t);break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(h0,!1)?this.state=F0.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(p0,!1)?this.state=F0.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(v0.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=F0.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const t=this.currentToken;switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:this.state=F0.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case o0.QUOTATION_MARK:this._err(v0.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=F0.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case o0.APOSTROPHE:this._err(v0.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=F0.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case o0.GREATER_THAN_SIGN:this._err(v0.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=F0.DATA,this.emitCurrentDoctype(t);break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(v0.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=F0.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:break;case o0.QUOTATION_MARK:t.publicId="",this.state=F0.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case o0.APOSTROPHE:t.publicId="",this.state=F0.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case o0.GREATER_THAN_SIGN:this._err(v0.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=F0.DATA,this.emitCurrentDoctype(t);break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(v0.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=F0.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case o0.QUOTATION_MARK:this.state=F0.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case o0.NULL:this._err(v0.unexpectedNullCharacter),t.publicId+=s0;break;case o0.GREATER_THAN_SIGN:this._err(v0.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=F0.DATA;break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case o0.APOSTROPHE:this.state=F0.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case o0.NULL:this._err(v0.unexpectedNullCharacter),t.publicId+=s0;break;case o0.GREATER_THAN_SIGN:this._err(v0.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=F0.DATA;break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:this.state=F0.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case o0.GREATER_THAN_SIGN:this.state=F0.DATA,this.emitCurrentDoctype(t);break;case o0.QUOTATION_MARK:this._err(v0.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=F0.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case o0.APOSTROPHE:this._err(v0.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=F0.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(v0.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=F0.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const t=this.currentToken;switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:break;case o0.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=F0.DATA;break;case o0.QUOTATION_MARK:t.systemId="",this.state=F0.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case o0.APOSTROPHE:t.systemId="",this.state=F0.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(v0.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=F0.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const t=this.currentToken;switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:this.state=F0.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case o0.QUOTATION_MARK:this._err(v0.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=F0.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case o0.APOSTROPHE:this._err(v0.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=F0.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case o0.GREATER_THAN_SIGN:this._err(v0.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=F0.DATA,this.emitCurrentDoctype(t);break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(v0.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=F0.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:break;case o0.QUOTATION_MARK:t.systemId="",this.state=F0.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case o0.APOSTROPHE:t.systemId="",this.state=F0.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case o0.GREATER_THAN_SIGN:this._err(v0.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=F0.DATA,this.emitCurrentDoctype(t);break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(v0.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=F0.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case o0.QUOTATION_MARK:this.state=F0.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case o0.NULL:this._err(v0.unexpectedNullCharacter),t.systemId+=s0;break;case o0.GREATER_THAN_SIGN:this._err(v0.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=F0.DATA;break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case o0.APOSTROPHE:this.state=F0.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case o0.NULL:this._err(v0.unexpectedNullCharacter),t.systemId+=s0;break;case o0.GREATER_THAN_SIGN:this._err(v0.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=F0.DATA;break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case o0.SPACE:case o0.LINE_FEED:case o0.TABULATION:case o0.FORM_FEED:break;case o0.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=F0.DATA;break;case o0.EOF:this._err(v0.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(v0.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=F0.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const t=this.currentToken;switch(e){case o0.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=F0.DATA;break;case o0.NULL:this._err(v0.unexpectedNullCharacter);break;case o0.EOF:this.emitCurrentDoctype(t),this._emitEOFToken()}}_stateCdataSection(e){switch(e){case o0.RIGHT_SQUARE_BRACKET:this.state=F0.CDATA_SECTION_BRACKET;break;case o0.EOF:this._err(v0.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===o0.RIGHT_SQUARE_BRACKET?this.state=F0.CDATA_SECTION_END:(this._emitChars("]"),this.state=F0.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case o0.GREATER_THAN_SIGN:this.state=F0.DATA;break;case o0.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=F0.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0){if(!this.preprocessor.lastChunkWritten)return this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,void(this.preprocessor.endOfChunkHit=!0);e=this.entityDecoder.end()}0===e?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(o0.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&V0(this.preprocessor.peek(1))?F0.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){V0(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===o0.SEMICOLON&&this._err(v0.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const J0=new Set([C0.DD,C0.DT,C0.LI,C0.OPTGROUP,C0.OPTION,C0.P,C0.RB,C0.RP,C0.RT,C0.RTC]),X0=new Set([...J0,C0.CAPTION,C0.COLGROUP,C0.TBODY,C0.TD,C0.TFOOT,C0.TH,C0.THEAD,C0.TR]),Q0=new Set([C0.APPLET,C0.CAPTION,C0.HTML,C0.MARQUEE,C0.OBJECT,C0.TABLE,C0.TD,C0.TEMPLATE,C0.TH]),e1=new Set([...Q0,C0.OL,C0.UL]),t1=new Set([...Q0,C0.BUTTON]),r1=new Set([C0.ANNOTATION_XML,C0.MI,C0.MN,C0.MO,C0.MS,C0.MTEXT]),n1=new Set([C0.DESC,C0.FOREIGN_OBJECT,C0.TITLE]),i1=new Set([C0.TR,C0.TEMPLATE,C0.HTML]),a1=new Set([C0.TBODY,C0.TFOOT,C0.THEAD,C0.TEMPLATE,C0.HTML]),s1=new Set([C0.TABLE,C0.TEMPLATE,C0.HTML]),o1=new Set([C0.TD,C0.TH]);class l1{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,t,r){this.treeAdapter=t,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=C0.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===C0.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===T0.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,t){const r=this._indexOf(e);this.items[r]=t,r===this.stackTop&&(this.current=t)}insertAfter(e,t,r){const n=this._indexOf(e)+1;this.items.splice(n,0,t),this.tagIDs.splice(n,0,r),this.stackTop++,n===this.stackTop&&this._updateCurrentElement(),this.current&&void 0!==this.currentTagId&&this.handler.onItemPush(this.current,this.currentTagId,n===this.stackTop)}popUntilTagNamePopped(e){let t=this.stackTop+1;do{t=this.tagIDs.lastIndexOf(e,t-1)}while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==T0.HTML);this.shortenToLength(Math.max(t,0))}shortenToLength(e){for(;this.stackTop>=e;){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}popUntilElementPopped(e){const t=this._indexOf(e);this.shortenToLength(Math.max(t,0))}popUntilPopped(e,t){const r=this._indexOfTagNames(e,t);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(U0,T0.HTML)}popUntilTableCellPopped(){this.popUntilPopped(o1,T0.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,t){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===t)return r;return-1}clearBackTo(e,t){const r=this._indexOfTagNames(e,t);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(s1,T0.HTML)}clearBackToTableBodyContext(){this.clearBackTo(a1,T0.HTML)}clearBackToTableRowContext(){this.clearBackTo(i1,T0.HTML)}remove(e){const t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===C0.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const t=this._indexOf(e)-1;return t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===C0.HTML}hasInDynamicScope(e,t){for(let r=this.stackTop;r>=0;r--){const n=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case T0.HTML:if(n===e)return!0;if(t.has(n))return!1;break;case T0.SVG:if(n1.has(n))return!1;break;case T0.MATHML:if(r1.has(n))return!1}}return!0}hasInScope(e){return this.hasInDynamicScope(e,Q0)}hasInListItemScope(e){return this.hasInDynamicScope(e,e1)}hasInButtonScope(e){return this.hasInDynamicScope(e,t1)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case T0.HTML:if(U0.has(t))return!0;if(Q0.has(t))return!1;break;case T0.SVG:if(n1.has(t))return!1;break;case T0.MATHML:if(r1.has(t))return!1}}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===T0.HTML)switch(this.tagIDs[t]){case e:return!0;case C0.TABLE:case C0.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===T0.HTML)switch(this.tagIDs[e]){case C0.TBODY:case C0.THEAD:case C0.TFOOT:return!0;case C0.TABLE:case C0.HTML:return!1}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===T0.HTML)switch(this.tagIDs[t]){case e:return!0;case C0.OPTION:case C0.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;void 0!==this.currentTagId&&J0.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;void 0!==this.currentTagId&&X0.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;void 0!==this.currentTagId&&this.currentTagId!==e&&X0.has(this.currentTagId);)this.pop()}}var c1;!function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"}(c1||(c1={}));const u1={type:c1.Marker};class d1{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,t){const r=[],n=t.length,i=this.treeAdapter.getTagName(e),a=this.treeAdapter.getNamespaceURI(e);for(let s=0;s<this.entries.length;s++){const e=this.entries[s];if(e.type===c1.Marker)break;const{element:t}=e;if(this.treeAdapter.getTagName(t)===i&&this.treeAdapter.getNamespaceURI(t)===a){const e=this.treeAdapter.getAttrList(t);e.length===n&&r.push({idx:s,attrs:e})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<3)return;const t=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,t);if(r.length<3)return;const n=new Map(t.map(e=>[e.name,e.value]));let i=0;for(let a=0;a<r.length;a++){const e=r[a];e.attrs.every(e=>n.get(e.name)===e.value)&&(i+=1,i>=3&&this.entries.splice(e.idx,1))}}insertMarker(){this.entries.unshift(u1)}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:c1.Element,element:e,token:t})}insertElementAfterBookmark(e,t){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:c1.Element,element:e,token:t})}removeEntry(e){const t=this.entries.indexOf(e);-1!==t&&this.entries.splice(t,1)}clearToLastMarker(){const e=this.entries.indexOf(u1);-1===e?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const t=this.entries.find(t=>t.type===c1.Marker||this.treeAdapter.getTagName(t.element)===e);return t&&t.type===c1.Element?t:null}getElementEntry(e){return this.entries.find(t=>t.type===c1.Element&&t.element===e)}}const h1={createDocument:()=>({nodeName:"#document",mode:I0.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(e,t,r)=>({nodeName:e,tagName:e,attrs:r,namespaceURI:t,childNodes:[],parentNode:null}),createCommentNode:e=>({nodeName:"#comment",data:e,parentNode:null}),createTextNode:e=>({nodeName:"#text",value:e,parentNode:null}),appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,r){const n=e.childNodes.indexOf(r);e.childNodes.splice(n,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(e,t,r,n){const i=e.childNodes.find(e=>"#documentType"===e.nodeName);if(i)i.name=t,i.publicId=r,i.systemId=n;else{const i={nodeName:"#documentType",name:t,publicId:r,systemId:n,parentNode:null};h1.appendChild(e,i)}},setDocumentMode(e,t){e.mode=t},getDocumentMode:e=>e.mode,detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const r=e.childNodes[e.childNodes.length-1];if(h1.isTextNode(r))return void(r.value+=t)}h1.appendChild(e,h1.createTextNode(t))},insertTextBefore(e,t,r){const n=e.childNodes[e.childNodes.indexOf(r)-1];n&&h1.isTextNode(n)?n.value+=t:h1.insertBefore(e,h1.createTextNode(t),r)},adoptAttributes(e,t){const r=new Set(e.attrs.map(e=>e.name));for(let n=0;n<t.length;n++)r.has(t[n].name)||e.attrs.push(t[n])},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attrs,getTagName:e=>e.tagName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.value,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName:e=>e.name,getDocumentTypeNodePublicId:e=>e.publicId,getDocumentTypeNodeSystemId:e=>e.systemId,isTextNode:e=>"#text"===e.nodeName,isCommentNode:e=>"#comment"===e.nodeName,isDocumentTypeNode:e=>"#documentType"===e.nodeName,isElementNode:e=>Object.prototype.hasOwnProperty.call(e,"tagName"),setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},p1="html",f1=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],m1=[...f1,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],g1=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),v1=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],y1=[...v1,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function b1(e,t){return t.some(t=>e.startsWith(t))}const _1="text/html",w1="application/xhtml+xml",x1=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),E1=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:T0.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:T0.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:T0.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:T0.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:T0.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:T0.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:T0.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:T0.XML}],["xml:space",{prefix:"xml",name:"space",namespace:T0.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:T0.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:T0.XMLNS}]]),k1=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),S1=new Set([C0.B,C0.BIG,C0.BLOCKQUOTE,C0.BODY,C0.BR,C0.CENTER,C0.CODE,C0.DD,C0.DIV,C0.DL,C0.DT,C0.EM,C0.EMBED,C0.H1,C0.H2,C0.H3,C0.H4,C0.H5,C0.H6,C0.HEAD,C0.HR,C0.I,C0.IMG,C0.LI,C0.LISTING,C0.MENU,C0.META,C0.NOBR,C0.OL,C0.P,C0.PRE,C0.RUBY,C0.S,C0.SMALL,C0.SPAN,C0.STRONG,C0.STRIKE,C0.SUB,C0.SUP,C0.TABLE,C0.TT,C0.U,C0.UL,C0.VAR]);function A1(e){for(let t=0;t<e.attrs.length;t++)if("definitionurl"===e.attrs[t].name){e.attrs[t].name="definitionURL";break}}function T1(e){for(let t=0;t<e.attrs.length;t++){const r=x1.get(e.attrs[t].name);null!=r&&(e.attrs[t].name=r)}}function N1(e){for(let t=0;t<e.attrs.length;t++){const r=E1.get(e.attrs[t].name);r&&(e.attrs[t].prefix=r.prefix,e.attrs[t].name=r.name,e.attrs[t].namespace=r.namespace)}}function I1(e,t,r,n){return(!n||n===T0.HTML)&&function(e,t,r){if(t===T0.MATHML&&e===C0.ANNOTATION_XML)for(let n=0;n<r.length;n++)if(r[n].name===N0.ENCODING){const e=r[n].value.toLowerCase();return e===_1||e===w1}return t===T0.SVG&&(e===C0.FOREIGN_OBJECT||e===C0.DESC||e===C0.TITLE)}(e,t,r)||(!n||n===T0.MATHML)&&function(e,t){return t===T0.MATHML&&(e===C0.MI||e===C0.MO||e===C0.MN||e===C0.MS||e===C0.MTEXT)}(e,t)}var M1;!function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"}(M1||(M1={}));const C1={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},j1=new Set([C0.TABLE,C0.TBODY,C0.TFOOT,C0.THEAD,C0.TR]),O1={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:h1,onParseError:null};class R1{constructor(e,t,r=null,n=null){this.fragmentContext=r,this.scriptHandler=n,this.currentToken=null,this.stopped=!1,this.insertionMode=M1.INITIAL,this.originalInsertionMode=M1.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...O1,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!=t?t:this.treeAdapter.createDocument(),this.tokenizer=new Y0(this.options,this),this.activeFormattingElements=new d1(this.treeAdapter),this.fragmentContextID=r?$0(this.treeAdapter.getTagName(r)):C0.UNKNOWN,this._setContextModes(null!=r?r:this.document,this.fragmentContextID),this.openElements=new l1(this.document,this.treeAdapter,this)}static parse(e,t){const r=new this(t);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,t){const r={...O1,...t};null!=e||(e=r.treeAdapter.createElement(M0.TEMPLATE,T0.HTML,[]));const n=r.treeAdapter.createElement("documentmock",T0.HTML,[]),i=new this(r,n,e);return i.fragmentContextID===C0.TEMPLATE&&i.tmplInsertionModeStack.unshift(M1.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,r){var n;if(!this.onParseError)return;const i=null!==(n=e.location)&&void 0!==n?n:C1,a={code:t,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:r?i.startLine:i.endLine,endCol:r?i.startCol:i.endCol,endOffset:r?i.startOffset:i.endOffset};this.onParseError(a)}onItemPush(e,t,r){var n,i;null===(i=(n=this.treeAdapter).onItemPush)||void 0===i||i.call(n,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var r,n;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null===(n=(r=this.treeAdapter).onItemPop)||void 0===n||n.call(r,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):({current:e,currentTagId:t}=this.openElements),this._setContextModes(e,t)}}_setContextModes(e,t){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===T0.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&void 0!==e&&void 0!==t&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,T0.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=M1.TEXT}switchToPlaintextParsing(){this.insertionMode=M1.TEXT,this.originalInsertionMode=M1.IN_BODY,this.tokenizer.state=H0.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===M0.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===T0.HTML)switch(this.fragmentContextID){case C0.TITLE:case C0.TEXTAREA:this.tokenizer.state=H0.RCDATA;break;case C0.STYLE:case C0.XMP:case C0.IFRAME:case C0.NOEMBED:case C0.NOFRAMES:case C0.NOSCRIPT:this.tokenizer.state=H0.RAWTEXT;break;case C0.SCRIPT:this.tokenizer.state=H0.SCRIPT_DATA;break;case C0.PLAINTEXT:this.tokenizer.state=H0.PLAINTEXT}}_setDocumentType(e){const t=e.name||"",r=e.publicId||"",n=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,r,n),e.location){const t=this.treeAdapter.getChildNodes(this.document).find(e=>this.treeAdapter.isDocumentTypeNode(e));t&&this.treeAdapter.setNodeSourceCodeLocation(t,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){const r=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(null!=t?t:this.document,e)}}_appendElement(e,t){const r=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,t){const r=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,t){const r=this.treeAdapter.createElement(e,T0.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,T0.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,r),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(M0.HTML,T0.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,C0.HTML)}_appendCommentNode(e,t){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let t,r;if(this._shouldFosterParentOnInsertion()?(({parent:t,beforeElement:r}=this._findFosterParentingLocation()),r?this.treeAdapter.insertTextBefore(t,e.chars,r):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const n=this.treeAdapter.getChildNodes(t),i=r?n.lastIndexOf(r):n.length,a=n[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(a)){const{endLine:t,endCol:r,endOffset:n}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(a,{endLine:t,endCol:r,endOffset:n})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}_adoptNodes(e,t){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(t,r)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const r=t.location,n=this.treeAdapter.getTagName(e),i=t.type===b0.END_TAG&&n===t.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,r;return 0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,r=this.fragmentContextID):({current:t,currentTagId:r}=this.openElements),(e.tagID!==C0.SVG||this.treeAdapter.getTagName(t)!==M0.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==T0.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===C0.MGLYPH||e.tagID===C0.MALIGNMARK)&&void 0!==r&&!this._isIntegrationPoint(r,t,T0.HTML))}_processToken(e){switch(e.type){case b0.CHARACTER:this.onCharacter(e);break;case b0.NULL_CHARACTER:this.onNullCharacter(e);break;case b0.COMMENT:this.onComment(e);break;case b0.DOCTYPE:this.onDoctype(e);break;case b0.START_TAG:this._processStartTag(e);break;case b0.END_TAG:this.onEndTag(e);break;case b0.EOF:this.onEof(e);break;case b0.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e)}}_isIntegrationPoint(e,t,r){return I1(e,this.treeAdapter.getNamespaceURI(t),this.treeAdapter.getAttrList(t),r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex(e=>e.type===c1.Marker||this.openElements.contains(e.element));for(let r=-1===t?e-1:t-1;r>=0;r--){const e=this.activeFormattingElements.entries[r];this._insertElement(e.token,this.treeAdapter.getNamespaceURI(e.element)),e.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=M1.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(C0.P),this.openElements.popUntilTagNamePopped(C0.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case C0.TR:return void(this.insertionMode=M1.IN_ROW);case C0.TBODY:case C0.THEAD:case C0.TFOOT:return void(this.insertionMode=M1.IN_TABLE_BODY);case C0.CAPTION:return void(this.insertionMode=M1.IN_CAPTION);case C0.COLGROUP:return void(this.insertionMode=M1.IN_COLUMN_GROUP);case C0.TABLE:return void(this.insertionMode=M1.IN_TABLE);case C0.BODY:return void(this.insertionMode=M1.IN_BODY);case C0.FRAMESET:return void(this.insertionMode=M1.IN_FRAMESET);case C0.SELECT:return void this._resetInsertionModeForSelect(e);case C0.TEMPLATE:return void(this.insertionMode=this.tmplInsertionModeStack[0]);case C0.HTML:return void(this.insertionMode=this.headElement?M1.AFTER_HEAD:M1.BEFORE_HEAD);case C0.TD:case C0.TH:if(e>0)return void(this.insertionMode=M1.IN_CELL);break;case C0.HEAD:if(e>0)return void(this.insertionMode=M1.IN_HEAD)}this.insertionMode=M1.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.tagIDs[t];if(e===C0.TEMPLATE)break;if(e===C0.TABLE)return void(this.insertionMode=M1.IN_SELECT_IN_TABLE)}this.insertionMode=M1.IN_SELECT}_isElementCausesFosterParenting(e){return j1.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&void 0!==this.openElements.currentTagId&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case C0.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===T0.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case C0.TABLE:{const r=this.treeAdapter.getParentNode(t);return r?{parent:r,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){const r=this.treeAdapter.getNamespaceURI(e);return B0[r].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e);else switch(this.insertionMode){case M1.INITIAL:G1(this,e);break;case M1.BEFORE_HTML:q1(this,e);break;case M1.BEFORE_HEAD:V1(this,e);break;case M1.IN_HEAD:K1(this,e);break;case M1.IN_HEAD_NO_SCRIPT:Y1(this,e);break;case M1.AFTER_HEAD:J1(this,e);break;case M1.IN_BODY:case M1.IN_CAPTION:case M1.IN_CELL:case M1.IN_TEMPLATE:e4(this,e);break;case M1.TEXT:case M1.IN_SELECT:case M1.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case M1.IN_TABLE:case M1.IN_TABLE_BODY:case M1.IN_ROW:c4(this,e);break;case M1.IN_TABLE_TEXT:f4(this,e);break;case M1.IN_COLUMN_GROUP:y4(this,e);break;case M1.AFTER_BODY:T4(this,e);break;case M1.AFTER_AFTER_BODY:N4(this,e)}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){t.chars=s0,e._insertCharacters(t)}(this,e);else switch(this.insertionMode){case M1.INITIAL:G1(this,e);break;case M1.BEFORE_HTML:q1(this,e);break;case M1.BEFORE_HEAD:V1(this,e);break;case M1.IN_HEAD:K1(this,e);break;case M1.IN_HEAD_NO_SCRIPT:Y1(this,e);break;case M1.AFTER_HEAD:J1(this,e);break;case M1.TEXT:this._insertCharacters(e);break;case M1.IN_TABLE:case M1.IN_TABLE_BODY:case M1.IN_ROW:c4(this,e);break;case M1.IN_COLUMN_GROUP:y4(this,e);break;case M1.AFTER_BODY:T4(this,e);break;case M1.AFTER_AFTER_BODY:N4(this,e)}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML)F1(this,e);else switch(this.insertionMode){case M1.INITIAL:case M1.BEFORE_HTML:case M1.BEFORE_HEAD:case M1.IN_HEAD:case M1.IN_HEAD_NO_SCRIPT:case M1.AFTER_HEAD:case M1.IN_BODY:case M1.IN_TABLE:case M1.IN_CAPTION:case M1.IN_COLUMN_GROUP:case M1.IN_TABLE_BODY:case M1.IN_ROW:case M1.IN_CELL:case M1.IN_SELECT:case M1.IN_SELECT_IN_TABLE:case M1.IN_TEMPLATE:case M1.IN_FRAMESET:case M1.AFTER_FRAMESET:F1(this,e);break;case M1.IN_TABLE_TEXT:m4(this,e);break;case M1.AFTER_BODY:!function(e,t){e._appendCommentNode(t,e.openElements.items[0])}(this,e);break;case M1.AFTER_AFTER_BODY:case M1.AFTER_AFTER_FRAMESET:!function(e,t){e._appendCommentNode(t,e.document)}(this,e)}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case M1.INITIAL:!function(e,t){e._setDocumentType(t);const r=t.forceQuirks?I0.QUIRKS:function(e){if(e.name!==p1)return I0.QUIRKS;const{systemId:t}=e;if(t&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===t.toLowerCase())return I0.QUIRKS;let{publicId:r}=e;if(null!==r){if(r=r.toLowerCase(),g1.has(r))return I0.QUIRKS;let e=null===t?m1:f1;if(b1(r,e))return I0.QUIRKS;if(e=null===t?v1:y1,b1(r,e))return I0.LIMITED_QUIRKS}return I0.NO_QUIRKS}(t);(function(e){return e.name===p1&&null===e.publicId&&(null===e.systemId||"about:legacy-compat"===e.systemId)})(t)||e._err(t,v0.nonConformingDoctype);e.treeAdapter.setDocumentMode(e.document,r),e.insertionMode=M1.BEFORE_HTML}(this,e);break;case M1.BEFORE_HEAD:case M1.IN_HEAD:case M1.IN_HEAD_NO_SCRIPT:case M1.AFTER_HEAD:this._err(e,v0.misplacedDoctype);break;case M1.IN_TABLE_TEXT:m4(this,e)}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,v0.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?function(e,t){if(function(e){const t=e.tagID;return t===C0.FONT&&e.attrs.some(({name:e})=>e===N0.COLOR||e===N0.SIZE||e===N0.FACE)||S1.has(t)}(t))I4(e),e._startTagOutsideForeignContent(t);else{const r=e._getAdjustedCurrentElement(),n=e.treeAdapter.getNamespaceURI(r);n===T0.MATHML?A1(t):n===T0.SVG&&(!function(e){const t=k1.get(e.tagName);null!=t&&(e.tagName=t,e.tagID=$0(e.tagName))}(t),T1(t)),N1(t),t.selfClosing?e._appendElement(t,n):e._insertElement(t,n),t.ackSelfClosing=!0}}(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case M1.INITIAL:G1(this,e);break;case M1.BEFORE_HTML:!function(e,t){t.tagID===C0.HTML?(e._insertElement(t,T0.HTML),e.insertionMode=M1.BEFORE_HEAD):q1(e,t)}(this,e);break;case M1.BEFORE_HEAD:!function(e,t){switch(t.tagID){case C0.HTML:a4(e,t);break;case C0.HEAD:e._insertElement(t,T0.HTML),e.headElement=e.openElements.current,e.insertionMode=M1.IN_HEAD;break;default:V1(e,t)}}(this,e);break;case M1.IN_HEAD:W1(this,e);break;case M1.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case C0.HTML:a4(e,t);break;case C0.BASEFONT:case C0.BGSOUND:case C0.HEAD:case C0.LINK:case C0.META:case C0.NOFRAMES:case C0.STYLE:W1(e,t);break;case C0.NOSCRIPT:e._err(t,v0.nestedNoscriptInHead);break;default:Y1(e,t)}}(this,e);break;case M1.AFTER_HEAD:!function(e,t){switch(t.tagID){case C0.HTML:a4(e,t);break;case C0.BODY:e._insertElement(t,T0.HTML),e.framesetOk=!1,e.insertionMode=M1.IN_BODY;break;case C0.FRAMESET:e._insertElement(t,T0.HTML),e.insertionMode=M1.IN_FRAMESET;break;case C0.BASE:case C0.BASEFONT:case C0.BGSOUND:case C0.LINK:case C0.META:case C0.NOFRAMES:case C0.SCRIPT:case C0.STYLE:case C0.TEMPLATE:case C0.TITLE:e._err(t,v0.abandonedHeadElementChild),e.openElements.push(e.headElement,C0.HEAD),W1(e,t),e.openElements.remove(e.headElement);break;case C0.HEAD:e._err(t,v0.misplacedStartTagForHeadElement);break;default:J1(e,t)}}(this,e);break;case M1.IN_BODY:a4(this,e);break;case M1.IN_TABLE:u4(this,e);break;case M1.IN_TABLE_TEXT:m4(this,e);break;case M1.IN_CAPTION:!function(e,t){const r=t.tagID;g4.has(r)?e.openElements.hasInTableScope(C0.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(C0.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=M1.IN_TABLE,u4(e,t)):a4(e,t)}(this,e);break;case M1.IN_COLUMN_GROUP:v4(this,e);break;case M1.IN_TABLE_BODY:b4(this,e);break;case M1.IN_ROW:w4(this,e);break;case M1.IN_CELL:!function(e,t){const r=t.tagID;g4.has(r)?(e.openElements.hasInTableScope(C0.TD)||e.openElements.hasInTableScope(C0.TH))&&(e._closeTableCell(),w4(e,t)):a4(e,t)}(this,e);break;case M1.IN_SELECT:E4(this,e);break;case M1.IN_SELECT_IN_TABLE:!function(e,t){const r=t.tagID;r===C0.CAPTION||r===C0.TABLE||r===C0.TBODY||r===C0.TFOOT||r===C0.THEAD||r===C0.TR||r===C0.TD||r===C0.TH?(e.openElements.popUntilTagNamePopped(C0.SELECT),e._resetInsertionMode(),e._processStartTag(t)):E4(e,t)}(this,e);break;case M1.IN_TEMPLATE:!function(e,t){switch(t.tagID){case C0.BASE:case C0.BASEFONT:case C0.BGSOUND:case C0.LINK:case C0.META:case C0.NOFRAMES:case C0.SCRIPT:case C0.STYLE:case C0.TEMPLATE:case C0.TITLE:W1(e,t);break;case C0.CAPTION:case C0.COLGROUP:case C0.TBODY:case C0.TFOOT:case C0.THEAD:e.tmplInsertionModeStack[0]=M1.IN_TABLE,e.insertionMode=M1.IN_TABLE,u4(e,t);break;case C0.COL:e.tmplInsertionModeStack[0]=M1.IN_COLUMN_GROUP,e.insertionMode=M1.IN_COLUMN_GROUP,v4(e,t);break;case C0.TR:e.tmplInsertionModeStack[0]=M1.IN_TABLE_BODY,e.insertionMode=M1.IN_TABLE_BODY,b4(e,t);break;case C0.TD:case C0.TH:e.tmplInsertionModeStack[0]=M1.IN_ROW,e.insertionMode=M1.IN_ROW,w4(e,t);break;default:e.tmplInsertionModeStack[0]=M1.IN_BODY,e.insertionMode=M1.IN_BODY,a4(e,t)}}(this,e);break;case M1.AFTER_BODY:!function(e,t){t.tagID===C0.HTML?a4(e,t):T4(e,t)}(this,e);break;case M1.IN_FRAMESET:!function(e,t){switch(t.tagID){case C0.HTML:a4(e,t);break;case C0.FRAMESET:e._insertElement(t,T0.HTML);break;case C0.FRAME:e._appendElement(t,T0.HTML),t.ackSelfClosing=!0;break;case C0.NOFRAMES:W1(e,t)}}(this,e);break;case M1.AFTER_FRAMESET:!function(e,t){switch(t.tagID){case C0.HTML:a4(e,t);break;case C0.NOFRAMES:W1(e,t)}}(this,e);break;case M1.AFTER_AFTER_BODY:!function(e,t){t.tagID===C0.HTML?a4(e,t):N4(e,t)}(this,e);break;case M1.AFTER_AFTER_FRAMESET:!function(e,t){switch(t.tagID){case C0.HTML:a4(e,t);break;case C0.NOFRAMES:W1(e,t)}}(this,e)}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?function(e,t){if(t.tagID===C0.P||t.tagID===C0.BR)return I4(e),void e._endTagOutsideForeignContent(t);for(let r=e.openElements.stackTop;r>0;r--){const n=e.openElements.items[r];if(e.treeAdapter.getNamespaceURI(n)===T0.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(n);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(r);break}}}(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case M1.INITIAL:G1(this,e);break;case M1.BEFORE_HTML:!function(e,t){const r=t.tagID;r!==C0.HTML&&r!==C0.HEAD&&r!==C0.BODY&&r!==C0.BR||q1(e,t)}(this,e);break;case M1.BEFORE_HEAD:!function(e,t){const r=t.tagID;r===C0.HEAD||r===C0.BODY||r===C0.HTML||r===C0.BR?V1(e,t):e._err(t,v0.endTagWithoutMatchingOpenElement)}(this,e);break;case M1.IN_HEAD:!function(e,t){switch(t.tagID){case C0.HEAD:e.openElements.pop(),e.insertionMode=M1.AFTER_HEAD;break;case C0.BODY:case C0.BR:case C0.HTML:K1(e,t);break;case C0.TEMPLATE:Z1(e,t);break;default:e._err(t,v0.endTagWithoutMatchingOpenElement)}}(this,e);break;case M1.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case C0.NOSCRIPT:e.openElements.pop(),e.insertionMode=M1.IN_HEAD;break;case C0.BR:Y1(e,t);break;default:e._err(t,v0.endTagWithoutMatchingOpenElement)}}(this,e);break;case M1.AFTER_HEAD:!function(e,t){switch(t.tagID){case C0.BODY:case C0.HTML:case C0.BR:J1(e,t);break;case C0.TEMPLATE:Z1(e,t);break;default:e._err(t,v0.endTagWithoutMatchingOpenElement)}}(this,e);break;case M1.IN_BODY:o4(this,e);break;case M1.TEXT:!function(e,t){var r;t.tagID===C0.SCRIPT&&(null===(r=e.scriptHandler)||void 0===r||r.call(e,e.openElements.current));e.openElements.pop(),e.insertionMode=e.originalInsertionMode}(this,e);break;case M1.IN_TABLE:d4(this,e);break;case M1.IN_TABLE_TEXT:m4(this,e);break;case M1.IN_CAPTION:!function(e,t){const r=t.tagID;switch(r){case C0.CAPTION:case C0.TABLE:e.openElements.hasInTableScope(C0.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(C0.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=M1.IN_TABLE,r===C0.TABLE&&d4(e,t));break;case C0.BODY:case C0.COL:case C0.COLGROUP:case C0.HTML:case C0.TBODY:case C0.TD:case C0.TFOOT:case C0.TH:case C0.THEAD:case C0.TR:break;default:o4(e,t)}}(this,e);break;case M1.IN_COLUMN_GROUP:!function(e,t){switch(t.tagID){case C0.COLGROUP:e.openElements.currentTagId===C0.COLGROUP&&(e.openElements.pop(),e.insertionMode=M1.IN_TABLE);break;case C0.TEMPLATE:Z1(e,t);break;case C0.COL:break;default:y4(e,t)}}(this,e);break;case M1.IN_TABLE_BODY:_4(this,e);break;case M1.IN_ROW:x4(this,e);break;case M1.IN_CELL:!function(e,t){const r=t.tagID;switch(r){case C0.TD:case C0.TH:e.openElements.hasInTableScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=M1.IN_ROW);break;case C0.TABLE:case C0.TBODY:case C0.TFOOT:case C0.THEAD:case C0.TR:e.openElements.hasInTableScope(r)&&(e._closeTableCell(),x4(e,t));break;case C0.BODY:case C0.CAPTION:case C0.COL:case C0.COLGROUP:case C0.HTML:break;default:o4(e,t)}}(this,e);break;case M1.IN_SELECT:k4(this,e);break;case M1.IN_SELECT_IN_TABLE:!function(e,t){const r=t.tagID;r===C0.CAPTION||r===C0.TABLE||r===C0.TBODY||r===C0.TFOOT||r===C0.THEAD||r===C0.TR||r===C0.TD||r===C0.TH?e.openElements.hasInTableScope(r)&&(e.openElements.popUntilTagNamePopped(C0.SELECT),e._resetInsertionMode(),e.onEndTag(t)):k4(e,t)}(this,e);break;case M1.IN_TEMPLATE:!function(e,t){t.tagID===C0.TEMPLATE&&Z1(e,t)}(this,e);break;case M1.AFTER_BODY:A4(this,e);break;case M1.IN_FRAMESET:!function(e,t){t.tagID!==C0.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagId===C0.FRAMESET||(e.insertionMode=M1.AFTER_FRAMESET))}(this,e);break;case M1.AFTER_FRAMESET:!function(e,t){t.tagID===C0.HTML&&(e.insertionMode=M1.AFTER_AFTER_FRAMESET)}(this,e);break;case M1.AFTER_AFTER_BODY:N4(this,e)}}onEof(e){switch(this.insertionMode){case M1.INITIAL:G1(this,e);break;case M1.BEFORE_HTML:q1(this,e);break;case M1.BEFORE_HEAD:V1(this,e);break;case M1.IN_HEAD:K1(this,e);break;case M1.IN_HEAD_NO_SCRIPT:Y1(this,e);break;case M1.AFTER_HEAD:J1(this,e);break;case M1.IN_BODY:case M1.IN_TABLE:case M1.IN_CAPTION:case M1.IN_COLUMN_GROUP:case M1.IN_TABLE_BODY:case M1.IN_ROW:case M1.IN_CELL:case M1.IN_SELECT:case M1.IN_SELECT_IN_TABLE:l4(this,e);break;case M1.TEXT:!function(e,t){e._err(t,v0.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}(this,e);break;case M1.IN_TABLE_TEXT:m4(this,e);break;case M1.IN_TEMPLATE:S4(this,e);break;case M1.AFTER_BODY:case M1.IN_FRAMESET:case M1.AFTER_FRAMESET:case M1.AFTER_AFTER_BODY:case M1.AFTER_AFTER_FRAMESET:H1(this,e)}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===o0.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode)this._insertCharacters(e);else switch(this.insertionMode){case M1.IN_HEAD:case M1.IN_HEAD_NO_SCRIPT:case M1.AFTER_HEAD:case M1.TEXT:case M1.IN_COLUMN_GROUP:case M1.IN_SELECT:case M1.IN_SELECT_IN_TABLE:case M1.IN_FRAMESET:case M1.AFTER_FRAMESET:this._insertCharacters(e);break;case M1.IN_BODY:case M1.IN_CAPTION:case M1.IN_CELL:case M1.IN_TEMPLATE:case M1.AFTER_BODY:case M1.AFTER_AFTER_BODY:case M1.AFTER_AFTER_FRAMESET:Q1(this,e);break;case M1.IN_TABLE:case M1.IN_TABLE_BODY:case M1.IN_ROW:c4(this,e);break;case M1.IN_TABLE_TEXT:p4(this,e)}}}function L1(e,t){let r=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return r?e.openElements.contains(r.element)?e.openElements.hasInScope(t.tagID)||(r=null):(e.activeFormattingElements.removeEntry(r),r=null):s4(e,t),r}function P1(e,t){let r=null,n=e.openElements.stackTop;for(;n>=0;n--){const i=e.openElements.items[n];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[n])&&(r=i)}return r||(e.openElements.shortenToLength(Math.max(n,0)),e.activeFormattingElements.removeEntry(t)),r}function D1(e,t,r){let n=t,i=e.openElements.getCommonAncestor(t);for(let a=0,s=i;s!==r;a++,s=i){i=e.openElements.getCommonAncestor(s);const r=e.activeFormattingElements.getElementEntry(s),o=r&&a>=3;!r||o?(o&&e.activeFormattingElements.removeEntry(r),e.openElements.remove(s)):(s=$1(e,r),n===t&&(e.activeFormattingElements.bookmark=r),e.treeAdapter.detachNode(n),e.treeAdapter.appendChild(s,n),n=s)}return n}function $1(e,t){const r=e.treeAdapter.getNamespaceURI(t.element),n=e.treeAdapter.createElement(t.token.tagName,r,t.token.attrs);return e.openElements.replace(t.element,n),t.element=n,n}function z1(e,t,r){const n=$0(e.treeAdapter.getTagName(t));if(e._isElementCausesFosterParenting(n))e._fosterParentElement(r);else{const i=e.treeAdapter.getNamespaceURI(t);n===C0.TEMPLATE&&i===T0.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,r)}}function B1(e,t,r){const n=e.treeAdapter.getNamespaceURI(r.element),{token:i}=r,a=e.treeAdapter.createElement(i.tagName,n,i.attrs);e._adoptNodes(t,a),e.treeAdapter.appendChild(t,a),e.activeFormattingElements.insertElementAfterBookmark(a,i),e.activeFormattingElements.removeEntry(r),e.openElements.remove(r.element),e.openElements.insertAfter(t,a,i.tagID)}function U1(e,t){for(let r=0;r<8;r++){const r=L1(e,t);if(!r)break;const n=P1(e,r);if(!n)break;e.activeFormattingElements.bookmark=r;const i=D1(e,n,r.element),a=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(i),a&&z1(e,a,i),B1(e,n,r)}}function F1(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function H1(e,t){if(e.stopped=!0,t.location){const r=e.fragmentContext?0:2;for(let n=e.openElements.stackTop;n>=r;n--)e._setEndLocation(e.openElements.items[n],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],n=e.treeAdapter.getNodeSourceCodeLocation(r);if(n&&!n.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const r=e.openElements.items[1],n=e.treeAdapter.getNodeSourceCodeLocation(r);n&&!n.endTag&&e._setEndLocation(r,t)}}}}function G1(e,t){e._err(t,v0.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,I0.QUIRKS),e.insertionMode=M1.BEFORE_HTML,e._processToken(t)}function q1(e,t){e._insertFakeRootElement(),e.insertionMode=M1.BEFORE_HEAD,e._processToken(t)}function V1(e,t){e._insertFakeElement(M0.HEAD,C0.HEAD),e.headElement=e.openElements.current,e.insertionMode=M1.IN_HEAD,e._processToken(t)}function W1(e,t){switch(t.tagID){case C0.HTML:a4(e,t);break;case C0.BASE:case C0.BASEFONT:case C0.BGSOUND:case C0.LINK:case C0.META:e._appendElement(t,T0.HTML),t.ackSelfClosing=!0;break;case C0.TITLE:e._switchToTextParsing(t,H0.RCDATA);break;case C0.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(t,H0.RAWTEXT):(e._insertElement(t,T0.HTML),e.insertionMode=M1.IN_HEAD_NO_SCRIPT);break;case C0.NOFRAMES:case C0.STYLE:e._switchToTextParsing(t,H0.RAWTEXT);break;case C0.SCRIPT:e._switchToTextParsing(t,H0.SCRIPT_DATA);break;case C0.TEMPLATE:e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=M1.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(M1.IN_TEMPLATE);break;case C0.HEAD:e._err(t,v0.misplacedStartTagForHeadElement);break;default:K1(e,t)}}function Z1(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==C0.TEMPLATE&&e._err(t,v0.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(C0.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,v0.endTagWithoutMatchingOpenElement)}function K1(e,t){e.openElements.pop(),e.insertionMode=M1.AFTER_HEAD,e._processToken(t)}function Y1(e,t){const r=t.type===b0.EOF?v0.openElementsLeftAfterEof:v0.disallowedContentInNoscriptInHead;e._err(t,r),e.openElements.pop(),e.insertionMode=M1.IN_HEAD,e._processToken(t)}function J1(e,t){e._insertFakeElement(M0.BODY,C0.BODY),e.insertionMode=M1.IN_BODY,X1(e,t)}function X1(e,t){switch(t.type){case b0.CHARACTER:e4(e,t);break;case b0.WHITESPACE_CHARACTER:Q1(e,t);break;case b0.COMMENT:F1(e,t);break;case b0.START_TAG:a4(e,t);break;case b0.END_TAG:o4(e,t);break;case b0.EOF:l4(e,t)}}function Q1(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function e4(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function t4(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,T0.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function r4(e){const t=_0(e,N0.TYPE);return null!=t&&"hidden"===t.toLowerCase()}function n4(e,t){e._switchToTextParsing(t,H0.RAWTEXT)}function i4(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,T0.HTML)}function a4(e,t){switch(t.tagID){case C0.I:case C0.S:case C0.B:case C0.U:case C0.EM:case C0.TT:case C0.BIG:case C0.CODE:case C0.FONT:case C0.SMALL:case C0.STRIKE:case C0.STRONG:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,T0.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case C0.A:!function(e,t){const r=e.activeFormattingElements.getElementEntryInScopeWithTagName(M0.A);r&&(U1(e,t),e.openElements.remove(r.element),e.activeFormattingElements.removeEntry(r)),e._reconstructActiveFormattingElements(),e._insertElement(t,T0.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case C0.H1:case C0.H2:case C0.H3:case C0.H4:case C0.H5:case C0.H6:!function(e,t){e.openElements.hasInButtonScope(C0.P)&&e._closePElement(),void 0!==e.openElements.currentTagId&&U0.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,T0.HTML)}(e,t);break;case C0.P:case C0.DL:case C0.OL:case C0.UL:case C0.DIV:case C0.DIR:case C0.NAV:case C0.MAIN:case C0.MENU:case C0.ASIDE:case C0.CENTER:case C0.FIGURE:case C0.FOOTER:case C0.HEADER:case C0.HGROUP:case C0.DIALOG:case C0.DETAILS:case C0.ADDRESS:case C0.ARTICLE:case C0.SEARCH:case C0.SECTION:case C0.SUMMARY:case C0.FIELDSET:case C0.BLOCKQUOTE:case C0.FIGCAPTION:!function(e,t){e.openElements.hasInButtonScope(C0.P)&&e._closePElement(),e._insertElement(t,T0.HTML)}(e,t);break;case C0.LI:case C0.DD:case C0.DT:!function(e,t){e.framesetOk=!1;const r=t.tagID;for(let n=e.openElements.stackTop;n>=0;n--){const t=e.openElements.tagIDs[n];if(r===C0.LI&&t===C0.LI||(r===C0.DD||r===C0.DT)&&(t===C0.DD||t===C0.DT)){e.openElements.generateImpliedEndTagsWithExclusion(t),e.openElements.popUntilTagNamePopped(t);break}if(t!==C0.ADDRESS&&t!==C0.DIV&&t!==C0.P&&e._isSpecialElement(e.openElements.items[n],t))break}e.openElements.hasInButtonScope(C0.P)&&e._closePElement(),e._insertElement(t,T0.HTML)}(e,t);break;case C0.BR:case C0.IMG:case C0.WBR:case C0.AREA:case C0.EMBED:case C0.KEYGEN:t4(e,t);break;case C0.HR:!function(e,t){e.openElements.hasInButtonScope(C0.P)&&e._closePElement(),e._appendElement(t,T0.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t);break;case C0.RB:case C0.RTC:!function(e,t){e.openElements.hasInScope(C0.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,T0.HTML)}(e,t);break;case C0.RT:case C0.RP:!function(e,t){e.openElements.hasInScope(C0.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(C0.RTC),e._insertElement(t,T0.HTML)}(e,t);break;case C0.PRE:case C0.LISTING:!function(e,t){e.openElements.hasInButtonScope(C0.P)&&e._closePElement(),e._insertElement(t,T0.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}(e,t);break;case C0.XMP:!function(e,t){e.openElements.hasInButtonScope(C0.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,H0.RAWTEXT)}(e,t);break;case C0.SVG:!function(e,t){e._reconstructActiveFormattingElements(),T1(t),N1(t),t.selfClosing?e._appendElement(t,T0.SVG):e._insertElement(t,T0.SVG),t.ackSelfClosing=!0}(e,t);break;case C0.HTML:!function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t);break;case C0.BASE:case C0.LINK:case C0.META:case C0.STYLE:case C0.TITLE:case C0.SCRIPT:case C0.BGSOUND:case C0.BASEFONT:case C0.TEMPLATE:W1(e,t);break;case C0.BODY:!function(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(r,t.attrs))}(e,t);break;case C0.FORM:!function(e,t){const r=e.openElements.tmplCount>0;e.formElement&&!r||(e.openElements.hasInButtonScope(C0.P)&&e._closePElement(),e._insertElement(t,T0.HTML),r||(e.formElement=e.openElements.current))}(e,t);break;case C0.NOBR:!function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(C0.NOBR)&&(U1(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,T0.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case C0.MATH:!function(e,t){e._reconstructActiveFormattingElements(),A1(t),N1(t),t.selfClosing?e._appendElement(t,T0.MATHML):e._insertElement(t,T0.MATHML),t.ackSelfClosing=!0}(e,t);break;case C0.TABLE:!function(e,t){e.treeAdapter.getDocumentMode(e.document)!==I0.QUIRKS&&e.openElements.hasInButtonScope(C0.P)&&e._closePElement(),e._insertElement(t,T0.HTML),e.framesetOk=!1,e.insertionMode=M1.IN_TABLE}(e,t);break;case C0.INPUT:!function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,T0.HTML),r4(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t);break;case C0.PARAM:case C0.TRACK:case C0.SOURCE:!function(e,t){e._appendElement(t,T0.HTML),t.ackSelfClosing=!0}(e,t);break;case C0.IMAGE:!function(e,t){t.tagName=M0.IMG,t.tagID=C0.IMG,t4(e,t)}(e,t);break;case C0.BUTTON:!function(e,t){e.openElements.hasInScope(C0.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(C0.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,T0.HTML),e.framesetOk=!1}(e,t);break;case C0.APPLET:case C0.OBJECT:case C0.MARQUEE:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,T0.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}(e,t);break;case C0.IFRAME:!function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,H0.RAWTEXT)}(e,t);break;case C0.SELECT:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,T0.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===M1.IN_TABLE||e.insertionMode===M1.IN_CAPTION||e.insertionMode===M1.IN_TABLE_BODY||e.insertionMode===M1.IN_ROW||e.insertionMode===M1.IN_CELL?M1.IN_SELECT_IN_TABLE:M1.IN_SELECT}(e,t);break;case C0.OPTION:case C0.OPTGROUP:!function(e,t){e.openElements.currentTagId===C0.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,T0.HTML)}(e,t);break;case C0.NOEMBED:case C0.NOFRAMES:n4(e,t);break;case C0.FRAMESET:!function(e,t){const r=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&r&&(e.treeAdapter.detachNode(r),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,T0.HTML),e.insertionMode=M1.IN_FRAMESET)}(e,t);break;case C0.TEXTAREA:!function(e,t){e._insertElement(t,T0.HTML),e.skipNextNewLine=!0,e.tokenizer.state=H0.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=M1.TEXT}(e,t);break;case C0.NOSCRIPT:e.options.scriptingEnabled?n4(e,t):i4(e,t);break;case C0.PLAINTEXT:!function(e,t){e.openElements.hasInButtonScope(C0.P)&&e._closePElement(),e._insertElement(t,T0.HTML),e.tokenizer.state=H0.PLAINTEXT}(e,t);break;case C0.COL:case C0.TH:case C0.TD:case C0.TR:case C0.HEAD:case C0.FRAME:case C0.TBODY:case C0.TFOOT:case C0.THEAD:case C0.CAPTION:case C0.COLGROUP:break;default:i4(e,t)}}function s4(e,t){const r=t.tagName,n=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const t=e.openElements.items[i],a=e.openElements.tagIDs[i];if(n===a&&(n!==C0.UNKNOWN||e.treeAdapter.getTagName(t)===r)){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(t,a))break}}function o4(e,t){switch(t.tagID){case C0.A:case C0.B:case C0.I:case C0.S:case C0.U:case C0.EM:case C0.TT:case C0.BIG:case C0.CODE:case C0.FONT:case C0.NOBR:case C0.SMALL:case C0.STRIKE:case C0.STRONG:U1(e,t);break;case C0.P:!function(e){e.openElements.hasInButtonScope(C0.P)||e._insertFakeElement(M0.P,C0.P),e._closePElement()}(e);break;case C0.DL:case C0.UL:case C0.OL:case C0.DIR:case C0.DIV:case C0.NAV:case C0.PRE:case C0.MAIN:case C0.MENU:case C0.ASIDE:case C0.BUTTON:case C0.CENTER:case C0.FIGURE:case C0.FOOTER:case C0.HEADER:case C0.HGROUP:case C0.DIALOG:case C0.ADDRESS:case C0.ARTICLE:case C0.DETAILS:case C0.SEARCH:case C0.SECTION:case C0.SUMMARY:case C0.LISTING:case C0.FIELDSET:case C0.BLOCKQUOTE:case C0.FIGCAPTION:!function(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r))}(e,t);break;case C0.LI:!function(e){e.openElements.hasInListItemScope(C0.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(C0.LI),e.openElements.popUntilTagNamePopped(C0.LI))}(e);break;case C0.DD:case C0.DT:!function(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r))}(e,t);break;case C0.H1:case C0.H2:case C0.H3:case C0.H4:case C0.H5:case C0.H6:!function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e);break;case C0.BR:!function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(M0.BR,C0.BR),e.openElements.pop(),e.framesetOk=!1}(e);break;case C0.BODY:!function(e,t){if(e.openElements.hasInScope(C0.BODY)&&(e.insertionMode=M1.AFTER_BODY,e.options.sourceCodeLocationInfo)){const r=e.openElements.tryPeekProperlyNestedBodyElement();r&&e._setEndLocation(r,t)}}(e,t);break;case C0.HTML:!function(e,t){e.openElements.hasInScope(C0.BODY)&&(e.insertionMode=M1.AFTER_BODY,A4(e,t))}(e,t);break;case C0.FORM:!function(e){const t=e.openElements.tmplCount>0,{formElement:r}=e;t||(e.formElement=null),(r||t)&&e.openElements.hasInScope(C0.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(C0.FORM):r&&e.openElements.remove(r))}(e);break;case C0.APPLET:case C0.OBJECT:case C0.MARQUEE:!function(e,t){const r=t.tagID;e.openElements.hasInScope(r)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(r),e.activeFormattingElements.clearToLastMarker())}(e,t);break;case C0.TEMPLATE:Z1(e,t);break;default:s4(e,t)}}function l4(e,t){e.tmplInsertionModeStack.length>0?S4(e,t):H1(e,t)}function c4(e,t){if(void 0!==e.openElements.currentTagId&&j1.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=M1.IN_TABLE_TEXT,t.type){case b0.CHARACTER:f4(e,t);break;case b0.WHITESPACE_CHARACTER:p4(e,t)}else h4(e,t)}function u4(e,t){switch(t.tagID){case C0.TD:case C0.TH:case C0.TR:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(M0.TBODY,C0.TBODY),e.insertionMode=M1.IN_TABLE_BODY,b4(e,t)}(e,t);break;case C0.STYLE:case C0.SCRIPT:case C0.TEMPLATE:W1(e,t);break;case C0.COL:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(M0.COLGROUP,C0.COLGROUP),e.insertionMode=M1.IN_COLUMN_GROUP,v4(e,t)}(e,t);break;case C0.FORM:!function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,T0.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t);break;case C0.TABLE:!function(e,t){e.openElements.hasInTableScope(C0.TABLE)&&(e.openElements.popUntilTagNamePopped(C0.TABLE),e._resetInsertionMode(),e._processStartTag(t))}(e,t);break;case C0.TBODY:case C0.TFOOT:case C0.THEAD:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,T0.HTML),e.insertionMode=M1.IN_TABLE_BODY}(e,t);break;case C0.INPUT:!function(e,t){r4(t)?e._appendElement(t,T0.HTML):h4(e,t),t.ackSelfClosing=!0}(e,t);break;case C0.CAPTION:!function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,T0.HTML),e.insertionMode=M1.IN_CAPTION}(e,t);break;case C0.COLGROUP:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,T0.HTML),e.insertionMode=M1.IN_COLUMN_GROUP}(e,t);break;default:h4(e,t)}}function d4(e,t){switch(t.tagID){case C0.TABLE:e.openElements.hasInTableScope(C0.TABLE)&&(e.openElements.popUntilTagNamePopped(C0.TABLE),e._resetInsertionMode());break;case C0.TEMPLATE:Z1(e,t);break;case C0.BODY:case C0.CAPTION:case C0.COL:case C0.COLGROUP:case C0.HTML:case C0.TBODY:case C0.TD:case C0.TFOOT:case C0.TH:case C0.THEAD:case C0.TR:break;default:h4(e,t)}}function h4(e,t){const r=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,X1(e,t),e.fosterParentingEnabled=r}function p4(e,t){e.pendingCharacterTokens.push(t)}function f4(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function m4(e,t){let r=0;if(e.hasNonWhitespacePendingCharacterToken)for(;r<e.pendingCharacterTokens.length;r++)h4(e,e.pendingCharacterTokens[r]);else for(;r<e.pendingCharacterTokens.length;r++)e._insertCharacters(e.pendingCharacterTokens[r]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const g4=new Set([C0.CAPTION,C0.COL,C0.COLGROUP,C0.TBODY,C0.TD,C0.TFOOT,C0.TH,C0.THEAD,C0.TR]);function v4(e,t){switch(t.tagID){case C0.HTML:a4(e,t);break;case C0.COL:e._appendElement(t,T0.HTML),t.ackSelfClosing=!0;break;case C0.TEMPLATE:W1(e,t);break;default:y4(e,t)}}function y4(e,t){e.openElements.currentTagId===C0.COLGROUP&&(e.openElements.pop(),e.insertionMode=M1.IN_TABLE,e._processToken(t))}function b4(e,t){switch(t.tagID){case C0.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(t,T0.HTML),e.insertionMode=M1.IN_ROW;break;case C0.TH:case C0.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(M0.TR,C0.TR),e.insertionMode=M1.IN_ROW,w4(e,t);break;case C0.CAPTION:case C0.COL:case C0.COLGROUP:case C0.TBODY:case C0.TFOOT:case C0.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=M1.IN_TABLE,u4(e,t));break;default:u4(e,t)}}function _4(e,t){const r=t.tagID;switch(t.tagID){case C0.TBODY:case C0.TFOOT:case C0.THEAD:e.openElements.hasInTableScope(r)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=M1.IN_TABLE);break;case C0.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=M1.IN_TABLE,d4(e,t));break;case C0.BODY:case C0.CAPTION:case C0.COL:case C0.COLGROUP:case C0.HTML:case C0.TD:case C0.TH:case C0.TR:break;default:d4(e,t)}}function w4(e,t){switch(t.tagID){case C0.TH:case C0.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(t,T0.HTML),e.insertionMode=M1.IN_CELL,e.activeFormattingElements.insertMarker();break;case C0.CAPTION:case C0.COL:case C0.COLGROUP:case C0.TBODY:case C0.TFOOT:case C0.THEAD:case C0.TR:e.openElements.hasInTableScope(C0.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=M1.IN_TABLE_BODY,b4(e,t));break;default:u4(e,t)}}function x4(e,t){switch(t.tagID){case C0.TR:e.openElements.hasInTableScope(C0.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=M1.IN_TABLE_BODY);break;case C0.TABLE:e.openElements.hasInTableScope(C0.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=M1.IN_TABLE_BODY,_4(e,t));break;case C0.TBODY:case C0.TFOOT:case C0.THEAD:(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(C0.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=M1.IN_TABLE_BODY,_4(e,t));break;case C0.BODY:case C0.CAPTION:case C0.COL:case C0.COLGROUP:case C0.HTML:case C0.TD:case C0.TH:break;default:d4(e,t)}}function E4(e,t){switch(t.tagID){case C0.HTML:a4(e,t);break;case C0.OPTION:e.openElements.currentTagId===C0.OPTION&&e.openElements.pop(),e._insertElement(t,T0.HTML);break;case C0.OPTGROUP:e.openElements.currentTagId===C0.OPTION&&e.openElements.pop(),e.openElements.currentTagId===C0.OPTGROUP&&e.openElements.pop(),e._insertElement(t,T0.HTML);break;case C0.HR:e.openElements.currentTagId===C0.OPTION&&e.openElements.pop(),e.openElements.currentTagId===C0.OPTGROUP&&e.openElements.pop(),e._appendElement(t,T0.HTML),t.ackSelfClosing=!0;break;case C0.INPUT:case C0.KEYGEN:case C0.TEXTAREA:case C0.SELECT:e.openElements.hasInSelectScope(C0.SELECT)&&(e.openElements.popUntilTagNamePopped(C0.SELECT),e._resetInsertionMode(),t.tagID!==C0.SELECT&&e._processStartTag(t));break;case C0.SCRIPT:case C0.TEMPLATE:W1(e,t)}}function k4(e,t){switch(t.tagID){case C0.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===C0.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===C0.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===C0.OPTGROUP&&e.openElements.pop();break;case C0.OPTION:e.openElements.currentTagId===C0.OPTION&&e.openElements.pop();break;case C0.SELECT:e.openElements.hasInSelectScope(C0.SELECT)&&(e.openElements.popUntilTagNamePopped(C0.SELECT),e._resetInsertionMode());break;case C0.TEMPLATE:Z1(e,t)}}function S4(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(C0.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):H1(e,t)}function A4(e,t){var r;if(t.tagID===C0.HTML){if(e.fragmentContext||(e.insertionMode=M1.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===C0.HTML){e._setEndLocation(e.openElements.items[0],t);const n=e.openElements.items[1];n&&!(null===(r=e.treeAdapter.getNodeSourceCodeLocation(n))||void 0===r?void 0:r.endTag)&&e._setEndLocation(n,t)}}else T4(e,t)}function T4(e,t){e.insertionMode=M1.IN_BODY,X1(e,t)}function N4(e,t){e.insertionMode=M1.IN_BODY,X1(e,t)}function I4(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==T0.HTML&&void 0!==e.openElements.currentTagId&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}new Set([M0.AREA,M0.BASE,M0.BASEFONT,M0.BGSOUND,M0.BR,M0.COL,M0.EMBED,M0.FRAME,M0.HR,M0.IMG,M0.INPUT,M0.KEYGEN,M0.LINK,M0.META,M0.PARAM,M0.SOURCE,M0.TRACK,M0.WBR]);const M4=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,C4=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),j4={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function O4(e,t){const r=function(e){const t="root"===e.type?e.children[0]:e;return Boolean(t&&("doctype"===t.type||"element"===t.type&&"html"===t.tagName.toLowerCase()))}(e),n=JQ("type",{handlers:{root:L4,element:P4,text:D4,comment:B4,doctype:$4,raw:U4},unknown:F4}),i={parser:r?new R1(j4):R1.getFragmentParser(void 0,j4),handle(e){n(e,i)},stitches:!1,options:t||{}};n(e,i),H4(i,jt());const a=function(e,t){const r=t||{};return uQ({file:r.file||void 0,location:!1,schema:"svg"===r.space?At:St,verbose:r.verbose||!1},e)}(r?i.parser.document:i.parser.getFragment(),{file:i.options.file});return i.stitches&&yt(a,"comment",function(e,t,r){const n=e;if(n.value.stitch&&r&&void 0!==t){return r.children[t]=n.value.stitch,t}}),"root"===a.type&&1===a.children.length&&a.children[0].type===e.type?a.children[0]:a}function R4(e,t){let r=-1;if(e)for(;++r<e.length;)t.handle(e[r])}function L4(e,t){R4(e.children,t)}function P4(e,t){!function(e,t){const r=e.tagName.toLowerCase();if(t.parser.tokenizer.state===H0.PLAINTEXT)return;H4(t,jt(e));const n=t.parser.openElements.current;let i="namespaceURI"in n?n.namespaceURI:MW.html;i===MW.html&&"svg"===r&&(i=MW.svg);const a=function(e,t){const r=(t||XQ).space;return e0(e,"svg"===r?KQ:ZQ)}({...e,children:[]},{space:i===MW.svg?"svg":"html"}),s={type:b0.START_TAG,tagName:r,tagID:$0(r),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in a?a.attrs:[],location:q4(e)};t.parser.currentToken=s,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=r}(e,t),R4(e.children,t),function(e,t){const r=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&i0.includes(r))return;if(t.parser.tokenizer.state===H0.PLAINTEXT)return;H4(t,Ot(e));const n={type:b0.END_TAG,tagName:r,tagID:$0(r),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:q4(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),r!==t.parser.tokenizer.lastStartTagName||t.parser.tokenizer.state!==H0.RCDATA&&t.parser.tokenizer.state!==H0.RAWTEXT&&t.parser.tokenizer.state!==H0.SCRIPT_DATA||(t.parser.tokenizer.state=H0.DATA)}(e,t)}function D4(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const r={type:b0.CHARACTER,chars:e.value,location:q4(e)};H4(t,jt(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function $4(e,t){const r={type:b0.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:q4(e)};H4(t,jt(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function z4(e,t){t.stitches=!0;const r=function(e){return Rt("children"in e?{...e,children:[]}:e)}(e);if("children"in e&&"children"in r){const n=O4({type:"root",children:e.children},t.options);r.children=n.children}B4({type:"comment",value:{stitch:r}},t)}function B4(e,t){const r=e.value,n={type:b0.COMMENT,data:r,location:q4(e)};H4(t,jt(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function U4(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,G4(t,jt(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(M4,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),72===t.parser.tokenizer.state||78===t.parser.tokenizer.state){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const e=t.parser.tokenizer._consume();t.parser.tokenizer._callState(e)}}function F4(e,t){const r=e;if(!t.options.passThrough||!t.options.passThrough.includes(r.type)){let e="";throw C4.has(r.type)&&(e=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+r.type+"` node"+e)}z4(r,t)}function H4(e,t){G4(e,t);const r=e.parser.tokenizer.currentCharacterToken;r&&r.location&&(r.location.endLine=e.parser.tokenizer.preprocessor.line,r.location.endCol=e.parser.tokenizer.preprocessor.col+1,r.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=H0.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function G4(e,t){if(t&&void 0!==t.offset){const r={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=1-t.column,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=r}}function q4(e){const t=jt(e)||{line:void 0,column:void 0,offset:void 0},r=Ot(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:r.line,endCol:r.column,endOffset:r.offset}}const V4=null,W4=42,Z4=95,K4=126,Y4=2,J4=2,X4=1,Q4="data",e2="characterEscape",t2="emphasis",r2="emphasisSequence",n2="emphasisText",i2="strong",a2="strongSequence",s2="strongText";function o2(e){return function(e){if(!Number.isSafeInteger(e))throw new TypeError(`Expected a code point, got \`${typeof e}\`.`)}(e),function(e){return function(e){return 161===e||164===e||167===e||168===e||170===e||173===e||174===e||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||198===e||208===e||215===e||216===e||e>=222&&e<=225||230===e||e>=232&&e<=234||236===e||237===e||240===e||242===e||243===e||e>=247&&e<=250||252===e||254===e||257===e||273===e||275===e||283===e||294===e||295===e||299===e||e>=305&&e<=307||312===e||e>=319&&e<=322||324===e||e>=328&&e<=331||333===e||338===e||339===e||358===e||359===e||363===e||462===e||464===e||466===e||468===e||470===e||472===e||474===e||476===e||593===e||609===e||708===e||711===e||e>=713&&e<=715||717===e||720===e||e>=728&&e<=731||733===e||735===e||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||1025===e||e>=1040&&e<=1103||1105===e||8208===e||e>=8211&&e<=8214||8216===e||8217===e||8220===e||8221===e||e>=8224&&e<=8226||e>=8228&&e<=8231||8240===e||8242===e||8243===e||8245===e||8251===e||8254===e||8308===e||8319===e||e>=8321&&e<=8324||8364===e||8451===e||8453===e||8457===e||8467===e||8470===e||8481===e||8482===e||8486===e||8491===e||8531===e||8532===e||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||8585===e||e>=8592&&e<=8601||8632===e||8633===e||8658===e||8660===e||8679===e||8704===e||8706===e||8707===e||8711===e||8712===e||8715===e||8719===e||8721===e||8725===e||8730===e||e>=8733&&e<=8736||8739===e||8741===e||e>=8743&&e<=8748||8750===e||e>=8756&&e<=8759||8764===e||8765===e||8776===e||8780===e||8786===e||8800===e||8801===e||e>=8804&&e<=8807||8810===e||8811===e||8814===e||8815===e||8834===e||8835===e||8838===e||8839===e||8853===e||8857===e||8869===e||8895===e||8978===e||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||9632===e||9633===e||e>=9635&&e<=9641||9650===e||9651===e||9654===e||9655===e||9660===e||9661===e||9664===e||9665===e||e>=9670&&e<=9672||9675===e||e>=9678&&e<=9681||e>=9698&&e<=9701||9711===e||9733===e||9734===e||9737===e||9742===e||9743===e||9756===e||9758===e||9792===e||9794===e||9824===e||9825===e||e>=9827&&e<=9829||e>=9831&&e<=9834||9836===e||9837===e||9839===e||9886===e||9887===e||9919===e||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||9955===e||9960===e||9961===e||e>=9963&&e<=9969||9972===e||e>=9974&&e<=9977||9979===e||9980===e||9982===e||9983===e||10045===e||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||65533===e||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||127375===e||127376===e||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109}(e)?"ambiguous":function(e){return 12288===e||e>=65281&&e<=65376||e>=65504&&e<=65510}(e)?"fullwidth":8361===e||e>=65377&&e<=65470||e>=65474&&e<=65479||e>=65482&&e<=65487||e>=65490&&e<=65495||e>=65498&&e<=65500||e>=65512&&e<=65518?"halfwidth":e>=32&&e<=126||162===e||163===e||165===e||166===e||172===e||175===e||e>=10214&&e<=10221||10629===e||10630===e?"narrow":function(e){return e>=4352&&e<=4447||8986===e||8987===e||9001===e||9002===e||e>=9193&&e<=9196||9200===e||9203===e||9725===e||9726===e||9748===e||9749===e||e>=9776&&e<=9783||e>=9800&&e<=9811||9855===e||e>=9866&&e<=9871||9875===e||9889===e||9898===e||9899===e||9917===e||9918===e||9924===e||9925===e||9934===e||9940===e||9962===e||9970===e||9971===e||9973===e||9978===e||9981===e||9989===e||9994===e||9995===e||10024===e||10060===e||10062===e||e>=10067&&e<=10069||10071===e||e>=10133&&e<=10135||10160===e||10175===e||11035===e||11036===e||11088===e||11093===e||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12773||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e>=94192&&e<=94198||e>=94208&&e<=101589||e>=101631&&e<=101662||e>=101760&&e<=101874||e>=110576&&e<=110579||e>=110581&&e<=110587||110589===e||110590===e||e>=110592&&e<=110882||110898===e||e>=110928&&e<=110930||110933===e||e>=110948&&e<=110951||e>=110960&&e<=111355||e>=119552&&e<=119638||e>=119648&&e<=119670||126980===e||127183===e||127374===e||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||127568===e||127569===e||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||127988===e||e>=127992&&e<=128062||128064===e||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||128378===e||128405===e||128406===e||128420===e||e>=128507&&e<=128591||e>=128640&&e<=128709||128716===e||e>=128720&&e<=128722||e>=128725&&e<=128728||e>=128732&&e<=128735||128747===e||128748===e||e>=128756&&e<=128764||e>=128992&&e<=129003||129008===e||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129674||e>=129678&&e<=129734||129736===e||e>=129741&&e<=129756||e>=129759&&e<=129770||e>=129775&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141}(e)?"wide":"neutral"}(e)}var l2=Object.defineProperty,c2=(e,t,r)=>((e,t,r)=>t in e?l2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,t+"",r);function u2(e){if(!e||e<4352)return!1;switch(o2(e)){case"fullwidth":case"halfwidth":return!0;case"wide":return!function(e){return/^\p{Emoji_Presentation}/u.test(String.fromCodePoint(e))}(e);case"narrow":return!1;case"ambiguous":return 917760<=e&&e<=917999&&null;case"neutral":return/^\p{sc=Hangul}/u.test(String.fromCodePoint(e))}}var d2,h2,p2=m2(/\p{P}|\p{S}/u),f2=m2(/\s/);function m2(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCodePoint(t))}}function g2(e){if(e===V4||Lt(e)||f2(e))return X4;let t=0;if(e>=4352){if(function(e){return null!==e&&e>=65024&&e<=65038}(e))return d2.nonEmojiGeneralUseVS;switch(u2(e)){case null:return d2.ivs;case!0:t|=d2.cjk}}return p2(e)&&(t|=J4),t}function v2(e,t,r){if(e!==d2.nonEmojiGeneralUseVS)return e;const n=t(),i=g2(n);return!n||y2(i)?e:function(e,t){return!(65025!==t||!e||e<8216||8216!==e&&8217!==e&&8220!==e&&8221!==e)}(n,r)?d2.cjkPunctuation:function(e){return e&~d2.ivs}(i)}function y2(e){return Boolean(e&X4)}function b2(e){return(e&d2.cjkPunctuation)===J4}function _2(e){return Boolean(e&d2.cjk)}function w2(e){return Boolean(e&d2.spaceOrPunctuation)}function x2(e){return Boolean(e&&e>=55296&&e<=56319)}function E2(e){return Boolean(e&&e>=56320&&e<=57343)}function k2(e,t,r){if(t._bufferIndex<2)return e;const n=r({start:{...t,_bufferIndex:t._bufferIndex-2},end:t}).codePointAt(0);return n&&n>=65536?n:e}(h2=d2||(d2={})).spaceOrPunctuation=3,h2.cjk=4096,h2.cjkPunctuation=4098,h2.ivs=8192,h2.cjkOrIvs=12288,h2.nonEmojiGeneralUseVS=16384,h2.variationSelector=24576,h2.ivsToCjkRightShift=1;var S2=class{constructor(e,t,r){this.previousCode=e,this.nowPoint=t,this.sliceSerialize=r,c2(this,"cachedValue")}value(){return void 0===this.cachedValue&&(this.cachedValue=function(e,t,r){const n=e>=65536?2:1;if(t._bufferIndex<1+n)return null;const i=t._bufferIndex-n-2,a=r({start:{...t,_bufferIndex:i>=0?i:0},end:{...t,_bufferIndex:t._bufferIndex-n}}),s=a.charCodeAt(a.length-1);if(Number.isNaN(s))return null;if(a.length<2||s<56320||57343<s)return s;const o=a.codePointAt(0);return o&&o>=65536?o:s}(this.previousCode,this.nowPoint,this.sliceSerialize)),this.cachedValue}};function A2(e,t,r){const n=r({start:t,end:{...t,_bufferIndex:t._bufferIndex+2}}).codePointAt(0);return n&&n>=65536?n:e}var T2={name:"attention",resolveAll:function(e,t){let r,n,i,a,s,o,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(r=u;r--;)if("exit"===e[r][0]&&"attentionSequence"===e[r][1].type&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[r][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;o=e[r][1].end.offset-e[r][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const d={...e[r][1].end},h={...e[u][1].start};N2(d,-o),N2(h,o),a={type:o>1?a2:r2,start:d,end:{...e[r][1].end}},s={type:o>1?a2:r2,start:{...e[u][1].start},end:h},i={type:o>1?s2:n2,start:{...e[r][1].end},end:{...e[u][1].start}},n={type:o>1?i2:t2,start:{...a.start},end:{...s.end}},e[r][1].end={...a.start},e[u][1].start={...s.end},l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Pt(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Pt(l,[["enter",n,t],["enter",a,t],["exit",a,t],["enter",i,t]]),It(t.parser.constructs.insideSpan.null),l=Pt(l,Dt(t.parser.constructs.insideSpan.null,e.slice(r+1,u),t)),l=Pt(l,[["exit",i,t],["enter",s,t],["exit",s,t],["exit",n,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=Pt(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,$t(e,r-1,u-r+3,l),u=r+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e},tokenize:function(e,t){const r=this.parser.constructs.attentionMarkers.null,{now:n,sliceSerialize:i,previous:a}=this,s=E2(a)?k2(a,n(),i):a,o=g2(s),l=new S2(s,n(),i),c=v2(o,l.value.bind(l),s);let u;return function(t){return u=t,e.enter("attentionSequence"),d(t)};function d(a){if(a===u)return e.consume(a),d;const o=e.exit("attentionSequence"),l=g2(x2(a)?A2(a,n(),i):a),h=b2(c),p=h||y2(c),f=b2(l),m=f||y2(l),g=Boolean(c&d2.cjkOrIvs);const v=!m||f&&(p||g)||r.includes(a),y=!p||h&&(m||_2(l))||r.includes(s);return o._open=Boolean(u===W4?v:v&&(w2(c)||!y)),o._close=Boolean(u===W4?y:y&&(w2(l)||!v)),t(a)}}};function N2(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}function I2(e){let t=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:function(e,r,n){const{now:i,sliceSerialize:a,previous:s}=this,o=E2(s)?k2(s,i(),a):s,l=g2(o),c=new S2(o,i(),a),u=v2(l,c.value.bind(c),o),d=this.events;let h=0;return function(t){if(o===K4&&d[d.length-1][1].type!==e2)return n(t);return e.enter("strikethroughSequenceTemporary"),p(t)};function p(s){const l=g2(o);if(s===K4)return h>1?n(s):(e.consume(s),h++,p);if(h<2&&!t)return n(s);const c=e.exit("strikethroughSequenceTemporary"),d=g2(x2(s)?A2(s,i(),a):s),f=b2(u)||y2(u),m=b2(d)||y2(d),g=_2(u)||l===d2.ivs;return c._open=!m||d===Y4&&(f||g),c._close=!f||l===Y4&&(m||_2(d)),r(s)}},resolveAll:function(e,t){let r=-1;for(;++r<e.length;)if("enter"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._close){let n=r;for(;n--;)if("exit"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._open&&e[r][1].end.offset-e[r][1].start.offset===e[n][1].end.offset-e[n][1].start.offset){e[r][1].type="strikethroughSequence",e[n][1].type="strikethroughSequence";const i={type:"strikethrough",start:Object.assign({},e[n][1].start),end:Object.assign({},e[r][1].end)},a={type:"strikethroughText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[r][1].start)},s=[["enter",i,t],["enter",e[n][1],t],["exit",e[n][1],t],["enter",a,t]],o=t.parser.constructs.insideSpan.null;o&&$t(s,s.length,0,Dt(o,e.slice(n+1,r),t)),$t(s,s.length,0,[["exit",a,t],["enter",e[r][1],t],["exit",e[r][1],t],["exit",i,t]]),$t(e,n-1,r-n+3,s),r=n+s.length-2;break}}r=-1;for(;++r<e.length;)"strikethroughSequenceTemporary"===e[r][1].type&&(e[r][1].type=Q4);return e}};return null==t&&(t=!0),{text:{[K4]:r},insideSpan:{null:[r]},attentionMarkers:{null:[K4]}}}function M2(e,t){const r=String(e);if("string"!=typeof t)throw new TypeError("Expected character");let n=0,i=r.indexOf(t);for(;-1!==i;)n++,i=r.indexOf(t,i+t.length);return n}function C2(e,t,r){const n=Tt((r||{}).ignore||[]),i=function(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let n=-1;for(;++n<r.length;){const e=r[n];t.push([j2(e[0]),O2(e[1])])}return t}(t);let a=-1;for(;++a<i.length;)Nt(e,"text",s);function s(e,t){let r,s=-1;for(;++s<t.length;){const e=t[s],i=r?r.children:void 0;if(n(e,i?i.indexOf(e):void 0,r))return;r=e}if(r)return function(e,t){const r=t[t.length-1],n=i[a][0],s=i[a][1];let o=0;const l=r.children,c=l.indexOf(e);let u=!1,d=[];n.lastIndex=0;let h=n.exec(e.value);for(;h;){const r=h.index,i={index:h.index,input:h.input,stack:[...t,e]};let a=s(...h,i);if("string"==typeof a&&(a=a.length>0?{type:"text",value:a}:void 0),!1===a?n.lastIndex=r+1:(o!==r&&d.push({type:"text",value:e.value.slice(o,r)}),Array.isArray(a)?d.push(...a):a&&d.push(a),o=r+h[0].length,u=!0),!n.global)break;h=n.exec(e.value)}u?(o<e.value.length&&d.push({type:"text",value:e.value.slice(o)}),r.children.splice(c,1,...d)):d=[e];return c+d.length}(e,t)}}function j2(e){return"string"==typeof e?new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function O2(e){return"function"==typeof e?e:function(){return e}}const R2="phrasing",L2=["autolink","link","image","label"];function P2(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function D2(e){this.config.enter.autolinkProtocol.call(this,e)}function $2(e){this.config.exit.autolinkProtocol.call(this,e)}function z2(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];It("link"===t.type),t.url="http://"+this.sliceSerialize(e)}function B2(e){this.config.exit.autolinkEmail.call(this,e)}function U2(e){this.exit(e)}function F2(e){C2(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,H2],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,G2]],{ignore:["link","linkReference"]})}function H2(e,t,r,n,i){let a="";if(!q2(i))return!1;if(/^w/i.test(t)&&(r=t+r,t="",a="http://"),!function(e){const t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(r))return!1;const s=function(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let r=t[0],n=r.indexOf(")");const i=M2(e,"(");let a=M2(e,")");for(;-1!==n&&i>a;)e+=r.slice(0,n+1),r=r.slice(n+1),n=r.indexOf(")"),a++;return[e,r]}(r+n);if(!s[0])return!1;const o={type:"link",title:null,url:a+t+s[0],children:[{type:"text",value:t+s[0]}]};return s[1]?[o,{type:"text",value:s[1]}]:o}function G2(e,t,r,n){return!(!q2(n,!0)||/[-\d_]$/.test(r))&&{type:"link",title:null,url:"mailto:"+t+"@"+r,children:[{type:"text",value:t+"@"+r}]}}function q2(e,t){const r=e.input.charCodeAt(e.index-1);return(0===e.index||zt(r)||Bt(r))&&(!t||47!==r)}function V2(){this.buffer()}function W2(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Z2(){this.buffer()}function K2(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Y2(e){const t=this.resume(),r=this.stack[this.stack.length-1];It("footnoteReference"===r.type),r.identifier=Ut(this.sliceSerialize(e)).toLowerCase(),r.label=t}function J2(e){this.exit(e)}function X2(e){const t=this.resume(),r=this.stack[this.stack.length-1];It("footnoteDefinition"===r.type),r.identifier=Ut(this.sliceSerialize(e)).toLowerCase(),r.label=t}function Q2(e){this.exit(e)}function e6(e,t,r,n){const i=r.createTracker(n);let a=i.move("[^");const s=r.enter("footnoteReference"),o=r.enter("reference");return a+=i.move(r.safe(r.associationId(e),{after:"]",before:a})),o(),s(),a+=i.move("]"),a}function t6(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,r,n,i){const a=n.createTracker(i);let s=a.move("[^");const o=n.enter("footnoteDefinition"),l=n.enter("label");s+=a.move(n.safe(n.associationId(e),{before:s,after:"]"})),l(),s+=a.move("]:"),e.children&&e.children.length>0&&(a.shift(4),s+=a.move((t?"\n":" ")+n.indentLines(n.containerFlow(e,a.current()),t?n6:r6)));return o(),s},footnoteReference:e6},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function r6(e,t,r){return 0===t?e:n6(e,t,r)}function n6(e,t,r){return(r?"":"    ")+e}e6.peek=function(){return"["};const i6=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function a6(e){this.enter({type:"delete",children:[]},e)}function s6(e){this.exit(e)}function o6(e,t,r,n){const i=r.createTracker(n),a=r.enter("strikethrough");let s=i.move("~~");return s+=r.containerPhrasing(e,{...i.current(),before:s,after:"~"}),s+=i.move("~~"),a(),s}function l6(e){return e.length}function c6(e){return null==e?"":String(e)}function u6(e){const t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}function d6(e,t,r){return">"+(r?"":" ")+e}function h6(e,t){return p6(e,t.inConstruct,!0)&&!p6(e,t.notInConstruct,!1)}function p6(e,t,r){if("string"==typeof t&&(t=[t]),!t||0===t.length)return r;let n=-1;for(;++n<t.length;)if(e.includes(t[n]))return!0;return!1}function f6(e,t,r,n){let i=-1;for(;++i<r.unsafe.length;)if("\n"===r.unsafe[i].character&&h6(r.stack,r.unsafe[i]))return/[ \t]/.test(n.before)?"":" ";return"\\\n"}function m6(e,t){const r=String(e);let n=r.indexOf(t),i=n,a=0,s=0;if("string"!=typeof t)throw new TypeError("Expected substring");for(;-1!==n;)n===i?++a>s&&(s=a):a=1,i=n+t.length,n=r.indexOf(t,i);return s}function g6(e,t,r){return(r?"":"    ")+e}function v6(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function y6(e){return"&#x"+e.toString(16).toUpperCase()+";"}function b6(e,t,r){const n=Ft(e),i=Ft(t);return void 0===n?void 0===i?"_"===r?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===i?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===n?void 0===i?{inside:!1,outside:!1}:1===i?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===i?{inside:!1,outside:!1}:1===i?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function _6(e,t,r,n){const i=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(r),a=r.enter("emphasis"),s=r.createTracker(n),o=s.move(i);let l=s.move(r.containerPhrasing(e,{after:i,before:o,...s.current()}));const c=l.charCodeAt(0),u=b6(n.before.charCodeAt(n.before.length-1),c,i);u.inside&&(l=y6(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=b6(n.after.charCodeAt(0),d,i);h.inside&&(l=l.slice(0,-1)+y6(d));const p=s.move(i);return a(),r.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},o+l+p}function w6(e){return e.value||""}function x6(e,t,r,n){const i=v6(r),a='"'===i?"Quote":"Apostrophe",s=r.enter("image");let o=r.enter("label");const l=r.createTracker(n);let c=l.move("![");return c+=l.move(r.safe(e.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),o(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(o=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=r.enter("destinationRaw"),c+=l.move(r.safe(e.url,{before:c,after:e.title?" ":")",...l.current()}))),o(),e.title&&(o=r.enter(`title${a}`),c+=l.move(" "+i),c+=l.move(r.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),o()),c+=l.move(")"),s(),c}function E6(e,t,r,n){const i=e.referenceType,a=r.enter("imageReference");let s=r.enter("label");const o=r.createTracker(n);let l=o.move("![");const c=r.safe(e.alt,{before:l,after:"]",...o.current()});l+=o.move(c+"]["),s();const u=r.stack;r.stack=[],s=r.enter("reference");const d=r.safe(r.associationId(e),{before:l,after:"]",...o.current()});return s(),r.stack=u,a(),"full"!==i&&c&&c===d?"shortcut"===i?l=l.slice(0,-1):l+=o.move("]"):l+=o.move(d+"]"),l}function k6(e,t,r){let n=e.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(n);)i+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++a<r.unsafe.length;){const e=r.unsafe[a],t=r.compilePattern(e);let i;if(e.atBreak)for(;i=t.exec(n);){let e=i.index;10===n.charCodeAt(e)&&13===n.charCodeAt(e-1)&&e--,n=n.slice(0,e)+" "+n.slice(i.index+1)}}return i+n+i}function S6(e,t){const r=Ht(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function A6(e,t,r,n){const i=v6(r),a='"'===i?"Quote":"Apostrophe",s=r.createTracker(n);let o,l;if(S6(e,r)){const t=r.stack;r.stack=[],o=r.enter("autolink");let n=s.move("<");return n+=s.move(r.containerPhrasing(e,{before:n,after:">",...s.current()})),n+=s.move(">"),o(),r.stack=t,n}o=r.enter("link"),l=r.enter("label");let c=s.move("[");return c+=s.move(r.containerPhrasing(e,{before:c,after:"](",...s.current()})),c+=s.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),c+=s.move("<"),c+=s.move(r.safe(e.url,{before:c,after:">",...s.current()})),c+=s.move(">")):(l=r.enter("destinationRaw"),c+=s.move(r.safe(e.url,{before:c,after:e.title?" ":")",...s.current()}))),l(),e.title&&(l=r.enter(`title${a}`),c+=s.move(" "+i),c+=s.move(r.safe(e.title,{before:c,after:i,...s.current()})),c+=s.move(i),l()),c+=s.move(")"),o(),c}function T6(e,t,r,n){const i=e.referenceType,a=r.enter("linkReference");let s=r.enter("label");const o=r.createTracker(n);let l=o.move("[");const c=r.containerPhrasing(e,{before:l,after:"]",...o.current()});l+=o.move(c+"]["),s();const u=r.stack;r.stack=[],s=r.enter("reference");const d=r.safe(r.associationId(e),{before:l,after:"]",...o.current()});return s(),r.stack=u,a(),"full"!==i&&c&&c===d?"shortcut"===i?l=l.slice(0,-1):l+=o.move("]"):l+=o.move(d+"]"),l}function N6(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function I6(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}o6.peek=function(){return"~"},_6.peek=function(e,t,r){return r.options.emphasis||"*"},w6.peek=function(){return"<"},x6.peek=function(){return"!"},E6.peek=function(){return"!"},k6.peek=function(){return"`"},A6.peek=function(e,t,r){return S6(e,r)?"<":"["},T6.peek=function(){return"["};const M6=Tt(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function C6(e,t,r,n){const i=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(r),a=r.enter("strong"),s=r.createTracker(n),o=s.move(i+i);let l=s.move(r.containerPhrasing(e,{after:i,before:o,...s.current()}));const c=l.charCodeAt(0),u=b6(n.before.charCodeAt(n.before.length-1),c,i);u.inside&&(l=y6(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=b6(n.after.charCodeAt(0),d,i);h.inside&&(l=l.slice(0,-1)+y6(d));const p=s.move(i+i);return a(),r.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},o+l+p}C6.peek=function(e,t,r){return r.options.strong||"*"};const j6={blockquote:function(e,t,r,n){const i=r.enter("blockquote"),a=r.createTracker(n);a.move("> "),a.shift(2);const s=r.indentLines(r.containerFlow(e,a.current()),d6);return i(),s},break:f6,code:function(e,t,r,n){const i=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(r),a=e.value||"",s="`"===i?"GraveAccent":"Tilde";if(function(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}(e,r)){const e=r.enter("codeIndented"),t=r.indentLines(a,g6);return e(),t}const o=r.createTracker(n),l=i.repeat(Math.max(m6(a,i)+1,3)),c=r.enter("codeFenced");let u=o.move(l);if(e.lang){const t=r.enter(`codeFencedLang${s}`);u+=o.move(r.safe(e.lang,{before:u,after:" ",encode:["`"],...o.current()})),t()}if(e.lang&&e.meta){const t=r.enter(`codeFencedMeta${s}`);u+=o.move(" "),u+=o.move(r.safe(e.meta,{before:u,after:"\n",encode:["`"],...o.current()})),t()}return u+=o.move("\n"),a&&(u+=o.move(a+"\n")),u+=o.move(l),c(),u},definition:function(e,t,r,n){const i=v6(r),a='"'===i?"Quote":"Apostrophe",s=r.enter("definition");let o=r.enter("label");const l=r.createTracker(n);let c=l.move("[");return c+=l.move(r.safe(r.associationId(e),{before:c,after:"]",...l.current()})),c+=l.move("]: "),o(),!e.url||/[\0- \u007F]/.test(e.url)?(o=r.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(r.safe(e.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(o=r.enter("destinationRaw"),c+=l.move(r.safe(e.url,{before:c,after:e.title?" ":"\n",...l.current()}))),o(),e.title&&(o=r.enter(`title${a}`),c+=l.move(" "+i),c+=l.move(r.safe(e.title,{before:c,after:i,...l.current()})),c+=l.move(i),o()),s(),c},emphasis:_6,hardBreak:f6,heading:function(e,t,r,n){const i=Math.max(Math.min(6,e.depth||1),1),a=r.createTracker(n);if(function(e,t){let r=!1;return yt(e,function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return r=!0,Gt}),Boolean((!e.depth||e.depth<3)&&Ht(e)&&(t.options.setext||r))}(e,r)){const t=r.enter("headingSetext"),n=r.enter("phrasing"),s=r.containerPhrasing(e,{...a.current(),before:"\n",after:"\n"});return n(),t(),s+"\n"+(1===i?"=":"-").repeat(s.length-(Math.max(s.lastIndexOf("\r"),s.lastIndexOf("\n"))+1))}const s="#".repeat(i),o=r.enter("headingAtx"),l=r.enter("phrasing");a.move(s+" ");let c=r.containerPhrasing(e,{before:"# ",after:"\n",...a.current()});return/^[\t ]/.test(c)&&(c=y6(c.charCodeAt(0))+c.slice(1)),c=c?s+" "+c:s,r.options.closeAtx&&(c+=" "+s),l(),o(),c},html:w6,image:x6,imageReference:E6,inlineCode:k6,link:A6,linkReference:T6,list:function(e,t,r,n){const i=r.enter("list"),a=r.bulletCurrent;let s=e.ordered?function(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(r):N6(r);const o=e.ordered?"."===s?")":".":function(e){const t=N6(e),r=e.options.bulletOther;if(!r)return"*"===t?"-":"*";if("*"!==r&&"+"!==r&&"-"!==r)throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}(r);let l=!(!t||!r.bulletLastUsed)&&s===r.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==s&&"-"!==s||!t||t.children&&t.children[0]||"list"!==r.stack[r.stack.length-1]||"listItem"!==r.stack[r.stack.length-2]||"list"!==r.stack[r.stack.length-3]||"listItem"!==r.stack[r.stack.length-4]||0!==r.indexStack[r.indexStack.length-1]||0!==r.indexStack[r.indexStack.length-2]||0!==r.indexStack[r.indexStack.length-3]||(l=!0),I6(r)===s&&t){let t=-1;for(;++t<e.children.length;){const r=e.children[t];if(r&&"listItem"===r.type&&r.children&&r.children[0]&&"thematicBreak"===r.children[0].type){l=!0;break}}}}l&&(s=o),r.bulletCurrent=s;const c=r.containerFlow(e,n);return r.bulletLastUsed=s,r.bulletCurrent=a,i(),c},listItem:function(e,t,r,n){const i=function(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(r);let a=r.bulletCurrent||N6(r);t&&"list"===t.type&&t.ordered&&(a=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===r.options.incrementListMarker?0:t.children.indexOf(e))+a);let s=a.length+1;("tab"===i||"mixed"===i&&(t&&"list"===t.type&&t.spread||e.spread))&&(s=4*Math.ceil(s/4));const o=r.createTracker(n);o.move(a+" ".repeat(s-a.length)),o.shift(s);const l=r.enter("listItem"),c=r.indentLines(r.containerFlow(e,o.current()),function(e,t,r){if(t)return(r?"":" ".repeat(s))+e;return(r?a:a+" ".repeat(s-a.length))+e});return l(),c},paragraph:function(e,t,r,n){const i=r.enter("paragraph"),a=r.enter("phrasing"),s=r.containerPhrasing(e,n);return a(),i(),s},root:function(e,t,r,n){const i=e.children.some(function(e){return M6(e)});return(i?r.containerPhrasing:r.containerFlow).call(r,e,n)},strong:C6,text:function(e,t,r,n){return r.safe(e.value,n)},thematicBreak:function(e,t,r){const n=(I6(r)+(r.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(r));return r.options.ruleSpaces?n.slice(0,-1):n}};function O6(e){const t=e._align;this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function R6(e){this.exit(e),this.data.inTable=void 0}function L6(e){this.enter({type:"tableRow",children:[]},e)}function P6(e){this.exit(e)}function D6(e){this.enter({type:"tableCell",children:[]},e)}function $6(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,z6));const r=this.stack[this.stack.length-1];It("inlineCode"===r.type),r.value=t,this.exit(e)}function z6(e,t){return"|"===t?t:e}function B6(e){const t=e||{},r=t.tableCellPadding,n=t.tablePipeAlign,i=t.stringLength,a=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,r){let n=j6.inlineCode(e,t,r);r.stack.includes("tableCell")&&(n=n.replace(/\|/g,"\\$&"));return n},table:function(e,t,r,n){return o(function(e,t,r){const n=e.children;let i=-1;const a=[],s=t.enter("table");for(;++i<n.length;)a[i]=l(n[i],t,r);return s(),a}(e,r,n),e.align)},tableCell:s,tableRow:function(e,t,r,n){const i=l(e,r,n),a=o([i]);return a.slice(0,a.indexOf("\n"))}}};function s(e,t,r,n){const i=r.enter("tableCell"),s=r.enter("phrasing"),o=r.containerPhrasing(e,{...n,before:a,after:a});return s(),i(),o}function o(e,t){return function(e,t){const r=t||{},n=(r.align||[]).concat(),i=r.stringLength||l6,a=[],s=[],o=[],l=[];let c=0,u=-1;for(;++u<e.length;){const t=[],n=[];let a=-1;for(e[u].length>c&&(c=e[u].length);++a<e[u].length;){const s=c6(e[u][a]);if(!1!==r.alignDelimiters){const e=i(s);n[a]=e,(void 0===l[a]||e>l[a])&&(l[a]=e)}t.push(s)}s[u]=t,o[u]=n}let d=-1;if("object"==typeof n&&"length"in n)for(;++d<c;)a[d]=u6(n[d]);else{const e=u6(n);for(;++d<c;)a[d]=e}d=-1;const h=[],p=[];for(;++d<c;){const e=a[d];let t="",n="";99===e?(t=":",n=":"):108===e?t=":":114===e&&(n=":");let i=!1===r.alignDelimiters?1:Math.max(1,l[d]-t.length-n.length);const s=t+"-".repeat(i)+n;!1!==r.alignDelimiters&&(i=t.length+i+n.length,i>l[d]&&(l[d]=i),p[d]=i),h[d]=s}s.splice(1,0,h),o.splice(1,0,p),u=-1;const f=[];for(;++u<s.length;){const e=s[u],t=o[u];d=-1;const n=[];for(;++d<c;){const i=e[d]||"";let s="",o="";if(!1!==r.alignDelimiters){const e=l[d]-(t[d]||0),r=a[d];114===r?s=" ".repeat(e):99===r?e%2?(s=" ".repeat(e/2+.5),o=" ".repeat(e/2-.5)):(s=" ".repeat(e/2),o=s):o=" ".repeat(e)}!1===r.delimiterStart||d||n.push("|"),!1===r.padding||!1===r.alignDelimiters&&""===i||!1===r.delimiterStart&&!d||n.push(" "),!1!==r.alignDelimiters&&n.push(s),n.push(i),!1!==r.alignDelimiters&&n.push(o),!1!==r.padding&&n.push(" "),!1===r.delimiterEnd&&d===c-1||n.push("|")}f.push(!1===r.delimiterEnd?n.join("").replace(/ +$/,""):n.join(""))}return f.join("\n")}(e,{align:t,alignDelimiters:n,padding:r,stringLength:i})}function l(e,t,r){const n=e.children;let i=-1;const a=[],o=t.enter("tableRow");for(;++i<n.length;)a[i]=s(n[i],0,t,r);return o(),a}}function U6(e){const t=this.stack[this.stack.length-2];It("listItem"===t.type),t.checked="taskListCheckValueChecked"===e.type}function F6(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"==typeof t.checked){const e=this.stack[this.stack.length-1];It("paragraph"===e.type);const r=e.children[0];if(r&&"text"===r.type){const n=t.children;let i,a=-1;for(;++a<n.length;){const e=n[a];if("paragraph"===e.type){i=e;break}}i===e&&(r.value=r.value.slice(1),0===r.value.length?e.children.shift():e.position&&r.position&&"number"==typeof r.position.start.offset&&(r.position.start.column++,r.position.start.offset++,e.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function H6(e,t,r,n){const i=e.children[0],a="boolean"==typeof e.checked&&i&&"paragraph"===i.type,s="["+(e.checked?"x":" ")+"] ",o=r.createTracker(n);a&&o.move(s);let l=j6.listItem(e,t,r,{...n,...o.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(e){return e+s})),l}const G6={tokenize:function(e,t,r){let n=0;return function t(a){if((87===a||119===a)&&n<3)return n++,e.consume(a),t;if(46===a&&3===n)return e.consume(a),i;return r(a)};function i(e){return null===e?r(e):t(e)}},partial:!0},q6={tokenize:function(e,t,r){let n,i,a;return s;function s(t){return 46===t||95===t?e.check(W6,l,o)(t):null===t||Lt(t)||zt(t)||45!==t&&Bt(t)?l(t):(a=!0,e.consume(t),s)}function o(t){return 95===t?n=!0:(i=n,n=void 0),e.consume(t),s}function l(e){return i||n||!a?r(e):t(e)}},partial:!0},V6={tokenize:function(e,t){let r=0,n=0;return i;function i(s){return 40===s?(r++,e.consume(s),i):41===s&&n<r?a(s):33===s||34===s||38===s||39===s||41===s||42===s||44===s||46===s||58===s||59===s||60===s||63===s||93===s||95===s||126===s?e.check(W6,t,a)(s):null===s||Lt(s)||zt(s)?t(s):(e.consume(s),i)}function a(t){return 41===t&&n++,e.consume(t),i}},partial:!0},W6={tokenize:function(e,t,r){return n;function n(s){return 33===s||34===s||39===s||41===s||42===s||44===s||46===s||58===s||59===s||63===s||95===s||126===s?(e.consume(s),n):38===s?(e.consume(s),a):93===s?(e.consume(s),i):60===s||null===s||Lt(s)||zt(s)?t(s):r(s)}function i(e){return null===e||40===e||91===e||Lt(e)||zt(e)?t(e):n(e)}function a(e){return Vt(e)?s(e):r(e)}function s(t){return 59===t?(e.consume(t),n):Vt(t)?(e.consume(t),s):r(t)}},partial:!0},Z6={tokenize:function(e,t,r){return function(t){return e.consume(t),n};function n(e){return qt(e)?r(e):t(e)}},partial:!0},K6={name:"wwwAutolink",tokenize:function(e,t,r){const n=this;return function(t){if(87!==t&&119!==t||!e3.call(n,n.previous)||i3(n.events))return r(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(G6,e.attempt(q6,e.attempt(V6,i),r),r)(t)};function i(r){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(r)}},previous:e3},Y6={name:"protocolAutolink",tokenize:function(e,t,r){const n=this;let i="",a=!1;return function(t){if((72===t||104===t)&&t3.call(n,n.previous)&&!i3(n.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(t),e.consume(t),s;return r(t)};function s(t){if(Vt(t)&&i.length<5)return i+=String.fromCodePoint(t),e.consume(t),s;if(58===t){const r=i.toLowerCase();if("http"===r||"https"===r)return e.consume(t),o}return r(t)}function o(t){return 47===t?(e.consume(t),a?l:(a=!0,o)):r(t)}function l(t){return null===t||Wt(t)||Lt(t)||zt(t)||Bt(t)?r(t):e.attempt(q6,e.attempt(V6,c),r)(t)}function c(r){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(r)}},previous:t3},J6={name:"emailAutolink",tokenize:function(e,t,r){const n=this;let i,a;return function(t){if(!n3(t)||!r3.call(n,n.previous)||i3(n.events))return r(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),s(t)};function s(t){return n3(t)?(e.consume(t),s):64===t?(e.consume(t),o):r(t)}function o(t){return 46===t?e.check(Z6,c,l)(t):45===t||95===t||qt(t)?(a=!0,e.consume(t),o):c(t)}function l(t){return e.consume(t),i=!0,o}function c(s){return a&&i&&Vt(n.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(s)):r(s)}},previous:r3},X6={};let Q6=48;for(;Q6<123;)X6[Q6]=J6,Q6++,58===Q6?Q6=65:91===Q6&&(Q6=97);function e3(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||Lt(e)}function t3(e){return!Vt(e)}function r3(e){return!(47===e||n3(e))}function n3(e){return 43===e||45===e||46===e||95===e||qt(e)}function i3(e){let t=e.length,r=!1;for(;t--;){const n=e[t][1];if(("labelLink"===n.type||"labelImage"===n.type)&&!n._balanced){r=!0;break}if(n._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}X6[43]=J6,X6[45]=J6,X6[46]=J6,X6[95]=J6,X6[72]=[J6,Y6],X6[104]=[J6,Y6],X6[87]=[J6,K6],X6[119]=[J6,K6];const a3={tokenize:function(e,t,r){const n=this;return Kt(e,function(e){const i=n.events[n.events.length-1];return i&&"gfmFootnoteDefinitionIndent"===i[1].type&&4===i[2].sliceSerialize(i[1],!0).length?t(e):r(e)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function s3(e,t,r){const n=this;let i=n.events.length;const a=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let s;for(;i--;){const e=n.events[i][1];if("labelImage"===e.type){s=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(i){if(!s||!s._balanced)return r(i);const o=Ut(n.sliceSerialize({start:s.end,end:n.now()}));if(94!==o.codePointAt(0)||!a.includes(o.slice(1)))return r(i);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(i),e.exit("gfmFootnoteCallLabelMarker"),t(i)}}function o3(e,t){let r=e.length;for(;r--;)if("labelImage"===e[r][1].type&&"enter"===e[r][0]){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const n={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},o=[e[r+1],e[r+2],["enter",n,t],e[r+3],e[r+4],["enter",i,t],["exit",i,t],["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",n,t]];return e.splice(r,e.length-r+1,...o),e}function l3(e,t,r){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let a,s=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),o};function o(t){return 94!==t?r(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(o){if(s>999||93===o&&!a||null===o||91===o||Lt(o))return r(o);if(93===o){e.exit("chunkString");const a=e.exit("gfmFootnoteCallString");return i.includes(Ut(n.sliceSerialize(a)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(o)}return Lt(o)||(a=!0),s++,e.consume(o),92===o?c:l}function c(t){return 91===t||92===t||93===t?(e.consume(t),s++,l):l(t)}}function c3(e,t,r){const n=this,i=n.parser.gfmFootnotes||(n.parser.gfmFootnotes=[]);let a,s,o=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),l};function l(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):r(t)}function c(t){if(o>999||93===t&&!s||null===t||91===t||Lt(t))return r(t);if(93===t){e.exit("chunkString");const r=e.exit("gfmFootnoteDefinitionLabelString");return a=Ut(n.sliceSerialize(r)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return Lt(t)||(s=!0),o++,e.consume(t),92===t?u:c}function u(t){return 91===t||92===t||93===t?(e.consume(t),o++,c):c(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),i.includes(a)||i.push(a),Kt(e,h,"gfmFootnoteDefinitionWhitespace")):r(t)}function h(e){return t(e)}}function u3(e,t,r){return e.check(Zt,t,e.attempt(a3,t,r))}function d3(e){e.exit("gfmFootnoteDefinition")}function h3(e){let t=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:function(e,r,n){const i=this.previous,a=this.events;let s=0;return function(t){if(126===i&&"characterEscape"!==a[a.length-1][1].type)return n(t);return e.enter("strikethroughSequenceTemporary"),o(t)};function o(a){const l=Ft(i);if(126===a)return s>1?n(a):(e.consume(a),s++,o);if(s<2&&!t)return n(a);const c=e.exit("strikethroughSequenceTemporary"),u=Ft(a);return c._open=!u||2===u&&Boolean(l),c._close=!l||2===l&&Boolean(u),r(a)}},resolveAll:function(e,t){let r=-1;for(;++r<e.length;)if("enter"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._close){let n=r;for(;n--;)if("exit"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._open&&e[r][1].end.offset-e[r][1].start.offset===e[n][1].end.offset-e[n][1].start.offset){e[r][1].type="strikethroughSequence",e[n][1].type="strikethroughSequence";const i={type:"strikethrough",start:Object.assign({},e[n][1].start),end:Object.assign({},e[r][1].end)},a={type:"strikethroughText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[r][1].start)},s=[["enter",i,t],["enter",e[n][1],t],["exit",e[n][1],t],["enter",a,t]],o=t.parser.constructs.insideSpan.null;o&&$t(s,s.length,0,Dt(o,e.slice(n+1,r),t)),$t(s,s.length,0,[["exit",a,t],["enter",e[r][1],t],["exit",e[r][1],t],["exit",i,t]]),$t(e,n-1,r-n+3,s),r=n+s.length-2;break}}r=-1;for(;++r<e.length;)"strikethroughSequenceTemporary"===e[r][1].type&&(e[r][1].type="data");return e}};return null==t&&(t=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}}}class p3{constructor(){this.map=[]}add(e,t,r){!function(e,t,r,n){let i=0;if(0===r&&0===n.length)return;for(;i<e.map.length;){if(e.map[i][0]===t)return e.map[i][1]+=r,void e.map[i][2].push(...n);i+=1}e.map.push([t,r,n])}(this,e,t,r)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length;const r=[];for(;t>0;)t-=1,r.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];r.push(e.slice()),e.length=0;let n=r.pop();for(;n;){for(const t of n)e.push(t);n=r.pop()}this.map.length=0}}function f3(e,t){let r=!1;const n=[];for(;t<e.length;){const i=e[t];if(r){if("enter"===i[0])"tableContent"===i[1].type&&n.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===i[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=n.length-1;n[e]="left"===n[e]?"center":"right"}}else if("tableDelimiterRow"===i[1].type)break}else"enter"===i[0]&&"tableDelimiterRow"===i[1].type&&(r=!0);t+=1}return n}function m3(e,t,r){const n=this;let i,a=0,s=0;return function(e){let t=n.events.length-1;for(;t>-1;){const e=n.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const i=t>-1?n.events[t][1].type:null,a="tableHead"===i||"tableRow"===i?_:o;if(a===_&&n.parser.lazy[n.now().line])return r(e);return a(e)};function o(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return l(e);return i=!0,s+=1,l(e)}(t)}function l(t){return null===t?r(t):Yt(t)?s>1?(s=0,n.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):r(t):Jt(t)?Kt(e,l,"whitespace")(t):(s+=1,i&&(i=!1,a+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),i=!0,l):(e.enter("data"),c(t)))}function c(t){return null===t||124===t||Lt(t)?(e.exit("data"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return 92===t||124===t?(e.consume(t),c):c(t)}function d(t){return n.interrupt=!1,n.parser.lazy[n.now().line]?r(t):(e.enter("tableDelimiterRow"),i=!1,Jt(t)?Kt(e,h,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):h(t))}function h(t){return 45===t||58===t?f(t):124===t?(i=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),p):b(t)}function p(t){return Jt(t)?Kt(e,f,"whitespace")(t):f(t)}function f(t){return 58===t?(s+=1,i=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),m):45===t?(s+=1,m(t)):null===t||Yt(t)?y(t):b(t)}function m(t){return 45===t?(e.enter("tableDelimiterFiller"),g(t)):b(t)}function g(t){return 45===t?(e.consume(t),g):58===t?(i=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),v):(e.exit("tableDelimiterFiller"),v(t))}function v(t){return Jt(t)?Kt(e,y,"whitespace")(t):y(t)}function y(r){return 124===r?h(r):(null===r||Yt(r))&&i&&a===s?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(r)):b(r)}function b(e){return r(e)}function _(t){return e.enter("tableRow"),w(t)}function w(r){return 124===r?(e.enter("tableCellDivider"),e.consume(r),e.exit("tableCellDivider"),w):null===r||Yt(r)?(e.exit("tableRow"),t(r)):Jt(r)?Kt(e,w,"whitespace")(r):(e.enter("data"),x(r))}function x(t){return null===t||124===t||Lt(t)?(e.exit("data"),w(t)):(e.consume(t),92===t?E:x)}function E(t){return 92===t||124===t?(e.consume(t),x):x(t)}}function g3(e,t){let r,n,i,a=-1,s=!0,o=0,l=[0,0,0,0],c=[0,0,0,0],u=!1,d=0;const h=new p3;for(;++a<e.length;){const p=e[a],f=p[1];"enter"===p[0]?"tableHead"===f.type?(u=!1,0!==d&&(y3(h,t,d,r,n),n=void 0,d=0),r={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(a,0,[["enter",r,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(s=!0,i=void 0,l=[0,0,0,0],c=[0,a+1,0,0],u&&(u=!1,n={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(a,0,[["enter",n,t]])),o="tableDelimiterRow"===f.type?2:n?3:1):!o||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type?"tableCellDivider"===f.type&&(s?s=!1:(0!==l[1]&&(c[0]=c[1],i=v3(h,t,l,o,void 0,i)),l=c,c=[l[1],a,0,0])):(s=!1,0===c[2]&&(0!==l[1]&&(c[0]=c[1],i=v3(h,t,l,o,void 0,i),l=[0,0,0,0]),c[2]=a)):"tableHead"===f.type?(u=!0,d=a):"tableRow"===f.type||"tableDelimiterRow"===f.type?(d=a,0!==l[1]?(c[0]=c[1],i=v3(h,t,l,o,a,i)):0!==c[1]&&(i=v3(h,t,c,o,a,i)),o=0):!o||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type||(c[3]=a)}for(0!==d&&y3(h,t,d,r,n),h.consume(t.events),a=-1;++a<t.events.length;){const e=t.events[a];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=f3(t.events,a))}return e}function v3(e,t,r,n,i,a){const s=1===n?"tableHeader":2===n?"tableDelimiter":"tableData";0!==r[0]&&(a.end=Object.assign({},b3(t.events,r[0])),e.add(r[0],0,[["exit",a,t]]));const o=b3(t.events,r[1]);if(a={type:s,start:Object.assign({},o),end:Object.assign({},o)},e.add(r[1],0,[["enter",a,t]]),0!==r[2]){const i=b3(t.events,r[2]),a=b3(t.events,r[3]),s={type:"tableContent",start:Object.assign({},i),end:Object.assign({},a)};if(e.add(r[2],0,[["enter",s,t]]),2!==n){const n=t.events[r[2]],i=t.events[r[3]];if(n[1].end=Object.assign({},i[1].end),n[1].type="chunkText",n[1].contentType="text",r[3]>r[2]+1){const t=r[2]+1,n=r[3]-r[2]-1;e.add(t,n,[])}}e.add(r[3]+1,0,[["exit",s,t]])}return void 0!==i&&(a.end=Object.assign({},b3(t.events,i)),e.add(i,0,[["exit",a,t]]),a=void 0),a}function y3(e,t,r,n,i){const a=[],s=b3(t.events,r);i&&(i.end=Object.assign({},s),a.push(["exit",i,t])),n.end=Object.assign({},s),a.push(["exit",n,t]),e.add(r+1,0,a)}function b3(e,t){const r=e[t],n="enter"===r[0]?"start":"end";return r[1][n]}const _3={name:"tasklistCheck",tokenize:function(e,t,r){const n=this;return function(t){if(null!==n.previous||!n._gfmTasklistFirstContentOfListItem)return r(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i};function i(t){return Lt(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),a):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),a):r(t)}function a(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),s):r(t)}function s(n){return Yt(n)?t(n):Jt(n)?e.check({tokenize:w3},t,r)(n):r(n)}}};function w3(e,t,r){return Kt(e,function(e){return null===e?r(e):t(e)},"whitespace")}const x3={};const E3={tokenize:function(e,t,r){const n=this,i=n.events[n.events.length-1],a=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0;let s=0;return function(t){return e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),o(t)};function o(t){return 36===t?(e.consume(t),s++,o):s<2?r(t):(e.exit("mathFlowFenceSequence"),Kt(e,l,"whitespace")(t))}function l(t){return null===t||Yt(t)?u(t):(e.enter("mathFlowFenceMeta"),e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return null===t||Yt(t)?(e.exit("chunkString"),e.exit("mathFlowFenceMeta"),u(t)):36===t?r(t):(e.consume(t),c)}function u(r){return e.exit("mathFlowFence"),n.interrupt?t(r):e.attempt(k3,d,m)(r)}function d(t){return e.attempt({tokenize:g,partial:!0},m,h)(t)}function h(t){return(a?Kt(e,p,"linePrefix",a+1):p)(t)}function p(t){return null===t?m(t):Yt(t)?e.attempt(k3,d,m)(t):(e.enter("mathFlowValue"),f(t))}function f(t){return null===t||Yt(t)?(e.exit("mathFlowValue"),p(t)):(e.consume(t),f)}function m(r){return e.exit("mathFlow"),t(r)}function g(e,t,r){let i=0;return Kt(e,function(t){return e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),a(t)},"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function a(t){return 36===t?(i++,e.consume(t),a):i<s?r(t):(e.exit("mathFlowFenceSequence"),Kt(e,o,"whitespace")(t))}function o(n){return null===n||Yt(n)?(e.exit("mathFlowFence"),t(n)):r(n)}}},concrete:!0,name:"mathFlow"},k3={tokenize:function(e,t,r){const n=this;return function(r){if(null===r)return t(r);return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),i};function i(e){return n.parser.lazy[n.now().line]?r(e):t(e)}},partial:!0};function S3(e){let t=(e||{}).singleDollarTextMath;return null==t&&(t=!0),{tokenize:function(e,r,n){let i,a,s=0;return function(t){return e.enter("mathText"),e.enter("mathTextSequence"),o(t)};function o(r){return 36===r?(e.consume(r),s++,o):s<2&&!t?n(r):(e.exit("mathTextSequence"),l(r))}function l(t){return null===t?n(t):36===t?(a=e.enter("mathTextSequence"),i=0,u(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),l):Yt(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l):(e.enter("mathTextData"),c(t))}function c(t){return null===t||32===t||36===t||Yt(t)?(e.exit("mathTextData"),l(t)):(e.consume(t),c)}function u(t){return 36===t?(e.consume(t),i++,u):i===s?(e.exit("mathTextSequence"),e.exit("mathText"),r(t)):(a.type="mathTextData",c(t))}},resolve:A3,previous:T3,name:"mathText"}}function A3(e){let t,r,n=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[n][1].type&&"space"!==e[n][1].type))for(t=i;++t<n;)if("mathTextData"===e[t][1].type){e[n][1].type="mathTextPadding",e[i][1].type="mathTextPadding",i+=2,n-=2;break}for(t=i-1,n++;++t<=n;)void 0===r?t!==n&&"lineEnding"!==e[t][1].type&&(r=t):t!==n&&"lineEnding"!==e[t][1].type||(e[r][1].type="mathTextData",t!==r+2&&(e[r][1].end=e[t-1][1].end,e.splice(r+2,t-r-2),n-=t-r-2,t=r+2),r=void 0);return e}function T3(e){return 36!==e||"characterEscape"===this.events[this.events.length-1][1].type}const N3={};let I3=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function M3(e){return Array.isArray(e)?function(e){let t=[];for(let r=0,n=e.length;r<n;r++)t[r]=M3(e[r]);return t}(e):e instanceof RegExp?e:"object"==typeof e?function(e){let t={};for(let r in e)t[r]=M3(e[r]);return t}(e):e}function C3(e,...t){return t.forEach(t=>{for(let r in t)e[r]=t[r]}),e}function j3(e){const t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?e:~t===e.length-1?j3(e.substring(0,e.length-1)):e.substr(1+~t)}var O3=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,R3=class{static hasCaptures(e){return null!==e&&(O3.lastIndex=0,O3.test(e))}static replaceCaptures(e,t,r){return e.replace(O3,(e,n,i,a)=>{let s=r[parseInt(n||i,10)];if(!s)return e;{let e=t.substring(s.start,s.end);for(;"."===e[0];)e=e.substring(1);switch(a){case"downcase":return e.toLowerCase();case"upcase":return e.toUpperCase();default:return e}}})}};function L3(e,t){return e<t?-1:e>t?1:0}function P3(e,t){if(null===e&&null===t)return 0;if(!e)return-1;if(!t)return 1;let r=e.length,n=t.length;if(r===n){for(let n=0;n<r;n++){let r=L3(e[n],t[n]);if(0!==r)return r}return 0}return r-n}function D3(e){return!!/^#[0-9a-f]{6}$/i.test(e)||(!!/^#[0-9a-f]{8}$/i.test(e)||(!!/^#[0-9a-f]{3}$/i.test(e)||!!/^#[0-9a-f]{4}$/i.test(e)))}function $3(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var z3=class{constructor(e){this.fn=e}cache=new Map;get(e){if(this.cache.has(e))return this.cache.get(e);const t=this.fn(e);return this.cache.set(e,t),t}},B3=class{constructor(e,t,r){this._colorMap=e,this._defaults=t,this._root=r}static createFromRawTheme(e,t){return this.createFromParsedTheme(function(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,r=[],n=0;for(let i=0,a=t.length;i<a;i++){let e,a=t[i];if(!a.settings)continue;if("string"==typeof a.scope){let t=a.scope;t=t.replace(/^[,]+/,""),t=t.replace(/[,]+$/,""),e=t.split(",")}else e=Array.isArray(a.scope)?a.scope:[""];let s=-1;if("string"==typeof a.settings.fontStyle){s=0;let e=a.settings.fontStyle.split(" ");for(let t=0,r=e.length;t<r;t++){switch(e[t]){case"italic":s|=1;break;case"bold":s|=2;break;case"underline":s|=4;break;case"strikethrough":s|=8}}}let o=null;"string"==typeof a.settings.foreground&&D3(a.settings.foreground)&&(o=a.settings.foreground);let l=null;"string"==typeof a.settings.background&&D3(a.settings.background)&&(l=a.settings.background);for(let t=0,c=e.length;t<c;t++){let a=e[t].trim().split(" "),c=a[a.length-1],u=null;a.length>1&&(u=a.slice(0,a.length-1),u.reverse()),r[n++]=new G3(c,u,i,s,o,l)}}return r}(e),t)}static createFromParsedTheme(e,t){return function(e,t){e.sort((e,t)=>{let r=L3(e.scope,t.scope);return 0!==r?r:(r=P3(e.parentScopes,t.parentScopes),0!==r?r:e.index-t.index)});let r=0,n="#000000",i="#ffffff";for(;e.length>=1&&""===e[0].scope;){let t=e.shift();-1!==t.fontStyle&&(r=t.fontStyle),null!==t.foreground&&(n=t.foreground),null!==t.background&&(i=t.background)}let a=new V3(t),s=new H3(r,a.getId(n),a.getId(i)),o=new K3(new Z3(0,null,-1,0,0),[]);for(let l=0,c=e.length;l<c;l++){let t=e[l];o.insert(0,t.scope,t.parentScopes,t.fontStyle,a.getId(t.foreground),a.getId(t.background))}return new B3(a,s,o)}(e,t)}_cachedMatchRoot=new z3(e=>this._root.match(e));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(null===e)return this._defaults;const t=e.scopeName,r=this._cachedMatchRoot.get(t).find(t=>function(e,t){if(0===t.length)return!0;for(let r=0;r<t.length;r++){let n=t[r],i=!1;if(">"===n){if(r===t.length-1)return!1;n=t[++r],i=!0}for(;e&&!F3(e.scopeName,n);){if(i)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0}(e.parent,t.parentScopes));return r?new H3(r.fontStyle,r.foreground,r.background):null}},U3=class e{constructor(e,t){this.parent=e,this.scopeName=t}static push(t,r){for(const n of r)t=new e(t,n);return t}static from(...t){let r=null;for(let n=0;n<t.length;n++)r=new e(r,t[n]);return r}push(t){return new e(this,t)}getSegments(){let e=this;const t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e||null!==this.parent&&this.parent.extends(e)}getExtensionIfDefined(e){const t=[];let r=this;for(;r&&r!==e;)t.push(r.scopeName),r=r.parent;return r===e?t.reverse():void 0}};function F3(e,t){return t===e||e.startsWith(t)&&"."===e[t.length]}var H3=class{constructor(e,t,r){this.fontStyle=e,this.foregroundId=t,this.backgroundId=r}};var G3=class{constructor(e,t,r,n,i,a){this.scope=e,this.parentScopes=t,this.index=r,this.fontStyle=n,this.foreground=i,this.background=a}},q3=(e=>(e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough",e))(q3||{});var V3=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,r=e.length;t<r;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(null===e)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}},W3=Object.freeze([]),Z3=class e{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,t,r,n,i){this.scopeDepth=e,this.parentScopes=t||W3,this.fontStyle=r,this.foreground=n,this.background=i}clone(){return new e(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let r=0,n=e.length;r<n;r++)t[r]=e[r].clone();return t}acceptOverwrite(e,t,r,n){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==r&&(this.foreground=r),0!==n&&(this.background=n)}},K3=class e{constructor(e,t=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=t}_rulesWithParentScopes;static _cmpBySpecificity(e,t){if(e.scopeDepth!==t.scopeDepth)return t.scopeDepth-e.scopeDepth;let r=0,n=0;for(;">"===e.parentScopes[r]&&r++,">"===t.parentScopes[n]&&n++,!(r>=e.parentScopes.length||n>=t.parentScopes.length);){const i=t.parentScopes[n].length-e.parentScopes[r].length;if(0!==i)return i;r++,n++}return t.parentScopes.length-e.parentScopes.length}match(t){if(""!==t){let e,r,n=t.indexOf(".");if(-1===n?(e=t,r=""):(e=t.substring(0,n),r=t.substring(n+1)),this._children.hasOwnProperty(e))return this._children[e].match(r)}const r=this._rulesWithParentScopes.concat(this._mainRule);return r.sort(e._cmpBySpecificity),r}insert(t,r,n,i,a,s){if(""===r)return void this._doInsertHere(t,n,i,a,s);let o,l,c,u=r.indexOf(".");-1===u?(o=r,l=""):(o=r.substring(0,u),l=r.substring(u+1)),this._children.hasOwnProperty(o)?c=this._children[o]:(c=new e(this._mainRule.clone(),Z3.cloneArr(this._rulesWithParentScopes)),this._children[o]=c),c.insert(t+1,l,n,i,a,s)}_doInsertHere(e,t,r,n,i){if(null!==t){for(let a=0,s=this._rulesWithParentScopes.length;a<s;a++){let s=this._rulesWithParentScopes[a];if(0===P3(s.parentScopes,t))return void s.acceptOverwrite(e,r,n,i)}-1===r&&(r=this._mainRule.fontStyle),0===n&&(n=this._mainRule.foreground),0===i&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new Z3(e,t,r,n,i))}else this._mainRule.acceptOverwrite(e,r,n,i)}},Y3=class e{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(t){const r=e.getLanguageId(t),n=e.getTokenType(t),i=e.getFontStyle(t),a=e.getForeground(t),s=e.getBackground(t);console.log({languageId:r,tokenType:n,fontStyle:i,foreground:a,background:s})}static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(768&e)>>>8}static containsBalancedBrackets(e){return!!(1024&e)}static getFontStyle(e){return(30720&e)>>>11}static getForeground(e){return(16744448&e)>>>15}static getBackground(e){return(4278190080&e)>>>24}static set(t,r,n,i,a,s,o){let l=e.getLanguageId(t),c=e.getTokenType(t),u=e.containsBalancedBrackets(t)?1:0,d=e.getFontStyle(t),h=e.getForeground(t),p=e.getBackground(t);return 0!==r&&(l=r),8!==n&&(c=n),null!==i&&(u=i?1:0),-1!==a&&(d=a),0!==s&&(h=s),0!==o&&(p=o),(l|c<<8|u<<10|d<<11|h<<15|p<<24)>>>0}};function J3(e){return e}function X3(e,t){const r=[],n=function(e){let t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,r=t.exec(e);return{next:()=>{if(!r)return null;const n=r[0];return r=t.exec(e),n}}}(e);let i=n.next();for(;null!==i;){let e=0;if(2===i.length&&":"===i.charAt(1)){switch(i.charAt(0)){case"R":e=1;break;case"L":e=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=n.next()}let t=s();if(r.push({matcher:t,priority:e}),","!==i)break;i=n.next()}return r;function a(){if("-"===i){i=n.next();const e=a();return t=>!!e&&!e(t)}if("("===i){i=n.next();const e=function(){const e=[];let t=s();for(;t&&(e.push(t),"|"===i||","===i);){do{i=n.next()}while("|"===i||","===i);t=s()}return t=>e.some(e=>e(t))}();return")"===i&&(i=n.next()),e}if(Q3(i)){const e=[];do{e.push(i),i=n.next()}while(Q3(i));return r=>t(e,r)}return null}function s(){const e=[];let t=a();for(;t;)e.push(t),t=a();return t=>e.every(e=>e(t))}}function Q3(e){return!!e&&!!e.match(/[\w\.:]+/)}function e5(e){"function"==typeof e.dispose&&e.dispose()}var t5=class{constructor(e){this.scopeName=e}toKey(){return this.scopeName}},r5=class{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}},n5=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(e){const t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}},i5=class{constructor(e,t){this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new t5(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const e=this.Q;this.Q=[];const t=new n5;for(const r of e)a5(r,this.initialScopeName,this.repo,t);for(const r of t.references)if(r instanceof t5){if(this.seenFullScopeRequests.has(r.scopeName))continue;this.seenFullScopeRequests.add(r.scopeName),this.Q.push(r)}else{if(this.seenFullScopeRequests.has(r.scopeName))continue;if(this.seenPartialScopeRequests.has(r.toKey()))continue;this.seenPartialScopeRequests.add(r.toKey()),this.Q.push(r)}}};function a5(e,t,r,n){const i=r.lookup(e.scopeName);if(!i){if(e.scopeName===t)throw new Error(`No grammar provided for <${t}>`);return}const a=r.lookup(t);e instanceof t5?o5({baseGrammar:a,selfGrammar:i},n):s5(e.ruleName,{baseGrammar:a,selfGrammar:i,repository:i.repository},n);const s=r.injections(e.scopeName);if(s)for(const o of s)n.add(new t5(o))}function s5(e,t,r){if(t.repository&&t.repository[e]){l5([t.repository[e]],t,r)}}function o5(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&l5(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&l5(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function l5(e,t,r){for(const n of e){if(r.visitedRule.has(n))continue;r.visitedRule.add(n);const e=n.repository?C3({},t.repository,n.repository):t.repository;Array.isArray(n.patterns)&&l5(n.patterns,{...t,repository:e},r);const i=n.include;if(!i)continue;const a=f5(i);switch(a.kind){case 0:o5({...t,selfGrammar:t.baseGrammar},r);break;case 1:o5(t,r);break;case 2:s5(a.ruleName,{...t,repository:e},r);break;case 3:case 4:const n=a.scopeName===t.selfGrammar.scopeName?t.selfGrammar:a.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(n){const i={baseGrammar:t.baseGrammar,selfGrammar:n,repository:e};4===a.kind?s5(a.ruleName,i,r):o5(i,r)}else 4===a.kind?r.add(new r5(a.scopeName,a.ruleName)):r.add(new t5(a.scopeName))}}}var c5=class{kind=0},u5=class{kind=1},d5=class{constructor(e){this.ruleName=e}kind=2},h5=class{constructor(e){this.scopeName=e}kind=3},p5=class{constructor(e,t){this.scopeName=e,this.ruleName=t}kind=4};function f5(e){if("$base"===e)return new c5;if("$self"===e)return new u5;const t=e.indexOf("#");if(-1===t)return new h5(e);if(0===t)return new d5(e.substring(1));{const r=e.substring(0,t),n=e.substring(t+1);return new p5(r,n)}}var m5=/\\(\d+)/,g5=/\\(\d+)/g;var v5=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(e,t,r,n){this.$location=e,this.id=t,this._name=r||null,this._nameIsCapturing=R3.hasCaptures(this._name),this._contentName=n||null,this._contentNameIsCapturing=R3.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${j3(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?R3.replaceCaptures(this._name,e,t):this._name}getContentName(e,t){return this._contentNameIsCapturing&&null!==this._contentName?R3.replaceCaptures(this._contentName,e,t):this._contentName}},y5=class extends v5{retokenizeCapturedWithRuleId;constructor(e,t,r,n,i){super(e,t,r,n),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(e,t){throw new Error("Not supported!")}compile(e,t){throw new Error("Not supported!")}compileAG(e,t,r,n){throw new Error("Not supported!")}},b5=class extends v5{_match;captures;_cachedCompiledPatterns;constructor(e,t,r,n,i){super(e,t,r,null),this._match=new k5(n,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,t){t.push(this._match)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,r,n){return this._getCachedCompiledPatterns(e).compileAG(e,r,n)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new S5,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},_5=class extends v5{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,t,r,n,i){super(e,t,r,n),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,t){for(const r of this.patterns){e.getRule(r).collectPatterns(e,t)}}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,r,n){return this._getCachedCompiledPatterns(e).compileAG(e,r,n)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new S5,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},w5=class extends v5{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(e,t,r,n,i,a,s,o,l,c){super(e,t,r,n),this._begin=new k5(i,this.id),this.beginCaptures=a,this._end=new k5(s||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=o,this.applyEndPatternLast=l||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,t){return this._end.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}compileAG(e,t,r,n){return this._getCachedCompiledPatterns(e,t).compileAG(e,r,n)}_getCachedCompiledPatterns(e,t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new S5;for(const t of this.patterns){e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns)}this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}},x5=class extends v5{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(e,t,r,n,i,a,s,o,l){super(e,t,r,n),this._begin=new k5(i,this.id),this.beginCaptures=a,this.whileCaptures=o,this._while=new k5(s,-2),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,t){return this._while.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,r,n){return this._getCachedCompiledPatterns(e).compileAG(e,r,n)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new S5;for(const t of this.patterns){e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns)}}return this._cachedCompiledPatterns}compileWhile(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}compileWhileAG(e,t,r,n){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,r,n)}_getCachedCompiledWhilePatterns(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new S5,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||""),this._cachedCompiledWhilePatterns}},E5=class e{static createCaptureRule(e,t,r,n,i){return e.registerRule(e=>new y5(t,e,r,n,i))}static getCompiledRuleId(t,r,n){return t.id||r.registerRule(i=>{if(t.id=i,t.match)return new b5(t.$vscodeTextmateLocation,t.id,t.name,t.match,e._compileCaptures(t.captures,r,n));if(void 0===t.begin){t.repository&&(n=C3({},n,t.repository));let i=t.patterns;return void 0===i&&t.include&&(i=[{include:t.include}]),new _5(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,e._compilePatterns(i,r,n))}return t.while?new x5(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,r,n),t.while,e._compileCaptures(t.whileCaptures||t.captures,r,n),e._compilePatterns(t.patterns,r,n)):new w5(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,r,n),t.end,e._compileCaptures(t.endCaptures||t.captures,r,n),t.applyEndPatternLast,e._compilePatterns(t.patterns,r,n))}),t.id}static _compileCaptures(t,r,n){let i=[];if(t){let a=0;for(const e in t){if("$vscodeTextmateLocation"===e)continue;const t=parseInt(e,10);t>a&&(a=t)}for(let e=0;e<=a;e++)i[e]=null;for(const s in t){if("$vscodeTextmateLocation"===s)continue;const a=parseInt(s,10);let o=0;t[s].patterns&&(o=e.getCompiledRuleId(t[s],r,n)),i[a]=e.createCaptureRule(r,t[s].$vscodeTextmateLocation,t[s].name,t[s].contentName,o)}}return i}static _compilePatterns(t,r,n){let i=[];if(t)for(let a=0,s=t.length;a<s;a++){const s=t[a];let o=-1;if(s.include){const t=f5(s.include);switch(t.kind){case 0:case 1:o=e.getCompiledRuleId(n[s.include],r,n);break;case 2:let i=n[t.ruleName];i&&(o=e.getCompiledRuleId(i,r,n));break;case 3:case 4:const a=t.scopeName,l=4===t.kind?t.ruleName:null,c=r.getExternalGrammar(a,n);if(c)if(l){let t=c.repository[l];t&&(o=e.getCompiledRuleId(t,r,c.repository))}else o=e.getCompiledRuleId(c.repository.$self,r,c.repository)}}else o=e.getCompiledRuleId(s,r,n);if(-1!==o){const e=r.getRule(o);let t=!1;if((e instanceof _5||e instanceof w5||e instanceof x5)&&e.hasMissingPatterns&&0===e.patterns.length&&(t=!0),t)continue;i.push(o)}}return{patterns:i,hasMissingPatterns:(t?t.length:0)!==i.length}}},k5=class e{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,t){if(e&&"string"==typeof e){const t=e.length;let r=0,n=[],i=!1;for(let a=0;a<t;a++){if("\\"===e.charAt(a)&&a+1<t){const t=e.charAt(a+1);"z"===t?(n.push(e.substring(r,a)),n.push("$(?!\\n)(?<!\\n)"),r=a+2):"A"!==t&&"G"!==t||(i=!0),a++}}this.hasAnchor=i,0===r?this.source=e:(n.push(e.substring(r,t)),this.source=n.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,"string"==typeof this.source?this.hasBackReferences=m5.test(this.source):this.hasBackReferences=!1}clone(){return new e(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){if("string"!=typeof this.source)throw new Error("This method should only be called if the source is a string");let r=t.map(t=>e.substring(t.start,t.end));return g5.lastIndex=0,this.source.replace(g5,(e,t)=>$3(r[parseInt(t,10)]||""))}_buildAnchorCache(){if("string"!=typeof this.source)throw new Error("This method should only be called if the source is a string");let e,t,r,n,i=[],a=[],s=[],o=[];for(e=0,t=this.source.length;e<t;e++)r=this.source.charAt(e),i[e]=r,a[e]=r,s[e]=r,o[e]=r,"\\"===r&&e+1<t&&(n=this.source.charAt(e+1),"A"===n?(i[e+1]="",a[e+1]="",s[e+1]="A",o[e+1]="A"):"G"===n?(i[e+1]="",a[e+1]="G",s[e+1]="",o[e+1]="G"):(i[e+1]=n,a[e+1]=n,s[e+1]=n,o[e+1]=n),e++);return{A0_G0:i.join(""),A0_G1:a.join(""),A1_G0:s.join(""),A1_G1:o.join("")}}resolveAnchors(e,t){return this.hasAnchor&&this._anchorCache&&"string"==typeof this.source?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}},S5=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map(e=>e.source);this._cached=new A5(e,t,this._items.map(e=>e.ruleId))}return this._cached}compileAG(e,t,r){return this._hasAnchors?t?r?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,r)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,r)),this._anchorCache.A1_G0):r?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,r)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,r)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,r){let n=this._items.map(e=>e.resolveAnchors(t,r));return new A5(e,n,this._items.map(e=>e.ruleId))}},A5=class{constructor(e,t,r){this.regExps=t,this.rules=r,this.scanner=e.createOnigScanner(t)}scanner;dispose(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}toString(){const e=[];for(let t=0,r=this.rules.length;t<r;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join("\n")}findNextMatchSync(e,t,r){const n=this.scanner.findNextMatchSync(e,t,r);return n?{ruleId:this.rules[n.index],captureIndices:n.captureIndices}:null}},T5=class{constructor(e,t){this.languageId=e,this.tokenType=t}},N5=class e{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,t){this._defaultAttributes=new T5(e,8),this._embeddedLanguagesMatcher=new I5(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(t){return null===t?e._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}static _NULL_SCOPE_METADATA=new T5(0,0);_getBasicScopeAttributes=new z3(e=>{const t=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new T5(t,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(t){const r=t.match(e.STANDARD_TOKEN_TYPE_REGEXP);if(!r)return 8;switch(r[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},I5=class{values;scopesRegExp;constructor(e){if(0===e.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const t=e.map(([e,t])=>$3(e));t.sort(),t.reverse(),this.scopesRegExp=new RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const t=e.match(this.scopesRegExp);return t?this.values.get(t[1]):void 0}},M5=class{constructor(e,t){this.stack=e,this.stoppedEarly=t}};function C5(e,t,r,n,i,a,s,o){const l=t.content.length;let c=!1,u=-1;if(s){const s=function(e,t,r,n,i,a){let s=i.beginRuleCapturedEOL?0:-1;const o=[];for(let l=i;l;l=l.pop()){const t=l.getRule(e);t instanceof x5&&o.push({rule:t,stack:l})}for(let l=o.pop();l;l=o.pop()){const{ruleScanner:o,findOptions:c}=O5(l.rule,e,l.stack.endRule,r,n===s),u=o.findNextMatchSync(t,n,c);if(!u){i=l.stack.pop();break}if(-2!==u.ruleId){i=l.stack.pop();break}u.captureIndices&&u.captureIndices.length&&(a.produce(l.stack,u.captureIndices[0].start),R5(e,t,r,l.stack,a,l.rule.whileCaptures,u.captureIndices),a.produce(l.stack,u.captureIndices[0].end),s=u.captureIndices[0].end,u.captureIndices[0].end>n&&(n=u.captureIndices[0].end,r=!1))}return{stack:i,linePos:n,anchorPosition:s,isFirstLine:r}}(e,t,r,n,i,a);i=s.stack,n=s.linePos,r=s.isFirstLine,u=s.anchorPosition}const d=Date.now();for(;!c;){if(0!==o){if(Date.now()-d>o)return new M5(i,!0)}h()}return new M5(i,!1);function h(){const s=function(e,t,r,n,i,a){const s=function(e,t,r,n,i,a){const s=i.getRule(e),{ruleScanner:o,findOptions:l}=j5(s,e,i.endRule,r,n===a),c=o.findNextMatchSync(t,n,l);if(c)return{captureIndices:c.captureIndices,matchedRuleId:c.ruleId};return null}(e,t,r,n,i,a),o=e.getInjections();if(0===o.length)return s;const l=function(e,t,r,n,i,a,s){let o,l=Number.MAX_VALUE,c=null,u=0;const d=a.contentNameScopesList.getScopeNames();for(let h=0,p=e.length;h<p;h++){const a=e[h];if(!a.matcher(d))continue;const p=t.getRule(a.ruleId),{ruleScanner:f,findOptions:m}=j5(p,t,null,n,i===s),g=f.findNextMatchSync(r,i,m);if(!g)continue;const v=g.captureIndices[0].start;if(!(v>=l)&&(l=v,c=g.captureIndices,o=g.ruleId,u=a.priority,l===i))break}if(c)return{priorityMatch:-1===u,captureIndices:c,matchedRuleId:o};return null}(o,e,t,r,n,i,a);if(!l)return s;if(!s)return l;const c=s.captureIndices[0].start,u=l.captureIndices[0].start;if(u<c||l.priorityMatch&&u===c)return l;return s}(e,t,r,n,i,u);if(!s)return a.produce(i,l),void(c=!0);const o=s.captureIndices,d=s.matchedRuleId,h=!!(o&&o.length>0)&&o[0].end>n;if(-1===d){const s=i.getRule(e);a.produce(i,o[0].start),i=i.withContentNameScopesList(i.nameScopesList),R5(e,t,r,i,a,s.endCaptures,o),a.produce(i,o[0].end);const d=i;if(i=i.parent,u=d.getAnchorPos(),!h&&d.getEnterPos()===n)return i=d,a.produce(i,l),void(c=!0)}else{const s=e.getRule(d);a.produce(i,o[0].start);const p=i,f=s.getName(t.content,o),m=i.contentNameScopesList.pushAttributed(f,e);if(i=i.push(d,n,u,o[0].end===l,null,m,m),s instanceof w5){const n=s;R5(e,t,r,i,a,n.beginCaptures,o),a.produce(i,o[0].end),u=o[0].end;const d=n.getContentName(t.content,o),f=m.pushAttributed(d,e);if(i=i.withContentNameScopesList(f),n.endHasBackReferences&&(i=i.withEndRule(n.getEndWithResolvedBackReferences(t.content,o))),!h&&p.hasSameRuleAs(i))return i=i.pop(),a.produce(i,l),void(c=!0)}else if(s instanceof x5){const n=s;R5(e,t,r,i,a,n.beginCaptures,o),a.produce(i,o[0].end),u=o[0].end;const d=n.getContentName(t.content,o),f=m.pushAttributed(d,e);if(i=i.withContentNameScopesList(f),n.whileHasBackReferences&&(i=i.withEndRule(n.getWhileWithResolvedBackReferences(t.content,o))),!h&&p.hasSameRuleAs(i))return i=i.pop(),a.produce(i,l),void(c=!0)}else{if(R5(e,t,r,i,a,s.captures,o),a.produce(i,o[0].end),i=i.pop(),!h)return i=i.safePop(),a.produce(i,l),void(c=!0)}}o[0].end>n&&(n=o[0].end,r=!1)}}function j5(e,t,r,n,i){return{ruleScanner:e.compileAG(t,r,n,i),findOptions:0}}function O5(e,t,r,n,i){return{ruleScanner:e.compileWhileAG(t,r,n,i),findOptions:0}}function R5(e,t,r,n,i,a,s){if(0===a.length)return;const o=t.content,l=Math.min(a.length,s.length),c=[],u=s[0].end;for(let d=0;d<l;d++){const t=a[d];if(null===t)continue;const l=s[d];if(0===l.length)continue;if(l.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=l.start;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?i.produceFromScopes(c[c.length-1].scopes,l.start):i.produce(n,l.start),t.retokenizeCapturedWithRuleId){const a=t.getName(o,s),c=n.contentNameScopesList.pushAttributed(a,e),u=t.getContentName(o,s),d=c.pushAttributed(u,e),h=n.push(t.retokenizeCapturedWithRuleId,l.start,-1,!1,null,c,d),p=e.createOnigString(o.substring(0,l.end));C5(e,p,r&&0===l.start,l.start,h,i,!1,0),e5(p);continue}const h=t.getName(o,s);if(null!==h){const t=(c.length>0?c[c.length-1].scopes:n.contentNameScopesList).pushAttributed(h,e);c.push(new L5(t,l.end))}}for(;c.length>0;)i.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var L5=class{scopes;endPos;constructor(e,t){this.scopes=e,this.endPos=t}};function P5(e,t,r,n,i){const a=X3(t,D5),s=E5.getCompiledRuleId(r,n,i.repository);for(const o of a)e.push({debugSelector:t,matcher:o.matcher,ruleId:s,grammar:i,priority:o.priority})}function D5(e,t){if(t.length<e.length)return!1;let r=0;return e.every(e=>{for(let n=r;n<t.length;n++)if($5(t[n],e))return r=n+1,!0;return!1})}function $5(e,t){if(!e)return!1;if(e===t)return!0;const r=t.length;return e.length>r&&e.substr(0,r)===t&&"."===e[r]}var z5=class{constructor(e,t,r,n,i,a,s,o){if(this._rootScopeName=e,this.balancedBracketSelectors=a,this._onigLib=o,this._basicScopeAttributesProvider=new N5(r,n),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=s,this._grammar=B5(t,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const l of Object.keys(i)){const e=X3(l,D5);for(const t of e)this._tokenTypeMatchers.push({matcher:t.matcher,type:i[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e=e=>e===this._rootScopeName?this._grammar:this.getExternalGrammar(e),t=[],r=this._rootScopeName,n=e(r);if(n){const e=n.injections;if(e)for(let r in e)P5(t,r,e[r],this,n);const i=this._grammarRepository.injections(r);i&&i.forEach(e=>{const r=this.getExternalGrammar(e);if(r){const e=r.injectionSelector;e&&P5(t,e,r,this,r)}})}return t.sort((e,t)=>e.priority-t.priority),t}getInjections(){return null===this._injections&&(this._injections=this._collectInjections()),this._injections}registerRule(e){const t=++this._lastRuleId,r=e(t);return this._ruleId2desc[t]=r,r}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const r=this._grammarRepository.lookup(e);if(r)return this._includedGrammars[e]=B5(r,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,r=0){const n=this._tokenize(e,t,!1,r);return{tokens:n.lineTokens.getResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack,stoppedEarly:n.stoppedEarly}}tokenizeLine2(e,t,r=0){const n=this._tokenize(e,t,!0,r);return{tokens:n.lineTokens.getBinaryResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack,stoppedEarly:n.stoppedEarly}}_tokenize(e,t,r,n){let i;if(-1===this._rootId&&(this._rootId=E5.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),t&&t!==F5.NULL)i=!1,t.reset();else{i=!0;const e=this._basicScopeAttributesProvider.getDefaultAttributes(),r=this.themeProvider.getDefaults(),n=Y3.set(0,e.languageId,e.tokenType,null,r.fontStyle,r.foregroundId,r.backgroundId),a=this.getRule(this._rootId).getName(null,null);let s;s=a?U5.createRootAndLookUpScopeName(a,n,this):U5.createRoot("unknown",n),t=new F5(null,this._rootId,-1,-1,!1,null,s,s)}e+="\n";const a=this.createOnigString(e),s=a.content.length,o=new G5(r,e,this._tokenTypeMatchers,this.balancedBracketSelectors),l=C5(this,a,i,0,t,o,!0,n);return e5(a),{lineLength:s,lineTokens:o,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function B5(e,t){return(e=M3(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var U5=class e{constructor(e,t,r){this.parent=e,this.scopePath=t,this.tokenAttributes=r}static fromExtension(t,r){let n=t,i=t?.scopePath??null;for(const a of r)i=U3.push(i,a.scopeNames),n=new e(n,i,a.encodedTokenAttributes);return n}static createRoot(t,r){return new e(null,new U3(null,t),r)}static createRootAndLookUpScopeName(t,r,n){const i=n.getMetadataForScope(t),a=new U3(null,t),s=n.themeProvider.themeMatch(a),o=e.mergeAttributes(r,i,s);return new e(null,a,o)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return e.equals(this,t)}static equals(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}}static mergeAttributes(e,t,r){let n=-1,i=0,a=0;return null!==r&&(n=r.fontStyle,i=r.foregroundId,a=r.backgroundId),Y3.set(e,t.languageId,t.tokenType,null,n,i,a)}pushAttributed(t,r){if(null===t)return this;if(-1===t.indexOf(" "))return e._pushAttributed(this,t,r);const n=t.split(/ /g);let i=this;for(const a of n)i=e._pushAttributed(i,a,r);return i}static _pushAttributed(t,r,n){const i=n.getMetadataForScope(r),a=t.scopePath.push(r),s=n.themeProvider.themeMatch(a),o=e.mergeAttributes(t.tokenAttributes,i,s);return new e(t,a,o)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const t=[];let r=this;for(;r&&r!==e;)t.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?t.reverse():void 0}},F5=class e{constructor(e,t,r,n,i,a,s,o){this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=i,this.endRule=a,this.nameScopesList=s,this.contentNameScopesList=o,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=n}_stackElementBrand=void 0;static NULL=new e(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(t){return null!==t&&e._equals(this,t)}static _equals(e,t){return e===t||!!this._structuralEquals(e,t)&&U5.equals(e.contentNameScopesList,t.contentNameScopesList)}static _structuralEquals(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){e._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,r,n,i,a,s,o){return new e(this,t,r,n,i,a,s,o)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(t,r){const n=U5.fromExtension(t?.nameScopesList??null,r.nameScopesList);return new e(t,r.ruleId,r.enterPos??-1,r.anchorPos??-1,r.beginRuleCapturedEOL,r.endRule,n,U5.fromExtension(n,r.contentNameScopesList))}},H5=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(e,t){this.balancedBracketScopes=e.flatMap(e=>"*"===e?(this.allowAny=!0,[]):X3(e,D5).map(e=>e.matcher)),this.unbalancedBracketScopes=t.flatMap(e=>X3(e,D5).map(e=>e.matcher))}get matchesAlways(){return this.allowAny&&0===this.unbalancedBracketScopes.length}get matchesNever(){return 0===this.balancedBracketScopes.length&&!this.allowAny}match(e){for(const t of this.unbalancedBracketScopes)if(t(e))return!1;for(const t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}},G5=class{constructor(e,t,r,n){this.balancedBracketSelectors=n,this._emitBinaryTokens=e,this._tokenTypeOverrides=r,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let r=e?.tokenAttributes??0,n=!1;if(this.balancedBracketSelectors?.matchesAlways&&(n=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const t=e?.getScopeNames()??[];for(const e of this._tokenTypeOverrides)e.matcher(t)&&(r=Y3.set(r,0,J3(e.type),null,-1,0,0));this.balancedBracketSelectors&&(n=this.balancedBracketSelectors.match(t))}return n&&(r=Y3.set(r,0,8,n,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r?void(this._lastTokenEndIndex=t):(this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),void(this._lastTokenEndIndex=t))}const r=e?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:r}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);const r=new Uint32Array(this._binaryTokens.length);for(let n=0,i=this._binaryTokens.length;n<i;n++)r[n]=this._binaryTokens[n];return r}},q5=class{constructor(e,t){this._onigLib=t,this._theme=e}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}grammarForScopeName(e,t,r,n,i){if(!this._grammars.has(e)){let a=this._rawGrammars.get(e);if(!a)return null;this._grammars.set(e,function(e,t,r,n,i,a,s,o){return new z5(e,t,r,n,i,a,s,o)}(e,a,t,r,n,i,this,this._onigLib))}return this._grammars.get(e)}},V5=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new q5(B3.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(B3.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,r){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,t,r){return this._loadGrammar(e,t,r.embeddedLanguages,r.tokenTypes,new H5(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,t,r,n,i){const a=new i5(this._syncRegistry,e);for(;a.Q.length>0;)a.Q.map(e=>this._loadSingleGrammar(e.scopeName)),a.processQueue();return this._grammarForScopeName(e,t,r,n,i)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const t=this._options.loadGrammar(e);if(t){const r="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,r)}}addGrammar(e,t=[],r=0,n=null){return this._syncRegistry.addGrammar(e,t),this._grammarForScopeName(e.scopeName,r,n)}_grammarForScopeName(e,t=0,r=null,n=null,i=null){return this._syncRegistry.grammarForScopeName(e,t,r,n,i)}},W5=F5.NULL;const Z5=/["&'<>`]/g,K5=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Y5=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,J5=/[|\\{}()[\]^$+*?.]/g,X5=new WeakMap;function Q5(e,t){return e=e.replace(t.subset?function(e){let t=X5.get(e);t||(t=function(e){const t=[];let r=-1;for(;++r<e.length;)t.push(e[r].replace(J5,"\\$&"));return new RegExp("(?:"+t.join("|")+")","g")}(e),X5.set(e,t));return t}(t.subset):Z5,r),t.subset||t.escapeOnly?e:e.replace(K5,function(e,r,n){return t.format(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,n.charCodeAt(r+2),t)}).replace(Y5,r);function r(e,r,n){return t.format(e.charCodeAt(0),n.charCodeAt(r+1),t)}}const e8=/[\dA-Fa-f]/;const t8=/\d/;const r8=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],n8={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},i8=["cent","copy","divide","gt","lt","not","para","times"],a8={}.hasOwnProperty,s8={};let o8;for(o8 in n8)a8.call(n8,o8)&&(s8[n8[o8]]=o8);const l8=/[^\dA-Za-z]/;function c8(e,t,r){let n,i=function(e,t,r){const n="&#x"+e.toString(16).toUpperCase();return r&&t&&!e8.test(String.fromCharCode(t))?n:n+";"}(e,t,r.omitOptionalSemicolons);if((r.useNamedReferences||r.useShortestReferences)&&(n=function(e,t,r,n){const i=String.fromCharCode(e);if(a8.call(s8,i)){const e=s8[i],a="&"+e;return r&&r8.includes(e)&&!i8.includes(e)&&(!n||t&&61!==t&&l8.test(String.fromCharCode(t)))?a:a+";"}return""}(e,t,r.omitOptionalSemicolons,r.attribute)),(r.useShortestReferences||!n)&&r.useShortestReferences){const n=function(e,t,r){const n="&#"+String(e);return r&&t&&!t8.test(String.fromCharCode(t))?n:n+";"}(e,t,r.omitOptionalSemicolons);n.length<i.length&&(i=n)}return n&&(!r.useShortestReferences||n.length<i.length)?n:i}function u8(e,t){return Q5(e,Object.assign({format:c8},t))}const d8=/^>|^->|<!--|-->|--!>|<!-$/g,h8=[">"],p8=["<",">"];const f8=v8(1),m8=v8(-1),g8=[];function v8(e){return function(t,r,n){const i=t?t.children:g8;let a=(r||0)+e,s=i[a];if(!n)for(;s&&Qt(s);)a+=e,s=i[a];return s}}const y8={}.hasOwnProperty;function b8(e){return function(t,r,n){return y8.call(e,t.tagName)&&e[t.tagName](t,r,n)}}const _8=b8({body:function(e,t,r){const n=f8(r,t);return!n||"comment"!==n.type},caption:w8,colgroup:w8,dd:function(e,t,r){const n=f8(r,t);return!n||"element"===n.type&&("dt"===n.tagName||"dd"===n.tagName)},dt:function(e,t,r){const n=f8(r,t);return Boolean(n&&"element"===n.type&&("dt"===n.tagName||"dd"===n.tagName))},head:w8,html:function(e,t,r){const n=f8(r,t);return!n||"comment"!==n.type},li:function(e,t,r){const n=f8(r,t);return!n||"element"===n.type&&"li"===n.tagName},optgroup:function(e,t,r){const n=f8(r,t);return!n||"element"===n.type&&"optgroup"===n.tagName},option:function(e,t,r){const n=f8(r,t);return!n||"element"===n.type&&("option"===n.tagName||"optgroup"===n.tagName)},p:function(e,t,r){const n=f8(r,t);return n?"element"===n.type&&("address"===n.tagName||"article"===n.tagName||"aside"===n.tagName||"blockquote"===n.tagName||"details"===n.tagName||"div"===n.tagName||"dl"===n.tagName||"fieldset"===n.tagName||"figcaption"===n.tagName||"figure"===n.tagName||"footer"===n.tagName||"form"===n.tagName||"h1"===n.tagName||"h2"===n.tagName||"h3"===n.tagName||"h4"===n.tagName||"h5"===n.tagName||"h6"===n.tagName||"header"===n.tagName||"hgroup"===n.tagName||"hr"===n.tagName||"main"===n.tagName||"menu"===n.tagName||"nav"===n.tagName||"ol"===n.tagName||"p"===n.tagName||"pre"===n.tagName||"section"===n.tagName||"table"===n.tagName||"ul"===n.tagName):!r||!("element"===r.type&&("a"===r.tagName||"audio"===r.tagName||"del"===r.tagName||"ins"===r.tagName||"map"===r.tagName||"noscript"===r.tagName||"video"===r.tagName))},rp:x8,rt:x8,tbody:function(e,t,r){const n=f8(r,t);return!n||"element"===n.type&&("tbody"===n.tagName||"tfoot"===n.tagName)},td:E8,tfoot:function(e,t,r){return!f8(r,t)},th:E8,thead:function(e,t,r){const n=f8(r,t);return Boolean(n&&"element"===n.type&&("tbody"===n.tagName||"tfoot"===n.tagName))},tr:function(e,t,r){const n=f8(r,t);return!n||"element"===n.type&&"tr"===n.tagName}});function w8(e,t,r){const n=f8(r,t,!0);return!n||"comment"!==n.type&&!("text"===n.type&&Qt(n.value.charAt(0)))}function x8(e,t,r){const n=f8(r,t);return!n||"element"===n.type&&("rp"===n.tagName||"rt"===n.tagName)}function E8(e,t,r){const n=f8(r,t);return!n||"element"===n.type&&("td"===n.tagName||"th"===n.tagName)}const k8=b8({body:function(e){const t=f8(e,-1,!0);return!(t&&("comment"===t.type||"text"===t.type&&Qt(t.value.charAt(0))||"element"===t.type&&("meta"===t.tagName||"link"===t.tagName||"script"===t.tagName||"style"===t.tagName||"template"===t.tagName)))},colgroup:function(e,t,r){const n=m8(r,t),i=f8(e,-1,!0);if(r&&n&&"element"===n.type&&"colgroup"===n.tagName&&_8(n,r.children.indexOf(n),r))return!1;return Boolean(i&&"element"===i.type&&"col"===i.tagName)},head:function(e){const t=new Set;for(const n of e.children)if("element"===n.type&&("base"===n.tagName||"title"===n.tagName)){if(t.has(n.tagName))return!1;t.add(n.tagName)}const r=e.children[0];return!r||"element"===r.type},html:function(e){const t=f8(e,-1);return!t||"comment"!==t.type},tbody:function(e,t,r){const n=m8(r,t),i=f8(e,-1);if(r&&n&&"element"===n.type&&("thead"===n.tagName||"tbody"===n.tagName)&&_8(n,r.children.indexOf(n),r))return!1;return Boolean(i&&"element"===i.type&&"tr"===i.tagName)}});const S8={name:[["\t\n\f\r &/=>".split(""),"\t\n\f\r \"&'/=>`".split("")],["\0\t\n\f\r \"&'/<=>".split(""),"\0\t\n\f\r \"&'/<=>`".split("")]],unquoted:[["\t\n\f\r &>".split(""),"\0\t\n\f\r \"&'<=>`".split("")],["\0\t\n\f\r \"&'<=>`".split(""),"\0\t\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function A8(e,t,r){const n=wt(e.schema,t),i=e.settings.allowParseErrors&&"html"===e.schema.space?0:1,a=e.settings.allowDangerousCharacters?0:1;let s,o=e.quote;if(!n.overloadedBoolean||r!==n.attribute&&""!==r?!n.boolean&&!n.overloadedBoolean||"string"==typeof r&&r!==n.attribute&&""!==r||(r=Boolean(r)):r=!0,null==r||!1===r||"number"==typeof r&&Number.isNaN(r))return"";const l=u8(n.attribute,Object.assign({},e.settings.characterReferences,{subset:S8.name[i][a]}));return!0===r?l:(r=Array.isArray(r)?(n.commaSeparated?Mt:Ct)(r,{padLeft:!e.settings.tightCommaSeparatedLists}):String(r),e.settings.collapseEmptyAttributes&&!r?l:(e.settings.preferUnquoted&&(s=u8(r,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:S8.unquoted[i][a]}))),s!==r&&(e.settings.quoteSmart&&M2(r,o)>M2(r,e.alternative)&&(o=e.alternative),s=o+u8(r,Object.assign({},e.settings.characterReferences,{subset:("'"===o?S8.single:S8.double)[i][a],attribute:!0}))+o),l+(s?"="+s:s)))}const T8=["<","&"];function N8(e,t,r,n){return!r||"element"!==r.type||"script"!==r.tagName&&"style"!==r.tagName?u8(e.value,Object.assign({},n.settings.characterReferences,{subset:T8})):e.value}const I8=JQ("type",{invalid:function(e){throw new Error("Expected node, not `"+e+"`")},unknown:function(e){throw new Error("Cannot compile unknown node `"+e.type+"`")},handlers:{comment:function(e,t,r,n){return n.settings.bogusComments?"<?"+u8(e.value,Object.assign({},n.settings.characterReferences,{subset:h8}))+">":"\x3c!--"+e.value.replace(d8,function(e){return u8(e,Object.assign({},n.settings.characterReferences,{subset:p8}))})+"--\x3e"},doctype:function(e,t,r,n){return"<!"+(n.settings.upperDoctype?"DOCTYPE":"doctype")+(n.settings.tightDoctype?"":" ")+"html>"},element:function(e,t,r,n){const i=n.schema,a="svg"!==i.space&&n.settings.omitOptionalTags;let s="svg"===i.space?n.settings.closeEmptyElements:n.settings.voids.includes(e.tagName.toLowerCase());const o=[];let l;"html"===i.space&&"svg"===e.tagName&&(n.schema=At);const c=function(e,t){const r=[];let n,i=-1;if(t)for(n in t)if(null!==t[n]&&void 0!==t[n]){const i=A8(e,n,t[n]);i&&r.push(i)}for(;++i<r.length;){const t=e.settings.tightAttributes?r[i].charAt(r[i].length-1):void 0;i!==r.length-1&&'"'!==t&&"'"!==t&&(r[i]+=" ")}return r.join("")}(n,e.properties),u=n.all("html"===i.space&&"template"===e.tagName?e.content:e);return n.schema=i,u&&(s=!1),!c&&a&&k8(e,t,r)||(o.push("<",e.tagName,c?" "+c:""),s&&("svg"===i.space||n.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!n.settings.tightSelfClosing||"/"===l||l&&'"'!==l&&"'"!==l)&&o.push(" "),o.push("/")),o.push(">")),o.push(u),s||a&&_8(e,t,r)||o.push("</"+e.tagName+">"),o.join("")},raw:function(e,t,r,n){return n.settings.allowDangerousHtml?e.value:N8(e,0,r,n)},root:function(e,t,r,n){return n.all(e)},text:N8}});const M8={},C8={},j8=[];function O8(e,t,r){return I8(e,t,r,this)}function R8(e){const t=[],r=e&&e.children||j8;let n=-1;for(;++n<r.length;)t[n]=this.one(r[n],n,e);return t.join("")}function L8(e,t){const r="string"==typeof e?{}:{...e.colorReplacements},n="string"==typeof e?e:e.name;for(const[i,a]of Object.entries(t?.colorReplacements||{}))"string"==typeof a?r[i]=a:i===n&&Object.assign(r,a);return r}function P8(e,t){return e&&t?.[e?.toLowerCase()]||e}async function D8(e){return Promise.resolve("function"==typeof e?e():e).then(e=>e.default||e)}function $8(e){return!e||["plaintext","txt","text","plain"].includes(e)}function z8(e){return"ansi"===e||$8(e)}function B8(e){return"none"===e}function U8(e){return B8(e)}function F8(e,t){if(!t)return e;e.properties||={},e.properties.class||=[],"string"==typeof e.properties.class&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]);const r=Array.isArray(t)?t:t.split(/\s+/g);for(const n of r)n&&!e.properties.class.includes(n)&&e.properties.class.push(n);return e}function H8(e,t=!1){const r=e.split(/(\r?\n)/g);let n=0;const i=[];for(let a=0;a<r.length;a+=2){const e=t?r[a]+(r[a+1]||""):r[a];i.push([e,n]),n+=r[a].length,n+=r[a+1]?.length||0}return i}const G8="light-dark()",q8=["color","background-color"];function V8(e){const t={};if(e.color&&(t.color=e.color),e.bgColor&&(t["background-color"]=e.bgColor),e.fontStyle){e.fontStyle&q3.Italic&&(t["font-style"]="italic"),e.fontStyle&q3.Bold&&(t["font-weight"]="bold");const r=[];e.fontStyle&q3.Underline&&r.push("underline"),e.fontStyle&q3.Strikethrough&&r.push("line-through"),r.length&&(t["text-decoration"]=r.join(" "))}return t}function W8(e){return"string"==typeof e?e:Object.entries(e).map(([e,t])=>`${e}:${t}`).join(";")}const Z8=new WeakMap;function K8(e,t){Z8.set(e,t)}function Y8(e){return Z8.get(e)}class J8{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,t){return new J8(Object.fromEntries(function(e){return Array.isArray(e)?e:[e]}(t).map(e=>[e,W5])),e)}constructor(...e){if(2===e.length){const[t,r]=e;this.lang=r,this._stacks=t}else{const[t,r,n]=e;this.lang=r,this._stacks={[n]:t}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return function(e){const t=[],r=new Set;function n(e){if(r.has(e))return;r.add(e);const i=e?.nameScopesList?.scopeName;i&&t.push(i),e.parent&&n(e.parent)}return n(e),t}(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function X8(){const e=new WeakMap;function t(t){if(!e.has(t.meta)){let r=function(e){if("number"==typeof e){if(e<0||e>t.source.length)throw new I3(`Invalid decoration offset: ${e}. Code length: ${t.source.length}`);return{...n.indexToPos(e),offset:e}}{const t=n.lines[e.line];if(void 0===t)throw new I3(`Invalid decoration position ${JSON.stringify(e)}. Lines length: ${n.lines.length}`);let r=e.character;if(r<0&&(r=t.length+r),r<0||r>t.length)throw new I3(`Invalid decoration position ${JSON.stringify(e)}. Line ${e.line} length: ${t.length}`);return{...e,character:r,offset:n.posToIndex(e.line,r)}}};const n=function(e){const t=H8(e,!0).map(([e])=>e);return{lines:t,indexToPos:function(r){if(r===e.length)return{line:t.length-1,character:t[t.length-1].length};let n=r,i=0;for(const e of t){if(n<e.length)break;n-=e.length,i++}return{line:i,character:n}},posToIndex:function(e,r){let n=0;for(let i=0;i<e;i++)n+=t[i].length;return n+=r,n}}}(t.source),i=(t.options.decorations||[]).map(e=>({...e,start:r(e.start),end:r(e.end)}));!function(e){for(let t=0;t<e.length;t++){const r=e[t];if(r.start.offset>r.end.offset)throw new I3(`Invalid decoration range: ${JSON.stringify(r.start)} - ${JSON.stringify(r.end)}`);for(let n=t+1;n<e.length;n++){const t=e[n],i=r.start.offset<=t.start.offset&&t.start.offset<r.end.offset,a=r.start.offset<t.end.offset&&t.end.offset<=r.end.offset,s=t.start.offset<=r.start.offset&&r.start.offset<t.end.offset,o=t.start.offset<r.end.offset&&r.end.offset<=t.end.offset;if(i||a||s||o){if(i&&a)continue;if(s&&o)continue;if(s&&r.start.offset===r.end.offset)continue;if(a&&t.start.offset===t.end.offset)continue;throw new I3(`Decorations ${JSON.stringify(r.start)} and ${JSON.stringify(t.start)} intersect.`)}}}}(i),e.set(t.meta,{decorations:i,converter:n,source:t.source})}return e.get(t.meta)}return{name:"shiki:decorations",tokens(e){if(!this.options.decorations?.length)return;const r=t(this).decorations.flatMap(e=>[e.start.offset,e.end.offset]),n=function(e,t){const r=Array.from(t instanceof Set?t:new Set(t)).sort((e,t)=>e-t);return r.length?e.map(e=>e.flatMap(e=>{const t=r.filter(t=>e.offset<t&&t<e.offset+e.content.length).map(t=>t-e.offset).sort((e,t)=>e-t);return t.length?function(e,t){let r=0;const n=[];for(const i of t)i>r&&n.push({...e,content:e.content.slice(r,i),offset:e.offset+r}),r=i;return r<e.content.length&&n.push({...e,content:e.content.slice(r),offset:e.offset+r}),n}(e,t):e})):e}(e,r);return n},code(e){if(!this.options.decorations?.length)return;const r=t(this),n=Array.from(e.children).filter(e=>"element"===e.type&&"span"===e.tagName);if(n.length!==r.converter.lines.length)throw new I3(`Number of lines in code element (${n.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function i(e,t,r,i){const a=n[e];let o="",l=-1,c=-1;if(0===t&&(l=0),0===r&&(c=0),r===Number.POSITIVE_INFINITY&&(c=a.children.length),-1===l||-1===c)for(let n=0;n<a.children.length;n++)o+=Q8(a.children[n]),-1===l&&o.length===t&&(l=n+1),-1===c&&o.length===r&&(c=n+1);if(-1===l)throw new I3(`Failed to find start index for decoration ${JSON.stringify(i.start)}`);if(-1===c)throw new I3(`Failed to find end index for decoration ${JSON.stringify(i.end)}`);const u=a.children.slice(l,c);if(i.alwaysWrap||u.length!==a.children.length)if(i.alwaysWrap||1!==u.length||"element"!==u[0].type){const e={type:"element",tagName:"span",properties:{},children:u};s(e,i,"wrapper"),a.children.splice(l,u.length,e)}else s(u[0],i,"token");else s(a,i,"line")}function a(e,t){n[e]=s(n[e],t,"line")}function s(e,t,r){const n=t.properties||{},i=t.transform||(e=>e);return e.tagName=t.tagName||"span",e.properties={...e.properties,...n,class:e.properties.class},t.properties?.class&&F8(e,t.properties.class),e=i(e,r)||e}const o=[],l=r.decorations.sort((e,t)=>t.start.offset-e.start.offset||e.end.offset-t.end.offset);for(const t of l){const{start:e,end:r}=t;if(e.line===r.line)i(e.line,e.character,r.character,t);else if(e.line<r.line){i(e.line,e.character,Number.POSITIVE_INFINITY,t);for(let n=e.line+1;n<r.line;n++)o.unshift(()=>a(n,t));i(r.line,0,r.character,t)}}o.forEach(e=>e())}}}function Q8(e){return"text"===e.type?e.value:"element"===e.type?e.children.map(Q8).join(""):""}const e7=[X8()];function t7(e){const t=function(e){const t=[],r=[],n=[];for(const i of e)switch(i.enforce){case"pre":t.push(i);break;case"post":r.push(i);break;default:n.push(i)}return{pre:t,post:r,normal:n}}(e.transformers||[]);return[...t.pre,...t.normal,...t.post,...e7]}var r7=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],n7={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function i7(e,t){const r=e.indexOf("",t);if(-1!==r&&"["===e[r+1]){const t=e.indexOf("m",r);if(-1!==t)return{sequence:e.substring(r+2,t).split(";"),startPosition:r,position:t+1}}return{position:e.length}}function a7(e){const t=e.shift();if("2"===t){const t=e.splice(0,3).map(e=>Number.parseInt(e));if(3!==t.length||t.some(e=>Number.isNaN(e)))return;return{type:"rgb",rgb:t}}if("5"===t){const t=e.shift();if(t)return{type:"table",index:Number(t)}}}function s7(e){const t=[];for(;e.length>0;){const r=e.shift();if(!r)continue;const n=Number.parseInt(r);if(!Number.isNaN(n))if(0===n)t.push({type:"resetAll"});else if(n<=9){n7[n]&&t.push({type:"setDecoration",value:n7[n]})}else if(n<=29){const e=n7[n-20];e&&(t.push({type:"resetDecoration",value:e}),"dim"===e&&t.push({type:"resetDecoration",value:"bold"}))}else if(n<=37)t.push({type:"setForegroundColor",value:{type:"named",name:r7[n-30]}});else if(38===n){const r=a7(e);r&&t.push({type:"setForegroundColor",value:r})}else if(39===n)t.push({type:"resetForegroundColor"});else if(n<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:r7[n-40]}});else if(48===n){const r=a7(e);r&&t.push({type:"setBackgroundColor",value:r})}else 49===n?t.push({type:"resetBackgroundColor"}):53===n?t.push({type:"setDecoration",value:"overline"}):55===n?t.push({type:"resetDecoration",value:"overline"}):n>=90&&n<=97?t.push({type:"setForegroundColor",value:{type:"named",name:r7[n-90+8]}}):n>=100&&n<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:r7[n-100+8]}})}return t}var o7={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function l7(e=o7){function t(t){return e[t]}function r(e){return`#${e.map(e=>Math.max(0,Math.min(e,255)).toString(16).padStart(2,"0")).join("")}`}let n;function i(e){return function(){if(n)return n;n=[];for(let r=0;r<r7.length;r++)n.push(t(r7[r]));let e=[0,95,135,175,215,255];for(let t=0;t<6;t++)for(let i=0;i<6;i++)for(let a=0;a<6;a++)n.push(r([e[t],e[i],e[a]]));let i=8;for(let t=0;t<24;t++,i+=10)n.push(r([i,i,i]));return n}()[e]}return{value:function(e){switch(e.type){case"named":return t(e.name);case"rgb":return r(e.rgb);case"table":return i(e.index)}}}}const c7={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function u7(e,t,r){const n=L8(e,r),i=H8(t),a=Object.fromEntries(r7.map(t=>{const r=`terminal.ansi${t[0].toUpperCase()}${t.substring(1)}`,n=e.colors?.[r];return[t,n||c7[t]]})),s=l7(a),o=function(){let e=null,t=null,r=new Set;return{parse(n){const i=[];let a=0;do{const s=i7(n,a),o=s.sequence?n.substring(a,s.startPosition):n.substring(a);if(o.length>0&&i.push({value:o,foreground:e,background:t,decorations:new Set(r)}),s.sequence){const n=s7(s.sequence);for(const i of n)"resetAll"===i.type?(e=null,t=null,r.clear()):"resetForegroundColor"===i.type?e=null:"resetBackgroundColor"===i.type?t=null:"resetDecoration"===i.type&&r.delete(i.value);for(const i of n)"setForegroundColor"===i.type?e=i.value:"setBackgroundColor"===i.type?t=i.value:"setDecoration"===i.type&&r.add(i.value)}a=s.position}while(a<n.length);return i}}}();return i.map(t=>o.parse(t[0]).map(r=>{let i,a;r.decorations.has("reverse")?(i=r.background?s.value(r.background):e.bg,a=r.foreground?s.value(r.foreground):e.fg):(i=r.foreground?s.value(r.foreground):e.fg,a=r.background?s.value(r.background):void 0),i=P8(i,n),a=P8(a,n),r.decorations.has("dim")&&(i=function(e){const t=e.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/i);if(t){if(t[3]){const e=Math.round(Number.parseInt(t[3],16)/2).toString(16).padStart(2,"0");return`#${t[1]}${t[2]}${e}`}return t[2]?`#${t[1]}${t[2]}80`:`#${Array.from(t[1]).map(e=>`${e}${e}`).join("")}80`}const r=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return r?`var(${r[1]}-dim)`:e}(i));let o=q3.None;return r.decorations.has("bold")&&(o|=q3.Bold),r.decorations.has("italic")&&(o|=q3.Italic),r.decorations.has("underline")&&(o|=q3.Underline),r.decorations.has("strikethrough")&&(o|=q3.Strikethrough),{content:r.value,offset:t[1],color:i,bgColor:a,fontStyle:o}}))}function d7(e,t,r={}){const{lang:n="text",theme:i=e.getLoadedThemes()[0]}=r;if($8(n)||B8(i))return H8(t).map(e=>[{content:e[0],offset:e[1]}]);const{theme:a,colorMap:s}=e.setTheme(i);if("ansi"===n)return u7(a,t,r);const o=e.getLanguage(n);if(r.grammarState){if(r.grammarState.lang!==o.name)throw new I3(`Grammar state language "${r.grammarState.lang}" does not match highlight language "${o.name}"`);if(!r.grammarState.themes.includes(a.name))throw new I3(`Grammar state themes "${r.grammarState.themes}" do not contain highlight theme "${a.name}"`)}return function(e,t,r,n,i){const a=h7(e,t,r,n,i),s=new J8(h7(e,t,r,n,i).stateStack,t.name,r.name);return K8(a.tokens,s),a.tokens}(t,o,a,s,r)}function h7(e,t,r,n,i){const a=L8(r,i),{tokenizeMaxLineLength:s=0,tokenizeTimeLimit:o=500}=i,l=H8(e);let c=i.grammarState?function(e,t){if(!(e instanceof J8))throw new I3("Invalid grammar state");return e.getInternalStack(t)}(i.grammarState,r.name)??W5:null!=i.grammarContextCode?h7(i.grammarContextCode,t,r,n,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:W5,u=[];const d=[];for(let h=0,p=l.length;h<p;h++){const[e,p]=l[h];if(""===e){u=[],d.push([]);continue}if(s>0&&e.length>=s){u=[],d.push([{content:e,offset:p,color:"",fontStyle:0}]);continue}let f,m,g;i.includeExplanation&&(f=t.tokenizeLine(e,c,o),m=f.tokens,g=0);const v=t.tokenizeLine2(e,c,o),y=v.tokens.length/2;for(let t=0;t<y;t++){const s=v.tokens[2*t],o=t+1<y?v.tokens[2*t+2]:e.length;if(s===o)continue;const l=v.tokens[2*t+1],c=P8(n[Y3.getForeground(l)],a),d=Y3.getFontStyle(l),h={content:e.substring(s,o),offset:p+s,color:c,fontStyle:d};if(i.includeExplanation){const t=[];if("scopeName"!==i.includeExplanation)for(const e of r.settings){let r;switch(typeof e.scope){case"string":r=e.scope.split(/,/).map(e=>e.trim());break;case"object":r=e.scope;break;default:continue}t.push({settings:e,selectors:r.map(e=>e.split(/ /))})}h.explanation=[];let n=0;for(;s+n<o;){const r=m[g],a=e.substring(r.startIndex,r.endIndex);n+=a.length,h.explanation.push({content:a,scopes:"scopeName"===i.includeExplanation?p7(r.scopes):f7(t,r.scopes)}),g+=1}}u.push(h)}d.push(u),u=[],c=v.ruleStack}return{tokens:d,stateStack:c}}function p7(e){return e.map(e=>({scopeName:e}))}function f7(e,t){const r=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];r[n]={scopeName:i,themeMatches:v7(e,i,t.slice(0,n))}}return r}function m7(e,t){return e===t||t.substring(0,e.length)===e&&"."===t[e.length]}function g7(e,t,r){if(!m7(e[e.length-1],t))return!1;let n=e.length-2,i=r.length-1;for(;n>=0&&i>=0;)m7(e[n],r[i])&&(n-=1),i-=1;return-1===n}function v7(e,t,r){const n=[];for(const{selectors:i,settings:a}of e)for(const e of i)if(g7(e,t,r)){n.push(a);break}return n}function y7(e,t,r){const n=Object.entries(r.themes).filter(e=>e[1]).map(e=>({color:e[0],theme:e[1]})),i=n.map(n=>{const i=d7(e,t,{...r,theme:n.theme});return{tokens:i,state:Y8(i),theme:"string"==typeof n.theme?n.theme:n.theme.name}}),a=function(...e){const t=e.map(()=>[]),r=e.length;for(let n=0;n<e[0].length;n++){const i=e.map(e=>e[n]),a=t.map(()=>[]);t.forEach((e,t)=>e.push(a[t]));const s=i.map(()=>0),o=i.map(e=>e[0]);for(;o.every(e=>e);){const e=Math.min(...o.map(e=>e.content.length));for(let t=0;t<r;t++){const r=o[t];r.content.length===e?(a[t].push(r),s[t]+=1,o[t]=i[t][s[t]]):(a[t].push({...r,content:r.content.slice(0,e)}),o[t]={...r,content:r.content.slice(e),offset:r.offset+e})}}}return t}(...i.map(e=>e.tokens)),s=a[0].map((e,t)=>e.map((e,i)=>{const s={content:e.content,variants:{},offset:e.offset};return"includeExplanation"in r&&r.includeExplanation&&(s.explanation=e.explanation),a.forEach((e,r)=>{const{content:a,explanation:o,offset:l,...c}=e[t][i];s.variants[n[r].color]=c}),s})),o=i[0].state?new J8(Object.fromEntries(i.map(e=>[e.theme,e.state?.getInternalStack(e.theme)])),i[0].state.lang):void 0;return o&&K8(s,o),s}function b7(e,t,r){let n,i,a,s,o,l;if("themes"in r){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-",colorsRendering:d="css-vars"}=r,h=Object.entries(r.themes).filter(e=>e[1]).map(e=>({color:e[0],theme:e[1]})).sort((e,t)=>e.color===c?-1:t.color===c?1:0);if(0===h.length)throw new I3("`themes` option must not be empty");const p=y7(e,t,r);if(l=Y8(p),c&&G8!==c&&!h.find(e=>e.color===c))throw new I3(`\`themes\` option must contain the defaultColor key \`${c}\``);const f=h.map(t=>e.getTheme(t.theme)),m=h.map(e=>e.color);a=p.map(e=>e.map(e=>function(e,t,r,n,i="css-vars"){const a={content:e.content,explanation:e.explanation,offset:e.offset},s=t.map(t=>V8(e.variants[t])),o=new Set(s.flatMap(e=>Object.keys(e))),l={},c=(e,n)=>{const i="color"===n?"":"background-color"===n?"-bg":`-${n}`;return r+t[e]+("color"===n?"":i)};return s.forEach((e,r)=>{for(const a of o){const o=e[a]||"inherit";if(0===r&&n&&q8.includes(a))if(n===G8&&s.length>1){const e=t.findIndex(e=>"light"===e),n=t.findIndex(e=>"dark"===e);if(-1===e||-1===n)throw new I3('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const u=s[e][a]||"inherit",d=s[n][a]||"inherit";l[a]=`light-dark(${u}, ${d})`,"css-vars"===i&&(l[c(r,a)]=o)}else l[a]=o;else"css-vars"===i&&(l[c(r,a)]=o)}}),a.htmlStyle=l,a}(e,m,u,c,d))),l&&K8(a,l);const g=h.map(e=>L8(e.theme,r));i=_7(h,f,g,u,c,"fg",d),n=_7(h,f,g,u,c,"bg",d),s=`shiki-themes ${f.map(e=>e.name).join(" ")}`,o=c?void 0:[i,n].join(";")}else{if(!("theme"in r))throw new I3("Invalid options, either `theme` or `themes` must be provided");{const o=L8(r.theme,r);a=d7(e,t,r);const c=e.getTheme(r.theme);n=P8(c.bg,o),i=P8(c.fg,o),s=c.name,l=Y8(a)}}return{tokens:a,fg:i,bg:n,themeName:s,rootStyle:o,grammarState:l}}function _7(e,t,r,n,i,a,s){return e.map((o,l)=>{const c=P8(t[l][a],r[l])||"inherit",u=`${n+o.color}${"bg"===a?"-bg":""}:${c}`;if(0===l&&i){if(i===G8&&e.length>1){const n=e.findIndex(e=>"light"===e.color),i=e.findIndex(e=>"dark"===e.color);if(-1===n||-1===i)throw new I3('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');return`light-dark(${P8(t[n][a],r[n])||"inherit"}, ${P8(t[i][a],r[i])||"inherit"});${u}`}return c}return"css-vars"===s?u:null}).filter(e=>!!e).join(";")}function w7(e,t,r,n={meta:{},options:r,codeToHast:(t,r)=>w7(e,t,r),codeToTokens:(t,r)=>b7(e,t,r)}){let i=t;for(const f of t7(r))i=f.preprocess?.call(n,i,r)||i;let{tokens:a,fg:s,bg:o,themeName:l,rootStyle:c,grammarState:u}=b7(e,i,r);const{mergeWhitespaces:d=!0,mergeSameStyleTokens:h=!1}=r;!0===d?a=function(e){return e.map(e=>{const t=[];let r="",n=0;return e.forEach((i,a)=>{const s=!(i.fontStyle&&(i.fontStyle&q3.Underline||i.fontStyle&q3.Strikethrough));s&&i.content.match(/^\s+$/)&&e[a+1]?(n||(n=i.offset),r+=i.content):r?(s?t.push({...i,offset:n,content:r+i.content}):t.push({content:r,offset:n},i),n=0,r=""):t.push(i)}),t})}(a):"never"===d&&(a=function(e){return e.map(e=>e.flatMap(e=>{if(e.content.match(/^\s+$/))return e;const t=e.content.match(/^(\s*)(.*?)(\s*)$/);if(!t)return e;const[,r,n,i]=t;if(!r&&!i)return e;const a=[{...e,offset:e.offset+r.length,content:n}];return r&&a.unshift({content:r,offset:e.offset}),i&&a.push({content:i,offset:e.offset+r.length+n.length}),a}))}(a)),h&&(a=function(e){return e.map(e=>{const t=[];for(const r of e){if(0===t.length){t.push({...r});continue}const e=t[t.length-1],n=W8(e.htmlStyle||V8(e)),i=W8(r.htmlStyle||V8(r)),a=e.fontStyle&&(e.fontStyle&q3.Underline||e.fontStyle&q3.Strikethrough),s=r.fontStyle&&(r.fontStyle&q3.Underline||r.fontStyle&q3.Strikethrough);a||s||n!==i?t.push({...r}):e.content+=r.content}return t})}(a));const p={...n,get source(){return i}};for(const f of t7(r))a=f.tokens?.call(p,a)||a;return function(e,t,r,n=Y8(e)){const i=t7(t),a=[],s={type:"root",children:[]},{structure:o="classic",tabindex:l="0"}=t;let c={type:"element",tagName:"pre",properties:{class:`shiki ${t.themeName||""}`,style:t.rootStyle||`background-color:${t.bg};color:${t.fg}`,...!1!==l&&null!=l?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(t.meta||{})).filter(([e])=>!e.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:a};const d=[],h={...r,structure:o,addClassToHast:F8,get source(){return r.source},get tokens(){return e},get options(){return t},get root(){return s},get pre(){return c},get code(){return u},get lines(){return d}};if(e.forEach((e,t)=>{t&&("inline"===o?s.children.push({type:"element",tagName:"br",properties:{},children:[]}):"classic"===o&&a.push({type:"text",value:"\n"}));let r={type:"element",tagName:"span",properties:{class:"line"},children:[]},n=0;for(const a of e){let e={type:"element",tagName:"span",properties:{...a.htmlAttrs},children:[{type:"text",value:a.content}]};const l=W8(a.htmlStyle||V8(a));l&&(e.properties.style=l);for(const s of i)e=s?.span?.call(h,e,t+1,n,r,a)||e;"inline"===o?s.children.push(e):"classic"===o&&r.children.push(e),n+=a.content.length}if("classic"===o){for(const e of i)r=e?.line?.call(h,r,t+1)||r;d.push(r),a.push(r)}}),"classic"===o){for(const e of i)u=e?.code?.call(h,u)||u;c.children.push(u);for(const e of i)c=e?.pre?.call(h,c)||c;s.children.push(c)}let p=s;for(const f of i)p=f?.root?.call(h,p)||p;n&&K8(p,n);return p}(a,{...r,fg:s,bg:o,themeName:l,rootStyle:c},p,u)}const x7=function(e,t){const r=t||M8,n=r.quote||'"',i='"'===n?"'":'"';if('"'!==n&&"'"!==n)throw new Error("Invalid quote `"+n+"`, expected `'` or `\"`");return{one:O8,all:R8,settings:{omitOptionalTags:r.omitOptionalTags||!1,allowParseErrors:r.allowParseErrors||!1,allowDangerousCharacters:r.allowDangerousCharacters||!1,quoteSmart:r.quoteSmart||!1,preferUnquoted:r.preferUnquoted||!1,tightAttributes:r.tightAttributes||!1,upperDoctype:r.upperDoctype||!1,tightDoctype:r.tightDoctype||!1,bogusComments:r.bogusComments||!1,tightCommaSeparatedLists:r.tightCommaSeparatedLists||!1,tightSelfClosing:r.tightSelfClosing||!1,collapseEmptyAttributes:r.collapseEmptyAttributes||!1,allowDangerousHtml:r.allowDangerousHtml||!1,voids:r.voids||i0,characterReferences:r.characterReferences||C8,closeSelfClosing:r.closeSelfClosing||!1,closeEmptyElements:r.closeEmptyElements||!1},schema:"svg"===r.space?At:St,quote:n,alternative:i}.one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)};const E7="#333333",k7="#bbbbbb",S7="#fffffe",A7="#1e1e1e",T7="__shiki_resolved";function N7(e){if(e?.[T7])return e;const t={...e};t.tokenColors&&!t.settings&&(t.settings=t.tokenColors,delete t.tokenColors),t.type||="dark",t.colorReplacements={...t.colorReplacements},t.settings||=[];let{bg:r,fg:n}=t;if(!r||!n){const e=t.settings?t.settings.find(e=>!e.name&&!e.scope):void 0;e?.settings?.foreground&&(n=e.settings.foreground),e?.settings?.background&&(r=e.settings.background),!n&&t?.colors?.["editor.foreground"]&&(n=t.colors["editor.foreground"]),!r&&t?.colors?.["editor.background"]&&(r=t.colors["editor.background"]),n||(n="light"===t.type?E7:k7),r||(r="light"===t.type?S7:A7),t.fg=n,t.bg=r}t.settings[0]&&t.settings[0].settings&&!t.settings[0].scope||t.settings.unshift({settings:{foreground:t.fg,background:t.bg}});let i=0;const a=new Map;function s(e){if(a.has(e))return a.get(e);i+=1;const r=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return t.colorReplacements?.[`#${r}`]?s(e):(a.set(e,r),r)}t.settings=t.settings.map(e=>{const r=e.settings?.foreground&&!e.settings.foreground.startsWith("#"),n=e.settings?.background&&!e.settings.background.startsWith("#");if(!r&&!n)return e;const i={...e,settings:{...e.settings}};if(r){const r=s(e.settings.foreground);t.colorReplacements[r]=e.settings.foreground,i.settings.foreground=r}if(n){const r=s(e.settings.background);t.colorReplacements[r]=e.settings.background,i.settings.background=r}return i});for(const o of Object.keys(t.colors||{}))if(("editor.foreground"===o||"editor.background"===o||o.startsWith("terminal.ansi"))&&!t.colors[o]?.startsWith("#")){const e=s(t.colors[o]);t.colorReplacements[e]=t.colors[o],t.colors[o]=e}return Object.defineProperty(t,T7,{enumerable:!1,writable:!1,value:!0}),t}async function I7(e){return Array.from(new Set((await Promise.all(e.filter(e=>!z8(e)).map(async e=>await D8(e).then(e=>Array.isArray(e)?e:[e])))).flat()))}async function M7(e){return(await Promise.all(e.map(async e=>U8(e)?null:N7(await D8(e))))).filter(e=>!!e)}let C7=class extends Error{constructor(e){super(e),this.name="ShikiError"}};class j7 extends V5{constructor(e,t,r,n={}){super(e),this._resolver=e,this._themes=t,this._langs=r,this._alias=n,this._themes.map(e=>this.loadTheme(e)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return"string"==typeof e?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const t=N7(e);return t.name&&(this._resolvedThemes.set(t.name,t),this._loadedThemesCache=null),t}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let t=this._textmateThemeCache.get(e);t||(t=B3.createFromRawTheme(e),this._textmateThemeCache.set(e,t)),this._syncRegistry.setTheme(t)}getGrammar(e){if(this._alias[e]){const t=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],t.has(e))throw new C7(`Circular alias \`${Array.from(t).join(" -> ")} -> ${e}\``);t.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const t=new Set([...this._langMap.values()].filter(t=>t.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const n=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(n.name=e.name,this._resolvedGrammars.set(e.name,n),e.aliases&&e.aliases.forEach(t=>{this._alias[t]=e.name}),this._loadedLanguagesCache=null,t.size)for(const i of t)this._resolvedGrammars.delete(i.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(i.scopeName),this._syncRegistry?._grammars?.delete(i.scopeName),this.loadLanguage(this._langMap.get(i.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const n of e)this.resolveEmbeddedLanguages(n);const t=Array.from(this._langGraph.entries()),r=t.filter(([e,t])=>!t);if(r.length){const e=t.filter(([e,t])=>t&&t.embeddedLangs?.some(e=>r.map(([e])=>e).includes(e))).filter(e=>!r.includes(e));throw new C7(`Missing languages ${r.map(([e])=>`\`${e}\``).join(", ")}, required by ${e.map(([e])=>`\`${e}\``).join(", ")}`)}for(const[n,i]of t)this._resolver.addLanguage(i);for(const[n,i]of t)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const t of e.embeddedLangs)this._langGraph.set(t,this._langMap.get(t))}}class O7{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,t){this._onigLib={createOnigScanner:t=>e.createScanner(t),createOnigString:t=>e.createString(t)},t.forEach(e=>this.addLanguage(e))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(t=>{this._langs.set(t,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(e.scopeName)})}getInjections(e){const t=e.split(".");let r=[];for(let n=1;n<=t.length;n++){const e=t.slice(0,n).join(".");r=[...r,...this._injections.get(e)||[]]}return r}}let R7=0;async function L7(e){e.engine||function(e,t=3){t>3||console.trace(`[SHIKI DEPRECATE]: ${e}`)}("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[t,r,n]=await Promise.all([M7(e.themes||[]),I7(e.langs||[]),e.engine]);return function(e){R7+=1,!1!==e.warnings&&R7>=10&&R7%10==0&&console.warn(`[Shiki] ${R7} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let t=!1;if(!e.engine)throw new C7("`engine` option is required for synchronous mode");const r=(e.langs||[]).flat(1),n=(e.themes||[]).flat(1).map(N7),i=new O7(e.engine,r),a=new j7(i,n,r,e.langAlias);let s;function o(e){if("none"===e)return{bg:"",fg:"",name:"none",settings:[],type:"dark"};u();const t=a.getTheme(e);if(!t)throw new C7(`Theme \`${e}\` not found, you may need to load it first`);return t}function l(...e){u(),a.loadLanguages(e.flat(1))}function c(...e){u();for(const t of e.flat(1))a.loadTheme(t)}function u(){if(t)throw new C7("Shiki instance has been disposed")}function d(){t||(t=!0,a.dispose(),R7-=1)}return{setTheme:function(e){u();const t=o(e);return s!==e&&(a.setTheme(t),s=e),{theme:t,colorMap:a.getColorMap()}},getTheme:o,getLanguage:function(e){u();const t=a.getGrammar("string"==typeof e?e:e.name);if(!t)throw new C7(`Language \`${e}\` not found, you may need to load it first`);return t},getLoadedThemes:function(){return u(),a.getLoadedThemes()},getLoadedLanguages:function(){return u(),a.getLoadedLanguages()},loadLanguage:async function(...e){return l(await I7(e))},loadLanguageSync:l,loadTheme:async function(...e){return u(),c(await M7(e))},loadThemeSync:c,dispose:d,[Symbol.dispose]:d}}({...e,themes:t,langs:r,engine:n})}async function P7(e){const t=await L7(e);return{getLastGrammarState:(...e)=>function(...e){if(2===e.length)return Y8(e[1]);const[t,r,n={}]=e,{lang:i="text",theme:a=t.getLoadedThemes()[0]}=n;if($8(i)||B8(a))throw new I3("Plain language does not have grammar state");if("ansi"===i)throw new I3("ANSI language does not have grammar state");const{theme:s,colorMap:o}=t.setTheme(a),l=t.getLanguage(i);return new J8(h7(r,l,s,o,n).stateStack,l.name,s.name)}(t,...e),codeToTokensBase:(e,r)=>d7(t,e,r),codeToTokensWithThemes:(e,r)=>y7(t,e,r),codeToTokens:(e,r)=>b7(t,e,r),codeToHast:(e,r)=>w7(t,e,r),codeToHtml:(e,r)=>function(e,t,r){const n={meta:{},options:r,codeToHast:(t,r)=>w7(e,t,r),codeToTokens:(t,r)=>b7(e,t,r)};let i=x7(w7(e,t,r,n));for(const a of t7(r))i=a.postprocess?.call(n,i,r)||i;return i}(t,e,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...t,getInternalContext:()=>t}}function D7(e){const t=e.langs,r=e.themes,n=e.engine;return async function(e){function i(r){if("string"==typeof r){if(z8(r))return[];r=e.langAlias?.[r]||r;const n=t[r];if(!n)throw new I3(`Language \`${r}\` is not included in this bundle. You may want to load it from external source.`);return n}return r}function a(e){if(U8(e))return"none";if("string"==typeof e){const t=r[e];if(!t)throw new I3(`Theme \`${e}\` is not included in this bundle. You may want to load it from external source.`);return t}return e}const s=(e.themes??[]).map(e=>a(e)),o=(e.langs??[]).map(e=>i(e)),l=await P7({engine:e.engine??n(),...e,themes:s,langs:o});return{...l,loadLanguage:(...e)=>l.loadLanguage(...e.map(i)),loadTheme:(...e)=>l.loadTheme(...e.map(a)),getBundledLanguages:()=>t,getBundledThemes:()=>r}}}const $7=[{id:"abap",name:"ABAP",import:()=>cn(()=>import("./abap.mjs-DnJxzdy9.js"),[])},{id:"actionscript-3",name:"ActionScript",import:()=>cn(()=>import("./actionscript-3.mjs-CKUqbIUM.js"),[])},{id:"ada",name:"Ada",import:()=>cn(()=>import("./ada.mjs-iG1FnIvR.js"),[])},{id:"angular-html",name:"Angular HTML",import:()=>cn(()=>import("./chunk-BtXXjYkq.js").then(e=>e.f),__vite__mapDeps([0,1,2,3]))},{id:"angular-ts",name:"Angular TypeScript",import:()=>cn(()=>import("./angular-ts.mjs-BzYopxIH.js"),__vite__mapDeps([4,0,1,2,3,5]))},{id:"apache",name:"Apache Conf",import:()=>cn(()=>import("./apache.mjs-CdTKWnKT.js"),[])},{id:"apex",name:"Apex",import:()=>cn(()=>import("./apex.mjs-K0ODxYTt.js"),[])},{id:"apl",name:"APL",import:()=>cn(()=>import("./apl.mjs-mpyHuvac.js"),__vite__mapDeps([6,1,2,3,7,8,9]))},{id:"applescript",name:"AppleScript",import:()=>cn(()=>import("./applescript.mjs-BlLNmGTp.js"),[])},{id:"ara",name:"Ara",import:()=>cn(()=>import("./ara.mjs-Ba3fhlsS.js"),[])},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>cn(()=>import("./asciidoc.mjs-XTVL4-GN.js"),[])},{id:"asm",name:"Assembly",import:()=>cn(()=>import("./asm.mjs-CHX6lpGW.js"),[])},{id:"astro",name:"Astro",import:()=>cn(()=>import("./astro.mjs-BQeseV-Y.js"),__vite__mapDeps([10,9,2,11,3,12,13]))},{id:"awk",name:"AWK",import:()=>cn(()=>import("./awk.mjs-XRrwoikR.js"),[])},{id:"ballerina",name:"Ballerina",import:()=>cn(()=>import("./ballerina.mjs-Dh0JsEtz.js"),[])},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>cn(()=>import("./bat.mjs-BVu0TwaT.js"),[])},{id:"beancount",name:"Beancount",import:()=>cn(()=>import("./beancount.mjs-CJl0njO0.js"),[])},{id:"berry",name:"Berry",aliases:["be"],import:()=>cn(()=>import("./berry.mjs-D4qT7XM1.js"),[])},{id:"bibtex",name:"BibTeX",import:()=>cn(()=>import("./bibtex.mjs-CGjxJ4Zd.js"),[])},{id:"bicep",name:"Bicep",import:()=>cn(()=>import("./bicep.mjs-DSW96mAt.js"),[])},{id:"blade",name:"Blade",import:()=>cn(()=>import("./blade.mjs-Bk2w870E.js"),__vite__mapDeps([14,15,1,2,3,7,8,16,9]))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:()=>cn(()=>import("./bsl.mjs-BtO0boQN.js"),__vite__mapDeps([17,18]))},{id:"c",name:"C",import:()=>cn(()=>import("./c.mjs-BmJt9k-y.js"),[])},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>cn(()=>import("./cadence.mjs-DbDq8SCj.js"),[])},{id:"cairo",name:"Cairo",import:()=>cn(()=>import("./cairo.mjs--kV4qa0j.js"),__vite__mapDeps([19,20]))},{id:"clarity",name:"Clarity",import:()=>cn(()=>import("./clarity.mjs-Bb40UnPS.js"),[])},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>cn(()=>import("./clojure.mjs-BjI0Knrv.js"),[])},{id:"cmake",name:"CMake",import:()=>cn(()=>import("./cmake.mjs-BYiqpiH1.js"),[])},{id:"cobol",name:"COBOL",import:()=>cn(()=>import("./cobol.mjs-7ONAnNHP.js"),__vite__mapDeps([21,1,2,3,8]))},{id:"codeowners",name:"CODEOWNERS",import:()=>cn(()=>import("./codeowners.mjs-L91meNbn.js"),[])},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>cn(()=>import("./codeql.mjs-Cd-JFsJB.js"),[])},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>cn(()=>import("./coffee.mjs-CKPY3NJb.js"),__vite__mapDeps([22,2]))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>cn(()=>import("./common-lisp.mjs-DOi1njVG.js"),[])},{id:"coq",name:"Coq",import:()=>cn(()=>import("./coq.mjs-BfbrVLCY.js"),[])},{id:"cpp",name:"C++",aliases:["c++"],import:()=>cn(()=>import("./cpp.mjs-eC2RTCDC.js"),__vite__mapDeps([23,24,25,26,16]))},{id:"crystal",name:"Crystal",import:()=>cn(()=>import("./crystal.mjs-Dnn2U5IH.js"),__vite__mapDeps([27,1,2,3,16,26,28]))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>cn(()=>import("./csharp.mjs-2CY_msr-.js"),[])},{id:"css",name:"CSS",import:()=>cn(()=>import("./css.mjs-l46fsARh.js"),[])},{id:"csv",name:"CSV",import:()=>cn(()=>import("./csv.mjs-DXKU4rRd.js"),[])},{id:"cue",name:"CUE",import:()=>cn(()=>import("./cue.mjs-zmT78Agv.js"),[])},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>cn(()=>import("./cypher.mjs-bkHSskm3.js"),[])},{id:"d",name:"D",import:()=>cn(()=>import("./d.mjs-vs9xsbRV.js"),[])},{id:"dart",name:"Dart",import:()=>cn(()=>import("./dart.mjs-BMkYYGiN.js"),[])},{id:"dax",name:"DAX",import:()=>cn(()=>import("./dax.mjs-D135z3aS.js"),[])},{id:"desktop",name:"Desktop",import:()=>cn(()=>import("./desktop.mjs-CigPEpQ5.js"),[])},{id:"diff",name:"Diff",import:()=>cn(()=>import("./diff.mjs-Beq1YlA8.js"),[])},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>cn(()=>import("./docker.mjs-V5Al5bpF.js"),[])},{id:"dotenv",name:"dotEnv",import:()=>cn(()=>import("./dotenv.mjs-D9G8sA2m.js"),[])},{id:"dream-maker",name:"Dream Maker",import:()=>cn(()=>import("./dream-maker.mjs-BsoKROiO.js"),[])},{id:"edge",name:"Edge",import:()=>cn(()=>import("./edge.mjs-DbcXP-Vs.js"),__vite__mapDeps([29,11,1,2,3,15]))},{id:"elixir",name:"Elixir",import:()=>cn(()=>import("./elixir.mjs-SjsCMqPa.js"),__vite__mapDeps([30,1,2,3]))},{id:"elm",name:"Elm",import:()=>cn(()=>import("./elm.mjs-qngR63IT.js"),__vite__mapDeps([31,25,26]))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>cn(()=>import("./emacs-lisp.mjs-BcpYGiHp.js"),[])},{id:"erb",name:"ERB",import:()=>cn(()=>import("./erb.mjs-DLnl4PbJ.js"),__vite__mapDeps([32,1,2,3,33,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38]))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>cn(()=>import("./erlang.mjs-CMqJNVIA.js"),__vite__mapDeps([39,40]))},{id:"fennel",name:"Fennel",import:()=>cn(()=>import("./fennel.mjs-qzPJJAAI.js"),[])},{id:"fish",name:"Fish",import:()=>cn(()=>import("./fish.mjs-Cx6My9pS.js"),[])},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>cn(()=>import("./fluent.mjs-BsukS3Co.js"),[])},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>cn(()=>import("./fortran-fixed-form.mjs-uevADqWm.js"),__vite__mapDeps([41,42]))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>cn(()=>import("./fortran-free-form.mjs-Ix_0F1Zz.js"),[])},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>cn(()=>import("./fsharp.mjs-CAFh0s28.js"),__vite__mapDeps([43,40]))},{id:"gdresource",name:"GDResource",import:()=>cn(()=>import("./gdresource.mjs-BZ7dVJUj.js"),__vite__mapDeps([44,45,46]))},{id:"gdscript",name:"GDScript",import:()=>cn(()=>import("./gdscript.mjs-fffAh1pn.js"),[])},{id:"gdshader",name:"GDShader",import:()=>cn(()=>import("./gdshader.mjs-BC7WJXp9.js"),[])},{id:"genie",name:"Genie",import:()=>cn(()=>import("./genie.mjs-IZOju1hG.js"),[])},{id:"gherkin",name:"Gherkin",import:()=>cn(()=>import("./gherkin.mjs-DUpgZfGr.js"),[])},{id:"git-commit",name:"Git Commit Message",import:()=>cn(()=>import("./git-commit.mjs-DUcQvFWM.js"),__vite__mapDeps([47,48]))},{id:"git-rebase",name:"Git Rebase Message",import:()=>cn(()=>import("./git-rebase.mjs-CfDDp8n5.js"),__vite__mapDeps([49,28]))},{id:"gleam",name:"Gleam",import:()=>cn(()=>import("./gleam.mjs-CCCEh_av.js"),[])},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>cn(()=>import("./glimmer-js.mjs-DdkzVRT_.js"),__vite__mapDeps([50,2,11,3,1]))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>cn(()=>import("./glimmer-ts.mjs-j48lzUIy.js"),__vite__mapDeps([51,11,3,2,1]))},{id:"glsl",name:"GLSL",import:()=>cn(()=>import("./glsl.mjs-ragv-Zo5.js"),__vite__mapDeps([25,26]))},{id:"gnuplot",name:"Gnuplot",import:()=>cn(()=>import("./gnuplot.mjs-D0FoiB-W.js"),[])},{id:"go",name:"Go",import:()=>cn(()=>import("./go.mjs-BR7YH85S.js"),[])},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>cn(()=>import("./graphql.mjs-CVw_LcLj.js"),__vite__mapDeps([35,2,11,36,13]))},{id:"groovy",name:"Groovy",import:()=>cn(()=>import("./groovy.mjs-D9sPn4Z-.js"),[])},{id:"hack",name:"Hack",import:()=>cn(()=>import("./hack.mjs-CbGDW8Tt.js"),__vite__mapDeps([52,1,2,3,16]))},{id:"haml",name:"Ruby Haml",import:()=>cn(()=>import("./haml.mjs-jqOgt-7N.js"),__vite__mapDeps([34,2,3]))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>cn(()=>import("./handlebars.mjs-COZdU8XG.js"),__vite__mapDeps([53,1,2,3,38]))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>cn(()=>import("./haskell.mjs-Cp0NQEkn.js"),[])},{id:"haxe",name:"Haxe",import:()=>cn(()=>import("./haxe.mjs-D-PmAGDa.js"),[])},{id:"hcl",name:"HashiCorp HCL",import:()=>cn(()=>import("./hcl.mjs-DRMo6eis.js"),[])},{id:"hjson",name:"Hjson",import:()=>cn(()=>import("./hjson.mjs-BPEpXUFQ.js"),[])},{id:"hlsl",name:"HLSL",import:()=>cn(()=>import("./hlsl.mjs-B-PjNM4a.js"),[])},{id:"html",name:"HTML",import:()=>cn(()=>import("./html.mjs-DdHUeACL.js"),__vite__mapDeps([1,2,3]))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>cn(()=>import("./html-derivative.mjs-DCs4W-BH.js"),__vite__mapDeps([15,1,2,3]))},{id:"http",name:"HTTP",import:()=>cn(()=>import("./http.mjs-DqMR70Se.js"),__vite__mapDeps([54,28,9,7,8,35,2,11,36,13]))},{id:"hurl",name:"Hurl",import:()=>cn(()=>import("./hurl.mjs-BhKOeb1O.js"),__vite__mapDeps([55,35,2,11,36,13,7,8,56]))},{id:"hxml",name:"HXML",import:()=>cn(()=>import("./hxml.mjs-IZCgxWYo.js"),__vite__mapDeps([57,58]))},{id:"hy",name:"Hy",import:()=>cn(()=>import("./hy.mjs-CLIvbAhW.js"),[])},{id:"imba",name:"Imba",import:()=>cn(()=>import("./imba.mjs-B-tO30Ge.js"),[])},{id:"ini",name:"INI",aliases:["properties"],import:()=>cn(()=>import("./ini.mjs-Bpxu4Zsc.js"),[])},{id:"java",name:"Java",import:()=>cn(()=>import("./java.mjs-DtRXFtDl.js"),[])},{id:"javascript",name:"JavaScript",aliases:["js","cjs","mjs"],import:()=>cn(()=>import("./javascript.mjs-DFyEbC5y.js"),[])},{id:"jinja",name:"Jinja",import:()=>cn(()=>import("./jinja.mjs-aMxwqNPk.js"),__vite__mapDeps([59,1,2,3]))},{id:"jison",name:"Jison",import:()=>cn(()=>import("./jison.mjs-BZB-Pvb6.js"),__vite__mapDeps([60,2]))},{id:"json",name:"JSON",import:()=>cn(()=>import("./json.mjs-LWN7Ml79.js"),[])},{id:"json5",name:"JSON5",import:()=>cn(()=>import("./json5.mjs-CgCB487x.js"),[])},{id:"jsonc",name:"JSON with Comments",import:()=>cn(()=>import("./jsonc.mjs-BXrjvC_e.js"),[])},{id:"jsonl",name:"JSON Lines",import:()=>cn(()=>import("./jsonl.mjs-D5dm1SHP.js"),[])},{id:"jsonnet",name:"Jsonnet",import:()=>cn(()=>import("./jsonnet.mjs-B60UklUs.js"),[])},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>cn(()=>import("./jssm.mjs-CsqlGknB.js"),[])},{id:"jsx",name:"JSX",import:()=>cn(()=>import("./jsx.mjs-g2NrEQII.js"),[])},{id:"julia",name:"Julia",aliases:["jl"],import:()=>cn(()=>import("./julia.mjs-CK_nGN3C.js"),__vite__mapDeps([61,23,24,25,26,16,20,2,62]))},{id:"kdl",name:"KDL",import:()=>cn(()=>import("./kdl.mjs-DWIPcypl.js"),[])},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>cn(()=>import("./kotlin.mjs-DiV2Dt9D.js"),[])},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>cn(()=>import("./kusto.mjs-KSLuQd98.js"),[])},{id:"latex",name:"LaTeX",import:()=>cn(()=>import("./latex.mjs-TrAQnxE4.js"),__vite__mapDeps([63,64,62]))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>cn(()=>import("./lean.mjs-vgMqVzXp.js"),[])},{id:"less",name:"Less",import:()=>cn(()=>import("./less.mjs-DKKxO4Pm.js"),[])},{id:"liquid",name:"Liquid",import:()=>cn(()=>import("./liquid.mjs-TsF64GpE.js"),__vite__mapDeps([65,1,2,3,9]))},{id:"llvm",name:"LLVM IR",import:()=>cn(()=>import("./llvm.mjs-BMwXnwe8.js"),[])},{id:"log",name:"Log file",import:()=>cn(()=>import("./log.mjs-CnKjEmrw.js"),[])},{id:"logo",name:"Logo",import:()=>cn(()=>import("./logo.mjs-BmG1tMr6.js"),[])},{id:"lua",name:"Lua",import:()=>cn(()=>import("./lua.mjs-BkRw3dcG.js"),__vite__mapDeps([37,26]))},{id:"luau",name:"Luau",import:()=>cn(()=>import("./luau.mjs-DyM1MGQ3.js"),[])},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>cn(()=>import("./make.mjs-Ccm3NI5i.js"),[])},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>cn(()=>import("./markdown.mjs-DY93LJPj.js"),[])},{id:"marko",name:"Marko",import:()=>cn(()=>import("./marko.mjs-B4Us_A-V.js"),__vite__mapDeps([66,3,67,5,11]))},{id:"matlab",name:"MATLAB",import:()=>cn(()=>import("./matlab.mjs-nYX3zffi.js"),[])},{id:"mdc",name:"MDC",import:()=>cn(()=>import("./mdc.mjs-k5AiriQE.js"),__vite__mapDeps([68,40,38,15,1,2,3]))},{id:"mdx",name:"MDX",import:()=>cn(()=>import("./mdx.mjs-C8C9IGe9.js"),[])},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>cn(()=>import("./mermaid.mjs-ZuTRVWig.js"),[])},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>cn(()=>import("./mipsasm.mjs-BjAqecqh.js"),[])},{id:"mojo",name:"Mojo",import:()=>cn(()=>import("./mojo.mjs-gr1MWCNv.js"),[])},{id:"move",name:"Move",import:()=>cn(()=>import("./move.mjs-Cr8dt_E3.js"),[])},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>cn(()=>import("./narrat.mjs-BTSicUR-.js"),[])},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>cn(()=>import("./nextflow.mjs-CvZ2-N7x.js"),[])},{id:"nginx",name:"Nginx",import:()=>cn(()=>import("./nginx.mjs-69lkxaPj.js"),__vite__mapDeps([69,37,26]))},{id:"nim",name:"Nim",import:()=>cn(()=>import("./nim.mjs-DUBg6fqE.js"),__vite__mapDeps([70,26,1,2,3,7,8,25,40]))},{id:"nix",name:"Nix",import:()=>cn(()=>import("./nix.mjs-BX0W6UFV.js"),[])},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>cn(()=>import("./nushell.mjs-Cdolw_6l.js"),[])},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>cn(()=>import("./objective-c.mjs-DLT9zZoE.js"),[])},{id:"objective-cpp",name:"Objective-C++",import:()=>cn(()=>import("./objective-cpp.mjs-DKXr-AK_.js"),[])},{id:"ocaml",name:"OCaml",import:()=>cn(()=>import("./ocaml.mjs-DP9q6K5L.js"),[])},{id:"pascal",name:"Pascal",import:()=>cn(()=>import("./pascal.mjs-DjTTLVNS.js"),[])},{id:"perl",name:"Perl",import:()=>cn(()=>import("./perl.mjs-CZ_f9ovE.js"),__vite__mapDeps([71,1,2,3,7,8,16]))},{id:"php",name:"PHP",import:()=>cn(()=>import("./php.mjs-CRLlAxm3.js"),__vite__mapDeps([72,1,2,3,7,8,16,9]))},{id:"pkl",name:"Pkl",import:()=>cn(()=>import("./pkl.mjs-0Sl31KKD.js"),[])},{id:"plsql",name:"PL/SQL",import:()=>cn(()=>import("./plsql.mjs-CJrHCTnj.js"),[])},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>cn(()=>import("./po.mjs-y5MdiEbo.js"),[])},{id:"polar",name:"Polar",import:()=>cn(()=>import("./polar.mjs-Bsx6RkUC.js"),[])},{id:"postcss",name:"PostCSS",import:()=>cn(()=>import("./postcss.mjs-CeUBPB2S.js"),[])},{id:"powerquery",name:"PowerQuery",import:()=>cn(()=>import("./powerquery.mjs-CW27I574.js"),[])},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>cn(()=>import("./powershell.mjs-DSYJ6xcj.js"),[])},{id:"prisma",name:"Prisma",import:()=>cn(()=>import("./prisma.mjs-CLoN-gBj.js"),[])},{id:"prolog",name:"Prolog",import:()=>cn(()=>import("./prolog.mjs-Bgt5DHUA.js"),[])},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>cn(()=>import("./proto.mjs-BVbLr_ub.js"),[])},{id:"pug",name:"Pug",aliases:["jade"],import:()=>cn(()=>import("./pug.mjs-RyrCNZAw.js"),__vite__mapDeps([73,2,3,1]))},{id:"puppet",name:"Puppet",import:()=>cn(()=>import("./puppet.mjs-TSkl_nn0.js"),[])},{id:"purescript",name:"PureScript",import:()=>cn(()=>import("./purescript.mjs-BrDje9qL.js"),[])},{id:"python",name:"Python",aliases:["py"],import:()=>cn(()=>import("./python.mjs-DlV7vnVD.js"),[])},{id:"qml",name:"QML",import:()=>cn(()=>import("./qml.mjs-Dy_QpN07.js"),__vite__mapDeps([74,2]))},{id:"qmldir",name:"QML Directory",import:()=>cn(()=>import("./qmldir.mjs-CSZk7E48.js"),[])},{id:"qss",name:"Qt Style Sheets",import:()=>cn(()=>import("./qss.mjs-DACx-k9g.js"),[])},{id:"r",name:"R",import:()=>cn(()=>import("./r.mjs-C1kzXVmM.js"),[])},{id:"racket",name:"Racket",import:()=>cn(()=>import("./racket.mjs-D1nq-KeH.js"),[])},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>cn(()=>import("./raku.mjs-DocPDKZq.js"),[])},{id:"razor",name:"ASP.NET Razor",import:()=>cn(()=>import("./razor.mjs-C1aJHTqc.js"),__vite__mapDeps([75,1,2,3,76]))},{id:"reg",name:"Windows Registry Script",import:()=>cn(()=>import("./reg.mjs-5ydmJHEw.js"),[])},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>cn(()=>import("./regexp.mjs-CpyjTnFF.js"),[])},{id:"rel",name:"Rel",import:()=>cn(()=>import("./rel.mjs-D68lwU-3.js"),[])},{id:"riscv",name:"RISC-V",import:()=>cn(()=>import("./riscv.mjs-Cl4WfXj6.js"),[])},{id:"rosmsg",name:"ROS Interface",import:()=>cn(()=>import("./rosmsg.mjs-sf_0D22S.js"),[])},{id:"rst",name:"reStructuredText",import:()=>cn(()=>import("./rst.mjs-CGzWwCQS.js"),__vite__mapDeps([77,15,1,2,3,23,24,25,26,16,20,28,38,78,33,34,7,8,35,11,36,13,37]))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>cn(()=>import("./ruby.mjs-DYN55Ui6.js"),__vite__mapDeps([33,1,2,3,34,7,8,16,35,11,36,13,23,24,25,26,28,37,38]))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>cn(()=>import("./rust.mjs-DpWcZSqc.js"),[])},{id:"sas",name:"SAS",import:()=>cn(()=>import("./sas.mjs-B1sKWduj.js"),__vite__mapDeps([79,16]))},{id:"sass",name:"Sass",import:()=>cn(()=>import("./sass.mjs-DY_rGA2-.js"),[])},{id:"scala",name:"Scala",import:()=>cn(()=>import("./scala.mjs-CYRsmRER.js"),[])},{id:"scheme",name:"Scheme",import:()=>cn(()=>import("./scheme.mjs-C45fPb3F.js"),[])},{id:"scss",name:"SCSS",import:()=>cn(()=>import("./scss.mjs-DTztaa_0.js"),__vite__mapDeps([5,3]))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:()=>cn(()=>import("./sdbl.mjs-BpucmfEo.js"),[])},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>cn(()=>import("./shaderlab.mjs-CvuASar4.js"),__vite__mapDeps([80,81]))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>cn(()=>import("./shellscript.mjs-B8OHlvmy.js"),[])},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>cn(()=>import("./shellsession.mjs-cY4U-UV-.js"),__vite__mapDeps([82,28]))},{id:"smalltalk",name:"Smalltalk",import:()=>cn(()=>import("./smalltalk.mjs-CKvddXL8.js"),[])},{id:"solidity",name:"Solidity",import:()=>cn(()=>import("./solidity.mjs-NK5CeKHG.js"),[])},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>cn(()=>import("./soy.mjs-tToRcjb4.js"),__vite__mapDeps([83,1,2,3]))},{id:"sparql",name:"SPARQL",import:()=>cn(()=>import("./sparql.mjs-CFlcHvHr.js"),__vite__mapDeps([84,85]))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>cn(()=>import("./splunk.mjs-CFtInczE.js"),[])},{id:"sql",name:"SQL",import:()=>cn(()=>import("./sql.mjs-BhJCBb_s.js"),[])},{id:"ssh-config",name:"SSH Config",import:()=>cn(()=>import("./ssh-config.mjs-Dqsr-I88.js"),[])},{id:"stata",name:"Stata",import:()=>cn(()=>import("./stata.mjs-CeE5oZLJ.js"),__vite__mapDeps([86,16]))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>cn(()=>import("./stylus.mjs-BeJftkpb.js"),[])},{id:"svelte",name:"Svelte",import:()=>cn(()=>import("./svelte.mjs-DzXnUAGD.js"),__vite__mapDeps([87,2,11,3,12]))},{id:"swift",name:"Swift",import:()=>cn(()=>import("./swift.mjs-dg2QTUdp.js"),[])},{id:"system-verilog",name:"SystemVerilog",import:()=>cn(()=>import("./system-verilog.mjs-B3nElewZ.js"),[])},{id:"systemd",name:"Systemd Units",import:()=>cn(()=>import("./systemd.mjs-B7SlkmfE.js"),[])},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:()=>cn(()=>import("./talonscript.mjs-BrsbXmRy.js"),[])},{id:"tasl",name:"Tasl",import:()=>cn(()=>import("./tasl.mjs-CMkPZNj1.js"),[])},{id:"tcl",name:"Tcl",import:()=>cn(()=>import("./tcl.mjs-CiyEbZSK.js"),[])},{id:"templ",name:"Templ",import:()=>cn(()=>import("./templ.mjs-C5pfwUgB.js"),__vite__mapDeps([88,89,2,3]))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>cn(()=>import("./terraform.mjs-BUB-_BlF.js"),[])},{id:"tex",name:"TeX",import:()=>cn(()=>import("./tex.mjs-c9KwJhTM.js"),__vite__mapDeps([64,62]))},{id:"toml",name:"TOML",import:()=>cn(()=>import("./toml.mjs-VldhK7iW.js"),[])},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>cn(()=>import("./ts-tags.mjs-BzdnCLpA.js"),__vite__mapDeps([90,11,3,2,25,26,1,16,7,8]))},{id:"tsv",name:"TSV",import:()=>cn(()=>import("./tsv.mjs-BQ9ptESM.js"),[])},{id:"tsx",name:"TSX",import:()=>cn(()=>import("./tsx.mjs-DYwE5ssU.js"),[])},{id:"turtle",name:"Turtle",import:()=>cn(()=>import("./turtle.mjs-BVy4HXn4.js"),[])},{id:"twig",name:"Twig",import:()=>cn(()=>import("./twig.mjs-BQxe1R_K.js"),__vite__mapDeps([91,3,2,5,72,1,7,8,16,9,20,33,34,35,11,36,13,23,24,25,26,28,37,38]))},{id:"typescript",name:"TypeScript",aliases:["ts","cts","mts"],import:()=>cn(()=>import("./typescript.mjs-DI7mmMRd.js"),[])},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>cn(()=>import("./typespec.mjs-DDqafzeT.js"),[])},{id:"typst",name:"Typst",aliases:["typ"],import:()=>cn(()=>import("./typst.mjs-JIZTSUoJ.js"),[])},{id:"v",name:"V",import:()=>cn(()=>import("./v.mjs-B66J5FdL.js"),[])},{id:"vala",name:"Vala",import:()=>cn(()=>import("./vala.mjs-p2PL1w-1.js"),[])},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>cn(()=>import("./vb.mjs-Dv-GCw1m.js"),[])},{id:"verilog",name:"Verilog",import:()=>cn(()=>import("./verilog.mjs-DKP7kpC6.js"),[])},{id:"vhdl",name:"VHDL",import:()=>cn(()=>import("./vhdl.mjs-Cog-DhcW.js"),[])},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>cn(()=>import("./viml.mjs-0AN1aqkP.js"),[])},{id:"vue",name:"Vue",import:()=>cn(()=>import("./vue.mjs-DNSrzb_v.js"),__vite__mapDeps([92,3,2,11,9,15,1]))},{id:"vue-html",name:"Vue HTML",import:()=>cn(()=>import("./vue-html.mjs-Cxul207c.js"),__vite__mapDeps([93,92,3,2,11,9,15,1]))},{id:"vue-vine",name:"Vue Vine",import:()=>cn(()=>import("./vue-vine.mjs-7rmSqAeb.js"),__vite__mapDeps([94,3,5,67,95,12,92,2,11,9,15,1]))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>cn(()=>import("./vyper.mjs-sB2l1MOO.js"),[])},{id:"wasm",name:"WebAssembly",import:()=>cn(()=>import("./wasm.mjs-CSAWeJiV.js"),[])},{id:"wenyan",name:"Wenyan",aliases:[""],import:()=>cn(()=>import("./wenyan.mjs-CLHHXU5e.js"),[])},{id:"wgsl",name:"WGSL",import:()=>cn(()=>import("./wgsl.mjs-DiTcYanS.js"),[])},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>cn(()=>import("./wikitext.mjs-DT8E9qe0.js"),[])},{id:"wit",name:"WebAssembly Interface Types",import:()=>cn(()=>import("./wit.mjs-CtjT-RdY.js"),[])},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>cn(()=>import("./wolfram.mjs-1xJNnwe2.js"),[])},{id:"xml",name:"XML",import:()=>cn(()=>import("./xml.mjs-BQ9kjWXS.js"),__vite__mapDeps([7,8]))},{id:"xsl",name:"XSL",import:()=>cn(()=>import("./xsl.mjs-Bewts2re.js"),__vite__mapDeps([96,7,8]))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>cn(()=>import("./yaml.mjs-c2-Vhxho.js"),[])},{id:"zenscript",name:"ZenScript",import:()=>cn(()=>import("./zenscript.mjs-ChP1MlQf.js"),[])},{id:"zig",name:"Zig",import:()=>cn(()=>import("./zig.mjs-rivS3YQG.js"),[])}],z7=Object.fromEntries($7.map(e=>[e.id,e.import])),B7=Object.fromEntries($7.flatMap(e=>e.aliases?.map(t=>[t,e.import])||[])),U7={...z7,...B7},F7=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>cn(()=>import("./andromeeda.mjs-C-Jbm3Hp.js"),[])},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>cn(()=>import("./aurora-x.mjs-D-2ljcwZ.js"),[])},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>cn(()=>import("./ayu-dark.mjs-Cv9koXgw.js"),[])},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:()=>cn(()=>import("./catppuccin-frappe.mjs-DFWUc33u.js"),[])},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>cn(()=>import("./catppuccin-latte.mjs-C9dUb6Cb.js"),[])},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>cn(()=>import("./catppuccin-macchiato.mjs-DQyhUUbL.js"),[])},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>cn(()=>import("./catppuccin-mocha.mjs-D87Tk5Gz.js"),[])},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>cn(()=>import("./dark-plus.mjs-eOWES_5F.js"),[])},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>cn(()=>import("./dracula.mjs-BzJJZx-M.js"),[])},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>cn(()=>import("./dracula-soft.mjs-BXkSAIEj.js"),[])},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>cn(()=>import("./everforest-dark.mjs-BgDCqdQA.js"),[])},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>cn(()=>import("./everforest-light.mjs-C8M2exoo.js"),[])},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>cn(()=>import("./github-dark.mjs-DHJKELXO.js"),[])},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>cn(()=>import("./github-dark-default.mjs-Cuk6v7N8.js"),[])},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>cn(()=>import("./github-dark-dimmed.mjs-DH5Ifo-i.js"),[])},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>cn(()=>import("./github-dark-high-contrast.mjs-E3gJ1_iC.js"),[])},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>cn(()=>import("./github-light.mjs-DAi9KRSo.js"),[])},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>cn(()=>import("./github-light-default.mjs-D7oLnXFd.js"),[])},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>cn(()=>import("./github-light-high-contrast.mjs-BfjtVDDH.js"),[])},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:()=>cn(()=>import("./gruvbox-dark-hard.mjs-CFHQjOhq.js"),[])},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:()=>cn(()=>import("./gruvbox-dark-medium.mjs-GsRaNv29.js"),[])},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:()=>cn(()=>import("./gruvbox-dark-soft.mjs-CVdnzihN.js"),[])},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:()=>cn(()=>import("./gruvbox-light-hard.mjs-CH1njM8p.js"),[])},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:()=>cn(()=>import("./gruvbox-light-medium.mjs-DRw_LuNl.js"),[])},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:()=>cn(()=>import("./gruvbox-light-soft.mjs-hJgmCMqR.js"),[])},{id:"houston",displayName:"Houston",type:"dark",import:()=>cn(()=>import("./houston.mjs-DnULxvSX.js"),[])},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>cn(()=>import("./kanagawa-dragon.mjs-CkXjmgJE.js"),[])},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>cn(()=>import("./kanagawa-lotus.mjs-CfQXZHmo.js"),[])},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>cn(()=>import("./kanagawa-wave.mjs-DWedfzmr.js"),[])},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>cn(()=>import("./laserwave.mjs-DUszq2jm.js"),[])},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>cn(()=>import("./light-plus.mjs-B7mTdjB0.js"),[])},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>cn(()=>import("./material-theme.mjs-D5KoaKCx.js"),[])},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>cn(()=>import("./material-theme-darker.mjs-BfHTSMKl.js"),[])},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>cn(()=>import("./material-theme-lighter.mjs-B0m2ddpp.js"),[])},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>cn(()=>import("./material-theme-ocean.mjs-CyktbL80.js"),[])},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>cn(()=>import("./material-theme-palenight.mjs-Csfq5Kiy.js"),[])},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>cn(()=>import("./min-dark.mjs-CafNBF8u.js"),[])},{id:"min-light",displayName:"Min Light",type:"light",import:()=>cn(()=>import("./min-light.mjs-CTRr51gU.js"),[])},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>cn(()=>import("./monokai.mjs-D4h5O-jR.js"),[])},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>cn(()=>import("./night-owl.mjs-C39BiMTA.js"),[])},{id:"nord",displayName:"Nord",type:"dark",import:()=>cn(()=>import("./nord.mjs-Ddv68eIx.js"),[])},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>cn(()=>import("./one-dark-pro.mjs-DVMEJ2y_.js"),[])},{id:"one-light",displayName:"One Light",type:"light",import:()=>cn(()=>import("./one-light.mjs-PoHY5YXO.js"),[])},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>cn(()=>import("./plastic.mjs-3e1v2bzS.js"),[])},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>cn(()=>import("./poimandres.mjs-CS3Unz2-.js"),[])},{id:"red",displayName:"Red",type:"dark",import:()=>cn(()=>import("./red.mjs-bN70gL4F.js"),[])},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:()=>cn(()=>import("./rose-pine.mjs-BHrmToEH.js"),[])},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:()=>cn(()=>import("./rose-pine-dawn.mjs-CnK8MTSM.js"),[])},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:()=>cn(()=>import("./rose-pine-moon.mjs-NleAzG8P.js"),[])},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>cn(()=>import("./slack-dark.mjs-BthQWCQV.js"),[])},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>cn(()=>import("./slack-ochin.mjs-DqwNpetd.js"),[])},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>cn(()=>import("./snazzy-light.mjs-Bw305WKR.js"),[])},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>cn(()=>import("./solarized-dark.mjs-DXbdFlpD.js"),[])},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>cn(()=>import("./solarized-light.mjs-L9t79GZl.js"),[])},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>cn(()=>import("./synthwave-84.mjs-ChtBzv_y.js"),[])},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>cn(()=>import("./tokyo-night.mjs-hegEt444.js"),[])},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>cn(()=>import("./vesper.mjs-DU1UobuO.js"),[])},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>cn(()=>import("./vitesse-black.mjs-Bkuqu6BP.js"),[])},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>cn(()=>import("./vitesse-dark.mjs-D0r3Knsf.js"),[])},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>cn(()=>import("./vitesse-light.mjs-CVO1_9PV.js"),[])}],H7=Object.fromEntries(F7.map(e=>[e.id,e.import]));class G7 extends Error{constructor(e){super(e),this.name="ShikiError"}}function q7(){return"undefined"!=typeof performance?performance.now():Date.now()}const V7=(e,t)=>e+(t-e%t)%t;async function W7(e){let t,r;const n={};function i(e){r=e,n.HEAPU8=new Uint8Array(e),n.HEAPU32=new Uint32Array(e)}function a(e){try{return t.grow(e-r.byteLength+65535>>>16),i(t.buffer),1}catch{}}const s="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function o(e,t){return e?function(e,t,r=1024){const n=t+r;let i=t;for(;e[i]&&!(i>=n);)++i;if(i-t>16&&e.buffer&&s)return s.decode(e.subarray(t,i));let a="";for(;t<i;){let r=e[t++];if(!(128&r)){a+=String.fromCharCode(r);continue}const n=63&e[t++];if(192==(224&r)){a+=String.fromCharCode((31&r)<<6|n);continue}const i=63&e[t++];if(r=224==(240&r)?(15&r)<<12|n<<6|i:(7&r)<<18|n<<12|i<<6|63&e[t++],r<65536)a+=String.fromCharCode(r);else{const e=r-65536;a+=String.fromCharCode(55296|e>>10,56320|1023&e)}}return a}(n.HEAPU8,e,t):""}const l={emscripten_get_now:q7,emscripten_memcpy_big:function(e,t,r){n.HEAPU8.copyWithin(e,t,t+r)},emscripten_resize_heap:function(e){const t=n.HEAPU8.length,r=2147483648;if((e>>>=0)>r)return!1;for(let n=1;n<=4;n*=2){let i=t*(1+.2/n);i=Math.min(i,e+100663296);if(a(Math.min(r,V7(Math.max(e,i),65536))))return!0}return!1},fd_write:()=>0};return await async function(){const r={env:l,wasi_snapshot_preview1:l},a=await e(r);t=a.memory,i(t.buffer),Object.assign(n,a),n.UTF8ToString=o}(),n}var Z7=Object.defineProperty,K7=(e,t,r)=>((e,t,r)=>t in e?Z7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);let Y7=null;class J7{constructor(e){K7(this,"utf16Length"),K7(this,"utf8Length"),K7(this,"utf16Value"),K7(this,"utf8Value"),K7(this,"utf16OffsetToUtf8"),K7(this,"utf8OffsetToUtf16");const t=e.length,r=J7._utf8ByteLength(e),n=r!==t,i=n?new Uint32Array(t+1):null;n&&(i[t]=r);const a=n?new Uint32Array(r+1):null;n&&(a[r]=t);const s=new Uint8Array(r);let o=0;for(let l=0;l<t;l++){const r=e.charCodeAt(l);let c=r,u=!1;if(r>=55296&&r<=56319&&l+1<t){const t=e.charCodeAt(l+1);t>=56320&&t<=57343&&(c=65536+(r-55296<<10)|t-56320,u=!0)}n&&(i[l]=o,u&&(i[l+1]=o),c<=127?a[o+0]=l:c<=2047?(a[o+0]=l,a[o+1]=l):c<=65535?(a[o+0]=l,a[o+1]=l,a[o+2]=l):(a[o+0]=l,a[o+1]=l,a[o+2]=l,a[o+3]=l)),c<=127?s[o++]=c:c<=2047?(s[o++]=192|(1984&c)>>>6,s[o++]=128|(63&c)>>>0):c<=65535?(s[o++]=224|(61440&c)>>>12,s[o++]=128|(4032&c)>>>6,s[o++]=128|(63&c)>>>0):(s[o++]=240|(1835008&c)>>>18,s[o++]=128|(258048&c)>>>12,s[o++]=128|(4032&c)>>>6,s[o++]=128|(63&c)>>>0),u&&l++}this.utf16Length=t,this.utf8Length=r,this.utf16Value=e,this.utf8Value=s,this.utf16OffsetToUtf8=i,this.utf8OffsetToUtf16=a}static _utf8ByteLength(e){let t=0;for(let r=0,n=e.length;r<n;r++){const i=e.charCodeAt(r);let a=i,s=!1;if(i>=55296&&i<=56319&&r+1<n){const t=e.charCodeAt(r+1);t>=56320&&t<=57343&&(a=65536+(i-55296<<10)|t-56320,s=!0)}t+=a<=127?1:a<=2047?2:a<=65535?3:4,s&&r++}return t}createString(e){const t=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}const X7=class e{constructor(t){if(K7(this,"id",++e.LAST_ID),K7(this,"_onigBinding"),K7(this,"content"),K7(this,"utf16Length"),K7(this,"utf8Length"),K7(this,"utf16OffsetToUtf8"),K7(this,"utf8OffsetToUtf16"),K7(this,"ptr"),!Y7)throw new G7("Must invoke loadWasm first.");this._onigBinding=Y7,this.content=t;const r=new J7(t);this.utf16Length=r.utf16Length,this.utf8Length=r.utf8Length,this.utf16OffsetToUtf8=r.utf16OffsetToUtf8,this.utf8OffsetToUtf16=r.utf8OffsetToUtf16,this.utf8Length<1e4&&!e._sharedPtrInUse?(e._sharedPtr||(e._sharedPtr=Y7.omalloc(1e4)),e._sharedPtrInUse=!0,Y7.HEAPU8.set(r.utf8Value,e._sharedPtr),this.ptr=e._sharedPtr):this.ptr=r.createString(Y7)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===e._sharedPtr?e._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};K7(X7,"LAST_ID",0),K7(X7,"_sharedPtr",0),K7(X7,"_sharedPtrInUse",!1);let Q7,e9=X7;class t9{constructor(e){if(K7(this,"_onigBinding"),K7(this,"_ptr"),!Y7)throw new G7("Must invoke loadWasm first.");const t=[],r=[];for(let s=0,o=e.length;s<o;s++){const n=new J7(e[s]);t[s]=n.createString(Y7),r[s]=n.utf8Length}const n=Y7.omalloc(4*e.length);Y7.HEAPU32.set(t,n/4);const i=Y7.omalloc(4*e.length);Y7.HEAPU32.set(r,i/4);const a=Y7.createOnigScanner(n,i,e.length);for(let s=0,o=e.length;s<o;s++)Y7.ofree(t[s]);Y7.ofree(i),Y7.ofree(n),0===a&&function(e){throw new G7(e.UTF8ToString(e.getLastOnigError()))}(Y7),this._onigBinding=Y7,this._ptr=a}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,t,r){let n=0;if("number"==typeof r&&(n=r),"string"==typeof e){e=new e9(e);const r=this._findNextMatchSync(e,t,!1,n);return e.dispose(),r}return this._findNextMatchSync(e,t,!1,n)}_findNextMatchSync(e,t,r,n){const i=this._onigBinding,a=i.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),n);if(0===a)return null;const s=i.HEAPU32;let o=a/4;const l=s[o++],c=s[o++],u=[];for(let d=0;d<c;d++){const t=e.convertUtf8OffsetToUtf16(s[o++]),r=e.convertUtf8OffsetToUtf16(s[o++]);u[d]={start:t,end:r,length:r-t}}return{index:l,captureIndices:u}}}function r9(e){if(Q7)return Q7;return Q7=async function(){Y7=await W7(async t=>{let r=e;var n;return r=await r,"function"==typeof r&&(r=await r(t)),"function"==typeof r&&(r=await r(t)),"function"==typeof r.instantiator?r=await r.instantiator(t):!function(e){return"function"==typeof e.default}(r)?(function(e){return void 0!==e.data}(r)&&(r=r.data),!function(e){return"undefined"!=typeof Response&&e instanceof Response}(r)?!function(e){return"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||ArrayBuffer.isView(e))||"undefined"!=typeof Buffer&&Buffer.isBuffer?.(e)||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer||"undefined"!=typeof Uint32Array&&e instanceof Uint32Array}(r)?r instanceof WebAssembly.Module?r=await n9(r)(t):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await n9(r.default)(t)):r=await n9(r)(t):r="function"==typeof WebAssembly.instantiateStreaming?await(n=r,e=>WebAssembly.instantiateStreaming(n,e))(t):await function(e){return async t=>{const r=await e.arrayBuffer();return WebAssembly.instantiate(r,t)}}(r)(t)):r=await r.default(t),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}(),Q7}function n9(e){return t=>WebAssembly.instantiate(e,t)}const i9=D7({langs:U7,themes:H7,engine:()=>async function(e){return e&&await r9(e),{createScanner:e=>new t9(e.map(e=>"string"==typeof e?e:e.source)),createString:e=>new e9(e)}}(cn(()=>import("./wasm.mjs--yL7jHw-.js"),[]))});function a9(e){if(1!==[...e].length)throw new Error(`Expected "${e}" to be a single code point`);return e.codePointAt(0)}const s9=new Set(["alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit"]),o9=String.raw;function l9(e,t){if(null==e)throw new Error(t??"Value expected");return e}const c9=o9`\[\^?`,u9=`c.? | C(?:-.?)?|${o9`[pP]\{(?:\^?[-\x20_]*[A-Za-z][-\x20\w]*\})?`}|${o9`x[89A-Fa-f]\p{AHex}(?:\\x[89A-Fa-f]\p{AHex})*`}|${o9`u(?:\p{AHex}{4})? | x\{[^\}]*\}? | x\p{AHex}{0,2}`}|${o9`o\{[^\}]*\}?`}|${o9`\d{1,3}`}`,d9=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,h9=new RegExp(o9`
  \\ (?:
    ${u9}
    | [gk]<[^>]*>?
    | [gk]'[^']*'?
    | .
  )
  | \( (?:
    \? (?:
      [:=!>({]
      | <[=!]
      | <[^>]*>
      | '[^']*'
      | ~\|?
      | #(?:[^)\\]|\\.?)*
      | [^:)]*[:)]
    )?
    | \*[^\)]*\)?
  )?
  | (?:${d9.source})+
  | ${c9}
  | .
`.replace(/\s+/g,""),"gsu"),p9=new RegExp(o9`
  \\ (?:
    ${u9}
    | .
  )
  | \[:(?:\^?\p{Alpha}+|\^):\]
  | ${c9}
  | &&
  | .
`.replace(/\s+/g,""),"gsu");function f9(e,t={}){const r={flags:"",...t,rules:{captureGroup:!1,singleline:!1,...t.rules}};if("string"!=typeof e)throw new Error("String expected as pattern");const n=function(e){const t={ignoreCase:!1,dotAll:!1,extended:!1,digitIsAscii:!1,posixIsAscii:!1,spaceIsAscii:!1,wordIsAscii:!1,textSegmentMode:null};for(let r=0;r<e.length;r++){const n=e[r];if(!"imxDPSWy".includes(n))throw new Error(`Invalid flag "${n}"`);if("y"!==n)t[{i:"ignoreCase",m:"dotAll",x:"extended",D:"digitIsAscii",P:"posixIsAscii",S:"spaceIsAscii",W:"wordIsAscii"}[n]]=!0;else{if(!/^y{[gw]}/.test(e.slice(r)))throw new Error('Invalid or unspecified flag "y" mode');t.textSegmentMode="g"===e[r+2]?"grapheme":"word",r+=3}}return t}(r.flags),i=[n.extended],a={captureGroup:r.rules.captureGroup,getCurrentModX:()=>i.at(-1),numOpenGroups:0,popModX(){i.pop()},pushModX(e){i.push(e)},replaceCurrentModX(e){i[i.length-1]=e},singleline:r.rules.singleline};let s,o=[];for(h9.lastIndex=0;s=h9.exec(e);){const t=m9(a,e,s[0],h9.lastIndex);t.tokens?o.push(...t.tokens):t.token&&o.push(t.token),void 0!==t.lastIndex&&(h9.lastIndex=t.lastIndex)}const l=[];let c=0;o.filter(e=>"GroupOpen"===e.type).forEach(e=>{"capturing"===e.kind?e.number=++c:"("===e.raw&&l.push(e)}),c||l.forEach((e,t)=>{e.kind="capturing",e.number=t+1});const u=c||l.length;return{tokens:o.map(e=>"EscapedNumber"===e.type?function(e,t){const{raw:r,inCharClass:n}=e,i=r.slice(1);if(!n&&("0"!==i&&1===i.length||"0"!==i[0]&&+i<=t))return[_9(r)];const a=[],s=i.match(/^[0-7]+|\d/g);for(let o=0;o<s.length;o++){const e=s[o];let t;if(0===o&&"8"!==e&&"9"!==e){if(t=parseInt(e,8),t>127)throw new Error(o9`Octal encoded byte above 177 unsupported "${r}"`)}else t=a9(e);a.push(w9(t,(0===o?"\\":"")+e))}return a}(e,u):e).flat(),flags:n}}function m9(e,t,r,n){const[i,a]=r;if("["===r||"[^"===r){const e=function(e,t,r){const n=[E9("^"===t[1],t)];let i,a=1;for(p9.lastIndex=r;i=p9.exec(e);){const e=i[0];if("["===e[0]&&":"!==e[1])a++,n.push(E9("^"===e[1],e));else if("]"===e){if("CharacterClassOpen"===n.at(-1).type)n.push(w9(93,e));else if(a--,n.push(x9(e)),!a)break}else{const t=g9(e);Array.isArray(t)?n.push(...t):n.push(t)}}return{tokens:n,lastIndex:p9.lastIndex||e.length}}(t,r,n);return{tokens:e.tokens,lastIndex:e.lastIndex}}if("\\"===i){if("AbBGyYzZ".includes(a))return{token:b9(r,r)};if(/^\\g[<']/.test(r)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(r))throw new Error(`Invalid group name "${r}"`);return{token:N9(r)}}if(/^\\k[<']/.test(r)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(r))throw new Error(`Invalid group name "${r}"`);return{token:_9(r)}}if("K"===a)return{token:S9("keep",r)};if("N"===a||"R"===a)return{token:k9("newline",r,{negate:"N"===a})};if("O"===a)return{token:k9("any",r)};if("X"===a)return{token:k9("text_segment",r)};const e=v9(r,{inCharClass:!1});return Array.isArray(e)?{tokens:e}:{token:e}}if("("===i){if("*"===a)return{token:j9(r)};if("(?{"===r)throw new Error(`Unsupported callout "${r}"`);if(r.startsWith("(?#")){if(")"!==t[n])throw new Error('Unclosed comment group "(?#"');return{lastIndex:n+1}}if(/^\(\?[-imx]+[:)]$/.test(r))return{token:C9(r,e)};if(e.pushModX(e.getCurrentModX()),e.numOpenGroups++,"("===r&&!e.captureGroup||"(?:"===r)return{token:T9("group",r)};if("(?>"===r)return{token:T9("atomic",r)};if("(?="===r||"(?!"===r||"(?<="===r||"(?<!"===r)return{token:T9("<"===r[2]?"lookbehind":"lookahead",r,{negate:r.endsWith("!")})};if("("===r&&e.captureGroup||r.startsWith("(?<")&&r.endsWith(">")||r.startsWith("(?'")&&r.endsWith("'"))return{token:T9("capturing",r,{..."("!==r&&{name:r.slice(3,-1)}})};if(r.startsWith("(?~")){if("(?~|"===r)throw new Error(`Unsupported absence function kind "${r}"`);return{token:T9("absence_repeater",r)}}throw"(?("===r?new Error(`Unsupported conditional "${r}"`):new Error(`Invalid or unsupported group option "${r}"`)}if(")"===r){if(e.popModX(),e.numOpenGroups--,e.numOpenGroups<0)throw new Error('Unmatched ")"');return{token:A9(r)}}if(e.getCurrentModX()){if("#"===r){const e=t.indexOf("\n",n);return{lastIndex:-1===e?t.length:e}}if(/^\s$/.test(r)){const e=/\s+/y;return e.lastIndex=n,{lastIndex:e.exec(t)?e.lastIndex:n}}}if("."===r)return{token:k9("dot",r)};if("^"===r||"$"===r){return{token:b9(e.singleline?{"^":o9`\A`,$:o9`\Z`}[r]:r,r)}}return"|"===r?{token:y9(r)}:d9.test(r)?{tokens:L9(r)}:{token:w9(a9(r),r)}}function g9(e){if("\\"===e[0])return v9(e,{inCharClass:!0});if("["===e[0]){const t=/\[:(?<negate>\^?)(?<name>[a-z]+):\]/.exec(e);if(!t||!s9.has(t.groups.name))throw new Error(`Invalid POSIX class "${e}"`);return k9("posix",e,{value:t.groups.name,negate:!!t.groups.negate})}return"-"===e?function(e){return{type:"CharacterClassHyphen",raw:e}}(e):"&&"===e?function(e){return{type:"CharacterClassIntersector",raw:e}}(e):w9(a9(e),e)}function v9(e,{inCharClass:t}){const r=e[1];if("c"===r||"C"===r)return function(e){const t="c"===e[1]?e[2]:e[3];if(!t||!/[A-Za-z]/.test(t))throw new Error(`Unsupported control character "${e}"`);return w9(a9(t.toUpperCase())-64,e)}(e);if("dDhHsSwW".includes(r))return function(e){const t=e[1].toLowerCase();return k9({d:"digit",h:"hex",s:"space",w:"word"}[t],e,{negate:e[1]!==t})}(e);if(e.startsWith(o9`\o{`))throw new Error(`Incomplete, invalid, or unsupported octal code point "${e}"`);if(/^\\[pP]\{/.test(e)){if(3===e.length)throw new Error(`Incomplete or invalid Unicode property "${e}"`);return function(e){const{p:t,neg:r,value:n}=/^\\(?<p>[pP])\{(?<neg>\^?)(?<value>[^}]+)/.exec(e).groups;return k9("property",e,{value:n,negate:"P"===t&&!r||"p"===t&&!!r})}(e)}if(/^\\x[89A-Fa-f]\p{AHex}/u.test(e))try{const t=e.split(/\\x/).slice(1).map(e=>parseInt(e,16)),r=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(t)),n=new TextEncoder;return[...r].map(e=>{const t=[...n.encode(e)].map(e=>`\\x${e.toString(16)}`).join("");return w9(a9(e),t)})}catch{throw new Error(`Multibyte code "${e}" incomplete or invalid in Oniguruma`)}if("u"===r||"x"===r)return w9(function(e){if(/^(?:\\u(?!\p{AHex}{4})|\\x(?!\p{AHex}{1,2}|\{\p{AHex}{1,8}\}))/u.test(e))throw new Error(`Incomplete or invalid escape "${e}"`);const t="{"===e[2]?/^\\x\{\s*(?<hex>\p{AHex}+)/u.exec(e).groups.hex:e.slice(2);return parseInt(t,16)}(e),e);if(M9.has(r))return w9(M9.get(r),e);if(/\d/.test(r))return function(e,t){return{type:"EscapedNumber",inCharClass:e,raw:t}}(t,e);if("\\"===e)throw new Error(o9`Incomplete escape "\"`);if("M"===r)throw new Error(`Unsupported meta "${e}"`);if(2===[...e].length)return w9(e.codePointAt(1),e);throw new Error(`Unexpected escape "${e}"`)}function y9(e){return{type:"Alternator",raw:e}}function b9(e,t){return{type:"Assertion",kind:e,raw:t}}function _9(e){return{type:"Backreference",raw:e}}function w9(e,t){return{type:"Character",value:e,raw:t}}function x9(e){return{type:"CharacterClassClose",raw:e}}function E9(e,t){return{type:"CharacterClassOpen",negate:e,raw:t}}function k9(e,t,r={}){return{type:"CharacterSet",kind:e,...r,raw:t}}function S9(e,t,r={}){return"keep"===e?{type:"Directive",kind:e,raw:t}:{type:"Directive",kind:e,flags:l9(r.flags),raw:t}}function A9(e){return{type:"GroupClose",raw:e}}function T9(e,t,r={}){return{type:"GroupOpen",kind:e,...r,raw:t}}function N9(e){return{type:"Subroutine",raw:e}}const I9=new Set(["COUNT","CMP","ERROR","FAIL","MAX","MISMATCH","SKIP","TOTAL_COUNT"]),M9=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]);function C9(e,t){let{on:r,off:n}=/^\(\?(?<on>[imx]*)(?:-(?<off>[-imx]*))?/.exec(e).groups;n??="";const i=(t.getCurrentModX()||r.includes("x"))&&!n.includes("x"),a=R9(r),s=R9(n),o={};if(a&&(o.enable=a),s&&(o.disable=s),e.endsWith(")"))return t.replaceCurrentModX(i),S9("flags",e,{flags:o});if(e.endsWith(":"))return t.pushModX(i),t.numOpenGroups++,T9("group",e,{...(a||s)&&{flags:o}});throw new Error(`Unexpected flag modifier "${e}"`)}function j9(e){const t=/\(\*(?<name>[A-Za-z_]\w*)?(?:\[(?<tag>(?:[A-Za-z_]\w*)?)\])?(?:\{(?<args>[^}]*)\})?\)/.exec(e);if(!t)throw new Error(`Incomplete or invalid named callout "${e}"`);const{name:r,tag:n,args:i}=t.groups;if(!r)throw new Error(`Invalid named callout "${e}"`);if(""===n)throw new Error(`Named callout tag with empty value not allowed "${e}"`);const a=i?i.split(",").filter(e=>""!==e).map(e=>/^[+-]?\d+$/.test(e)?+e:e):[],[s,o,l]=a,c=I9.has(r)?r.toLowerCase():"custom";switch(c){case"fail":case"mismatch":case"skip":if(a.length>0)throw new Error(`Named callout arguments not allowed "${a}"`);break;case"error":if(a.length>1)throw new Error(`Named callout allows only one argument "${a}"`);if("string"==typeof s)throw new Error(`Named callout argument must be a number "${s}"`);break;case"max":if(!a.length||a.length>2)throw new Error(`Named callout must have one or two arguments "${a}"`);if("string"==typeof s&&!/^[A-Za-z_]\w*$/.test(s))throw new Error(`Named callout argument one must be a tag or number "${s}"`);if(2===a.length&&("number"==typeof o||!/^[<>X]$/.test(o)))throw new Error(`Named callout optional argument two must be '<', '>', or 'X' "${o}"`);break;case"count":case"total_count":if(a.length>1)throw new Error(`Named callout allows only one argument "${a}"`);if(1===a.length&&("number"==typeof s||!/^[<>X]$/.test(s)))throw new Error(`Named callout optional argument must be '<', '>', or 'X' "${s}"`);break;case"cmp":if(3!==a.length)throw new Error(`Named callout must have three arguments "${a}"`);if("string"==typeof s&&!/^[A-Za-z_]\w*$/.test(s))throw new Error(`Named callout argument one must be a tag or number "${s}"`);if("number"==typeof o||!/^(?:[<>!=]=|[<>])$/.test(o))throw new Error(`Named callout argument two must be '==', '!=', '>', '<', '>=', or '<=' "${o}"`);if("string"==typeof l&&!/^[A-Za-z_]\w*$/.test(l))throw new Error(`Named callout argument three must be a tag or number "${l}"`);break;case"custom":throw new Error(`Undefined callout name "${r}"`);default:throw new Error(`Unexpected named callout kind "${c}"`)}return function(e,t,r,n){return{type:"NamedCallout",kind:e,tag:t,arguments:r,raw:n}}(c,n??null,i?.split(",")??null,e)}function O9(e){let t,r,n=null;if("{"===e[0]){const{minStr:i,maxStr:a}=/^\{(?<minStr>\d*)(?:,(?<maxStr>\d*))?/.exec(e).groups,s=1e5;if(+i>s||a&&+a>s)throw new Error("Quantifier value unsupported in Oniguruma");if(t=+i,r=void 0===a?+i:""===a?1/0:+a,t>r&&(n="possessive",[t,r]=[r,t]),e.endsWith("?")){if("possessive"===n)throw new Error('Unsupported possessive interval quantifier chain with "?"');n="lazy"}else n||(n="greedy")}else t="+"===e[0]?1:0,r="?"===e[0]?1:1/0,n="+"===e[1]?"possessive":"?"===e[1]?"lazy":"greedy";return function(e,t,r,n){return{type:"Quantifier",kind:e,min:t,max:r,raw:n}}(n,t,r,e)}function R9(e){const t={};return e.includes("i")&&(t.ignoreCase=!0),e.includes("m")&&(t.dotAll=!0),e.includes("x")&&(t.extended=!0),Object.keys(t).length?t:null}function L9(e){const t=[],r=new RegExp(d9,"gy");let n;for(;n=r.exec(e);){const e=n[0];if("{"===e[0]){const n=/^\{(?<min>\d+),(?<max>\d+)\}\??$/.exec(e);if(n){const{min:i,max:a}=n.groups;if(+i>+a&&e.endsWith("?")){r.lastIndex--,t.push(O9(e.slice(0,-1)));continue}}}t.push(O9(e))}return t}function P9(e,t){if(!Array.isArray(e.body))throw new Error("Expected node with body array");if(1!==e.body.length)return!1;const r=e.body[0];return!t||Object.keys(t).every(e=>t[e]===r[e])}const D9=new Set(["AbsenceFunction","Backreference","CapturingGroup","Character","CharacterClass","CharacterSet","Group","Quantifier","Subroutine"]);function $9(e,t={}){const r={flags:"",normalizeUnknownPropertyNames:!1,skipBackrefValidation:!1,skipLookbehindValidation:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...t,rules:{captureGroup:!1,singleline:!1,...t.rules}},n=f9(e,{flags:r.flags,rules:{captureGroup:r.rules.captureGroup,singleline:r.rules.singleline}}),i=(e,t)=>{const r=n.tokens[a.nextIndex];switch(a.parent=e,a.nextIndex++,r.type){case"Alternator":return U9();case"Assertion":return function({kind:e}){return F9(l9({"^":"line_start",$:"line_end","\\A":"string_start","\\b":"word_boundary","\\B":"word_boundary","\\G":"search_start","\\y":"text_segment_boundary","\\Y":"text_segment_boundary","\\z":"string_end","\\Z":"string_end_newline"}[e],`Unexpected assertion kind "${e}"`),{negate:e===o9`\B`||e===o9`\Y`})}(r);case"Backreference":return function({raw:e},t){const r=/^\\k[<']/.test(e),n=r?e.slice(3,-1):e.slice(1),i=(r,n=!1)=>{const i=t.capturingGroups.length;let a=!1;if(r>i){if(!t.skipBackrefValidation)throw new Error(`Not enough capturing groups defined to the left "${e}"`);a=!0}return t.hasNumberedRef=!0,H9(n?i+1-r:r,{orphan:a})};if(r){const r=/^(?<sign>-?)0*(?<num>[1-9]\d*)$/.exec(n);if(r)return i(+r.groups.num,!!r.groups.sign);if(/[-+]/.test(n))throw new Error(`Invalid backref name "${e}"`);if(!t.namedGroupsByName.has(n))throw new Error(`Group name not defined to the left "${e}"`);return H9(n)}return i(+n)}(r,a);case"Character":return q9(r.value,{useLastValid:!!t.isCheckingRangeEnd});case"CharacterClassHyphen":return function(e,t,r){const{tokens:n,walk:i}=t,a=t.parent,s=a.body.at(-1),o=n[t.nextIndex];if(!r.isCheckingRangeEnd&&s&&"CharacterClass"!==s.type&&"CharacterClassRange"!==s.type&&o&&"CharacterClassOpen"!==o.type&&"CharacterClassClose"!==o.type&&"CharacterClassIntersector"!==o.type){const e=i(a,{...r,isCheckingRangeEnd:!0});if("Character"===s.type&&"Character"===e.type)return a.body.pop(),function(e,t){if(t.value<e.value)throw new Error("Character class range out of order");return{type:"CharacterClassRange",min:e,max:t}}(s,e);throw new Error("Invalid character class range")}return q9(a9("-"))}(0,a,t);case"CharacterClassOpen":return function({negate:e},t,r){const{tokens:n,walk:i}=t,a=n[t.nextIndex],s=[V9()];let o=iee(a);for(;"CharacterClassClose"!==o.type;){if("CharacterClassIntersector"===o.type)s.push(V9()),t.nextIndex++;else{const e=s.at(-1);e.body.push(i(e,r))}o=iee(n[t.nextIndex],a)}const l=V9({negate:e});return 1===s.length?l.body=s[0].body:(l.kind="intersection",l.body=s.map(e=>1===e.body.length?e.body[0]:e)),t.nextIndex++,l}(r,a,t);case"CharacterSet":return z9(r,a);case"Directive":return function(e,t={}){if("keep"===e)return{type:"Directive",kind:e};if("flags"===e)return{type:"Directive",kind:e,flags:l9(t.flags)};throw new Error(`Unexpected directive kind "${e}"`)}(r.kind,{flags:r.flags});case"GroupOpen":return function(e,t,r){const{tokens:n,capturingGroups:i,namedGroupsByName:a,skipLookbehindValidation:s,walk:o}=t,l=function({flags:e,kind:t,name:r,negate:n,number:i}){switch(t){case"absence_repeater":return function(e,t){return{type:"AbsenceFunction",kind:e,body:Q9(t?.body)}}("repeater");case"atomic":return Z9({atomic:!0});case"capturing":return G9(i,{name:r});case"group":return Z9({flags:e});case"lookahead":case"lookbehind":return K9({behind:"lookbehind"===t,negate:n});default:throw new Error(`Unexpected group kind "${t}"`)}}(e),c="AbsenceFunction"===l.type,u=ree(l),d=u&&l.negate;if("CapturingGroup"===l.type&&(i.push(l),l.name&&function(e,t,r){return e.has(t)||e.set(t,r),e.get(t)}(a,l.name,[]).push(l)),c&&r.isInAbsenceFunction)throw new Error("Nested absence function not supported by Oniguruma");let h=aee(n[t.nextIndex]);for(;"GroupClose"!==h.type;){if("Alternator"===h.type)l.body.push(U9()),t.nextIndex++;else{const e=l.body.at(-1),t=o(e,{...r,isInAbsenceFunction:r.isInAbsenceFunction||c,isInLookbehind:r.isInLookbehind||u,isInNegLookbehind:r.isInNegLookbehind||d});if(e.body.push(t),(u||r.isInLookbehind)&&!s){const e="Lookbehind includes a pattern not allowed by Oniguruma";if(d||r.isInNegLookbehind){if(tee(t)||"CapturingGroup"===t.type)throw new Error(e)}else if(tee(t)||ree(t)&&t.negate)throw new Error(e)}}h=aee(n[t.nextIndex])}return t.nextIndex++,l}(r,a,t);case"NamedCallout":return function(e,t,r){return{type:"NamedCallout",kind:e,tag:t,arguments:r}}(r.kind,r.tag,r.arguments);case"Quantifier":return B9(r,a);case"Subroutine":return function({raw:e},t){const{capturingGroups:r,subroutines:n}=t;let i=e.slice(3,-1);const a=/^(?<sign>[-+]?)0*(?<num>[1-9]\d*)$/.exec(i);if(a){const e=+a.groups.num,n=r.length;if(t.hasNumberedRef=!0,i={"":e,"+":n+e,"-":n+1-e}[a.groups.sign],i<1)throw new Error("Invalid subroutine number")}else"0"===i&&(i=0);const s=J9(i);return n.push(s),s}(r,a);default:throw new Error(`Unexpected token type "${r.type}"`)}},a={capturingGroups:[],hasNumberedRef:!1,namedGroupsByName:new Map,nextIndex:0,normalizeUnknownPropertyNames:r.normalizeUnknownPropertyNames,parent:null,skipBackrefValidation:r.skipBackrefValidation,skipLookbehindValidation:r.skipLookbehindValidation,skipPropertyNameValidation:r.skipPropertyNameValidation,subroutines:[],tokens:n.tokens,unicodePropertyMap:r.unicodePropertyMap,walk:i},s=function(e,t){return{type:"Regex",body:Q9(t?.body),flags:e}}(function(e){return{type:"Flags",...e}}(n.flags));let o=s.body[0];for(;a.nextIndex<n.tokens.length;){const e=i(o,{});"Alternative"===e.type?(s.body.push(e),o=e):o.body.push(e)}const{capturingGroups:l,hasNumberedRef:c,namedGroupsByName:u,subroutines:d}=a;if(c&&u.size&&!r.rules.captureGroup)throw new Error("Numbered backref/subroutine not allowed when using named capture");for(const{ref:h}of d)if("number"==typeof h){if(h>l.length)throw new Error("Subroutine uses a group number that's not defined");h&&(l[h-1].isSubroutined=!0)}else{if(!u.has(h))throw new Error(o9`Subroutine uses a group name that's not defined "\g<${h}>"`);if(u.get(h).length>1)throw new Error(o9`Subroutine uses a duplicate group name "\g<${h}>"`);u.get(h)[0].isSubroutined=!0}return s}function z9({kind:e,negate:t,value:r},n){const{normalizeUnknownPropertyNames:i,skipPropertyNameValidation:a,unicodePropertyMap:s}=n;if("property"===e){const n=nee(r);if(!s9.has(n)||s?.has(n))return X9(r,{negate:t,normalizeUnknownPropertyNames:i,skipPropertyNameValidation:a,unicodePropertyMap:s});e="posix",r=n}return"posix"===e?function(e,t){const r=!!t?.negate;if(!s9.has(e))throw new Error(`Invalid POSIX class "${e}"`);return{type:"CharacterSet",kind:"posix",value:e,negate:r}}(r,{negate:t}):W9(e,{negate:t})}function B9({kind:e,min:t,max:r},n){const i=n.parent,a=i.body.at(-1);if(!a||!function(e){return D9.has(e.type)}(a))throw new Error("Quantifier requires a repeatable token");const s=Y9(e,t,r,a);return i.body.pop(),s}function U9(e){return{type:"Alternative",body:eee(e?.body)}}function F9(e,t){const r={type:"Assertion",kind:e};return("word_boundary"===e||"text_segment_boundary"===e)&&(r.negate=!!t?.negate),r}function H9(e,t){const r=!!t?.orphan;return{type:"Backreference",ref:e,...r&&{orphan:r}}}function G9(e,t){const r={name:void 0,isSubroutined:!1,...t};if(void 0!==r.name&&!function(e){return/^[\p{Alpha}\p{Pc}][^)]*$/u.test(e)}(r.name))throw new Error(`Group name "${r.name}" invalid in Oniguruma`);return{type:"CapturingGroup",number:e,...r.name&&{name:r.name},...r.isSubroutined&&{isSubroutined:r.isSubroutined},body:Q9(t?.body)}}function q9(e,t){const r={useLastValid:!1,...t};if(e>1114111){const t=e.toString(16);if(!r.useLastValid)throw e>1310719?new Error(`Invalid code point out of range "\\x{${t}}"`):new Error(`Invalid code point out of range in JS "\\x{${t}}"`);e=1114111}return{type:"Character",value:e}}function V9(e){const t={kind:"union",negate:!1,...e};return{type:"CharacterClass",kind:t.kind,negate:t.negate,body:eee(e?.body)}}function W9(e,t){const r=!!t?.negate,n={type:"CharacterSet",kind:e};return("digit"===e||"hex"===e||"newline"===e||"space"===e||"word"===e)&&(n.negate=r),("text_segment"===e||"newline"===e&&!r)&&(n.variableLength=!0),n}function Z9(e){const t=e?.atomic,r=e?.flags;if(t&&r)throw new Error("Atomic group cannot have flags");return{type:"Group",...t&&{atomic:t},...r&&{flags:r},body:Q9(e?.body)}}function K9(e){const t={behind:!1,negate:!1,...e};return{type:"LookaroundAssertion",kind:t.behind?"lookbehind":"lookahead",negate:t.negate,body:Q9(e?.body)}}function Y9(e,t,r,n){if(t>r)throw new Error("Invalid reversed quantifier range");return{type:"Quantifier",kind:e,min:t,max:r,body:n}}function J9(e){return{type:"Subroutine",ref:e}}function X9(e,t){const r={negate:!1,normalizeUnknownPropertyNames:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...t};let n=r.unicodePropertyMap?.get(nee(e));if(!n)if(r.normalizeUnknownPropertyNames)n=function(e){return e.trim().replace(/[- _]+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,e=>e[0].toUpperCase()+e.slice(1).toLowerCase())}(e);else if(r.unicodePropertyMap&&!r.skipPropertyNameValidation)throw new Error(o9`Invalid Unicode property "\p{${e}}"`);return{type:"CharacterSet",kind:"property",value:n??e,negate:r.negate}}function Q9(e){if(void 0===e)e=[U9()];else if(!Array.isArray(e)||!e.length||!e.every(e=>"Alternative"===e.type))throw new Error("Invalid body; expected array of one or more Alternative nodes");return e}function eee(e){if(void 0===e)e=[];else if(!Array.isArray(e)||!e.every(e=>!!e.type))throw new Error("Invalid body; expected array of nodes");return e}function tee(e){return"LookaroundAssertion"===e.type&&"lookahead"===e.kind}function ree(e){return"LookaroundAssertion"===e.type&&"lookbehind"===e.kind}function nee(e){return e.replace(/[- _]+/g,"").toLowerCase()}function iee(e,t){return l9(e,("Character"===t?.type&&93===t.value?"Empty":"Unclosed")+" character class")}function aee(e){return l9(e,"Unclosed group")}function see(e,t,r=null){function n(e,t){for(let r=0;r<e.length;r++){const n=i(e[r],t,r,e);r=Math.max(-1,r+n)}}function i(a,s=null,o=null,l=null){let c=0,u=!1;const d={node:a,parent:s,key:o,container:l,root:e,remove(){oee(l).splice(Math.max(0,lee(o)+c),1),c--,u=!0},removeAllNextSiblings:()=>oee(l).splice(lee(o)+1),removeAllPrevSiblings(){const e=lee(o)+c;return c-=e,oee(l).splice(0,Math.max(0,e))},replaceWith(e,t={}){const r=!!t.traverse;l?l[Math.max(0,lee(o)+c)]=e:l9(s,"Can't replace root node")[o]=e,r&&i(e,s,o,l),u=!0},replaceWithMultiple(e,t={}){const r=!!t.traverse;if(oee(l).splice(Math.max(0,lee(o)+c),1,...e),c+=e.length-1,r){let t=0;for(let r=0;r<e.length;r++)t+=i(e[r],s,lee(o)+r+t,l)}u=!0},skip(){u=!0}},{type:h}=a,p=t["*"],f=t[h],m="function"==typeof p?p:p?.enter,g="function"==typeof f?f:f?.enter;if(m?.(d,r),g?.(d,r),!u)switch(h){case"AbsenceFunction":case"CapturingGroup":case"Group":case"Alternative":case"CharacterClass":case"LookaroundAssertion":n(a.body,a);break;case"Assertion":case"Backreference":case"Character":case"CharacterSet":case"Directive":case"Flags":case"NamedCallout":case"Subroutine":break;case"CharacterClassRange":i(a.min,a,"min"),i(a.max,a,"max");break;case"Quantifier":i(a.body,a,"body");break;case"Regex":n(a.body,a),i(a.flags,a,"flags");break;default:throw new Error(`Unexpected node type "${h}"`)}return f?.exit?.(d,r),p?.exit?.(d,r),c}return i(e),e}function oee(e){if(!Array.isArray(e))throw new Error("Container expected");return e}function lee(e){if("number"!=typeof e)throw new Error("Numeric key expected");return e}const cee=String.raw`\(\?(?:[:=!>A-Za-z\-]|<[=!]|\(DEFINE\))`;function uee(e,t){for(let r=0;r<e.length;r++)e[r]>=t&&e[r]++}function dee(e,t,r,n){return e.slice(0,t)+n+e.slice(t+r.length)}const hee=Object.freeze({DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS"});function pee(e,t,r,n){const i=new RegExp(String.raw`${t}|(?<$skip>\[\^?|\\?.)`,"gsu"),a=[!1];let s=0,o="";for(const l of e.matchAll(i)){const{0:e,groups:{$skip:t}}=l;t||n&&n===hee.DEFAULT!=!s?("["===e[0]?(s++,a.push("^"===e[1])):"]"===e&&s&&(s--,a.pop()),o+=e):o+=r instanceof Function?r(l,{context:s?hee.CHAR_CLASS:hee.DEFAULT,negated:a[a.length-1]}):r}return o}function fee(e,t,r,n){pee(e,t,r,n)}function mee(e,t,r){return!!function(e,t,r=0,n){if(!new RegExp(t,"su").test(e))return null;const i=new RegExp(`${t}|(?<$skip>\\\\?.)`,"gsu");i.lastIndex=r;let a,s=0;for(;a=i.exec(e);){const{0:e,groups:{$skip:t}}=a;if(!(t||n&&n===hee.DEFAULT!=!s))return a;"["===e?s++:"]"===e&&s&&s--,i.lastIndex==a.index&&i.lastIndex++}return null}(e,t,0,r)}function gee(e,t){const r=/\\?./gsu;r.lastIndex=t;let n,i=e.length,a=0,s=1;for(;n=r.exec(e);){const[e]=n;if("["===e)a++;else if(a)"]"===e&&a--;else if("("===e)s++;else if(")"===e&&(s--,!s)){i=n.index;break}}return e.slice(t,i)}const vee=new RegExp(String.raw`(?<noncapturingStart>${cee})|(?<capturingStart>\((?:\?<[^>]+>)?)|\\?.`,"gsu");const yee=String.raw`(?:[?*+]|\{\d+(?:,\d*)?\})`,bee=new RegExp(String.raw`
\\(?: \d+
  | c[A-Za-z]
  | [gk]<[^>]+>
  | [pPu]\{[^\}]+\}
  | u[A-Fa-f\d]{4}
  | x[A-Fa-f\d]{2}
  )
| \((?: \? (?: [:=!>]
  | <(?:[=!]|[^>]+>)
  | [A-Za-z\-]+:
  | \(DEFINE\)
  ))?
| (?<qBase>${yee})(?<qMod>[?+]?)(?<invalidQ>[?*+\{]?)
| \\?.
`.replace(/\s+/g,""),"gsu");const _ee=String.raw,wee=_ee`\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>`,xee=_ee`\(\?R=(?<rDepth>[^\)]+)\)|${wee}`,Eee=_ee`\(\?<(?![=!])(?<captureName>[^>]+)>`,kee=_ee`${Eee}|(?<unnamed>\()(?!\?)`,See=new RegExp(_ee`${Eee}|${xee}|\(\?|\\?.`,"gsu"),Aee="Cannot use multiple overlapping recursions";function Tee(e){const t=`Max depth must be integer between 2 and 100; used ${e}`;if(!/^[1-9]\d*$/.test(e))throw new Error(t);if((e=+e)<2||e>100)throw new Error(t)}function Nee(e,t,r,n,i,a,s){const o=new Set;n&&fee(e+t,Eee,({groups:{captureName:e}})=>{o.add(e)},hee.DEFAULT);const l=[r,n?o:null,i,a,s];return`${e}${Iee(`(?:${e}`,"forward",...l)}(?:)${Iee(`${t})`,"backward",...l)}${t}`}function Iee(e,t,r,n,i,a,s){const o=e=>"forward"===t?e+2:r-e+2-1;let l="";for(let c=0;c<r;c++){const t=o(c);l+=pee(e,_ee`${kee}|\\k<(?<backref>[^>]+)>`,({0:e,groups:{captureName:r,unnamed:o,backref:l}})=>{if(l&&n&&!n.has(l))return e;const c=`_$${t}`;if(o||r){const t=s+a.length+1;return a.push(t),Mee(i,t),o?e:`(?<${r}${c}>`}return _ee`\k<${l}${c}>`},hee.DEFAULT)}return l}function Mee(e,t){for(let r=0;r<e.length;r++)e[r]>=t&&e[r]++}function Cee(e,t,r,n,i,a){if(e.size&&n){let s=0;fee(t,kee,()=>s++,hee.DEFAULT);const o=a-s+i,l=new Map;return e.forEach((e,t)=>{const i=(n-s*r)/r,a=s*r,c=t>o+s?t+n:t,u=[];for(const l of e)if(l<=o)u.push(l);else if(l>o+s+i)u.push(l+n);else if(l<=o+s)for(let e=0;e<=r;e++)u.push(l+s*e);else for(let e=0;e<=r;e++)u.push(l+a+i*e);l.set(c,u)}),l}return e}var jee=String.fromCodePoint,Oee=String.raw,Ree={flagGroups:(()=>{try{new RegExp("(?i:)")}catch{return!1}return!0})(),unicodeSets:(()=>{try{new RegExp("","v")}catch{return!1}return!0})()};function Lee(e,{enable:t,disable:r}){return{dotAll:!(r?.dotAll||!t?.dotAll&&!e.dotAll),ignoreCase:!(r?.ignoreCase||!t?.ignoreCase&&!e.ignoreCase)}}function Pee(e,t,r){return e.has(t)||e.set(t,r),e.get(t)}function Dee(e,t){return $ee[e]>=$ee[t]}Ree.bugFlagVLiteralHyphenIsRange=!!Ree.unicodeSets&&(()=>{try{new RegExp(Oee`[\d\-a]`,"v")}catch{return!0}return!1})(),Ree.bugNestedClassIgnoresNegation=Ree.unicodeSets&&new RegExp("[[^a]]","v").test("a");var $ee={ES2025:2025,ES2024:2024,ES2018:2018},zee={auto:"auto",ES2025:"ES2025",ES2024:"ES2024",ES2018:"ES2018"};function Bee(e={}){if("[object Object]"!=={}.toString.call(e))throw new Error("Unexpected options");if(void 0!==e.target&&!zee[e.target])throw new Error(`Unexpected target "${e.target}"`);const t={accuracy:"default",avoidSubclass:!1,flags:"",global:!1,hasIndices:!1,lazyCompileLength:1/0,target:"auto",verbose:!1,...e,rules:{allowOrphanBackrefs:!1,asciiWordBoundaries:!1,captureGroup:!1,recursionLimit:20,singleline:!1,...e.rules}};return"auto"===t.target&&(t.target=Ree.flagGroups?"ES2025":Ree.unicodeSets?"ES2024":"ES2018"),t}var Uee=new Set([jee(304),jee(305)]),Fee=Oee`[\p{L}\p{M}\p{N}\p{Pc}]`;function Hee(e){if(Uee.has(e))return[e];const t=new Set,r=e.toLowerCase(),n=r.toUpperCase(),i=Wee.get(r),a=qee.get(r),s=Vee.get(r);return 1===[...n].length&&t.add(n),s&&t.add(s),i&&t.add(i),t.add(r),a&&t.add(a),[...t]}var Gee=new Map("C Other\nCc Control cntrl\nCf Format\nCn Unassigned\nCo Private_Use\nCs Surrogate\nL Letter\nLC Cased_Letter\nLl Lowercase_Letter\nLm Modifier_Letter\nLo Other_Letter\nLt Titlecase_Letter\nLu Uppercase_Letter\nM Mark Combining_Mark\nMc Spacing_Mark\nMe Enclosing_Mark\nMn Nonspacing_Mark\nN Number\nNd Decimal_Number digit\nNl Letter_Number\nNo Other_Number\nP Punctuation punct\nPc Connector_Punctuation\nPd Dash_Punctuation\nPe Close_Punctuation\nPf Final_Punctuation\nPi Initial_Punctuation\nPo Other_Punctuation\nPs Open_Punctuation\nS Symbol\nSc Currency_Symbol\nSk Modifier_Symbol\nSm Math_Symbol\nSo Other_Symbol\nZ Separator\nZl Line_Separator\nZp Paragraph_Separator\nZs Space_Separator\nASCII\nASCII_Hex_Digit AHex\nAlphabetic Alpha\nAny\nAssigned\nBidi_Control Bidi_C\nBidi_Mirrored Bidi_M\nCase_Ignorable CI\nCased\nChanges_When_Casefolded CWCF\nChanges_When_Casemapped CWCM\nChanges_When_Lowercased CWL\nChanges_When_NFKC_Casefolded CWKCF\nChanges_When_Titlecased CWT\nChanges_When_Uppercased CWU\nDash\nDefault_Ignorable_Code_Point DI\nDeprecated Dep\nDiacritic Dia\nEmoji\nEmoji_Component EComp\nEmoji_Modifier EMod\nEmoji_Modifier_Base EBase\nEmoji_Presentation EPres\nExtended_Pictographic ExtPict\nExtender Ext\nGrapheme_Base Gr_Base\nGrapheme_Extend Gr_Ext\nHex_Digit Hex\nIDS_Binary_Operator IDSB\nIDS_Trinary_Operator IDST\nID_Continue IDC\nID_Start IDS\nIdeographic Ideo\nJoin_Control Join_C\nLogical_Order_Exception LOE\nLowercase Lower\nMath\nNoncharacter_Code_Point NChar\nPattern_Syntax Pat_Syn\nPattern_White_Space Pat_WS\nQuotation_Mark QMark\nRadical\nRegional_Indicator RI\nSentence_Terminal STerm\nSoft_Dotted SD\nTerminal_Punctuation Term\nUnified_Ideograph UIdeo\nUppercase Upper\nVariation_Selector VS\nWhite_Space space\nXID_Continue XIDC\nXID_Start XIDS".split(/\s/).map(e=>[nee(e),e])),qee=new Map([["s",jee(383)],[jee(383),"s"]]),Vee=new Map([[jee(223),jee(7838)],[jee(107),jee(8490)],[jee(229),jee(8491)],[jee(969),jee(8486)]]),Wee=new Map([Kee(453),Kee(456),Kee(459),Kee(498),...Yee(8072,8079),...Yee(8088,8095),...Yee(8104,8111),Kee(8124),Kee(8140),Kee(8188)]),Zee=new Map([["alnum",Oee`[\p{Alpha}\p{Nd}]`],["alpha",Oee`\p{Alpha}`],["ascii",Oee`\p{ASCII}`],["blank",Oee`[\p{Zs}\t]`],["cntrl",Oee`\p{Cc}`],["digit",Oee`\p{Nd}`],["graph",Oee`[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]`],["lower",Oee`\p{Lower}`],["print",Oee`[[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]\p{Zs}]`],["punct",Oee`[\p{P}\p{S}]`],["space",Oee`\p{space}`],["upper",Oee`\p{Upper}`],["word",Oee`[\p{Alpha}\p{M}\p{Nd}\p{Pc}]`],["xdigit",Oee`\p{AHex}`]]);function Kee(e){const t=jee(e);return[t.toLowerCase(),t]}function Yee(e,t){return function(e,t){const r=[];for(let n=e;n<=t;n++)r.push(n);return r}(e,t).map(e=>Kee(e))}var Jee=new Set(["Lower","Lowercase","Upper","Uppercase","Ll","Lowercase_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter"]);var Xee={AbsenceFunction({node:e,parent:t,replaceWith:r}){const{body:n,kind:i}=e;if("repeater"!==i)throw new Error('Unsupported absence function "(?~|"');{const e=Z9();e.body[0].body.push(K9({negate:!0,body:n}),X9("Any"));const i=Z9();i.body[0].body.push(Y9("greedy",0,1/0,e)),r(fte(i,t),{traverse:!0})}},Alternative:{enter({node:e,parent:t,key:r},{flagDirectivesByAlt:n}){const i=e.body.filter(e=>"flags"===e.kind);for(let a=r+1;a<t.body.length;a++){Pee(n,t.body[a],[]).push(...i)}},exit({node:e},{flagDirectivesByAlt:t}){if(t.get(e)?.length){const r=ate(t.get(e));if(r){const t=Z9({flags:r});t.body[0].body=e.body,e.body=[fte(t,e)]}}}},Assertion({node:e,parent:t,key:r,container:n,root:i,remove:a,replaceWith:s},o){const{kind:l,negate:c}=e,{asciiWordBoundaries:u,avoidSubclass:d,supportedGNodes:h,wordIsAscii:p}=o;if("text_segment_boundary"===l)throw new Error(`Unsupported text segment boundary "\\${c?"Y":"y"}"`);if("line_end"===l)s(fte(K9({body:[U9({body:[F9("string_end")]}),U9({body:[q9(10)]})]}),t));else if("line_start"===l)s(fte(dte(Oee`(?<=\A|\n(?!\z))`,{skipLookbehindValidation:!0}),t));else if("search_start"===l)if(h.has(e))i.flags.sticky=!0,a();else{const e=n[r-1];if(e&&function(e){const t=["Character","CharacterClass","CharacterSet"];return t.includes(e.type)||"Quantifier"===e.type&&e.min&&t.includes(e.body.type)}(e))s(fte(K9({negate:!0}),t));else{if(d)throw new Error(Oee`Uses "\G" in a way that requires a subclass`);s(pte(F9("string_start"),t)),o.strategy="clip_search"}}else if("string_end"===l||"string_start"===l);else if("string_end_newline"===l)s(fte(dte(Oee`(?=\n?\z)`),t));else{if("word_boundary"!==l)throw new Error(`Unexpected assertion kind "${l}"`);if(!p&&!u){s(fte(dte(c?`(?:(?<=${Fee})(?=${Fee})|(?<!${Fee})(?!${Fee}))`:`(?:(?<=${Fee})(?!${Fee})|(?<!${Fee})(?=${Fee}))`),t))}}},Backreference({node:e},{jsGroupNameMap:t}){let{ref:r}=e;"string"!=typeof r||ute(r)||(r=ite(r,t),e.ref=r)},CapturingGroup({node:e},{jsGroupNameMap:t,subroutineRefMap:r}){let{name:n}=e;n&&!ute(n)&&(n=ite(n,t),e.name=n),r.set(e.number,e),n&&r.set(n,e)},CharacterClassRange({node:e,parent:t,replaceWith:r}){if("intersection"===t.kind){r(fte(V9({body:[e]}),t),{traverse:!0})}},CharacterSet({node:e,parent:t,replaceWith:r},{accuracy:n,minTargetEs2024:i,digitIsAscii:a,spaceIsAscii:s,wordIsAscii:o}){const{kind:l,negate:c,value:u}=e;if(!a||"digit"!==l&&"digit"!==u)if(!s||"space"!==l&&"space"!==u)if(!o||"word"!==l&&"word"!==u)if("any"===l)r(pte(X9("Any"),t));else if("digit"===l)r(pte(X9("Nd",{negate:c}),t));else if("dot"===l);else if("text_segment"===l){if("strict"===n)throw new Error(Oee`Use of "\X" requires non-strict accuracy`);const e="\\p{Emoji}(?:\\p{EMod}|\\uFE0F\\u20E3?|[\\x{E0020}-\\x{E007E}]+\\x{E007F})?",a=Oee`\p{RI}{2}|${e}(?:\u200D${e})*`;r(fte(dte(Oee`(?>\r\n|${i?Oee`\p{RGI_Emoji}`:a}|\P{M}\p{M}*)`,{skipPropertyNameValidation:!0}),t))}else if("hex"===l)r(pte(X9("AHex",{negate:c}),t));else if("newline"===l)r(fte(dte(c?"[^\n]":"(?>\r\n?|[\n\v\f\u2028\u2029])"),t));else if("posix"===l)if(i||"graph"!==u&&"print"!==u)r(fte(hte(dte(Zee.get(u)),c),t));else{if("strict"===n)throw new Error(`POSIX class "${u}" requires min target ES2024 or non-strict accuracy`);let e={graph:"!-~",print:" -~"}[u];c&&(e=`\0-${jee(e.codePointAt(0)-1)}${jee(e.codePointAt(2)+1)}-`),r(fte(dte(`[${e}]`),t))}else if("property"===l)Gee.has(nee(u))||(e.key="sc");else if("space"===l)r(pte(X9("space",{negate:c}),t));else{if("word"!==l)throw new Error(`Unexpected character set kind "${l}"`);r(fte(hte(dte(Fee),c),t))}else r(pte(W9("word",{negate:c}),t));else r(fte(hte(dte("[\t-\r ]"),c),t));else r(pte(W9("digit",{negate:c}),t))},Directive({node:e,parent:t,root:r,remove:n,replaceWith:i,removeAllPrevSiblings:a,removeAllNextSiblings:s}){const{kind:o,flags:l}=e;if("flags"===o)if(l.enable||l.disable){const e=Z9({flags:l});e.body[0].body=s(),i(fte(e,t),{traverse:!0})}else n();else{if("keep"!==o)throw new Error(`Unexpected directive kind "${o}"`);{const e=r.body[0],n=1===r.body.length&&P9(e,{type:"Group"})&&1===e.body[0].body.length?e.body[0]:r;if(t.parent!==n||n.body.length>1)throw new Error(Oee`Uses "\K" in a way that's unsupported`);const s=K9({behind:!0});s.body[0].body=a(),i(fte(s,t))}}},Flags({node:e,parent:t}){if(e.posixIsAscii)throw new Error('Unsupported flag "P"');if("word"===e.textSegmentMode)throw new Error('Unsupported flag "y{w}"');["digitIsAscii","extended","posixIsAscii","spaceIsAscii","wordIsAscii","textSegmentMode"].forEach(t=>delete e[t]),Object.assign(e,{global:!1,hasIndices:!1,multiline:!1,sticky:e.sticky??!1}),t.options={disable:{x:!0,n:!0},force:{v:!0}}},Group({node:e}){if(!e.flags)return;const{enable:t,disable:r}=e.flags;t?.extended&&delete t.extended,r?.extended&&delete r.extended,t?.dotAll&&r?.dotAll&&delete t.dotAll,t?.ignoreCase&&r?.ignoreCase&&delete t.ignoreCase,t&&!Object.keys(t).length&&delete e.flags.enable,r&&!Object.keys(r).length&&delete e.flags.disable,!e.flags.enable&&!e.flags.disable&&delete e.flags},LookaroundAssertion({node:e},t){const{kind:r}=e;"lookbehind"===r&&(t.passedLookbehind=!0)},NamedCallout({node:e,parent:t,replaceWith:r}){const{kind:n}=e;if("fail"!==n)throw new Error(`Unsupported named callout "(*${n.toUpperCase()}"`);r(fte(K9({negate:!0}),t))},Quantifier({node:e}){if("Quantifier"===e.body.type){const t=Z9();t.body[0].body.push(e.body),e.body=fte(t,e)}},Regex:{enter({node:e},{supportedGNodes:t}){const r=[];let n=!1,i=!1;for(const a of e.body)if(1===a.body.length&&"search_start"===a.body[0].kind)a.body.pop();else{const e=lte(a.body);e?(n=!0,Array.isArray(e)?r.push(...e):r.push(e)):i=!0}n&&!i&&r.forEach(e=>t.add(e))},exit(e,{accuracy:t,passedLookbehind:r,strategy:n}){if("strict"===t&&r&&n)throw new Error(Oee`Uses "\G" in a way that requires non-strict accuracy`)}},Subroutine({node:e},{jsGroupNameMap:t}){let{ref:r}=e;"string"!=typeof r||ute(r)||(r=ite(r,t),e.ref=r)}},Qee={Backreference({node:e},{multiplexCapturesToLeftByRef:t,reffedNodesByReferencer:r}){const{orphan:n,ref:i}=e;n||r.set(e,[...t.get(i).map(({node:e})=>e)])},CapturingGroup:{enter({node:e,parent:t,replaceWith:r,skip:n},{groupOriginByCopy:i,groupsByName:a,multiplexCapturesToLeftByRef:s,openRefs:o,reffedNodesByReferencer:l}){const c=i.get(e);if(c&&o.has(e.number)){const n=pte(nte(e.number),t);return l.set(n,o.get(e.number)),void r(n)}o.set(e.number,e),s.set(e.number,[]),e.name&&Pee(s,e.name,[]);const u=s.get(e.name??e.number);for(let d=0;d<u.length;d++){const t=u[d];if(c===t.node||c&&c===t.origin||e===t.origin){u.splice(d,1);break}}if(s.get(e.number).push({node:e,origin:c}),e.name&&s.get(e.name).push({node:e,origin:c}),e.name){const t=Pee(a,e.name,new Map);let r=!1;if(c)r=!0;else for(const e of t.values())if(!e.hasDuplicateNameToRemove){r=!0;break}a.get(e.name).set(e,{node:e,hasDuplicateNameToRemove:r})}},exit({node:e},{openRefs:t}){t.delete(e.number)}},Group:{enter({node:e},t){t.prevFlags=t.currentFlags,e.flags&&(t.currentFlags=Lee(t.currentFlags,e.flags))},exit(e,t){t.currentFlags=t.prevFlags}},Subroutine({node:e,parent:t,replaceWith:r},n){const{isRecursive:i,ref:a}=e;if(i){let r=t;for(;(r=r.parent)&&("CapturingGroup"!==r.type||r.name!==a&&r.number!==a););return void n.reffedNodesByReferencer.set(e,r)}const s=n.subroutineRefMap.get(a),o=0===a,l=o?nte(0):rte(s,n.groupOriginByCopy,null);let c=l;if(!o){const e=ate(function(e,t){const r=[];for(;e=e.parent;)t&&!t(e)||r.push(e);return r}(s,e=>"Group"===e.type&&!!e.flags)),t=e?Lee(n.globalFlags,e):n.globalFlags;(function(e,t){return e.dotAll===t.dotAll&&e.ignoreCase===t.ignoreCase})(t,n.currentFlags)||(c=Z9({flags:ste(t)}),c.body[0].body.push(l))}r(fte(c,t),{traverse:!o})}},ete={Backreference({node:e,parent:t,replaceWith:r},n){if(e.orphan)return void(n.highestOrphanBackref=Math.max(n.highestOrphanBackref,e.ref));const i=n.reffedNodesByReferencer.get(e).filter(t=>function(e,t){let r=t;do{if("Regex"===r.type)return!1;if("Alternative"===r.type)continue;if(r===e)return!1;const t=ote(r.parent);for(const n of t){if(n===r)break;if(n===e||cte(n,e))return!0}}while(r=r.parent);throw new Error("Unexpected path")}(t,e));if(i.length)if(i.length>1){r(fte(Z9({atomic:!0,body:i.reverse().map(e=>U9({body:[H9(e.number)]}))}),t))}else e.ref=i[0].number;else r(fte(K9({negate:!0}),t))},CapturingGroup({node:e},t){e.number=++t.numCapturesToLeft,e.name&&t.groupsByName.get(e.name).get(e).hasDuplicateNameToRemove&&delete e.name},Regex:{exit({node:e},t){const r=Math.max(t.highestOrphanBackref-t.numCapturesToLeft,0);for(let n=0;n<r;n++){const t=G9();e.body.at(-1).body.push(t)}}},Subroutine({node:e},t){e.isRecursive&&0!==e.ref&&(e.ref=t.reffedNodesByReferencer.get(e).number)}};function tte(e){see(e,{"*"({node:e,parent:t}){e.parent=t}})}function rte(e,t,r,n){const i=Array.isArray(e)?[]:{};for(const[a,s]of Object.entries(e))"parent"===a?i.parent=Array.isArray(r)?n:r:s&&"object"==typeof s?i[a]=rte(s,t,i,r):("type"===a&&"CapturingGroup"===s&&t.set(i,t.get(e)??e),i[a]=s);return i}function nte(e){const t=J9(e);return t.isRecursive=!0,t}function ite(e,t){if(t.has(e))return t.get(e);const r=`$${t.size}_${e.replace(/^[^$_\p{IDS}]|[^$\u200C\u200D\p{IDC}]/gu,"_")}`;return t.set(e,r),r}function ate(e){const t=["dotAll","ignoreCase"],r={enable:{},disable:{}};return e.forEach(({flags:e})=>{t.forEach(t=>{e.enable?.[t]&&(delete r.disable[t],r.enable[t]=!0),e.disable?.[t]&&(r.disable[t]=!0)})}),Object.keys(r.enable).length||delete r.enable,Object.keys(r.disable).length||delete r.disable,r.enable||r.disable?r:null}function ste({dotAll:e,ignoreCase:t}){const r={};return(e||t)&&(r.enable={},e&&(r.enable.dotAll=!0),t&&(r.enable.ignoreCase=!0)),e&&t||(r.disable={},!e&&(r.disable.dotAll=!0),!t&&(r.disable.ignoreCase=!0)),r}function ote(e){if(!e)throw new Error("Node expected");const{body:t}=e;return Array.isArray(t)?t:t?[t]:null}function lte(e){const t=e.find(e=>"search_start"===e.kind||function(e,t){const r={negate:null,...t};return"LookaroundAssertion"===e.type&&(null===r.negate||e.negate===r.negate)&&1===e.body.length&&P9(e.body[0],{type:"Assertion",kind:"search_start"})}(e,{negate:!1})||!function({type:e}){return"Assertion"===e||"Directive"===e||"LookaroundAssertion"===e}(e));if(!t)return null;if("search_start"===t.kind)return t;if("LookaroundAssertion"===t.type)return t.body[0].body[0];if("CapturingGroup"===t.type||"Group"===t.type){const e=[];for(const r of t.body){const t=lte(r.body);if(!t)return null;Array.isArray(t)?e.push(...t):e.push(t)}return e}return null}function cte(e,t){const r=ote(e)??[];for(const n of r)if(n===t||cte(n,t))return!0;return!1}function ute(e){return/^[$_\p{IDS}][$\u200C\u200D\p{IDC}]*$/u.test(e)}function dte(e,t){const r=$9(e,{...t,unicodePropertyMap:Gee}).body;return r.length>1||r[0].body.length>1?Z9({body:r}):r[0].body[0]}function hte(e,t){return e.negate=t,e}function pte(e,t){return e.parent=t,e}function fte(e,t){return tte(e),e.parent=t,e}function mte(e,t){const r=Bee(t),n=Dee(r.target,"ES2024"),i=Dee(r.target,"ES2025"),a=r.rules.recursionLimit;if(!Number.isInteger(a)||a<2||a>20)throw new Error("Invalid recursionLimit; use 2-20");let s=null,o=null;if(!i){const t=[e.flags.ignoreCase];see(e,gte,{getCurrentModI:()=>t.at(-1),popModI(){t.pop()},pushModI(e){t.push(e)},setHasCasedChar(){t.at(-1)?s=!0:o=!0}})}const l={dotAll:e.flags.dotAll,ignoreCase:!(!e.flags.ignoreCase&&!s||o)};let c=e;const u={accuracy:r.accuracy,appliedGlobalFlags:l,captureMap:new Map,currentFlags:{dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},inCharClass:!1,lastNode:c,originMap:e._originMap,recursionLimit:a,useAppliedIgnoreCase:!(i||!s||!o),useFlagMods:i,useFlagV:n,verbose:r.verbose};function d(e){u.lastNode=c,c=e;const t=function(e,t){if(null==e)throw new Error(t??"Value expected");return e}(vte[e.type],`Unexpected node type "${e.type}"`);return t(e,u,d)}const h={pattern:e.body.map(d).join("|"),flags:d(e.flags),options:{...e.options}};return n||(delete h.options.force.v,h.options.disable.v=!0,h.options.unicodeSetsPlugin=null),h._captureTransfers=new Map,h._hiddenCaptures=[],u.captureMap.forEach((e,t)=>{e.hidden&&h._hiddenCaptures.push(t),e.transferTo&&Pee(h._captureTransfers,e.transferTo,[]).push(t)}),h}var gte={"*":{enter({node:e},t){if(Ate(e)){const r=t.getCurrentModI();t.pushModI(e.flags?Lee({ignoreCase:r},e.flags).ignoreCase:r)}},exit({node:e},t){Ate(e)&&t.popModI()}},Backreference(e,t){t.setHasCasedChar()},Character({node:e},t){Ete(jee(e.value))&&t.setHasCasedChar()},CharacterClassRange({node:e,skip:t},r){t(),kte(e,{firstOnly:!0}).length&&r.setHasCasedChar()},CharacterSet({node:e},t){"property"===e.kind&&Jee.has(e.value)&&t.setHasCasedChar()}},vte={Alternative:({body:e},t,r)=>e.map(r).join(""),Assertion({kind:e,negate:t}){if("string_end"===e)return"$";if("string_start"===e)return"^";if("word_boundary"===e)return t?Oee`\B`:Oee`\b`;throw new Error(`Unexpected assertion kind "${e}"`)},Backreference({ref:e},t){if("number"!=typeof e)throw new Error("Unexpected named backref in transformed AST");if(!t.useFlagMods&&"strict"===t.accuracy&&t.currentFlags.ignoreCase&&!t.captureMap.get(e).ignoreCase)throw new Error("Use of case-insensitive backref to case-sensitive group requires target ES2025 or non-strict accuracy");return"\\"+e},CapturingGroup(e,t,r){const{body:n,name:i,number:a}=e,s={ignoreCase:t.currentFlags.ignoreCase},o=t.originMap.get(e);return o&&(s.hidden=!0,a>o.number&&(s.transferTo=o.number)),t.captureMap.set(a,s),`(${i?`?<${i}>`:""}${n.map(r).join("|")})`},Character({value:e},t){const r=jee(e),n=Ste(e,{escDigit:"Backreference"===t.lastNode.type,inCharClass:t.inCharClass,useFlagV:t.useFlagV});if(n!==r)return n;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase&&Ete(r)){const e=Hee(r);return t.inCharClass?e.join(""):e.length>1?`[${e.join("")}]`:e[0]}return r},CharacterClass(e,t,r){const{kind:n,negate:i,parent:a}=e;let{body:s}=e;if("intersection"===n&&!t.useFlagV)throw new Error("Use of class intersection requires min target ES2024");Ree.bugFlagVLiteralHyphenIsRange&&t.useFlagV&&s.some(Tte)&&(s=[q9(45),...s.filter(e=>!Tte(e))]);const o=()=>`[${i?"^":""}${s.map(r).join("intersection"===n?"&&":"")}]`;if(!t.inCharClass){if((!t.useFlagV||Ree.bugNestedClassIgnoresNegation)&&!i){const t=s.filter(e=>"CharacterClass"===e.type&&"union"===e.kind&&e.negate);if(t.length){const n=Z9(),i=n.body[0];return n.parent=a,i.parent=n,s=s.filter(e=>!t.includes(e)),e.body=s,s.length?(e.parent=i,i.body.push(e)):n.body.pop(),t.forEach(e=>{const t=U9({body:[e]});e.parent=t,t.parent=n,n.body.push(t)}),r(n)}}t.inCharClass=!0;const n=o();return t.inCharClass=!1,n}const l=s[0];if("union"===n&&!i&&l&&((!t.useFlagV||!t.verbose)&&"union"===a.kind&&(!Ree.bugFlagVLiteralHyphenIsRange||!t.useFlagV)||!t.verbose&&"intersection"===a.kind&&1===s.length&&"CharacterClassRange"!==l.type))return s.map(r).join("");if(!t.useFlagV&&"CharacterClass"===a.type)throw new Error("Use of nested character class requires min target ES2024");return o()},CharacterClassRange(e,t){const r=e.min.value,n=e.max.value,i={escDigit:!1,inCharClass:!0,useFlagV:t.useFlagV},a=Ste(r,i),s=Ste(n,i),o=new Set;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase){const t=function(e){const t=e.map(e=>e.codePointAt(0)).sort((e,t)=>e-t),r=[];let n=null;for(let i=0;i<t.length;i++)t[i+1]===t[i]+1?n??=t[i]:null===n?r.push(t[i]):(r.push([n,t[i]]),n=null);return r}(kte(e));t.forEach(e=>{o.add(Array.isArray(e)?`${Ste(e[0],i)}-${Ste(e[1],i)}`:Ste(e,i))})}return`${a}-${s}${[...o].join("")}`},CharacterSet({kind:e,negate:t,value:r,key:n},i){if("dot"===e)return i.currentFlags.dotAll?i.appliedGlobalFlags.dotAll||i.useFlagMods?".":"[^]":Oee`[^\n]`;if("digit"===e)return t?Oee`\D`:Oee`\d`;if("property"===e){if(i.useAppliedIgnoreCase&&i.currentFlags.ignoreCase&&Jee.has(r))throw new Error(`Unicode property "${r}" can't be case-insensitive when other chars have specific case`);return`${t?Oee`\P`:Oee`\p`}{${n?`${n}=`:""}${r}}`}if("word"===e)return t?Oee`\W`:Oee`\w`;throw new Error(`Unexpected character set kind "${e}"`)},Flags:(e,t)=>(t.appliedGlobalFlags.ignoreCase?"i":"")+(e.dotAll?"s":"")+(e.sticky?"y":""),Group({atomic:e,body:t,flags:r,parent:n},i,a){const s=i.currentFlags;r&&(i.currentFlags=Lee(s,r));const o=t.map(a).join("|"),l=i.verbose||1!==t.length||"Quantifier"===n.type||e||i.useFlagMods&&r?`(?${function(e,t,r){if(e)return">";let n="";if(t&&r){const{enable:e,disable:r}=t;n=(e?.ignoreCase?"i":"")+(e?.dotAll?"s":"")+(r?"-":"")+(r?.ignoreCase?"i":"")+(r?.dotAll?"s":"")}return`${n}:`}(e,r,i.useFlagMods)}${o})`:o;return i.currentFlags=s,l},LookaroundAssertion:({body:e,kind:t,negate:r},n,i)=>`(?${`${"lookahead"===t?"":"<"}${r?"!":"="}`}${e.map(i).join("|")})`,Quantifier:(e,t,r)=>r(e.body)+function({kind:e,max:t,min:r}){let n;n=r||1!==t?r||t!==1/0?1===r&&t===1/0?"+":r===t?`{${r}}`:`{${r},${t===1/0?"":t}}`:"*":"?";return n+{greedy:"",lazy:"?",possessive:"+"}[e]}(e),Subroutine({isRecursive:e,ref:t},r){if(!e)throw new Error("Unexpected non-recursive subroutine in transformed AST");const n=r.recursionLimit;return 0===t?`(?R=${n})`:Oee`\g<${t}&R=${n}>`}},yte=new Set(["$","(",")","*","+",".","?","[","\\","]","^","{","|","}"]),bte=new Set(["-","\\","]","^","["]),_te=new Set(["(",")","-","/","[","\\","]","^","{","|","}","!","#","$","%","&","*","+",",",".",":",";","<","=",">","?","@","`","~"]),wte=new Map([[9,Oee`\t`],[10,Oee`\n`],[11,Oee`\v`],[12,Oee`\f`],[13,Oee`\r`],[8232,Oee`\u2028`],[8233,Oee`\u2029`],[65279,Oee`\uFEFF`]]),xte=/^\p{Cased}$/u;function Ete(e){return xte.test(e)}function kte(e,t){const r=!!t?.firstOnly,n=e.min.value,i=e.max.value,a=[];if(n<65&&(65535===i||i>=131071)||65536===n&&i>=131071)return a;for(let s=n;s<=i;s++){const e=jee(s);if(!Ete(e))continue;const t=Hee(e).filter(e=>{const t=e.codePointAt(0);return t<n||t>i});if(t.length&&(a.push(...t),r))break}return a}function Ste(e,{escDigit:t,inCharClass:r,useFlagV:n}){if(wte.has(e))return wte.get(e);if(e<32||e>126&&e<160||e>262143||t&&function(e){return e>47&&e<58}(e))return e>255?`\\u{${e.toString(16).toUpperCase()}}`:`\\x${e.toString(16).toUpperCase().padStart(2,"0")}`;const i=r?n?_te:bte:yte,a=jee(e);return(i.has(a)?"\\":"")+a}function Ate({type:e}){return"CapturingGroup"===e||"Group"===e||"LookaroundAssertion"===e}function Tte({type:e,value:t}){return"Character"===e&&45===t}var Nte=class e extends RegExp{#e=new Map;#t=null;#r;#n=null;#i=null;rawOptions={};get source(){return this.#r||"(?:)"}constructor(t,r,n){const i=!!n?.lazyCompile;if(t instanceof RegExp){if(n)throw new Error("Cannot provide options when copying a regexp");const i=t;super(i,r),this.#r=i.source,i instanceof e&&(this.#e=i.#e,this.#n=i.#n,this.#i=i.#i,this.rawOptions=i.rawOptions)}else{const e={hiddenCaptures:[],strategy:null,transfers:[],...n};super(i?"":t,r),this.#r=t,this.#e=function(e,t){const r=new Map;for(const n of e)r.set(n,{hidden:!0});for(const[n,i]of t)for(const e of i)Pee(r,e,{}).transferTo=n;return r}(e.hiddenCaptures,e.transfers),this.#i=e.strategy,this.rawOptions=n??{}}i||(this.#t=this)}exec(t){if(!this.#t){const{lazyCompile:t,...r}=this.rawOptions;this.#t=new e(this.#r,this.flags,r)}const r=this.global||this.sticky,n=this.lastIndex;if("clip_search"===this.#i&&r&&n){this.lastIndex=0;const e=this.#a(t.slice(n));return e&&(!function(e,t,r,n){if(e.index+=t,e.input=r,n){const r=e.indices;for(let e=0;e<r.length;e++){const n=r[e];n&&(r[e]=[n[0]+t,n[1]+t])}const n=r.groups;n&&Object.keys(n).forEach(e=>{const r=n[e];r&&(n[e]=[r[0]+t,r[1]+t])})}}(e,n,t,this.hasIndices),this.lastIndex+=n),e}return this.#a(t)}#a(e){this.#t.lastIndex=this.lastIndex;const t=super.exec.call(this.#t,e);if(this.lastIndex=this.#t.lastIndex,!t||!this.#e.size)return t;const r=[...t];let n;t.length=1,this.hasIndices&&(n=[...t.indices],t.indices.length=1);const i=[0];for(let a=1;a<r.length;a++){const{hidden:e,transferTo:s}=this.#e.get(a)??{};if(e?i.push(null):(i.push(t.length),t.push(r[a]),this.hasIndices&&t.indices.push(n[a])),s&&void 0!==r[a]){const e=i[s];if(!e)throw new Error(`Invalid capture transfer to "${e}"`);if(t[e]=r[a],this.hasIndices&&(t.indices[e]=n[a]),t.groups){this.#n||(this.#n=Ite(this.source));const e=this.#n.get(s);e&&(t.groups[e]=r[a],this.hasIndices&&(t.indices.groups[e]=n[a]))}}}return t}};function Ite(e){const t=/(?<capture>\((?:\?<(?![=!])(?<name>[^>]+)>|(?!\?)))|\\?./gsu,r=new Map;let n,i=0,a=0;for(;n=t.exec(e);){const{0:e,groups:{capture:t,name:s}}=n;"["===e?i++:i?"]"===e&&i--:t&&(a++,s&&r.set(a,s))}return r}function Mte(e,t){const r=function(e,t){const r=Bee(t),n=$9(e,{flags:r.flags,normalizeUnknownPropertyNames:!0,rules:{captureGroup:r.rules.captureGroup,singleline:r.rules.singleline},skipBackrefValidation:r.rules.allowOrphanBackrefs,unicodePropertyMap:Gee}),i=function(e,t){const r={accuracy:"default",asciiWordBoundaries:!1,avoidSubclass:!1,bestEffortTarget:"ES2025",...t};tte(e);const n={accuracy:r.accuracy,asciiWordBoundaries:r.asciiWordBoundaries,avoidSubclass:r.avoidSubclass,flagDirectivesByAlt:new Map,jsGroupNameMap:new Map,minTargetEs2024:Dee(r.bestEffortTarget,"ES2024"),passedLookbehind:!1,strategy:null,subroutineRefMap:new Map,supportedGNodes:new Set,digitIsAscii:e.flags.digitIsAscii,spaceIsAscii:e.flags.spaceIsAscii,wordIsAscii:e.flags.wordIsAscii};see(e,Xee,n);const i={dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},a={currentFlags:i,prevFlags:null,globalFlags:i,groupOriginByCopy:new Map,groupsByName:new Map,multiplexCapturesToLeftByRef:new Map,openRefs:new Map,reffedNodesByReferencer:new Map,subroutineRefMap:n.subroutineRefMap};return see(e,Qee,a),see(e,ete,{groupsByName:a.groupsByName,highestOrphanBackref:0,numCapturesToLeft:0,reffedNodesByReferencer:a.reffedNodesByReferencer}),e._originMap=a.groupOriginByCopy,e._strategy=n.strategy,e}(n,{accuracy:r.accuracy,asciiWordBoundaries:r.rules.asciiWordBoundaries,avoidSubclass:r.avoidSubclass,bestEffortTarget:r.target}),a=mte(i,r),s=function(e,t){const{hiddenCaptures:r,mode:n}={hiddenCaptures:[],mode:"plugin",...t};let i=t?.captureTransfers??new Map;if(!new RegExp(xee,"su").test(e))return{pattern:e,captureTransfers:i,hiddenCaptures:r};if("plugin"===n&&mee(e,_ee`\(\?\(DEFINE\)`,hee.DEFAULT))throw new Error("DEFINE groups cannot be used with recursion");const a=[],s=mee(e,_ee`\\[1-9]`,hee.DEFAULT),o=new Map,l=[];let c,u=!1,d=0,h=0;for(See.lastIndex=0;c=See.exec(e);){const{0:t,groups:{captureName:p,rDepth:f,gRNameOrNum:m,gRDepth:g}}=c;if("["===t)d++;else if(d)"]"===t&&d--;else{if(f){if(Tee(f),u)throw new Error(Aee);if(s)throw new Error(("external"===n?"Backrefs":"Numbered backrefs")+" cannot be used with global recursion");const t=e.slice(0,c.index),o=e.slice(See.lastIndex);if(mee(o,xee,hee.DEFAULT))throw new Error(Aee);const l=+f-1;e=Nee(t,o,l,!1,r,a,h),i=Cee(i,t,l,a.length,0,h);break}if(m){Tee(g);let d=!1;for(const e of l)if(e.name===m||e.num===+m){if(d=!0,e.hasRecursedWithin)throw new Error(Aee);break}if(!d)throw new Error(_ee`Recursive \g cannot be used outside the referenced group "${"external"===n?m:_ee`\g<${m}&R=${g}>`}"`);const p=o.get(m),f=gee(e,p);if(s&&mee(f,_ee`${Eee}|\((?!\?)`,hee.DEFAULT))throw new Error(("external"===n?"Backrefs":"Numbered backrefs")+" cannot be used with recursion of capturing groups");const v=e.slice(p,c.index),y=f.slice(v.length+t.length),b=a.length,_=+g-1,w=Nee(v,y,_,!0,r,a,h);i=Cee(i,v,_,a.length-b,b,h);const x=e.slice(0,p),E=e.slice(p+f.length);e=`${x}${w}${E}`,See.lastIndex+=w.length-t.length-v.length-y.length,l.forEach(e=>e.hasRecursedWithin=!0),u=!0}else if(p)h++,o.set(String(h),See.lastIndex),o.set(p,See.lastIndex),l.push({num:h,name:p});else if("("===t[0]){const e="("===t;e&&(h++,o.set(String(h),See.lastIndex)),l.push(e?{num:h}:{})}else")"===t&&l.pop()}}return r.push(...a),{pattern:e,captureTransfers:i,hiddenCaptures:r}}(a.pattern,{captureTransfers:a._captureTransfers,hiddenCaptures:a._hiddenCaptures,mode:"external"}),o=function(e,t){const r=t?.hiddenCaptures??[];let n=t?.captureTransfers??new Map;if(!/\(\?>/.test(e))return{pattern:e,captureTransfers:n,hiddenCaptures:r};const i="(?:(?=(",a=[0],s=[];let o,l=0,c=0,u=NaN;do{o=!1;let t,d=0,h=0,p=!1;for(vee.lastIndex=Number.isNaN(u)?0:u+7;t=vee.exec(e);){const{0:f,index:m,groups:{capturingStart:g,noncapturingStart:v}}=t;if("["===f)d++;else if(d)"]"===f&&d--;else if("(?>"!==f||p){if(p&&v)h++;else if(g)p?h++:(l++,a.push(l+c));else if(")"===f&&p){if(!h){c++;const t=l+c;if(e=`${e.slice(0,u)}${i}${e.slice(u+3,m)}))<$$${t}>)${e.slice(m+1)}`,o=!0,s.push(t),uee(r,t),n.size){const e=new Map;n.forEach((r,n)=>{e.set(n>=t?n+1:n,r.map(e=>e>=t?e+1:e))}),n=e}break}h--}}else u=m,p=!0}}while(o);return r.push(...s),e=pee(e,String.raw`\\(?<backrefNum>[1-9]\d*)|<\$\$(?<wrappedBackrefNum>\d+)>`,({0:e,groups:{backrefNum:t,wrappedBackrefNum:r}})=>{if(t){const r=+t;if(r>a.length-1)throw new Error(`Backref "${e}" greater than number of captures`);return`\\${a[r]}`}return`\\${r}`},hee.DEFAULT),{pattern:e,captureTransfers:n,hiddenCaptures:r}}(function(e){if(!new RegExp(`${yee}\\+`).test(e))return{pattern:e};const t=[];let r,n=null,i=null,a="",s=0;for(bee.lastIndex=0;r=bee.exec(e);){const{0:o,index:l,groups:{qBase:c,qMod:u,invalidQ:d}}=r;if("["===o)s||(i=l),s++;else if("]"===o)s?s--:i=null;else if(!s)if("+"===u&&a&&!a.startsWith("(")){if(d)throw new Error(`Invalid quantifier "${o}"`);let t=-1;if(/^\{\d+\}$/.test(c))e=dee(e,l+c.length,u,"");else{if(")"===a||"]"===a){const t=")"===a?n:i;if(null===t)throw new Error(`Invalid unmatched "${a}"`);e=`${e.slice(0,t)}(?>${e.slice(t,l)}${c})${e.slice(l+o.length)}`}else e=`${e.slice(0,l-a.length)}(?>${a}${c})${e.slice(l+o.length)}`;t+=4}bee.lastIndex+=t}else"("===o[0]?t.push(l):")"===o&&(n=t.length?t.pop():null);a=o}return{pattern:e}}(s.pattern).pattern,{captureTransfers:s.captureTransfers,hiddenCaptures:s.hiddenCaptures}),l={pattern:o.pattern,flags:`${r.hasIndices?"d":""}${r.global?"g":""}${a.flags}${a.options.disable.v?"u":"v"}`};if(r.avoidSubclass){if(r.lazyCompileLength!==1/0)throw new Error("Lazy compilation requires subclass")}else{const e=o.hiddenCaptures.sort((e,t)=>e-t),t=Array.from(o.captureTransfers),n=i._strategy,a=l.pattern.length>=r.lazyCompileLength;(e.length||t.length||n||a)&&(l.options={...e.length&&{hiddenCaptures:e},...t.length&&{transfers:t},...n&&{strategy:n},...a&&{lazyCompile:a}})}return l}(e,t);return r.options?new Nte(r.pattern,r.flags,r.options):new RegExp(r.pattern,r.flags)}const Cte=4294967295;class jte{constructor(e,t={}){this.patterns=e,this.options=t;const{forgiving:r=!1,cache:n,regexConstructor:i}=t;if(!i)throw new Error("Option `regexConstructor` is not provided");this.regexps=e.map(e=>{if("string"!=typeof e)return e;const t=n?.get(e);if(t){if(t instanceof RegExp)return t;if(r)return null;throw t}try{const t=i(e);return n?.set(e,t),t}catch(En){if(n?.set(e,En),r)return null;throw En}})}regexps;findNextMatchSync(e,t,r){const n="string"==typeof e?e:e.content,i=[];function a(e,t,r=0){return{index:e,captureIndices:t.indices.map(e=>null==e?{start:Cte,end:Cte,length:0}:{start:e[0]+r,end:e[1]+r,length:e[1]-e[0]})}}for(let s=0;s<this.regexps.length;s++){const e=this.regexps[s];if(e)try{e.lastIndex=t;const r=e.exec(n);if(!r)continue;if(r.index===t)return a(s,r,0);i.push([s,r,0])}catch(En){if(this.options.forgiving)continue;throw En}}if(i.length){const e=Math.min(...i.map(e=>e[1].index));for(const[t,r,n]of i)if(r.index===e)return a(t,r,n)}return null}}function Ote(e={}){const t=Object.assign({target:"auto",cache:new Map},e);return t.regexConstructor||=e=>function(e,t){return Mte(e,{global:!0,hasIndices:!0,lazyCompileLength:3e3,rules:{allowOrphanBackrefs:!0,asciiWordBoundaries:!0,captureGroup:!0,recursionLimit:5,singleline:!0},...t})}(e,{target:t.target}),{createScanner:e=>new jte(e,t),createString:e=>({content:e})}}function Rte(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Lte={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Pte(e){Lte=e}var Dte={exec:()=>null};function $te(e,t=""){let r="string"==typeof e?e:e.source,n={replace:(e,t)=>{let i="string"==typeof t?t:t.source;return i=i.replace(Bte.caret,"$1"),r=r.replace(e,i),n},getRegex:()=>new RegExp(r,t)};return n}var zte=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Bte={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Ute=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Fte=/(?:[*+-]|\d{1,9}[.)])/,Hte=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Gte=$te(Hte).replace(/bull/g,Fte).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),qte=$te(Hte).replace(/bull/g,Fte).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Vte=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Wte=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Zte=$te(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Wte).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Kte=$te(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Fte).getRegex(),Yte="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Jte=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Xte=$te("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",Jte).replace("tag",Yte).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Qte=$te(Vte).replace("hr",Ute).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yte).getRegex(),ere={blockquote:$te(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Qte).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:Zte,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Ute,html:Xte,lheading:Gte,list:Kte,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:Qte,table:Dte,text:/^[^\n]+/},tre=$te("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ute).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yte).getRegex(),rre={...ere,lheading:qte,table:tre,paragraph:$te(Vte).replace("hr",Ute).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",tre).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Yte).getRegex()},nre={...ere,html:$te("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Jte).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Dte,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:$te(Vte).replace("hr",Ute).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Gte).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ire=/^( {2,}|\\)\n(?!\s*$)/,are=/[\p{P}\p{S}]/u,sre=/[\s\p{P}\p{S}]/u,ore=/[^\s\p{P}\p{S}]/u,lre=$te(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,sre).getRegex(),cre=/(?!~)[\p{P}\p{S}]/u,ure=$te(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",zte?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),dre=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,hre=$te(dre,"u").replace(/punct/g,are).getRegex(),pre=$te(dre,"u").replace(/punct/g,cre).getRegex(),fre="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",mre=$te(fre,"gu").replace(/notPunctSpace/g,ore).replace(/punctSpace/g,sre).replace(/punct/g,are).getRegex(),gre=$te(fre,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,cre).getRegex(),vre=$te("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,ore).replace(/punctSpace/g,sre).replace(/punct/g,are).getRegex(),yre=$te(/\\(punct)/,"gu").replace(/punct/g,are).getRegex(),bre=$te(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),_re=$te(Jte).replace("(?:--\x3e|$)","--\x3e").getRegex(),wre=$te("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",_re).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),xre=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Ere=$te(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",xre).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),kre=$te(/^!?\[(label)\]\[(ref)\]/).replace("label",xre).replace("ref",Wte).getRegex(),Sre=$te(/^!?\[(ref)\](?:\[\])?/).replace("ref",Wte).getRegex(),Are=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Tre={_backpedal:Dte,anyPunctuation:yre,autolink:bre,blockSkip:ure,br:ire,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Dte,emStrongLDelim:hre,emStrongRDelimAst:mre,emStrongRDelimUnd:vre,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:Ere,nolink:Sre,punctuation:lre,reflink:kre,reflinkSearch:$te("reflink|nolink(?!\\()","g").replace("reflink",kre).replace("nolink",Sre).getRegex(),tag:wre,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Dte},Nre={...Tre,link:$te(/^!?\[(label)\]\((.*?)\)/).replace("label",xre).getRegex(),reflink:$te(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xre).getRegex()},Ire={...Tre,emStrongRDelimAst:gre,emStrongLDelim:pre,url:$te(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Are).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:$te(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Are).getRegex()},Mre={...Ire,br:$te(ire).replace("{2,}","*").getRegex(),text:$te(Ire.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Cre={normal:ere,gfm:rre,pedantic:nre},jre={normal:Tre,gfm:Ire,breaks:Mre,pedantic:Nre},Ore={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Rre=e=>Ore[e];function Lre(e,t){if(t){if(Bte.escapeTest.test(e))return e.replace(Bte.escapeReplace,Rre)}else if(Bte.escapeTestNoEncode.test(e))return e.replace(Bte.escapeReplaceNoEncode,Rre);return e}function Pre(e){try{e=encodeURI(e).replace(Bte.percentDecode,"%")}catch{return null}return e}function Dre(e,t){let r=e.replace(Bte.findPipe,(e,t,r)=>{let n=!1,i=t;for(;--i>=0&&"\\"===r[i];)n=!n;return n?"|":" |"}),n=r.split(Bte.splitPipe),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(Bte.slashPipe,"|");return n}function $re(e,t,r){let n=e.length;if(0===n)return"";let i=0;for(;i<n;){if(e.charAt(n-i-1)!==t)break;i++}return e.slice(0,n-i)}function zre(e,t,r,n,i){let a=t.href,s=t.title||null,o=e[1].replace(i.other.outputLinkReplace,"$1");n.state.inLink=!0;let l={type:"!"===e[0].charAt(0)?"image":"link",raw:r,href:a,title:s,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,l}var Bre=class{options;rules;lexer;constructor(e){this.options=e||Lte}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:$re(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],r=function(e,t,r){let n=e.match(r.other.indentCodeCompensation);if(null===n)return t;let i=n[1];return t.split("\n").map(e=>{let t=e.match(r.other.beginningSpace);if(null===t)return e;let[n]=t;return n.length>=i.length?e.slice(i.length):e}).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=$re(e,"#");(this.options.pedantic||!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:$re(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=$re(t[0],"\n").split("\n"),r="",n="",i=[];for(;e.length>0;){let t,a=!1,s=[];for(t=0;t<e.length;t++)if(this.rules.other.blockquoteStart.test(e[t]))s.push(e[t]),a=!0;else{if(a)break;s.push(e[t])}e=e.slice(t);let o=s.join("\n"),l=o.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}\n${o}`:o,n=n?`${n}\n${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=c,0===e.length)break;let u=i.at(-1);if("code"===u?.type)break;if("blockquote"===u?.type){let t=u,a=t.raw+"\n"+e.join("\n"),s=this.blockquote(a);i[i.length-1]=s,r=r.substring(0,r.length-t.raw.length)+s.raw,n=n.substring(0,n.length-t.text.length)+s.text;break}if("list"===u?.type){let t=u,a=t.raw+"\n"+e.join("\n"),s=this.list(a);i[i.length-1]=s,r=r.substring(0,r.length-u.raw.length)+s.raw,n=n.substring(0,n.length-t.raw.length)+s.raw,e=a.substring(i.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:r,tokens:i,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),n=r.length>1,i={type:"list",raw:"",ordered:n,start:n?+r.slice(0,-1):"",loose:!1,items:[]};r=n?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=n?r:"[*+-]");let a=this.rules.other.listItemRegex(r),s=!1;for(;e;){let r=!1,n="",o="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;n=t[0],e=e.substring(n.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,e=>" ".repeat(3*e.length)),c=e.split("\n",1)[0],u=!l.trim(),d=0;if(this.options.pedantic?(d=2,o=l.trimStart()):u?d=t[1].length+1:(d=t[2].search(this.rules.other.nonSpaceChar),d=d>4?1:d,o=l.slice(d),d+=t[1].length),u&&this.rules.other.blankLine.test(c)&&(n+=c+"\n",e=e.substring(c.length+1),r=!0),!r){let t=this.rules.other.nextBulletRegex(d),r=this.rules.other.hrRegex(d),i=this.rules.other.fencesBeginRegex(d),a=this.rules.other.headingBeginRegex(d),s=this.rules.other.htmlBeginRegex(d);for(;e;){let h,p=e.split("\n",1)[0];if(c=p,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),h=c):h=c.replace(this.rules.other.tabCharGlobal,"    "),i.test(c)||a.test(c)||s.test(c)||t.test(c)||r.test(c))break;if(h.search(this.rules.other.nonSpaceChar)>=d||!c.trim())o+="\n"+h.slice(d);else{if(u||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||i.test(l)||a.test(l)||r.test(l))break;o+="\n"+c}!u&&!c.trim()&&(u=!0),n+=p+"\n",e=e.substring(p.length+1),l=h.slice(d)}}i.loose||(s?i.loose=!0:this.rules.other.doubleBlankLine.test(n)&&(s=!0));let h,p=null;this.options.gfm&&(p=this.rules.other.listIsTask.exec(o),p&&(h="[ ] "!==p[0],o=o.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:n,task:!!p,checked:h,loose:!1,text:o,tokens:[]}),i.raw+=n}let o=i.items.at(-1);if(!o)return;o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){let t=i.items[e].tokens.filter(e=>"space"===e.type),r=t.length>0&&t.some(e=>this.rules.other.anyLine.test(e.raw));i.loose=r}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:r,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=Dre(t[1]),n=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===n.length){for(let e of n)this.rules.other.tableAlignRight.test(e)?a.align.push("right"):this.rules.other.tableAlignCenter.test(e)?a.align.push("center"):this.rules.other.tableAlignLeft.test(e)?a.align.push("left"):a.align.push(null);for(let e=0;e<r.length;e++)a.header.push({text:r[e],tokens:this.lexer.inline(r[e]),header:!0,align:a.align[e]});for(let e of i)a.rows.push(Dre(e,a.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:a.align[t]})));return a}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=$re(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let r=0;for(let n=0;n<e.length;n++)if("\\"===e[n])n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return r>0?-2:-1}(t[2],"()");if(-2===e)return;if(e>-1){let r=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,r).trim(),t[3]=""}}let r=t[2],n="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(r);e&&(r=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(r=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?r.slice(1):r.slice(1,-1)),zre(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let e=t[(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=r[0].charAt(0);return{type:"text",raw:e,text:e}}return zre(r,e,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!n[1]&&!n[2]||!r||this.rules.inline.punctuation.exec(r))){let r,i,a=[...n[0]].length-1,s=a,o=0,l="*"===n[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+a);null!=(n=l.exec(t));){if(r=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!r)continue;if(i=[...r].length,n[3]||n[4]){s+=i;continue}if((n[5]||n[6])&&a%3&&!((a+i)%3)){o+=i;continue}if(s-=i,s>0)continue;i=Math.min(i,i+s+o);let t=[...n[0]][0].length,l=e.slice(0,a+n.index+t+i);if(Math.min(a,i)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(e),n=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return r&&n&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,r;return"@"===t[2]?(e=t[1],r="mailto:"+e):(e=t[1],r=e),{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,r;if("@"===t[2])e=t[0],r="mailto:"+e;else{let n;do{n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(n!==t[0]);e=t[0],r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},Ure=class e{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Lte,this.options.tokenizer=this.options.tokenizer||new Bre,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Bte,block:Cre.normal,inline:jre.normal};this.options.pedantic?(t.block=Cre.pedantic,t.inline=jre.pedantic):this.options.gfm&&(t.block=Cre.gfm,this.options.breaks?t.inline=jre.breaks:t.inline=jre.gfm),this.tokenizer.rules=t}static get rules(){return{block:Cre,inline:jre}}static lex(t,r){return new e(r).lex(t)}static lexInline(t,r){return new e(r).inlineTokens(t)}lex(e){e=e.replace(Bte.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(Bte.tabCharGlobal,"    ").replace(Bte.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let r=t.at(-1);1===n.raw.length&&void 0!==r?r.raw+="\n":t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let r=t.at(-1);"paragraph"===r?.type||"text"===r?.type?(r.raw+=(r.raw.endsWith("\n")?"":"\n")+n.raw,r.text+="\n"+n.text,this.inlineQueue.at(-1).src=r.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let r=t.at(-1);"paragraph"===r?.type||"text"===r?.type?(r.raw+=(r.raw.endsWith("\n")?"":"\n")+n.raw,r.text+="\n"+n.raw,this.inlineQueue.at(-1).src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title},t.push(n));continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}let i=e;if(this.options.extensions?.startBlock){let t,r=1/0,n=e.slice(1);this.options.extensions.startBlock.forEach(e=>{t=e.call({lexer:this},n),"number"==typeof t&&t>=0&&(r=Math.min(r,t))}),r<1/0&&r>=0&&(i=e.substring(0,r+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){let a=t.at(-1);r&&"paragraph"===a?.type?(a.raw+=(a.raw.endsWith("\n")?"":"\n")+n.raw,a.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):t.push(n),r=i.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let r=t.at(-1);"text"===r?.type?(r.raw+=(r.raw.endsWith("\n")?"":"\n")+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):t.push(n);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,n=e,i=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(i=this.tokenizer.rules.inline.reflinkSearch.exec(n));)e.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(i=this.tokenizer.rules.inline.anyPunctuation.exec(n));)n=n.slice(0,i.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(i=this.tokenizer.rules.inline.blockSkip.exec(n));)r=i[2]?i[2].length:0,n=n.slice(0,i.index+r)+"["+"a".repeat(i[0].length-r-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let a=!1,s="";for(;e;){let r;if(a||(s=""),a=!1,this.options.extensions?.inline?.some(n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))continue;if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length);let n=t.at(-1);"text"===r.type&&"text"===n?.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,n,s)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}let i=e;if(this.options.extensions?.startInline){let t,r=1/0,n=e.slice(1);this.options.extensions.startInline.forEach(e=>{t=e.call({lexer:this},n),"number"==typeof t&&t>=0&&(r=Math.min(r,t))}),r<1/0&&r>=0&&(i=e.substring(0,r+1))}if(r=this.tokenizer.inlineText(i)){e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(s=r.raw.slice(-1)),a=!0;let n=t.at(-1);"text"===n?.type?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}},Fre=class{options;parser;constructor(e){this.options=e||Lte}space(e){return""}code({text:e,lang:t,escaped:r}){let n=(t||"").match(Bte.notSpaceStart)?.[0],i=e.replace(Bte.endingNewline,"")+"\n";return n?'<pre><code class="language-'+Lre(n)+'">'+(r?i:Lre(i,!0))+"</code></pre>\n":"<pre><code>"+(r?i:Lre(i,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){let t=e.ordered,r=e.start,n="";for(let a=0;a<e.items.length;a++){let t=e.items[a];n+=this.listitem(t)}let i=t?"ol":"ul";return"<"+i+(t&&1!==r?' start="'+r+'"':"")+">\n"+n+"</"+i+">\n"}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?"paragraph"===e.tokens[0]?.type?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=r+" "+Lre(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",r="";for(let i=0;i<e.header.length;i++)r+=this.tablecell(e.header[i]);t+=this.tablerow({text:r});let n="";for(let i=0;i<e.rows.length;i++){let t=e.rows[i];r="";for(let e=0;e<t.length;e++)r+=this.tablecell(t[e]);n+=this.tablerow({text:r})}return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+n+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Lre(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let n=this.parser.parseInline(r),i=Pre(e);if(null===i)return n;let a='<a href="'+(e=i)+'"';return t&&(a+=' title="'+Lre(t)+'"'),a+=">"+n+"</a>",a}image({href:e,title:t,text:r,tokens:n}){n&&(r=this.parser.parseInline(n,this.parser.textRenderer));let i=Pre(e);if(null===i)return Lre(r);let a=`<img src="${e=i}" alt="${r}"`;return t&&(a+=` title="${Lre(t)}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Lre(e.text)}},Hre=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Gre=class e{options;renderer;textRenderer;constructor(e){this.options=e||Lte,this.options.renderer=this.options.renderer||new Fre,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Hre}static parse(t,r){return new e(r).parse(t)}static parseInline(t,r){return new e(r).parseInline(t)}parse(e,t=!0){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions?.renderers?.[i.type]){let e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(e.type)){r+=t||"";continue}}let a=i;switch(a.type){case"space":r+=this.renderer.space(a);continue;case"hr":r+=this.renderer.hr(a);continue;case"heading":r+=this.renderer.heading(a);continue;case"code":r+=this.renderer.code(a);continue;case"table":r+=this.renderer.table(a);continue;case"blockquote":r+=this.renderer.blockquote(a);continue;case"list":r+=this.renderer.list(a);continue;case"html":r+=this.renderer.html(a);continue;case"def":r+=this.renderer.def(a);continue;case"paragraph":r+=this.renderer.paragraph(a);continue;case"text":{let i=a,s=this.renderer.text(i);for(;n+1<e.length&&"text"===e[n+1].type;)i=e[++n],s+="\n"+this.renderer.text(i);r+=t?this.renderer.paragraph({type:"paragraph",raw:s,text:s,tokens:[{type:"text",raw:s,text:s,escaped:!0}]}):s;continue}default:{let e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return r}parseInline(e,t=this.renderer){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions?.renderers?.[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=e||"";continue}}let a=i;switch(a.type){case"escape":case"text":r+=t.text(a);break;case"html":r+=t.html(a);break;case"link":r+=t.link(a);break;case"image":r+=t.image(a);break;case"strong":r+=t.strong(a);break;case"em":r+=t.em(a);break;case"codespan":r+=t.codespan(a);break;case"br":r+=t.br(a);break;case"del":r+=t.del(a);break;default:{let e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return r}},qre=class{options;block;constructor(e){this.options=e||Lte}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?Ure.lex:Ure.lexInline}provideParser(){return this.block?Gre.parse:Gre.parseInline}},Vre=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Gre;Renderer=Fre;TextRenderer=Hre;Lexer=Ure;Tokenizer=Bre;Hooks=qre;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let n of e)switch(r=r.concat(t.call(this,n)),n.type){case"table":{let e=n;for(let n of e.header)r=r.concat(this.walkTokens(n.tokens,t));for(let n of e.rows)for(let e of n)r=r.concat(this.walkTokens(e.tokens,t));break}case"list":{let e=n;r=r.concat(this.walkTokens(e.items,t));break}default:{let e=n;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach(n=>{let i=e[n].flat(1/0);r=r.concat(this.walkTokens(i,t))}):e.tokens&&(r=r.concat(this.walkTokens(e.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{let r={...e};if(r.async=this.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){let r=t.renderers[e.name];t.renderers[e.name]=r?function(...t){let n=e.renderer.apply(this,t);return!1===n&&(n=r.apply(this,t)),n}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");let r=t[e.level];r?r.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),r.extensions=t),e.renderer){let t=this.defaults.renderer||new Fre(this.defaults);for(let r in e.renderer){if(!(r in t))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let n=r,i=e.renderer[n],a=t[n];t[n]=(...e)=>{let r=i.apply(t,e);return!1===r&&(r=a.apply(t,e)),r||""}}r.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new Bre(this.defaults);for(let r in e.tokenizer){if(!(r in t))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let n=r,i=e.tokenizer[n],a=t[n];t[n]=(...e)=>{let r=i.apply(t,e);return!1===r&&(r=a.apply(t,e)),r}}r.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new qre;for(let r in e.hooks){if(!(r in t))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let n=r,i=e.hooks[n],a=t[n];qre.passThroughHooks.has(r)?t[n]=e=>{if(this.defaults.async&&qre.passThroughHooksRespectAsync.has(r))return(async()=>{let r=await i.call(t,e);return a.call(t,r)})();let n=i.call(t,e);return a.call(t,n)}:t[n]=(...e)=>{if(this.defaults.async)return(async()=>{let r=await i.apply(t,e);return!1===r&&(r=await a.apply(t,e)),r})();let r=i.apply(t,e);return!1===r&&(r=a.apply(t,e)),r}}r.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,n=e.walkTokens;r.walkTokens=function(e){let r=[];return r.push(n.call(this,e)),t&&(r=r.concat(t.call(this,e))),r}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Ure.lex(e,t??this.defaults)}parser(e,t){return Gre.parse(e,t??this.defaults)}parseMarkdown(e){return(t,r)=>{let n={...r},i={...this.defaults,...n},a=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===n.async)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||null===t)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=e),i.async)return(async()=>{let r=i.hooks?await i.hooks.preprocess(t):t,n=await(i.hooks?await i.hooks.provideLexer():e?Ure.lex:Ure.lexInline)(r,i),a=i.hooks?await i.hooks.processAllTokens(n):n;i.walkTokens&&await Promise.all(this.walkTokens(a,i.walkTokens));let s=await(i.hooks?await i.hooks.provideParser():e?Gre.parse:Gre.parseInline)(a,i);return i.hooks?await i.hooks.postprocess(s):s})().catch(a);try{i.hooks&&(t=i.hooks.preprocess(t));let r=(i.hooks?i.hooks.provideLexer():e?Ure.lex:Ure.lexInline)(t,i);i.hooks&&(r=i.hooks.processAllTokens(r)),i.walkTokens&&this.walkTokens(r,i.walkTokens);let n=(i.hooks?i.hooks.provideParser():e?Gre.parse:Gre.parseInline)(r,i);return i.hooks&&(n=i.hooks.postprocess(n)),n}catch(P9){return a(P9)}}}onError(e,t){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+Lre(r.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(r);throw r}}};function Wre(e,t){return Vre.parse(e,t)}Wre.options=Wre.setOptions=function(e){return Vre.setOptions(e),Wre.defaults=Vre.defaults,Pte(Wre.defaults),Wre},Wre.getDefaults=Rte,Wre.defaults=Lte,Wre.use=function(...e){return Vre.use(...e),Wre.defaults=Vre.defaults,Pte(Wre.defaults),Wre},Wre.walkTokens=function(e,t){return Vre.walkTokens(e,t)},Wre.parseInline=Vre.parseInline,Wre.Parser=Gre,Wre.parser=Gre.parse,Wre.Renderer=Fre,Wre.TextRenderer=Hre,Wre.Lexer=Ure,Wre.lexer=Ure.lex,Wre.Tokenizer=Bre,Wre.Hooks=qre,Wre.parse=Wre,Wre.options,Wre.setOptions,Wre.use,Wre.walkTokens,Wre.parseInline,Gre.parse,Ure.lex;var Zre=(...e)=>zi(dn(e)),Kre=(e,t,r)=>{let n="string"==typeof t?new Blob([t],{type:r}):t,i=URL.createObjectURL(n),a=document.createElement("a");a.href=i,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)},Yre=i.createContext({code:""});var Jre=e=>e?[{pre(t){return this.addClassToHast(t,e),t}}]:[],Xre=new class{constructor(){this.lightHighlighter=null,this.darkHighlighter=null,this.lightTheme=null,this.darkTheme=null,this.loadedLanguages=new Set,this.initializationPromise=null,this.loadLanguagePromise=null,this.cache=new Map,this.cacheKeys=[],this.MAX_CACHE_SIZE=50,this.highlightQueue=new Map}isLanguageSupported(e){return Object.hasOwn(U7,e)}getFallbackLanguage(){return"text"}getCacheKey(e,t,r){return`${t}::${r||""}::${e}`}addToCache(e,t){if(this.cache.size>=this.MAX_CACHE_SIZE){let e=this.cacheKeys.shift();e&&this.cache.delete(e)}this.cache.set(e,t),this.cacheKeys.push(e)}needsHighlightersInitialization(e){let[t,r]=e;return[!this.lightHighlighter||this.lightTheme!==t,!this.darkHighlighter||this.darkTheme!==r]}async ensureHighlightersInitialized(e,t){let[r,n]=t,[i,a]=e,s=Ote({forgiving:!0});this.loadedLanguages.clear(),this.cache.clear(),this.cacheKeys=[],this.highlightQueue.clear(),r&&(this.lightHighlighter=await i9({themes:[i],langs:[],engine:s}),this.lightTheme=i),n&&(this.darkHighlighter=await i9({themes:[a],langs:[],engine:s}),this.darkTheme=a)}async loadLanguage(e){var t,r;await(null==(t=this.darkHighlighter)?void 0:t.loadLanguage(e)),await(null==(r=this.lightHighlighter)?void 0:r.loadLanguage(e)),this.loadedLanguages.add(e)}async initializeHighlighters(e){this.initializationPromise&&await this.initializationPromise;let t=this.needsHighlightersInitialization(e),[r,n]=t;(r||n)&&(this.initializationPromise=this.ensureHighlightersInitialized(e,t),await this.initializationPromise,this.initializationPromise=null)}performHighlights(e,t,r){let n=this.isLanguageSupported(t)?t:this.getFallbackLanguage();if(null===this.lightHighlighter||null===this.darkHighlighter||null===this.lightTheme||null===this.darkTheme)throw new Error("highlightCode must be called after initializeHighlighters.");let i=Jre(r);return[this.lightHighlighter.codeToHtml(e,{lang:n,theme:this.lightTheme,transformers:i}),this.darkHighlighter.codeToHtml(e,{lang:n,theme:this.darkTheme,transformers:i})]}async highlightCode(e,t,r,n){let i=this.getCacheKey(e,t,r),a=this.cache.get(i);if(a)return this.cacheKeys=this.cacheKeys.filter(e=>e!==i),this.cacheKeys.push(i),a;let s=this.highlightQueue.get(i);if(s)return s;let o=()=>{if(null!=n&&n.aborted)throw new DOMException("Aborted","AbortError")},l=(async()=>{try{await new Promise(e=>setTimeout(e,0)),o(),this.initializationPromise&&await this.initializationPromise,o(),this.loadLanguagePromise&&await this.loadLanguagePromise,o(),!this.loadedLanguages.has(t)&&this.isLanguageSupported(t)&&(this.loadLanguagePromise=this.loadLanguage(t),await this.loadLanguagePromise,this.loadLanguagePromise=null),o();let n=this.performHighlights(e,t,r);return this.addToCache(i,n),n}finally{this.highlightQueue.delete(i)}})();return this.highlightQueue.set(i,l),l}},Qre=({code:e,language:t,className:n,children:a,preClassName:s,...o})=>{let[l,c]=i.useState(""),[u,d]=i.useState(""),[h,p]=i.useState(""),[f,m]=i.useState(""),g=function(e,t=200,r=50){let[n,a]=i.useState(e),s=i.useRef(0),o=i.useRef(null);return i.useEffect(()=>{let n=Date.now(),i=n-s.current;return o.current&&window.clearTimeout(o.current),i>=t?(a(e),s.current=n):o.current=window.setTimeout(()=>{a(e),s.current=Date.now()},r),()=>{o.current&&window.clearTimeout(o.current)}},[e,t,r]),n}(e),v=i.useRef(0),y=i.useRef(!1),b=i.useRef(null),_=i.useRef(0),[w,x]=i.useContext(yie);i.useEffect(()=>{Xre.initializeHighlighters([w,x])},[w,x]),i.useEffect(()=>{y.current=!0,b.current&&b.current.abort(),b.current=new AbortController;let e=b.current.signal;v.current&&clearTimeout(v.current);let[r,n]=(e=>{let t=e.lastIndexOf("\n");return[t>=0?e.slice(0,t+1):"",t>=0?e.slice(t+1):e]})(g),a=g.split("\n").length,{minHighlightInterval:o,debounceMs:l}=(e=>e<50?{minHighlightInterval:100,debounceMs:500}:e<150?{minHighlightInterval:500,debounceMs:800}:e<300?{minHighlightInterval:1500,debounceMs:1200}:{minHighlightInterval:Number.POSITIVE_INFINITY,debounceMs:1500})(a);if(r&&r!==h){let a=Date.now();a-_.current>o||!n?(_.current=a,Xre.highlightCode(r,t,s,e).then(([t,a])=>{y.current&&!e.aborted&&i.startTransition(()=>{c(t),d(a),p(r),m(n)})}).catch(e=>{if("AbortError"!==e.name)throw e})):m(n)}else m(n);return v.current=window.setTimeout(()=>{n&&g!==h&&!e.aborted&&Xre.highlightCode(g,t,s,e).then(([t,r])=>{y.current&&!e.aborted&&i.startTransition(()=>{c(t),d(r),p(g),m("")})}).catch(e=>{if("AbortError"!==e.name)throw e})},l),()=>{var e;y.current=!1,null==(e=b.current)||e.abort()}},[g,t,s]);let E=f?`<span class="line"><span>${(e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"))(f)}</span></span>`:"";return r.jsx(Yre.Provider,{value:{code:e},children:r.jsxs("div",{className:"my-4 w-full overflow-hidden rounded-xl border border-border","data-code-block-container":!0,"data-language":t,children:[r.jsxs("div",{className:"flex items-center justify-between bg-muted/80 p-3 text-muted-foreground text-xs","data-code-block-header":!0,"data-language":t,children:[r.jsx("span",{className:"ml-1 font-mono lowercase",children:t}),r.jsx("div",{className:"flex items-center gap-2",children:a})]}),r.jsx("div",{className:"w-full",children:r.jsxs("div",{className:"min-w-full",children:[r.jsx("div",{className:Zre("overflow-x-auto dark:hidden",n),dangerouslySetInnerHTML:{__html:E?l+E:l},"data-code-block":!0,"data-language":t,...o}),r.jsx("div",{className:Zre("hidden overflow-x-auto dark:block",n),dangerouslySetInnerHTML:{__html:E?u+E:u},"data-code-block":!0,"data-language":t,...o})]})})]})})},ene={"1c":"1c","1c-query":"1cq",abap:"abap","actionscript-3":"as",ada:"ada",adoc:"adoc","angular-html":"html","angular-ts":"ts",apache:"conf",apex:"cls",apl:"apl",applescript:"applescript",ara:"ara",asciidoc:"adoc",asm:"asm",astro:"astro",awk:"awk",ballerina:"bal",bash:"sh",bat:"bat",batch:"bat",be:"be",beancount:"beancount",berry:"berry",bibtex:"bib",bicep:"bicep",blade:"blade.php",bsl:"bsl",c:"c","c#":"cs","c++":"cpp",cadence:"cdc",cairo:"cairo",cdc:"cdc",clarity:"clar",clj:"clj",clojure:"clj","closure-templates":"soy",cmake:"cmake",cmd:"cmd",cobol:"cob",codeowners:"CODEOWNERS",codeql:"ql",coffee:"coffee",coffeescript:"coffee","common-lisp":"lisp",console:"sh",coq:"v",cpp:"cpp",cql:"cql",crystal:"cr",cs:"cs",csharp:"cs",css:"css",csv:"csv",cue:"cue",cypher:"cql",d:"d",dart:"dart",dax:"dax",desktop:"desktop",diff:"diff",docker:"dockerfile",dockerfile:"dockerfile",dotenv:"env","dream-maker":"dm",edge:"edge",elisp:"el",elixir:"ex",elm:"elm","emacs-lisp":"el",erb:"erb",erl:"erl",erlang:"erl",f:"f","f#":"fs",f03:"f03",f08:"f08",f18:"f18",f77:"f77",f90:"f90",f95:"f95",fennel:"fnl",fish:"fish",fluent:"ftl",for:"for","fortran-fixed-form":"f","fortran-free-form":"f90",fs:"fs",fsharp:"fs",fsl:"fsl",ftl:"ftl",gdresource:"tres",gdscript:"gd",gdshader:"gdshader",genie:"gs",gherkin:"feature","git-commit":"gitcommit","git-rebase":"gitrebase",gjs:"js",gleam:"gleam","glimmer-js":"js","glimmer-ts":"ts",glsl:"glsl",gnuplot:"plt",go:"go",gql:"gql",graphql:"graphql",groovy:"groovy",gts:"gts",hack:"hack",haml:"haml",handlebars:"hbs",haskell:"hs",haxe:"hx",hbs:"hbs",hcl:"hcl",hjson:"hjson",hlsl:"hlsl",hs:"hs",html:"html","html-derivative":"html",http:"http",hxml:"hxml",hy:"hy",imba:"imba",ini:"ini",jade:"jade",java:"java",javascript:"js",jinja:"jinja",jison:"jison",jl:"jl",js:"js",json:"json",json5:"json5",jsonc:"jsonc",jsonl:"jsonl",jsonnet:"jsonnet",jssm:"jssm",jsx:"jsx",julia:"jl",kotlin:"kt",kql:"kql",kt:"kt",kts:"kts",kusto:"kql",latex:"tex",lean:"lean",lean4:"lean",less:"less",liquid:"liquid",lisp:"lisp",lit:"lit",llvm:"ll",log:"log",logo:"logo",lua:"lua",luau:"luau",make:"mak",makefile:"mak",markdown:"md",marko:"marko",matlab:"m",md:"md",mdc:"mdc",mdx:"mdx",mediawiki:"wiki",mermaid:"mmd",mips:"s",mipsasm:"s",mmd:"mmd",mojo:"mojo",move:"move",nar:"nar",narrat:"narrat",nextflow:"nf",nf:"nf",nginx:"conf",nim:"nim",nix:"nix",nu:"nu",nushell:"nu",objc:"m","objective-c":"m","objective-cpp":"mm",ocaml:"ml",pascal:"pas",perl:"pl",perl6:"p6",php:"php",plsql:"pls",po:"po",polar:"polar",postcss:"pcss",pot:"pot",potx:"potx",powerquery:"pq",powershell:"ps1",prisma:"prisma",prolog:"pl",properties:"properties",proto:"proto",protobuf:"proto",ps:"ps",ps1:"ps1",pug:"pug",puppet:"pp",purescript:"purs",py:"py",python:"py",ql:"ql",qml:"qml",qmldir:"qmldir",qss:"qss",r:"r",racket:"rkt",raku:"raku",razor:"cshtml",rb:"rb",reg:"reg",regex:"regex",regexp:"regexp",rel:"rel",riscv:"s",rs:"rs",rst:"rst",ruby:"rb",rust:"rs",sas:"sas",sass:"sass",scala:"scala",scheme:"scm",scss:"scss",sdbl:"sdbl",sh:"sh",shader:"shader",shaderlab:"shader",shell:"sh",shellscript:"sh",shellsession:"sh",smalltalk:"st",solidity:"sol",soy:"soy",sparql:"rq",spl:"spl",splunk:"spl",sql:"sql","ssh-config":"config",stata:"do",styl:"styl",stylus:"styl",svelte:"svelte",swift:"swift","system-verilog":"sv",systemd:"service",talon:"talon",talonscript:"talon",tasl:"tasl",tcl:"tcl",templ:"templ",terraform:"tf",tex:"tex",tf:"tf",tfvars:"tfvars",toml:"toml",ts:"ts","ts-tags":"ts",tsp:"tsp",tsv:"tsv",tsx:"tsx",turtle:"ttl",twig:"twig",typ:"typ",typescript:"ts",typespec:"tsp",typst:"typ",v:"v",vala:"vala",vb:"vb",verilog:"v",vhdl:"vhdl",vim:"vim",viml:"vim",vimscript:"vim",vue:"vue","vue-html":"html","vue-vine":"vine",vy:"vy",vyper:"vy",wasm:"wasm",wenyan:"wy",wgsl:"wgsl",wiki:"wiki",wikitext:"wiki",wit:"wit",wl:"wl",wolfram:"wl",xml:"xml",xsl:"xsl",yaml:"yaml",yml:"yml",zenscript:"zs",zig:"zig",zsh:"zsh","":"wy"},tne=({onDownload:e,onError:t,language:n,children:a,className:s,code:o,...l})=>{let{code:c}=i.useContext(Yre),{isAnimating:u}=i.useContext(wie),d=null!=o?o:c,h=`file.${n&&n in ene?ene[n]:"txt"}`;return r.jsx("button",{className:Zre("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),disabled:u,onClick:()=>{try{Kre(h,d,"text/plain"),null==e||e()}catch(Bte){null==t||t(Bte)}},title:"Download file",type:"button",...l,children:null!=a?a:r.jsx(tr,{size:14})})},rne=({onCopy:e,onError:t,timeout:n=2e3,children:a,className:s,code:o,...l})=>{let[c,u]=i.useState(!1),d=i.useRef(0),{code:h}=i.useContext(Yre),{isAnimating:p}=i.useContext(wie),f=null!=o?o:h;i.useEffect(()=>()=>{window.clearTimeout(d.current)},[]);let m=c?rr:nr;return r.jsx("button",{className:Zre("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),disabled:p,onClick:async()=>{var r;if("undefined"!=typeof window&&null!=(r=null==navigator?void 0:navigator.clipboard)&&r.writeText)try{c||(await navigator.clipboard.writeText(f),u(!0),null==e||e(),d.current=window.setTimeout(()=>u(!1),n))}catch(Bre){null==t||t(Bre)}else null==t||t(new Error("Clipboard API not available"))},type:"button",...l,children:null!=a?a:r.jsx(m,{size:14})})},nne=/\.[^/.]+$/,ine=0,ane=({chart:e,config:t,onFullscreen:n,onExit:a,className:s,...o})=>{let[l,c]=i.useState(!1),{isAnimating:u}=i.useContext(wie),d=()=>{c(!l)};return i.useEffect(()=>{if(l){1===(ine+=1)&&(document.body.style.overflow="hidden");let e=e=>{"Escape"===e.key&&c(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e),0===(ine=Math.max(0,ine-1))&&(document.body.style.overflow="")}}},[l]),i.useEffect(()=>{l?null==n||n():a&&a()},[l,n,a]),r.jsxs(r.Fragment,{children:[r.jsx("button",{className:Zre("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",s),disabled:u,onClick:d,title:"View fullscreen",type:"button",...o,children:r.jsx(ir,{size:14})}),l&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/95 backdrop-blur-sm",onClick:d,onKeyDown:e=>{"Escape"===e.key&&d()},role:"button",tabIndex:0,children:[r.jsx("button",{className:"absolute top-4 right-4 z-10 rounded-md p-2 text-muted-foreground transition-all hover:bg-muted hover:text-foreground",onClick:d,title:"Exit fullscreen",type:"button",children:r.jsx(ar,{size:20})}),r.jsx("div",{className:"flex h-full w-full items-center justify-center p-12",onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),role:"presentation",children:r.jsx("div",{className:"max-h-full max-w-full",children:r.jsx(sne,{chart:e,className:"[&>div]:my-0 [&_svg]:h-auto [&_svg]:min-h-[60vh] [&_svg]:w-auto [&_svg]:min-w-[60vw]",config:t})})})]})]})},sne=({chart:e,className:t,config:n})=>{let[a,s]=i.useState(null),[o,l]=i.useState(!0),[c,u]=i.useState(""),[d,h]=i.useState("");if(i.useEffect(()=>{(async()=>{try{s(null),l(!0);let t=await(async e=>{let t={startOnLoad:!1,theme:"default",securityLevel:"strict",fontFamily:"monospace",suppressErrorRendering:!0,...e},r=(await cn(async()=>{const{default:e}=await import("./chunk-DtLV2ZA1.js").then(e=>e.bB);return{default:e}},__vite__mapDeps([97,98]))).default;return r.initialize(t),r})(n),r=e.split("").reduce((e,t)=>(e<<5)-e+t.charCodeAt(0)|0,0),i=`mermaid-${Math.abs(r)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:a}=await t.render(i,e);u(a),h(a)}catch(Q9){if(!d&&!c){let t=Q9 instanceof Error?Q9.message:"Failed to render Mermaid chart";s(t)}}finally{l(!1)}})()},[e,n]),o&&!c&&!d)return r.jsx("div",{className:Zre("my-4 flex justify-center p-4",t),children:r.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[r.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-current border-b-2"}),r.jsx("span",{className:"text-sm",children:"Loading diagram..."})]})});if(a&&!c&&!d)return r.jsxs("div",{className:Zre("rounded-lg border border-red-200 bg-red-50 p-4",t),children:[r.jsxs("p",{className:"font-mono text-red-700 text-sm",children:["Mermaid Error: ",a]}),r.jsxs("details",{className:"mt-2",children:[r.jsx("summary",{className:"cursor-pointer text-red-600 text-xs",children:"Show Code"}),r.jsx("pre",{className:"mt-2 overflow-x-auto rounded bg-red-100 p-2 text-red-800 text-xs",children:e})]})]});let p=c||d;return r.jsx("div",{"aria-label":"Mermaid chart",className:Zre("my-4 flex justify-center",t),dangerouslySetInnerHTML:{__html:p},role:"img"})};function one(e){var t,r;let n=[],i=[],a=e.querySelectorAll("thead th");for(let o of a)n.push((null==(t=o.textContent)?void 0:t.trim())||"");let s=e.querySelectorAll("tbody tr");for(let o of s){let e=[],t=o.querySelectorAll("td");for(let n of t)e.push((null==(r=n.textContent)?void 0:r.trim())||"");i.push(e)}return{headers:n,rows:i}}function lne(e){let{headers:t,rows:r}=e,n=e=>e.includes(",")||e.includes('"')||e.includes("\n")?`"${e.replace(/"/g,'""')}"`:e,i=[];t.length>0&&i.push(t.map(n).join(","));for(let a of r)i.push(a.map(n).join(","));return i.join("\n")}var cne=({children:e,className:t,onCopy:n,onError:a,timeout:s=2e3})=>{let[o,l]=i.useState(!1),[c,u]=i.useState(!1),d=i.useRef(null),h=i.useRef(0),{isAnimating:p}=i.useContext(wie),f=async e=>{var t,r;if("undefined"!=typeof window&&null!=(t=null==navigator?void 0:navigator.clipboard)&&t.write)try{let t=null==(r=d.current)?void 0:r.closest('[data-streamdown="table-wrapper"]'),i=null==t?void 0:t.querySelector("table");if(!i)return void(null==a||a(new Error("Table not found")));let o=one(i),c="csv"===e?lne(o):function(e){let{headers:t,rows:r}=e,n=e=>e.replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r"),i=[];t.length>0&&i.push(t.map(n).join("\t"));for(let a of r)i.push(a.map(n).join("\t"));return i.join("\n")}(o),p=new ClipboardItem({"text/plain":new Blob([c],{type:"text/plain"}),"text/html":new Blob([i.outerHTML],{type:"text/html"})});await navigator.clipboard.write([p]),u(!0),l(!1),null==n||n(e),h.current=window.setTimeout(()=>u(!1),s)}catch(Lre){null==a||a(Lre)}else null==a||a(new Error("Clipboard API not available"))};i.useEffect(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e),window.clearTimeout(h.current)}},[]);let m=c?rr:nr;return r.jsxs("div",{className:"relative",ref:d,children:[r.jsx("button",{className:Zre("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:p,onClick:()=>l(!o),title:"Copy table",type:"button",children:null!=e?e:r.jsx(m,{size:14})}),o&&r.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[r.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>f("csv"),type:"button",children:"CSV"}),r.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>f("tsv"),type:"button",children:"TSV"})]})]})},une=({children:e,className:t,onDownload:n,onError:a})=>{let[s,o]=i.useState(!1),l=i.useRef(null),{isAnimating:c}=i.useContext(wie),u=e=>{var t;try{let r=null==(t=l.current)?void 0:t.closest('[data-streamdown="table-wrapper"]'),i=null==r?void 0:r.querySelector("table");if(!i)return void(null==a||a(new Error("Table not found")));let s=one(i),c="csv"===e?lne(s):function(e){let{headers:t,rows:r}=e;if(0===t.length)return"";let n=[],i=t.map(e=>e.replace(/\|/g,"\\|"));n.push(`| ${i.join(" | ")} |`),n.push(`| ${t.map(()=>"---").join(" | ")} |`);for(let a of r){let e=[...a];for(;e.length<t.length;)e.push("");let r=e.map(e=>e.replace(/\|/g,"\\|"));n.push(`| ${r.join(" | ")} |`)}return n.join("\n")}(s);Kre("table."+("csv"===e?"csv":"md"),c,"csv"===e?"text/csv":"text/markdown"),o(!1),null==n||n(e)}catch(r){null==a||a(r)}};return i.useEffect(()=>{let e=e=>{l.current&&!l.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),r.jsxs("div",{className:"relative",ref:l,children:[r.jsx("button",{className:Zre("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:c,onClick:()=>o(!s),title:"Download table",type:"button",children:null!=e?e:r.jsx(tr,{size:14})}),s&&r.jsxs("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] overflow-hidden rounded-md border border-border bg-background shadow-lg",children:[r.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>u("csv"),type:"button",children:"CSV"}),r.jsx("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>u("markdown"),type:"button",children:"Markdown"})]})]})},dne=/language-([^\s]+)/;function hne(e,t){if(!(null!=e&&e.position||null!=t&&t.position))return!0;if(null==e||!e.position||null==t||!t.position)return!1;let r=e.position.start,n=t.position.start,i=e.position.end,a=t.position.end;return(null==r?void 0:r.line)===(null==n?void 0:n.line)&&(null==r?void 0:r.column)===(null==n?void 0:n.column)&&(null==i?void 0:i.line)===(null==a?void 0:a.line)&&(null==i?void 0:i.column)===(null==a?void 0:a.column)}function pne(e,t){return e.className===t.className&&hne(e.node,t.node)}var fne=(e,t)=>"boolean"==typeof e?e:!1!==e[t],mne=(e,t)=>{if("boolean"==typeof e)return e;let r=e.mermaid;return!1!==r&&(!0===r||void 0===r||!1!==r[t])},gne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("ol",{className:Zre("ml-4 list-outside list-decimal whitespace-normal",t),"data-streamdown":"ordered-list",...i,children:e}),(e,t)=>pne(e,t));gne.displayName="MarkdownOl";var vne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("li",{className:Zre("py-1",t),"data-streamdown":"list-item",...i,children:e}),(e,t)=>e.className===t.className&&hne(e.node,t.node));vne.displayName="MarkdownLi";var yne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("ul",{className:Zre("ml-4 list-outside list-disc whitespace-normal",t),"data-streamdown":"unordered-list",...i,children:e}),(e,t)=>pne(e,t));yne.displayName="MarkdownUl";var bne=i.memo(({className:e,node:t,...n})=>r.jsx("hr",{className:Zre("my-6 border-border",e),"data-streamdown":"horizontal-rule",...n}),(e,t)=>pne(e,t));bne.displayName="MarkdownHr";var _ne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("span",{className:Zre("font-semibold",t),"data-streamdown":"strong",...i,children:e}),(e,t)=>pne(e,t));_ne.displayName="MarkdownStrong";var wne=i.memo(({children:e,className:t,href:n,node:i,...a})=>{let s="streamdown:incomplete-link"===n;return r.jsx("a",{className:Zre("wrap-anywhere font-medium text-primary underline",t),"data-incomplete":s,"data-streamdown":"link",href:n,rel:"noreferrer",target:"_blank",...a,children:e})},(e,t)=>pne(e,t)&&e.href===t.href);wne.displayName="MarkdownA";var xne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("h1",{className:Zre("mt-6 mb-2 font-semibold text-3xl",t),"data-streamdown":"heading-1",...i,children:e}),(e,t)=>pne(e,t));xne.displayName="MarkdownH1";var Ene=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("h2",{className:Zre("mt-6 mb-2 font-semibold text-2xl",t),"data-streamdown":"heading-2",...i,children:e}),(e,t)=>pne(e,t));Ene.displayName="MarkdownH2";var kne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("h3",{className:Zre("mt-6 mb-2 font-semibold text-xl",t),"data-streamdown":"heading-3",...i,children:e}),(e,t)=>pne(e,t));kne.displayName="MarkdownH3";var Sne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("h4",{className:Zre("mt-6 mb-2 font-semibold text-lg",t),"data-streamdown":"heading-4",...i,children:e}),(e,t)=>pne(e,t));Sne.displayName="MarkdownH4";var Ane=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("h5",{className:Zre("mt-6 mb-2 font-semibold text-base",t),"data-streamdown":"heading-5",...i,children:e}),(e,t)=>pne(e,t));Ane.displayName="MarkdownH5";var Tne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("h6",{className:Zre("mt-6 mb-2 font-semibold text-sm",t),"data-streamdown":"heading-6",...i,children:e}),(e,t)=>pne(e,t));Tne.displayName="MarkdownH6";var Nne=i.memo(({children:e,className:t,node:n,...a})=>{let s=i.useContext(_ie),o=fne(s,"table");return r.jsxs("div",{className:"my-4 flex flex-col space-y-2","data-streamdown":"table-wrapper",children:[o&&r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx(cne,{}),r.jsx(une,{})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsx("table",{className:Zre("w-full border-collapse border border-border",t),"data-streamdown":"table",...a,children:e})})]})},(e,t)=>pne(e,t));Nne.displayName="MarkdownTable";var Ine=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("thead",{className:Zre("bg-muted/80",t),"data-streamdown":"table-header",...i,children:e}),(e,t)=>pne(e,t));Ine.displayName="MarkdownThead";var Mne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("tbody",{className:Zre("divide-y divide-border bg-muted/40",t),"data-streamdown":"table-body",...i,children:e}),(e,t)=>pne(e,t));Mne.displayName="MarkdownTbody";var Cne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("tr",{className:Zre("border-border border-b",t),"data-streamdown":"table-row",...i,children:e}),(e,t)=>pne(e,t));Cne.displayName="MarkdownTr";var jne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("th",{className:Zre("whitespace-nowrap px-4 py-2 text-left font-semibold text-sm",t),"data-streamdown":"table-header-cell",...i,children:e}),(e,t)=>pne(e,t));jne.displayName="MarkdownTh";var One=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("td",{className:Zre("px-4 py-2 text-sm",t),"data-streamdown":"table-cell",...i,children:e}),(e,t)=>pne(e,t));One.displayName="MarkdownTd";var Rne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("blockquote",{className:Zre("my-4 border-muted-foreground/30 border-l-4 pl-4 text-muted-foreground italic",t),"data-streamdown":"blockquote",...i,children:e}),(e,t)=>pne(e,t));Rne.displayName="MarkdownBlockquote";var Lne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("sup",{className:Zre("text-sm",t),"data-streamdown":"superscript",...i,children:e}),(e,t)=>pne(e,t));Lne.displayName="MarkdownSup";var Pne=i.memo(({children:e,className:t,node:n,...i})=>r.jsx("sub",{className:Zre("text-sm",t),"data-streamdown":"subscript",...i,children:e}),(e,t)=>pne(e,t));Pne.displayName="MarkdownSub";var Dne=i.memo(({children:e,className:t,node:n,...a})=>{if("data-footnotes"in a){let n=e=>{var t,r;if(!i.isValidElement(e))return!1;let n=Array.isArray(e.props.children)?e.props.children:[e.props.children],a=!1,s=!1;for(let o of n)if(o)if("string"==typeof o)""!==o.trim()&&(a=!0);else if(i.isValidElement(o))if(void 0!==(null==(t=o.props)?void 0:t["data-footnote-backref"]))s=!0;else{let e=Array.isArray(o.props.children)?o.props.children:[o.props.children];for(let t of e){if("string"==typeof t&&""!==t.trim()){a=!0;break}if(i.isValidElement(t)&&void 0===(null==(r=t.props)?void 0:r["data-footnote-backref"])){a=!0;break}}}return s&&!a},s=Array.isArray(e)?e.map(e=>{if(!i.isValidElement(e))return e;if(e.type===gne){let t=(Array.isArray(e.props.children)?e.props.children:[e.props.children]).filter(e=>!n(e));return 0===t.length?null:{...e,props:{...e.props,children:t}}}return e}):e;return(Array.isArray(s)?s.some(e=>null!==e):null!==s)?r.jsx("section",{className:t,...a,children:s}):null}return r.jsx("section",{className:t,...a,children:e})},(e,t)=>pne(e,t));Dne.displayName="MarkdownSection";var $ne=i.memo(({node:e,className:t,children:n,...a})=>{var s,o,l;let c=(null==(s=null==e?void 0:e.position)?void 0:s.start.line)===(null==(o=null==e?void 0:e.position)?void 0:o.end.line),u=i.useContext(bie),d=i.useContext(_ie);if(c)return r.jsx("code",{className:Zre("rounded bg-muted px-1.5 py-0.5 font-mono text-sm",t),"data-streamdown":"inline-code",...a,children:n});let h=null==t?void 0:t.match(dne),p=null!=(l=null==h?void 0:h.at(1))?l:"",f="";if(i.isValidElement(n)&&n.props&&"object"==typeof n.props&&"children"in n.props&&"string"==typeof n.props.children?f=n.props.children:"string"==typeof n&&(f=n),"mermaid"===p){let e=fne(d,"mermaid"),n=mne(d,"download"),i=mne(d,"copy"),a=mne(d,"fullscreen");return r.jsxs("div",{className:Zre("group relative my-4 h-auto rounded-xl border p-4",t),"data-streamdown":"mermaid-block",children:[e&&(n||i||a)&&r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n&&r.jsx(tne,{code:f,language:p}),i&&r.jsx(rne,{code:f}),a&&r.jsx(ane,{chart:f,config:u})]}),r.jsx(sne,{chart:f,config:u})]})}let m=fne(d,"code");return r.jsx(Qre,{className:Zre("overflow-x-auto border-border border-t",t),code:f,"data-language":p,"data-streamdown":"code-block",language:p,preClassName:"overflow-x-auto font-mono text-xs p-4 bg-muted/40",children:m&&r.jsxs(r.Fragment,{children:[r.jsx(tne,{code:f,language:p}),r.jsx(rne,{})]})})},(e,t)=>e.className===t.className&&hne(e.node,t.node));$ne.displayName="MarkdownCode";var zne=i.memo(({node:e,className:t,src:n,alt:i,...a})=>n?r.jsxs("div",{className:"group relative my-4 inline-block","data-streamdown":"image-wrapper",children:[r.jsx("img",{alt:i,className:Zre("max-w-full rounded-lg",t),"data-streamdown":"image",src:n,...a}),r.jsx("div",{className:"pointer-events-none absolute inset-0 hidden rounded-lg bg-black/10 group-hover:block"}),r.jsx("button",{className:Zre("absolute right-2 bottom-2 flex h-8 w-8 cursor-pointer items-center justify-center rounded-md border border-border bg-background/90 shadow-sm backdrop-blur-sm transition-all duration-200 hover:bg-background","opacity-0 group-hover:opacity-100"),onClick:async()=>{if(n)try{let e=await(await fetch(n)).blob(),t=new URL(n,window.location.origin).pathname.split("/").pop()||"",r=t.split(".").pop(),a=t.includes(".")&&void 0!==r&&r.length<=4,s="";if(a)s=t;else{let r=e.type,n="png";r.includes("jpeg")||r.includes("jpg")?n="jpg":r.includes("png")?n="png":r.includes("svg")?n="svg":r.includes("gif")?n="gif":r.includes("webp")&&(n="webp"),s=`${(i||t||"image").replace(nne,"")}.${n}`}Kre(s,e,e.type)}catch(s9){console.error("Failed to download image:",s9)}},title:"Download image",type:"button",children:r.jsx(tr,{size:14})})]}):null,(e,t)=>e.className===t.className&&hne(e.node,t.node));zne.displayName="MarkdownImg";var Bne=i.memo(({children:e,className:t,node:n,...a})=>{var s;let o=(Array.isArray(e)?e:[e]).filter(e=>null!=e&&""!==e);return 1===o.length&&i.isValidElement(o[0])&&"img"===(null==(s=o[0].props.node)?void 0:s.tagName)?r.jsx(r.Fragment,{children:e}):r.jsx("p",{className:t,...a,children:e})},(e,t)=>pne(e,t));Bne.displayName="MarkdownParagraph";var Une={ol:gne,li:vne,ul:yne,hr:bne,strong:_ne,a:wne,h1:xne,h2:Ene,h3:kne,h4:Sne,h5:Ane,h6:Tne,table:Nne,thead:Ine,tbody:Mne,tr:Cne,th:jne,td:One,blockquote:Rne,code:$ne,img:zne,pre:({children:e})=>e,sup:Lne,sub:Pne,p:Bne,section:Dne},Fne=/\[\^[^\]\s]{1,200}\](?!:)/,Hne=/\[\^[^\]\s]{1,200}\]:/,Gne=/<\/(\w+)>/,qne=/<(\w+)[\s>]/,Vne=e=>{let t=Fne.test(e),r=Hne.test(e);if(t||r)return[e];let n=Ure.lex(e,{gfm:!0}),i=[],a=[];for(let s of n){let e=s.raw;if(a.length>0){if(i[i.length-1]+=e,"html"===s.type){let t=e.match(Gne);if(t){let e=t[1];a.at(-1)===e&&a.pop()}}}else{if("html"===s.type&&s.block){let t=e.match(qne);if(t){let r=t[1];e.includes(`</${r}>`)||a.push(r)}}if("$$"===e.trim()&&i.length>0){let t=i.at(-1);if(!t){i.push(e);continue}let r=t.trimStart().startsWith("$$"),n=(t.match(/\$\$/g)||[]).length;if(r&&n%2==1){i[i.length-1]=t+e;continue}}if(i.length>0&&e.trimEnd().endsWith("$$")){let t=i.at(-1);if(!t){i.push(e);continue}let r=t.trimStart().startsWith("$$"),n=(t.match(/\$\$/g)||[]).length,a=(e.match(/\$\$/g)||[]).length;if(r&&n%2==1&&!e.trimStart().startsWith("$$")&&1===a){i[i.length-1]=t+e;continue}}i.push(e)}}return i},Wne=/(!?\[)([^\]]*?)$/,Zne=/(\*\*)([^*]*?)$/,Kne=/(__)([^_]*?)$/,Yne=/(\*\*\*)([^*]*?)$/,Jne=/(\*)([^*]*?)$/,Xne=/(_)([^_]*?)$/,Qne=/(`)([^`]*?)$/,eie=/(~~)([^~]*?)$/,tie=/(!?)\[([^\]]+)\]\(([^)]+)$/,rie=/^[\s_~*`]*$/,nie=/^[\s]*[-*+][\s]+$/,iie=/[\p{L}\p{N}_]/u,aie=/\n+$/,sie=/^```[^`\n]*```?$/,oie=/^\*{4,}$/,lie=e=>{let t=(e.match(/```/g)||[]).length;return t>0&&t%2==0&&e.includes("\n")},cie=e=>{if(lie(e))return e;if(e.match(Jne)){let t=-1;for(let n=0;n<e.length;n++)if("*"===e[n]&&"*"!==e[n-1]&&"*"!==e[n+1]&&"\\"!==e[n-1]){let r=n>0?e[n-1]:"",i=n<e.length-1?e[n+1]:"";if(r&&i&&iie.test(r)&&iie.test(i))continue;t=n;break}if(-1===t)return e;let r=e.substring(t+1);if(!r||rie.test(r))return e;if((e=>e.split("").reduce((t,r,n)=>{if("*"===r){let r=e[n-1],i=e[n+1];if("\\"===r||r&&i&&iie.test(r)&&iie.test(i))return t;let a=n;for(let t=n-1;t>=0;t--){if("\n"===e[t]){a=t+1;break}if(0===t){a=0;break}}if(""===e.substring(a,n).trim()&&(" "===i||"\t"===i))return t;if("*"!==r&&"*"!==i)return t+1}return t},0))(e)%2==1)return`${e}*`}return e},uie=(e,t)=>{let r=!1,n=!1;for(let i=0;i<e.length&&i<t;i+=1)"\\"!==e[i]||"$"!==e[i+1]?"$"===e[i]&&("$"===e[i+1]?(n=!n,i+=1,r=!1):n||(r=!r)):i+=1;return r||n},die=e=>{if(lie(e))return e;if(e.match(Xne)){let t=-1;for(let n=0;n<e.length;n++)if("_"===e[n]&&"_"!==e[n-1]&&"_"!==e[n+1]&&"\\"!==e[n-1]&&!uie(e,n)){let r=n>0?e[n-1]:"",i=n<e.length-1?e[n+1]:"";if(r&&i&&iie.test(r)&&iie.test(i))continue;t=n;break}if(-1===t)return e;let r=e.substring(t+1);if(!r||rie.test(r))return e;if((e=>e.split("").reduce((t,r,n)=>{if("_"===r){let r=e[n-1],i=e[n+1];if("\\"===r||uie(e,n)||r&&i&&iie.test(r)&&iie.test(i))return t;if("_"!==r&&"_"!==i)return t+1}return t},0))(e)%2==1){let t=e.match(aie);return t?`${e.slice(0,-t[0].length)}_${t[0]}`:`${e}_`}}return e},hie=(e,t)=>{let r="```"===e.substring(t,t+3),n=t>0&&"```"===e.substring(t-1,t+2),i=t>1&&"```"===e.substring(t-2,t+1);return r||n||i},pie=e=>{if(e.match(sie)&&!e.includes("\n"))return e.endsWith("``")&&!e.endsWith("```")?`${e}\``:e;let t=(e.match(/```/g)||[]).length,r=t%2==1;if(t>0&&t%2==0&&e.includes("\n")||(e.endsWith("```\n")||e.endsWith("```"))&&t%2==0)return e;let n=e.match(Qne);if(n&&!r){let t=n[2];if(!t||rie.test(t))return e;if((e=>{let t=0;for(let r=0;r<e.length;r+=1)"`"===e[r]&&!hie(e,r)&&(t+=1);return t})(e)%2==1)return`${e}\``}return e},fie=e=>{if(lie(e)||oie.test(e))return e;let t=e.match(Yne);if(t){let r=t[2];if(!r||rie.test(r))return e;if((e=>{let t=0,r=e.match(/\*+/g)||[];for(let n of r){let e=n.length;e>=3&&(t+=Math.floor(e/3))}return t})(e)%2==1)return`${e}***`}return e},mie=e=>{if(!e||"string"!=typeof e)return e;let t=e,r=(e=>{let t=e.match(tie);if(t){let r="!"===t[1],n=t[2],i=t[3],a=e.lastIndexOf(`${r?"!":""}[${n}](${i}`),s=e.substring(0,a);return r?s:`${s}[${n}](streamdown:incomplete-link)`}let r=e.match(Wne);if(r){if(r[1].startsWith("!")){let t=e.lastIndexOf(r[1]);return e.substring(0,t)}return`${e}](streamdown:incomplete-link)`}return e})(t);return r.endsWith("](streamdown:incomplete-link)")?r:(t=r,t=fie(t),t=(e=>{if(lie(e))return e;let t=e.match(Zne);if(t){let r=t[2];if(!r||rie.test(r))return e;let n=e.lastIndexOf(t[1]),i=e.substring(0,n).lastIndexOf("\n"),a=-1===i?0:i+1,s=e.substring(a,n);if(nie.test(s)&&r.includes("\n"))return e;if((e.match(/\*\*/g)||[]).length%2==1)return`${e}**`}return e})(t),t=(e=>{let t=e.match(Kne);if(t){let r=t[2];if(!r||rie.test(r))return e;let n=e.lastIndexOf(t[1]),i=e.substring(0,n).lastIndexOf("\n"),a=-1===i?0:i+1,s=e.substring(a,n);if(nie.test(s)&&r.includes("\n"))return e;if((e.match(/__/g)||[]).length%2==1)return`${e}__`}return e})(t),t=cie(t),t=die(t),t=pie(t),t=(e=>{let t=e.match(eie);if(t){let r=t[2];if(!r||rie.test(r))return e;if((e.match(/~~/g)||[]).length%2==1)return`${e}~~`}return e})(t),t=(e=>{if((e.match(/\$\$/g)||[]).length%2==0)return e;let t=e.indexOf("$$");return-1===t||-1===e.indexOf("\n",t)||e.endsWith("\n")?`${e}$$`:`${e}\n$$`})(t),t)},gie={harden:[function({defaultOrigin:e="",allowedLinkPrefixes:t=[],allowedImagePrefixes:r=[],allowDataImages:n=!1,blockedImageClass:i="inline-block bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-3 py-1 rounded text-sm",blockedLinkClass:a="text-gray-500"}){const s=t.length&&!t.every(e=>"*"===e),o=r.length&&!r.every(e=>"*"===e);if(!e&&(s||o))throw new Error("defaultOrigin is required when allowedLinkPrefixes or allowedImagePrefixes are provided");return s=>{const o=xW(e,t,r,n,i,a);yt(s,o)}},{allowedImagePrefixes:["*"],allowedLinkPrefixes:["*"],defaultOrigin:void 0,allowDataImages:!0}],raw:function(e){return function(t,r){return O4(t,{...e,file:r})}},katex:[sQ,{errorColor:"var(--color-muted-foreground)"}]},vie={gfm:[function(e){const t=e||x3,r=this.data(),n=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);n.push(function(e){return Xt([{text:X6},{document:{91:{name:"gfmFootnoteDefinition",tokenize:c3,continuation:{tokenize:u3},exit:d3}},text:{91:{name:"gfmFootnoteCall",tokenize:l3},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:s3,resolveTo:o3}}},h3(e),{flow:{null:{name:"table",tokenize:m3,resolveAll:g3}}},{text:{91:_3}}])}(t)),i.push([{transforms:[F2],enter:{literalAutolink:P2,literalAutolinkEmail:D2,literalAutolinkHttp:D2,literalAutolinkWww:D2},exit:{literalAutolink:U2,literalAutolinkEmail:B2,literalAutolinkHttp:$2,literalAutolinkWww:z2}},{enter:{gfmFootnoteCallString:V2,gfmFootnoteCall:W2,gfmFootnoteDefinitionLabelString:Z2,gfmFootnoteDefinition:K2},exit:{gfmFootnoteCallString:Y2,gfmFootnoteCall:J2,gfmFootnoteDefinitionLabelString:X2,gfmFootnoteDefinition:Q2}},{canContainEols:["delete"],enter:{strikethrough:a6},exit:{strikethrough:s6}},{enter:{table:O6,tableData:D6,tableHeader:D6,tableRow:L6},exit:{codeText:$6,table:R6,tableData:P6,tableHeader:P6,tableRow:P6}},{exit:{taskListCheckValueChecked:U6,taskListCheckValueUnchecked:U6,paragraph:F6}}]),a.push(function(e){return{extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:R2,notInConstruct:L2},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:R2,notInConstruct:L2},{character:":",before:"[ps]",after:"\\/",inConstruct:R2,notInConstruct:L2}]},t6(e),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:i6}],handlers:{delete:o6}},B6(e),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:H6}}]}}(t))},{}],math:[function(e){const t=e||N3,r=this.data(),n=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);n.push(function(e){return{flow:{36:E3},text:{36:S3(e)}}}(t)),i.push(function(){return{enter:{mathFlow:function(e){this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[{type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]}]}},e)},mathFlowFenceMeta:function(){this.buffer()},mathText:function(e){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},e),this.buffer()}},exit:{mathFlow:function(e){const t=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),r=this.stack[this.stack.length-1];It("math"===r.type),this.exit(e),r.value=t;const n=r.data.hChildren[0];It("element"===n.type),It("code"===n.tagName),n.children.push({type:"text",value:t}),this.data.mathFlowInside=void 0},mathFlowFence:function(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)},mathFlowFenceMeta:function(){const e=this.resume(),t=this.stack[this.stack.length-1];It("math"===t.type),t.meta=e},mathFlowValue:e,mathText:function(e){const t=this.resume(),r=this.stack[this.stack.length-1];It("inlineMath"===r.type),this.exit(e),r.value=t,r.data.hChildren.push({type:"text",value:t})},mathTextData:e}};function e(e){this.config.enter.data.call(this,e),this.config.exit.data.call(this,e)}}()),a.push(function(e){let t=(e||{}).singleDollarTextMath;return null==t&&(t=!0),r.peek=function(){return"$"},{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:"\n",inConstruct:"mathFlowMeta"},{character:"$",after:t?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:function(e,t,r,n){const i=e.value||"",a=r.createTracker(n),s="$".repeat(Math.max(m6(i,"$")+1,2)),o=r.enter("mathFlow");let l=a.move(s);if(e.meta){const t=r.enter("mathFlowMeta");l+=a.move(r.safe(e.meta,{after:"\n",before:l,encode:["$"],...a.current()})),t()}return l+=a.move("\n"),i&&(l+=a.move(i+"\n")),l+=a.move(s),o(),l},inlineMath:r}};function r(e,r,n){let i=e.value||"",a=1;for(t||a++;new RegExp("(^|[^$])"+"\\$".repeat(a)+"([^$]|$)").test(i);)a++;const s="$".repeat(a);/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^\$|\$$/.test(i))&&(i=" "+i+" ");let o=-1;for(;++o<n.unsafe.length;){const e=n.unsafe[o];if(!e.atBreak)continue;const t=n.compilePattern(e);let r;for(;r=t.exec(i);){let e=r.index;10===i.codePointAt(e)&&13===i.codePointAt(e-1)&&e--,i=i.slice(0,e)+" "+i.slice(r.index+1)}}return s+i+s}}(t))},{singleDollarTextMath:!1}],cjkFriendly:[function(){const e=this.data();(e.micromarkExtensions||(e.micromarkExtensions=[])).push({text:{[W4]:T2,[Z4]:T2},insideSpan:{null:[T2]}})},{}],cjkFriendlyGfmStrikethrough:[function(e){const t=this.data();(t.micromarkExtensions||(t.micromarkExtensions=[])).push(I2(e))},{}]},yie=i.createContext(["github-light","github-dark"]),bie=i.createContext(void 0),_ie=i.createContext(!0),wie=i.createContext({isAnimating:!1}),xie=i.memo(({content:e,shouldParseIncompleteMarkdown:t,...n})=>{let a=i.useMemo(()=>"string"==typeof e&&t?mie(e.trim()):e,[e,t]);return r.jsx(er,{...n,children:a})},(e,t)=>e.content===t.content);xie.displayName="Block";var Eie=["github-light","github-dark"],kie=i.memo(({children:e,parseIncompleteMarkdown:t=!0,components:n,rehypePlugins:a=Object.values(gie),remarkPlugins:s=Object.values(vie),className:o,shikiTheme:l=Eie,mermaidConfig:c,controls:u=!0,isAnimating:d=!1,urlTransform:h=e=>e,BlockComponent:p=xie,parseMarkdownIntoBlocksFn:f=Vne,...m})=>{let g=i.useId(),v=i.useMemo(()=>f("string"==typeof e?e:""),[e,f]);i.useEffect(()=>{Array.isArray(a)&&a.some(e=>Array.isArray(e)?e[0]===sQ:e===sQ)&&cn(()=>Promise.resolve({}),__vite__mapDeps([99]))},[a]);let y=i.useMemo(()=>({isAnimating:d}),[d]);return r.jsx(yie.Provider,{value:l,children:r.jsx(bie.Provider,{value:c,children:r.jsx(_ie.Provider,{value:u,children:r.jsx(wie.Provider,{value:y,children:r.jsx("div",{className:Zre("space-y-4",o),children:v.map((e,i)=>r.jsx(p,{components:{...Une,...n},content:e,index:i,rehypePlugins:a,remarkPlugins:s,shouldParseIncompleteMarkdown:t,urlTransform:h,...m},`${g}-block-${i}`))})})})})})},(e,t)=>e.children===t.children&&e.shikiTheme===t.shikiTheme&&e.isAnimating===t.isAnimating);kie.displayName="Streamdown";const Sie=i.memo(({className:e,shikiTheme:t=["github-dark","github-dark"],...n})=>r.jsx(kie,{className:Bi("size-full [&>*:first-child]:mt-0 [&>*:last-child]:mb-0",e),shikiTheme:t,...n}),(e,t)=>e.children===t.children&&e.className===t.className&&e.isAnimating===t.isAnimating&&JSON.stringify(e.shikiTheme)===JSON.stringify(t.shikiTheme));Sie.displayName="Response";
/*!---------------------------------------------------------------------------------------------
 *  Copyright (c) StackBlitz. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const Aie={damping:.7,stiffness:.05,mass:1.25},Tie=1e3/60;let Nie=!1;globalThis.document?.addEventListener("mousedown",()=>{Nie=!0}),globalThis.document?.addEventListener("mouseup",()=>{Nie=!1}),globalThis.document?.addEventListener("click",()=>{Nie=!1});const Iie=(e={})=>{const[t,r]=i.useState(!1),[n,a]=i.useState(!1!==e.initial),[s,o]=i.useState(!1),l=i.useRef(null);l.current=e;const c=i.useCallback(()=>{if(!Nie)return!1;const e=window.getSelection();if(!e||!e.rangeCount)return!1;const t=e.getRangeAt(0);return t.commonAncestorContainer.contains(v.current)||v.current?.contains(t.commonAncestorContainer)},[]),u=i.useCallback(e=>{h.isAtBottom=e,a(e)},[]),d=i.useCallback(e=>{h.escapedFromLock=e,r(e)},[]),h=i.useMemo(()=>{let r;return{escapedFromLock:t,isAtBottom:n,resizeDifference:0,accumulated:0,velocity:0,listeners:new Set,get scrollTop(){return v.current?.scrollTop??0},set scrollTop(e){v.current&&(v.current.scrollTop=e,h.ignoreScrollToTop=v.current.scrollTop)},get targetScrollTop(){return v.current&&y.current?v.current.scrollHeight-1-v.current.clientHeight:0},get calculatedTargetScrollTop(){if(!v.current||!y.current)return 0;const{targetScrollTop:t}=this;if(!e.targetScrollTop)return t;if(r?.targetScrollTop===t)return r.calculatedScrollTop;const n=Math.max(Math.min(e.targetScrollTop(t,{scrollElement:v.current,contentElement:y.current}),t),0);return r={targetScrollTop:t,calculatedScrollTop:n},requestAnimationFrame(()=>{r=void 0}),n},get scrollDifference(){return this.calculatedTargetScrollTop-this.scrollTop},get isNearBottom(){return this.scrollDifference<=70}}},[]),p=i.useCallback((e={})=>{"string"==typeof e&&(e={animation:e}),e.preserveScrollPosition||u(!0);const t=Date.now()+(Number(e.wait)||0),r=jie(l.current,e.animation),{ignoreEscapes:n=!1}=e;let i,a=h.calculatedTargetScrollTop;e.duration instanceof Promise?e.duration.finally(()=>{i=Date.now()}):i=t+(e.duration??0);const s=async()=>{const e=new Promise(requestAnimationFrame).then(()=>{if(!h.isAtBottom)return h.animation=void 0,!1;const{scrollTop:o}=h,u=performance.now(),d=(u-(h.lastTick??u))/Tie;if(h.animation||(h.animation={behavior:r,promise:e,ignoreEscapes:n}),h.animation.behavior===r&&(h.lastTick=u),c())return s();if(t>Date.now())return s();if(o<Math.min(a,h.calculatedTargetScrollTop)){if(h.animation?.behavior===r){if("instant"===r)return h.scrollTop=h.calculatedTargetScrollTop,s();h.velocity=(r.damping*h.velocity+r.stiffness*h.scrollDifference)/r.mass,h.accumulated+=h.velocity*d,h.scrollTop+=h.accumulated,h.scrollTop!==o&&(h.accumulated=0)}return s()}return i>Date.now()?(a=h.calculatedTargetScrollTop,s()):(h.animation=void 0,h.scrollTop<h.calculatedTargetScrollTop?p({animation:jie(l.current,l.current.resize),ignoreEscapes:n,duration:Math.max(0,i-Date.now())||void 0}):h.isAtBottom)});return e.then(e=>(requestAnimationFrame(()=>{h.animation||(h.lastTick=void 0,h.velocity=0)}),e))};return!0!==e.wait&&(h.animation=void 0),h.animation?.behavior===r?h.animation.promise:s()},[u,c,h]),f=i.useCallback(()=>{d(!0),u(!1)},[d,u]),m=i.useCallback(({target:e})=>{if(e!==v.current)return;const{scrollTop:t,ignoreScrollToTop:r}=h;let{lastScrollTop:n=t}=h;h.lastScrollTop=t,h.ignoreScrollToTop=void 0,r&&r>t&&(n=r),o(h.isNearBottom),setTimeout(()=>{if(h.resizeDifference||t===r)return;if(c())return d(!0),void u(!1);const e=t>n,i=t<n;h.animation?.ignoreEscapes?h.scrollTop=n:(i&&(d(!0),u(!1)),e&&d(!1),!h.escapedFromLock&&h.isNearBottom&&u(!0))},1)},[d,u,c,h]),g=i.useCallback(({target:e,deltaY:t})=>{let r=e;for(;!["scroll","auto"].includes(getComputedStyle(r).overflow);){if(!r.parentElement)return;r=r.parentElement}r===v.current&&t<0&&v.current.scrollHeight>v.current.clientHeight&&!h.animation?.ignoreEscapes&&(d(!0),u(!1))},[d,u,h]),v=Mie(e=>{v.current?.removeEventListener("scroll",m),v.current?.removeEventListener("wheel",g),e?.addEventListener("scroll",m,{passive:!0}),e?.addEventListener("wheel",g,{passive:!0})},[]),y=Mie(e=>{if(h.resizeObserver?.disconnect(),!e)return;let t;h.resizeObserver=new ResizeObserver(([e])=>{const{height:r}=e.contentRect,n=r-(t??r);if(h.resizeDifference=n,h.scrollTop>h.targetScrollTop&&(h.scrollTop=h.targetScrollTop),o(h.isNearBottom),n>=0){const e=jie(l.current,t?l.current.resize:l.current.initial);p({animation:e,wait:!0,preserveScrollPosition:!0,duration:"instant"===e?void 0:350})}else h.isNearBottom&&(d(!1),u(!0));t=r,requestAnimationFrame(()=>{setTimeout(()=>{h.resizeDifference===n&&(h.resizeDifference=0)},1)})}),h.resizeObserver?.observe(e)},[]);return{contentRef:y,scrollRef:v,scrollToBottom:p,stopScroll:f,isAtBottom:n||s,isNearBottom:s,escapedFromLock:t,state:h}};function Mie(e,t){const r=i.useCallback(t=>(r.current=t,e(t)),t);return r}const Cie=new Map;function jie(...e){const t={...Aie};let r=!1;for(const i of e)"instant"!==i?"object"==typeof i&&(r=!1,t.damping=i.damping??t.damping,t.stiffness=i.stiffness??t.stiffness,t.mass=i.mass??t.mass):r=!0;const n=JSON.stringify(t);return Cie.has(n)||Cie.set(n,Object.freeze(t)),r?"instant":Cie.get(n)}const Oie=({className:e,...t})=>r.jsx(or,{className:Bi("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),Rie=sr,Lie=({withHandle:e,className:t,...n})=>r.jsx(lr,{className:Bi("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...n,children:e&&r.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:r.jsx(cr,{className:"h-2.5 w-2.5"})})}),Pie=i.forwardRef(({mainAction:e,actions:t,variant:n="default",size:a="default",disabled:s,className:o,mainButtonClassName:l,dropdownButtonClassName:c},u)=>{const d=i.useRef(null),[h,p]=i.useState();return i.useImperativeHandle(u,()=>d.current,[]),i.useLayoutEffect(()=>{d.current&&p(d.current.offsetWidth)},[t.length,e.label]),r.jsxs("div",{ref:d,className:Bi("flex w-full",o),children:[r.jsxs(Yi,{type:"button",variant:n,size:a,onClick:e.onClick,disabled:s||e.disabled,className:Bi("rounded-r-none flex-1","destructive"===n?"border-r border-red-700":"border-r-0",l),children:[e.icon&&r.jsx("span",{className:"mr-2",children:e.icon}),e.label]}),r.jsxs(ds,{children:[r.jsx(hs,{asChild:!0,children:r.jsxs(Yi,{type:"button",variant:n,size:a,disabled:s,className:Bi("rounded-l-none px-2 flex-shrink-0",c),children:[r.jsx(C,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"More options"})]})}),r.jsx(ps,{align:"end",style:{width:h},children:t.map((e,n)=>r.jsxs(i.Fragment,{children:[r.jsxs(fs,{onClick:e.onClick,disabled:e.disabled,className:Bi("destructive"===e.variant&&"text-destructive focus:text-destructive hover:bg-red-50 dark:hover:bg-red-950/50"),children:[e.icon,e.label]}),n<t.length-1&&r.jsx(gs,{})]},n))})]})]})});Pie.displayName="SplitButton";const Die=ur,$ie=dr,zie=hr,Bie=({toolPart:e,defaultOpen:t=!1,className:n})=>{const[a,s]=i.useState(t),{state:o,input:l,output:c,toolCallId:u}=e,d=e=>null===e?"null":void 0===e?"undefined":"string"==typeof e?e:"object"==typeof e?JSON.stringify(e,null,2):String(e);return r.jsx("div",{className:Bi("border-border mt-3 overflow-hidden rounded-lg border",n),children:r.jsxs(Die,{open:a,onOpenChange:s,children:[r.jsx($ie,{asChild:!0,children:r.jsxs(Yi,{variant:"ghost",className:"bg-background h-auto w-full justify-between rounded-b-none px-3 py-2 font-normal",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{switch(o){case"input-streaming":return r.jsx(he,{className:"h-4 w-4 animate-spin text-blue-500"});case"input-available":return r.jsx(Ze,{className:"h-4 w-4 text-orange-500"});case"output-available":return r.jsx(Le,{className:"h-4 w-4 text-green-500"});case"output-error":return r.jsx(pr,{className:"h-4 w-4 text-red-500"});default:return r.jsx(Ze,{className:"text-muted-foreground h-4 w-4"})}})(),r.jsx("span",{className:"font-mono text-sm font-medium",children:e.type}),(()=>{const e="px-2 py-1 rounded-full text-xs font-medium";switch(o){case"input-streaming":return r.jsx("span",{className:Bi(e,"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"),children:"Processing"});case"input-available":return r.jsx("span",{className:Bi(e,"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"),children:"Ready"});case"output-available":return r.jsx("span",{className:Bi(e,"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"),children:"Completed"});case"output-error":return r.jsx("span",{className:Bi(e,"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:"Error"});default:return r.jsx("span",{className:Bi(e,"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"),children:"Pending"})}})()]}),r.jsx(C,{className:Bi("h-4 w-4",a&&"rotate-180")})]})}),r.jsx(zie,{className:Bi("border-border border-t","data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden"),children:r.jsxs("div",{className:"bg-background space-y-3 p-3",children:[l&&Object.keys(l).length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-muted-foreground mb-2 text-sm font-medium",children:"Input"}),r.jsx("div",{className:"bg-background rounded border p-2 font-mono text-sm",children:Object.entries(l).map(([e,t])=>r.jsxs("div",{className:"mb-1",children:[r.jsxs("span",{className:"text-muted-foreground",children:[e,":"]})," ",r.jsx("span",{children:d(t)})]},e))})]}),c&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-muted-foreground mb-2 text-sm font-medium",children:"Output"}),r.jsx("div",{className:"bg-background max-h-60 overflow-auto rounded border p-2 font-mono text-sm",children:r.jsx("pre",{className:"whitespace-pre-wrap",children:d(c)})})]}),"output-error"===o&&e.errorText&&r.jsxs("div",{children:[r.jsx("h4",{className:"mb-2 text-sm font-medium text-red-500",children:"Error"}),r.jsx("div",{className:"bg-background rounded border border-red-200 p-2 text-sm dark:border-red-950 dark:bg-red-900/20",children:e.errorText})]}),"input-streaming"===o&&r.jsx("div",{className:"text-muted-foreground text-sm",children:"Processing tool call..."}),u&&r.jsx("div",{className:"text-muted-foreground border-t border-blue-200 pt-2 text-xs",children:r.jsxs("span",{className:"font-mono",children:["Call ID: ",u]})})]})})]})})};const Uie=new Set(["jpg","jpeg","png","gif","webp","svg","bmp","ico","tiff","avif"]),Fie=new Set(["mp4","webm","mov","avi","mkv","flv","wmv","m4v","ogv"]),Hie={youtube:{patterns:[/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/],getEmbedUrl:e=>`https://www.youtube.com/embed/${e}`},vimeo:{patterns:[/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(\d+)/],getEmbedUrl:e=>`https://player.vimeo.com/video/${e}`}};function Gie(e){try{const t=new URL(e).pathname,r=t.split(".").pop()?.toLowerCase();return r||""}catch{return""}}function qie(e){for(const[t,r]of Object.entries(Hie))for(const n of r.patterns){const i=e.match(n);if(i&&i[1])return{platform:t,id:i[1],embedUrl:r.getEmbedUrl(i[1])}}return null}function Vie(e){if(!e)return[];return(e.match(/(https?:\/\/[^\s]+)/g)||[]).map(e=>{const t=e.replace(/[.,!?;)]*$/,"");if(function(e){const t=Gie(e);return Uie.has(t)}(t))return{url:t,type:"image",isEmbed:!1};if(function(e){const t=Gie(e);return Fie.has(t)}(t))return{url:t,type:"video",isEmbed:!1};const r=qie(t);return r?{url:r.embedUrl,type:"video",isEmbed:!0}:{url:t,type:"unknown",isEmbed:!1}}).filter(e=>"unknown"!==e.type)}function Wie(e){return!e.includes("TEXT")&&!e.includes("OBJECT")||e.includes("EMBEDDING")||e.includes("TRANSCRIPTION")?e.includes("EMBEDDING")?"Embedding":e.includes("TRANSCRIPTION")?"Transcription":e.includes("IMAGE")?"Image":e.includes("TEXT")||e.includes("IMAGE")||e.includes("EMBEDDING")||e.includes("TRANSCRIPTION")?"Unknown":"Other":"LLM"}function Zie(e){if(!e)return"Unknown date";const t=new Date(e),r=new Date,n=(r.getTime()-t.getTime())/36e5;if(n<1){return`${Math.floor((r.getTime()-t.getTime())/6e4)}m ago`}return n<24?`${Math.floor(n)}h ago`:n<168?t.toLocaleDateString([],{weekday:"short",hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Kie(e,t=100){return e.length<=t?e:e.substring(0,t)+"..."}function Yie(e){navigator.clipboard.writeText(e).catch(console.error)}function Jie({action:e,onDelete:t}){const[n,a]=i.useState(!1),[s,o]=i.useState(!1),[l,c]=i.useState(!1),u=e.body?.modelType||"",d=e.body?.modelKey||"",h="action"===e.type,p=e.body?.action||"",f=function(e=""){return"ACTION"===e?fr:e.includes("TEXT_EMBEDDING")?gt:e.includes("TRANSCRIPTION")?Se:e.includes("TEXT")||e.includes("OBJECT")?mr:e.includes("IMAGE")?gr:vr}(h?"ACTION":u),m=h?"Action":Wie(u),g=function(e){if(!e)return null;const{prompt_tokens:t,completion_tokens:r,total_tokens:n}=e;return n?{prompt:t||0,completion:r||0,total:n}:null}(e.body?.response?.usage||e.body?.usage),v=e.body?.prompts,y=e.body?.params||e.body?.response||e.message||e.details;return r.jsxs("div",{className:"border rounded-lg bg-card hover:shadow-sm transition-all duration-200 group",children:[r.jsx("div",{className:"p-4 pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[r.jsx("div",{className:"p-2 rounded-lg bg-muted",children:r.jsx(f,{className:"h-4 w-4 text-muted-foreground"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"font-semibold text-sm",children:h?p:m}),r.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-muted text-muted-foreground",children:h?"Action":u}),e.body?.promptCount&&e.body.promptCount>1&&r.jsxs(Aa,{variant:"secondary",className:"text-xs px-1.5",children:[e.body.promptCount," prompts"]})]}),r.jsxs("div",{className:"space-y-1",children:[(d||h)&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(fr,{className:"h-3 w-3"}),r.jsx("code",{className:"font-mono",children:h?`Action ID: ${e.body?.actionId?.slice(-8)||"N/A"}`:d})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(Qe,{className:"h-3 w-3"}),r.jsx("span",{children:Zie(e.createdAt||e.timestamp)}),e.id&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsx("code",{className:"text-[10px] bg-muted px-1 rounded",children:e.id.slice(-8)})]})]})]}),g&&r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-muted-foreground",children:"Tokens:"}),r.jsx("span",{className:"font-mono",children:g.total.toLocaleString()})]}),g.prompt>0&&r.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[r.jsx("span",{children:"In:"}),r.jsx("span",{className:"font-mono",children:g.prompt.toLocaleString()})]}),g.completion>0&&r.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[r.jsx("span",{children:"Out:"}),r.jsx("span",{className:"font-mono",children:g.completion.toLocaleString()})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[y&&r.jsx(Yi,{variant:"ghost",size:"sm",onClick:()=>a(!n),className:"h-8 w-8 p-0",title:n?"Collapse details":"Expand details",children:n?r.jsx(F,{className:"h-3 w-3"}):r.jsx(C,{className:"h-3 w-3"})}),e.id&&t&&r.jsx(Yi,{variant:"ghost",size:"sm",onClick:()=>{"string"==typeof e.id&&t(e.id)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",title:"Delete log entry",children:r.jsx(Me,{className:"h-3 w-3"})})]})]})}),n&&y&&r.jsxs(r.Fragment,{children:[r.jsx(Xi,{}),r.jsxs("div",{className:"p-4 pt-3 space-y-4",children:[(()=>{const t=e.body?.params;if(!t&&!v)return null;if(u.includes("TRANSCRIPTION")&&Array.isArray(t))return r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(Se,{className:"h-3 w-3"}),r.jsx("span",{children:"Audio input data"})]});const{prompt:n,...i}=t||{};return r.jsxs("div",{className:"space-y-4",children:[v&&Array.isArray(v)&&v.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Prompts (",v.length,")"]})}),r.jsx("div",{className:"space-y-3",children:v.map((e,t)=>r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.modelType||"Prompt"," #",t+1]}),r.jsx(Yi,{variant:"ghost",size:"sm",onClick:()=>Yie(e.prompt),className:"h-5 px-1 text-xs",title:"Copy prompt",children:r.jsx(je,{className:"h-3 w-3"})})]}),r.jsx("div",{className:"bg-muted/30 rounded-md p-2",children:r.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap overflow-x-auto",children:e.prompt})})]},t))})]}),!v&&n&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Prompt"}),r.jsxs(Yi,{variant:"ghost",size:"sm",onClick:()=>Yie(n),className:"h-6 px-2 text-xs",title:"Copy prompt",children:[r.jsx(je,{className:"h-3 w-3 mr-1"}),"Copy"]})]}),r.jsx("div",{className:"bg-muted/30 rounded-md p-3 relative",children:r.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap overflow-x-auto",children:"string"==typeof n?n:JSON.stringify(n,null,2)})})]}),Object.keys(i).length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Other Parameters"}),JSON.stringify(i,null,2).length>200?r.jsx(Yi,{variant:"ghost",size:"sm",onClick:()=>o(!s),className:"h-6 px-2 text-xs",children:s?"Show less":"Show more"}):null]}),r.jsxs("div",{className:"bg-muted/30 rounded-md p-3 relative group",children:[r.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap overflow-x-auto",children:(()=>{const e=JSON.stringify(i,null,2),t=e.length>200;return s||!t?e:Kie(e,200)})()}),r.jsx(Yi,{variant:"ghost",size:"sm",onClick:()=>Yie(JSON.stringify(i,null,2)),className:"absolute top-1 right-1 h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy parameters",children:r.jsx(je,{className:"h-3 w-3"})})]})]})]})})(),(()=>{const t=e.body?.response;if(!t)return null;if("[array]"===t)return r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(Ke,{className:"h-3 w-3"}),r.jsx("span",{children:"Array response data"})]});const n="object"==typeof t?JSON.stringify(t,null,2):String(t),i=n.length>300;return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Response"}),i&&r.jsx(Yi,{variant:"ghost",size:"sm",onClick:()=>c(!l),className:"h-6 px-2 text-xs",children:l?"Show less":"Show more"})]}),r.jsxs("div",{className:"bg-muted/30 rounded-md p-3 relative group max-h-64 overflow-y-auto",children:[r.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap overflow-x-auto",children:l||!i?n:Kie(n,300)}),r.jsx(Yi,{variant:"ghost",size:"sm",onClick:()=>Yie(n),className:"absolute top-1 right-1 h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",title:"Copy response",children:r.jsx(je,{className:"h-3 w-3"})})]})]})})(),(e.message||e.details)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Additional Info"}),r.jsxs("div",{className:"bg-muted/30 rounded-md p-3",children:[e.message&&r.jsxs("div",{className:"text-xs mb-2",children:[r.jsx("span",{className:"font-medium text-muted-foreground",children:"Message: "}),r.jsx("span",{children:e.message})]}),e.details&&r.jsxs("div",{className:"text-xs",children:[r.jsx("span",{className:"font-medium text-muted-foreground",children:"Details: "}),r.jsx("span",{children:e.details})]})]})]})]})]}),!n&&y&&r.jsxs(r.Fragment,{children:[r.jsx(Xi,{}),r.jsx("div",{className:"p-4 pt-3",children:r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[r.jsx(se,{className:"h-3 w-3"}),r.jsx("span",{children:(()=>{const t=[];return e.body?.promptCount&&e.body.promptCount>0&&t.push(`${e.body.promptCount} prompt${e.body.promptCount>1?"s":""}`),e.body?.params&&t.push("parameters"),e.body?.response&&t.push("response data"),t.length>0?`Contains ${t.join(" and ")}`:"Contains additional data"})()}),r.jsx(Yi,{variant:"ghost",size:"sm",onClick:()=>a(!0),className:"h-5 px-2 text-xs ml-auto",children:"View details"})]})})]})]})}function Xie({loadingMore:e,onLoadMore:t}){return r.jsx("div",{className:"flex justify-center py-6",children:e?r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(et,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{className:"text-sm",children:"Loading more actions..."})]}):r.jsx(Yi,{variant:"outline",onClick:t,className:"px-8",children:"Load More"})})}function Qie({selectedType:e,searchQuery:t}){return r.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-center p-8",children:[r.jsx(Ke,{className:"h-16 w-16 text-muted-foreground/30 mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Actions Found"}),r.jsx("p",{className:"text-muted-foreground max-w-md mb-4",children:t?`No actions match "${t}". Try adjusting your search or filter.`:"all"===e?"Actions will appear here once the agent has performed operations.":`No ${e} actions found.`}),t&&r.jsx(Yi,{variant:"outline",onClick:()=>{},children:"Clear Search"})]})}function eae({agentId:e,roomId:t}){const[n,a]=i.useState("all"),[s,o]=i.useState(""),[l,c]=i.useState(15),[u,d]=i.useState(!1),h=i.useRef(null),{data:p=[],isLoading:f,error:m}=function(e,t,r){return G({queryKey:["agentActions",e,t,r],queryFn:async()=>{const t=await $H.agents.getAgentLogs(e,{limit:50});return t?t.map(PH):[]},refetchInterval:1e3,staleTime:1e3})}(e,t,["embedding","text_embedding"]),{mutate:g}=function(){const e=Re(),{toast:t}=Va();return Be({mutationFn:async({agentId:e,logId:t})=>(await $H.agents.deleteAgentLog(e,t),{agentId:e,logId:t}),onMutate:async({agentId:t,logId:r})=>{const n=e.getQueryData(["agentActions",t]);return n&&e.setQueryData(["agentActions",t],e=>e.filter(e=>e.id!==r)),{previousLogs:n,agentId:t,logId:r}},onSuccess:(r,{agentId:n})=>{e.invalidateQueries({queryKey:["agentActions",n]}),t({title:"Log Deleted",description:"The log entry has been successfully removed"})},onError:(r,{agentId:n},i)=>{i?.previousLogs&&e.setQueryData(["agentActions",n],i.previousLogs),t({title:"Error",description:r instanceof Error?r.message:"Failed to delete log",variant:"destructive"}),e.invalidateQueries({queryKey:["agentActions",n]})}})}(),{confirm:v,isOpen:y,onOpenChange:b,onConfirm:_,options:w}=MH(),x=p.filter(e=>{if("all"!==n){const t=Wie(e.body?.modelType||""),r="action"===e.type;switch(n){case"llm":if("LLM"!==t&&!r)return!1;break;case"transcription":if("Transcription"!==t)return!1;break;case"image":if("Image"!==t)return!1;break;case"other":if("Other"!==t&&"Unknown"!==t&&!r)return!1}}if(s.trim()){const t=s.toLowerCase();return[e.body?.modelType,e.body?.modelKey,e.id,e.message,JSON.stringify(e.body?.params),JSON.stringify(e.body?.response)].filter(Boolean).join(" ").toLowerCase().includes(t)}return!0}),E=i.useCallback(()=>{if(!h.current||u||l>=x.length)return;const{scrollTop:e,scrollHeight:t,clientHeight:r}=h.current;e+r>=t-200&&(d(!0),setTimeout(()=>{c(e=>Math.min(e+15,x.length)),d(!1)},500))},[u,l,x.length]);i.useEffect(()=>{c(15)},[n,s]),i.useEffect(()=>{const e=h.current;if(e)return e.addEventListener("scroll",E),()=>e.removeEventListener("scroll",E)},[E]);const k=x.slice(0,l),S=l<x.length,A=function(e){const t={};for(const r of e){const e=r.createdAt||r.timestamp||0,n=new Date(e).toLocaleDateString();t[n]||(t[n]=[]),t[n].push(r)}return t}(k),T=t=>{v({title:"Delete Log Entry",description:"Are you sure you want to permanently delete this log entry? This action cannot be undone.",confirmText:"Delete",variant:"destructive"},()=>{g({agentId:e,logId:t})})};return f&&0===p.length?r.jsx("div",{className:"flex flex-col h-[calc(100vh-100px)] min-h-[400px] w-full",children:r.jsx("div",{className:"flex items-center justify-center flex-1",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx(et,{className:"h-8 w-8 animate-spin text-muted-foreground"}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-medium",children:"Loading Actions"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching agent action history..."})]})]})})}):m?r.jsx("div",{className:"flex flex-col h-[calc(100vh-100px)] min-h-[400px] w-full",children:r.jsx("div",{className:"flex items-center justify-center flex-1",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ke,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),r.jsx("h3",{className:"font-medium text-destructive",children:"Failed to Load Actions"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"There was an error loading the agent actions."})]})})}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-col h-[calc(100vh-100px)] min-h-[400px] w-full",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 px-4 pt-4 flex-none border-b pb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-lg font-medium",children:" Actions"}),!f&&r.jsx("span",{className:"ml-2 text-xs px-2 py-1 rounded bg-muted text-muted-foreground",children:x.length})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Ji,{placeholder:"Search actions...",value:s,onChange:e=>o(e.target.value),className:"pl-10 w-64"})]}),r.jsxs(Za,{value:n,onValueChange:e=>a(e),children:[r.jsx(Ja,{className:"w-40",children:r.jsx(Ya,{placeholder:"Filter actions"})}),r.jsxs(es,{children:[r.jsx(rs,{value:"all",children:"All Actions"}),r.jsx(rs,{value:"llm",children:"LLM Calls"}),r.jsx(rs,{value:"transcription",children:"Transcriptions"}),r.jsx(rs,{value:"image",children:"Image Operations"}),r.jsx(rs,{value:"other",children:"Other"})]})]})]})]}),r.jsx("div",{ref:h,className:"flex-1 overflow-y-auto px-4",children:0===x.length?r.jsx(Qie,{selectedType:n,searchQuery:s}):r.jsxs("div",{className:"space-y-4",children:[Object.entries(A).map(([e,t])=>r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3 py-2",children:[r.jsx(Xi,{className:"flex-1"}),r.jsx("span",{className:"text-sm font-medium text-muted-foreground px-2",children:e}),r.jsx(Xi,{className:"flex-1"})]}),r.jsx("div",{className:"space-y-3",children:t.map((e,t)=>r.jsx(Jie,{action:e,onDelete:T},e.id||t))})]},e)),S&&r.jsx(Xie,{loadingMore:u,onLoadMore:()=>{c(e=>e+15)}})]})})]}),r.jsx(Dz,{open:y,onOpenChange:b,title:w?.title||"",description:w?.description||"",confirmText:w?.confirmText,cancelText:w?.cancelText,variant:w?.variant,onConfirm:_})]})}function tae({isOpen:e,onClose:t,memory:n,agentId:a}){const{toast:s}=Va(),{mutate:o,isPending:l}=function(){const e=Re(),{toast:t}=Va();return Be({mutationFn:async({agentId:e,memoryId:t,memoryData:r})=>({agentId:e,memoryId:t,result:await $H.memory.updateMemory(e,t,r)}),onSuccess:r=>{e.invalidateQueries({queryKey:["agents",r.agentId,"memories"]}),r.result?.roomId?e.invalidateQueries({queryKey:["agents",r.agentId,"rooms",r.result.roomId,"memories"]}):e.invalidateQueries({queryKey:["agents",r.agentId,"rooms"],predicate:e=>e.queryKey.length>3&&"memories"===e.queryKey[4]}),r.result?.roomId&&e.invalidateQueries({queryKey:["messages",r.agentId,r.result.roomId]}),t({title:"Memory Updated",description:"The memory has been successfully updated"})},onError:e=>{t({title:"Error",description:e instanceof Error?e.message:"Failed to update memory",variant:"destructive"})}})}(),{mutate:c,isPending:u}=function(){const e=Re();return Be({mutationFn:async({agentId:e,memoryId:t})=>(await $H.memory.deleteMemory(e,t),{agentId:e,memoryId:t}),onSuccess:t=>{e.invalidateQueries({queryKey:["agents",t.agentId,"memories"]}),e.invalidateQueries({queryKey:["agents",t.agentId,"rooms"],predicate:e=>e.queryKey.length>3&&"memories"===e.queryKey[4]})}})}(),[h,p]=i.useState(""),[f,m]=i.useState(!0),[g,v]=i.useState(!1),[y,b]=i.useState(!1),_=i.useRef(null),w=l||u,x=JSON.stringify(n.content,null,2),{confirm:E,isOpen:k,onOpenChange:S,onConfirm:A,options:T}=MH();i.useEffect(()=>{e&&(p(x),m(!0),b(!1),v(!1),setTimeout(()=>{_.current?.focus()},100))},[e,x]),i.useEffect(()=>{b(h!==x)},[h,x]),i.useEffect(()=>{if(h.trim())try{JSON.parse(h),m(!0)}catch{m(!1)}else m(!1)},[h]),i.useEffect(()=>{const r=r=>{"Escape"===r.key&&e&&(y?E({title:"Discard Unsaved Changes?",description:"You have unsaved changes. Are you sure you want to close without saving?",confirmText:"Discard",variant:"destructive"},()=>{t()}):t())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[e,y,t]);const N=i.useCallback(()=>{if(h.trim())if(f)try{const e=JSON.parse(h);o({agentId:a,memoryId:n.id,memoryData:{content:e}},{onSuccess:()=>{t(),s({title:"Memory Updated",description:"The memory content has been successfully updated"})},onError:e=>{s({title:"Update Failed",description:e.message||"Failed to update memory",variant:"destructive"})}})}catch(e){s({title:"Invalid JSON",description:"Please enter valid JSON format",variant:"destructive"})}else s({title:"Invalid JSON",description:"Please fix JSON syntax errors before saving",variant:"destructive"});else s({title:"Error",description:"Memory content cannot be empty",variant:"destructive"})},[h,f,o,a,n.id,t,s]),I=i.useCallback(()=>{E({title:"Delete Memory",description:"Are you sure you want to delete this memory? This action cannot be undone.",confirmText:"Delete",variant:"destructive"},()=>{c({agentId:a,memoryId:n.id},{onSuccess:()=>{t(),s({title:"Memory Deleted",description:"The memory has been successfully removed"})},onError:e=>{s({title:"Delete Failed",description:e.message||"Failed to delete memory",variant:"destructive"})}})})},[c,a,n.id,t,s]),M=i.useCallback(()=>{try{const e=JSON.parse(h);p(JSON.stringify(e,null,2)),s({title:"Formatted",description:"JSON has been formatted"})}catch(e){s({title:"Format Error",description:"Cannot format invalid JSON",variant:"destructive"})}},[h,s]),C=i.useCallback(()=>{E({title:"Reset Changes",description:"Reset to original content? All unsaved changes will be lost.",confirmText:"Reset",variant:"destructive"},()=>{p(x)})},[x]),j=i.useCallback(async()=>{try{await navigator.clipboard.writeText(h),s({title:"Copied",description:"Content copied to clipboard"})}catch(e){s({title:"Copy Failed",description:"Failed to copy to clipboard",variant:"destructive"})}},[h,s]);return e?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&(y?E({title:"Discard Unsaved Changes?",description:"You have unsaved changes. Are you sure you want to close without saving?",confirmText:"Discard",variant:"destructive"},()=>{t()}):t())},role:"dialog","aria-modal":"true","aria-labelledby":"memory-edit-title",children:r.jsxs(cG,{className:"w-full max-w-4xl h-[85vh] max-h-[800px] flex flex-col",onClick:e=>e.stopPropagation(),children:[r.jsxs(uG,{className:"flex flex-row items-center justify-between space-y-0 pb-2 flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dG,{id:"memory-edit-title",className:"text-xl font-semibold",children:"Edit Memory Content"}),y&&r.jsx("span",{className:"text-xs px-2 py-1 rounded bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"Unsaved changes"})]}),r.jsx(Yi,{variant:"ghost",size:"sm",onClick:t,"aria-label":"Close dialog",children:r.jsx(d,{className:"h-4 w-4"})})]}),r.jsx(Xi,{}),r.jsxs(hG,{className:"pt-4 flex-1 overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"mb-4 flex items-start bg-amber-50 dark:bg-amber-950/50 border border-amber-200 dark:border-amber-800 rounded-md p-3",children:[r.jsx(yr,{className:"h-4 w-4 text-amber-600 dark:text-amber-400 mr-2 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm text-amber-800 dark:text-amber-200",children:[r.jsx("p",{className:"font-medium mb-1",children:"Editing Raw Memory Content"}),r.jsx("p",{children:"Changes may affect agent behavior. Ensure JSON format is valid before saving."})]})]}),r.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-muted-foreground",children:"ID:"}),r.jsx("code",{className:"text-xs bg-muted px-1 rounded",children:n.id})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-muted-foreground",children:"Created:"}),r.jsx("span",{children:(O=n.createdAt||0,new Date(O).toLocaleString())})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-muted-foreground",children:"Room:"}),r.jsx("code",{className:"text-xs bg-muted px-1 rounded",children:n.roomId})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-muted-foreground",children:"Type:"}),r.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+(n.entityId===a?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-white-100 text-white dark:bg-white-800 dark:text-white"),children:n.entityId===a?"Agent Message":"User Message"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{htmlFor:"memory-content",className:"text-sm font-medium",children:"Memory Content"}),r.jsxs("div",{className:"flex items-center gap-1",children:[f?r.jsx(D,{className:"h-3 w-3 text-green-500"}):r.jsx(yr,{className:"h-3 w-3 text-red-500"}),r.jsx("span",{className:"text-xs "+(f?"text-green-600":"text-red-600"),children:f?"Valid JSON":"Invalid JSON"})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Yi,{variant:"outline",size:"sm",onClick:()=>v(!g),disabled:w,title:g?"Switch to edit mode":"Switch to preview mode",children:g?r.jsx(Te,{className:"h-3 w-3"}):r.jsx(Ne,{className:"h-3 w-3"})}),r.jsx(Yi,{variant:"outline",size:"sm",onClick:j,disabled:w,title:"Copy to clipboard",children:r.jsx(je,{className:"h-3 w-3"})}),r.jsx(Yi,{variant:"outline",size:"sm",onClick:M,disabled:w||!f,title:"Format JSON",children:"Format"}),r.jsx(Yi,{variant:"outline",size:"sm",onClick:C,disabled:w||!y,title:"Reset to original",children:r.jsx(me,{className:"h-3 w-3"})})]})]}),r.jsxs("div",{className:"flex-1 min-h-0 flex flex-col",children:[g?r.jsx("div",{className:"flex-1 border rounded-md p-3 bg-muted/50 overflow-auto",children:r.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:f?JSON.stringify(JSON.parse(h),null,2):h})}):r.jsx(Da,{ref:_,id:"memory-content",value:h,onChange:e=>p(e.target.value),className:"flex-1 resize-none font-mono text-sm min-h-[300px] "+(f?"":"border-red-300 focus:border-red-500"),placeholder:"Memory content in JSON format...",disabled:w,"aria-describedby":"json-help"}),r.jsx("p",{id:"json-help",className:"text-xs text-muted-foreground mt-2 flex-shrink-0",children:"Edit the JSON directly. Use Ctrl+A to select all, Ctrl+Z to undo."})]})]}),r.jsxs(pG,{className:"flex justify-between flex-shrink-0",children:[r.jsxs(Yi,{variant:"destructive",onClick:I,disabled:w,children:[r.jsx(fe,{className:"mr-2 h-4 w-4"}),"Delete Memory"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Yi,{variant:"outline",onClick:t,disabled:w,children:"Cancel"}),r.jsxs(Yi,{onClick:N,disabled:w||!f||!y,children:[r.jsx(ge,{className:"mr-2 h-4 w-4"}),l?"Saving...":"Save Changes"]})]})]})]})}),r.jsx(Dz,{open:k,onOpenChange:S,title:T?.title||"",description:T?.description||"",confirmText:T?.confirmText,cancelText:T?.cancelText,variant:T?.variant,onConfirm:A})]}):null;var O}function rae({agentId:e,agentName:t,channelId:n}){const[a,s]=i.useState("all"),[o,l]=i.useState(""),[c,u]=i.useState(null),[d,h]=i.useState(15),[p,f]=i.useState(!1),m=i.useRef(null),{data:g}=GH(),v="facts"===a?void 0:"messages",y="facts"===a||"all"===a?"facts":void 0,b="currentChat"===a&&n?n:void 0,{data:_=[],isLoading:w,error:x}=WH(e,v,b),{data:E=[],isLoading:k,error:S}=WH(e,y,b),A=[..._,...E],T=w||k,N=x||S,I=A.filter(e=>{if("all"!==a&&"currentChat"!==a){if("facts"===a)return!0;if("messagesSent"===a&&e.entityId!==e.agentId)return!1;if("messagesReceived"===a&&e.entityId===e.agentId)return!1}if(o.trim()){const t=o.toLowerCase(),r=e.content;return[r?.text,r?.thought,e.id,e.metadata].filter(Boolean).join(" ").toLowerCase().includes(t)}return!0}),M=i.useCallback(()=>{if(!m.current||p||d>=I.length)return;const{scrollTop:e,scrollHeight:t,clientHeight:r}=m.current;e+r>=t-200&&(f(!0),setTimeout(()=>{h(e=>Math.min(e+15,I.length)),f(!1)},500))},[p,d,I.length]);i.useEffect(()=>{h(15)},[a,o]),i.useEffect(()=>{const e=m.current;if(e)return e.addEventListener("scroll",M),()=>e.removeEventListener("scroll",M)},[M]);const C=e=>{const t=new Date(e),r=((new Date).getTime()-t.getTime())/36e5;return r<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):r<168?t.toLocaleDateString([],{weekday:"short",hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},j=I.slice(0,d),O=d<I.length,R=(e=>{const t={};for(const r of e){const e=new Date(r.createdAt||0).toLocaleDateString();t[e]||(t[e]=[]),t[e].push(r)}return t})(j);if(T&&0===A.length)return r.jsx("div",{className:"flex flex-col h-[calc(100vh-100px)] min-h-[400px] w-full",children:r.jsx("div",{className:"flex items-center justify-center flex-1",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx(et,{className:"h-8 w-8 animate-spin text-muted-foreground"}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"font-medium",children:"Loading Memories"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Fetching agent conversation history..."})]})]})})});if(N)return r.jsx("div",{className:"flex flex-col h-[calc(100vh-100px)] min-h-[400px] w-full",children:r.jsx("div",{className:"flex items-center justify-center flex-1",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ke,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),r.jsx("h3",{className:"font-medium text-destructive",children:"Failed to Load Memories"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"There was an error loading the agent memories."})]})})});const L=()=>r.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-center p-8",children:[r.jsx(Ke,{className:"h-16 w-16 text-muted-foreground/30 mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Memories Found"}),r.jsx("p",{className:"text-muted-foreground max-w-md mb-4",children:o?`No memories match "${o}". Try adjusting your search or filter.`:"This agent hasn't created any memories yet. Memories will appear here as the agent interacts."}),o&&r.jsx(Yi,{variant:"outline",onClick:()=>l(""),children:"Clear Search"})]}),P=({memory:e})=>{const n=e.content,i=((e,t)=>t?.thought?gt:e.entityId===e.agentId?mr:_r)(e,n),a=e.entityId===e.agentId,s=(()=>{if(a){const r=g?.data?.agents?.find(t=>t.id===e.entityId);return r?.name||t}return e.metadata?.raw?.senderName||e.metadata?.source||"User"})();return r.jsxs("div",{className:"border rounded-lg p-4 bg-card hover:bg-accent/5 transition-colors group",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-md bg-muted",children:r.jsx(i,{className:"h-4 w-4"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-sm",children:s}),r.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-muted text-muted-foreground",children:n?.thought?"Thought":a?"Agent":"User"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:[r.jsx(Qe,{className:"h-3 w-3"}),r.jsx("span",{children:C(e.createdAt||0)}),e.id&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsx("code",{className:"text-[10px] bg-muted px-1 rounded",children:e.id.slice(-8)})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n?.text&&r.jsx(Yi,{variant:"ghost",size:"sm",onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e)}catch(t){console.error("Failed to copy:",t)}})(n.text||""),className:"h-8 w-8 p-0",title:"Copy text",children:r.jsx(je,{className:"h-3 w-3"})}),e.id&&r.jsx(Yi,{variant:"ghost",size:"sm",onClick:()=>u(e),className:"h-8 w-8 p-0",title:"Edit memory",children:r.jsx(br,{className:"h-3 w-3"})})]})]}),r.jsxs("div",{className:"space-y-3",children:[n?.text&&r.jsx("div",{className:"bg-muted/50 rounded-md p-3",children:r.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:n.text})}),n?.thought&&r.jsxs("div",{className:"border-l-2 border-muted pl-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(gt,{className:"h-3 w-3 text-muted-foreground"}),r.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Thought Process"})]}),r.jsx("p",{className:"text-xs text-muted-foreground italic leading-relaxed",children:String(n.thought)})]}),(n?.actions||n?.providers||n?.source)&&r.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.actions?.map(e=>r.jsx("span",{className:"text-xs px-2 py-1 bg-muted rounded text-muted-foreground",title:"Action",children:e},e)),n.providers?.map(e=>r.jsx("span",{className:"text-xs px-2 py-1 bg-muted rounded text-muted-foreground",title:"Provider",children:e},e)),n.source&&r.jsx("span",{className:"text-xs px-2 py-1 bg-muted rounded text-muted-foreground",children:n.source})]}),e.metadata&&Object.keys(e.metadata).length>0&&r.jsxs("details",{className:"text-xs",children:[r.jsx("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground",children:"View metadata"}),r.jsx("div",{className:"mt-2 p-2 bg-muted/30 rounded text-[10px] font-mono overflow-x-auto",children:r.jsx("pre",{children:JSON.stringify(e.metadata,null,2)})})]})]})]})};return r.jsxs("div",{className:"flex flex-col h-[calc(100vh-100px)] min-h-[400px] w-full",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 px-4 pt-4 flex-none border-b pb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Memories"}),!T&&r.jsx("span",{className:"ml-2 text-xs px-2 py-1 rounded bg-muted text-muted-foreground",children:I.length})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Ji,{placeholder:"Search memories...",value:o,onChange:e=>l(e.target.value),className:"pl-10 w-full min-w-0 max-w-64"})]}),r.jsxs(Za,{value:a,onValueChange:e=>s(e),children:[r.jsx(Ja,{className:"w-40",children:r.jsx(Ya,{placeholder:"Filter memories"})}),r.jsxs(es,{children:[r.jsx(rs,{value:"all",children:"All Messages"}),n&&r.jsx(rs,{value:"currentChat",children:"Current Chat"}),r.jsx(rs,{value:"messagesSent",children:"Agent Messages"}),r.jsx(rs,{value:"messagesReceived",children:"User Messages"}),r.jsx(rs,{value:"facts",children:"Facts"})]})]})]})]}),r.jsx("div",{ref:m,className:"flex-1 overflow-y-auto px-4",children:0===I.length?r.jsx(L,{}):r.jsxs("div",{className:"space-y-4",children:[Object.entries(R).map(([e,t])=>r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3 py-2",children:[r.jsx(Xi,{className:"flex-1"}),r.jsx("span",{className:"text-sm font-medium text-muted-foreground px-2",children:e}),r.jsx(Xi,{className:"flex-1"})]}),r.jsx("div",{className:"space-y-3",children:t.map(e=>r.jsx(P,{memory:e},e.id||e.createdAt))})]},e)),O&&r.jsx("div",{className:"flex justify-center py-6",children:p?r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(et,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{className:"text-sm",children:"Loading more memories..."})]}):r.jsx(Yi,{variant:"outline",onClick:()=>h(e=>e+15),className:"px-8",children:"Load More"})})]})}),c&&r.jsx(tae,{isOpen:!!c,onClose:()=>u(null),memory:c,agentId:e})]})}function nae(e){const[t,r]=i.useState(!1),{toast:n}=Va(),a=Oe(),s=Re(),o=i.useCallback(async()=>{r(!0),n({title:"Deleting...",description:`Deleting agent "${e.name}"`});let t=!1,i=null;try{i=setTimeout(()=>{t||(s.invalidateQueries({queryKey:["agents"]}),a("/"),n({title:"Note",description:"Deletion is still processing in the background."}))},8e3);const r=lz();if(!e.id)throw new Error("Agent ID is required for deletion");const o=await r.agents.deleteAgent(e.id);t=!0,i&&clearTimeout(i);const l=o?.partial;n(l?{title:"Processing",description:"Deletion is still in progress and will complete in the background."}:{title:"Success",description:"Agent deleted successfully"}),s.invalidateQueries({queryKey:["agents"]}),a("/")}catch(o){t=!0,i&&clearTimeout(i);const e=o?.message??"Failed to delete agent",r=o?.statusCode||o?.response?.status;409===r||e.includes("409")||e.includes("Conflict")||e.includes("foreign key constraint")||e.includes("active references")?n({title:"Cannot Delete",description:"This agent cannot be deleted because it has active references. Try stopping the agent first.",variant:"destructive"}):408===r||504===r||e.includes("408")||e.includes("504")||e.includes("timeout")||e.includes("timed out")?(n({title:"Operation Timeout",description:"The deletion is taking longer than expected and will continue in the background.",variant:"destructive"}),s.invalidateQueries({queryKey:["agents"]}),a("/")):n({title:"Error",description:e,variant:"destructive"})}finally{r(!1)}},[e,n,a,s]);return{handleDelete:o,isDeleting:t}}function iae({agent:e,agentId:t,onSaveComplete:n}){const{toast:a}=Va(),s=Oe(),o=Re(),{confirm:l,isOpen:c,onOpenChange:u,onConfirm:d,options:h}=MH(),p=e?.status===Ff.ACTIVE,f=i.useRef(null),[m,g]=i.useState({}),{handleDelete:v,isDeleting:y}=nae(e),b=Rz(e),{stopAgent:_,isAgentStopping:w}=oW();return r.jsxs(r.Fragment,{children:[r.jsx(mz,{characterValue:b.agent,setCharacterValue:b,title:"Agent Settings",description:"Configure your AI agent's behaviour and capabilities.",onSubmit:async()=>{if(!t)return void a({title:"Error",description:"Agent ID is missing",variant:"destructive"});const e=async()=>{try{const e=lz(),r=Object.keys(m).length>0?m:f.current?.getSecrets()||{},i=b.getChangedFields();if(r&&Object.keys(r).length>0){i.settings||(i.settings={});const e=Object.entries(r).filter(([e,t])=>null!==t).reduce((e,[t,r])=>({...e,[t]:r}),{});i.settings.secrets=e}if(0===Object.keys(i).length){const r=b.agent?.settings?.secrets;if(r&&Object.keys(r).length>0){const i={id:t,settings:{secrets:r}};return await e.agents.updateAgent(t,i),o.invalidateQueries({queryKey:["agent",t]}),o.invalidateQueries({queryKey:["agents"]}),a({title:"Success",description:"Agent secrets updated successfully"}),void(n?n():s("/"))}return a({title:"No Changes",description:"No changes were made to the agent"}),void(n?n():s("/"))}const l={id:t,...i};await e.agents.updateAgent(t,l),o.invalidateQueries({queryKey:["agent",t]}),o.invalidateQueries({queryKey:["agents"]}),a({title:"Success",description:"Agent updated successfully"}),n?n():s("/")}catch(e){throw a({title:"Error",description:e instanceof Error?e.message:"Failed to update agent",variant:"destructive"}),e}};if(f?.current){const t=f.current.validateSecrets();if(!t.isValid)return void l({title:"Missing Required Secrets",description:`The following required secrets are missing: ${t.missingSecrets.join(", ")}. Do you want to save anyway?`,confirmText:"Save Anyway",cancelText:"Cancel",variant:"destructive"},e)}await e()},onReset:b.reset,onDelete:()=>{y||l({title:"Delete Agent",description:`Are you sure you want to delete the agent "${e.name}"? This action cannot be undone.`,confirmText:"Delete",variant:"destructive"},v)},onStopAgent:p?async()=>{try{await _(e),a({title:"Success",description:"Agent stopped successfully"})}catch(t){a({title:"Error",description:t instanceof Error?t.message:"Failed to stop agent",variant:"destructive"})}}:void 0,isAgent:!0,isDeleting:y,isStopping:w(t),customComponents:[{name:"Plugins",component:r.jsx(Tz,{characterValue:b.agent,setCharacterValue:b,initialPlugins:e.plugins})},{name:"Secret",component:r.jsx(Oz,{characterValue:b.agent,ref:f,onChange:e=>{g(e),b.updateSettings({secrets:e})}})},{name:"Avatar",component:r.jsx(gz,{characterValue:b.agent,setCharacterValue:b})}]}),r.jsx(Dz,{open:c,onOpenChange:u,title:h?.title||"",description:h?.description||"",confirmText:h?.confirmText,cancelText:h?.cancelText,variant:h?.variant,onConfirm:d})]})}const aae="eliza-agent-tab-states";const sae=new class{convertRunDetailToTraceSpans(e){const t=e.events;if(!t||0===t.length)return[];const r=[...t].sort((e,t)=>e.timestamp-t.timestamp),n=new Map,i=new Map,a=[];return r.forEach((t,r)=>{switch(t.type){case"RUN_STARTED":{const r=this.createRunSpan(e,t);a.push(r);break}case"ACTION_STARTED":{const e=t.data.actionName||t.data.actionId||`Action ${r}`,s=t.data.actionId||e;let o=n.get(s);o||(o={id:`action-${s}`,title:e,type:"agent_invocation",status:"pending",startTime:new Date(t.timestamp),endTime:new Date(t.timestamp),duration:0,raw:JSON.stringify(t,null,2),attributes:this.convertEventDataToAttributes(t.data),children:[]},n.set(s,o),a.push(o));const l=(o.children?.length||0)+1,c={id:`attempt-${s}-${l}`,title:`Attempt ${l}`,type:"span",status:"pending",startTime:new Date(t.timestamp),endTime:new Date(t.timestamp),duration:0,raw:JSON.stringify(t,null,2),attributes:this.convertEventDataToAttributes(t.data),children:[]};o.children=[...o.children||[],c],i.set(s,c);break}case"ACTION_COMPLETED":{const e=t.data.actionName||t.data.actionId||`Action ${r}`,a=t.data.actionId||e,s=n.get(a),o=i.get(a),l=this.extractPrompt(t.data),c=this.extractResponse(t.data);if(o){const e=!1!==t.data.success;o.status=e?"success":"error",o.endTime=new Date(t.timestamp),o.duration=t.timestamp-o.startTime.getTime(),l&&(o.input=l),c&&(o.output=c),i.delete(a)}if(s){const e=!1!==t.data.success;s.status=e?"success":"error",s.endTime=new Date(t.timestamp),s.duration=t.timestamp-s.startTime.getTime(),l&&!s.input&&(s.input=l),c&&!s.output&&(s.output=c)}break}case"MODEL_USED":{const e=t.data.modelType||"Model Call",s=this.extractPrompt(t.data),o=this.extractResponse(t.data),l={id:`model-${r}`,title:e,type:"llm_call",status:"success",startTime:new Date(t.timestamp),endTime:new Date(t.timestamp+(t.data.executionTime||0)),duration:t.data.executionTime||0,raw:JSON.stringify(t,null,2),attributes:this.convertEventDataToAttributes(t.data),input:s,output:o,tokensCount:this.extractTokensCount(t.data),cost:this.extractCost(t.data)},c=t.data.actionContext||void 0||Array.from(i.keys()).pop();if(c){const e=i.get(c);if(e)e.children=[...e.children||[],l];else{const e=n.get(c);if(e&&e.children&&e.children.length>0){const t=e.children[e.children.length-1];t.children=[...t.children||[],l]}}}else a.push(l);break}case"EVALUATOR_COMPLETED":{const e={id:`evaluator-${r}`,title:t.data.evaluatorName||`Evaluator ${r}`,type:"chain_operation",status:"success",startTime:new Date(t.timestamp),endTime:new Date(t.timestamp),duration:0,raw:JSON.stringify(t,null,2),attributes:this.convertEventDataToAttributes(t.data)};a.push(e);break}case"EMBEDDING_EVENT":{const e=t.data.status||"completed",n={id:`embedding-${r}`,title:`Embedding ${e}`,type:"embedding",status:"failed"===e?"error":"success",startTime:new Date(t.timestamp),endTime:new Date(t.timestamp+(t.data.durationMs||0)),duration:t.data.durationMs||0,raw:JSON.stringify(t,null,2),attributes:this.convertEventDataToAttributes(t.data)},s=Array.from(i.keys()).pop();if(s){const e=i.get(s);e&&(e.children=[...e.children||[],n])}else a.push(n);break}}}),a}createRunSpan(e,t){const r=e.summary,n=r.durationMs||0,i=new Date(t.timestamp),a=new Date(t.timestamp+n);return{id:r.runId,title:`Run ${new Date(r.startedAt||Date.now()).toLocaleTimeString()}`,type:"agent_invocation",status:this.convertRunStatus(r.status),startTime:i,endTime:a,duration:n,raw:JSON.stringify(e,null,2),attributes:[{key:"run.id",value:{stringValue:r.runId}},{key:"run.status",value:{stringValue:r.status}},...r.messageId?[{key:"message.id",value:{stringValue:r.messageId}}]:[],...r.roomId?[{key:"room.id",value:{stringValue:r.roomId}}]:[]],children:[]}}convertRunStatus(e){switch(e){case"completed":return"success";case"error":return"error";case"timeout":return"warning";default:return"pending"}}convertEventDataToAttributes(e){return Object.entries(e).map(([e,t])=>({key:e,value:this.convertValueToAttributeValue(t)}))}convertValueToAttributeValue(e){return"string"==typeof e?{stringValue:e}:"number"==typeof e?{intValue:e.toString()}:"boolean"==typeof e?{boolValue:e}:{stringValue:JSON.stringify(e)}}coerceToNumber(e){if("number"==typeof e)return Number.isFinite(e)?e:void 0;if("string"==typeof e){const t=Number(e);return Number.isFinite(t)?t:void 0}}extractTokensCount(e){const t=Object.prototype.hasOwnProperty.call(e,"inputTokens"),r=Object.prototype.hasOwnProperty.call(e,"outputTokens");if(t||r){return(this.coerceToNumber(e.inputTokens)??0)+(this.coerceToNumber(e.outputTokens)??0)}const n=e=>{if(!e||"object"!=typeof e)return;const t=e,r=this.coerceToNumber(t.total_tokens);if(void 0!==r)return r;const n=Object.prototype.hasOwnProperty.call(t,"prompt_tokens"),i=Object.prototype.hasOwnProperty.call(t,"completion_tokens");if(n||i){return(this.coerceToNumber(t.prompt_tokens)??0)+(this.coerceToNumber(t.completion_tokens)??0)}};if(e.response&&"object"==typeof e.response){const t=n(e.response.usage);if(void 0!==t)return t}const i=n(e.usage);if(void 0!==i)return i}extractCost(e){if(e.cost&&"number"==typeof e.cost)return e.cost;if(e.response&&"object"==typeof e.response){const t=e.response;if(t.cost&&"number"==typeof t.cost)return t.cost}}extractPrompt(e){if(e.prompts&&Array.isArray(e.prompts)){const t=e.prompts;if(t.length>0)return t.map((e,r)=>(t.length>1?`[Prompt ${r+1}${e.modelType?` - ${e.modelType}`:""}]\n`:"")+(e.prompt||"")).join("\n\n---\n\n")}if(e.prompt&&"string"==typeof e.prompt)return e.prompt;if(e.params&&"object"==typeof e.params){const t=e.params;if(t.prompt&&"string"==typeof t.prompt)return t.prompt;const{prompt:r,...n}=t;if(Object.keys(n).length>0)return JSON.stringify(n,null,2)}return e.input&&"string"==typeof e.input?e.input:void 0}extractResponse(e){if(e.response){if("string"==typeof e.response)return e.response;if("object"==typeof e.response){const t=e.response;return t.content&&"string"==typeof t.content?t.content:t.text&&"string"==typeof t.text?t.text:t.message&&"string"==typeof t.message?t.message:JSON.stringify(t,null,2)}return String(e.response)}return e.output?"string"==typeof e.output?e.output:JSON.stringify(e.output,null,2):e.result?"string"==typeof e.result?e.result:JSON.stringify(e.result,null,2):void 0}convertRunSummaryToTraceRecord(e){const t=e.runId.slice(0,8);return{id:e.runId,name:`Run ${t}`,spansCount:Object.values(e.counts||{}).reduce((e,t)=>e+t,0),durationMs:e.durationMs||0,agentDescription:`Status: ${e.status}`,startTime:e.startedAt||void 0}}},oae=e=>{const t=+e.startTime;return+e.endTime-t},lae=e=>{if(e<1e3)return`${Math.round(e)}ms`;if(e<6e4)return`${Math.round(e/1e3)}s`;if(e<36e5){const t=Math.floor(e/6e4),r=Math.floor(e%6e4/1e3);return r>0?`${t}m ${r}s`:`${t}m`}const t=Math.floor(e/36e5),r=Math.floor(e%36e5/6e4);return r>0?`${t}h ${r}m`:`${t}h`},cae=({spanCard:e,minStart:t,maxEnd:r})=>{const n=+e.startTime,i=r-t,a=oae(e);return{durationMs:a,startPercent:(n-t)/i*100,widthPercent:a/i*100}},uae=e=>{const t=[],r=e=>{e.forEach(e=>{t.push(e),e.children?.length&&r(e.children)})};return r(e),t};function dae(e,t){const r=t.toLowerCase().trim();if(!r)return e;const n=[];for(const i of e){const e=i.title.toLowerCase().includes(r),a=i.type.toLowerCase().includes(r),s=i.attributes?.some(e=>e.key.toLowerCase().includes(r)||e.value.stringValue?.toLowerCase().includes(r)||e.value.intValue?.toLowerCase().includes(r)),o=e||a||s,l=i.children?dae(i.children,t):[];(o||l.length>0)&&n.push({...i,children:l.length>0?l:i.children})}return n}const hae={none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"},pae={purple:{bg:"bg-purple-100",darkBg:"dark:bg-purple-950/60",text:"text-purple-500",darkText:"dark:text-purple-300"},indigo:{bg:"bg-indigo-100",darkBg:"dark:bg-indigo-950/60",text:"text-indigo-500",darkText:"dark:text-indigo-300"},orange:{bg:"bg-orange-100",darkBg:"dark:bg-orange-950/60",text:"text-orange-600",darkText:"dark:text-orange-300"},teal:{bg:"bg-teal-100",darkBg:"dark:bg-teal-950/60",text:"text-teal-600",darkText:"dark:text-teal-300"},cyan:{bg:"bg-cyan-100",darkBg:"dark:bg-cyan-950/60",text:"text-cyan-600",darkText:"dark:text-cyan-300"},sky:{bg:"bg-sky-100",darkBg:"dark:bg-sky-950/60",text:"text-sky-600",darkText:"dark:text-sky-300"},yellow:{bg:"bg-yellow-100",darkBg:"dark:bg-yellow-950/60",text:"text-yellow-700",darkText:"dark:text-yellow-300"},emerald:{bg:"bg-emerald-100",darkBg:"dark:bg-emerald-950/60",text:"text-emerald-600",darkText:"dark:text-emerald-300"},red:{bg:"bg-red-100",darkBg:"dark:bg-red-950/60",text:"text-red-600",darkText:"dark:text-red-300"},gray:{bg:"bg-gray-100",darkBg:"dark:bg-gray-900",text:"text-gray-600",darkText:"dark:text-gray-300"}},fae={llm_call:{label:"LLM",theme:"purple",icon:fr},tool_execution:{label:"TOOL",theme:"orange",icon:Tr},agent_invocation:{label:"AGENT INVOCATION",theme:"indigo",icon:mr},chain_operation:{label:"CHAIN",theme:"teal",icon:Ar},retrieval:{label:"RETRIEVAL",theme:"cyan",icon:Xe},embedding:{label:"EMBEDDING",theme:"emerald",icon:Sr},create_agent:{label:"CREATE AGENT",theme:"sky",icon:qe},span:{label:"SPAN",theme:"cyan",icon:kr},event:{label:"EVENT",theme:"emerald",icon:Er},guardrail:{label:"GUARDRAIL",theme:"red",icon:xr},unknown:{label:"UNKNOWN",theme:"gray",icon:wr}};function mae(e){return fae[e].theme}function gae(e){return fae[e].label}function vae(e){return fae[e].icon}const yae={6:"h-6 px-2 gap-1 text-xs",7:"h-7 px-2 gap-1 text-xs",8:"h-8 px-2 gap-1 text-xs",9:"h-9 px-2.5 gap-2 text-sm",10:"h-10 px-4 gap-2 text-sm",11:"h-11 px-5 gap-3 text-base",12:"h-12 px-5 gap-2.5 text-base",16:"h-16 px-7 gap-3 text-lg"},bae={gray:"bg-muted text-muted-foreground",purple:"bg-primary text-primary-foreground",indigo:"bg-primary text-primary-foreground",orange:"bg-chart-1 text-primary-foreground",teal:"bg-chart-2 text-primary-foreground",cyan:"bg-chart-3 text-primary-foreground",sky:"bg-chart-4 text-primary-foreground",yellow:"bg-chart-5 text-primary-foreground",emerald:"bg-accent text-accent-foreground",red:"bg-destructive text-destructive-foreground"},_ae={filled:"",outlined:"border border-2 bg-transparent text-foreground border-border",ghost:"bg-transparent text-muted-foreground"},wae=({children:e,size:t="6",theme:n="gray",rounded:i="md",variant:a="filled",fullWidth:s=!1,disabled:o=!1,iconStart:l,iconEnd:c,type:u="button",onClick:d,className:h="",...p})=>{const f=s?"w-full":"",m=o?"cursor-not-allowed opacity-50":"hover:opacity-70",g="filled"===a?bae[n]||bae.gray:"";return r.jsxs("button",{type:u,onClick:d,disabled:o,className:Bi("inline-flex items-center justify-center font-medium transition-all duration-200",yae[t],hae[i],_ae[a],g,f,m,h),...p,children:[l&&r.jsx("span",{className:"mr-1",children:l}),e,c&&r.jsx("span",{className:"ml-1",children:c})]})},xae={6:"h-6 min-h-6",7:"h-7 min-h-7",8:"h-8 min-h-8",9:"h-9 min-h-9",10:"h-10 min-h-10",11:"h-11 min-h-11",12:"h-12 min-h-12",16:"h-16 min-h-16"},Eae={default:"border border-border bg-transparent ",ghost:"bg-transparent"},kae=({children:e,className:t,size:n="6",variant:i="default",type:a="button","aria-label":s,...o})=>r.jsx("button",{type:a,"aria-label":s,className:Bi(t,xae[n],"inline-flex aspect-square shrink-0 items-center justify-center","rounded-md",Eae[i],"text-muted-foreground ","hover:bg-gray-200 dark:hover:bg-gray-800"),...o,children:e}),Sae=({onExpandAll:e,...t})=>r.jsx(kae,{size:"7",onClick:e,"aria-label":"Expand all",...t,children:r.jsx(Nr,{className:"size-3.5"})}),Aae=({onCollapseAll:e,...t})=>r.jsx(kae,{size:"7",onClick:e,"aria-label":"Collapse all",...t,children:r.jsx(Ir,{className:"size-3.5"})}),Tae="text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",Nae={underline:{list:"h-9 flex border-b border-border ",trigger:`w-full justify-center px-3 ${Tae} \n      text-muted-foreground hover:text-foreground data-[state=active]:text-foreground\n       dark:hover:text-gray-200 dark:data-[state=active]:text-gray-200\n      border-b-2 border-transparent data-[state=active]:border-primary \n      dark:data-[state=active]:border-muted -mb-[2px]\n      hover:border-muted `},pill:{list:"h-9 inline-flex gap-1 p-1 bg-muted rounded-lg",trigger:`px-3 ${Tae} rounded-md\n      text-muted-foreground hover:text-foreground data-[state=active]:text-foreground\n       dark:hover:text-gray-200 dark:data-[state=active]:text-gray-200\n      hover:bg-accent data-[state=active]:bg-card data-[state=active]:shadow-sm\n      dark:hover:bg-gray-700 dark:data-[state=active]:bg-gray-600 dark:data-[state=active]:shadow-none`}},Iae=({items:e,defaultValue:t,value:n,onValueChange:i,theme:a="underline",className:s="",tabsListClassName:o="",triggerClassName:l="",dir:c,...u})=>{const d=t||e[0]?.value,h=Nae[a];return r.jsx(x,{className:s,defaultValue:n?void 0:d,value:n,onValueChange:i,dir:c,...u,children:r.jsx(E,{className:Bi(h.list,o),"aria-label":"Navigation tabs",children:e.map(e=>r.jsxs(k,{value:e.value,disabled:e.disabled,className:Bi("flex items-center overflow-hidden",h.trigger,l),children:[e.icon&&r.jsx("span",{className:"mr-2 text-muted-foreground group-data-[state=active]:text-current ",children:e.icon}),r.jsx("span",{className:"truncate",children:e.label})]},e.value))})})},Mae=({title:e,rightContent:t,children:n,defaultOpen:a=!1,className:s="",triggerClassName:o="",contentClassName:l="",onOpenChange:c})=>{const[u,d]=i.useState(a),h=i.useCallback(e=>{d(e),c?.(e)},[c]),p=i.useCallback(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),h(!u))},[h,u]);return r.jsxs(ur,{open:u,onOpenChange:h,className:Bi("rounded-lg",s),children:[r.jsx(Mr,{asChild:!0,children:r.jsxs("div",{tabIndex:0,role:"button",className:Bi("mb-1 flex w-full items-center justify-between gap-2 rounded-lg px-1 py-3 text-left text-sm font-medium text-foreground",o),onKeyDown:p,"aria-expanded":u,"aria-label":`${u?"Collapse":"Expand"} content of "${e}" section`,children:[r.jsxs("div",{className:"flex w-full items-center gap-2",children:[r.jsx(C,{className:Bi("h-3 w-3 text-muted-foreground transition-transform duration-200",u&&"rotate-180")}),r.jsx("span",{className:"truncate",children:e})]}),t]})}),r.jsx(Cr,{className:Bi("data-[state=closed]:animate-slideUp data-[state=open]:animate-slideDown",l),children:n})]})},Cae="absolute top-1/2 -translate-y-1/2 flex items-center justify-center text-foreground",jae=({className:e,onChange:t,onValueChange:n,startIcon:a,onClear:s,ref:o,inputClassName:l,label:c,hideLabel:u=!1,id:h,...p})=>{const f=i.useRef(null);return r.jsxs("div",{className:Bi("w-full",e),children:[c&&r.jsx("label",{htmlFor:h,className:Bi("block text-sm font-medium text-foreground ",u&&"sr-only"),children:c}),r.jsxs("div",{className:Bi("relative flex w-full items-center justify-center",c&&!u&&"mt-1"),children:[r.jsx("input",{id:h,ref:o||f,onChange:e=>{t?.(e),n?.(e.target.value)},className:Bi(l,"flex h-7 items-center truncate","w-full px-2",!!a&&"pl-8",!!s&&"pr-8","rounded border border-border bg-transparent ","text-foreground placeholder:text-muted-foreground ","hover:border-border dark:hover:border-gray-700"),...p}),a&&r.jsx("div",{className:Bi(Cae,"left-2"),"aria-hidden":!0,children:a}),s&&p.value&&r.jsx("button",{className:Bi(Cae,"right-2"),"aria-label":"Clear input value",onClick:()=>{s?.(),o?o.current?.focus():f.current?.focus()},type:"button",children:r.jsx(d,{className:"size-4"})})]})]})},Oae=({data:e})=>r.jsxs("div",{className:"space-y-6",children:[(!e.attributes||0===e.attributes.length)&&r.jsx("div",{className:"p-6 text-center",children:r.jsx("p",{className:"text-muted-foreground ",children:"No attributes available for this span."})}),(e.attributes||[]).map((t,n)=>{const i=t.value.stringValue||t.value.intValue||t.value.boolValue?.toString()||"N/A";return r.jsx(Mae,{title:t.key,defaultOpen:!0,children:r.jsx(jae,{id:`${e.id}-attribute-${n}`,value:i,disabled:!0,readOnly:!0,inputClassName:"font-mono text-xs",className:"w-full"})},`${t.key}-${n}`)})]}),Rae={4:"size-4 text-xs",6:"size-6 text-xs",8:"size-8 text-xs",9:"size-9 text-sm",10:"size-10 text-base",11:"size-11 text-lg",12:"size-12 text-xl",16:"size-16 text-2xl"},Lae={4:"size-3",6:"size-4",8:"size-6",9:"size-7",10:"size-8",11:"size-9",12:"size-10",16:"size-12"},Pae={4:"text-xs",6:"text-xs",8:"text-xs",9:"text-sm",10:"text-base",11:"text-lg",12:"text-xl",16:"text-2xl"},Dae={gray:"bg-muted-foreground",red:"bg-destructive",orange:"bg-chart-1",yellow:"bg-chart-5",teal:"bg-chart-2",indigo:"bg-primary",purple:"bg-primary",sky:"bg-chart-4",cyan:"bg-chart-3",emerald:"bg-accent"},$ae=({src:e,alt:t="Avatar",size:n="10",rounded:a="full",bgColor:s="gray",textColor:o="white",letter:l,className:c="",...u})=>{const[d,h]=i.useState(!1),p=l?l.charAt(0):t.charAt(0).toUpperCase(),f="white"===o?"text-white":"text-black";return r.jsx("div",{className:Bi("flex items-center justify-center overflow-hidden","bg-muted",d&&"border border-border",Rae[n],Pae[n],hae[a],c),...u,children:d?r.jsx(_r,{className:Bi(Lae[n],"text-muted-foreground")}):r.jsx(r.Fragment,{children:e?r.jsx("img",{src:e,alt:t,className:"h-full w-full object-cover",onError:()=>h(!0)}):r.jsx("div",{className:Bi("flex h-full w-full items-center justify-center",Dae[s],f,"font-medium"),children:p})})})},zae={success:"bg-green-500 dark:bg-green-500",error:"bg-red-500 dark:bg-red-500",pending:"bg-violet-500 dark:bg-violet-500",warning:"bg-yellow-500 dark:bg-yellow-500"},Bae={success:"bg-green-100 dark:bg-green-950 text-green-600 dark:text-green-400",error:"bg-red-100 dark:bg-red-950 text-red-600 dark:text-red-400",pending:"bg-violet-100 dark:bg-violet-950 text-violet-600 dark:text-violet-400",warning:"bg-yellow-100 dark:bg-yellow-950 text-yellow-600 dark:text-yellow-400"},Uae=({status:e,variant:t="dot",...n})=>{const i=`Status: ${e}`;return r.jsx("div",{className:"flex size-4 items-center justify-center",...n,children:"dot"===t?r.jsx(Fae,{status:e,title:i}):r.jsx(Hae,{status:e,title:i})})},Fae=({status:e,title:t})=>r.jsx("span",{className:Bi("block size-1.5 rounded-full",zae[e]),"aria-label":t,title:t}),Hae=({status:e,title:t})=>r.jsxs("span",{className:Bi("inline-flex items-center justify-center","h-3.5 w-4 rounded",Bae[e]),"aria-label":t,title:t,children:["success"===e&&r.jsx(D,{className:"size-2.5","aria-hidden":!0}),"error"===e&&r.jsx(yr,{className:"size-2.5","aria-hidden":!0}),"warning"===e&&r.jsx(be,{className:"size-2.5","aria-hidden":!0}),"pending"===e&&r.jsx(vt,{className:"size-2.5","aria-hidden":!0})]}),Gae=({data:e,avatar:t,copyButton:n,actions:a,className:s="mb-4 flex flex-wrap items-center gap-4"})=>{const[o,l]=i.useState(!1);return r.jsxs("div",{className:s,children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[t&&r.jsx($ae,{size:"4",...t}),r.jsx("span",{className:"text-base tracking-wide text-foreground ",children:e.title}),r.jsx("div",{className:"flex size-5 items-center justify-center",children:r.jsx(Uae,{status:e.status})}),n&&r.jsx(kae,{"aria-label":n.isEnabled?"Copy span details":"Copy disabled",variant:"ghost",onClick:()=>{n?.onCopy&&(n.onCopy(e),l(!0),setTimeout(()=>l(!1),2e3))},children:o?r.jsx(D,{className:"size-3 text-muted-foreground"}):r.jsx(je,{className:"size-3 text-muted-foreground"})})]}),a]})},qae=({data:e})=>{const t=Boolean(e.input),n=Boolean(e.output);if(!t&&!n)return r.jsx("div",{className:"p-6 text-center",children:r.jsx("p",{className:"text-muted-foreground ",children:"No input or output data available for this span."})});let i=null,a=null;if("string"==typeof e.input)try{i=JSON.parse(e.input)}catch{i=null}if("string"==typeof e.output)try{a=JSON.parse(e.output)}catch{a=null}return r.jsxs("div",{className:"space-y-3",children:["string"==typeof e.input&&r.jsx(Vae,{section:"Input",content:e.input,parsedContent:i}),"string"==typeof e.output&&r.jsx(Vae,{section:"Output",content:e.output,parsedContent:a})]})},Vae=({section:e,content:t,parsedContent:n})=>{const[a,s]=i.useState("plain"),[o,l]=i.useState(!0),c=[{value:"json",label:"JSON",disabled:!n},{value:"plain",label:"Plain"}];return r.jsx(Mae,{title:e,defaultOpen:!0,onOpenChange:l,rightContent:o?r.jsx(Iae,{items:c,defaultValue:"plain",value:a,onValueChange:s,theme:"pill",onClick:e=>e.stopPropagation()}):null,triggerClassName:"min-h-16",children:r.jsx(Wae,{content:t,section:e,tab:a,parsedContent:n})})},Wae=({tab:e,content:t,section:n,parsedContent:i})=>t?r.jsxs("div",{className:"relative rounded-lg border border-border ",children:[r.jsx(Zae,{section:n,content:t}),"json"===e&&r.jsx(r.Fragment,{children:i?r.jsx(jr,{booleanStyle:"color: hsl(var(--primary));",className:"overflow-x-auto rounded-xl p-4 text-left",data:i,id:`json-pretty-${n}`,keyStyle:"color: hsl(var(--primary));",mainStyle:"color: hsl(var(--muted-foreground)); font-size: 12px;",stringStyle:"color: hsl(var(--chart-2));",valueStyle:"color: hsl(var(--chart-1));"}):r.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Invalid JSON format"})}),"plain"===e&&r.jsx("div",{className:"rounded-lg bg-muted/50 p-4",children:r.jsx("pre",{className:"overflow-x-auto whitespace-pre-wrap text-left font-mono text-xs text-foreground",children:t})})]}):r.jsx("p",{className:"p-3 text-sm italic text-muted-foreground ",children:"No data available"}),Zae=({section:e,content:t})=>{const[n,a]=i.useState(!1);return r.jsx(kae,{onClick:()=>{navigator.clipboard.writeText(t),a(!0),setTimeout(()=>a(!1),2e3)},"aria-label":n?`${e} Data Copied`:`Copy ${e} Data`,variant:"ghost",className:"absolute right-1.5 top-1.5",children:n?r.jsx(D,{className:"size-3"}):r.jsx(je,{className:"size-3"})})},Kae={4:"px-1 gap-1 h-4",5:"px-1.5 gap-1 h-5",6:"px-2 gap-1.5 h-6",7:"px-2.5 gap-2 h-7"},Yae={4:"text-xs font-normal leading-3",5:"text-xs font-medium",6:"text-sm font-medium",7:"text-sm font-medium"},Jae=({label:e,theme:t="gray",variant:n="solid",size:i="4",iconStart:a,iconEnd:s,className:o="",...l})=>{const{bg:c,darkBg:u,text:d,darkText:h}=pae[t],p="outline"===n?`border ${d} ${h} bg-transparent dark:bg-transparent border-current`:`${c} ${d} ${u} ${h}`;return r.jsxs("span",{className:Bi("inline-flex min-w-0 items-center overflow-hidden rounded font-medium",p,Kae[i],o),...l,children:[a&&r.jsx("span",{className:"shrink-0",children:a}),r.jsx("span",{className:Bi(Yae[i],"min-w-0 max-w-full flex-shrink-0 truncate tracking-normal"),children:e}),s&&r.jsx("span",{className:"shrink-0",children:s})]})},Xae=({timestamp:e,size:t,...n})=>r.jsx(Jae,{variant:"outline",theme:"gray",size:t,...n,label:Qae(e)});function Qae(e){return new Date(e).toLocaleString()}const ese=({data:e})=>{const t=vae(e.type),n=oae(e);return r.jsxs("div",{className:"mb-4 flex flex-wrap items-center justify-start gap-1",children:[r.jsx(Jae,{iconStart:r.jsx(t,{className:"size-2.5"}),theme:mae(e.type),size:"4",label:gae(e.type)}),"number"==typeof e.tokensCount&&r.jsx(Jae,{iconStart:r.jsx(Or,{className:"size-2.5"}),theme:"gray",size:"4",label:e.tokensCount}),"number"==typeof e.cost&&r.jsx(Jae,{theme:"gray",size:"4",label:`$ ${e.cost.toFixed(4)}`}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:["LATENCY: ",lae(n)]}),"number"==typeof e.startTime&&r.jsx(Xae,{timestamp:e.startTime})]})},tse=({data:e})=>r.jsx("div",{className:"pt-4",children:r.jsx("div",{className:"rounded border border-border bg-transparent ",children:r.jsx(jr,{booleanStyle:"color: hsl(var(--primary));",className:"overflow-x-auto rounded-xl p-4 text-left",data:e.raw,id:`json-pretty-${e.id||"span-details"}`,keyStyle:"color: hsl(var(--primary));",mainStyle:"color: hsl(var(--muted-foreground)); font-size: 12px;",stringStyle:"color: hsl(var(--chart-2));",valueStyle:"color: hsl(var(--chart-1));"})})}),rse=({data:e,avatar:t,defaultTab:n,className:a,copyButton:s,headerActions:o,customHeader:l,onTabChange:c})=>{const[u,d]=i.useState(n||"input-output"),h=[{value:"input-output",label:"In/Out",icon:r.jsx(Rr,{className:"size-4"})},{value:"attributes",label:"Attributes",icon:r.jsx(Lr,{className:"size-4"})},{value:"raw",label:"RAW",icon:r.jsx(Pr,{className:"size-4"})}];const p="function"==typeof o?o(e):o,f=l?"function"==typeof l?l({data:e}):l:r.jsx(Gae,{data:e,avatar:t,copyButton:s,actions:p});return r.jsxs("div",{className:Bi("min-w-0 rounded-lg border border-border bg-card p-4 shadow-sm",a),children:[f,r.jsx(ese,{data:e}),r.jsx(Iae,{items:h,value:u,onValueChange:function(e){d(e),c?.(e)},theme:"underline",defaultValue:n}),"input-output"===u&&r.jsx(qae,{data:e}),"attributes"===u&&r.jsx(Oae,{data:e}),"raw"===u&&r.jsx(tse,{data:e})]})},nse=({...e})=>r.jsx(jae,{startIcon:r.jsx(Xe,{className:"size-4"}),placeholder:"Filter...",...e}),ise=({cost:e,size:t,...n})=>r.jsx(Jae,{theme:"gray",size:t,...n,label:`$ ${e}`}),ase=({tokensCount:e,size:t,...n})=>r.jsx(Jae,{iconStart:r.jsx(Or,{className:"size-2.5"}),theme:"gray",size:t,...n,label:e}),sse=({trace:e,avatar:t})=>r.jsxs("header",{className:"flex min-w-0 flex-wrap items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex min-w-0 items-center gap-1.5 overflow-hidden",children:[t&&r.jsx($ae,{size:"4",...t}),r.jsx("h3",{className:"font-medium max-w-full truncate text-sm text-foreground",children:e.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jae,{size:"5",theme:"gray",variant:"outline",label:1===e.spansCount?"1 span":`${e.spansCount} spans`}),r.jsx(Jae,{size:"5",theme:"gray",variant:"outline",label:lae(e.durationMs)})]})]}),ose=({trace:e,avatar:t,onClick:n,badges:a,isSelected:s})=>{const o=i.useCallback(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n?.())},[n]),{name:l,agentDescription:c,totalCost:u,totalTokens:d,startTime:h}=e;return r.jsxs("div",{className:Bi("group w-full","flex flex-col gap-2.5 p-4","cursor-pointer",s?"bg-muted":"bg-card"),role:"button",tabIndex:0,onClick:n,onKeyDown:o,"aria-label":`Select trace ${l}`,children:[r.jsx(sse,{trace:e,avatar:t}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("span",{className:"mr-4 max-w-full truncate text-sm text-muted-foreground ",children:c}),"number"==typeof u&&r.jsx(ise,{cost:u}),"number"==typeof d&&r.jsx(ase,{tokensCount:d}),a?.map((e,t)=>r.jsx(Jae,{theme:e.theme,size:"4",label:e.label},t)),"number"==typeof h&&r.jsx(Xae,{timestamp:h})]})]})},lse=({traces:e,expanded:t,onExpandStateChange:n,className:i,onTraceSelect:a,selectedTrace:s})=>r.jsxs("div",{className:Bi("w-full min-w-0","flex flex-col gap-3",t?"w-full":"w-fit",i),children:[r.jsx("header",{className:"flex min-h-6 items-center justify-between gap-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:Bi("font-semibold text-lg text-foreground",!t&&"hidden"),children:"Traces"}),r.jsx(Jae,{size:"5",theme:"teal","aria-label":`Total number of traces: ${e.length}`,label:e.length})]})}),t&&r.jsx("ul",{className:"flex flex-col items-center overflow-hidden rounded border border-border ",children:e.map(e=>r.jsx("li",{className:"w-full list-none border-b-border [&:not(:last-child)]:border-b",children:r.jsx(ose,{trace:e,onClick:()=>a?.(e),isSelected:s?.id===e.id,badges:e.badges})},e.id))})]}),cse=({data:e})=>{const t=vae(e.type);return r.jsxs("div",{className:"flex flex-wrap items-center justify-start gap-1",children:[r.jsx(Jae,{iconStart:r.jsx(t,{className:"size-2.5"}),theme:mae(e.type),size:"4",label:gae(e.type)}),"number"==typeof e.tokensCount&&r.jsx(ase,{tokensCount:e.tokensCount}),"number"==typeof e.cost&&r.jsx(ise,{cost:e.cost})]})},use=({type:e})=>"empty"===e?r.jsx("div",{className:"w-5 shrink-0 grow"}):r.jsxs("div",{className:"relative w-5 shrink-0 grow",children:[("vertical"===e||"t-right"===e)&&r.jsx("div",{className:"absolute bottom-0 left-1/2 top-0 w-0.5 -translate-x-1/2 bg-muted"}),"t-right"===e&&r.jsx("div",{className:"absolute left-2.5 top-2.5 h-0.5 w-2.5 -translate-y-[3px] bg-muted"}),"corner-top-right"===e&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute left-1/2 top-2 size-0.5 -translate-x-1/2 -translate-y-px bg-muted"}),r.jsx("div",{className:"absolute left-1/2 top-2.5 h-0.5 w-2.5 -translate-y-[3px] bg-muted"}),r.jsx("div",{className:"absolute left-1/2 top-0 h-[7px] w-0.5 -translate-x-px bg-muted"})]})]}),dse={purple:"bg-primary",indigo:"bg-primary",orange:"bg-chart-1",teal:"bg-chart-2",cyan:"bg-chart-3",sky:"bg-chart-4",yellow:"bg-chart-5",emerald:"bg-accent",red:"bg-destructive",gray:"bg-muted-foreground"},hse=({spanCard:e,theme:t,minStart:n,maxEnd:i,className:a})=>{const{startPercent:s,widthPercent:o}=cae({spanCard:e,minStart:n,maxEnd:i});return r.jsx("span",{className:Bi("relative flex h-4 min-w-20 flex-1 rounded bg-muted",a),children:r.jsx("span",{className:"pointer-events-none absolute inset-x-1 top-1/2 h-1.5 -translate-y-1/2",children:r.jsx("span",{className:`absolute h-full rounded-sm ${dse[t]}`,style:{left:`${s}%`,width:`${o}%`}})})})},pse=({isExpanded:e,title:t,onToggleClick:n})=>r.jsx(Mr,{asChild:!0,children:r.jsx("button",{className:"flex h-4 w-5 shrink-0 items-center justify-center",onClick:n,onKeyDown:n,"aria-label":`${e?"Collapse":"Expand"} ${t} children`,"aria-expanded":e,type:"button",children:e?r.jsx(C,{"aria-hidden":"true",className:"size-3 text-muted-foreground"}):r.jsx(le,{"aria-hidden":"true",className:"size-3 text-muted-foreground"})})}),fse=20,mse=320,gse={withStatus:!0,expandButton:"inside"},vse=({data:e,level:t,selectedSpan:n,onSpanSelect:i,minStart:a,maxEnd:s,prevLevelConnectors:o,expandedSpansIds:l,onExpandSpansIdsChange:c,viewOptions:u=gse})=>e.children?.length?r.jsx("div",{className:"relative",children:r.jsx(Cr,{children:r.jsx("ul",{role:"group",children:e.children.map((d,h)=>r.jsx(yse,{viewOptions:u,data:d,minStart:a,maxEnd:s,level:t+1,selectedSpan:n,onSpanSelect:i,isLastChild:h===(e.children||[]).length-1,prevLevelConnectors:o,expandedSpansIds:l,onExpandSpansIdsChange:c},d.id))})})}):null,yse=({data:e,level:t=0,selectedSpan:n,onSpanSelect:a,viewOptions:s=gse,avatar:o,minStart:l,maxEnd:c,isLastChild:u,prevLevelConnectors:d=[],expandedSpansIds:h,onExpandSpansIdsChange:p})=>{const f=h.includes(e.id),m=s.withStatus??gse.withStatus,g=s.expandButton||gse.expandButton,v=i.useCallback(t=>{const r=h.includes(e.id);r&&!t&&p(h.filter(t=>t!==e.id)),!r&&t&&p([...h,e.id])},[f,h,e.id,p]),y={isExpanded:f,hasChildren:Boolean(e.children?.length),isSelected:n?.id===e.id},b=((e,t)=>{const r=i.useCallback(()=>{t?.(e)},[e,t]),n=i.useCallback(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r())},[r]),a=i.useCallback(e=>{e.stopPropagation()},[]);return{handleCardClick:r,handleKeyDown:n,handleToggleClick:a}})(e,a),{durationMs:_}=cae({spanCard:e,minStart:l,maxEnd:c}),w="inside"===g&&y.hasChildren,x=(({level:e,hasExpandButton:t})=>0===e?0:t?4:8)({level:t,hasExpandButton:w}),E=(({level:e,hasExpandButton:t,contentPadding:r,expandButton:n})=>{let i=mse-e*fse;return t&&"inside"===n&&(i-=fse),"outside"===n&&0===e&&(i-=fse),i-r})({level:t,hasExpandButton:w,contentPadding:x,expandButton:g}),{connectors:k,connectorsColumnWidth:S}=(({level:e,hasExpandButton:t,isLastChild:r,prevConnectors:n,expandButton:i})=>{const a=[];if(0===e)return{connectors:"inside"===i?[]:["vertical"],connectorsColumnWidth:20};for(let o=0;o<e-1;o++)a.push("vertical");r||a.push("t-right"),r&&a.push("corner-top-right");let s=a.length*fse;t&&(s+=fse);for(let o=0;o<n.length;o++)"empty"!==n[o]&&"corner-top-right"!==n[o]||(a[o]="empty");return{connectors:a,connectorsColumnWidth:s}})({level:t,hasExpandButton:w,isLastChild:u,prevConnectors:d,expandButton:g}),A=(({connectorsColumnWidth:e,expandButton:t})=>"inside"===t?`${e}px 1fr`:`${e}px 1fr ${fse}px`)({connectorsColumnWidth:S,expandButton:g});return r.jsx("li",{role:"treeitem","aria-expanded":y.hasChildren?y.isExpanded:void 0,className:"list-none",children:r.jsxs(ur,{open:y.isExpanded,onOpenChange:v,children:[r.jsxs("div",{className:Bi("relative grid w-full rounded-md transition-colors",y.isSelected?"bg-accent/50 border border-accent":"hover:bg-muted/30"),style:{gridTemplateColumns:A},onClick:b.handleCardClick,onKeyDown:b.handleKeyDown,tabIndex:0,role:"button","aria-pressed":y.isSelected,"aria-describedby":`span-card-desc-${e.id}`,"aria-expanded":y.hasChildren?y.isExpanded:void 0,"aria-label":`${y.isSelected?"Selected":"Not selected"} span card for ${e.title} at level ${t}`,children:[r.jsxs("div",{className:"flex flex-nowrap",children:[k.map((e,t)=>r.jsx(use,{type:e},`${e}-${t}`)),w&&r.jsxs("div",{className:"flex w-5 flex-col items-center",children:[r.jsx(pse,{isExpanded:y.isExpanded,title:e.title,onToggleClick:b.handleToggleClick}),y.isExpanded&&r.jsx(use,{type:"vertical"})]})]}),r.jsxs("div",{className:Bi("flex flex-nowrap items-center align-middle gap-x-3 gap py-3 px-2","min-h-5 w-full cursor-pointer",0!==t&&!w&&"pl-2",0!==t&&w&&"pl-1"),children:[r.jsxs("div",{className:"relative flex min-h-4 flex-shrink-0 flex-grow-0 flex-wrap items-start gap-1",style:{width:`min(${E}px, 100%)`,minWidth:140},children:[o&&r.jsx($ae,{size:"4",...o}),r.jsx("h3",{className:"mr-1 h-4 max-w-32 truncate text-sm leading-[14px] text-foreground ",title:e.title,children:e.title}),r.jsx(cse,{data:e})]}),r.jsxs("div",{className:"flex flex-shrink flex-grow flex-nowrap items-center justify-end gap-1 min-w-0",children:["outside"===g&&m&&r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Uae,{status:e.status})}),r.jsx(hse,{theme:mae(e.type),minStart:l,maxEnd:c,spanCard:e,className:"max-w-48 flex-shrink"}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx("span",{className:"inline-block w-14 whitespace-nowrap px-1 text-right text-xs text-foreground",children:lae(_)}),"inside"===g&&m&&r.jsx("div",{children:r.jsx(Uae,{status:e.status})})]})]})]}),"outside"===g&&(y.hasChildren?r.jsx(pse,{isExpanded:y.isExpanded,title:e.title,onToggleClick:b.handleToggleClick}):r.jsx("div",{}))]}),r.jsx(vse,{minStart:l,maxEnd:c,viewOptions:s,data:e,level:t,selectedSpan:n,onSpanSelect:a,prevLevelConnectors:k,expandedSpansIds:h,onExpandSpansIdsChange:p})]})})},bse=({spans:e,onSpanSelect:t,className:n="",selectedSpan:i,expandedSpansIds:a,onExpandSpansIdsChange:s,spanCardViewOptions:o})=>{const l=uae(e),{minStart:c,maxEnd:u}=(d=l).reduce((e,t)=>{const r=+new Date(t.startTime),n=+new Date(t.endTime);return{minStart:Math.min(e.minStart,r),maxEnd:Math.max(e.maxEnd,n)}},{minStart:d.length>0?+new Date(d[0].startTime):1/0,maxEnd:d.length>0?+new Date(d[0].endTime):-1/0});var d;return r.jsx("div",{className:"w-full min-w-0 p-4",children:r.jsx("ul",{className:Bi(n,"overflow-x-auto space-y-1"),role:"tree","aria-label":"Hierarchical card list",children:e.map((n,l)=>r.jsx(yse,{data:n,level:0,selectedSpan:i,onSpanSelect:t,minStart:c,maxEnd:u,isLastChild:l===e.length-1,expandedSpansIds:a,onExpandSpansIdsChange:s,viewOptions:o},n.id))})})},_se=({data:e})=>{const[t,n]=i.useState(e[0]?.traceRecord),[a,s]=i.useState(e[0]?.spans??[]),[o,l]=i.useState(e[0]?.spans?.[0]?.children?.[0]),[c,u]=i.useState(""),[d,h]=i.useState(!0),p=i.useMemo(()=>e.map(e=>({...e.traceRecord,badges:e.badges,spanCardViewOptions:e.spanCardViewOptions})),[e]),f=i.useMemo(()=>c.trim()?dae(a,c):a,[a,c]),m=i.useMemo(()=>uae(a).map(e=>e.id),[a]),[g,v]=i.useState(m);i.useEffect(()=>{v(m)},[m]);const y=i.useCallback(()=>{v(m)},[m]),b=i.useCallback(()=>{v([])},[]);i.useEffect(()=>{l(a[0])},[a]);const _=i.useCallback(t=>{n(t),s(e.find(e=>e.traceRecord.id===t.id)?.spans??[])},[e]),w={traceRecords:p,traceListExpanded:d,setTraceListExpanded:h,selectedTrace:t,setSelectedTrace:n,selectedTraceSpans:a,setSelectedTraceSpans:s,selectedSpan:o,setSelectedSpan:l,searchValue:c,setSearchValue:u,filteredSpans:f,expandedSpansIds:g,setExpandedSpansIds:v,handleExpandAll:y,handleCollapseAll:b,handleTraceSelect:_};return r.jsxs("div",{className:"h-full w-full p-4 lg:p-8",children:[r.jsx("div",{className:"hidden lg:block",children:r.jsx(wse,{...w})}),r.jsx("div",{className:"lg:hidden",children:r.jsx(xse,{...w})})]})},wse=({traceRecords:e,traceListExpanded:t,setTraceListExpanded:n,selectedTrace:i,selectedSpan:a,setSelectedSpan:s,searchValue:o,setSearchValue:l,filteredSpans:c,expandedSpansIds:u,setExpandedSpansIds:d,handleExpandAll:h,handleCollapseAll:p,handleTraceSelect:f})=>r.jsx("div",{className:"flex flex-col gap-4",children:i?r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs(Za,{value:i.id,onValueChange:t=>{const r=e.find(e=>e.id===t);r&&f(r)},children:[r.jsx(Ja,{className:"w-full h-auto py-3",children:r.jsx(Ya,{children:r.jsxs("div",{className:"flex items-center gap-4 w-full",children:[r.jsx("span",{className:"font-semibold text-base",children:i.name}),r.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:["number"==typeof i.startTime&&r.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:new Date(i.startTime).toLocaleTimeString()}),r.jsx(Jae,{size:"4",theme:"gray",variant:"outline",label:`${i.spansCount} span${1===i.spansCount?"":"s"}`}),r.jsx(Jae,{size:"4",theme:"gray",variant:"outline",label:lae(i.durationMs)})]})]})})}),r.jsx(es,{className:"w-full max-w-2xl max-h-[400px]",children:e.map(e=>r.jsx(rs,{value:e.id,className:"py-2.5 px-4 cursor-pointer",children:r.jsxs("div",{className:"flex items-center justify-between gap-4 w-full pr-6",children:[r.jsxs("div",{className:"flex flex-col gap-1 min-w-0",children:[r.jsx("span",{className:"font-semibold text-base text-foreground",children:e.name}),e.agentDescription&&r.jsx("span",{className:"text-xs text-muted-foreground",children:e.agentDescription})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:["number"==typeof e.startTime&&r.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:new Date(e.startTime).toLocaleTimeString()}),r.jsx(Jae,{size:"4",theme:"gray",variant:"outline",label:`${e.spansCount} span${1===e.spansCount?"":"s"}`}),r.jsx(Jae,{size:"4",theme:"gray",variant:"outline",label:lae(e.durationMs)})]})]})},e.id))})]}),r.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-border p-4",children:[r.jsx(nse,{id:"span-search-desktop",name:"search",onClear:()=>l(""),value:o,onValueChange:l,className:"max-w-60 grow"}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[r.jsx(Sae,{onExpandAll:h}),r.jsx(Aae,{onCollapseAll:p})]})})]}),0===c.length?r.jsx("div",{className:"p-3 text-center text-muted-foreground",children:"No spans found"}):r.jsx(bse,{spans:c,onSpanSelect:s,selectedSpan:a,expandedSpansIds:u,onExpandSpansIdsChange:d,spanCardViewOptions:i.spanCardViewOptions})]}),a?r.jsx(rse,{data:a}):r.jsx(Ese,{title:"Select a span to see the details"})]}):r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs(Za,{value:"",onValueChange:t=>{const r=e.find(e=>e.id===t);r&&f(r)},children:[r.jsx(Ja,{className:"w-full",children:r.jsx(Ya,{placeholder:"Select a trace to view details..."})}),r.jsx(es,{className:"w-full max-w-2xl max-h-[400px]",children:e.map(e=>r.jsx(rs,{value:e.id,className:"py-2.5 px-4 cursor-pointer",children:r.jsxs("div",{className:"flex items-center justify-between gap-4 w-full pr-6",children:[r.jsxs("div",{className:"flex flex-col gap-1 min-w-0",children:[r.jsx("span",{className:"font-semibold text-base text-foreground",children:e.name}),e.agentDescription&&r.jsx("span",{className:"text-xs text-muted-foreground",children:e.agentDescription})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:["number"==typeof e.startTime&&r.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:new Date(e.startTime).toLocaleTimeString()}),r.jsx(Jae,{size:"4",theme:"gray",variant:"outline",label:`${e.spansCount} span${1===e.spansCount?"":"s"}`}),r.jsx(Jae,{size:"4",theme:"gray",variant:"outline",label:lae(e.durationMs)})]})]})},e.id))})]}),r.jsx(Ese,{title:"Select a trace to see the details"})]})}),xse=({traceRecords:e,traceListExpanded:t,setTraceListExpanded:n,selectedTrace:i,setSelectedTrace:a,selectedTraceSpans:s,setSelectedTraceSpans:o,selectedSpan:l,setSelectedSpan:c,searchValue:u,setSearchValue:d,filteredSpans:h,expandedSpansIds:p,setExpandedSpansIds:f,handleExpandAll:m,handleCollapseAll:g,handleTraceSelect:v})=>i?i&&s.length&&!l?r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx(wae,{onClick:()=>{a(void 0),o([])},iconStart:r.jsx(Dr,{className:"size-3"}),variant:"ghost",className:"self-start",children:"Traces list"}),r.jsx(sse,{trace:i}),r.jsxs("div",{className:"rounded border border-border bg-card",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-border p-3",children:[r.jsx(nse,{id:"span-search-mobile",name:"search",onClear:()=>d(""),value:u,onValueChange:d,className:"max-w-60 grow"}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"ml-auto flex items-center gap-3",children:[r.jsx(Sae,{onExpandAll:m}),r.jsx(Aae,{onCollapseAll:g})]})})]}),0===h.length?r.jsx("div",{className:"p-3 text-center text-muted-foreground",children:"No spans found"}):r.jsx(bse,{spans:h,spanCardViewOptions:i.spanCardViewOptions,onSpanSelect:c,selectedSpan:l,expandedSpansIds:p,onExpandSpansIdsChange:f})]})]}):i&&s.length&&l?r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx(wae,{onClick:()=>{c(void 0)},iconStart:r.jsx(Dr,{className:"size-3"}),variant:"ghost",className:"self-start",children:"Tree View"}),r.jsx(rse,{data:l})]}):null:r.jsx(lse,{traces:e,expanded:t,onExpandStateChange:n,onTraceSelect:v,selectedTrace:i}),Ese=({title:e})=>r.jsx("p",{className:"hidden items-center justify-center rounded-lg bg-muted p-4 text-center text-muted-foreground lg:flex",children:e}),kse=lz(),Sse=({agentId:e})=>{const t=function(e,t,r={}){const n=HH();return G({queryKey:["agent",e,"runs","default"],queryFn:async()=>{if(!e)throw new Error("Agent ID is required");return $H.runs.listRuns(e,void 0)},enabled:Boolean(e),staleTime:zH,refetchInterval:!(n.isOffline||!Boolean(e))&&zH,refetchIntervalInBackground:!1,...!n.isOffline&&"slow-2g"===n.effectiveType&&{refetchInterval:BH},...r})}(e),n=t.data?.runs??[],a=ze({queries:n.map(t=>({queryKey:["agent",e,"runs","detail",t.runId,null],queryFn:async()=>kse.runs.getRun(e,t.runId),enabled:Boolean(e&&t.runId),staleTime:3e4}))}),s=i.useMemo(()=>n.map((e,t)=>{const r=a[t];return r?.data?{traceRecord:sae.convertRunSummaryToTraceRecord(e),spans:sae.convertRunDetailToTraceSpans(r.data)}:null}).filter(e=>null!==e),[n,...a.map(e=>e.data)]),o=t.isLoading,l=t.error?t.error.message:void 0,c=n.length>0,u=s.length>0;return o?r.jsx("div",{className:"flex items-center justify-center h-32",children:r.jsx(he,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):l?r.jsxs("div",{className:"px-4 py-3 text-sm text-destructive",children:["Failed to load runs: ",l]}):c?u?r.jsx("div",{className:"h-full w-full",children:r.jsx(_se,{data:s})}):r.jsxs("div",{className:"flex items-center justify-center h-32",children:[r.jsx(he,{className:"h-5 w-5 animate-spin text-muted-foreground"}),r.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading run details..."})]}):r.jsx("div",{className:"px-4 py-8 text-sm text-center text-muted-foreground",children:"No agent runs yet. Runs will appear here after the agent processes messages."})};function Ase({agentId:e,agentName:t,channelId:n}){const{currentTab:a,setTab:s}=function(e){const[t,r]=i.useState("details"),n=i.useCallback(()=>{try{const e=localStorage.getItem(aae);return e?JSON.parse(e):{}}catch(e){return P$("Error reading agent tab states from localStorage:",e),{}}},[]),a=i.useCallback(e=>{try{localStorage.setItem(aae,JSON.stringify(e))}catch(t){P$("Error saving agent tab states to localStorage:",t)}},[]);return i.useEffect(()=>{if(!e)return void r("details");const t=n()[e]||"details";r(t)},[e,n]),{currentTab:t,setTab:i.useCallback(t=>{if(r(t),e){const r={...n(),[e]:t};a(r)}},[e,n,a])}}(e),{data:o,isLoading:l}=function(e,t={}){const r=HH();return G({queryKey:["agentPanels",e],queryFn:async()=>{if(!e)throw new Error("Agent ID required");return{success:!0,data:(await $H.agents.getAgentPanels(e)).panels}},enabled:Boolean(e),staleTime:BH,refetchInterval:!(r.isOffline||!Boolean(e))&&UH,refetchIntervalInBackground:!1,...!r.isOffline&&"slow-2g"===r.effectiveType&&{refetchInterval:FH},...t})}(e,{enabled:!!e}),{data:c,isLoading:u,error:d}=qH(e,{enabled:!!e&&"details"===a}),h=c?.data,p=i.useMemo(()=>o?.data||[],[o]),f=i.useMemo(()=>[...[{value:"details",label:"Details",icon:r.jsx(be,{className:"h-4 w-4"})},{value:"timeline",label:"Timeline",icon:r.jsx(vr,{className:"h-4 w-4"})},{value:"actions",label:"Model Calls",icon:r.jsx(Ne,{className:"h-4 w-4"})},{value:"memories",label:"Memories",icon:r.jsx(Ke,{className:"h-4 w-4"})},{value:"logs",label:"Logs",icon:r.jsx(zr,{className:"h-4 w-4"})}],...p.map(e=>({value:e.name,label:e.name,icon:r.jsx($r,{className:"h-4 w-4"})}))],[p]);return r.jsxs(Oa,{defaultValue:"details",value:a,onValueChange:s,className:"flex flex-col h-screen w-full max-w-full",children:[r.jsxs(Ra,{className:"flex w-full max-w-full overflow-x-auto flex-shrink-0",children:[f.map(e=>r.jsxs(La,{value:e.value,className:"flex items-center gap-1.5 flex-shrink-0",children:[e.icon,r.jsx("span",{className:"truncate",children:e.label})]},e.value)),l&&r.jsx(r.Fragment,{children:[...Array(2)].map((e,t)=>r.jsx(aa,{className:"h-9 w-full rounded-md flex-shrink-0"},`skel-tab-${t}`))})]}),r.jsxs(Pa,{value:"details",className:"overflow-y-auto overflow-x-hidden flex-1 p-4 w-full max-w-full min-h-0",children:["details"===a&&e&&r.jsxs(r.Fragment,{children:[u&&r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(he,{className:"h-6 w-6 animate-spin text-primary"})}),d&&r.jsxs("div",{className:"text-red-500 break-words",children:["Error loading agent details: ",d.message]}),!u&&!d&&h&&r.jsx("div",{className:"w-full max-w-full",children:r.jsx(iae,{agent:h,agentId:e,onSaveComplete:()=>{}})}),!u&&!d&&!h&&!l&&r.jsx("div",{className:"text-muted-foreground",children:"Agent details not found."})]}),"details"===a&&!e&&r.jsx("div",{className:"p-4 text-muted-foreground",children:"Select an agent to see their details."})]}),r.jsxs(Pa,{value:"timeline",className:"overflow-y-auto overflow-x-hidden flex-1 w-full max-w-full min-h-0 p-0",children:["timeline"===a&&e&&r.jsx("div",{className:"w-full max-w-full h-full",children:r.jsx(Sse,{agentId:e})}),"timeline"===a&&!e&&r.jsx("div",{className:"p-4 text-muted-foreground",children:"Select an agent to see run activity."})]}),r.jsxs(Pa,{value:"actions",className:"overflow-y-auto overflow-x-hidden flex-1 w-full max-w-full min-h-0",children:["actions"===a&&e&&r.jsx("div",{className:"w-full max-w-full",children:r.jsx(eae,{agentId:e})}),"actions"===a&&!e&&r.jsx("div",{className:"p-4 text-muted-foreground",children:"Select an agent to see their actions."})]}),r.jsxs(Pa,{value:"logs",className:"overflow-y-auto overflow-x-hidden flex-1 w-full max-w-full min-h-0",children:["logs"===a&&e&&r.jsx("div",{className:"w-full max-w-full",children:r.jsx(wG,{agentName:t,level:"all"})}),"logs"===a&&!e&&r.jsx("div",{className:"p-4 text-muted-foreground",children:"Select an agent to see their logs."})]}),r.jsxs(Pa,{value:"memories",className:"overflow-y-auto overflow-x-hidden flex-1 w-full max-w-full min-h-0",children:["memories"===a&&e&&r.jsx("div",{className:"w-full max-w-full",children:r.jsx(rae,{agentId:e,agentName:t,channelId:n})}),"memories"===a&&!e&&r.jsx("div",{className:"p-4 text-muted-foreground",children:"Select an agent to see their memories."})]}),p.map(t=>r.jsx(Pa,{value:t.name,className:"overflow-y-auto overflow-x-hidden flex-1 w-full max-w-full min-h-0",children:a===t.name&&e&&r.jsx("iframe",{src:t.url,title:t.name,className:"w-full h-full border-0 flex-1 max-w-full"})},t.name))]})}const Tse=i.forwardRef(({className:e,...t},n)=>{const a=i.useRef(null);return i.useEffect(()=>{(()=>{const e=a.current;e&&(e.style.height="auto",e.style.height=Math.min(e.scrollHeight,160)+"px")})()},[t.value]),r.jsx(Da,{autoComplete:"off",ref:e=>{"function"==typeof n?n(e):n&&(n.current=e),a.current=e},name:"message",className:Bi("px-4 py-3 bg-background text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring disabled:cursor-not-allowed disabled:opacity-50 w-full rounded-md flex items-center h-16 resize-none",e),...t})});let Nse;Tse.displayName="ChatInput";let Ise,Mse=[];const Cse=(e,t)=>String(e).padStart(t,"0"),jse=({className:e,timerClassName:t,agentId:n,onChange:a})=>{const{toast:s}=Va(),[o,l]=i.useState(!1),[c,u]=i.useState(!1),[d,h]=i.useState(0),[p,f]=i.useState({id:-1,name:"",file:null}),m=Math.floor(d%3600/60),g=d%60,[v,y]=i.useMemo(()=>Cse(m,2).split(""),[m]),[b,_]=i.useMemo(()=>Cse(g,2).split(""),[g]),w=i.useRef({stream:null,analyser:null,mediaRecorder:null,audioContext:null}),x=lz(),E=Be({mutationKey:["whisper"],mutationFn:e=>x.audio.transcribe(n,{audio:e}),onSuccess:e=>{e?.text&&a(e.text)},onError:e=>{s({variant:"destructive",title:"Unable to start recording",description:e.message}),console.log(e)}});return i.useEffect(()=>(o&&(Ise=setTimeout(()=>{h(d+1)},1e3)),()=>clearTimeout(Ise)),[o,d]),E?.isPending?r.jsx(Yi,{variant:"ghost",disabled:!0,size:"icon",children:r.jsx(vt,{className:"size-4"})}):r.jsxs("div",{className:Bi("flex items-center justify-center gap-2 border-l border-l-transparent border-opacity-0 transition-all duration-300",{"border-opacity-100 border-l-border pl-2":o},e),children:[o?r.jsxs("div",{className:"flex gap-1 items-center",children:[r.jsx("div",{className:"bg-red-500 rounded-full h-2.5 w-2.5 animate-pulse"}),r.jsx(Ose,{minuteLeft:v,minuteRight:y,secondLeft:b,secondRight:_,timerClassName:t})]}):null,r.jsxs("div",{className:"flex items-center gap-2",children:[o?r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx(Yi,{onClick:function(){const{mediaRecorder:e,stream:t,analyser:r,audioContext:n}=w.current;if(e&&(e.onstop=()=>{Mse=[]},e.stop()),r&&r.disconnect(),t)for(const i of t.getTracks())i.stop();n&&n.close(),l(!1),u(!0),h(0),clearTimeout(Ise)},size:"icon",variant:"ghost",children:r.jsx(fe,{className:"size-4"})})}),r.jsx(ca,{className:"m-2",children:r.jsx("span",{children:" Reset recording"})})]}):null,r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:o?r.jsx(Yi,{onClick:()=>{Nse.onstop=()=>{const e=new Blob(Mse,{type:"audio/wav"});E.mutate(e),f({...p,file:window.URL.createObjectURL(e)}),Mse=[]},Nse.stop(),l(!1),u(!0),h(0),clearTimeout(Ise)},variant:"ghost",size:"icon",children:r.jsx(Fr,{className:"size-4"})}):r.jsxs(Yi,{variant:"ghost",size:"icon",onClick:()=>{navigator.mediaDevices?.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{l(!0);const t=new(0,window.AudioContext),r=t.createAnalyser();t.createMediaStreamSource(e).connect(r),w.current={stream:e,analyser:r,mediaRecorder:null,audioContext:t};const n={mimeType:MediaRecorder.isTypeSupported("audio/mpeg")?"audio/mpeg":MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/wav"};w.current.mediaRecorder=new MediaRecorder(e,n),w.current.mediaRecorder.start(),Mse=[],Nse=new MediaRecorder(e),Nse.start(),Nse.ondataavailable=e=>{Mse.push(e.data)}}).catch(e=>{s({variant:"destructive",title:"Unable to start recording",description:e.message}),console.log(e)})},children:[r.jsx(Ur,{className:"size-4"}),r.jsx("span",{className:"sr-only",children:"Use Microphone"})]})}),r.jsx(ca,{side:"right",children:r.jsxs("span",{children:[o?"Send":"Start"," "]})})]})]})]})},Ose=Br.memo(({minuteLeft:e,minuteRight:t,secondLeft:n,secondRight:i,timerClassName:a})=>r.jsx("div",{className:Bi("text-sm animate-in duration-1000 fade-in-0 select-none",a),children:r.jsxs("p",{children:[e,t,":",n,i]})}));Ose.displayName="Timer";const Rse=({input:e,setInput:t,inputDisabled:n,selectedFiles:i,removeFile:a,handleFileChange:s,handleSendMessage:o,handleKeyDown:l,chatType:c,targetAgentData:u,formRef:h,inputRef:p,fileInputRef:f})=>r.jsxs("div",{className:"px-2 sm:px-4 pb-2 sm:pb-4 mt-auto flex-shrink-0","data-testid":"chat-container",children:[n&&r.jsxs("div",{className:"px-2 pb-2 text-sm text-muted-foreground flex items-center gap-2",children:[r.jsxs("div",{className:"flex gap-0.5 items-center justify-center",children:[r.jsx("span",{className:"w-[6px] h-[6px] bg-white rounded-full animate-bounce [animation-delay:0s]"}),r.jsx("span",{className:"w-[6px] h-[6px] bg-white rounded-full animate-bounce [animation-delay:0.2s]"}),r.jsx("span",{className:"w-[6px] h-[6px] bg-white rounded-full animate-bounce [animation-delay:0.4s]"})]}),r.jsx("span",{className:"text-xs sm:text-sm",children:c===Uf.DM&&u?`${u.name} is thinking`:"Agent is thinking"}),r.jsxs("div",{className:"flex",children:[r.jsx("span",{className:"animate-pulse [animation-delay:0ms]",children:"."}),r.jsx("span",{className:"animate-pulse [animation-delay:200ms]",children:"."}),r.jsx("span",{className:"animate-pulse [animation-delay:400ms]",children:"."})]})]}),r.jsxs("form",{ref:h,onSubmit:o,className:"relative rounded-md border bg-card p-2 sm:p-3",children:[i.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-3 p-2 sm:p-3 pb-0 max-h-32 sm:max-h-40 overflow-y-auto",children:i.map(e=>{const t=e.blobUrl||URL.createObjectURL(e.file);return r.jsxs("div",{className:"relative p-1 sm:p-2",children:[r.jsxs("div",{className:"relative w-12 h-12 sm:w-16 sm:h-16 rounded-lg overflow-hidden border bg-muted",children:[e.isUploading&&r.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10",children:r.jsx(he,{className:"h-3 w-3 sm:h-4 sm:w-4 animate-spin text-white"})}),e.file.type.startsWith("image/")?r.jsx("img",{alt:"Selected file",src:t,className:"w-full h-full object-cover"}):e.file.type.startsWith("video/")?r.jsx("video",{src:t,className:"w-full h-full object-cover",muted:!0}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:r.jsx(Se,{className:"h-4 w-4 sm:h-8 sm:w-8 text-muted-foreground"})}),e.error&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-red-500 text-white text-xs p-1 text-center",children:"Error"})]}),r.jsx(Yi,{onClick:()=>a(e.id),className:"absolute -right-1 -top-1 size-[16px] sm:size-[20px] ring-2 ring-background z-20",variant:"outline",size:"icon",disabled:e.isUploading,children:r.jsx(d,{className:"h-2 w-2 sm:h-3 sm:w-3"})}),r.jsx("div",{className:"text-xs text-center mt-1 truncate w-12 sm:w-16",children:e.file.name})]},e.id)})}),r.jsx(Tse,{ref:p,onKeyDown:l,value:e,onChange:({target:e})=>t(e.value),placeholder:n?c===Uf.DM&&u?`${u.name} is thinking...`:"Agent is processing...":c===Uf.DM?"Type your message here...":"Message group...",className:"min-h-12 resize-none rounded-none bg-card border-0 px-0 py-0 shadow-none focus-visible:ring-0 text-sm sm:text-base",disabled:n||c===Uf.DM&&"inactive"===u?.status,"data-testid":"chat-input"}),r.jsxs("div",{className:"flex items-center pt-0 gap-1",children:[r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsxs("div",{children:[r.jsxs(Yi,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-10 sm:w-10",onClick:()=>{f.current&&f.current.click()},children:[r.jsx(Hr,{className:"size-3 sm:size-4"}),r.jsx("span",{className:"sr-only",children:"Attach file"})]}),r.jsx("input",{type:"file",ref:f,onChange:s,accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.txt,.rtf,...",multiple:!0,className:"hidden"})]})}),r.jsx(ca,{side:"left",children:r.jsx("p",{children:"Attach files"})})]}),c===Uf.DM&&u?.id&&r.jsx(jse,{agentId:u.id,onChange:e=>t(e)}),r.jsx(Yi,{disabled:n||c===Uf.DM&&"inactive"===u?.status||i.some(e=>e.isUploading),type:"submit",size:"sm",className:"ml-auto gap-1.5 h-[26px] sm:h-[30px] px-2 sm:px-3","data-testid":"send-button",children:n||i.some(e=>e.isUploading)?r.jsxs("div",{className:"flex gap-0.5 items-center justify-center",children:[r.jsx("span",{className:"w-[4px] h-[4px] bg-gray-500 rounded-full animate-bounce [animation-delay:0s]"}),r.jsx("span",{className:"w-[4px] h-[4px] bg-gray-500 rounded-full animate-bounce [animation-delay:0.2s]"}),r.jsx("span",{className:"w-[4px] h-[4px] bg-gray-500 rounded-full animate-bounce [animation-delay:0.4s]"})]}):r.jsx(Fr,{className:"size-3 sm:size-3.5"})})]})]})]}),Lse=i.forwardRef(({className:e,children:t,scrollRef:n,contentRef:i,isAtBottom:a,scrollToBottom:s,disableAutoScroll:o,...l},c)=>r.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[r.jsx("div",{className:`flex flex-col w-full h-full p-2 overflow-y-auto ${e}`,ref:n,onWheel:o,onTouchMove:o,...l,children:r.jsx("div",{className:"flex flex-col gap-10",ref:i,children:t})}),!a&&r.jsx(Yi,{onClick:()=>{s()},size:"icon",variant:"outline",className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 inline-flex rounded-full shadow-md",children:r.jsx(Gr,{className:"h-4 w-4"})})]}));Lse.displayName="ChatMessageList";const Pse=({messages:e,isLoadingMessages:t,chatType:n,currentClientEntityId:i,targetAgentData:a,allAgents:s,animatedMessageId:o,scrollRef:l,contentRef:c,isAtBottom:u,scrollToBottom:d,disableAutoScroll:h,finalChannelId:p,getAgentInMessage:f,agentAvatarMap:m,onDeleteMessage:g,onRetryMessage:v,selectedGroupAgentId:y})=>{const b=Br.useMemo(()=>n===Uf.GROUP&&y?e.filter(e=>{const t=e.senderId===i,r=e.senderId===y;return t||r}):e,[e,n,y,i]);return r.jsxs(Lse,{scrollRef:l,contentRef:c,isAtBottom:u,scrollToBottom:d,disableAutoScroll:h,className:"h-full w-full","data-testid":"chat-messages",children:[t&&0===b.length&&r.jsx("div",{className:"flex flex-1 justify-center items-center",children:r.jsx("p",{children:"Loading messages..."})}),!t&&0===b.length&&r.jsx("div",{className:"flex flex-1 justify-center items-center",children:r.jsx("p",{children:"No messages yet. Start the conversation!"})}),b.map((e,t)=>{const l=e.senderId===i,c=t===b.length-1&&e.isAgent&&e.id===o,u=!l&&f?f(e.senderId):void 0;return r.jsx("div",{className:Bi("flex gap-1",l?"justify-end":"justify-start"),children:r.jsxs(hW,{variant:l?"sent":"received",className:"flex flex-col gap-1 "+(l?"flex-row-reverse":""),children:[!l&&n===Uf.GROUP&&r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(TH,{className:"size-5 border rounded-full select-none",children:r.jsx(NH,{src:Wi(u||(m&&e.senderId&&s?s.find(t=>t.id===e.senderId):void 0))})}),r.jsx("div",{children:u?.name})]}),r.jsx(Kse,{message:e,agentForTts:n===Uf.DM?a:u,shouldAnimate:c,onDelete:g,onRetry:v,isUser:l,getAgentInMessage:n===Uf.GROUP?f:void 0,agentAvatarMap:n===Uf.GROUP?m:void 0,chatType:n})]})},`${e.id}-${e.createdAt}`)})]},p||"no-channel")};function Dse({options:e=[],className:t="",onSelect:n,initialSelected:a=[]}){const[s,o]=i.useState(a),[l,c]=i.useState(!1),u=i.useRef(null);i.useEffect(()=>{o(a)},[a]),i.useEffect(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const h=e=>s.some(t=>e.id&&t.id?t.id===e.id:t.label===e.label);return r.jsxs("div",{className:`relative w-80 ${t}`,ref:u,children:[r.jsxs("div",{className:"flex items-center gap-2 border p-2 bg-background rounded cursor-pointer "+(l?"border-primary":"border-input"),onClick:()=>c(!l),children:[r.jsx("div",{className:"flex flex-wrap gap-1 w-full",children:s.length>0?r.jsxs(r.Fragment,{children:[s.slice(0,3).map((e,t)=>r.jsxs(Aa,{className:"flex items-center gap-1 px-2",children:[e.label,r.jsx(d,{size:12,className:"cursor-pointer",onClick:t=>{t.stopPropagation(),(e=>{o(t=>{const r=t.filter(t=>e.id&&t.id?t.id!==e.id:t.label!==e.label);return n&&n(r),r})})(e)}})]},e.id||e.label||t)),s.length>3&&r.jsxs(Aa,{className:"px-2 cursor-pointer",onClick:e=>{e.stopPropagation(),o(e=>{const t=e.slice(0,3);return n&&n(t),t})},children:["+",s.length-3," more"]})]}):r.jsx("span",{className:"text-muted-foreground",children:"Select agents..."})}),r.jsx(C,{size:16})]}),l&&r.jsx(cG,{className:"absolute left-0 mt-2 w-full shadow-md border border-border rounded z-40 max-h-60 overflow-y-auto",children:0===e.length?r.jsx("div",{className:"p-2 text-muted-foreground text-sm",children:"No agents available"}):e.map((e,t)=>r.jsxs("div",{className:"flex items-center gap-2 p-2 cursor-pointer rounded hover:bg-muted "+(h(e)?"bg-muted":"bg-card"),onClick:()=>(e=>{console.log("[MultiSelectCombobox] toggleSelection called with:",e),o(t=>{let r;return r=h(e)?t.filter(t=>e.id&&t.id?t.id!==e.id:t.label!==e.label):[...t,e],console.log("[MultiSelectCombobox] New selection:",r),n&&n(r),r})})(e),children:[r.jsx("div",{className:"bg-gray-500 rounded-full w-4 h-4 flex justify-center items-center overflow-hidden text-xs",children:e.icon?r.jsx("img",{src:e.icon,alt:e.label,className:"w-full h-full object-cover"}):Fi(e.label)}),e.label]},e.id||e.label||t))})]})}function $se(e){return!!e.id&&!!m$(e.id)&&"string"==typeof e.name&&""!==e.name.trim()}function zse({onClose:e,channelId:t}){const[n,a]=i.useState(""),[s,o]=i.useState([]),[l,c]=i.useState(""),[u,h]=i.useState([]),p="00000000-0000-0000-0000-000000000000",f=i.useRef(!1),m=i.useRef(t),g=i.useRef(!1),{data:v}=YH(t?p:void 0,{enabled:!!t}),{data:y,isLoading:b,isError:_}=ZH(),w=i.useMemo(()=>(y?.agents||[]).filter($se),[y]),x=Re(),E=Oe(),{toast:k}=Va(),{confirm:S,isOpen:A,onOpenChange:T,onConfirm:N,options:I}=MH();i.useEffect(()=>{t&&(x.invalidateQueries({queryKey:["channelParticipants",t]}),x.refetchQueries({queryKey:["channelParticipants",t]}))},[t,x]);const M=Be({mutationFn:async({name:e,participantIds:t})=>{const r=lz();return await r.messaging.createGroupChannel({name:e,participantIds:t,metadata:{type:Uf.GROUP,server_id:p,source:vn}})},onSuccess:t=>{t&&(k({title:"Success",description:"Group created successfully."}),x.invalidateQueries({queryKey:["channels",p]}),x.invalidateQueries({queryKey:["channels"]}),e(),setTimeout(()=>{E(`/group/${t.id}?serverId=${p}`)},100))},onError:e=>{P$("Failed to create group",e);const t=e instanceof Error?e.message:"Failed to create group.";k({title:"Error",description:t,variant:"destructive"})}}),C=Be({mutationFn:async({name:e,participantIds:r})=>{if(!t)throw new Error("Channel ID is required for update");const n=lz();return await n.messaging.updateChannel(t,{name:e,participantCentralUserIds:r})},onSuccess:()=>{k({title:"Group Updated",description:"Group details updated successfully."}),x.invalidateQueries({queryKey:["channels",p]}),x.invalidateQueries({queryKey:["channels"]}),e(),setTimeout(()=>{E(`/group/${t}?serverId=${p}`)},100)},onError:e=>{P$("Failed to update group",e),console.error("Group update error details:",e);const t=e instanceof Error?e.message:"Failed to update group.";k({title:"Error",description:t,variant:"destructive"})}}),j=Be({mutationFn:async()=>{if(!t)throw new Error("Channel ID is required for delete");const e=lz();return await e.messaging.deleteChannel(t)},onSuccess:()=>{k({title:"Group Deleted",description:"The group has been successfully deleted."}),x.invalidateQueries({queryKey:["channels",p]}),x.invalidateQueries({queryKey:["channels"]}),E("/"),e()},onError:e=>{P$("Failed to delete channel",e);const t=e instanceof Error?e.message:"Could not delete group.";"object"==typeof e&&null!==e&&404===e.statusCode?k({title:"Error Deleting Group",description:"Delete operation not found on server.",variant:"destructive"}):k({title:"Error Deleting Group",description:t,variant:"destructive"})}}),{data:O,isLoading:R,isError:L,error:P}=G({queryKey:["channelParticipants",t],queryFn:async()=>{if(!t)return{success:!0,data:[]};try{const e=lz(),r=await e.messaging.getChannelParticipants(t);let n=[];return r&&Array.isArray(r.participants)?n=r.participants.map(e=>e.userId):r&&Array.isArray(r)&&(n=r.map(e=>e.userId||e.id||e)),{success:!0,data:n}}catch(e){return console.error("[GroupPanel] Error fetching channel participants:",e),{success:!1,error:{message:e instanceof Error?e.message:"Unknown error"}}}},enabled:!!t,retry:!1,refetchOnMount:!0,refetchOnWindowFocus:!1,staleTime:0,gcTime:0});i.useEffect(()=>{if(t&&v?.data?.channels){const e=v.data.channels.find(e=>e.id===t);if(!f.current||m.current!==t){const r=e?.name||"";a(r),c(r),f.current=!0,m.current=t,g.current=!1}}else t||(f.current=!1,a(""),o([]),c(""),h([]))},[t,v]),i.useEffect(()=>{if(!(b||t&&R))if(t){if(!g.current||m.current!==t){if(L)return k({title:"Error",description:`Could not load group participants: ${P?.message||"Unknown error"}`,variant:"destructive"}),o([]),h([]),void(g.current=!0);if(O?.success&&O.data){const e=O.data,t=w.filter(t=>e.includes(t.id));o(t),h(t.map(e=>e.id)),g.current=!0}else O&&!O.success?(k({title:"Error",description:`Could not load group participants: ${O.error?.message||"Server error"}`,variant:"destructive"}),o([]),h([]),g.current=!0):(o([]),h([]),g.current=!0)}}else g.current=!1},[t,b,R,O,w,L,P,k]);const D=i.useMemo(()=>b||_?[]:w.map(e=>({id:e.id,label:`${e.name}${e.status===Ff.INACTIVE?" (Inactive)":""}`,icon:"string"==typeof e.settings?.avatar?e.settings.avatar:""})),[w,b,_]),$=i.useMemo(()=>[],[]),z=i.useMemo(()=>{if(b)return $;if(!t)return $;if(t&&!g.current)return $;return s.map(e=>({id:e.id,label:`${e.name}${e.status===Ff.INACTIVE?" (Inactive)":""}`,icon:"string"==typeof e.settings?.avatar?e.settings.avatar:""}))},[t,s,b,$]),B=i.useCallback(e=>{const t=w.filter(t=>e.some(e=>e.id===t.id));o(t)},[w]),U=i.useCallback(async()=>{if(!t)return;const e=v?.data?.channels.find(e=>e.id===t);S({title:"Delete Group",description:`Are you sure you want to permanently delete the group chat "${e?.name||n||"this group"}"? This action cannot be undone.`,confirmText:"Delete",variant:"destructive"},()=>{j.mutate()})},[t,n,v,j]),F=i.useMemo(()=>{if(!t)return!0;const e=n.trim()!==l.trim(),r=s.map(e=>e.id).sort(),i=u.sort(),a=JSON.stringify(r)!==JSON.stringify(i);return e||a},[t,n,l,s,u]),H=i.useCallback(async()=>{if(!t&&0===s.length)return void k({title:"Validation Error",description:"Please select at least one agent for the group.",variant:"destructive"});const e=()=>{const e=s.map(e=>e.id),r=n.trim()||(s.length>0?s.map(e=>e.name).join(", "):"Empty Group");t?C.mutate({name:r,participantIds:e}):M.mutate({name:r,participantIds:e})};t&&0===s.length?S({title:"Remove All Agents?",description:"Are you sure you want to remove all agents from this group? This will leave the group with no participants.",confirmText:"Remove All",variant:"destructive"},()=>{e()}):e()},[t,n,s,M,C,k]),q=t?!F||M.isPending||C.isPending||j.isPending:0===s.length||M.isPending||C.isPending||j.isPending;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",onClick:e,children:r.jsxs(cG,{className:"w-[80%] max-w-2xl",onClick:e=>e.stopPropagation(),children:[r.jsxs(uG,{className:"flex flex-row items-center justify-between space-y-0",children:[r.jsx(dG,{className:"text-xl font-semibold",children:t?"Edit Group Chat":"Create Group Chat"}),r.jsx(Yi,{variant:"ghost",size:"sm",onClick:e,children:r.jsx(d,{className:"h-4 w-4"})})]}),r.jsx(Xi,{}),r.jsx(hG,{className:"pt-4",children:r.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsx("label",{htmlFor:"chat-name",className:"text-sm font-medium",children:"Chat Name (Optional)"}),r.jsx(Ji,{id:"chat-name",value:n,onChange:e=>a(e.target.value),className:"w-full bg-background text-foreground",placeholder:"Leave blank to auto-generate from participants",disabled:M.isPending||C.isPending||j.isPending})]}),r.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[r.jsxs("label",{htmlFor:"invite-agents",className:"text-sm font-medium",children:["Select Agents"," ",!t&&r.jsx("span",{className:"text-muted-foreground",children:"(Required)"})]}),b?r.jsxs("div",{className:"flex items-center justify-center p-4",children:[r.jsx(he,{className:"h-6 w-6 animate-spin text-muted-foreground"}),r.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading agents..."})]}):_?r.jsx("div",{className:"flex items-center justify-center p-4 text-red-500",children:"Error loading agents. Please try again later."}):r.jsx(Dse,{options:D,onSelect:B,className:"w-full",initialSelected:z},`group-panel-combobox-${t||"create"}-${w.length}`),s.length>0&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.length," agent",s.length>1?"s":""," selected"]}),t&&F&&r.jsx("div",{className:"text-sm text-blue-500 mt-1",children:"You have unsaved changes"})]})]})}),r.jsxs(pG,{className:"flex justify-between pt-4",children:[t&&r.jsxs(Yi,{variant:"destructive",onClick:U,disabled:j.isPending||M.isPending||C.isPending||b,children:[j.isPending?r.jsx(he,{className:"mr-2 h-4 w-4 animate-spin"}):r.jsx(fe,{className:"mr-2 h-4 w-4"}),"Delete Group"]}),r.jsxs(Yi,{variant:"default",className:t?"":"w-full",onClick:H,disabled:q,children:[(M.isPending||C.isPending)&&r.jsx(he,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Update Group":"Create Group"]})]})]})}),r.jsx(Dz,{open:A,onOpenChange:T,title:I?.title||"",description:I?.description||"",confirmText:I?.confirmText,cancelText:I?.cancelText,variant:I?.variant,onConfirm:N})]})}const Bse="eliza-agent-sidebar-visible";const Use="eliza-main-panel-width",Fse="eliza-sidebar-panel-width",Hse="eliza-floating-threshold",Gse=1400;var qse={exports:{}};qse.exports=function(e,t,r){e=e||{};var n=t.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(e,t,r,i){return n.fromToBase(e,t,r,i)}r.en.relativeTime=i,n.fromToBase=function(t,n,a,s,o){for(var l,c,u,d=a.$locale().relativeTime||i,h=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=h.length,f=0;f<p;f+=1){var m=h[f];m.d&&(l=s?r(t).diff(a,m.d,!0):a.diff(t,m.d,!0));var g=(e.rounding||Math.round)(Math.abs(l));if(u=l>0,g<=m.r||!m.r){g<=1&&f>0&&(m=h[f-1]);var v=d[m.l];o&&(g=o(""+g)),c="string"==typeof v?v.replace("%d",g):v(g,n,m.l,u);break}}if(n)return c;var y=u?d.future:d.past;return"function"==typeof y?y(c):y.replace("%s",c)},n.to=function(e,t){return a(e,t,this,!0)},n.from=function(e,t){return a(e,t,this)};var s=function(e){return e.$u?r.utc():r()};n.toNow=function(e){return this.to(s(this),e)},n.fromNow=function(e){return this.from(s(this),e)}};const Vse=e(qse.exports);Ui.extend(Vse);const Wse="00000000-0000-0000-0000-000000000000",Zse=e=>{const t=e.rawMessage,r=t.actions?.[0]||t.action||"ACTION",n=t.actionStatus||"completed",i=t.actionId,a={};t.actions&&(a.actions=t.actions),t.action&&(a.action=t.action),t.thought&&(a.thought=t.thought);const s={};t.text&&(s.result=t.text),s.status=n,t.thought&&(s.thought=t.thought),t.actionResult&&(s.actionResult=t.actionResult);const o="failed"===n||"error"===n?t.text||"Action failed":void 0;return{type:r,state:(e=>{switch(e){case"pending":case"executing":case"running":return"input-streaming";case"completed":case"success":return"output-available";case"failed":case"error":return"output-error";default:return"input-available"}})(n),toolCallId:i,input:Object.keys(a).length>0?a:void 0,output:Object.keys(s).length>0?s:void 0,errorText:o}},Kse=Br.memo(function({message:e,agentForTts:t,shouldAnimate:n,onDelete:i,onRetry:a,isUser:s,getAgentInMessage:o,agentAvatarMap:l,chatType:c}){const u="agent_action"===e.type||"agent_action"===e.source;return r.jsxs("div",{className:"flex flex-col w-full",children:[r.jsxs(fW,{isLoading:e.isLoading,...s?{variant:"sent"}:{},...e.text||e.attachments?.length?{}:{className:"bg-transparent"},children:[u?r.jsx(Bie,{toolPart:Zse(e),defaultOpen:!1,className:"max-w-none"}):r.jsx("div",{children:(()=>{if(!e.text)return null;const t=Vie(e.text),i=new Set(e.attachments?.map(e=>e.url).filter(Boolean)||[]),a=t.filter(e=>!i.has(e.url)),o=function(e,t){let r=e;return t.forEach(t=>{if(t.isEmbed){const n=/(https?:\/\/[^\s]+)/g,i=e.match(n)||[];for(const e of i){const n=qie(e.replace(/[.,!?;)]*$/,""));if(n&&n.embedUrl===t.url){r=r.replace(e,"").trim();break}}}else r=r.replace(t.url,"").trim()}),r}(e.text,t);return r.jsxs("div",{className:"space-y-3",children:[o.trim()&&r.jsx("div",{children:s?r.jsx("div",{className:"whitespace-pre-wrap",children:o}):r.jsx(Sie,{className:"max-w-none",isAnimating:n,children:o})}),a.length>0&&r.jsx("div",{className:"space-y-2",children:a.map((e,t)=>r.jsx("div",{children:r.jsx(sW,{url:e.url,title:"Shared media"})},`${e.url}-${t}`))})]})})()}),e.attachments?.filter(e=>e.url&&""!==e.url.trim()).map(e=>r.jsx(sW,{url:e.url,title:e.title||"Attachment"},`${e.url}-${e.title}`))]}),r.jsxs("div",{className:"flex items-center justify-between w-full py-1",children:[r.jsx("div",{children:!s&&(e.text||e.attachments?.length)&&e.createdAt&&r.jsx(mW,{className:"text-muted-foreground",timestamp:Ui(e.createdAt).format("LT")})}),r.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[!s&&e.text&&!e.isLoading&&t?.id&&r.jsxs(r.Fragment,{children:[r.jsx(nW,{text:e.text}),r.jsx(vW,{agentId:t.id,text:e.text})]}),s&&e.text&&!e.isLoading&&a&&r.jsx(aW,{onClick:()=>a(e.text||"")}),r.jsx(iW,{onClick:()=>i(e.id)})]})]})]})},(e,t)=>e.message.id===t.message.id&&e.message.text===t.message.text&&e.message.isLoading===t.message.isLoading&&e.shouldAnimate===t.shouldAnimate&&e.isUser===t.isUser);function Yse({chatType:e,contextId:t,serverId:n,initialDmChannelId:a}){const{toast:s}=Va(),o=Re(),{isVisible:l,setSidebarVisible:c,toggleSidebar:u}=function(){const[e,t]=i.useState(!1);i.useEffect(()=>{try{const e=localStorage.getItem(Bse);if(null!==e){const r=JSON.parse(e);t(r)}}catch(e){P$("Error reading sidebar state from localStorage:",e),t(!1)}},[]);const r=i.useCallback(e=>{t(e);try{localStorage.setItem(Bse,JSON.stringify(e))}catch(r){P$("Error saving sidebar state to localStorage:",r)}},[]),n=i.useCallback(()=>{r(!e)},[e,r]);return{isVisible:e,setSidebarVisible:r,toggleSidebar:n}}(),{mainPanelSize:d,sidebarPanelSize:h,isFloatingMode:p,setMainPanelSize:f,setSidebarPanelSize:m}=function(){const[e,t]=i.useState(70),[r,n]=i.useState(30),[a,s]=i.useState(!1),[o,l]=i.useState(Gse);i.useEffect(()=>{try{const e=localStorage.getItem(Use),r=localStorage.getItem(Fse),i=localStorage.getItem(Hse);if(null!==e){const r=parseFloat(e);!isNaN(r)&&r>0&&r<=100&&t(r)}if(null!==r){const e=parseFloat(r);!isNaN(e)&&e>0&&e<=100&&n(e)}if(null!==i){const e=parseFloat(i);!isNaN(e)&&e>0&&l(e)}}catch(e){P$("Error reading panel sizes from localStorage:",e),t(70),n(30),l(Gse)}},[]),i.useEffect(()=>{const e=()=>{const e=window.innerWidth<o;s(e)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[o]);const c=i.useCallback(e=>{const r=Math.max(20,Math.min(80,e));t(r);try{localStorage.setItem(Use,r.toString())}catch(n){P$("Error saving main panel size to localStorage:",n)}},[]),u=i.useCallback(e=>{const t=Math.max(20,Math.min(80,e));n(t);try{localStorage.setItem(Fse,t.toString())}catch(r){P$("Error saving sidebar panel size to localStorage:",r)}},[]),d=i.useCallback(e=>{const t=Math.max(320,Math.min(2560,e));l(t);try{localStorage.setItem(Hse,t.toString())}catch(r){P$("Error saving floating threshold to localStorage:",r)}},[]),h=i.useCallback(()=>{s(e=>!e)},[]),p=i.useCallback(()=>{t(70),n(30),l(Gse);try{localStorage.removeItem(Use),localStorage.removeItem(Fse),localStorage.removeItem(Hse)}catch(e){P$("Error clearing panel sizes from localStorage:",e)}},[]);return{mainPanelSize:e,sidebarPanelSize:r,isFloatingMode:a,floatingThreshold:o,setMainPanelSize:c,setSidebarPanelSize:u,setFloatingThreshold:d,toggleFloatingMode:h,resetPanelSizes:p}}(),[g,v]=i.useState({showGroupEditPanel:!1,showProfileOverlay:!1,input:"",inputDisabled:!1,selectedGroupAgentId:null,currentDmChannelId:null,isCreatingDM:!1,isMobile:!1}),y=Ue().state,b=y?.forceNew||!1;Oe();const[_,w]=i.useState(b),x=p||g.isMobile,{confirm:E,isOpen:k,onOpenChange:S,onConfirm:A,options:T}=MH(),{stopAgent:N,isAgentStopping:I}=oW(),M=i.useCallback(e=>{v(t=>({...t,...e}))},[]),j=Gi(),O=i.useRef(null),R=i.useRef(null),L=i.useRef(null),P=i.useRef(!1),D=i.useRef(!1),$=i.useRef(""),{data:z,isLoading:B}=qH(e===Uf.DM?t:void 0,{enabled:e===Uf.DM}),U=z?.data?{...z.data,createdAt:z.data.createdAt||Date.now(),updatedAt:z.data.updatedAt||Date.now()}:void 0,{handleDelete:F,isDeleting:H}=nae(U||{}),{data:q=[],isLoading:V}=function(e,t="00000000-0000-0000-0000-000000000000"){const r=Gi();return G({queryKey:["dmChannels",e,r,t],queryFn:async()=>{if(!e)return[];L$("[useDmChannelsForAgent] Fetching distinct DM channels for agent:",e);const n=lz(),i=((await n.messaging.getServerChannels(t)).channels||[]).map(RH).filter(t=>{const n=t.metadata||{},i=t.type===Uf.DM,a=!0===n.isDm,s=n.forAgent===e,o=n.user1===r&&n.user2===e||n.user1===e&&n.user2===r;if(i&&a&&s&&o)return!0;if(t.type===Uf.DM&&!n.isDm&&!n.forAgent){const n=t.name.toLowerCase(),i=`dm-${r}-${e}`.toLowerCase(),a=`dm-${e}-${r}`.toLowerCase();if(n===i||n===a)return D$("[useDmChannelsForAgent] Matched a canonical DM channel by name convention:",t.id,t.name),!0}return!1});return L$("[useDmChannelsForAgent] Found distinct DM channels:",i.length,i.map(e=>({id:e.id,name:e.name,metadata:e.metadata}))),i.sort((e,t)=>{const r=new Date(e.updatedAt||e.createdAt).getTime();return new Date(t.updatedAt||t.createdAt).getTime()-r})},enabled:!!e,staleTime:zH,refetchInterval:BH})}(e===Uf.DM?t:void 0,n||Wse),W=function(){const e=Re(),{toast:t}=Va(),r=Gi();return Be({mutationFn:async({agentId:e,channelName:t,serverId:n="00000000-0000-0000-0000-000000000000"})=>{if(L$("[useCreateDmChannel] Creating new distinct DM channel with agent:",{agentId:e,channelName:t,serverId:n}),!t||!t.trim())throw new Error("Channel name cannot be empty for a new DM conversation.");const i=lz();return await i.messaging.createGroupChannel({name:t.trim(),participantIds:[r,e],metadata:{type:Uf.DM,server_id:n,isDm:!0,user1:r,user2:e,forAgent:e,createdAt:(new Date).toISOString()}})},onSuccess:(n,i)=>{L$("[useCreateDmChannel] Distinct DM channel created successfully:",n),t({title:"New Chat Started",description:`Conversation "${n.name}" created.`}),e.invalidateQueries({queryKey:["dmChannels",i.agentId,r,i.serverId]}),e.invalidateQueries({queryKey:["channels"]})},onError:e=>{P$("[useCreateDmChannel] Error creating distinct DM channel:",e),t({title:"Error Creating Chat",description:e instanceof Error?e.message:"Could not start new chat.",variant:"destructive"})}})}(),{data:Z}=function(e,t={}){const r=HH();return G({queryKey:["channelDetails",e],queryFn:async()=>e?{success:!0,data:RH(await $H.messaging.getChannelDetails(e))}:Promise.resolve({success:!0,data:null}),enabled:!!e,staleTime:BH,refetchInterval:!(r.isOffline||!e)&&UH,...t})}(e===Uf.GROUP?t:void 0),{data:K}=JH(e===Uf.GROUP?t:void 0),Y=K?.data,{data:J}=ZH(),X=J?.agents||[],Q=q[0],ee=e===Uf.DM?g.currentDmChannelId||void 0:t||void 0,te=i.useMemo(()=>n||Wse,[n]),{data:re=[],isLoading:ne}=VH(Q?.id,te),{data:ie=[],isLoading:ae,addMessage:se,updateMessage:oe,removeMessage:le,clearMessages:ce}=VH(ee,te),ue=i.useMemo(()=>e===Uf.GROUP&&Y?Y.map(e=>X.find(t=>t.id===e)).filter(Boolean):[],[e,Y,X]),me=i.useMemo(()=>X.reduce((e,t)=>(t.id&&"string"==typeof t.settings?.avatar&&(e[t.id]=t.settings.avatar),e),{}),[X]),ge=i.useCallback(e=>X.find(t=>t.id===e),[X]),{scrollRef:ve,contentRef:ye,isAtBottom:be,scrollToBottom:_e,disableAutoScroll:we,autoScrollEnabled:xe}=function(e={}){const{smooth:t=!1}=e,r=i.useRef(!1),n=Iie({initial:t?"smooth":"instant",resize:t?"smooth":"instant"}),[a,s]=i.useState({isAtBottom:!0,autoScrollEnabled:!0});i.useEffect(()=>{n.isAtBottom?(r.current=!1,s({isAtBottom:!0,autoScrollEnabled:!0})):s(e=>({...e,isAtBottom:!1,autoScrollEnabled:!r.current&&e.autoScrollEnabled}))},[n.isAtBottom]);const o=i.useCallback(e=>{const i=e?"instant":t?"smooth":"instant";n.scrollToBottom({animation:i,preserveScrollPosition:!1}),s({isAtBottom:!0,autoScrollEnabled:!0}),r.current=!1},[n.scrollToBottom,t]),l=i.useCallback(()=>{n.isAtBottom||(r.current=!0,n.stopScroll(),s(e=>({...e,autoScrollEnabled:!1})))},[n.isAtBottom,n.stopScroll]);return{scrollRef:n.scrollRef,contentRef:n.contentRef,isAtBottom:a.isAtBottom,autoScrollEnabled:a.autoScrollEnabled,scrollToBottom:()=>o(!1),disableAutoScroll:l,_stickToBottom:n}}({smooth:!0}),Ee=i.useRef(0),ke=i.useCallback(()=>{ve.current&&setTimeout(()=>_e(),0)},[_e,ve]),Se=i.useRef(!1),Ae=i.useRef(null),Te=i.useCallback(async t=>{if(!t||"DM"!==e)return;if(Q)try{const e=lz(),t=await e.messaging.getChannelMessages(Q.id,{limit:30}),r=Pe(Q.name);if(r&&0===(t?.messages?.length??0)){return g.currentDmChannelId===Q.id?s({title:"Already in a fresh chat",description:`You're already in a new chat with ${U?.name||"the agent"}.`}):(M({currentDmChannelId:Q.id}),s({title:"Chat opened",description:`You can now start chatting with ${U?.name||"the agent"}.`})),void M({currentDmChannelId:Q.id})}L$("[Chat] Latest DM channel has messages or customized name, proceeding to create a new one.")}catch(n){P$("[Chat] Failed to fetch latest DM channel messages:",n)}const r=`Chat - ${Ui().format("MMM D, HH:mm:ss")}`;L$(`[Chat] Creating new distinct DM channel with agent ${t}, name: "${r}"`),M({isCreatingDM:!0});try{Se.current=!0,await W.mutateAsync({agentId:t,channelName:r,serverId:te}),M({input:""}),setTimeout(()=>ke(),150)}catch(n){P$("[Chat] Error creating new distinct DM channel:",n),M({currentDmChannelId:null,input:""})}finally{M({isCreatingDM:!1}),s({title:"Chat opened",description:`You can now start chatting with ${U?.name||"the agent"}.`})}},[e,W,M,ke,Q]),Ne=i.useCallback(e=>{const t=q.find(t=>t.id===e);t&&(L$(`[Chat] DM Channel selected: ${t.name} (Channel ID: ${t.id})`),M({currentDmChannelId:t.id,input:""}),setTimeout(()=>ke(),150))},[q,M,ke]),Ie=i.useCallback(()=>{if(e!==Uf.DM||!g.currentDmChannelId||!U?.id)return;const t=q.find(e=>e.id===g.currentDmChannelId);t&&E({title:"Delete Chat",description:`Are you sure you want to delete the chat "${t.name}" with ${U.name}? This action cannot be undone.`,confirmText:"Delete",variant:"destructive"},async()=>{L$(`[Chat] Deleting DM channel ${t.id}`);try{const e=lz();await e.messaging.deleteChannel(t.id),o.setQueryData(["dmChannels",U.id,j],e=>e?.filter(e=>e.id!==t.id)),o.invalidateQueries({queryKey:["dmChannels",U.id,j]}),o.invalidateQueries({queryKey:["channels"]}),s({title:"Chat Deleted",description:`"${t.name}" was deleted.`});const r=o.getQueryData(["dmChannels",U.id,j])||[];r.length>0?(M({currentDmChannelId:r[0].id}),L$("[Chat] Switched to DM channel:",r[0].id)):(L$("[Chat] No DM channels left after deletion. Will create a fresh chat once."),M({currentDmChannelId:null}),Se.current=!1,await Te(U.id))}catch(e){P$("[Chat] Error deleting DM channel:",e),s({title:"Error",description:"Could not delete chat. The server might not support this action yet.",variant:"destructive"})}})},[e,g.currentDmChannelId,U,q,E,s,M,Te,o,j]);i.useEffect(()=>{Q&&!ne&&re&&U?.id&&_&&(Te(U.id),w(!1))},[_,w,Te,U?.id,Q,re,ne]),i.useEffect(()=>{P.current=g.inputDisabled},[g.inputDisabled]),i.useEffect(()=>{const e=q.find(e=>e.id===g.currentDmChannelId);e?.name&&($.current=e.name)},[q,g.currentDmChannelId]),i.useEffect(()=>{!V&&q.length>0&&(L$("[Chat] Selecting first available DM channel:",q[0].id),M({currentDmChannelId:q[0].id}))},[q,V,M]);const Ce=i.useCallback(r=>{if(e===Uf.DM&&t&&r&&"undefined"!=typeof window){const e=`/chat/${t}/${r}`;window.location.pathname!==e&&window.history&&window.history.replaceState(null,"",e)}},[e,t]);i.useEffect(()=>{g.currentDmChannelId&&Ce(g.currentDmChannelId)},[g.currentDmChannelId,Ce]),i.useEffect(()=>{if(L$("[Chat] URL navigation effect triggered",{initialDmChannelId:a,agentDmChannelsLength:q.length,isLoadingAgentDmChannels:V,currentDmChannelId:g.currentDmChannelId}),a&&q.length>0&&!V&&!D.current){if(!m$(a))return D$("[Chat] Invalid channel ID format from URL:",a),void(D.current=!0);const e=q.some(e=>e.id===a);e?(L$("[Chat] Switching to channel from URL:",a),M({currentDmChannelId:a}),D.current=!0):(D$("[Chat] Channel from URL not found, staying with current channel",{initialDmChannelId:a,availableChannels:q.map(e=>e.id)}),D.current=!0)}},[a,q,V,M]),i.useEffect(()=>{if(e===Uf.DM&&U?.id){if(!(!g.currentDmChannelId||q.some(e=>e.id===g.currentDmChannelId))&&!V)return L$(`[Chat] Current DM channel ${g.currentDmChannelId} doesn't belong to agent ${U.id}, clearing it`),void M({currentDmChannelId:null});V||0!==q.length||a||Se.current||g.isCreatingDM||W.isPending||(L$("[Chat] No existing DM channels found; auto-creating a fresh one."),Se.current=!0,Te(U.id))}else e!==Uf.DM&&null!==g.currentDmChannelId&&M({currentDmChannelId:null})},[e,U?.id,q,V,W.isPending,g.isCreatingDM,g.currentDmChannelId,a,M,Te]),i.useEffect(()=>(q.length>0&&Ae.current&&(clearTimeout(Ae.current),Ae.current=null),()=>{Ae.current&&(clearTimeout(Ae.current),Ae.current=null)}),[q]),i.useEffect(()=>{e!==Uf.GROUP||1!==ue.length||g.selectedGroupAgentId||(M({selectedGroupAgentId:ue[0].id}),l||c(!0))},[e,ue,g.selectedGroupAgentId,M,l,c]);const{mutate:je}=function(){Re();const{toast:e}=Va();return Be({mutationFn:async({channelId:e,messageId:t})=>(await $H.messaging.deleteMessage(e,t),{channelId:e,messageId:t}),onSuccess:(t,r)=>{e({title:"Message Deleted",description:"Message removed successfully."})},onError:t=>{e({title:"Error Deleting Message",description:t instanceof Error?t.message:"Failed to delete message",variant:"destructive"})}})}(),{mutate:Le}=function(){const e=Re(),{toast:t}=Va();return Be({mutationFn:async e=>(await $H.messaging.clearChannelHistory(e),{channelId:e}),onSuccess:(r,n)=>{t({title:"Channel Cleared",description:`All messages in channel ${n} cleared.`}),e.invalidateQueries({queryKey:["messages",n]}),e.setQueryData(["messages",n],()=>[])},onError:e=>{t({title:"Error Clearing Channel",description:e instanceof Error?e.message:"Failed to clear messages",variant:"destructive"})}})}();function Pe(e){return!!e?.match(/^Chat - [A-Z][a-z]{2} \d{1,2}, \d{2}:\d{2}(:\d{2})?$/)}i.useEffect(()=>{const e=0===Ee.current&&ie.length>0,t=ie.length!==Ee.current&&0!==Ee.current;e?($$("[chat] Initial messages loaded, scrolling to bottom.",{count:ie.length}),ke()):t&&(xe?($$("[chat] New messages and autoScroll enabled, scrolling."),ke()):$$("[chat] New messages, but autoScroll is disabled (user scrolled up).")),Ee.current=ie.length},[ie,xe,ke,ee]);const{sendMessage:De,animatedMessageId:$e}=function({channelId:e,currentUserId:t,contextId:r,chatType:n,allAgents:a,messages:s,onAddMessage:o,onUpdateMessage:l,onDeleteMessage:c,onClearMessages:u,onInputDisabledChange:d}){const h=wH.getInstance(),p=i.useRef(null),f=i.useRef(null),m=i.useCallback(async(t,i,a,s,o,l,c)=>{const u=c||e;if(!u)return void P$("[useSocketChat] Cannot send message: no channel ID available");const d={...l,channelType:n,...n===Uf.DM&&{isDm:!0,targetUserId:r}};await h.sendMessage(t,u,i,a,s,o,d)},[e,h,n,r]);return i.useEffect(()=>{if(!e||!t)return void(f.current&&(L$(`[useSocketChat] useEffect: channelId is now null/undefined, resetting joinedChannelRef from ${f.current}`),f.current=null));h.initialize(t),e!==f.current?(L$(`[useSocketChat] useEffect: Joining channel ${e}. Previous joinedChannelRef: ${f.current}`),h.joinChannel(e),f.current=e):L$(`[useSocketChat] useEffect: Channel ${e} already marked as joined by this instance. Skipping joinChannel call.`);const i=h.evtMessageBroadcast.attach(t=>(t.channelId||t.roomId)===e,i=>{if(L$("[useSocketChat] Received raw messageBroadcast data:",JSON.stringify(i)),(i.channelId||i.roomId)!==e)return;const c=i.senderId===t,u=n===Uf.DM?i.senderId===r:a.some(e=>e.id===i.senderId);!c&&u&&d(!1);const h=i.clientMessageId;if(h&&c)l(h,{id:i.id||Hi(),isLoading:!1,createdAt:"number"==typeof i.createdAt?i.createdAt:Date.parse(i.createdAt),text:i.text,attachments:i.attachments,isAgent:!1});else{const e={id:i.id||Hi(),text:i.text,name:i.senderName,senderId:i.senderId,isAgent:u,createdAt:"number"==typeof i.createdAt?i.createdAt:Date.parse(i.createdAt),channelId:i.channelId||i.roomId,serverId:i.serverId,source:i.source,attachments:i.attachments,thought:i.thought,actions:i.actions,isLoading:!1,prompt:i.prompt,rawMessage:i.rawMessage},t=s.some(e=>e.id===i.id);t||(L$("[useSocketChat] Adding new UiMessage:",JSON.stringify(e)),o(e),u&&e.id?p.current=e.id:p.current=null)}}),m=h.evtMessageComplete.attach(t=>(t.channelId||t.roomId)===e,t=>{(t.channelId||t.roomId)===e&&d(!1)}),g=h.evtControlMessage.attach(t=>(t.channelId||t.roomId)===e,t=>{(t.channelId||t.roomId)===e&&("disable_input"===t.action?d(!0):"enable_input"===t.action&&d(!1))}),v=h.evtMessageDeleted.attach(t=>(t.channelId||t.roomId)===e,t=>{(t.channelId||t.roomId)===e&&t.messageId&&c(t.messageId)}),y=h.evtChannelCleared.attach(t=>(t.channelId||t.roomId)===e,t=>{(t.channelId||t.roomId)===e&&u()}),b=h.evtChannelDeleted.attach(t=>(t.channelId||t.roomId)===e,t=>{(t.channelId||t.roomId)===e&&u()});return()=>{e&&(L$(`[useSocketChat] useEffect cleanup: Leaving channel ${e}. Current joinedChannelRef: ${f.current}`),h.leaveChannel(e),e===f.current&&(f.current=null,L$(`[useSocketChat] useEffect cleanup: Reset joinedChannelRef for ${e}`))),[i,m,g,v,y,b].forEach(e=>e?.detach())}},[e,t,h]),{sendMessage:m,animatedMessageId:p.current}}({channelId:ee,currentUserId:j,contextId:t,chatType:e,allAgents:X,messages:ie,onAddMessage:r=>{se(r),(async()=>{if(!$.current||!Pe($.current)||e!==Uf.DM)return;if(!ee||!g.currentDmChannelId)return void D$("Cannot update chat title: missing channel ID");const r=lz(),n=await r.messaging.generateChannelTitle(ee,t),i=n?.title,a=await r.messaging.getChannelParticipants(g.currentDmChannelId);if(i&&a){let e=[];a&&Array.isArray(a.participants)?e=a.participants.map(e=>e.userId):a&&Array.isArray(a)&&(e=a.map(e=>e.userId||e.id||e)),await r.messaging.updateChannel(ee,{name:i,participantCentralUserIds:e});const n=Gi();o.invalidateQueries({queryKey:["dmChannels",t,n]})}})(),r.isAgent&&ke()},onUpdateMessage:(e,t)=>{oe(e,t),t.isLoading||void 0===t.isLoading||ke()},onDeleteMessage:e=>{le(e)},onClearMessages:()=>{ce()},onInputDisabledChange:e=>M({inputDisabled:e})}),{selectedFiles:ze,handleFileChange:Fe,removeFile:He,createBlobUrls:Ge,uploadFiles:Ve,cleanupBlobUrls:We,clearFiles:Ze}=function({agentId:e,channelId:t,chatType:r}){const[n,a]=i.useState([]),s=i.useRef(new Set),{toast:o}=Va(),l=lz();i.useEffect(()=>()=>{s.current.forEach(e=>URL.revokeObjectURL(e)),s.current.clear()},[]);const c=i.useCallback(e=>{const t=Array.from(e.target.files||[]).filter(e=>e.type.startsWith("image/")||e.type.startsWith("video/")||e.type.startsWith("audio/")||"application/pdf"===e.type||"application/msword"===e.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e.type||"application/vnd.ms-excel"===e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-powerpoint"===e.type||"application/vnd.openxmlformats-officedocument.presentationml.presentation"===e.type||e.type.startsWith("text/")).filter(e=>!n.some(t=>t.file.name===e.name&&t.file.size===e.size&&t.file.lastModified===e.lastModified)).map(e=>({file:e,id:Hi(),isUploading:!1}));a(e=>{const r=[...e,...t];return Array.from(new Map(r.map(e=>[`${e.file.name}-${e.file.size}`,e])).values())}),e.target&&(e.target.value="")},[n]),u=i.useCallback(e=>{a(t=>{const r=t.find(t=>t.id===e);return r?.blobUrl&&(URL.revokeObjectURL(r.blobUrl),s.current.delete(r.blobUrl)),t.filter(t=>t.id!==e)})},[]),d=i.useCallback(e=>e.map(e=>{const t=URL.createObjectURL(e.file);return s.current.add(t),e.blobUrl=t,{id:e.id,url:t,title:e.file.name,contentType:g$(e.file.type),isUploading:!0}}).filter(e=>void 0!==e.contentType),[]),h=i.useCallback(async n=>{if(!n.length)return{uploaded:[],failed:[],blobUrls:[]};const i=n.map(async n=>{try{const i=r===Uf.DM&&e?await l.media.uploadAgentMedia(e,{file:n.file,filename:n.file.name}):await l.media.uploadChannelMedia(t,n.file);return{success:!0,media:{id:n.id,url:i.url,title:n.file.name,source:"file_upload",contentType:g$(n.file.type)}}}catch(i){return P$(`Failed to upload ${n.file.name}:`,i),o({title:`Upload Failed: ${n.file.name}`,description:i instanceof Error?i.message:"Upload failed",variant:"destructive"}),{success:!1,file:n,error:i instanceof Error?i.message:"Upload failed"}}}),a=await Promise.allSettled(i),s=[],c=[],u=[];return a.forEach((e,t)=>{"fulfilled"===e.status?e.value.success&&"media"in e.value?s.push(e.value.media):"file"in e.value&&c.push(e.value):c.push({file:n[t],error:e.reason?.message||"Upload failed"})}),n.forEach(e=>{e.blobUrl&&u.push(e.blobUrl)}),{uploaded:s,failed:c,blobUrls:u}},[r,e,t,o]),p=i.useCallback(e=>{e.forEach(e=>{URL.revokeObjectURL(e),s.current.delete(e)})},[]),f=i.useCallback(()=>{n.forEach(e=>{e.blobUrl&&(URL.revokeObjectURL(e.blobUrl),s.current.delete(e.blobUrl))}),a([])},[n]);return{selectedFiles:n,setSelectedFiles:a,handleFileChange:c,removeFile:u,createBlobUrls:d,uploadFiles:h,cleanupBlobUrls:p,clearFiles:f,getContentTypeFromMimeType:g$}}({agentId:U?.id,channelId:ee,chatType:e}),Ke=e=>{"Enter"!==e.key||e.shiftKey||e.nativeEvent.isComposing||(e.preventDefault(),Ye(e))},Ye=async t=>{t.preventDefault();let r=ee;if(e===Uf.DM&&!r&&U?.id){if(g.isCreatingDM||W.isPending)return void L$("[Chat] DM channel creation already in progress; will wait for it to finish instead of creating another.");L$("[Chat] No DM channel selected, creating one before sending message");try{Se.current=!0;const e=await W.mutateAsync({agentId:U.id,channelName:`Chat - ${Ui().format("MMM D, HH:mm")}`,serverId:te});M({currentDmChannelId:e.id}),r=e.id,await new Promise(e=>setTimeout(e,100))}catch(u){return P$("[Chat] Failed to create DM channel before sending message:",u),s({title:"Error",description:"Failed to create chat channel. Please try again.",variant:"destructive"}),void M({inputDisabled:!1})}}if(!g.input.trim()&&0===ze.length||P.current||!r||!te||!j||e===Uf.DM&&!U?.id)return;const n=Hi();let i=g.input.trim();const a=g.input;M({input:"",inputDisabled:!0});const o=[...ze];Ze(),L.current?.reset();const l=Ge(o),c={id:n,text:i,name:mn,createdAt:Date.now(),senderId:j,isAgent:!1,isLoading:!0,channelId:r,serverId:te,source:e===Uf.DM?gn:vn,attachments:l};(i||o.length>0)&&se(c),ke();try{let t=[];if(o.length>0){const{uploaded:e,failed:r,blobUrls:a}=await Ve(o);t=e,r.length>0&&oe(n,{attachments:c.attachments?.filter(e=>!r.some(t=>t.file.id===e.id))}),We(a),!i.trim()&&t.length>0&&(i=`Shared ${t.length} file(s).`)}const s=Vie(a).map((e,t)=>({id:`textmedia-${n}-${t}`,url:e.url,title:"image"===e.type?"Image":"video"===e.type?"Video":"Media Link",source:"user_input_url",contentType:"image"===e.type?$f.IMAGE:"video"===e.type?$f.VIDEO:void 0})),l=[...t,...s],u=i||(l.length>0?"Shared content.":"");if(!u.trim()&&0===l.length)return M({inputDisabled:!1}),void le(n);await De(u,te,e===Uf.DM?gn:vn,l.length>0?l:void 0,n,void 0,r)}catch(u){P$("Error sending message or uploading files:",u),s({title:"Error Sending Message",description:u instanceof Error?u.message:"Could not send message.",variant:"destructive"}),oe(n,{isLoading:!1,text:`${c.text||"Attachment(s)"} (Failed to send)`}),M({inputDisabled:!1})}finally{O.current?.focus()}},Je=e=>{if(!ee||!e)return;const t=m$(e);t&&(le(e),je({channelId:ee,messageId:t}))},Xe=async t=>{if(P.current||!t.text?.trim()&&0===t.attachments?.length)return;M({inputDisabled:!0});const r=Hi(),n=t.text?.trim()||`Shared ${t.attachments?.length} file(s).`,i={id:r,text:t.text,name:mn,createdAt:Date.now(),senderId:j,isAgent:!1,isLoading:!0,channelId:t.channelId,serverId:te,source:e===Uf.DM?gn:vn,attachments:t.attachments};if(se(i),ke(),!te||!ee)return P$("Cannot retry message: missing server or channel ID"),s({title:"Error Sending Message",description:"Missing required channel information.",variant:"destructive"}),M({inputDisabled:!1}),void le(r);try{await De(n,te,e===Uf.DM?gn:vn,t.attachments,r,void 0,ee)}catch(a){P$("Error sending message or uploading files:",a),s({title:"Error Sending Message",description:a instanceof Error?a.message:"Could not send message.",variant:"destructive"}),oe(r,{isLoading:!1,text:`${i.text||"Attachment(s)"} (Failed to send)`}),M({inputDisabled:!1})}},et=()=>{if(!ee)return;const t=e===Uf.DM?`Clear all messages in this chat with ${U?.name}?`:"Clear all messages in this group chat?";E({title:"Clear Chat",description:`${t} This action cannot be undone.`,confirmText:"Clear",variant:"destructive"},()=>{Le(ee)})};if(i.useEffect(()=>{const e=()=>{const e=window.innerWidth<768;M({isMobile:e})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[M]),e===Uf.DM&&(B||!U&&t||V))return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(he,{className:"h-8 w-8 animate-spin text-primary"})});if(!ee||!te||e===Uf.DM&&!U)return r.jsx("div",{className:"flex flex-1 justify-center items-center",children:r.jsx("p",{children:"Loading chat context..."})});const tt=()=>{if(e===Uf.DM&&U)return r.jsxs("div",{className:"flex items-center justify-between mb-4 p-3",children:[r.jsx("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:r.jsxs(ds,{children:[r.jsx(hs,{asChild:!0,children:r.jsxs(Yi,{variant:"ghost",size:"sm",className:"py-6 px-2 flex-shrink-0",children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[r.jsx(TH,{className:"size-4 sm:size-10 border rounded-full",children:r.jsx(NH,{src:Wi(U)})}),U?.status===Ff.ACTIVE?r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx("span",{className:"absolute bottom-0 right-0 size-2 sm:size-[10px] rounded-full border border-white bg-green-500"})}),r.jsx(ca,{side:"right",children:r.jsx("p",{children:"Agent is active"})})]}):r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx("span",{className:"absolute bottom-0 right-0 size-2 sm:size-[10px] rounded-full border border-white bg-muted-foreground"})}),r.jsx(ca,{side:"right",children:r.jsx("p",{children:"Agent is inactive"})})]})]}),r.jsx("div",{children:r.jsx("h2",{className:"font-semibold text-lg truncate max-w-[80px] sm:max-w-none",children:U?.name||"Agent"})}),r.jsx(C,{className:"size-4"})]})}),r.jsxs(ps,{align:"start",side:"bottom",className:"min-w-36 w-[var(--radix-dropdown-menu-trigger-width)]",children:[r.jsxs(fs,{onClick:()=>{Wa(U,s)},children:[r.jsx(de,{className:"h-4 w-4 mr-2"}),"Export"]}),r.jsx(gs,{}),r.jsxs(fs,{onClick:()=>{U&&!I(U.id)&&N(U)},children:[r.jsx(pe,{className:"h-4 w-4 mr-2"}),"Stop Agent"]}),r.jsxs(fs,{onClick:()=>{U&&!H&&(H||E({title:"Delete Agent",description:`Are you sure you want to delete the agent "${U?.name}"? This action cannot be undone.`,confirmText:"Delete",variant:"destructive"},F))},className:"text-destructive focus:text-destructive hover:bg-red-50 dark:hover:bg-red-950/50",children:[r.jsx(fe,{className:"h-4 w-4 mr-2"}),"Delete Agent"]})]})]})}),r.jsx("div",{className:"flex gap-1 sm:gap-2 items-center flex-shrink-0",children:e===Uf.DM&&r.jsxs("div",{className:"flex items-center gap-2",children:[q.length>0&&r.jsxs(ds,{children:[r.jsx(hs,{asChild:!0,children:r.jsxs(Yi,{variant:"outline",size:"sm",className:"w-8 h-9 sm:max-w-[300px] sm:w-auto rounded-[12px]",children:[r.jsx(Qe,{className:"size-4 flex-shrink-0 text-muted-foreground"}),r.jsx("span",{className:"hidden md:inline truncate text-xs sm:text-sm",children:q.find(e=>e.id===g.currentDmChannelId)?.name||"Select Chat"}),r.jsx(C,{className:"hidden md:inline-flex size-4 text-muted-foreground"})]})}),r.jsxs(ps,{align:"end",className:"w-[280px] sm:w-[320px]",children:[r.jsxs(ms,{className:"font-medium",children:["Chat History with ",U.name]}),r.jsx(gs,{}),r.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:q.map(e=>r.jsx(fs,{onClick:()=>Ne(e.id),className:Bi("cursor-pointer",e.id===g.currentDmChannelId&&"bg-muted"),children:r.jsxs("div",{className:"flex items-center justify-between w-full",children:[r.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[r.jsx("span",{className:Bi("text-sm truncate",e.id===g.currentDmChannelId&&"font-medium"),children:e.name}),r.jsx("span",{className:"text-xs text-muted-foreground",children:Ui(("string"==typeof e.metadata?.createdAt||"number"==typeof e.metadata?.createdAt?e.metadata.createdAt:null)||e.updatedAt||e.createdAt).fromNow()})]}),e.id===g.currentDmChannelId&&r.jsx(Aa,{variant:"default",className:"text-xs flex-shrink-0 ml-2",children:"Current"})]})},e.id))})]})]}),r.jsx(Pie,{mainAction:{label:g.isCreatingDM?"Creating...":r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"sm:hidden",children:"New"}),r.jsx("span",{className:"hidden sm:inline",children:"New Chat"})]}),onClick:()=>Te(U?.id),icon:g.isCreatingDM?r.jsx(he,{className:"size-4 animate-spin"}):r.jsx(qe,{className:"size-4"}),disabled:g.isCreatingDM||V},actions:[{label:"Clear Chat",onClick:et,icon:r.jsx(Vr,{className:"size-4"}),disabled:!ie||0===ie.length},{label:"Delete Chat",onClick:Ie,icon:r.jsx(Me,{className:"size-4"}),disabled:!g.currentDmChannelId,variant:"destructive"}],variant:"outline",size:"sm",mainButtonClassName:"rounded-l-[12px] h-9",dropdownButtonClassName:"rounded-r-[12px] h-9"}),r.jsxs(oa,{children:[r.jsx(la,{asChild:!0,children:r.jsx(Yi,{className:"w-9 h-9 rounded-[12px]",variant:"outline",onClick:u,children:l?r.jsx(qr,{className:"size-4"}):r.jsx(Wr,{className:"size-4"})})}),r.jsx(ca,{side:"bottom",children:r.jsx("p",{children:l?"Close SidePanel":"Open SidePanel"})})]})]})})]});if(e===Uf.GROUP){const e=Zi(Z?.data||void 0,ue,j);return r.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-card rounded-lg border",children:[r.jsx("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:r.jsx("h2",{className:"font-semibold text-lg truncate",title:e,children:e})}),r.jsxs("div",{className:"flex gap-1 sm:gap-2 items-center flex-shrink-0",children:[r.jsx(Pie,{mainAction:{label:"Edit Group",onClick:()=>M({showGroupEditPanel:!0}),icon:r.jsx(Zr,{className:"size-4"})},actions:[{label:"Clear Messages",onClick:et,icon:r.jsx(Vr,{className:"size-4"}),disabled:!ie||0===ie.length},{label:"Delete Group",onClick:()=>{if(!ee||!te)return;const e=ee;E({title:"Delete Group",description:"Are you sure you want to delete this group? This action cannot be undone.",confirmText:"Delete",variant:"destructive"},async()=>{try{const t=lz();await t.messaging.deleteChannel(e),s({title:"Group Deleted",description:"The group has been successfully deleted."}),window.location.href="/"}catch(t){P$("[Chat] Error deleting group:",t),s({title:"Error",description:"Could not delete group.",variant:"destructive"})}})},icon:r.jsx(Me,{className:"size-4"}),disabled:!ee||!te,variant:"destructive"}],variant:"outline",size:"sm",className:"px-2 sm:px-3"}),r.jsx(Yi,{variant:"ghost",size:"sm",className:"px-2 sm:px-3 h-8 w-8 sm:w-auto",onClick:u,children:l?r.jsx(qr,{className:"h-4 w-4"}):r.jsx(Wr,{className:"h-4 w-4"})})]})]}),ue.length>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-card rounded-lg border overflow-x-auto",children:[r.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap flex-shrink-0",children:"Agents:"}),r.jsxs("div",{className:"flex gap-2 min-w-0",children:[r.jsx(Yi,{variant:g.selectedGroupAgentId?"ghost":"default",size:"sm",onClick:()=>M({selectedGroupAgentId:null}),className:"flex items-center gap-2 flex-shrink-0",children:r.jsx("span",{children:"All"})}),ue.map(e=>r.jsxs(Yi,{variant:g.selectedGroupAgentId===e?.id?"default":"ghost",size:"sm",onClick:()=>{M({selectedGroupAgentId:e?.id||null}),e?.id&&!l&&c(!0)},className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx(TH,{className:"size-5",children:r.jsx(NH,{src:Wi(e)})}),r.jsx("span",{className:"truncate max-w-[100px] sm:max-w-none",children:e?.name})]},e?.id))]})]})]})}return null};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"h-full flex flex-col relative overflow-hidden",children:[x?r.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[r.jsx("div",{className:"flex-shrink-0 p-2 sm:p-4 pb-0",children:tt()}),r.jsxs("div",{className:Bi("flex flex-col transition-all duration-300 w-full flex-1 min-h-0 overflow-hidden p-2 sm:p-4 pt-0"),children:[r.jsx("div",{className:"flex-1 min-h-0 overflow-hidden px-5 py-2",children:r.jsx(Pse,{messages:ie,isLoadingMessages:ae,chatType:e,currentClientEntityId:j,targetAgentData:U,allAgents:X,animatedMessageId:$e,scrollRef:ve,contentRef:ye,isAtBottom:be,scrollToBottom:_e,disableAutoScroll:we,finalChannelId:ee,getAgentInMessage:ge,agentAvatarMap:me,onDeleteMessage:Je,onRetryMessage:e=>{if(!ee)return void s({title:"Error",description:"Cannot retry message: missing channel information.",variant:"destructive"});const t={id:Hi(),text:e,name:mn,senderId:j,isAgent:!1,createdAt:Date.now(),channelId:ee,serverId:te};Xe(t)},selectedGroupAgentId:g.selectedGroupAgentId})}),r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Rse,{input:g.input,setInput:e=>M({input:e}),inputDisabled:g.inputDisabled,selectedFiles:ze,removeFile:He,handleFileChange:Fe,handleSendMessage:Ye,handleKeyDown:Ke,chatType:e,targetAgentData:U,formRef:L,inputRef:O,fileInputRef:R})})]})]}):r.jsxs(Oie,{direction:"horizontal",className:"h-full flex-1 overflow-hidden",onLayout:e=>{e.length>=2&&l&&!g.isMobile&&(f(e[0]),m(e[1]))},children:[r.jsx(Rie,{defaultSize:l&&!g.isMobile?d:100,minSize:g.isMobile?100:50,children:r.jsx("div",{className:"relative h-full overflow-hidden",children:r.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[r.jsx("div",{className:"flex-shrink-0 p-2 sm:p-4 pb-0",children:tt()}),r.jsxs("div",{className:Bi("flex flex-col transition-all duration-300 w-full flex-1 min-h-0 overflow-hidden p-2 sm:p-4 pt-0"),children:[r.jsx("div",{className:"flex-1 min-h-0 overflow-hidden px-5 py-2",children:r.jsx(Pse,{messages:ie,isLoadingMessages:ae,chatType:e,currentClientEntityId:j,targetAgentData:U,allAgents:X,animatedMessageId:$e,scrollRef:ve,contentRef:ye,isAtBottom:be,scrollToBottom:_e,disableAutoScroll:we,finalChannelId:ee,getAgentInMessage:ge,agentAvatarMap:me,onDeleteMessage:Je,onRetryMessage:e=>{if(!ee)return void s({title:"Error",description:"Cannot retry message: missing channel information.",variant:"destructive"});const t={id:Hi(),text:e,name:mn,senderId:j,isAgent:!1,createdAt:Date.now(),channelId:ee,serverId:te};Xe(t)},selectedGroupAgentId:g.selectedGroupAgentId})}),r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Rse,{input:g.input,setInput:e=>M({input:e}),inputDisabled:g.inputDisabled,selectedFiles:ze,removeFile:He,handleFileChange:Fe,handleSendMessage:Ye,handleKeyDown:Ke,chatType:e,targetAgentData:U,formRef:L,inputRef:O,fileInputRef:R})})]})]})})}),(()=>{let n,i,a="Agent";if(e===Uf.DM)n=t,a=U?.name||"Agent",i=g.currentDmChannelId||void 0;else if(e===Uf.GROUP&&g.selectedGroupAgentId){n=g.selectedGroupAgentId;const e=X.find(e=>e.id===g.selectedGroupAgentId);a=e?.name||"Group Member",i=t}else e!==Uf.GROUP||g.selectedGroupAgentId||(a="Group",i=t);return l&&!g.isMobile&&r.jsxs(r.Fragment,{children:[r.jsx(Lie,{withHandle:!0}),r.jsx(Rie,{defaultSize:h,minSize:15,maxSize:85,children:r.jsx(Ase,{agentId:n,agentName:a,channelId:i})})]})})()]}),(()=>{let n,i,a="Agent";if(e===Uf.DM)n=t,a=U?.name||"Agent",i=g.currentDmChannelId||void 0;else if(e===Uf.GROUP&&g.selectedGroupAgentId){n=g.selectedGroupAgentId;const e=X.find(e=>e.id===g.selectedGroupAgentId);a=e?.name||"Group Member",i=t}else e!==Uf.GROUP||g.selectedGroupAgentId||(a="Group",i=t);return l&&x&&r.jsx("div",{className:"absolute inset-0 z-50 bg-background/80 backdrop-blur-sm",children:r.jsx("div",{className:"absolute inset-0 bg-background shadow-lg",children:r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[r.jsx("h3",{className:"font-semibold text-lg",children:a}),r.jsx(Yi,{variant:"ghost",size:"sm",onClick:()=>c(!1),className:"h-8 w-8 p-0",children:r.jsx(qr,{className:"h-4 w-4"})})]}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsx(Ase,{agentId:n,agentName:a,channelId:i})})]})})})})()]}),g.showGroupEditPanel&&e===Uf.GROUP&&r.jsx(zse,{onClose:()=>M({showGroupEditPanel:!1}),channelId:t}),g.showProfileOverlay&&e===Uf.DM&&U?.id&&r.jsx(cW,{isOpen:g.showProfileOverlay,onClose:()=>M({showProfileOverlay:!1}),agentId:U.id}),r.jsx(Dz,{open:k,onOpenChange:S,title:T?.title||"",description:T?.description||"",confirmText:T?.confirmText,cancelText:T?.cancelText,variant:T?.variant,onConfirm:A})]})}function Jse(){const{agentId:e,channelId:t}=Kr(),n=Oe();i.useEffect(()=>(L$("[AgentRoute] Component mounted/updated",{agentId:e,channelId:t}),()=>{L$("[AgentRoute] Component unmounted",{agentId:e,channelId:t})}),[e,t]);const{data:a,isLoading:s}=qH(e),{startAgent:o,isAgentStarting:l}=oW(),{data:c,isLoading:u}=KH(),d=c?.data?.servers?.[0]?.id,h=a?.data?{...a.data,status:"active"===a.data.status?Ff.ACTIVE:(a.data.status,Ff.INACTIVE),username:a.data.username||a.data.name||"Unknown",bio:a.data.bio||"",messageExamples:a.data.messageExamples||[],postExamples:a.data.postExamples||[],topics:a.data.topics||[],adjectives:a.data.adjectives||[],knowledge:a.data.knowledge||[],plugins:a.data.plugins||[],settings:a.data.settings||{},secrets:a.data.secrets||{},style:a.data.style||{},templates:a.data.templates||{},enabled:"boolean"!=typeof a.data.enabled||a.data.enabled,createdAt:"number"==typeof a.data.createdAt?a.data.createdAt:Date.now(),updatedAt:"number"==typeof a.data.updatedAt?a.data.updatedAt:Date.now()}:void 0;if(!e)return r.jsx("div",{className:"p-4",children:"Agent ID not provided."});if(s||u||!h)return r.jsx("div",{className:"p-4 flex items-center justify-center h-full","data-testid":"loader",children:r.jsx(he,{className:"h-8 w-8 animate-spin text-primary"})});d||D$("[AgentRoute] No server ID available, using default");const p=h.status===Ff.ACTIVE,f=l(h.id),m=()=>{h&&o(h)};return p?(L$("[AgentRoute] Agent is active, rendering chat for DM",{agentName:h?.name,dmChannelIdFromRoute:t}),r.jsx(Yse,{chatType:Uf.DM,contextId:e,serverId:d,initialDmChannelId:t},`${e}-${t||"no-dm-channel"}`)):(L$("[AgentRoute] Agent is not active, rendering inactive state UI",{agentName:h?.name}),r.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full p-8 text-center",children:[r.jsxs("h2",{className:"text-2xl font-semibold mb-4",children:[h.name," is not active."]}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"Press the button below to start this agent."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Yi,{onClick:()=>n(`/settings/${e}`),variant:"outline",size:"lg",children:r.jsx(Ze,{className:"h-5 w-5"})}),r.jsxs(Yi,{onClick:m,disabled:f,size:"lg",children:[f?r.jsx(he,{className:"mr-2 h-5 w-5 animate-spin"}):r.jsx(ht,{className:"mr-2 h-5 w-5"}),f?"Starting Agent...":"Start Agent"]})]})]}))}function Xse(){return r.jsx("div",{className:"h-full w-full overflow-y-auto",children:r.jsx("div",{className:"min-h-full flex w-full justify-center px-4 sm:px-6 py-4",children:r.jsx("div",{className:"w-full max-w-4xl min-w-0",children:r.jsx(Pz,{})})})})}function Qse({className:e,...t}){return r.jsx(Yr,{"data-slot":"switch",className:Bi("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-4 w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",e),...t,children:r.jsx(Jr,{"data-slot":"switch-thumb",className:Bi("bg-background dark:data-[state=unchecked]:bg-primary-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block h-2.5 w-2.5 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%+10px)] data-[state=unchecked]:translate-x-0")})})}const eoe=({agent:e,onChat:t})=>{const n=Oe(),{startAgent:i,stopAgent:a,isAgentStarting:s,isAgentStopping:o}=oW();if(!e||!e.id)return P$("[AgentCard] Agent data or ID is missing",{agent:e}),r.jsx(cG,{className:"p-4 min-h-[100px] flex items-center justify-center text-muted-foreground",children:"Agent data not available."});const l=e.id,c=e.name||"Unnamed Agent",u=Array.isArray(e.bio)?e.bio.filter(Boolean).join(" ").trim():"string"==typeof e.bio&&e.bio.trim()||"Engages with all types of questions and conversations",d=e.status===Ff.ACTIVE,h=s(e.id),p=o(e.id),f={id:e.id,name:c,username:e.username||c,bio:e.bio||"",messageExamples:e.messageExamples||[],postExamples:e.postExamples||[],topics:e.topics||[],adjectives:e.adjectives||[],knowledge:e.knowledge||[],plugins:e.plugins||[],settings:e.settings||{},secrets:e.secrets||{},style:e.style||{},system:e.system||void 0,templates:e.templates||{},enabled:"boolean"!=typeof e.enabled||e.enabled,status:e.status||Ff.INACTIVE,createdAt:"number"==typeof e.createdAt?e.createdAt:Date.now(),updatedAt:"number"==typeof e.updatedAt?e.updatedAt:Date.now()},m=(e=!1)=>{t(e)},g=()=>{d?a(f):i(f)};return r.jsx(cG,{className:Bi("w-full transition-all bg-card border border-border/50 rounded-sm hover:bg-card/50 cursor-pointer",d?"":"opacity-75"),"data-testid":"agent-card",onClick:e=>{e.stopPropagation(),m()},children:r.jsxs(hG,{className:"p-0 relative h-full",children:[r.jsx("div",{className:"absolute top-3 right-3",children:r.jsx(Qse,{checked:d,onCheckedChange:e=>{e!==d&&g()},onClick:e=>e.stopPropagation(),"aria-label":`Toggle ${c}`,disabled:h||p,className:Bi(d?"data-[state=checked]:!bg-green-600":"data-[state=unchecked]:!bg-gray-500/80")})}),r.jsxs("div",{className:"flex flex-col justify-between h-full",children:[r.jsxs("div",{className:"flex items-center gap-4 p-2 h-[90%]",children:[r.jsxs(TH,{className:"h-16 w-16 flex-shrink-0 rounded-sm",children:[r.jsx(NH,{src:Wi(e),alt:c}),r.jsx(IH,{className:"text-lg font-medium rounded-sm",children:Fi(c)})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-xl mb-1 truncate",title:c,children:c}),r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 leading-relaxed",children:u})]})]}),r.jsx("div",{className:"border-t border-muted"}),r.jsxs("div",{className:"flex items-center justify-between py-1 px-2",children:[r.jsx(Yi,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),n(`/settings/${l}`)},className:"h-8 w-8 p-0 hover:bg-muted/50 cursor-pointer",children:r.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})}),r.jsx(Yi,{variant:"outline",size:"sm",onClick:e=>{e.stopPropagation(),m(!0)},className:"h-8 px-2 rounded-sm bg-muted hover:bg-muted/50 cursor-pointer",children:"New Chat"})]})]})]})})},toe=({group:e})=>{const t=Oe(),n=Gi(),[a,s]=i.useState(!1);if(!e||!e.id)return r.jsx(cG,{className:"p-4 min-h-[180px] flex items-center justify-center text-muted-foreground",children:"Group data not available."});const o=Zi(e,e.participants||[],n),{data:l}=ZH(),c=l?.agents||[],{data:u}=JH(e.id),d=u?.data,h=d&&Array.isArray(d)?d:[],p=h?c.filter(e=>e.id&&h.includes(e.id)):[],f=p.map(e=>e.name).filter(Boolean).join(", ")||"No members";return r.jsxs(r.Fragment,{children:[r.jsx(cG,{className:"w-full transition-all bg-card border border-border/50 rounded-sm","data-testid":"agent-card",children:r.jsx(hG,{className:"p-0 relative h-full",children:r.jsxs("div",{className:"flex flex-col justify-between h-full",children:[r.jsxs("div",{className:"flex items-center gap-4 p-2 h-[90%]",children:[r.jsx(TH,{className:"bg-[#282829] h-16 w-16 flex-shrink-0 rounded-[3px] relative overflow-hidden",children:p&&p.length>0?r.jsxs("div",{className:"grid grid-cols-2 grid-rows-2 gap-1 w-full h-full p-1",children:[p.slice(0,3).map(e=>{const t="string"==typeof e.settings?.avatar?e.settings.avatar:null;return t?r.jsx("img",{src:t,alt:e.name,className:"object-cover w-full h-full rounded-[3px]"},e.id):r.jsx("div",{className:"flex items-center justify-center bg-[#3F3F3F] text-xs font-medium w-full h-full rounded-[3px]",children:Fi(e.name)},e.id)}),p.length>3?r.jsxs("div",{className:"flex items-center justify-center bg-[#3F3F3F] text-xs font-medium w-full h-full rounded-[3px]",children:["+",p.length-3]}):Array.from({length:4-p.slice(0,3).length}).map((e,t)=>r.jsx("div",{className:"flex items-center justify-center bg-[#2D2D2D] text-xs font-medium w-full h-full rounded-[3px]"},`empty-${t}`))]}):r.jsx("div",{className:"flex items-center justify-center bg-muted text-lg font-medium w-full h-full",children:Fi(o)})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-xl mb-1 truncate",title:o,children:o}),r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 leading-relaxed",children:f})]})]}),r.jsx("div",{className:"border-t border-muted"}),r.jsxs("div",{className:"flex items-center justify-between py-1 px-2",children:[r.jsx(Yi,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),s(!0)},className:"h-8 w-8 p-0 hover:bg-muted/50 cursor-pointer",children:r.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})}),r.jsx(Yi,{variant:"outline",size:"sm",onClick:r=>{r.stopPropagation(),t(`/group/${e.id}?serverId=${e.server_id}`)},className:"h-8 px-2 rounded-sm bg-muted hover:bg-muted/50 cursor-pointer",children:"Chat"})]})]})})}),a&&r.jsx(zse,{onClose:()=>s(!1),channelId:e.id})]})};function roe(){const{data:e,isLoading:t,isError:n,error:a}=ZH(),s=Oe(),o=i.useMemo(()=>e?.agents||[],[e]),l=o.filter(e=>e.status===Ff.ACTIVE).length,{data:c}=KH(),u=c?.data?.servers||[],[d,h]=i.useState(!1),[p,f]=i.useState(!1),[m,g]=i.useState(null),[v,y]=i.useState(null),[b,_]=i.useState("agents");return i.useEffect(()=>{L$("[Home] Component mounted/re-rendered. Key might have changed.")},[]),r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex-1 w-full overflow-y-auto bg-background",children:r.jsx("div",{className:"flex flex-col w-full h-full",children:r.jsxs(Oa,{value:b,onValueChange:_,className:"w-full h-full flex flex-col",children:[r.jsx("div",{className:"w-full",children:r.jsxs("div",{className:"w-full md:max-w-4xl mx-auto px-6 pt-6 pb-2",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsxs(Ra,{className:"h-auto p-0 bg-transparent border-0 border-b-0 gap-2 w-auto",children:[r.jsxs(La,{value:"agents",className:"relative rounded-full data-[state=active]:border-b-0 data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:font-bold cursor-pointer text-lg py-1",children:["Agents",r.jsx("span",{className:`\n                          absolute -top-2.5 right-0 inline-flex items-center justify-center h-5 w-5 rounded-full bg-blue-600 text-white text-[8px] font-semibold border border-black\n                          transition-all duration-300 ease-in-out\n                          ${"agents"===b&&l>0?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none"}\n                        `,children:l})]}),r.jsx(La,{value:"groups",className:"rounded-full data-[state=active]:border-b-0 data-[state=active]:bg-white data-[state=active]:text-black data-[state=active]:font-bold cursor-pointer text-lg py-1",children:"Groups"})]}),r.jsxs(Yi,{variant:"ghost",onClick:()=>{s("agents"===b?"/create":"/group/new")},className:"create-agent-button cursor-pointer gap-1",children:[r.jsx(qe,{className:"w-4 h-4"}),"agents"===b?"Create New Agent":"Create New Group"]})]}),r.jsx(Xi,{})]})}),r.jsx(Pa,{value:"agents",className:"flex-1 mt-0 bg-background",children:r.jsxs("div",{className:"flex flex-col gap-6 w-full md:max-w-4xl mx-auto px-6 py-2",children:[t&&r.jsx("div",{className:"text-center py-8",children:"Loading agents..."}),n&&r.jsxs("div",{className:"text-center py-8",children:["Error loading agents: ",a instanceof Error?a.message:"Unknown error"]}),0===o.length&&!t&&r.jsx("div",{className:"text-center py-8 flex flex-col items-center gap-4",children:r.jsx("p",{className:"text-muted-foreground",children:"No agents currently running. Start a character to begin."})}),!t&&!n&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-3 agents-section",children:o.sort((e,t)=>{const r=e.status===Ff.ACTIVE?1:0;return(t.status===Ff.ACTIVE?1:0)-r}).map(e=>r.jsx(eoe,{agent:e,onChat:t=>(async(e,t)=>{e.id&&s(`/chat/${e.id}`,{state:{forceNew:t}})})(e,t)},e.id))})]})}),r.jsx(Pa,{value:"groups",className:"flex-1 mt-0 bg-background",children:r.jsx("div",{className:"flex flex-col gap-6 w-full md:max-w-4xl mx-auto px-6 py-2",children:!t&&!n&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-3 groups-section",children:u.map(e=>r.jsx(noe,{serverId:e.id},e.id))})})})]})})}),m?.id&&r.jsx(cW,{isOpen:d,onClose:()=>{g(null),h(!1)},agentId:m.id}),p&&r.jsx(zse,{onClose:()=>{y(null),f(!1)},channelId:v??void 0})]})}const noe=Br.memo(({serverId:e})=>{const{data:t,isLoading:n}=YH(e),a=i.useMemo(()=>t?.data?.channels?.filter(e=>e.type===Uf.GROUP)||[],[t]);return n?r.jsx("p",{children:"Loading channels for server..."}):a&&0!==a.length?r.jsx(r.Fragment,{children:a.map(t=>r.jsx(toe,{group:{...t,server_id:e}},t.id))}):r.jsx("p",{className:"text-sm text-muted-foreground",children:"No group channels in this server."})});function ioe(){const e=Ue().pathname,t=e.startsWith("/api/")||e.includes("/agents/")||e.includes("/memory/")||e.includes("/speech/");return r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[70vh] px-4 text-center",children:[r.jsx("div",{className:"flex items-center justify-center mb-8",children:r.jsx("div",{className:"bg-red-900/20 h-24 w-24 rounded-full flex items-center justify-center",children:r.jsx(se,{className:"h-14 w-14 text-red-500"})})}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Page Not Found"}),r.jsxs("div",{className:"max-w-lg",children:[t?r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-lg mb-6 text-muted-foreground",children:["The endpoint ",r.jsx("span",{className:"font-mono text-red-400",children:e})," does not exist."]}),r.jsxs("div",{className:"bg-red-900/20 border border-red-800/30 rounded-md p-4 mb-8 text-left",children:[r.jsxs("h3",{className:"text-red-400 font-medium mb-2 flex items-center",children:[r.jsx(se,{className:"h-4 w-4 mr-2"}),"Endpoint Not Found"]}),r.jsx("p",{className:"text-sm text-red-300/80 mb-2",children:"The requested API endpoint does not exist on this server. Please check that:"}),r.jsxs("ul",{className:"text-sm text-red-300/80 list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"The URL is spelled correctly"}),r.jsx("li",{children:"You're using the correct version of the API"}),r.jsx("li",{children:"The endpoint is available in this version of Eliza"})]})]})]}):r.jsx("p",{className:"text-lg mb-6 text-muted-foreground",children:"Sorry, the page you're looking for doesn't exist or has been moved."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx(Yi,{asChild:!0,variant:"default",children:r.jsxs(Xr,{to:"/",children:[r.jsx(Qr,{className:"h-4 w-4 mr-2"}),"Go to Home"]})}),r.jsx(Yi,{asChild:!0,variant:"outline",children:r.jsxs("a",{onClick:()=>window.history.back(),children:[r.jsx(Dr,{className:"h-4 w-4 mr-2"}),"Go Back"]})})]})]})]})}function aoe(){const{channelId:e}=Kr(),[t]=en(),n=t.get("serverId"),i=m$(e),a=m$(n||"");return i&&a?r.jsx(Yse,{chatType:Uf.GROUP,contextId:i,serverId:a},i):r.jsx("div",{className:"flex flex-1 justify-center items-center",children:r.jsx("p",{children:"Missing channel or server information."})})}function soe(){const e=Oe();return r.jsx("div",{className:"pt-4 md:pt-8",children:r.jsx(zse,{onClose:()=>e(-1)})})}function ooe(){const{agentId:e}=Kr(),t=Oe(),{data:n,isLoading:i}=qH(e);if(i)return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(he,{className:"h-8 w-8 animate-spin"})});if(!n?.data)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[r.jsx("p",{className:"text-muted-foreground",children:"Agent not found"}),r.jsx(Yi,{onClick:()=>t("/"),children:"Back to Home"})]});const a={...n.data,createdAt:n.data.createdAt??Date.now(),bio:n.data.bio??[],topics:n.data.topics??[],adjectives:n.data.adjectives??[],style:n.data.style??{all:[],chat:[],post:[]},settings:n.data.settings??{secrets:{}}};return r.jsx("div",{className:"flex w-full justify-center px-4 sm:px-6 overflow-y-auto",children:r.jsx("div",{className:"w-full md:max-w-4xl py-6",children:r.jsx(iae,{agent:a,agentId:e,onSaveComplete:()=>{}})})})}function loe(){const[e,t]=i.useState(""),[n,a]=i.useState(!1),{login:s}=Uz();return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-yellow-500 mb-2",children:"VIBEE"}),r.jsx("p",{className:"text-gray-400",children:"  "})]}),r.jsxs("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-2 text-center",children:"  "}),r.jsx("p",{className:"text-gray-400 text-center mb-8",children:"  Telegram     "}),e&&r.jsx("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-800 rounded-lg",children:r.jsx("p",{className:"text-red-400 text-sm",children:e})}),r.jsx("button",{onClick:()=>{if(!window.Telegram?.Login)return void t("Telegram Login Widget  .    .");const e="8309813696";if(console.log(" VIBEE Bot Configuration (HARDCODED):"),console.log("  - Bot ID:",e),console.log("  - Bot Name:","@agent_vibecoder_bot"),console.log("  - Bot ID Type:","string"),console.log("  - Bot ID Length:",10),console.log("  - Environment:","production"),""===e.trim())return console.error(" BOT_ID is missing or empty"),void t(" : Bot ID  .");const r=e.trim();if(!/^\d+$/.test(r))return console.error(" Invalid bot_id format:",r),void t(`  Bot ID: "${r}".   .`);console.log(" Bot ID validated successfully:",r),console.log(" Will use bot_id:",r,"for Telegram Login Widget"),console.log(" Starting Telegram authentication..."),a(!0),t("");const n={bot_id:r,request_access:!0,lang:"ru"};console.log(" Telegram auth params:",n),console.log(" All checks passed! Starting auth..."),window.Telegram.Login.auth(n,async e=>{if(a(!1),e)try{await s(e)}catch(moe){t(moe.message||" ")}else t(" ")})},disabled:n,className:"w-full flex items-center justify-center px-6 py-4 rounded-lg font-semibold transition-all duration-200 "+(n?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white border border-blue-500 hover:border-blue-400"),children:n?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-6 h-6 mr-3",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),"  Telegram"]})}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-xs text-gray-500",children:[" Telegram  ,   "," ",r.jsx("a",{href:"#",className:"text-blue-400 hover:text-blue-300",children:" "})]})})]}),r.jsx("script",{src:"https://telegram.org/js/telegram-widget.js"})]})})}noe.displayName="ServerChannels";const coe=new rn({defaultOptions:{queries:{staleTime:BH,refetchInterval:!1,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!0,refetchOnReconnect:!0},mutations:{retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}}}),uoe=async()=>{try{await coe.prefetchQuery({queryKey:["agents"],queryFn:async()=>{const e=lz();return{data:await e.agents.listAgents()}},staleTime:zH})}catch(e){console.error("Error prefetching initial data:",e)}};function doe(){rW();const{status:e}=SH(),{isAuthenticated:t,isLoading:n}=Uz(),[a,s]=i.useState(!1),[o,l]=i.useState(Date.now()),c=Re();if(n)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-yellow-500"})});if(!t)return r.jsx(loe,{});i.useEffect(()=>{L$("[AppContent] Mounted/Updated"),uoe()},[]);const u=()=>{L$("[AppContent] refreshHomePage called. Current homeKey:",o);const e=Date.now();l(e),L$("[AppContent] New homeKey set to:",e),L$("[AppContent] Invalidating queries for Home page refresh."),c.invalidateQueries({queryKey:["agents"]}),c.invalidateQueries({queryKey:["servers"]})};return r.jsxs(sa,{delayDuration:0,children:[r.jsxs(ha,{children:[r.jsx(sG,{refreshHomePage:u}),r.jsxs(fa,{className:"h-screen flex flex-col md:ml-72 overflow-hidden",children:[r.jsx("div",{className:"md:hidden absolute top-4 left-4 z-50",children:r.jsxs(Qi,{open:a,onOpenChange:s,children:[r.jsx(ea,{asChild:!0,children:r.jsxs(Yi,{variant:"ghost",size:"icon","data-testid":"mobile-menu-button",children:[r.jsx(an,{className:"h-5 w-5"}),r.jsx("span",{className:"sr-only",children:"Toggle menu"})]})}),r.jsx(ia,{side:"left",className:"w-80 p-0 z-50",children:r.jsx(sG,{isMobile:!0,refreshHomePage:u})})]})}),r.jsx("div",{className:"flex w-full justify-center pt-16 md:pt-0 flex-shrink-0",children:r.jsx("div",{className:"w-full md:max-w-4xl",children:r.jsx(lG,{})})}),r.jsx("div",{className:"flex-1 min-h-0 flex flex-col overflow-hidden",children:r.jsxs(sn,{children:[r.jsx(on,{path:"/",element:r.jsx(roe,{},o)}),r.jsx(on,{path:"chat/:agentId/:channelId",element:r.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:r.jsx(Jse,{})})}),r.jsx(on,{path:"chat/:agentId",element:r.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:r.jsx(Jse,{})})}),r.jsx(on,{path:"settings/:agentId",element:r.jsx(ooe,{})}),r.jsx(on,{path:"group/new",element:r.jsx(soe,{})}),r.jsx(on,{path:"agents/new",element:r.jsx(Xse,{})}),r.jsx(on,{path:"/create",element:r.jsx("div",{className:"flex w-full justify-center px-4 sm:px-6 overflow-y-auto",children:r.jsx("div",{className:"w-full md:max-w-4xl",children:r.jsx(Pz,{})})})}),r.jsx(on,{path:"/logs",element:r.jsx("div",{className:"flex w-full justify-center",children:r.jsxs("div",{className:"w-full md:max-w-4xl",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("h2",{className:"text-2xl p-4 font-bold",children:"System Logs"})}),r.jsx(wG,{})]})})}),r.jsx(on,{path:"group/:channelId",element:r.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:r.jsx(aoe,{})})}),r.jsx(on,{path:"settings/",element:r.jsx("div",{className:"flex w-full justify-center overflow-y-auto",children:r.jsx("div",{className:"w-full md:max-w-4xl",children:r.jsx(fG,{})})})}),r.jsx(on,{path:"*",element:r.jsx(ioe,{})})]})})]})]}),r.jsx(jG,{}),"unauthorized"!==e&&r.jsx(EG,{})]})}function hoe(){return r.jsx(tn,{client:coe,children:r.jsx("div",{className:"dark antialiased font-sans",style:{colorScheme:"dark"},children:r.jsx(nn,{children:r.jsx(Bz,{children:r.jsx(kH,{children:r.jsx(doe,{})})})})})})}uoe();const poe=document.getElementById("root");if(!poe)throw new Error("Root element not found");ln.createRoot(poe).render(r.jsx(i.StrictMode,{children:r.jsx(hoe,{})}));const foe=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{nQ as a,xn as d,Wre as k,foe as m};
//# sourceMappingURL=chunk-DyUEqYfx.js.map
