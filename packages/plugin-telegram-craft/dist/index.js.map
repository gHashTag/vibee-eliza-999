{
  "version": 3,
  "sources": ["../src/schemas/actions.schema.ts", "../src/schemas/telegram.schema.ts", "../src/actions/sendMessage.action.ts", "../src/actions/readHistory.action.ts", "../src/actions/getDialogs.action.ts", "../src/actions/startGroupMonitoring.action.ts", "../src/actions/addGroupToMonitor.action.ts", "../src/actions/liveFeed.action.ts", "../src/providers/recentMessages.provider.ts", "../src/providers/dialogsList.provider.ts", "../src/providers/capabilities.provider.ts", "../src/providers/liveMessages.provider.ts", "../src/providers/autoMessageForwarder.provider.ts", "../src/evaluators/messageAutoForward.evaluator.ts", "../src/services/telegram.service.ts", "../src/services/adapters/mtproto.adapter.ts", "../src/services/adapters/botapi.adapter.ts", "../src/services/adapters/mcp.adapter.ts", "../src/plugin.ts"],
  "sourcesContent": [
    "import { z } from 'zod'\nimport { TelegramChatIdSchema } from './telegram.schema'\n\n/**\n * SEND_MESSAGE Action Schema\n */\nexport const SendMessageInputSchema = z.object({\n  chatId: TelegramChatIdSchema,\n  message: z.string()\n    .min(1, '–°–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º')\n    .max(4096, '–°–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ (–º–∞–∫—Å. 4096 —Å–∏–º–≤–æ–ª–æ–≤)'),\n  replyTo: z.number().int().positive().optional(),\n})\n\nexport type SendMessageInput = z.infer<typeof SendMessageInputSchema>\n\nexport const SendMessageOutputSchema = z.object({\n  success: z.boolean(),\n  data: z.object({\n    messageId: z.number().int().positive(),\n    chatId: z.string(),\n    date: z.number().int().positive(),\n  }).optional(),\n  error: z.string().optional(),\n})\n\nexport type SendMessageOutput = z.infer<typeof SendMessageOutputSchema>\n\n/**\n * READ_HISTORY Action Schema\n */\nexport const ReadHistoryInputSchema = z.object({\n  chatId: TelegramChatIdSchema,\n  limit: z.number().int().positive().max(100).default(10),\n})\n\nexport type ReadHistoryInput = z.infer<typeof ReadHistoryInputSchema>\n\nexport const ReadHistoryOutputSchema = z.object({\n  success: z.boolean(),\n  data: z.object({\n    messages: z.array(z.object({\n      id: z.number(),\n      text: z.string(),\n      sender: z.string(),\n      date: z.number(),\n    })),\n    chatId: z.string(),\n  }).optional(),\n  error: z.string().optional(),\n})\n\nexport type ReadHistoryOutput = z.infer<typeof ReadHistoryOutputSchema>\n\n/**\n * GET_DIALOGS Action Schema\n */\nexport const GetDialogsInputSchema = z.object({\n  limit: z.number().int().positive().max(100).default(20),\n})\n\nexport type GetDialogsInput = z.infer<typeof GetDialogsInputSchema>\n\nexport const GetDialogsOutputSchema = z.object({\n  success: z.boolean(),\n  data: z.object({\n    dialogs: z.array(z.object({\n      id: z.string(),\n      name: z.string(),\n      unreadCount: z.number(),\n    })),\n  }).optional(),\n  error: z.string().optional(),\n})\n\nexport type GetDialogsOutput = z.infer<typeof GetDialogsOutputSchema>\n\n/**\n * GET_USER Action Schema\n */\nexport const GetUserInputSchema = z.object({\n  userId: z.string().min(1),\n})\n\nexport type GetUserInput = z.infer<typeof GetUserInputSchema>\n\nexport const GetUserOutputSchema = z.object({\n  success: z.boolean(),\n  data: z.object({\n    id: z.string(),\n    username: z.string().optional(),\n    firstName: z.string().optional(),\n    lastName: z.string().optional(),\n  }).optional(),\n  error: z.string().optional(),\n})\n\nexport type GetUserOutput = z.infer<typeof GetUserOutputSchema>\n\n/**\n * JOIN_CHAT Action Schema\n */\nexport const JoinChatInputSchema = z.object({\n  chatId: TelegramChatIdSchema,\n})\n\nexport type JoinChatInput = z.infer<typeof JoinChatInputSchema>\n\n/**\n * FORWARD_MESSAGE Action Schema\n */\nexport const ForwardMessageInputSchema = z.object({\n  fromChatId: TelegramChatIdSchema,\n  toChatId: TelegramChatIdSchema,\n  messageId: z.number().int().positive(),\n})\n\nexport type ForwardMessageInput = z.infer<typeof ForwardMessageInputSchema>\n",
    "import { z } from 'zod'\n\n/**\n * –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞ Telegram Craft\n */\nexport const TelegramConfigSchema = z.object({\n  TELEGRAM_API_ID: z.string().min(1, 'TELEGRAM_API_ID –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω'),\n  TELEGRAM_API_HASH: z.string().min(1, 'TELEGRAM_API_HASH –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω'),\n  TELEGRAM_SESSION: z.string().optional(),\n  TELEGRAM_STRATEGY: z.enum(['mtproto', 'botapi', 'mcp']).default('mtproto'),\n  TELEGRAM_BOT_TOKEN: z.string().optional(), // –î–ª—è Bot API fallback\n  TELEGRAM_PHONE: z.string().optional(), // –î–ª—è MTProto auth\n  TELEGRAM_PASSWORD: z.string().optional(),\n  TELEGRAM_MONITORING_CHANNEL_ID: z.string().optional(),\n})\n\nexport type TelegramConfig = z.infer<typeof TelegramConfigSchema>\n\n/**\n * –ë–∞–∑–æ–≤—ã–µ Telegram —Ç–∏–ø—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π\n */\nexport const TelegramChatIdSchema = z.string().min(1, 'Chat ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º')\n\nexport const TelegramMessageSchema = z.object({\n  id: z.number().int().positive(),\n  text: z.string(),\n  sender: z.string(),\n  date: z.number().int().positive(),\n  chatId: z.string().optional(),\n})\n\nexport const TelegramDialogSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  unreadCount: z.number().int().nonnegative(),\n  lastMessage: TelegramMessageSchema.optional(),\n})\n\nexport const TelegramUserSchema = z.object({\n  id: z.string(),\n  username: z.string().optional(),\n  firstName: z.string().optional(),\n  lastName: z.string().optional(),\n  phone: z.string().optional(),\n})\n",
    "import {\n  Action,\n  IAgentRuntime,\n  Memory,\n  State,\n  HandlerCallback,\n  ActionResult,\n} from '@elizaos/core'\nimport { TelegramService } from '../services/telegram.service'\nimport { SendMessageInputSchema } from '../schemas/actions.schema'\n\n/**\n * SEND_TELEGRAM_MESSAGE Action\n * \n * –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram —á–∞—Ç —á–µ—Ä–µ–∑ userbot\n * \n * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:\n * - \"/send @username —Å–æ–æ–±—â–µ–Ω–∏–µ\"\n * - \"–æ—Ç–ø—Ä–∞–≤—å –≤ telegram —Å–æ–æ–±—â–µ–Ω–∏–µ\"\n */\nexport const sendMessageAction: Action = {\n  name: 'SEND_TELEGRAM_MESSAGE',\n  similes: ['SEND_TG_MESSAGE', 'TELEGRAM_SEND', 'TG_SEND'],\n  description: '–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram —á–∞—Ç —á–µ—Ä–µ–∑ userbot (MTProto)',\n  \n  // –í–∞–ª–∏–¥–∞—Ü–∏—è - –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å action\n  validate: async (runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\n    const text = message.content?.text?.toLowerCase()\n    if (!text) return false\n    \n    // –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è action\n    const commands = ['/send', '/tgsend', 'telegram send']\n    const intents = [\n      '–æ—Ç–ø—Ä–∞–≤—å –≤ telegram',\n      '–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ tg',\n      '–Ω–∞–ø–∏—Å–∞—Ç—å –≤ —Ç–µ–ª–µ–≥—Ä–∞–º',\n      'send to telegram',\n    ]\n    \n    return commands.some(cmd => text.includes(cmd)) ||\n           intents.some(intent => text.includes(intent))\n  },\n  \n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–µ–π—Å—Ç–≤–∏—è\n  handler: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    state: State | undefined,\n    options,\n    callback?: HandlerCallback\n  ): Promise<ActionResult> => {\n    try {\n      // 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤\n      const params = extractSendMessageParams(message, state)\n      \n      // 2. –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zod\n      const validatedInput = SendMessageInputSchema.parse(params)\n      \n      // 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞\n      const service = runtime.getService<TelegramService>('telegram-craft')\n      if (!service) {\n        throw new Error('Telegram service not available')\n      }\n      \n      // 4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n      await callback?.({\n        text: `üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ ${validatedInput.chatId}...`,\n      })\n      \n      // 5. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è\n      const result = await service.sendMessage(\n        validatedInput.chatId,\n        validatedInput.message,\n        validatedInput.replyTo\n      )\n      \n      // 6. –£—Å–ø–µ—à–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç\n      await callback?.({\n        text: `‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!\\n\\nüì® Chat ID: ${validatedInput.chatId}\\nüìù Message ID: ${result.messageId}`,\n      })\n      \n      return {\n        success: true,\n        data: {\n          messageId: result.messageId,\n          chatId: validatedInput.chatId,\n          date: result.date,\n        },\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n      \n      await callback?.({\n        text: `‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:\\n${errorMessage}`,\n      })\n      \n      return {\n        success: false,\n        error: error instanceof Error ? error : new Error(String(error)),\n      }\n    }\n  },\n  \n  // –ü—Ä–∏–º–µ—Ä—ã –¥–ª—è –æ–±—É—á–µ–Ω–∏—è LLM\n  examples: [\n    [\n      {\n        user: '{{user1}}',\n        content: { text: '/send @john Hello from ElizaOS!' },\n      },\n      {\n        user: '{{agent}}',\n        content: {\n          text: '‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!',\n          action: 'SEND_TELEGRAM_MESSAGE',\n        },\n      },\n    ],\n    [\n      {\n        user: '{{user1}}',\n        content: { text: '–û—Ç–ø—Ä–∞–≤—å –≤ telegram —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏–≤–µ—Ç –≤—Å–µ–º' },\n      },\n      {\n        user: '{{agent}}',\n        content: {\n          text: 'üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é —Å–æ–æ–±—â–µ–Ω–∏–µ...',\n          action: 'SEND_TELEGRAM_MESSAGE',\n        },\n      },\n    ],\n  ],\n}\n\n/**\n * –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤\n */\nfunction extractSendMessageParams(message: Memory, state: State | undefined): {\n  chatId: string\n  message: string\n  replyTo?: number\n} {\n  const text = message.content?.text || ''\n  \n  // –ü—Ä–æ—Å—Ç–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ: /send @username —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è\n  const match = text.match(/\\/send\\s+(@?\\w+)\\s+(.+)/i)\n  \n  if (match) {\n    return {\n      chatId: match[1],\n      message: match[2],\n    }\n  }\n  \n  // Fallback: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å roomId –∫–∞–∫ chatId\n  return {\n    chatId: message.roomId || 'me',\n    message: text,\n  }\n}\n",
    "import {\n  Action,\n  IAgentRuntime,\n  Memory,\n  State,\n  HandlerCallback,\n  ActionResult,\n} from '@elizaos/core'\nimport { TelegramService } from '../services/telegram.service'\nimport { ReadHistoryInputSchema } from '../schemas/actions.schema'\n\n/**\n * READ_TELEGRAM_HISTORY Action\n * \n * –ß–∏—Ç–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Telegram —á–∞—Ç–∞\n * \n * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:\n * - \"/history @username\"\n * - \"–ø–æ–∫–∞–∂–∏ –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞\"\n */\nexport const readHistoryAction: Action = {\n  name: 'READ_TELEGRAM_HISTORY',\n  similes: ['GET_TG_HISTORY', 'TELEGRAM_HISTORY', 'TG_HISTORY'],\n  description: '–ß–∏—Ç–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Telegram —á–∞—Ç–∞ (userbot)',\n  \n  // –í–∞–ª–∏–¥–∞—Ü–∏—è\n  validate: async (runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\n    const text = message.content?.text?.toLowerCase()\n    if (!text) return false\n    \n    const commands = ['/history', '/tghistory', 'telegram history']\n    const intents = [\n      '–ø–æ–∫–∞–∂–∏ –∏—Å—Ç–æ—Ä–∏—é',\n      '–ø—Ä–æ—á–∏—Ç–∞–π —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑',\n      '—á—Ç–æ –ø–∏—Å–∞–ª–∏ –≤',\n      'show history',\n      'read messages from',\n    ]\n    \n    return commands.some(cmd => text.includes(cmd)) ||\n           intents.some(intent => text.includes(intent))\n  },\n  \n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫\n  handler: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    state: State | undefined,\n    options,\n    callback?: HandlerCallback\n  ): Promise<ActionResult> => {\n    try {\n      // 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤\n      const params = extractHistoryParams(message, state)\n      \n      // 2. –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zod\n      const validatedInput = ReadHistoryInputSchema.parse(params)\n      \n      // 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞\n      const service = runtime.getService<TelegramService>('telegram-craft')\n      if (!service) {\n        throw new Error('Telegram service not available')\n      }\n      \n      // 4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\n      await callback?.({\n        text: `üìú –ß–∏—Ç–∞—é –∏—Å—Ç–æ—Ä–∏—é –∏–∑ ${validatedInput.chatId}...`,\n      })\n      \n      // 5. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏\n      const messages = await service.getHistory(\n        validatedInput.chatId,\n        validatedInput.limit\n      )\n      \n      // 6. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞\n      const formattedMessages = messages\n        .slice(0, 10) // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n        .map(msg => `[${new Date(msg.date * 1000).toLocaleTimeString()}] ${msg.sender}: ${msg.text}`)\n        .join('\\n')\n      \n      await callback?.({\n        text: `‚úÖ –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ ${validatedInput.chatId}\\n\\n${formattedMessages}\\n\\nüìä –í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π: ${messages.length}`,\n      })\n      \n      return {\n        success: true,\n        data: {\n          messages,\n          chatId: validatedInput.chatId,\n        },\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n      \n      await callback?.({\n        text: `‚ùå –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏:\\n${errorMessage}`,\n      })\n      \n      return {\n        success: false,\n        error: error instanceof Error ? error : new Error(String(error)),\n      }\n    }\n  },\n  \n  // –ü—Ä–∏–º–µ—Ä—ã\n  examples: [\n    [\n      {\n        user: '{{user1}}',\n        content: { text: '/history @mygroup' },\n      },\n      {\n        user: '{{agent}}',\n        content: {\n          text: '‚úÖ –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞',\n          action: 'READ_TELEGRAM_HISTORY',\n        },\n      },\n    ],\n  ],\n}\n\nfunction extractHistoryParams(message: Memory, state: State | undefined): {\n  chatId: string\n  limit: number\n} {\n  const text = message.content?.text || ''\n  \n  // /history @username [limit]\n  const match = text.match(/\\/history\\s+(@?\\w+)(?:\\s+(\\d+))?/i)\n  \n  if (match) {\n    return {\n      chatId: match[1],\n      limit: match[2] ? parseInt(match[2]) : 10,\n    }\n  }\n  \n  return {\n    chatId: message.roomId || 'me',\n    limit: 10,\n  }\n}\n",
    "import {\n  Action,\n  IAgentRuntime,\n  Memory,\n  State,\n  HandlerCallback,\n  ActionResult,\n} from '@elizaos/core'\nimport { TelegramService } from '../services/telegram.service'\nimport { GetDialogsInputSchema } from '../schemas/actions.schema'\n\n/**\n * GET_TELEGRAM_DIALOGS Action\n * \n * –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤/—á–∞—Ç–æ–≤ Telegram\n */\nexport const getDialogsAction: Action = {\n  name: 'GET_TELEGRAM_DIALOGS',\n  similes: ['LIST_TG_CHATS', 'TELEGRAM_CHATS', 'TG_DIALOGS'],\n  description: '–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ –∏ —á–∞—Ç–æ–≤ –∏–∑ Telegram (userbot)',\n  \n  validate: async (runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\n    const text = message.content?.text?.toLowerCase()\n    if (!text) return false\n    \n    const commands = ['/dialogs', '/chats', '/tgdialogs']\n    const intents = [\n      '–ø–æ–∫–∞–∂–∏ –º–æ–∏ —á–∞—Ç—ã',\n      '—Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤',\n      '–º–æ–∏ telegram —á–∞—Ç—ã',\n      'show my chats',\n      'list dialogs',\n    ]\n    \n    return commands.some(cmd => text.includes(cmd)) ||\n           intents.some(intent => text.includes(intent))\n  },\n  \n  handler: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    state: State | undefined,\n    options,\n    callback?: HandlerCallback\n  ): Promise<ActionResult> => {\n    try {\n      const params = extractDialogsParams(message)\n      const validatedInput = GetDialogsInputSchema.parse(params)\n      \n      const service = runtime.getService<TelegramService>('telegram-craft')\n      if (!service) {\n        throw new Error('Telegram service not available')\n      }\n      \n      await callback?.({\n        text: 'üìã –ü–æ–ª—É—á–∞—é —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤...',\n      })\n      \n      const dialogs = await service.getDialogs(validatedInput.limit)\n      \n      const formattedDialogs = dialogs\n        .slice(0, 15)\n        .map((d, i) => `${i + 1}. **${d.name}** (ID: \\`${d.id}\\`) - üí¨ ${d.unreadCount} –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö`)\n        .join('\\n')\n      \n      await callback?.({\n        text: `‚úÖ –í–∞—à–∏ –¥–∏–∞–ª–æ–≥–∏ Telegram:\\n\\n${formattedDialogs}\\n\\nüìä –í—Å–µ–≥–æ: ${dialogs.length} –¥–∏–∞–ª–æ–≥–æ–≤`,\n      })\n      \n      return {\n        success: true,\n        data: { dialogs },\n      }\n    } catch (error) {\n      await callback?.({\n        text: `‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–≤:\\n${error instanceof Error ? error.message : 'Unknown error'}`,\n      })\n      \n      return {\n        success: false,\n        error: error instanceof Error ? error : new Error(String(error)),\n      }\n    }\n  },\n  \n  examples: [\n    [\n      {\n        user: '{{user1}}',\n        content: { text: '/dialogs' },\n      },\n      {\n        user: '{{agent}}',\n        content: {\n          text: '‚úÖ –°–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ –ø–æ–ª—É—á–µ–Ω',\n          action: 'GET_TELEGRAM_DIALOGS',\n        },\n      },\n    ],\n  ],\n}\n\nfunction extractDialogsParams(message: Memory): { limit: number } {\n  const text = message.content?.text || ''\n  const match = text.match(/\\/dialogs\\s+(\\d+)/i)\n  \n  return {\n    limit: match ? parseInt(match[1]) : 20,\n  }\n}\n",
    "import {\n  Action,\n  IAgentRuntime,\n  Memory,\n  State,\n  HandlerCallback,\n  ActionResult,\n} from '@elizaos/core';\nimport { TelegramService } from '../services/telegram.service';\n\n/**\n * START_GROUP_MONITORING Action\n *\n * –ó–∞–ø—É—Å–∫–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏\n *\n * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:\n * - \"/monitor start\"\n * - \"–Ω–∞—á–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø\"\n * - \"—Å–ª—É—à–∞–π —á–∞—Ç—ã\"\n */\nexport const startGroupMonitoringAction: Action = {\n  name: 'START_GROUP_MONITORING',\n  similes: [\n    'START_MONITORING',\n    'GROUP_MONITOR',\n    'MONITOR_CHATS',\n    'LISTEN_GROUPS',\n  ],\n  description: '–ó–∞–ø—É—Å–∫–∞–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏',\n\n  // –í–∞–ª–∏–¥–∞—Ü–∏—è\n  validate: async (runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\n    const text = message.content?.text?.toLowerCase();\n    if (!text) return false;\n\n    const commands = ['/monitor start', '/monitoring start', '/ —Å–ª—É—à–∞—Ç—å'];\n    const intents = [\n      '–∑–∞–ø—É—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥',\n      '–Ω–∞—á–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø',\n      '–Ω–∞—á–∞—Ç—å —Å–ª—É—à–∞—Ç—å —á–∞—Ç—ã',\n      'start monitoring groups',\n      'listen to chats',\n      '–º–æ–Ω–∏—Ç–æ—Ä—å —á–∞—Ç—ã',\n      '—Å–ª—É—à–∞–π –≥—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã',\n    ];\n\n    return commands.some(cmd => text.includes(cmd)) ||\n           intents.some(intent => text.includes(intent));\n  },\n\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫\n  handler: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    state: State | undefined,\n    options,\n    callback?: HandlerCallback\n  ): Promise<ActionResult> => {\n    try {\n      console.log('üîç [START_GROUP_MONITORING] Handler called');\n      console.log('üîç [START_GROUP_MONITORING] Runtime exists:', !!runtime);\n\n      // üîç DEBUG: –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã\n      const allServices = (runtime as any).services || [];\n      console.log('üîç [START_GROUP_MONITORING] Total services in runtime:', allServices.length);\n      console.log('üîç [START_GROUP_MONITORING] Service types:', allServices.map((s: any) => s.serviceType || s.constructor?.serviceType));\n\n      // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞\n      console.log('üîç [START_GROUP_MONITORING] Calling runtime.getService(\"telegram-craft\")...');\n      const service = runtime.getService<TelegramService>('telegram-craft');\n      console.log('üîç [START_GROUP_MONITORING] Service returned:', !!service);\n      console.log('üîç [START_GROUP_MONITORING] Service type:', service?.serviceType);\n\n      if (!service) {\n        console.error('‚ùå [START_GROUP_MONITORING] Service is NULL!');\n        console.error('‚ùå [START_GROUP_MONITORING] Available services:', allServices.map((s: any) => ({\n          type: s.serviceType || s.constructor?.serviceType,\n          className: s.constructor?.name\n        })));\n        throw new Error('Telegram service not available');\n      }\n\n      console.log('‚úÖ [START_GROUP_MONITORING] Service found and ready');\n\n      // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\n      await callback?.({\n        text: 'üîç –ó–∞–ø—É—Å–∫–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤...',\n      });\n\n      // –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞\n      const result = await service.startGroupMonitoring();\n\n      if (result.success) {\n        const stats = service.getMonitoringStats();\n\n        await callback?.({\n          text: `‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—É—â–µ–Ω!\\n\\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\\n‚Ä¢ –í—Å–µ–≥–æ –≥—Ä—É–ø–ø: ${stats.totalGroups}\\n‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö –≥—Ä—É–ø–ø: ${stats.activeGroups}\\n‚Ä¢ –°–æ–æ–±—â–µ–Ω–∏–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: ${stats.totalMessages}\\n‚Ä¢ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: ${Math.floor(stats.uptime / 1000)}—Å\\n\\nüí° –û—Ç–ø—Ä–∞–≤—å \"–¥–æ–±–∞–≤—å –≥—Ä—É–ø–ø—É @–Ω–∞–∑–≤–∞–Ω–∏–µ\" —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —á–∞—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞`,\n          action: 'START_GROUP_MONITORING',\n        });\n\n        return {\n          success: true,\n          data: {\n            monitoringStarted: true,\n            stats,\n          },\n        };\n      } else {\n        await callback?.({\n          text: `‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: ${result.message}`,\n          error: true,\n        });\n\n        return {\n          success: false,\n          error: new Error(result.message),\n        };\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n\n      await callback?.({\n        text: `‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: ${errorMessage}`,\n        error: true,\n      });\n\n      return {\n        success: false,\n        error: error instanceof Error ? error : new Error(errorMessage),\n      };\n    }\n  },\n\n  // –ü—Ä–∏–º–µ—Ä—ã\n  examples: [\n    [\n      {\n        name: '{{user1}}',\n        content: { text: '–∑–∞–ø—É—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø' },\n      },\n      {\n        name: 'KOLS_AGENT',\n        content: {\n          text: '‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—É—â–µ–Ω!\\n\\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\\n‚Ä¢ –í—Å–µ–≥–æ –≥—Ä—É–ø–ø: 0\\n‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö –≥—Ä—É–ø–ø: 0',\n          action: 'START_GROUP_MONITORING',\n        },\n      },\n    ],\n  ],\n};\n",
    "import {\n  Action,\n  IAgentRuntime,\n  Memory,\n  State,\n  HandlerCallback,\n  ActionResult,\n} from '@elizaos/core';\nimport { TelegramService } from '../services/telegram.service';\n\n/**\n * ADD_GROUP_TO_MONITOR Action\n *\n * –î–æ–±–∞–≤–ª—è–µ—Ç –≥—Ä—É–ø–ø—É –≤ —Å–ø–∏—Å–æ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞\n *\n * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:\n * - \"/monitor add @groupname\"\n * - \"–¥–æ–±–∞–≤—å –≥—Ä—É–ø–ø—É @–Ω–∞–∑–≤–∞–Ω–∏–µ\"\n */\nexport const addGroupToMonitorAction: Action = {\n  name: 'ADD_GROUP_TO_MONITOR',\n  similes: [\n    'ADD_GROUP_MONITOR',\n    'MONITOR_ADD_GROUP',\n    'JOIN_GROUP_MONITOR',\n  ],\n  description: '–î–æ–±–∞–≤–ª—è–µ—Ç –≥—Ä—É–ø–ø—É –≤ —Å–ø–∏—Å–æ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞',\n\n  // –í–∞–ª–∏–¥–∞—Ü–∏—è\n  validate: async (runtime: IAgentRuntime, message: Memory): Promise<boolean> => {\n    const text = message.content?.text?.toLowerCase();\n    if (!text) return false;\n\n    const commands = ['/monitor add', '/monitor add', '–¥–æ–±–∞–≤—å –≥—Ä—É–ø–ø—É'];\n    const intents = [\n      '–¥–æ–±–∞–≤—å —á–∞—Ç',\n      '–¥–æ–±–∞–≤—å –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥',\n      '–Ω–∞—á–∞—Ç—å —Å–ª—É—à–∞—Ç—å',\n      'add group to monitor',\n      'monitor this chat',\n    ];\n\n    return commands.some(cmd => text.includes(cmd)) ||\n           intents.some(intent => text.includes(intent));\n  },\n\n  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫\n  handler: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    state: State | undefined,\n    options,\n    callback?: HandlerCallback\n  ): Promise<ActionResult> => {\n    try {\n      // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤\n      const text = message.content?.text || '';\n      const chatId = message?.roomId || 'unknown';\n\n      // –ï—Å–ª–∏ —ç—Ç–æ –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏\n      let groupId = chatId;\n      let groupName = '—Ç–µ–∫—É—â–∏–π —á–∞—Ç';\n\n      // –ü—ã—Ç–∞–µ–º—Å—è –∏–∑–≤–ª–µ—á—å ID –≥—Ä—É–ø–ø—ã –∏–∑ –∫–æ–º–∞–Ω–¥—ã\n      const match = text.match(/@([a-zA-Z0-9_]+)/);\n      if (match) {\n        groupId = match[1];\n        groupName = `@${match[1]}`;\n      }\n\n      // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞\n      const service = runtime.getService<TelegramService>('telegram-craft');\n      if (!service) {\n        throw new Error('Telegram service not available');\n      }\n\n      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã\n      const result = await service.addGroupToMonitoring(groupId, groupName);\n\n      if (result.success) {\n        await callback?.({\n          text: `‚úÖ –ì—Ä—É–ø–ø–∞ \"${groupName}\" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥!\\n\\nüí° –ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤—Å–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–º—ã–µ –≥—Ä—É–ø–ø—ã, –æ—Ç–ø—Ä–∞–≤—å \"–ø–æ–∫–∞–∂–∏ –≥—Ä—É–ø–ø—ã\"`,\n          action: 'ADD_GROUP_TO_MONITOR',\n        });\n\n        return {\n          success: true,\n          data: {\n            groupAdded: true,\n            groupId,\n            groupName,\n          },\n        };\n      } else {\n        await callback?.({\n          text: `‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É: ${result.message}`,\n          error: true,\n        });\n\n        return {\n          success: false,\n          error: new Error(result.message),\n        };\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n\n      await callback?.({\n        text: `‚ùå –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã: ${errorMessage}`,\n        error: true,\n      });\n\n      return {\n        success: false,\n        error: error instanceof Error ? error : new Error(errorMessage),\n      };\n    }\n  },\n\n  // –ü—Ä–∏–º–µ—Ä—ã\n  examples: [\n    [\n      {\n        name: '{{user1}}',\n        content: { text: '–¥–æ–±–∞–≤—å –≥—Ä—É–ø–ø—É @mygroup' },\n      },\n      {\n        name: 'KOLS_AGENT',\n        content: {\n          text: '‚úÖ –ì—Ä—É–ø–ø–∞ \"@mygroup\" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥!',\n          action: 'ADD_GROUP_TO_MONITOR',\n        },\n      },\n    ],\n  ],\n};\n",
    "import { Action, ActionExample, IAgentRuntime, Memory, State, HandlerCallback } from '@elizaos/core'\nimport { TelegramService } from '../services/telegram.service'\n\n/**\n * Live Feed Action\n *\n * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram –≥—Ä—É–ø–ø –≤ —á–∞—Ç–µ —Å –∞–≥–µ–Ω—Ç–æ–º\n * –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤ —Ñ–æ–Ω–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–∂–¥–æ–µ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é\n */\nexport const liveFeedAction: Action = {\n  name: 'LIVE_FEED',\n  similes: ['live feed', 'live messages', 'show live', 'real-time', '–≤–∫–ª—é—á–∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é', '–ø–æ–∫–∞–∂–∏ –æ–Ω–ª–∞–π–Ω'],\n  description: '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram –≥—Ä—É–ø–ø –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä—è–º–æ –≤ —á–∞—Ç–µ',\n\n  validate: async (runtime: IAgentRuntime, message: Memory) => {\n    // –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–Ω–ª–∞–π–Ω\n    const text = message.content.text.toLowerCase()\n    return text.includes('—Ç—Ä–∞–Ω—Å–ª—è—Ü') ||\n           text.includes('–æ–Ω–ª–∞–π–Ω') ||\n           text.includes('live') ||\n           text.includes('–ø–æ–∫–∞–∂–∏ —Å–æ–æ–±—â–µ–Ω–∏—è') ||\n           text.includes('—á—Ç–æ –≤ –≥—Ä—É–ø–ø–∞—Ö')\n  },\n\n  handler: async (runtime, message, state, options, callback) => {\n    try {\n      const service = runtime.getService<TelegramService>('telegram-craft')\n\n      if (!service) {\n        await callback({\n          text: 'Telegram —Å–µ—Ä–≤–∏—Å –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω',\n          error: true\n        })\n        return { success: false, text: 'Service not found' }\n      }\n\n      // –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è\n      const recentMessages = service.getRecentMessages(10)\n      const stats = service.getMonitoringStats()\n\n      if (recentMessages.length === 0) {\n        await callback({\n          text: `üì° –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–µ–Ω\n\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: ${stats.totalMessages}\n‚Ä¢ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: ${Math.floor(stats.uptime / 1000 / 60)} –º–∏–Ω—É—Ç\n\n‚è≥ –û–∂–∏–¥–∞–µ–º –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è...\nüí° –ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–∏–¥–µ—Ç –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - —è —Å—Ä–∞–∑—É –ø–æ–∫–∞–∂—É!`,\n          action: 'LIVE_FEED'\n        })\n\n        return {\n          success: true,\n          text: 'No messages yet'\n        }\n      }\n\n      // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è\n      const messagesText = recentMessages.map(msg => {\n        const time = new Date(msg.timestamp).toLocaleTimeString('ru-RU', {\n          hour: '2-digit',\n          minute: '2-digit',\n          second: '2-digit'\n        })\n        return `[${time}] üì® **${msg.chatTitle}**\nüë§ ${msg.fromUsername}: ${msg.text.substring(0, 200)}${msg.text.length > 200 ? '...' : ''}`\n      }).join('\\n\\n---\\n\\n')\n\n      await callback({\n        text: `üì° **–¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Telegram**\n\nüìä –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: ${stats.totalMessages} —Å–æ–æ–±—â–µ–Ω–∏–π\n\n${messagesText}\n\n---\n‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏`,\n        action: 'LIVE_FEED'\n      })\n\n      return {\n        success: true,\n        text: 'Live feed activated',\n        data: {\n          messageCount: recentMessages.length,\n          totalMessages: stats.totalMessages\n        }\n      }\n    } catch (error) {\n      console.error('‚ùå Live Feed Action error:', error)\n      await callback({\n        text: '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Telegram',\n        error: true\n      })\n\n      return {\n        success: false,\n        error: error instanceof Error ? error : new Error(String(error))\n      }\n    }\n  },\n\n  examples: [\n    [\n      {\n        name: 'user',\n        content: { text: '–ø–æ–∫–∞–∂–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≥—Ä—É–ø–ø' }\n      },\n      {\n        name: 'assistant',\n        content: {\n          text: 'üì° –ü–æ–∫–∞–∑—ã–≤–∞—é –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram –≥—Ä—É–ø–ø...',\n          action: 'LIVE_FEED'\n        }\n      }\n    ],\n    [\n      {\n        name: 'user',\n        content: { text: '—á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –≥—Ä—É–ø–ø–∞—Ö?' }\n      },\n      {\n        name: 'assistant',\n        content: {\n          text: '–°–µ–π—á–∞—Å –ø—Ä–æ–≤–µ—Ä—é –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –≤–∞—à–∏—Ö –≥—Ä—É–ø–ø–∞—Ö',\n          action: 'LIVE_FEED'\n        }\n      }\n    ]\n  ] as ActionExample[][]\n}\n\nexport default liveFeedAction\n",
    "import {\n  Provider,\n  IAgentRuntime,\n  Memory,\n  State,\n  ProviderResult,\n} from '@elizaos/core'\nimport { TelegramService } from '../services/telegram.service'\n\n/**\n * Recent Messages Provider\n * \n * –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Telegram —á–∞—Ç–∞ –¥–ª—è LLM\n */\nexport const recentMessagesProvider: Provider = {\n  name: 'recentMessages',\n  \n  get: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    state?: State\n  ): Promise<ProviderResult> => {\n    try {\n      const service = runtime.getService<TelegramService>('telegram-craft')\n      if (!service || !service.isConnected()) {\n        return {\n          text: '',\n          values: {},\n        }\n      }\n      \n      // –ü–æ–ª—É—á–µ–Ω–∏–µ chatId –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞\n      const chatId = message.roomId || 'me'\n      \n      // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 —Å–æ–æ–±—â–µ–Ω–∏–π\n      const messages = await service.getHistory(chatId, 10)\n      \n      // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è LLM\n      const formattedMessages = messages\n        .map(msg => {\n          const time = new Date(msg.date * 1000).toLocaleTimeString()\n          return `[${time}] ${msg.sender}: ${msg.text}`\n        })\n        .join('\\n')\n      \n      return {\n        text: `\n# üí¨ Recent Telegram Messages\n\n## Chat: ${chatId}\n\n\\`\\`\\`\n${formattedMessages}\n\\`\\`\\`\n\n---\n**Total messages**: ${messages.length}\n**Last updated**: ${new Date().toLocaleString()}\n        `.trim(),\n        values: {\n          chatId,\n          messageCount: messages.length,\n          messages: messages.map(m => ({\n            id: m.id,\n            text: m.text,\n            sender: m.sender,\n          })),\n        },\n        data: {\n          raw: messages,\n        },\n      }\n    } catch (error) {\n      console.error('Error in recentMessagesProvider:', error)\n      return {\n        text: '',\n        values: {},\n      }\n    }\n  },\n}\n",
    "import {\n  Provider,\n  IAgentRuntime,\n  Memory,\n  State,\n  ProviderResult,\n} from '@elizaos/core'\nimport { TelegramService } from '../services/telegram.service'\n\n/**\n * Dialogs List Provider\n * \n * –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–ø–∏—Å–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤ Telegram –¥–ª—è LLM\n */\nexport const dialogsListProvider: Provider = {\n  name: 'dialogsList',\n  \n  get: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    state?: State\n  ): Promise<ProviderResult> => {\n    try {\n      const service = runtime.getService<TelegramService>('telegram-craft')\n      if (!service || !service.isConnected()) {\n        return {\n          text: '',\n          values: {},\n        }\n      }\n      \n      // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–≤\n      const dialogs = await service.getDialogs(20)\n      \n      // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è LLM\n      const formattedDialogs = dialogs\n        .slice(0, 15)\n        .map((d, i) => `${i + 1}. ${d.name} (ID: ${d.id}) - ${d.unreadCount} unread`)\n        .join('\\n')\n      \n      return {\n        text: `\n# üìã Telegram Dialogs List\n\n## Active Chats\n\n${formattedDialogs}\n\n---\n**Total dialogs**: ${dialogs.length}\n**Last updated**: ${new Date().toLocaleString()}\n        `.trim(),\n        values: {\n          dialogCount: dialogs.length,\n          dialogs: dialogs.map(d => ({\n            id: d.id,\n            name: d.name,\n            unread: d.unreadCount,\n          })),\n        },\n        data: {\n          raw: dialogs,\n        },\n      }\n    } catch (error) {\n      console.error(' Error in dialogsListProvider:', error)\n      return {\n        text: '',\n        values: {},\n      }\n    }\n  },\n}\n",
    "import {\n  Provider,\n  IAgentRuntime,\n  Memory,\n  State,\n  ProviderResult,\n} from '@elizaos/core'\nimport { TelegramService } from '../services/telegram.service'\n\n/**\n * Capabilities Provider\n * \n * –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö Telegram –ø–ª–∞–≥–∏–Ω–∞ –¥–ª—è LLM\n */\nexport const capabilitiesProvider: Provider = {\n  name: 'telegramCapabilities',\n  \n  get: async (\n    runtime: IAgentRuntime,\n    message: Memory,\n    state?: State\n  ): Promise<ProviderResult> => {\n    const service = runtime.getService<TelegramService>('telegram-craft')\n    const strategy = service?.getStrategy() || 'unknown'\n    const isConnected = service?.isConnected() || false\n    \n    return {\n      text: `\n# üêù Telegram Craft Plugin Capabilities\n\n## Current Configuration\n- **Connection Strategy**: ${strategy}\n- **Status**: ${isConnected ? '‚úÖ Connected' : '‚ùå Disconnected'}\n\n## Available Actions\n\n### üì§ SEND_MESSAGE\nSend messages to Telegram chats\n- Command: \\`/send @username message\\`\n- Supports: Reply to messages\n\n### üìú READ_HISTORY\nRead message history from chats\n- Command: \\`/history @username [limit]\\`\n- Userbot only (MTProto)\n\n### üìã GET_DIALOGS\nList all Telegram dialogs/chats\n- Command: \\`/dialogs [limit]\\`\n- Userbot only (MTProto)\n\n## Supported Features (MTProto)\n- ‚úÖ Send messages to any chat\n- ‚úÖ Read message history\n- ‚úÖ Get user information\n- ‚úÖ List dialogs\n- ‚úÖ Join channels/groups\n- ‚úÖ Forward messages\n\n## Limitations (Bot API)\n- ‚ùå Cannot read history of non-bot chats\n- ‚ùå Cannot list user dialogs\n- ‚úÖ Can send messages to authorized chats\n\n---\n**Plugin Version**: 1.0.0\n**Powered by**: GramJS (MTProto)\n      `.trim(),\n      values: {\n        strategy,\n        isConnected,\n        supportedActions: [\n          'SEND_MESSAGE',\n          'READ_HISTORY',\n          'GET_DIALOGS',\n        ],\n      },\n    }\n  },\n}\n",
    "import { Provider, IAgentRuntime, Memory } from '@elizaos/core'\nimport { TelegramService } from '../services/telegram.service'\n\n/**\n * Live Messages Provider\n *\n * –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≥—Ä—É–ø–ø Telegram –ø—Ä—è–º–æ –≤ —á–∞—Ç–µ —Å –∞–≥–µ–Ω—Ç–æ–º\n * –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏\n */\nexport const liveMessagesProvider: Provider = {\n  get: async (runtime: IAgentRuntime, message: Memory) => {\n    try {\n      const service = runtime.getService<TelegramService>('telegram-craft')\n\n      if (!service) {\n        return 'Telegram —Å–µ—Ä–≤–∏—Å –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω'\n      }\n\n      // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É\n      const stats = service.getMonitoringStats()\n      const groups = service.getMonitoredGroups()\n      const recentMessages = service.getRecentMessages(20) // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 20 —Å–æ–æ–±—â–µ–Ω–∏–π\n\n      if (!service.isGroupMonitoringActive()) {\n        return `üì° –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø: –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω\n\nüí° –û—Ç–ø—Ä–∞–≤—å \"–∑–∞–ø—É—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø\" —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Å–ª—É—à–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è`\n      }\n\n      if (recentMessages.length === 0) {\n        return `üì° –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–µ–Ω\n\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n‚Ä¢ –ì—Ä—É–ø–ø –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ: ${stats.totalGroups}\n‚Ä¢ –°–æ–æ–±—â–µ–Ω–∏–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: ${stats.totalMessages}\n‚Ä¢ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: ${Math.floor(stats.uptime / 1000 / 60)} –º–∏–Ω—É—Ç\n\n‚è≥ –û–∂–∏–¥–∞–µ–º –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≥—Ä—É–ø–ø...`\n      }\n\n      // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è\n      const messagesText = recentMessages\n        .slice(0, 10) // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10\n        .map(msg => {\n          const time = new Date(msg.timestamp).toLocaleTimeString('ru-RU', {\n            hour: '2-digit',\n            minute: '2-digit'\n          })\n          const text = msg.text.length > 100\n            ? msg.text.substring(0, 100) + '...'\n            : msg.text\n\n          return `[${time}] üì® ${msg.chatTitle}\n  ${msg.fromUsername}: ${text}`\n        })\n        .join('\\n\\n')\n\n      return `üì° –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–µ–Ω | üìä –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: ${stats.totalMessages} —Å–æ–æ–±—â–µ–Ω–∏–π\n\nüì¨ –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≥—Ä—É–ø–ø:\n\n${messagesText}\n\n---\nüí° –°–æ–æ–±—â–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏`\n    } catch (error) {\n      console.error('‚ùå Error in liveMessagesProvider:', error)\n      return '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π'\n    }\n  },\n}\n\nexport default liveMessagesProvider\n",
    "import { Provider } from '@elizaos/core'\nimport { TelegramService } from '../services/telegram.service'\n\n/**\n * Auto Message Forwarder Provider\n *\n * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –í–°–ï –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram –≥—Ä—É–ø–ø\n * –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Ç—ã —Å –∞–≥–µ–Ω—Ç–æ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏\n *\n * –≠—Ç–æ—Ç provider —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∫–æ–º–∞–Ω–¥ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏\n */\nexport const autoMessageForwarderProvider: Provider = {\n  name: 'AUTO_MESSAGE_FORWARDER',\n  description: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Telegram –≥—Ä—É–ø–ø –≤ —á–∞—Ç',\n\n  get: async (runtime, message) => {\n    // –ü–æ–ª—É—á–∞–µ–º Telegram —Å–µ—Ä–≤–∏—Å\n    const telegramService = runtime.getService<TelegramService>('telegram-craft')\n    if (!telegramService) {\n      return null\n    }\n\n    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º distributor —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑\n    if (!telegramService.hasMessageDistributor()) {\n      // –°–æ–∑–¥–∞–µ–º distributor –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–µ–∫—É—â–∏–π —á–∞—Ç\n      const distributor = (messageText: string) => {\n        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞\n        // –û–Ω–æ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏\n        runtime.addMemory({\n          id: `auto-forward-${Date.now()}`,\n          content: {\n            text: messageText,\n            action: 'AUTO_FORWARD_MESSAGE',\n            type: 'auto-forward'\n          },\n          roomId: message.roomId || 'default',\n          userId: 'system',\n          createdAt: new Date()\n        })\n      }\n\n      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º distributor\n      telegramService.setMessageDistributor(distributor)\n      console.log('‚úÖ [AutoForwarder] Message distributor –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω')\n    }\n\n    return null // Provider –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç, –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ\n  },\n}\n\nexport default autoMessageForwarderProvider\n",
    "import { Evaluator } from '@elizaos/core'\nimport { TelegramService } from '../services/telegram.service'\n\n/**\n * Message Auto Forward Evaluator\n *\n * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram –≥—Ä—É–ø–ø\n * –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –∫–∞–∂–¥–æ–º –µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–∏ –≤ —á–∞—Ç\n *\n * –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤—Å–µ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è\n */\nexport const messageAutoForwardEvaluator: Evaluator = {\n  name: 'MESSAGE_AUTO_FORWARD',\n\n  // –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏\n  shouldRun: async (runtime, message) => {\n    // –í—Å–µ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)\n    return true\n  },\n\n  evaluate: async (runtime, message, state) => {\n    try {\n      const telegramService = runtime.getService<TelegramService>('telegram-craft')\n      if (!telegramService) {\n        return { success: false, confidence: 0 }\n      }\n\n      // –ü–æ–ª—É—á–∞–µ–º –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞\n      const recentMessages = telegramService.getRecentMessages(5)\n\n      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏\n      const lastCheck = state?.lastMessageCheck || 0\n      const newMessages = recentMessages.filter(msg =>\n        msg.timestamp.getTime() > lastCheck\n      )\n\n      // –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏—Ö\n      if (newMessages.length > 0) {\n        console.log(`üì§ [AutoForward] –û—Ç–ø—Ä–∞–≤–ª—è—é ${newMessages.length} –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π`)\n\n        // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å –Ω–æ–≤—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏\n        const messagesText = newMessages.map(msg => {\n          const time = new Date(msg.timestamp).toLocaleTimeString('ru-RU', {\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit'\n          })\n          return `[${time}] üì® **${msg.chatTitle}**\nüë§ ${msg.fromUsername}: ${msg.text.substring(0, 200)}${msg.text.length > 200 ? '...' : ''}`\n        }).join('\\n\\n---\\n\\n')\n\n        // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏\n        return {\n          success: true,\n          confidence: 1,\n          data: {\n            newMessages: newMessages.length,\n            autoForwardText: `üì° **–ù–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram (${newMessages.length}):**\n\n${messagesText}\n\n---\nüîÑ –û–∂–∏–¥–∞—é –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è...`\n          }\n        }\n      }\n\n      return { success: true, confidence: 0.1 }\n    } catch (error) {\n      console.error('‚ùå [AutoForward] Error:', error)\n      return { success: false, confidence: 0 }\n    }\n  },\n\n  // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ evaluate\n  handler: async (runtime, message, state, callback) => {\n    try {\n      // –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç –¥–ª—è –∞–≤—Ç–æ–ø–µ—Ä–µ—Å—ã–ª–∫–∏ - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º\n      if (state?.autoForwardText) {\n        await callback({\n          text: state.autoForwardText,\n          action: 'MESSAGE_AUTO_FORWARD'\n        })\n        console.log('‚úÖ [AutoForward] –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã')\n      }\n    } catch (error) {\n      console.error('‚ùå [AutoForward] Handler error:', error)\n    }\n  },\n}\n\nexport default messageAutoForwardEvaluator\n",
    "import { Service, IAgentRuntime, Memory, State, UUID, stringToUuid } from '@elizaos/core'\nimport { ITelegramAdapter, ISendMessageResult, ITelegramMessage, ITelegramDialog, ITelegramUser } from '../types/telegram.types'\nimport { MTProtoAdapter } from './adapters/mtproto.adapter'\nimport { BotApiAdapter } from './adapters/botapi.adapter'\nimport { McpAdapter } from './adapters/mcp.adapter'\nimport fs from 'node:fs'\nimport path from 'node:path'\n\n// üé® ANSI Colors –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≤—ã–≤–æ–¥–∞\nconst colors = {\n  reset: '\\x1b[0m',\n  bright: '\\x1b[1m',\n\n  // –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–≤–µ—Ç–∞\n  cyan: '\\x1b[36m',      // üîµ –ì—Ä—É–ø–ø—ã/—á–∞—Ç—ã\n  yellow: '\\x1b[33m',    // üü° –ò–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\n  white: '\\x1b[37m',     // ‚ö™ –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏–π\n  green: '\\x1b[32m',     // üü¢ –£—Å–ø–µ—Ö\n  red: '\\x1b[31m',       // üî¥ –û—à–∏–±–∫–∏\n  magenta: '\\x1b[35m',   // üü£ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ\n  blue: '\\x1b[34m',      // üî∑ –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è\n  gray: '\\x1b[90m',      // ‚ö´ –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ\n}\n\n// –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ü–≤–µ—Ç–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞\nconst colorize = {\n  chat: (text: string) => `${colors.bright}${colors.cyan}${text}${colors.reset}`,\n  user: (text: string) => `${colors.bright}${colors.yellow}${text}${colors.reset}`,\n  message: (text: string) => `${colors.white}${text}${colors.reset}`,\n  success: (text: string) => `${colors.green}${text}${colors.reset}`,\n  error: (text: string) => `${colors.red}${text}${colors.reset}`,\n  meta: (text: string) => `${colors.magenta}${text}${colors.reset}`,\n  system: (text: string) => `${colors.blue}${text}${colors.reset}`,\n  time: (text: string) => `${colors.gray}${text}${colors.reset}`,\n}\n\n/**\n * TelegramService - –≥–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram\n * \n * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Adapter Pattern –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:\n * - MTProto (GramJS) - Primary\n * - Bot API (Telegraf) - Fallback #1\n * - MCP Server - Fallback #2\n */\nexport class TelegramService extends Service {\n  static serviceType = 'telegram-craft'\n\n  serviceType = 'telegram-craft' // Instance property for compatibility\n\n  /**\n   * üîë –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ start() - —Ç—Ä–µ–±—É–µ—Ç—Å—è ElizaOS –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–∞\n   *\n   * ElizaOS –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø—Ä–∏ registerService(TelegramService)\n   * –°–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ\n   */\n  static async start(runtime: IAgentRuntime): Promise<Service> {\n    console.log('üöÄ [TelegramService] static start() called')\n\n    const instance = new TelegramService()\n    await instance.initialize(runtime)\n\n    console.log('‚úÖ [TelegramService] static start() completed')\n    return instance\n  }\n\n  /**\n   * üõë –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ stop() - —Ç—Ä–µ–±—É–µ—Ç—Å—è ElizaOS\n   */\n  static async stop(runtime: IAgentRuntime): Promise<void> {\n    console.log('üõë [TelegramService] static stop() called')\n    // Cleanup –µ—Å–ª–∏ –Ω—É–∂–Ω–æ\n  }\n\n  private adapter: ITelegramAdapter | null = null\n  private strategy: 'mtproto' | 'botapi' | 'mcp' = 'mtproto'\n  private runtime: IAgentRuntime | null = null // üî• –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤\n  private autoReplyEnabled = true // –§–ª–∞–≥ –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç–æ–≤ (–º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å)\n\n  capabilityDescription = 'Telegram userbot —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ MTProto (GramJS) —Å fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏'\n  \n  /**\n   * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞\n   * –í—ã–±–∏—Ä–∞–µ—Ç –∞–¥–∞–ø—Ç–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ TELEGRAM_STRATEGY\n   */\n  async initialize(runtime: IAgentRuntime): Promise<void> {\n    console.log('üîß [TelegramService] initialize() called')\n    console.log('üîë [TelegramService] Runtime received: ' + (runtime ? 'YES' : 'NO'))\n\n    // üî• –°–æ—Ö—Ä–∞–Ω—è–µ–º runtime –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤\n    this.runtime = runtime\n    console.log('‚úÖ [TelegramService] Runtime saved!')\n\n    this.strategy = (runtime.getSetting('TELEGRAM_STRATEGY') as any) || 'mtproto'\n\n    console.log(`üîß [TelegramService] Strategy: ${this.strategy}`)\n\n    try {\n      // –í—ã–±–æ—Ä –∞–¥–∞–ø—Ç–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏\n      switch (this.strategy) {\n        case 'mtproto':\n          console.log('üîß [TelegramService] Initializing MTProto adapter...')\n          await this.initializeMTProto(runtime)\n          console.log('‚úÖ [TelegramService] MTProto adapter initialized')\n          break\n\n        case 'botapi':\n          console.log('üîß [TelegramService] Initializing BotAPI adapter...')\n          await this.initializeBotApi(runtime)\n          console.log('‚úÖ [TelegramService] BotAPI adapter initialized')\n          break\n\n        case 'mcp':\n          console.log('üîß [TelegramService] Initializing MCP adapter...')\n          await this.initializeMcp(runtime)\n          console.log('‚úÖ [TelegramService] MCP adapter initialized')\n          break\n\n        default:\n          throw new Error(`Unknown Telegram strategy: ${this.strategy}`)\n      }\n\n      console.log(`‚úÖ [TelegramService] Service initialized successfully with ${this.strategy}`)\n      console.log(`‚úÖ [TelegramService] Adapter is ${this.adapter ? 'SET' : 'NULL'}`)\n    } catch (error) {\n      console.error(`‚ùå [TelegramService] Failed to initialize:`, error)\n      throw error\n    }\n  }\n  \n  /**\n   * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MTProto –∞–¥–∞–ø—Ç–µ—Ä–∞ (Primary)\n   */\n  private async initializeMTProto(runtime: IAgentRuntime): Promise<void> {\n    const apiId = runtime.getSetting('TELEGRAM_API_ID')\n    const apiHash = runtime.getSetting('TELEGRAM_API_HASH')\n    const session = runtime.getSetting('TELEGRAM_SESSION_STRING') || process.env.TELEGRAM_SESSION_STRING\n\n    console.log(`üîß [MTProto] API ID: ${apiId ? '‚úÖ SET' : '‚ùå MISSING'}`)\n    console.log(`üîß [MTProto] API Hash: ${apiHash ? '‚úÖ SET' : '‚ùå MISSING'}`)\n    console.log(`üîß [MTProto] Session: ${session ? '‚úÖ SET' : '‚ö†Ô∏è OPTIONAL'}`)\n\n    if (!apiId || !apiHash) {\n      throw new Error('TELEGRAM_API_ID –∏ TELEGRAM_API_HASH –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è MTProto')\n    }\n\n    console.log('üîß [MTProto] Creating adapter instance...')\n    this.adapter = new MTProtoAdapter({\n      apiId: parseInt(apiId),\n      apiHash,\n      session,\n    })\n    console.log('‚úÖ [MTProto] Adapter instance created')\n  }\n  \n  /**\n   * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Bot API –∞–¥–∞–ø—Ç–µ—Ä–∞ (Fallback #1)\n   */\n  private async initializeBotApi(runtime: IAgentRuntime): Promise<void> {\n    const botToken = runtime.getSetting('TELEGRAM_BOT_TOKEN')\n    \n    if (!botToken) {\n      throw new Error('TELEGRAM_BOT_TOKEN –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è Bot API')\n    }\n    \n    this.adapter = new BotApiAdapter({\n      apiId: 0, // –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Bot API\n      apiHash: '',\n      botToken,\n    })\n  }\n  \n  /**\n   * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MCP –∞–¥–∞–ø—Ç–µ—Ä–∞ (Fallback #2)\n   */\n  private async initializeMcp(runtime: IAgentRuntime): Promise<void> {\n    this.adapter = new McpAdapter({\n      apiId: 0,\n      apiHash: '',\n    })\n  }\n  \n  /**\n   * –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram\n   */\n  async start(): Promise<void> {\n    console.log('üöÄ [TelegramService] start() called')\n\n    // –ï—Å–ª–∏ –∞–¥–∞–ø—Ç–µ—Ä –µ—â–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –µ–≥–æ\n    if (!this.adapter) {\n      console.log('‚ö†Ô∏è [TelegramService] Adapter not initialized, initializing now...')\n      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ runtime - –∏—Å–ø–æ–ª—å–∑—É–µ–º process.env –Ω–∞–ø—Ä—è–º—É—é\n      await this.initializeFromEnv()\n    }\n\n    if (!this.adapter) {\n      throw new Error('Telegram adapter not initialized')\n    }\n\n    try {\n      console.log('üöÄ [TelegramService] Connecting adapter...')\n      await this.adapter.connect()\n      console.log('‚úÖ [TelegramService] Telegram Service started successfully')\n\n      // üî• –ê–í–¢–û–ó–ê–ü–£–°–ö –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê\n      console.log('üî• [TelegramService] Auto-starting group monitoring...')\n      const result = await this.startGroupMonitoring()\n      if (result.success) {\n        console.log('‚úÖ [TelegramService] Group monitoring auto-started successfully')\n      } else {\n        console.error('‚ö†Ô∏è [TelegramService] Failed to auto-start monitoring:', result.error)\n      }\n    } catch (error) {\n      console.error('‚ùå [TelegramService] Failed to start:', error)\n      console.log('‚ö†Ô∏è [TelegramService] Telegram connection failed, but continuing without Telegram functionality...')\n\n      // –ù–µ –±—Ä–æ—Å–∞–µ–º –æ—à–∏–±–∫—É, —á—Ç–æ–±—ã –∞–≥–µ–Ω—Ç –º–æ–≥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–µ–∑ Telegram\n      // throw error\n    }\n  }\n\n  /**\n   * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¥–ª—è —Å–ª—É—á–∞—è –∫–æ–≥–¥–∞ initialize –Ω–µ –≤—ã–∑–≤–∞–Ω)\n   */\n  private async initializeFromEnv(): Promise<void> {\n    const strategy = (process.env.TELEGRAM_STRATEGY as any) || 'mtproto'\n    this.strategy = strategy\n\n    console.log(`üîß [TelegramService] Initializing from ENV with strategy: ${strategy}`)\n\n    try {\n      switch (strategy) {\n        case 'mtproto':\n          await this.initializeMTProtoFromEnv()\n          break\n        case 'botapi':\n          await this.initializeBotApiFromEnv()\n          break\n        case 'mcp':\n          await this.initializeMcpFromEnv()\n          break\n        default:\n          throw new Error(`Unknown Telegram strategy: ${strategy}`)\n      }\n\n      console.log(`‚úÖ [TelegramService] Initialized from ENV successfully`)\n    } catch (error) {\n      console.error(`‚ùå [TelegramService] Failed to initialize from ENV:`, error)\n      throw error\n    }\n  }\n\n  /**\n   * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MTProto –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è\n   */\n  private async initializeMTProtoFromEnv(): Promise<void> {\n    const apiId = process.env.TELEGRAM_API_ID\n    const apiHash = process.env.TELEGRAM_API_HASH\n    const session = process.env.TELEGRAM_SESSION_STRING\n\n    console.log(`üîß [MTProto] API ID from ENV: ${apiId ? '‚úÖ SET' : '‚ùå MISSING'}`)\n    console.log(`üîß [MTProto] API Hash from ENV: ${apiHash ? '‚úÖ SET' : '‚ùå MISSING'}`)\n    console.log(`üîß [MTProto] Session from ENV: ${session ? '‚úÖ SET' : '‚ö†Ô∏è OPTIONAL'}`)\n\n    if (!apiId || !apiHash) {\n      throw new Error('TELEGRAM_API_ID –∏ TELEGRAM_API_HASH –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è MTProto')\n    }\n\n    console.log('üîß [MTProto] Creating adapter instance from ENV...')\n    this.adapter = new MTProtoAdapter({\n      apiId: parseInt(apiId),\n      apiHash,\n      session,\n    })\n    console.log('‚úÖ [MTProto] Adapter instance created from ENV')\n  }\n\n  /**\n   * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Bot API –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è\n   */\n  private async initializeBotApiFromEnv(): Promise<void> {\n    const botToken = process.env.TELEGRAM_BOT_TOKEN\n\n    if (!botToken) {\n      throw new Error('TELEGRAM_BOT_TOKEN –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è Bot API')\n    }\n\n    this.adapter = new BotApiAdapter({\n      apiId: 0,\n      apiHash: '',\n      botToken,\n    })\n  }\n\n  /**\n   * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MCP –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è\n   */\n  private async initializeMcpFromEnv(): Promise<void> {\n    this.adapter = new McpAdapter({\n      apiId: 0,\n      apiHash: '',\n    })\n  }\n  \n  /**\n   * –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç Telegram\n   */\n  async stop(): Promise<void> {\n    if (this.adapter) {\n      try {\n        await this.adapter.disconnect()\n        console.log('üõë Telegram Service stopped')\n      } catch (error) {\n        console.error('‚ö†Ô∏è Error stopping Telegram Service:', error)\n      }\n    }\n\n    // üîí –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞\n    this.messageHandlerRegistered = false\n    console.log('üîí [TelegramService] Message handler registration flag reset')\n  }\n  \n  /**\n   * –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ Actions\n   */\n  \n  async sendMessage(\n    chatId: string,\n    message: string,\n    replyTo?: number\n  ): Promise<ISendMessageResult> {\n    if (!this.adapter) {\n      throw new Error('Telegram Service not initialized')\n    }\n\n    // üõ°Ô∏è –§–ò–õ–¨–¢–†: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—É—é –≥—Ä—É–ø–ø—É –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π\n    const allowedGroupId = process.env.ALLOWED_GROUP_ID\n    if (allowedGroupId && chatId !== allowedGroupId) {\n      console.log(`‚õî [TelegramService] –ë–õ–û–ö–ò–†–û–í–ö–ê: –ü–æ–ø—ã—Ç–∫–∞ –Ω–∞–ø–∏—Å–∞—Ç—å –≤ —á—É–∂—É—é –≥—Ä—É–ø–ø—É: ${chatId} (—Ä–∞–∑—Ä–µ—à–µ–Ω–∞ —Ç–æ–ª—å–∫–æ ${allowedGroupId})`)\n      return {\n        success: false,\n        error: `Group ${chatId} is not allowed. Only ${allowedGroupId} is permitted.`\n      }\n    }\n\n    return this.adapter.sendMessage(chatId, message, replyTo)\n  }\n  \n  async getHistory(chatId: string, limit: number = 10): Promise<ITelegramMessage[]> {\n    if (!this.adapter) {\n      throw new Error('Telegram Service not initialized')\n    }\n    \n    return this.adapter.getHistory(chatId, limit)\n  }\n  \n  async getDialogs(limit: number = 20): Promise<ITelegramDialog[]> {\n    if (!this.adapter) {\n      throw new Error('Telegram Service not initialized')\n    }\n    \n    return this.adapter.getDialogs(limit)\n  }\n  \n  async getUser(userId: string): Promise<ITelegramUser | undefined> {\n    if (!this.adapter || !this.adapter.getUser) {\n      throw new Error('getUser not supported by current adapter')\n    }\n    \n    return this.adapter.getUser(userId)\n  }\n  \n  async joinChat(chatId: string): Promise<void> {\n    if (!this.adapter || !this.adapter.joinChat) {\n      throw new Error('joinChat not supported by current adapter')\n    }\n    \n    return this.adapter.joinChat(chatId)\n  }\n  \n  async forwardMessage(\n    fromChatId: string,\n    toChatId: string,\n    messageId: number\n  ): Promise<ISendMessageResult | undefined> {\n    if (!this.adapter || !this.adapter.forwardMessage) {\n      throw new Error('forwardMessage not supported by current adapter')\n    }\n    \n    return this.adapter.forwardMessage(fromChatId, toChatId, messageId)\n  }\n  \n  // ====================\n  // Group Monitoring\n  // ====================\n\n  private isMonitoring = false\n  private monitoredGroups: Map<string, { id: string; title: string; type: string }> = new Map()\n  private messageHandlers: Set<(message: any) => void> = new Set()\n  private totalMessages = 0\n  private monitoringStartTime: Date | null = null\n\n  // Callback –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç\n  private liveFeedCallbacks: Set<(message: string) => void> = new Set()\n\n  // –ì–ª–æ–±–∞–ª—å–Ω—ã–π callback –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º\n  private messageDistributor: ((message: string) => void) | null = null\n  private messageHandlerRegistered = false // üîí –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤\n\n  /**\n   * –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å distributor –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º\n   * –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞\n   */\n  setMessageDistributor(distributor: (message: string) => void): void {\n    this.messageDistributor = distributor\n    console.log(`üì∫ [TelegramService] Message distributor —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω`)\n  }\n\n  /**\n   * –î–æ–±–∞–≤–∏—Ç—å callback –¥–ª—è live feed (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ —á–∞—Ç)\n   */\n  addLiveFeedCallback(callback: (message: string) => void): void {\n    this.liveFeedCallbacks.add(callback)\n    console.log(`üì∫ [TelegramService] Live feed callback –¥–æ–±–∞–≤–ª–µ–Ω (–≤—Å–µ–≥–æ: ${this.liveFeedCallbacks.size})`)\n  }\n\n  /**\n   * –£–¥–∞–ª–∏—Ç—å callback –¥–ª—è live feed\n   */\n  removeLiveFeedCallback(callback: (message: string) => void): void {\n    this.liveFeedCallbacks.delete(callback)\n    console.log(`üì∫ [TelegramService] Live feed callback —É–¥–∞–ª–µ–Ω (–æ—Å—Ç–∞–ª–æ—Å—å: ${this.liveFeedCallbacks.size})`)\n  }\n\n  /**\n   * –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ live feed\n   */\n  private sendToLiveFeed(message: any): void {\n    try {\n      const time = new Date(message.timestamp).toLocaleTimeString('ru-RU', {\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit'\n      })\n\n      // üé® –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ —Å —Ü–≤–µ—Ç–∞–º–∏\n      const header = `${colorize.time(`[${time}]`)} üì® ${colorize.chat(message.chatTitle)}`\n      const sender = `${colorize.user(message.fromFirstName)}${message.fromUsername ? colorize.meta(` ${message.fromUsername}`) : ''}`\n      const messageText = colorize.message(`${message.text.substring(0, 150)}${message.text.length > 150 ? '...' : ''}`)\n\n      const formattedMessage = `${header}\\nüë§ ${sender}\\nüí¨ ${messageText}`\n\n      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ –≤—Å–µ live feed callbacks\n      this.liveFeedCallbacks.forEach(callback => {\n        try {\n          callback(formattedMessage)\n        } catch (error) {\n          console.error(colorize.error('‚ùå [TelegramService] Live feed callback error:'), error)\n        }\n      })\n\n      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–π distributor (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ —á–∞—Ç)\n      if (this.messageDistributor) {\n        try {\n          this.messageDistributor(formattedMessage)\n        } catch (error) {\n          console.error(colorize.error('‚ùå [TelegramService] Message distributor error:'), error)\n        }\n      }\n    } catch (error) {\n      console.error(colorize.error('‚ùå [TelegramService] Failed to send to live feed:'), error)\n    }\n  }\n\n  /**\n   * –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤\n   */\n  async startGroupMonitoring(): Promise<{ success: boolean; message: string; error?: string }> {\n    if (this.isMonitoring) {\n      return { success: true, message: '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É–∂–µ –∑–∞–ø—É—â–µ–Ω' }\n    }\n\n    if (!this.adapter) {\n      return { success: false, message: 'Telegram —Å–µ—Ä–≤–∏—Å –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω' }\n    }\n\n    try {\n      this.isMonitoring = true\n      this.monitoringStartTime = new Date()\n      this.totalMessages = 0\n\n      console.log('üöÄ –ó–∞–ø—É—â–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤')\n      console.log('üì° –°—Ç—Ä–∞—Ç–µ–≥–∏—è:', this.getStrategy())\n      console.log('üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–º –≤—Å–µ –≥—Ä—É–ø–ø—ã –≥–¥–µ –∞–∫–∫–∞—É–Ω—Ç —É—á–∞—Å—Ç–Ω–∏–∫')\n\n      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∞–¥–∞–ø—Ç–µ—Ä–∞\n      this.onMessage((message) => {\n        // –°–æ–æ–±—â–µ–Ω–∏—è —É–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ handleIncomingMessage\n        // –≠—Ç–æ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏\n      })\n\n      console.log('‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞')\n\n      return {\n        success: true,\n        message: `–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—É—â–µ–Ω –¥–ª—è ${this.monitoredGroups.size} –≥—Ä—É–ø–ø`,\n      }\n    } catch (error) {\n      this.isMonitoring = false\n      const errorMessage = error instanceof Error ? error.message : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'\n      console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:', errorMessage)\n      return { success: false, message: '–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞', error: errorMessage }\n    }\n  }\n\n  /**\n   * –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞\n   */\n  async stopGroupMonitoring(): Promise<{ success: boolean; message: string }> {\n    if (!this.isMonitoring) {\n      return { success: true, message: '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É–∂–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω' }\n    }\n\n    this.isMonitoring = false\n    console.log('‚èπÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω')\n\n    return { success: true, message: '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω' }\n  }\n\n  /**\n   * –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥\n   */\n  async addGroupToMonitoring(\n    groupId: string,\n    groupTitle: string\n  ): Promise<{ success: boolean; message: string }> {\n    if (this.monitoredGroups.has(groupId)) {\n      return { success: false, message: '–ì—Ä—É–ø–ø–∞ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥' }\n    }\n\n    this.monitoredGroups.set(groupId, {\n      id: groupId,\n      title: groupTitle,\n      type: 'group',\n    })\n\n    console.log(`‚úÖ –ì—Ä—É–ø–ø–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: ${groupTitle} (${groupId})`)\n\n    return {\n      success: true,\n      message: `–ì—Ä—É–ø–ø–∞ \"${groupTitle}\" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥`,\n    }\n  }\n\n  /**\n   * –£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞\n   */\n  async removeGroupFromMonitoring(groupId: string): Promise<{ success: boolean; message: string }> {\n    const removed = this.monitoredGroups.delete(groupId)\n\n    if (removed) {\n      console.log(`üóëÔ∏è –ì—Ä—É–ø–ø–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: ${groupId}`)\n      return { success: true, message: `–ì—Ä—É–ø–ø–∞ ${groupId} —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞` }\n    } else {\n      return { success: false, message: '–ì—Ä—É–ø–ø–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ' }\n    }\n  }\n\n  /**\n   * –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–º—ã—Ö –≥—Ä—É–ø–ø\n   */\n  getMonitoredGroups(): Array<{ id: string; title: string; type: string }> {\n    return Array.from(this.monitoredGroups.values())\n  }\n\n  /**\n   * –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞\n   */\n  getMonitoringStats(): {\n    totalGroups: number\n    activeGroups: number\n    totalMessages: number\n    uptime: number\n  } {\n    return {\n      totalGroups: this.monitoredGroups.size,\n      activeGroups: this.isMonitoring ? this.monitoredGroups.size : 0,\n      totalMessages: this.totalMessages,\n      uptime: this.monitoringStartTime\n        ? Date.now() - this.monitoringStartTime.getTime()\n        : 0,\n    }\n  }\n\n  /**\n   * –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞\n   */\n  isGroupMonitoringActive(): boolean {\n    return this.isMonitoring\n  }\n\n  /**\n   * –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ MTProto (GramJS)\n   * –≠—Ç–æ –†–ï–ê–õ–¨–ù–´–ï —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram!\n   */\n  async handleIncomingMessage(event: any): Promise<void> {\n    console.log('üéØ [TelegramService] handleIncomingMessage() called!')\n    console.log(`üîç [TelegramService] Monitoring active: ${this.isMonitoring}`)\n\n    if (!this.isMonitoring) {\n      console.log('‚è∏Ô∏è [TelegramService] Monitoring is not active, ignoring message')\n      return\n    }\n\n    try {\n      const message = event.message\n\n      // –ò—Å–ø–æ–ª—å–∑—É–µ–º —É–∂–µ –∏–∑–≤–ª–µ—á—ë–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –∞–¥–∞–ø—Ç–µ—Ä–∞\n      const finalChatId = (event as any).chatId || this.extractChatId(message.peerId)\n      const chatTitle = (event as any).chatTitle || 'Unknown Chat'\n\n      console.log(`üì® [TelegramService] Processing message from chat:`, {\n        chatId: finalChatId,\n        chatTitle,\n        sender: (event as any).senderId || message.senderId?.toString(),\n        messageId: message.id\n      })\n\n      // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ\n      const fromUserId = (event as any).senderId || message.senderId?.toString() || 'unknown'\n      const fromUsername = (event as any).senderUsername || ''\n      const fromFirstName = (event as any).senderFirstName || 'Unknown'\n      const fromLastName = (event as any).senderLastName || ''\n\n      // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n      const fullName = fromLastName\n        ? `${fromFirstName} ${fromLastName}`\n        : fromFirstName\n\n      // –§–æ—Ä–º–∏—Ä—É–µ–º username –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n      const usernameDisplay = fromUsername ? `@${fromUsername}` : ''\n\n      this.totalMessages++\n\n      // –§–æ—Ä–º–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n      const processedMessage = {\n        messageId: message.id,\n        chatId: finalChatId,\n        chatTitle,\n        fromUserId,\n        fromUsername: usernameDisplay,\n        fromFirstName: fullName,  // —Ç–µ–ø–µ—Ä—å —ç—Ç–æ –ø–æ–ª–Ω–æ–µ –∏–º—è\n        text: message.text || message.message || '',\n        timestamp: new Date(message.date * 1000),\n        hasMedia: message.media ? true : false,\n        mediaType: this.detectMediaType(message.media),\n      }\n\n      // üõ°Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—É—é –≥—Ä—É–ø–ø—É (–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ó–ê–©–ò–¢–ê)\n      const allowedGroupId = process.env.ALLOWED_GROUP_ID\n      if (allowedGroupId && finalChatId !== allowedGroupId) {\n        console.log(`‚õî [TelegramService] –ò–ì–ù–û–†–ò–†–£–ï–ú —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –Ω–µ—Ä–∞–∑—Ä–µ—à—ë–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã: ${finalChatId} (—Ä–∞–∑—Ä–µ—à–µ–Ω–∞ —Ç–æ–ª—å–∫–æ ${allowedGroupId})`)\n        console.log(`   üìç –ì—Ä—É–ø–ø–∞: \"${chatTitle}\"`)\n        console.log(`   üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ: \"${(message.text || message.message || '').substring(0, 50)}...\"`)\n        return\n      }\n\n      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —ç—Ç–æ—Ç —á–∞—Ç\n      const shouldMonitor = this.monitoredGroups.has(finalChatId) ||\n                           this.monitoredGroups.has(chatTitle) ||\n                           (allowedGroupId && finalChatId === allowedGroupId)\n\n      console.log(`üîç [TelegramService] Should monitor this chat: ${shouldMonitor}`)\n      console.log(`üí¨ [TelegramService] Message text preview:`, {\n        text: (message.text || message.message || '').substring(0, 100),\n        chatTitle,\n        fromFirstName\n      })\n\n      if (shouldMonitor) {\n        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é –¥–ª—è –∞–¥–º–∏–Ω–∫–∏\n        this.saveMessageToHistory(processedMessage)\n\n        // üì∫ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ live feed –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω\n        this.sendToLiveFeed(processedMessage)\n\n        // –£–≤–µ–¥–æ–º–ª—è–µ–º –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –æ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏\n        this.messageHandlers.forEach(handler => {\n          try {\n            handler(processedMessage)\n          } catch (error) {\n            console.error('‚ùå –û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è:', error)\n          }\n        })\n\n        // –õ–æ–≥–∏—Ä—É–µ–º –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ü–≤–µ—Ç–∞–º–∏\n        const timestamp = new Date().toLocaleTimeString('ru-RU', {\n          hour: '2-digit',\n          minute: '2-digit',\n          second: '2-digit'\n        })\n\n        console.log(\n          `${colorize.time(`[${timestamp}]`)} üì® ${colorize.chat(chatTitle)} ¬ª ${colorize.user(fromFirstName)}${usernameDisplay ? colorize.meta(` ${usernameDisplay}`) : ''}: ${colorize.message(processedMessage.text?.substring(0, 100) || '...')}`\n        )\n\n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —Å–ª–æ–≤–∞\n        this.checkTriggerWords(processedMessage)\n\n        // ü§ñ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ LLM\n        console.log(`üî• [TelegramService] BEFORE generateAndSendReply - runtime: ${this.runtime ? 'SET' : 'NULL'}`)\n        await this.generateAndSendReply(processedMessage)\n        console.log(`‚úÖ [TelegramService] AFTER generateAndSendReply`)\n      }\n    } catch (error) {\n      console.error('‚ùå [TelegramService] –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:', error)\n    }\n  }\n\n  /**\n   * –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ chat ID –∏–∑ –æ–±—ä–µ–∫—Ç–∞ peerId\n   */\n  private extractChatId(peerId: any): string {\n    if (!peerId) return 'unknown'\n\n    // PeerUser, PeerChat, PeerChannel –∏–º–µ—é—Ç —Å–≤–æ–π—Å—Ç–≤–∞ userId, chatId, channelId\n    if (peerId.userId) return peerId.userId.toString()\n    if (peerId.chatId) return peerId.chatId.toString()\n    if (peerId.channelId) return peerId.channelId.toString()\n\n    // Fallback - –ø—ã—Ç–∞–µ–º—Å—è toString()\n    return peerId.toString?.() || 'unknown'\n  }\n\n  /**\n   * –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –º–µ–¥–∏–∞\n   */\n  private detectMediaType(media: any): string | undefined {\n    if (!media) return undefined\n\n    if (media._ === 'MessageMediaPhoto') return 'photo'\n    if (media._ === 'MessageMediaDocument') {\n      const mimeType = media.document?.mimeType || ''\n      if (mimeType.startsWith('video/')) return 'video'\n      if (mimeType.startsWith('audio/')) return 'audio'\n      return 'document'\n    }\n    if (media._ === 'MessageMediaVoice') return 'voice'\n    if (media._ === 'MessageMediaGeo') return 'location'\n\n    return 'unknown'\n  }\n\n  /**\n   * –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–Ω—ã—Ö —Å–ª–æ–≤ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏\n   * –ï—Å–ª–∏ –Ω–∞—à–ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä–Ω–æ–µ —Å–ª–æ–≤–æ - —Ä–µ–∞–≥–∏—Ä—É–µ–º!\n   */\n  private checkTriggerWords(message: any): void {\n    const triggerWords = [\n      'help',\n      '–ø–æ–º–æ—â—å',\n      '–ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è',\n      'report',\n      'urgent',\n      '—Å—Ä–æ—á–Ω–æ',\n    ]\n\n    const text = message.text?.toLowerCase() || ''\n\n    const foundTriggers = triggerWords.filter(word => text.includes(word))\n\n    if (foundTriggers.length > 0) {\n      console.log(`‚ö†Ô∏è –¢—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —Å–ª–æ–≤–∞ –Ω–∞–π–¥–µ–Ω—ã: ${foundTriggers.join(', ')}`)\n      console.log(`üìç –í —á–∞—Ç–µ: ${message.chatTitle}`)\n      console.log(`üë§ –û—Ç: ${message.fromFirstName} (${message.fromUserId})`)\n      console.log(`üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ: ${message.text?.substring(0, 100)}...`)\n\n      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ª–æ–≥\n      this.sendTriggerNotification(message, foundTriggers)\n    }\n  }\n\n  /**\n   * –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç—Ä–∏–≥–≥–µ—Ä–Ω—ã—Ö —Å–ª–æ–≤–∞—Ö\n   * –í –∫–∞–Ω–∞–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω) –∏ –≤ –ª–æ–≥-—Ñ–∞–π–ª\n   */\n  private sendTriggerNotification(message: any, foundTriggers: string[]): void {\n    try {\n      const timestamp = new Date().toISOString()\n      const monitoringChannelId = process.env.TELEGRAM_MONITORING_CHANNEL_ID\n\n      // –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\n      const notificationText = `üö® –¢–†–ò–ì–ì–ï–† –û–ë–ù–ê–†–£–ñ–ï–ù\nüìç –ß–∞—Ç: ${message.chatTitle}\nüë§ –û—Ç: ${message.fromFirstName} (${message.fromUserId})\nüîë –°–ª–æ–≤–∞: ${foundTriggers.join(', ')}\nüí¨ –°–æ–æ–±—â–µ–Ω–∏–µ: ${message.text?.substring(0, 150)}${message.text && message.text.length > 150 ? '...' : ''}\n‚è∞ –í—Ä–µ–º—è: ${timestamp}`\n\n      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ –∫–∞–Ω–∞–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω\n      if (monitoringChannelId) {\n        this.sendMessage(monitoringChannelId, notificationText).catch(error => {\n          console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:', error)\n        })\n      }\n\n      // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ª–æ–≥-—Ñ–∞–π–ª\n      const logFilePath = path.join(process.cwd(), 'trigger-alerts.log')\n      const logEntry = `[${timestamp}] TRIGGER ALERT\nChat: ${message.chatTitle} (${message.chatId})\nFrom: ${message.fromFirstName} (${message.fromUserId})\nTriggers: ${foundTriggers.join(', ')}\nMessage: ${message.text}\n---\n`\n\n      fs.appendFileSync(logFilePath, logEntry)\n      console.log(`üìù –ó–∞–ø–∏—Å–∞–Ω–æ –≤ –ª–æ–≥: ${logFilePath}`)\n    } catch (error) {\n      console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç—Ä–∏–≥–≥–µ—Ä–µ:', error)\n    }\n  }\n\n  /**\n   * ü§ñ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ LLM\n   */\n  private async generateAndSendReply(processedMessage: any): Promise<void> {\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ runtime –∏ —Ñ–ª–∞–≥–∞ –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç–æ–≤\n    if (!this.runtime) {\n      console.log('‚ö†Ô∏è [TelegramService] Runtime not available, skipping auto-reply')\n      return\n    }\n\n    if (!this.autoReplyEnabled) {\n      console.log('‚è∏Ô∏è [TelegramService] Auto-reply disabled, skipping')\n      return\n    }\n\n    try {\n      console.log(`ü§ñ [TelegramService] Generating reply for message from ${processedMessage.fromFirstName}...`)\n\n      // üõ°Ô∏è –ü–†–û–í–ï–†–ö–ê messageManager - –µ—Å–ª–∏ –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º\n      if (!this.runtime.messageManager) {\n        console.log('‚ö†Ô∏è [TelegramService] messageManager not available, using simplified mode')\n        const simpleReply = this.generateSimpleReply(processedMessage.text, processedMessage.fromFirstName)\n        await this.sendMessage(\n          processedMessage.chatId,\n          simpleReply,\n          processedMessage.messageId\n        )\n        return\n      }\n\n      // –°–æ–∑–¥–∞–µ–º Memory –æ–±—ä–µ–∫—Ç –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è\n      const userMemory: Memory = {\n        id: stringToUuid(`telegram-${processedMessage.chatId}-${processedMessage.messageId}-${Date.now()}`),\n        userId: stringToUuid(`telegram-user-${processedMessage.fromUserId}`) as UUID,\n        agentId: this.runtime.agentId,\n        roomId: stringToUuid(`telegram-room-${processedMessage.chatId}`) as UUID,\n        content: {\n          text: processedMessage.text,\n          source: 'telegram',\n          metadata: {\n            chatId: processedMessage.chatId,\n            chatTitle: processedMessage.chatTitle,\n            messageId: processedMessage.messageId,\n            fromUsername: processedMessage.fromUsername,\n            fromFirstName: processedMessage.fromFirstName,\n          }\n        },\n        createdAt: processedMessage.timestamp.getTime(),\n      }\n\n      // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø–∞–º—è—Ç—å\n      await this.runtime.messageManager.createMemory(userMemory)\n\n      // –ü–æ–ª—É—á–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π)\n      const roomId = stringToUuid(`telegram-room-${processedMessage.chatId}`) as UUID\n      const conversationHistory = await this.runtime.messageManager.getMemories({\n        roomId,\n        count: 10,\n        unique: true,\n      })\n\n      console.log(`üìö [TelegramService] –ü–æ–ª—É—á–µ–Ω–æ ${conversationHistory.length} —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞`)\n\n      // –°–æ–∑–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n      const state: State = await this.runtime.composeState(userMemory)\n\n      // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ ElizaOS —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º\n      const response = await this.runtime.processActions(\n        userMemory,\n        conversationHistory, // –ü–µ—Ä–µ–¥–∞–µ–º –í–°–Æ –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞!\n        state,\n        async (response: Memory) => {\n          // Callback - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –≤ Telegram\n          if (response.content?.text) {\n            console.log(`üí¨ [TelegramService] Sending reply: ${response.content.text.substring(0, 100)}...`)\n\n            await this.sendMessage(\n              processedMessage.chatId,\n              response.content.text,\n              processedMessage.messageId // reply to original message\n            )\n\n            // –õ–æ–≥–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å —Ü–≤–µ—Ç–∞–º–∏\n            const timestamp = new Date().toLocaleTimeString('ru-RU', {\n              hour: '2-digit',\n              minute: '2-digit',\n              second: '2-digit'\n            })\n\n            console.log(\n              `${colorize.time(`[${timestamp}]`)} üì§ ${colorize.chat(processedMessage.chatTitle)} ¬ª ${colorize.success('VIBEE')}: ${colorize.message(response.content.text.substring(0, 100))}`\n            )\n          }\n        }\n      )\n\n      console.log(`‚úÖ [TelegramService] Reply generation completed`)\n    } catch (error) {\n      console.error(`‚ùå [TelegramService] Failed to generate reply:`, error)\n\n      // üß† –£–ú–ù–´–ô FALLBACK - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞\n      const fallbackReply = this.generateSimpleReply(processedMessage.text, processedMessage.fromFirstName)\n      try {\n        await this.sendMessage(\n          processedMessage.chatId,\n          fallbackReply,\n          processedMessage.messageId\n        )\n      } catch (sendError) {\n        console.error(`‚ùå [TelegramService] Failed to send fallback message:`, sendError)\n      }\n    }\n  }\n\n  /**\n   * üß† –ü—Ä–æ—Å—Ç–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É–º–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –±–µ–∑ LLM\n   */\n  private generateSimpleReply(messageText: string, fromFirstName: string): string {\n    const text = messageText.toLowerCase().trim()\n\n    // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–º–Ω—ã–π –æ—Ç–≤–µ—Ç\n    if (text.includes('–ø—Ä–∏–≤–µ—Ç') || text.includes('hi') || text.includes('hello')) {\n      const greetings = [\n        `–ü—Ä–∏–≤–µ—Ç, ${fromFirstName}! –ö–∞–∫ –¥–µ–ª–∞? üòä`,\n        `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, ${fromFirstName}! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?`,\n        `–ü—Ä–∏–≤–µ—Ç! –†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å, ${fromFirstName}!`\n      ]\n      return greetings[Math.floor(Math.random() * greetings.length)]\n    }\n\n    if (text.includes('–∫–∞–∫ –¥–µ–ª–∞') || text.includes('–∫–∞–∫ —Ç—ã')) {\n      return `–°–ø–∞—Å–∏–±–æ —á—Ç–æ —Å–ø—Ä–æ—Å–∏–ª, ${fromFirstName}! –î–µ–ª–∞ –æ—Ç–ª–∏—á–Ω–æ, –∏–∑—É—á–∞—é –Ω–æ–≤–æ–µ –∏ –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –∑–∞–¥–∞—á–∞–º! –ê —É —Ç–µ–±—è –∫–∞–∫?`\n    }\n\n    if (text.includes('–ø–æ–º–æ—â—å') || text.includes('help')) {\n      return `–ö–æ–Ω–µ—á–Ω–æ, ${fromFirstName}! –Ø –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å. –ß—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Ç–µ–±—è –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?`\n    }\n\n    if (text.includes('—Å–ø–∞—Å–∏–±–æ') || text.includes('thanks')) {\n      return `–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, ${fromFirstName}! –†–∞–¥ –±—ã–ª –ø–æ–º–æ—á—å! üëç`\n    }\n\n    if (text.includes('—Ä–∞–±–æ—Ç–∞') || text.includes('–¥–µ–ª–∞')) {\n      return `–ü–æ–Ω–∏–º–∞—é, ${fromFirstName}. –†–∞–±–æ—Ç–∞ –±—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω–æ–π. –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å –∏–ª–∏ —Å–æ–≤–µ—Ç - –æ–±—Ä–∞—â–∞–π—Å—è!`\n    }\n\n    if (text.includes('?')) {\n      return `–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å, ${fromFirstName}! –î–∞–π-–∫–∞ –ø–æ–¥—É–º–∞—é... –≠—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –Ω–æ —è –≥–æ—Ç–æ–≤ –æ–±—Å—É–¥–∏—Ç—å —ç—Ç–æ —Å —Ç–æ–±–æ–π.`\n    }\n\n    // –û–±—â–∏–π —É–º–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è\n    const generalReplies = [\n      `–ü–æ–Ω—è—Ç–Ω–æ, ${fromFirstName}! –†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ, —á—Ç–æ –¥—É–º–∞–µ—à—å –æ–± —ç—Ç–æ–º?`,\n      `–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, ${fromFirstName}! –Ø —Å–ª—É—à–∞—é.`,\n      `${fromFirstName}, —ç—Ç–æ –ª—é–±–æ–ø—ã—Ç–Ω–æ. –ö–∞–∫–∏–µ —É —Ç–µ–±—è –º—ã—Å–ª–∏ –Ω–∞ —ç—Ç–æ—Ç —Å—á–µ—Ç?`,\n      `–ü–æ–Ω—è–ª —Ç–µ–±—è, ${fromFirstName}. –ê —á—Ç–æ —Ç—ã –æ–± —ç—Ç–æ–º –¥—É–º–∞–µ—à—å?`,\n      `${fromFirstName}, –¥–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä–µ–º —ç—Ç–æ –≤–º–µ—Å—Ç–µ!`,\n    ]\n\n    return generalReplies[Math.floor(Math.random() * generalReplies.length)]\n  }\n\n  /**\n   * –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∞–¥–∞–ø—Ç–µ—Ä–∞\n   * –≠—Ç–æ —Å–≤—è–∑—ã–≤–∞–µ—Ç MTProto –∞–¥–∞–ø—Ç–µ—Ä —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º\n   */\n  onMessage(handler: (message: any) => void): void {\n    console.log('üîó [TelegramService] onMessage() called')\n    this.messageHandlers.add(handler)\n    console.log(`üì® [TelegramService] –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ (${this.messageHandlers.size} –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)`)\n\n    // üîí –ó–ê–©–ò–¢–ê –û–¢ –î–£–ë–õ–ò–†–û–í–ê–ù–ò–Ø: –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑\n    if (!this.messageHandlerRegistered && this.adapter?.onMessage) {\n      console.log('‚úÖ [TelegramService] Adapter supports onMessage, registering handler...')\n      // –°–≤—è–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∞–¥–∞–ø—Ç–µ—Ä–∞ —Å –Ω–∞—à–∏–º —Å–µ—Ä–≤–∏—Å–æ–º\n      const adapterHandler = (event: any) => {\n        console.log('üì• [TelegramService] Adapter handler called, forwarding to handleIncomingMessage')\n        this.handleIncomingMessage(event)\n      }\n      this.adapter.onMessage(adapterHandler)\n      this.messageHandlerRegistered = true // üîí –û—Ç–º–µ—á–∞–µ–º, —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω\n      console.log('‚úÖ [TelegramService] Handler registered with adapter (ONCE ONLY)')\n    } else if (!this.adapter?.onMessage) {\n      console.log('‚ö†Ô∏è [TelegramService] Adapter does NOT support onMessage!')\n    } else {\n      console.log(`üîí [TelegramService] Handler already registered (skipping duplicate registration)`)\n    }\n  }\n\n  /**\n   * –û—Ç–ø–∏—Å–∫–∞ –æ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π\n   */\n  offMessage(handler: (message: any) => void): void {\n    this.messageHandlers.delete(handler)\n    console.log(`üì® –û—Ç–ø–∏—Å–∫–∞ –æ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π (${this.messageHandlers.size} –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤)`)\n  }\n\n  /**\n   * –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\n   */\n  getStrategy(): string {\n    return this.strategy\n  }\n\n  /**\n   * –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∞–¥–∞–ø—Ç–µ—Ä–∞\n   */\n  isConnected(): boolean {\n    return this.adapter !== null\n  }\n\n  /**\n   * –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ message distributor\n   */\n  hasMessageDistributor(): boolean {\n    return this.messageDistributor !== null\n  }\n\n  /**\n   * –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≥—Ä—É–ø–ø –∏–∑ Telegram\n   */\n  async getAllGroups(): Promise<Array<{\n    id: string\n    title: string\n    type: string\n    unreadCount: number\n    isMonitored: boolean\n  }>> {\n    if (!this.adapter) {\n      throw new Error('Telegram Service not initialized')\n    }\n\n    try {\n      const dialogs = await this.adapter.getDialogs(100)\n\n      return dialogs\n        .filter(d => d.name !== 'Unknown') // –§–∏–ª—å—Ç—Ä—É–µ–º –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ\n        .map(dialog => ({\n          id: dialog.id,\n          title: dialog.name,\n          type: dialog.type || 'unknown',\n          unreadCount: dialog.unreadCount || 0,\n          isMonitored: this.monitoredGroups.has(dialog.id) || this.monitoredGroups.has(dialog.name)\n        }))\n    } catch (error) {\n      console.error('‚ùå Failed to get groups:', error)\n      return []\n    }\n  }\n\n  /**\n   * –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–¥–ª—è –∞–¥–º–∏–Ω–∫–∏)\n   */\n  private recentMessages: Array<{\n    chatId: string\n    chatTitle: string\n    fromUsername: string\n    text: string\n    timestamp: Date\n  }> = []\n\n  /**\n   * –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ handleIncomingMessage)\n   */\n  private saveMessageToHistory(message: any): void {\n    this.recentMessages.unshift({\n      chatId: message.chatId,\n      chatTitle: message.chatTitle,\n      fromUsername: message.fromUsername || message.fromFirstName,\n      text: message.text,\n      timestamp: message.timestamp\n    })\n\n    // –•—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å–æ–æ–±—â–µ–Ω–∏–π\n    if (this.recentMessages.length > 100) {\n      this.recentMessages = this.recentMessages.slice(0, 100)\n    }\n  }\n\n  /**\n   * –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∫–∏\n   */\n  getRecentMessages(limit: number = 50): Array<{\n    chatId: string\n    chatTitle: string\n    fromUsername: string\n    text: string\n    timestamp: Date\n  }> {\n    return this.recentMessages.slice(0, limit)\n  }\n}\n",
    "import { TelegramClient } from \"telegram\";\nimport { StringSession } from \"telegram/sessions/index.js\";\nimport { NewMessage, NewMessageEvent } from \"telegram/events/index.js\";\nimport {\n  ITelegramAdapter,\n  ITelegramConfig,\n  ISendMessageResult,\n  ITelegramMessage,\n  ITelegramDialog,\n  ITelegramUser\n} from '../../types/telegram.types'\nimport input from \"input\";\n\n/**\n * MTProto Adapter (GramJS) - Primary Connection Strategy\n *\n * –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:\n * - –ü–æ–ª–Ω—ã–π userbot —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª\n * - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å <250ms\n * - TypeScript native\n * - –ó—Ä–µ–ª–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞ (fork Telethon)\n *\n * –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:\n * - –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏\n * - –î–æ—Å—Ç—É–ø –∫ –í–°–ï–ú –≥—Ä—É–ø–ø–∞–º –≥–¥–µ –∞–∫–∫–∞—É–Ω—Ç —É—á–∞—Å—Ç–Ω–∏–∫\n * - –†–µ–∞–∫—Ü–∏—è –Ω–∞ —Ç—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —Å–ª–æ–≤–∞\n * - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã\n */\nexport class MTProtoAdapter implements ITelegramAdapter {\n    private client: TelegramClient;\n    private config: ITelegramConfig;\n    private session: StringSession;\n    private messageHandlers: Set<(event: NewMessageEvent) => void> = new Set();\n\n    constructor(config: ITelegramConfig) {\n        this.config = config;\n        this.session = new StringSession(config.session || \"\");\n        this.client = new TelegramClient(this.session, config.apiId, config.apiHash, {\n            connectionRetries: 5,\n            deviceModel: \"Desktop\",\n            appVersion: \"1.0.0\",\n            systemVersion: \"NodeJS\",\n            langCode: \"en\",\n        });\n    }\n\n    async connect(): Promise<void> {\n        console.log(\"üîó Connecting to Telegram via MTProto...\");\n\n        try {\n            // –ï—Å–ª–∏ –µ—Å—Ç—å session string, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ\n            if (this.config.session) {\n                console.log(\"üîë Using existing session string\");\n\n                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–π–º–∞—É—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\n                const connectPromise = this.client.connect();\n                const timeoutPromise = new Promise((_, reject) => {\n                    setTimeout(() => reject(new Error('MTProto connection timeout after 10 seconds')), 10000);\n                });\n\n                await Promise.race([connectPromise, timeoutPromise]);\n            } else {\n                console.log(\"‚ö†Ô∏è No session string found, skipping auth (interactive mode not supported)\");\n                return;\n            }\n\n            console.log(\"‚úÖ Connected to Telegram!\");\n            console.log(\"üë§ User ID:\", (await this.client.getMe()).id);\n\n            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π\n            this.setupMessageListener();\n        } catch (error) {\n            console.error(\"‚ùå MTProto connection failed:\", error);\n            console.log(\"‚ö†Ô∏è Telegram will be unavailable. Continuing without Telegram...\");\n            throw error;\n        }\n    }\n\n    /**\n     * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π\n     * –í–ê–ñ–ù–û: –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —á–∏—Ç–∞—Ç—å –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è –≤–æ –í–°–ï–• –≥—Ä—É–ø–ø–∞—Ö –≥–¥–µ –∞–∫–∫–∞—É–Ω—Ç —É—á–∞—Å—Ç–Ω–∏–∫\n     */\n    private setupMessageListener(): void {\n        console.log('üéß [MTProto] Setting up message listener...');\n\n        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π\n        this.client.addEventHandler(async (event: NewMessageEvent) => {\n            console.log(`üîî [MTProto] New message event received! Handlers count: ${this.messageHandlers.size}`);\n            console.log(`üìù [MTProto] Message text: ${event.message.text || event.message.message}`);\n\n            // –£–≤–µ–¥–æ–º–ª—è–µ–º –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –æ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏\n            if (this.messageHandlers.size === 0) {\n                console.log('‚ö†Ô∏è [MTProto] No handlers registered yet!');\n            }\n\n            // –û–±–æ–≥–∞—â–∞–µ–º event –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —á–∞—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ\n            // –°–æ–∑–¥–∞–µ–º –æ–±–µ—Ä—Ç–∫—É —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏\n            const enrichedEvent = {\n                originalEvent: event,\n                message: event.message,\n                // –ò–∑–≤–ª–µ–∫–∞–µ–º chatId –∏–∑ peerId\n                chatId: undefined as string | undefined,\n                chatTitle: 'Unknown Chat',\n                chatUsername: undefined as string | undefined,\n                senderId: undefined as string | undefined,\n                senderUsername: undefined as string | undefined,\n                senderFirstName: undefined as string | undefined,\n                senderLastName: undefined as string | undefined,\n            };\n\n            try {\n                const chat = await event.message.getChat();\n                const sender = await event.message.getSender();\n\n                // –ò–∑–≤–ª–µ–∫–∞–µ–º chatId –∏–∑ peerId\n                const peerId = event.message.peerId;\n                if (peerId) {\n                    if (peerId.userId) enrichedEvent.chatId = peerId.userId.toString();\n                    else if (peerId.chatId) enrichedEvent.chatId = peerId.chatId.toString();\n                    else if (peerId.channelId) enrichedEvent.chatId = peerId.channelId.toString();\n                }\n\n                enrichedEvent.chatTitle = chat?.title || (chat as any)?.firstName || 'Private Chat';\n                enrichedEvent.chatUsername = (chat as any)?.username;\n                enrichedEvent.senderId = sender?.id?.toString() || 'unknown';\n                enrichedEvent.senderUsername = (sender as any)?.username;\n                enrichedEvent.senderFirstName = (sender as any)?.firstName;\n                enrichedEvent.senderLastName = (sender as any)?.lastName;\n\n                console.log(`üí¨ [MTProto] Chat: ${enrichedEvent.chatTitle} (${enrichedEvent.chatId}), From: ${enrichedEvent.senderFirstName} (${enrichedEvent.senderId})`);\n            } catch (error) {\n                console.error('‚ö†Ô∏è [MTProto] Failed to get chat/sender info:', error);\n                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∞–∑–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–µ\n                if (!enrichedEvent.chatId) {\n                    const peerId = event.message.peerId;\n                    if (peerId) {\n                        if (peerId.userId) enrichedEvent.chatId = peerId.userId.toString();\n                        else if (peerId.chatId) enrichedEvent.chatId = peerId.chatId.toString();\n                        else if (peerId.channelId) enrichedEvent.chatId = peerId.channelId.toString();\n                        else enrichedEvent.chatId = 'unknown';\n                    } else {\n                        enrichedEvent.chatId = 'unknown';\n                    }\n                }\n            }\n\n            // –ü–µ—Ä–µ–¥–∞–µ–º –æ–±–æ–≥–∞—â–µ–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –≤–º–µ—Å—Ç–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ\n            this.messageHandlers.forEach(handler => {\n                try {\n                    console.log('üì§ [MTProto] Calling handler...');\n                    handler(enrichedEvent as any);\n                } catch (error) {\n                    console.error(\"‚ùå [MTProto] Error in message handler:\", error);\n                }\n            });\n        }, new NewMessage({}));\n\n        console.log('‚úÖ [MTProto] Message listener configured');\n    }\n\n    /**\n     * –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ TelegramService)\n     */\n    onMessage(handler: (event: NewMessageEvent) => void): void {\n        this.messageHandlers.add(handler);\n        console.log(`üì® New message handler registered. Total handlers: ${this.messageHandlers.size}`);\n    }\n\n    /**\n     * –û—Ç–ø–∏—Å–∫–∞ –æ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π\n     */\n    offMessage(handler: (event: NewMessageEvent) => void): void {\n        this.messageHandlers.delete(handler);\n        console.log(`üì® Message handler removed. Total handlers: ${this.messageHandlers.size}`);\n    }\n\n    async disconnect(): Promise<void> {\n        await this.client.disconnect();\n        console.log(\"üîå Disconnected from Telegram\");\n    }\n\n  async sendMessage(chatId: string, message: string, replyTo?: number): Promise<ISendMessageResult> {\n    const result = await this.client.sendMessage(chatId, { \n      message,\n      replyTo,\n    })\n    \n    return {\n      messageId: result.id,\n      date: result.date,\n      chatId: chatId,\n    }\n  }\n\n  async getHistory(chatId: string, limit: number): Promise<ITelegramMessage[]> {\n    const messages = await this.client.getMessages(chatId, { limit })\n    \n    return messages.map(msg => ({\n      id: msg.id,\n      text: msg.text || '',\n      sender: msg.senderId?.toString() || 'unknown',\n      date: msg.date,\n      chatId: chatId,\n    }))\n  }\n\n  async getDialogs(limit: number): Promise<ITelegramDialog[]> {\n    const dialogs = await this.client.getDialogs({ limit })\n\n    return dialogs.map(dialog => ({\n      id: dialog.id.toString(),\n      name: dialog.title || dialog.name || 'Unknown',\n      type: dialog.isUser ? 'private' : dialog.isChannel ? 'channel' : dialog.isGroup ? 'group' : 'unknown',\n      unreadCount: dialog.unreadCount,\n    }))\n  }\n  \n  getClient(): TelegramClient {\n    return this.client\n  }\n}\n",
    "import { Telegraf } from 'telegraf'\nimport { \n  ITelegramAdapter, \n  ITelegramConfig, \n  ISendMessageResult, \n  ITelegramMessage, \n  ITelegramDialog \n} from '../../types/telegram.types'\n\n/**\n * Bot API Adapter (Telegraf) - Fallback #1\n * \n * –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:\n * - ‚ùå –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç userbot —Ñ—É–Ω–∫—Ü–∏–∏\n * - ‚ùå –ù–ï –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —á—É–∂–∏—Ö —á–∞—Ç–æ–≤\n * - ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Telegram\n * - ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω—ã–π API\n */\nexport class BotApiAdapter implements ITelegramAdapter {\n  private bot: Telegraf | null = null\n  private config: ITelegramConfig\n\n  constructor(config: ITelegramConfig) {\n    this.config = config\n    \n    if (!config.botToken) {\n      throw new Error('TELEGRAM_BOT_TOKEN required for Bot API')\n    }\n    \n    this.bot = new Telegraf(config.botToken)\n  }\n\n  async connect(): Promise<void> {\n    if (!this.bot) {\n      throw new Error('Bot not initialized')\n    }\n\n    console.log('ü§ñ Connecting via Bot API...')\n\n    try {\n      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\n      const me = await this.bot.telegram.getMe()\n      console.log(`‚úÖ Bot API connected as @${me.username}`)\n    } catch (error) {\n      console.error('‚ùå Bot API connection failed:', error)\n      throw new Error(`Failed to connect to Telegram Bot API: ${error instanceof Error ? error.message : String(error)}`)\n    }\n  }\n\n  async disconnect(): Promise<void> {\n    if (this.bot) {\n      await this.bot.stop()\n      console.log('üõë Bot API disconnected')\n    }\n  }\n\n  async sendMessage(chatId: string, message: string, replyTo?: number): Promise<ISendMessageResult> {\n    if (!this.bot) {\n      throw new Error('Bot not connected')\n    }\n    \n    const options = replyTo ? { reply_parameters: { message_id: replyTo } } : {}\n    \n    const result = await this.bot.telegram.sendMessage(chatId, message, options)\n    \n    return {\n      messageId: result.message_id,\n      date: result.date,\n      chatId: chatId,\n    }\n  }\n\n  async getHistory(chatId: string, limit: number): Promise<ITelegramMessage[]> {\n    // ‚ö†Ô∏è Bot API –ù–ï –ü–û–î–î–ï–†–ñ–ò–í–ê–ï–¢ —á—Ç–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á—É–∂–∏—Ö —á–∞—Ç–æ–≤\n    console.warn('‚ö†Ô∏è Bot API does not support reading message history')\n    throw new Error('getHistory not supported by Bot API - use MTProto for userbot features')\n  }\n\n  async getDialogs(limit: number): Promise<ITelegramDialog[]> {\n    // ‚ö†Ô∏è Bot API –ù–ï –ü–û–î–î–ï–†–ñ–ò–í–ê–ï–¢ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤\n    console.warn('‚ö†Ô∏è Bot API does not support getting dialogs list')\n    throw new Error('getDialogs not supported by Bot API - use MTProto for userbot features')\n  }\n}\n",
    "import { \n  ITelegramAdapter, \n  ITelegramConfig, \n  ISendMessageResult, \n  ITelegramMessage, \n  ITelegramDialog \n} from '../../types/telegram.types'\n\n/**\n * MCP Adapter - Fallback #2 (STUB)\n *\n * @status STUB - –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –±—É–¥—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏\n * @future –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MCP —Å–µ—Ä–≤–µ—Ä–∞–º–∏ Telegram\n * @see https://github.com/modelcontextprotocol –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ MCP\n */\nexport class McpAdapter implements ITelegramAdapter {\n  private config: ITelegramConfig\n  private connected: boolean = false\n  private mcpServerUrl?: string\n\n  constructor(config: ITelegramConfig) {\n    this.config = config\n  }\n\n  async connect(): Promise<void> {\n    console.log('üîå Connecting via MCP...')\n    // FUTURE: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MCP —Å–µ—Ä–≤–µ—Ä—É —Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ MCP\n    this.connected = true\n    console.log('‚úÖ MCP connected (mock)')\n  }\n\n  async disconnect(): Promise<void> {\n    this.connected = false\n    console.log('üõë MCP disconnected')\n  }\n\n  async sendMessage(chatId: string, message: string, replyTo?: number): Promise<ISendMessageResult> {\n    if (!this.connected) {\n      throw new Error('MCP not connected')\n    }\n\n    // FUTURE: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ MCP API\n    console.log(`üì§ MCP: Send to ${chatId}: ${message}`)\n\n    return {\n      messageId: Math.floor(Math.random() * 1000000),\n      date: Date.now(),\n      chatId,\n    }\n  }\n\n  async getHistory(chatId: string, limit: number): Promise<ITelegramMessage[]> {\n    if (!this.connected) {\n      throw new Error('MCP not connected')\n    }\n\n    // FUTURE: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ MCP API\n    console.log(`üìú MCP: Get history from ${chatId}, limit: ${limit}`)\n\n    return []\n  }\n\n  async getDialogs(limit: number): Promise<ITelegramDialog[]> {\n    if (!this.connected) {\n      throw new Error('MCP not connected')\n    }\n\n    // FUTURE: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ MCP API\n    console.log(`üìã MCP: Get dialogs, limit: ${limit}`)\n\n    return []\n  }\n}\n",
    "import { Plugin } from '@elizaos/core'\n\n// Actions\nimport { sendMessageAction } from './actions/sendMessage.action'\nimport { readHistoryAction } from './actions/readHistory.action'\nimport { getDialogsAction } from './actions/getDialogs.action'\nimport { startGroupMonitoringAction } from './actions/startGroupMonitoring.action'\nimport { addGroupToMonitorAction } from './actions/addGroupToMonitor.action'\nimport { liveFeedAction } from './actions/liveFeed.action'\n\n// Providers\nimport { recentMessagesProvider } from './providers/recentMessages.provider'\nimport { dialogsListProvider } from './providers/dialogsList.provider'\nimport { capabilitiesProvider } from './providers/capabilities.provider'\nimport { liveMessagesProvider } from './providers/liveMessages.provider'\nimport { autoMessageForwarderProvider } from './providers/autoMessageForwarder.provider'\n\n// Evaluators\nimport { messageAutoForwardEvaluator } from './evaluators/messageAutoForward.evaluator'\n\n// Services\nimport { TelegramService } from './services/telegram.service'\n\n// Schemas\nimport { TelegramConfigSchema } from './schemas/telegram.schema'\n\n/**\n * Telegram Craft Plugin\n * \n * ElizaOS plugin –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Telegram —á–µ—Ä–µ–∑ userbot (MTProto via GramJS)\n * \n * –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:\n * - MTProto (GramJS) - Primary (–ø–æ–ª–Ω—ã–π userbot —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)\n * - Bot API (Telegraf) - Fallback #1 (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API)\n * - MCP Server - Fallback #2 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª)\n */\nexport const telegramCraftPlugin: Plugin = {\n  name: 'telegram-craft',\n  description: 'ElizaOS plugin –¥–ª—è Telegram userbot —á–µ—Ä–µ–∑ MTProto (GramJS) —Å fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏',\n  \n  /**\n   * Actions - —á—Ç–æ –∞–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å\n   */\n  actions: [\n    sendMessageAction,\n    readHistoryAction,\n    getDialogsAction,\n    startGroupMonitoringAction,\n    addGroupToMonitorAction,\n    liveFeedAction, // üì∫ Live feed —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –≥—Ä—É–ø–ø\n  ],\n  \n  /**\n   * Providers - –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è LLM\n   */\n  providers: [\n    recentMessagesProvider,\n    dialogsListProvider,\n    capabilitiesProvider,\n    liveMessagesProvider, // üî• –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≥—Ä—É–ø–ø –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏\n    autoMessageForwarderProvider, // üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç\n  ],\n\n  /**\n   * Evaluators - –∞–Ω–∞–ª–∏–∑ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è\n   */\n  evaluators: [\n    messageAutoForwardEvaluator, // üì° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è\n  ],\n  \n  /**\n   * Services - —Ñ–æ–Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã\n   */\n  services: [new TelegramService()],\n  \n  /**\n   * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞\n   */\n  init: async (config, runtime) => {\n    console.log('üîß Initializing Telegram Craft Plugin...')\n\n    try {\n      // –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Zod\n      const validatedConfig = await TelegramConfigSchema.parseAsync({\n        TELEGRAM_API_ID: config.TELEGRAM_API_ID || process.env.TELEGRAM_API_ID,\n        TELEGRAM_API_HASH: config.TELEGRAM_API_HASH || process.env.TELEGRAM_API_HASH,\n        TELEGRAM_SESSION: config.TELEGRAM_SESSION_STRING || process.env.TELEGRAM_SESSION_STRING,\n        TELEGRAM_STRATEGY: config.TELEGRAM_STRATEGY || process.env.TELEGRAM_STRATEGY || 'mtproto',\n        TELEGRAM_BOT_TOKEN: config.TELEGRAM_BOT_TOKEN || process.env.TELEGRAM_BOT_TOKEN,\n        TELEGRAM_PHONE: config.TELEGRAM_PHONE || process.env.TELEGRAM_PHONE,\n        TELEGRAM_PASSWORD: config.TELEGRAM_PASSWORD || process.env.TELEGRAM_PASSWORD,\n      })\n\n      // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è runtime\n      for (const [key, value] of Object.entries(validatedConfig)) {\n        if (value) {\n          process.env[key] = String(value)\n        }\n      }\n\n      // ‚úÖ TELE–ì–†–ê–ú –°–ï–†–í–ò–° –£–ñ–ï –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–ù!\n      // ElizaOS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏–∑ plugin.services array\n      // –û–Ω —Å–∞–º –≤—ã–∑–æ–≤–µ—Ç TelegramService.start(runtime) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞\n\n      console.log('‚úÖ [Plugin] TelegramService will be auto-registered by ElizaOS')\n      console.log('üîç [Plugin] Services in plugin definition:', telegramCraftPlugin.services?.length || 0)\n      console.log('üîç [Plugin] Service types:', telegramCraftPlugin.services?.map(s => (s as any).serviceType))\n\n      console.log(`‚úÖ Telegram Craft Plugin initialized with strategy: ${validatedConfig.TELEGRAM_STRATEGY}`)\n      console.log(`üì¶ Registered ${telegramCraftPlugin.actions?.length || 0} actions`)\n      console.log(`üì° Registered ${telegramCraftPlugin.providers?.length || 0} providers`)\n      console.log(`‚öôÔ∏è  Registered ${telegramCraftPlugin.services?.length || 0} services`)\n    } catch (error) {\n      console.error('‚ùå Failed to initialize Telegram Craft Plugin:', error)\n      throw error\n    }\n  },\n}\n\nexport default telegramCraftPlugin\n"
  ],
  "mappings": "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",
  "debugId": "6A3E360BF33648BB64756E2164756E21",
  "names": []
}