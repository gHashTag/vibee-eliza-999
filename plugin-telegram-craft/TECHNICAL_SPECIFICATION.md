# –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï
# –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Telegram-–±–æ—Ç–∞–º–∏

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 2025-11-24
**–Ø–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** TypeScript
**–§—Ä–µ–π–º–≤–æ—Ä–∫:** ElizaOS Plugin

---

## 1. –û–ë–©–ï–ï –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ï–ö–¢–ê

### 1.1 –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–ª–∞–≥–∏–Ω –¥–ª—è ElizaOS, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π:
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram-—á–∞—Ç–∞—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫—É –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Telegram
- –û–±—Ä–∞–±–æ—Ç–∫—É –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ê–Ω–∞–ª–∏—Ç–∏–∫—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —á–∞—Ç–æ–≤

### 1.2 –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–æ–≤
- –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–∞
- SMM-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã

---

## 2. –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´

### 2.1 –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           TELEGRAM SERVICE              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  BotAPI      ‚îÇ  ‚îÇ   MTProto    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  Adapter     ‚îÇ  ‚îÇ   Adapter    ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ         ‚îÇ                ‚îÇ             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ     MCP      ‚îÇ  ‚îÇ   Memory     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  Adapter     ‚îÇ  ‚îÇ   Storage    ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2.2 –ö–ª—é—á–µ–≤—ã–µ –º–æ–¥—É–ª–∏

#### **TelegramService** (–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –∞–¥–∞–ø—Ç–µ—Ä–∞–º–∏
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

#### **–ê–¥–∞–ø—Ç–µ—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
1. **BotAPI Adapter** - –¥–ª—è webhook/polling —Ä–µ–∂–∏–º–æ–≤
2. **MTProto Adapter** - –¥–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ MTProto API
3. **MCP Adapter** - –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å MCP (Model Context Protocol)

#### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ —á–∞—Ç–∞—Ö
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º
- –°–±–æ—Ä –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

---

## 3. –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

### 3.1 –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

#### **FR-1: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤**
- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è BotAPI –∞–¥–∞–ø—Ç–µ—Ä–∞
- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è MTProto –∞–¥–∞–ø—Ç–µ—Ä–∞
- ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è MCP –∞–¥–∞–ø—Ç–µ—Ä–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏
- ‚úÖ Fallback-–º–µ—Ö–∞–Ω–∏–∑–º—ã –ø—Ä–∏ —Å–±–æ—è—Ö

#### **FR-2: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π**
- ‚úÖ –ü–µ—Ä–µ—Ö–≤–∞—Ç –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –≤—Å–µ—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è (chatId, chatTitle, sender, messageId)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### **FR-3: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π**
- ‚úÖ –í—ã–∑–æ–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –∞–¥–∞–ø—Ç–µ—Ä–∞–º
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

#### **FR-4: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG, INFO, WARN, ERROR)
- ‚úÖ –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–¥–∞–ø—Ç–µ—Ä–æ–≤

### 3.2 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

#### **FR-5: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º**
- ‚úÖ –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏

#### **FR-6: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞**
- ‚úÖ –ü–æ–¥—Å—á–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —á–∞—Ç–∞–º
- ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –í—Ä–µ–º–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## 4. –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

### 4.1 –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:**
- **TypeScript** - —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **ElizaOS Plugin Framework** - –±–∞–∑–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Node.js** - —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (v18+)
- **Bun** - –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –∏ —Ä–∞–Ω—Ç–∞–π–º

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `@elizaos/core` - —è–¥—Ä–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
- `telegraf` - –¥–ª—è BotAPI (webhook/polling —Ä–µ–∂–∏–º—ã)
- `telegram` (GramJS) - –¥–ª—è MTProto (–æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª)
- `@mtproto/core` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è MTProto –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- `@tgsnake/core` - –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Telegram
- `sqlite3` / `postgres` - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- `pino` / `winston` - –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### 4.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –∞–¥–∞–ø—Ç–µ—Ä - –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
2. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã
3. **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

### 4.3 –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:** –æ–±—Ä–∞–±–æ—Ç–∫–∞ 1000+ —Å–æ–æ–±—â–µ–Ω–∏–π/–º–∏–Ω—É—Ç—É
- **–ó–∞–¥–µ—Ä–∂–∫–∞:** < 100ms –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏—è
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** 99.9% uptime
- **–ü–∞–º—è—Ç—å:** –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ, –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–µ–π

---

## 5. –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

### 5.1 –ö–∞—Ç–∞–ª–æ–≥–∏ –∏ —Ñ–∞–π–ª—ã

```
src/
‚îú‚îÄ‚îÄ üìÇ adapters/                    # –ê–¥–∞–ø—Ç–µ—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ botapi.adapter.ts          # BotAPI –∞–¥–∞–ø—Ç–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ mtproto.adapter.ts         # MTProto –∞–¥–∞–ø—Ç–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ mcp.adapter.ts             # MCP –∞–¥–∞–ø—Ç–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                   # –≠–∫—Å–ø–æ—Ä—Ç –∞–¥–∞–ø—Ç–µ—Ä–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ üìÇ services/                   # –°–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ telegram.service.ts        # –û—Å–Ω–æ–≤–Ω–æ–π Telegram —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ monitoring.service.ts      # –°–µ—Ä–≤–∏—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ analytics.service.ts       # –°–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ
‚îú‚îÄ‚îÄ üìÇ types/                      # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ telegram.types.ts          # –¢–∏–ø—ã –¥–ª—è Telegram
‚îÇ   ‚îú‚îÄ‚îÄ adapter.types.ts           # –¢–∏–ø—ã –¥–ª—è –∞–¥–∞–ø—Ç–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ message.types.ts           # –¢–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ
‚îú‚îÄ‚îÄ üìÇ utils/                      # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ logger.utils.ts            # –õ–æ–≥–≥–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ parser.utils.ts            # –ü–∞—Ä—Å–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ validator.utils.ts         # –í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ
‚îú‚îÄ‚îÄ üìÑ index.ts                    # –ì–ª–∞–≤–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –ø–ª–∞–≥–∏–Ω–∞
‚îî‚îÄ‚îÄ üìÑ plugin.ts                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞
```

### 5.2 –ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

```typescript
// types/telegram.types.ts
interface TelegramMessage {
  chatId: string | number;
  chatTitle?: string;
  sender: string | number;
  messageId: number;
  text?: string;
  timestamp: number;
  metadata?: Record<string, any>;
}

interface TelegramChat {
  id: string | number;
  title: string;
  type: 'group' | 'supergroup' | 'channel' | 'private';
  membersCount?: number;
  isActive: boolean;
  lastMessageAt?: number;
}

interface MonitoringConfig {
  enabled: boolean;
  monitoredChats: (string | number)[];
  filters: {
    keywords?: string[];
    excludeKeywords?: string[];
    onlyFromUsers?: (string | number)[];
  };
}
```

---

## 6. –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –ê–î–ê–ü–¢–ï–†–û–í

### 6.1 BotAPI Adapter

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ Telegram Bot API

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```typescript
class BotAPIAdapter {
  async initialize(config: BotAPIConfig): Promise<void>
  async startPolling(): Promise<void>
  async handleUpdate(update: TelegramUpdate): Promise<void>
  async sendMessage(chatId: string, text: string): Promise<void>
  async getChat(chatId: string): Promise<TelegramChat>
}
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```typescript
interface BotAPIConfig {
  botToken: string;
  pollingTimeout?: number;
  allowedUpdates?: string[];
  webhookUrl?: string;
}
```

### 6.2 MTProto Adapter (GramJS)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ MTProto API —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º GramJS

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ GramJS:**
- üöÄ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - < 250ms –∑–∞–¥–µ—Ä–∂–∫–∞
- üë• **–ü–æ–ª–Ω—ã–π userbot —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª** - –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- üì° **–ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** - –≤–æ –í–°–ï–• –≥—Ä—É–ø–ø–∞—Ö –≥–¥–µ –∞–∫–∫–∞—É–Ω—Ç —É—á–∞—Å—Ç–Ω–∏–∫
- üîß **TypeScript native** - —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- üìö **–ó—Ä–µ–ª–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞** - fork –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Telethon
- üéØ **Rich API** - –¥–æ—Å—Ç—É–ø –∫ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º Telegram
- ‚ö° **Event-driven** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏:**

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞       | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –¢–∏–ø–∏–∑–∞—Ü–∏—è | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏         | –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è |
|------------------|--------------------|-----------|---------------------|--------------|
| **GramJS**       | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (250ms)    | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê  | Userbot + Admin     | Production   |
| @mtproto/core    | ‚≠ê‚≠ê‚≠ê (500ms)      | ‚≠ê‚≠ê‚≠ê     | Userbot             | Dev/Testing  |
| Telegraf (Bot)   | ‚≠ê‚≠ê (1000ms)       | ‚≠ê‚≠ê‚≠ê     | –¢–æ–ª—å–∫–æ Bot API      | Bots only    |

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü–æ–ª–Ω—ã–π userbot —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –í–°–ï–• —Å–æ–æ–±—â–µ–Ω–∏–π –≤–æ –í–°–ï–• –≥—Ä—É–ø–ø–∞—Ö
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å < 250ms
- TypeScript native
- –ó—Ä–µ–ª–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞ (fork Telethon)

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```typescript
class MTProtoAdapter {
  private client: TelegramClient;  // –ò–∑ GramJS
  private session: StringSession;

  async connect(config: ITelegramConfig): Promise<void>
  async joinChat(chatId: string): Promise<void>
  onMessage(handler: (event: NewMessageEvent) => void): void
  offMessage(handler: (event: NewMessageEvent) => void): void
  async getChatHistory(chatId: string, limit?: number): Promise<TelegramMessage[]>
}
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è GramJS:**
```typescript
import { TelegramClient } from "telegram";
import { StringSession } from "telegram/sessions";
import { NewMessage, NewMessageEvent } from "telegram/events";

const session = new StringSession(config.session || "");
const client = new TelegramClient(session, config.apiId, config.apiHash, {
  connectionRetries: 5,
  deviceModel: "Desktop",
  appVersion: "1.0.0",
  systemVersion: "NodeJS",
  langCode: "en",
});

// –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
client.addEventHandler(async (event: NewMessageEvent) => {
  const message = event.message;
  const chat = await message.getChat();
  const sender = await message.getSender();

  console.log(`üí¨ Chat: ${chat.title}, From: ${sender.firstName}`);
}, new NewMessage({}));
```

### 6.3 MCP Adapter

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MCP (Model Context Protocol)

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```typescript
class MCPAdapter {
  async connect(endpoint: string): Promise<void>
  async sendContext(context: TelegramMessage): Promise<void>
  async requestAnalysis(messageId: string): Promise<AnalysisResult>
}
```

---

## 7. –°–ï–†–í–ò–° –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê

### 7.1 –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

```typescript
class MonitoringService {
  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
  startMonitoring(): void
  stopMonitoring(): void
  isMonitoringActive(): boolean

  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–æ–≤
  addChatToMonitor(chatId: string | number): void
  removeChatFromMonitor(chatId: string | number): void
  getMonitoredChats(): TelegramChat[]

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
  processIncomingMessage(message: TelegramMessage): Promise<void>
  shouldProcessMessage(message: TelegramMessage): boolean

  // –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
  getChatStats(chatId: string): ChatStats
  getOverallStats(): OverallStats
}
```

### 7.2 –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

```typescript
interface MessageFilter {
  includeKeywords?: string[];     // –í–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å —ç—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
  excludeKeywords?: string[];     // –ò—Å–∫–ª—é—á–∏—Ç—å —Å —ç—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
  onlyFromUsers?: string[];       // –¢–æ–ª—å–∫–æ –æ—Ç —ç—Ç–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  minMessageLength?: number;      // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞
  maxMessageLength?: number;      // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞
}
```

---

## 8. –õ–û–ì–ò–†–û–í–ê–ù–ò–ï

### 8.1 –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

- **DEBUG** - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–±–æ—Ç–µ
- **INFO** - –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö
- **WARN** - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö
- **ERROR** - –û—à–∏–±–∫–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –≤–Ω–∏–º–∞–Ω–∏—è

### 8.2 –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤

```json
{
  "timestamp": "2025-11-24T12:00:00.000Z",
  "level": "INFO",
  "service": "TelegramService",
  "adapter": "BotAPI",
  "messageId": "12345",
  "chatId": "1165767969",
  "message": "Processing incoming message",
  "metadata": {
    "chatTitle": "–ë–∏—Ä–∂–∞ IT I –£–¥–∞–ª–µ–Ω–∫–∞/–û—Ñ–∏—Å",
    "sender": "7043969066"
  }
}
```

---

## 9. –ë–ê–ó–ê –î–ê–ù–ù–´–•

### 9.1 –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

**–¢–∞–±–ª–∏—Ü–∞: telegram_messages**
```sql
CREATE TABLE telegram_messages (
  id SERIAL PRIMARY KEY,
  chat_id VARCHAR(255) NOT NULL,
  chat_title VARCHAR(255),
  message_id BIGINT NOT NULL,
  sender_id VARCHAR(255) NOT NULL,
  sender_name VARCHAR(255),
  text TEXT,
  timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  metadata JSONB
);
```

**–¢–∞–±–ª–∏—Ü–∞: telegram_chats**
```sql
CREATE TABLE telegram_chats (
  id VARCHAR(255) PRIMARY KEY,
  title VARCHAR(255),
  type VARCHAR(50),
  member_count INTEGER,
  is_monitored BOOLEAN DEFAULT FALSE,
  last_message_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**–¢–∞–±–ª–∏—Ü–∞: analytics**
```sql
CREATE TABLE analytics (
  id SERIAL PRIMARY KEY,
  date DATE NOT NULL,
  chat_id VARCHAR(255) NOT NULL,
  messages_count INTEGER DEFAULT 0,
  unique_users INTEGER DEFAULT 0,
  metadata JSONB
);
```

---

## 10. API –ò–ù–¢–ï–†–§–ï–ô–°–´

### 10.1 –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π API (–¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤)

```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
const telegramService = runtime.getService<TelegramService>('telegram');

// –ú–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞
telegramService.sendMessage(chatId, text);
telegramService.getChatStats(chatId);
telegramService.getMonitoredChats();
telegramService.startMonitoring();
telegramService.stopMonitoring();
```

### 10.2 HTTP API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```typescript
// –°—Ç–∞—Ç—É—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
GET /api/telegram/status
Response: { "monitoring": true, "chatsCount": 5 }

// –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤
GET /api/telegram/chats
Response: { "chats": [...] }

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–∞—Ç–∞
GET /api/telegram/stats/:chatId
Response: { "messages": 100, "users": 10, "period": "24h" }

// –û–±–Ω–æ–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
POST /api/telegram/monitoring
Body: { "enabled": true, "chats": ["123", "456"] }
```

---

## 11. –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### 11.1 –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_API_ID=your_api_id
TELEGRAM_API_HASH=your_api_hash
TELEGRAM_PHONE=your_phone_number
TELEGRAM_SESSION_STRING=your_session_string

# –û–ü–¶–ò–û–ù–ê–õ–¨–ù–´–ï
TELEGRAM_MONITORING_ENABLED=true
TELEGRAM_LOG_LEVEL=info
TELEGRAM_DATABASE_URL=postgresql://user:pass@localhost:5432/telegram
TELEGRAM_MAX_MESSAGES_PER_MINUTE=1000
TELEGRAM_CACHE_TTL=3600
```

### 11.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª

```typescript
// config/telegram.config.ts
export const telegramConfig = {
  adapters: {
    botapi: {
      enabled: true,
      token: process.env.TELEGRAM_BOT_TOKEN,
      pollingTimeout: 50,
      allowedUpdates: ['message', 'edited_message']
    },
    mtproto: {
      enabled: true,
      apiId: parseInt(process.env.TELEGRAM_API_ID || '0'),
      apiHash: process.env.TELEGRAM_API_HASH,
      phoneNumber: process.env.TELEGRAM_PHONE,
      sessionString: process.env.TELEGRAM_SESSION_STRING
    }
  },
  monitoring: {
    enabled: process.env.TELEGRAM_MONITORING_ENABLED === 'true',
    monitoredChats: [], // –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
    filters: {
      minMessageLength: 1,
      maxMessageLength: 4096
    }
  },
  database: {
    url: process.env.TELEGRAM_DATABASE_URL,
    tablePrefix: 'telegram_'
  },
  logging: {
    level: process.env.TELEGRAM_LOG_LEVEL || 'info',
    format: 'json'
  }
};
```

---

## 12. –£–°–¢–ê–ù–û–í–ö–ê –ò –ó–ê–ü–£–°–ö

### 12.1 –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Bun (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
curl -fsSL https://bun.sh/install | bash

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
bun init

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
bun add @elizaos/core
bun add telegraf                # BotAPI (webhook/polling)
bun add telegram                # GramJS (MTProto) - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç
bun add @mtproto/core          # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è MTProto –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
bun add @tgsnake/core          # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Telegram
bun add pg                      # PostgreSQL –¥—Ä–∞–π–≤–µ—Ä
bun add pino                    # –õ–æ–≥–≥–µ—Ä

# Dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
bun add -D typescript @types/node
```

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è Telegram:**

| –ü–∞–∫–µ—Ç            | –í–µ—Ä—Å–∏—è    | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                              |
|-----------------|-----------|------------------------------------------|
| `telegram`      | ^2.26.22  | **GramJS** - –æ—Å–Ω–æ–≤–Ω–∞—è MTProto –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ |
| `telegraf`      | ^4.16.3   | BotAPI –¥–ª—è webhook/polling               |
| `@mtproto/core` | ^6.3.0    | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ MTProto                    |
| `@tgsnake/core` | ^1.13.15  | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏              |

### 12.2 –°–±–æ—Ä–∫–∞

```bash
# –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript
bun run build

# –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ
bun run dev

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
bun test
```

### 12.3 –î–µ–ø–ª–æ–π

```bash
# –°–±–æ—Ä–∫–∞ –¥–ª—è production
NODE_ENV=production bun run build

# –ó–∞–ø—É—Å–∫
bun start
```

---

## 13. –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### 13.1 Unit —Ç–µ—Å—Ç—ã

```typescript
// tests/adapters/botapi.test.ts
describe('BotAPIAdapter', () => {
  it('should initialize successfully', async () => {
    const adapter = new BotAPIAdapter();
    await adapter.initialize({ botToken: 'test_token' });
    expect(adapter.isConnected()).toBe(true);
  });

  it('should handle incoming messages', async () => {
    // –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
  });
});
```

### 13.2 Integration —Ç–µ—Å—Ç—ã

```typescript
// tests/integration/telegram-service.test.ts
describe('TelegramService Integration', () => {
  it('should monitor chat and process messages', async () => {
    // –ü–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  });
});
```

### 13.3 E2E —Ç–µ—Å—Ç—ã

```typescript
// tests/e2e/monitoring-flow.test.ts
describe('Monitoring Flow E2E', () => {
  it('should receive and process real messages', async () => {
    // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Ä–µ–∞–ª—å–Ω—ã–π Telegram
  });
});
```

---

## 14. –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

### 14.1 –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **README.md** - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, —É—Å—Ç–∞–Ω–æ–≤–∫–∞, –∑–∞–ø—É—Å–∫
- **API.md** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ API
- **ARCHITECTURE.md** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- **GUIDES.md** - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- **CHANGELOG.md** - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 14.2 JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

```typescript
/**
 * –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ Telegram
 * @param message - –û–±—ä–µ–∫—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
 * @param adapter - –ê–¥–∞–ø—Ç–µ—Ä, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
 * @returns Promise<void>
 *
 * @example
 * ```typescript
 * const message = {
 *   chatId: "123456",
 *   text: "Hello World",
 *   sender: "987654"
 * };
 * await telegramService.handleIncomingMessage(message, 'botapi');
 * ```
 */
async handleIncomingMessage(
  message: TelegramMessage,
  adapter: string
): Promise<void>
```

---

## 15. –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### 15.1 –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –ù–µ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –≤ –∫–æ–¥–µ
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä—ã (HashiCorp Vault, AWS Secrets Manager)

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
   - –í—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
   - –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π

3. **–ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫:**
   - Rate limiting –¥–ª—è API –≤—ã–∑–æ–≤–æ–≤
   - –ó–∞—â–∏—Ç–∞ –æ—Ç SQL injection (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ORM)
   - –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

4. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:**
   - –®–∏—Ñ—Ä–æ–≤–∞—Ç—å session strings
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTTPS –¥–ª—è webhook
   - –®–∏—Ñ—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ë–î (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 15.2 –ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```typescript
function validateTelegramMessage(message: any): message is TelegramMessage {
  return (
    typeof message === 'object' &&
    typeof message.chatId !== 'undefined' &&
    typeof message.sender !== 'undefined' &&
    typeof message.messageId !== 'undefined' &&
    (!message.text || typeof message.text === 'string')
  );
}
```

---

## 16. –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –ò –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï

### 16.1 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —á–∞—Ç–æ–≤
   - –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
   - TTL –¥–ª—è –∫—ç—à–µ–π

2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è
   - –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ø–æ –¥–∞—Ç–µ
   - –†–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

3. **–û—á–µ—Ä–µ–¥–∏:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥—å –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - BullMQ –∏–ª–∏ Redis Queue
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### 16.2 –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

```typescript
// –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
interface LoadBalancerConfig {
  adapters: {
    botapi: BotAPIInstance[];
    mtproto: MTProtoInstance[];
  };
  healthCheckInterval: number;
  maxFailures: number;
}
```

---

## 17. –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –ê–õ–ï–†–¢–´

### 17.1 –ú–µ—Ç—Ä–∏–∫–∏

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —á–∞—Ç–æ–≤
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤

### 17.2 –ê–ª–µ—Ä—Ç—ã

- –ü–∞–¥–µ–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–∞
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –û—à–∏–±–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–¥–µ—Ä–∂–∫–∏ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ

---

## 18. –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### 18.1 –ë–∞–∑–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```typescript
import { TelegramService } from './services/telegram.service';

const service = new TelegramService();

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
await service.initialize({
  botToken: 'YOUR_BOT_TOKEN',
  apiId: 123456,
  apiHash: 'your_api_hash'
});

// –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
service.startMonitoring();

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
service.on('message', (message) => {
  console.log('–ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:', message.text);
});
```

### 18.2 –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

```typescript
const monitoringConfig: MonitoringConfig = {
  enabled: true,
  monitoredChats: ['123456789', '-987654321'],
  filters: {
    keywords: ['–≤–∞–∂–Ω–æ', 'urgent'],
    excludeKeywords: ['—Å–ø–∞–º'],
    minMessageLength: 10
  }
};

service.configureMonitoring(monitoringConfig);
```

---

## 19. ROADMAP –ò –†–ê–ó–í–ò–¢–ò–ï

### 19.1 –í–µ—Ä—Å–∏—è 1.0 (–¢–µ–∫—É—â–∞—è)
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ BotAPI, MTProto, MCP –∞–¥–∞–ø—Ç–µ—Ä—ã
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 19.2 –í–µ—Ä—Å–∏—è 1.1 (–ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è)
- [ ] WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 19.3 –í–µ—Ä—Å–∏—è 1.2 (–ë—É–¥—É—â–∞—è)
- [ ] ML –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- [ ] –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å

---

## 20. –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–î–∞–Ω–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Telegram-–±–æ—Ç–∞–º–∏. –°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å.

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤
- ‚úÖ –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã:**
1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ TypeScript
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 12.1
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 5.1
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–∞–∑–¥–µ–ª–æ–≤ 7-10
5. –°–ª–µ–¥—É–π—Ç–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 15

---

**¬© 2025 Telegram Monitoring System**