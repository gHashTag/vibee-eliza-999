# –û—Ç—á–µ—Ç –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é Chat —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –¢–µ—Å—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç (3 –∏–∑ 8):
- ‚úÖ **should show error when trying to train without photos** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ–±—É—á–µ–Ω–∏—è –±–µ–∑ —Ñ–æ—Ç–æ
- ‚úÖ **should show error when generating without prompt** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–µ–∑ –ø—Ä–æ–º–ø—Ç–∞
- ‚úÖ **should show help message for unknown commands** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø—Ä–∞–≤–∫—É –ø–æ –∫–æ–º–∞–Ω–¥–∞–º

### 2. Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- ‚úÖ –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —á–∞—Ç –Ω–∞ –±–∞–∑–µ ai-elements
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Conversation, Message, PromptInput
- ‚úÖ Data-testid –∞—Ç—Ä–∏–±—É—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ FullScreen –¥–∏–∑–∞–π–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ (356.35 kB, 113.61 kB gzip)

### 3. Backend:
- ‚úÖ API –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
- ‚úÖ Endpoint /api/health –¥–æ—Å—Ç—É–ø–µ–Ω

### 4. Cypress:
- ‚úÖ GUI –∏ CLI —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –í–∏–¥–µ–æ–∑–∞–ø–∏—Å—å –≤–∫–ª—é—á–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°–∫—Ä–∏–Ω—à–æ—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–æ–∑–¥–∞—é—Ç—Å—è

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã

### 1. –¢–µ—Å—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –ø–∞–¥–∞—é—Ç (5 –∏–∑ 8):
1. **avatar-flow.cy.ts** - —ç–ª–µ–º–µ–Ω—Ç `[data-testid="chat-textarea"]` –Ω–µ –Ω–∞–π–¥–µ–Ω
2. **should complete full workflow** - —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ–≤–∏–¥–∏–º—ã (display: none)
3. **should ask for model name when not provided** - —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ–≤–∏–¥–∏–º—ã (display: none)
4. **should show pending files indicator in empty state** - —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ–≤–∏–¥–∏–º—ã (display: none)
5. **should update placeholder based on state** - —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ–≤–∏–¥–∏–º—ã (display: none)

### 2. –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
–≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã —á–∞—Ç–∞ (textarea, button, input[type=file]) –Ω–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –∏–ª–∏ —Å–∫—Ä—ã—Ç—ã.

### 3. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ai-elements —Ç—Ä–µ–±—É—é—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞/–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- PromptInput –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ PromptInputProvider
- –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å CSS –∫–ª–∞—Å—Å–∞–º–∏ (display: none)
- –ù–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã

## üîß –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã data-testid –∞—Ç—Ä–∏–±—É—Ç—ã:
   - `chat-textarea` - –¥–ª—è textarea
   - `chat-submit-button` - –¥–ª—è –∫–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
   - `chat-file-input` - –¥–ª—è input[type=file]

2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –≤ —Ç–µ—Å—Ç–∞—Ö:
   - –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `cy.get('textarea')` –Ω–∞ `cy.getByTestId('chat-textarea')`
   - –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `cy.get('button[type="submit"]')` –Ω–∞ `cy.getByTestId('chat-submit-button')`
   - –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `cy.get('input[type="file"]')` –Ω–∞ `cy.getByTestId('chat-file-input')`

3. ‚úÖ –£–±—Ä–∞–Ω PromptInputProvider –∏–∑ ChatPage.tsx (–º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥)

4. ‚úÖ –ü–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –ø—Ä–æ–µ–∫—Ç - —Å–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–°–±–æ—Ä–∫–∞:** ‚úÖ –£—Å–ø–µ—à–Ω–∞
- **Backend:** ‚úÖ –ó–∞–ø—É—â–µ–Ω (–ø–æ—Ä—Ç 3001)
- **Frontend:** ‚úÖ –ó–∞–ø—É—â–µ–Ω (–ø–æ—Ä—Ç 5175)
- **Cypress:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- **–í–∏–¥–µ–æ–∑–∞–ø–∏—Å—å:** ‚úÖ –í–∫–ª—é—á–µ–Ω–∞
- **–¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç:** 3/8 (37.5%)
- **–¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç:** 5/8 (62.5%)

## üé¨ –í–∏–¥–µ–æ–∑–∞–ø–∏—Å—å —Ç–µ—Å—Ç–æ–≤

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ `npm run cy:run` —Å–æ–∑–¥–∞—é—Ç—Å—è –≤–∏–¥–µ–æ—Ñ–∞–π–ª—ã:
- `cypress/videos/avatar-flow.cy.ts.mp4` - 1.7 MB
- `cypress/videos/chat-workflow.cy.ts.mp4` - 5.4 MB

## üìù –°–∫—Ä–∏–Ω—à–æ—Ç—ã –æ—à–∏–±–æ–∫

–ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–∫—Ä–∏–Ω—à–æ—Ç—ã (~300KB –∫–∞–∂–¥—ã–π):
- `cypress/screenshots/.../[test-name].png`

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É PromptInput –±–µ–∑ Provider
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ai-elements –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã

2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–≤–∏–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CSS —Å—Ç–∏–ª–∏
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –≤ DOM

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –û—Ç–∫—Ä—ã—Ç—å http://localhost:5175/chat –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä—É—á–Ω—É—é —Ä–∞–±–æ—Ç—É —á–∞—Ç–∞
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã

4. **–û—Ç–ª–∞–¥–∏—Ç—å API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é**
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ backend endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å /api/upload-photos, /api/train, /api/neurophoto

## üí° –í—ã–≤–æ–¥—ã

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ**, –Ω–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –∏–ª–∏ –≤–∏–¥–∏–º–æ—Å—Ç—å—é —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ñ–æ—Ä–º—ã —á–∞—Ç–∞. –í–æ–∑–º–æ–∂–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ai-elements –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PromptInputProvider —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π.

**–í–∏–¥–µ–æ–∑–∞–ø–∏—Å—å —Ä–∞–±–æ—Ç–∞–µ—Ç** - –º–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫ –≤–µ–¥—É—Ç —Å–µ–±—è —Ç–µ—Å—Ç—ã –∏ –≥–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–±–æ–π.
