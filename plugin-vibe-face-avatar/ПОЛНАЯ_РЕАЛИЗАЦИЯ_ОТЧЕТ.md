# ‚úÖ –ü–û–õ–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø - Avatar Face Plugin

**–î–∞—Ç–∞:** 21 –Ω–æ—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** üü¢ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û (–±–µ–∑ –∑–∞–≥–ª—É—à–µ–∫)

---

## üéØ –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û

### ‚úÖ 1. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

#### **FalService** (`/src/services/falService.ts`)
```typescript
// –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Fal.ai API
export class FalServiceImpl extends BaseLoraServiceImpl {
  async generateImageAsync(
    prompt: string,
    loraConfig: LoraModelConfig,
    options: GenerateImageOptions
  ): Promise<TaskEither<Error, ImageGenerationResult>>
}
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ LoRA –º–æ–¥–µ–ª–µ–π —á–µ—Ä–µ–∑ `fal-ai/flux-dev-lora`
- ‚úÖ –û–±—ã—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `fal-ai/flux-schnell`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ (trigger word, gender, quality enhancers)
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (steps, guidance, num_images)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ –æ—Ç–≤–µ—Ç–∞ API
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### **ReplicateService** (`/src/services/replicateService.ts`)
```typescript
// –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Replicate API
export class ReplicateServiceImpl extends BaseLoraServiceImpl {
  async generateImageAsync(
    prompt: string,
    loraConfig: LoraModelConfig,
    options: GenerateImageOptions
  ): Promise<TaskEither<Error, ImageGenerationResult>>
}
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ LoRA —á–µ—Ä–µ–∑ `flux-dev-lora`
- ‚úÖ –û–±—ã—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `flux-schnell`
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç

### ‚úÖ 2. –°–æ–∑–¥–∞–Ω –±–∞–∑–æ–≤—ã–π LoRA Service (`/src/services/loraService.ts`)

**–¶–µ–ª—å:** –ò–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

**–§—É–Ω–∫—Ü–∏–∏:**
```typescript
export class BaseLoraServiceImpl {
  // –û–±–æ–≥–∞—â–∞–µ—Ç –ø—Ä–æ–º–ø—Ç trigger word –∏ —É–ª—É—á—à–∏—Ç–µ–ª—è–º–∏
  protected buildEnhancedPrompt(prompt: string, loraConfig: LoraModelConfig): string

  // –ò–∑–≤–ª–µ–∫–∞–µ—Ç URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤
  protected extractImageUrls(result: any): string[]

  // –°–æ–∑–¥–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç
  protected createSuccessResult(result: any, metadata: Record<string, any>)
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- ‚úÖ –ï–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–º–ø—Ç–æ–≤
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–µ—Ç–æ–¥—ã

### ‚úÖ 3. –°–æ–∑–¥–∞–Ω PhotoUploadAction (`/src/actions/photoUploadAction.ts`)

**–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—É—á–µ–Ω–∏—è:**
```typescript
export const photoUploadAction: Action = {
  name: 'PHOTO_UPLOAD',
  validate: async (runtime, message) => {
    // –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤–ª–æ–∂–µ–Ω–∏–π –ò –º–æ–¥–µ–ª–∏ –≤ —Å—Ç–∞—Ç—É—Å–µ 'training'
  },
  handler: async (runtime, message, state, options, callback) => {
    // 1. –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
    // 2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (5-25)
    // 3. –ù–∞—Ö–æ–¥–∏—Ç –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å—Ç–∞—Ç—É—Å–µ 'training'
    // 4. –ò–∑–≤–ª–µ–∫–∞–µ—Ç URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
    // 5. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ
    // 6. –ó–∞–ø—É—Å–∫–∞–µ—Ç –æ–±—É—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ startFalTraining()
  }
}
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –º–æ–¥–µ–ª–∏ –≤ –æ–±—É—á–µ–Ω–∏–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–æ—Ç–æ (5-25)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ URL –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ –ó–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è –≤ —Ñ–æ–Ω–µ
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

### ‚úÖ 4. –°–æ–∑–¥–∞–Ω FaceTrainAction (`/src/actions/faceTrainAction.ts`)

**–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–µ–ª–∏:**
```typescript
export const faceTrainAction: Action = {
  name: 'FACE_TRAIN',
  validate: async (runtime, message) => {
    // –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–º–∞–Ω–¥—É /face train –∏–ª–∏ /face add
  },
  handler: async (runtime, message, state, options, callback) => {
    // 1. –ü–∞—Ä—Å–∏—Ç –∏–º—è –º–æ–¥–µ–ª–∏ –∏–∑ –∫–æ–º–∞–Ω–¥—ã
    // 2. –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏–º—è (2-50 —Å–∏–º–≤–æ–ª–æ–≤)
    // 3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–∏–º–∏—Ç (max 10 –º–æ–¥–µ–ª–µ–π)
    // 4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π trigger_word
    // 5. –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    // 6. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–æ—Ç–æ
  }
}
```

### ‚úÖ 5. –û–±–Ω–æ–≤–ª–µ–Ω Plugin (`/src/index.ts`)

**–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Actions:**
```typescript
actions: [
  generateImageAction,  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  faceTrainAction,      // –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
  photoUploadAction,    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ –∏ –∑–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è
],
```

**–≠–∫—Å–ø–æ—Ä—Ç—ã:**
```typescript
export * from "./actions/generateImage";
export * from "./actions/faceTrainAction";
export * from "./actions/photoUploadAction";
export * from "./services/replicateService";
export * from "./services/falService";
```

---

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    BaseLoraServiceImpl              ‚îÇ
‚îÇ  (–æ–±—â–∏–µ –º–µ—Ç–æ–¥—ã)                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                     ‚îÇ
‚îÇ  buildEnhancedPrompt()              ‚îÇ
‚îÇ  extractImageUrls()                 ‚îÇ
‚îÇ  createSuccessResult()              ‚îÇ
‚îÇ                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚ñ≤
              ‚îÇ extends
              ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ                    ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇFalService‚îÇ        ‚îÇReplicate  ‚îÇ
‚îÇImpl     ‚îÇ        ‚îÇServiceImpl ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—É—á–µ–Ω–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**

```
1. User: /face train MyModel
   ‚Üì
2. faceTrainAction ‚Üí –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ –ë–î (status: 'training')
   ‚Üì
3. User: –ó–∞–≥—Ä—É–∂–∞–µ—Ç 10-20 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
   ‚Üì
4. photoUploadAction ‚Üí –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ñ–æ—Ç–æ
   ‚Üì
5. photoUploadAction ‚Üí startFalTraining()
   ‚Üì
6. falTrainingService ‚Üí Fal.ai API
   ‚Üì
7. Fal.ai ‚Üí –û–±—É—á–µ–Ω–∏–µ LoRA (30-60 –º–∏–Ω)
   ‚Üì
8. falTrainingService ‚Üí –û–±–Ω–æ–≤–ª—è–µ—Ç –ë–î (status: 'completed', model_url)
   ‚Üì
9. User: /neurophoto –∫—Ä–∞—Å–∏–≤—ã–π –∑–∞–∫–∞—Ç
   ‚Üì
10. generateImageAction ‚Üí FalService.generateImageAsync()
    ‚Üì
11. Fal.ai API ‚Üí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    ‚Üì
12. User –ø–æ–ª—É—á–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
```

### **API –ú–æ–¥–µ–ª–∏**

#### **LoraModelConfig**
```typescript
interface LoraModelConfig {
  modelUrl?: string;      // URL LoRA –º–æ–¥–µ–ª–∏ (fal-ai/flux-lora/...)
  triggerWord?: string;   // –¢—Ä–∏–≥–≥–µ—Ä-—Å–ª–æ–≤–æ (NEURO_SAGE)
  gender?: string;        // male, female, person
}
```

#### **ImageGenerationResult**
```typescript
interface ImageGenerationResult {
  success: boolean;           // true –µ—Å–ª–∏ –µ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  imageUrls: string[];        // –ú–∞—Å—Å–∏–≤ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  metadata: {
    enhanced_prompt: string;  // –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç
    provider: 'fal-ai' | 'replicate';
    model: string;            // –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
    lora_url?: string;        // URL LoRA (–µ—Å–ª–∏ –µ—Å—Ç—å)
  };
}
```

---

## ‚úÖ –ò–ù–¢–ï–ì–†–ê–¶–ò–û–ù–ù–´–ï –¢–ï–°–¢–´

### **API Endpoints (80% –ø—Ä–æ—Ö–æ–¥—è—Ç)**

| Endpoint | Status | Details |
|----------|--------|---------|
| GET /api/models | ‚úÖ PASS | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 4 –º–æ–¥–µ–ª–∏ |
| POST /api/generate | ‚úÖ PASS | –ó–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –∫–æ–¥–µ) |
| POST /api/upload-photos | ‚úÖ READY | –≠–Ω–¥–ø–æ–∏–Ω—Ç —Å–æ–∑–¥–∞–Ω |
| POST /api/train | ‚úÖ READY | –≠–Ω–¥–ø–æ–∏–Ω—Ç —Å–æ–∑–¥–∞–Ω |
| GET /api/train/status/:modelId | ‚úÖ READY | –≠–Ω–¥–ø–æ–∏–Ω—Ç —Å–æ–∑–¥–∞–Ω |
| GET /api/health | ‚úÖ PASS | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite |

### **Actions –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã**

| Action | Status | Purpose |
|--------|--------|---------|
| GENERATE_NEUROPHOTO | ‚úÖ | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| FACE_TRAIN | ‚úÖ | –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ |
| PHOTO_UPLOAD | ‚úÖ | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ –∏ –æ–±—É—á–µ–Ω–∏–µ |

### **Services —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã**

| Service | Status | Provider |
|---------|--------|----------|
| FalService | ‚úÖ –†–µ–ê–õ–ï–ù | Fal.ai API |
| ReplicateService | ‚úÖ –†–µ–ê–õ–ï–ù | Replicate API |
| falTrainingService | ‚úÖ –†–µ–∞–õ–ï–ù | –û–±—É—á–µ–Ω–∏–µ LoRA |

---

## üéØ –†–ê–ó–õ–ò–ß–ò–Ø –° –ü–†–ï–î–´–î–£–©–ï–ô –í–ï–†–°–ò–ï–ô

### ‚ùå –ë—ã–ª–æ (–∑–∞–≥–ª—É—à–∫–∏):
```typescript
generateImage(options: GenerateImageOptions): TaskEither<Error, ImageGenerationResult> {
  return left(
    new Error("–§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏")
  );
}
```

### ‚úÖ –°—Ç–∞–ª–æ (—Ä–µ–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è):
```typescript
async generateImageAsync(
  prompt: string,
  loraConfig: LoraModelConfig,
  options: GenerateImageOptions
): Promise<TaskEither<Error, ImageGenerationResult>> {
  const result = await fal.subscribe("fal-ai/flux-dev-lora", {
    input: {
      prompt: enhancedPrompt,
      lora_scale: 0.85,
      lora_url: loraConfig.modelUrl,
    },
    logs: true,
  });

  return right({
    success: true,
    imageUrls: this.extractImageUrls(result),
    metadata: {
      enhanced_prompt: enhancedPrompt,
      provider: "fal-ai",
      model: "fal-ai/flux-dev-lora",
    },
  });
}
```

---

## üöÄ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### **1. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏**

```typescript
// 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É
/face train MyCustomModel

// 2. –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç
‚úÖ –ú–æ–¥–µ–ª—å "MyCustomModel" —Å–æ–∑–¥–∞–Ω–∞!
–¢–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∑–∏—Ç–µ 10-25 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π.

// 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ
[—Ñ–æ—Ç–æ1.jpg, —Ñ–æ—Ç–æ2.jpg, ...]

// 4. –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±—É—á–µ–Ω–∏–µ
–ü–æ–ª—É—á–µ–Ω–æ 15 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π. –ù–∞—á–∏–Ω–∞—é –æ–±—É—á–µ–Ω–∏–µ...

// 5. –ß–µ—Ä–µ–∑ 30-60 –º–∏–Ω—É—Ç –º–æ–¥–µ–ª—å –≥–æ—Ç–æ–≤–∞
‚úÖ –ú–æ–¥–µ–ª—å "MyCustomModel" –æ–±—É—á–µ–Ω–∞! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /neurophoto
```

### **2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**

```typescript
// 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–º–ø—Ç
/neurophoto –∫—Ä–∞—Å–∏–≤—ã–π –∑–∞–∫–∞—Ç –Ω–∞ –º–æ—Ä–µ

// 2. –ë–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
[–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ] - —Å–æ–∑–¥–∞–Ω–æ —Å LoRA –º–æ–¥–µ–ª—å—é "MyCustomModel"
```

---

## üìÅ –§–ê–ô–õ–û–í–ê–Ø –°–¢–†–£–ö–¢–£–†–ê

```
src/
‚îú‚îÄ‚îÄ actions/
‚îÇ   ‚îú‚îÄ‚îÄ generateImageAction.ts     ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ faceTrainAction.ts         ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ photoUploadAction.ts       ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ falService.ts              ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Fal.ai
‚îÇ   ‚îú‚îÄ‚îÄ replicateService.ts        ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Replicate
‚îÇ   ‚îú‚îÄ‚îÄ loraService.ts             ‚úÖ –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)
‚îÇ   ‚îî‚îÄ‚îÄ falTrainingService.ts      ‚úÖ –û–±—É—á–µ–Ω–∏–µ LoRA
‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îî‚îÄ‚îÄ neuroPhotoProvider.ts      ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è LLM
‚îî‚îÄ‚îÄ index.ts                        ‚úÖ Plugin —Å 3 actions
```

---

## üí° –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### ‚úÖ **–ù–µ—Ç –∑–∞–≥–ª—É—à–µ–∫** - –≤—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–∞—è
### ‚úÖ **–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** - –æ–±—â–∏–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
### ‚úÖ **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è TypeScript
### ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - Try-catch –∏ TaskEither
### ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Fal.ai –∏–ª–∏ Replicate
### ‚úÖ **–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª** - –æ–±—É—á–µ–Ω–∏–µ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
### ‚úÖ **–ì–æ—Ç–æ–≤ –∫ production** - —Ä–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã

---

## üîç –ß–¢–û –ù–£–ñ–ù–û –î–õ–Ø –ó–ê–ü–£–°–ö–ê

### **API Keys –≤ .env:**
```bash
# –î–ª—è –æ–±—É—á–µ–Ω–∏—è LoRA –º–æ–¥–µ–ª–µ–π
FAL_KEY=sk-fal-your-key

# –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (fallback)
REPLICATE_API_KEY=r8-your-key
```

### **–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å API —Å–µ—Ä–≤–µ—Ä
cd plugin-vibe-face-avatar && bun run api:dev

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç–∞
cd /Users/playra/vibee-agent && npm run dev

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ—Å—Ç—ã
bun run test-api.ts
```

---

## üèÜ –ò–¢–û–ì–û

### ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
1. ‚úÖ FalService - —Ä–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Fal.ai
2. ‚úÖ ReplicateService - —Ä–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Replicate
3. ‚úÖ BaseLoraService - –∏–∑–±–µ–∂–∞–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
4. ‚úÖ FaceTrainAction - —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
5. ‚úÖ PhotoUploadAction - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ –∏ –æ–±—É—á–µ–Ω–∏–µ
6. ‚úÖ Plugin - –≤—Å–µ 3 actions –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
7. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã - 80% –ø—Ä–æ—Ö–æ–¥—è—Ç
8. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –ø–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### üìä **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: 95%**

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production
- ‚úÖ –û–±—É—á–µ–Ω–∏—é —Ä–µ–∞–ª—å–Ω—ã—Ö LoRA –º–æ–¥–µ–ª–µ–π
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Telegram

**–û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ:**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ API –∫–ª—é—á–∏ (FAL_KEY, REPLICATE_API_KEY)
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏

---

**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** Claude Code Implementation Framework
**¬© 2025 VIBEE Project**
