bun test v1.3.2 (b131639c)

__tests__/index.test.ts:
‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã Instagram –ø–ª–∞–≥–∏–Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
10 |   it('–¥–æ–ª–∂–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ —Ç–µ–∫—Å—Ç–∞', () => {
11 |     const text = '–û–ø—É–±–ª–∏–∫—É–π –ø–æ—Å—Ç –≤ Instagram —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º https://example.com/image.jpg –∏ –ø–æ–¥–ø–∏—Å—å—é –∫—Ä–∞—Å–∏–≤—ã–π –∑–∞–∫–∞—Ç';
12 |     const result = parseInstagramPost(text);
13 | 
14 |     expect(result.imageUrl).toBe('https://example.com/image.jpg');
15 |     expect(result.caption).toBe('–∫—Ä–∞—Å–∏–≤—ã–π –∑–∞–∫–∞—Ç');
                                ^
error: expect(received).toBe(expected)

Expected: "–∫—Ä–∞—Å–∏–≤—ã–π –∑–∞–∫–∞—Ç"
Received: "–û–ø—É–±–ª–∏–∫—É–π –ø–æ—Å—Ç –≤ Instagram —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏ –ø–æ–¥–ø–∏—Å—å—é –∫—Ä–∞—Å–∏–≤—ã–π –∑–∞–∫–∞—Ç"

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/unit/parseInstagramPost.test.ts:15:28)
(fail) parseInstagramPost - –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π Instagram > –¥–æ–ª–∂–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ —Ç–µ–∫—Å—Ç–∞ [0.43ms]
34 | 
35 |   it('–¥–æ–ª–∂–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å —Ö—ç—à—Ç–µ–≥–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞', () => {
36 |     const text = '–ü–æ—Å—Ç —Å #—Ç–µ–≥–æ–º –∏ #–¥—Ä—É–≥–∏–º #—Ö—ç—à—Ç–µ–≥–æ–º';
37 |     const result = parseInstagramPost(text);
38 | 
39 |     expect(result.hashtags).toContain('—Ç–µ–≥');
                                 ^
error: expect(received).toContain(expected)

Expected to contain: "—Ç–µ–≥"
Received: []

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/unit/parseInstagramPost.test.ts:39:29)
(fail) parseInstagramPost - –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π Instagram > –¥–æ–ª–∂–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å —Ö—ç—à—Ç–µ–≥–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞ [0.19ms]
51 |   it('–¥–æ–ª–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –∫–æ–º–∞–Ω–¥—É "–æ–ø—É–±–ª–∏–∫—É–π"', () => {
52 |     const text = '–û–ø—É–±–ª–∏–∫—É–π –ø–æ—Å—Ç –≤ Instagram —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º https://example.com/image.jpg –∏ –ø–æ–¥–ø–∏—Å—å—é —Ç–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å';
53 |     const result = parseInstagramPost(text);
54 | 
55 |     expect(result.imageUrl).toBe('https://example.com/image.jpg');
56 |     expect(result.caption).toBe('—Ç–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å');
                                ^
error: expect(received).toBe(expected)

Expected: "—Ç–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å"
Received: "–û–ø—É–±–ª–∏–∫—É–π –ø–æ—Å—Ç –≤ Instagram —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏ –ø–æ–¥–ø–∏—Å—å—é —Ç–µ—Å—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å"

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/unit/parseInstagramPost.test.ts:56:28)
(fail) parseInstagramPost - –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π Instagram > –¥–æ–ª–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –∫–æ–º–∞–Ω–¥—É "–æ–ø—É–±–ª–∏–∫—É–π" [0.06ms]
61 |   it('–¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–º–∞–Ω–¥–æ–π "/instagram"', () => {
62 |     const text = '/instagram –ø–æ—Å—Ç —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π https://example.com/image.jpg –∏ —Ç–µ–∫—Å—Ç–æ–º –ø—Ä–∏–≤–µ—Ç –º–∏—Ä';
63 |     const result = parseInstagramPost(text);
64 | 
65 |     expect(result.imageUrl).toBe('https://example.com/image.jpg');
66 |     expect(result.caption).toBe('–ø—Ä–∏–≤–µ—Ç –º–∏—Ä');
                                ^
error: expect(received).toBe(expected)

Expected: "–ø—Ä–∏–≤–µ—Ç –º–∏—Ä"
Received: "/instagram –ø–æ—Å—Ç —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π –∏ —Ç–µ–∫—Å—Ç–æ–º –ø—Ä–∏–≤–µ—Ç –º–∏—Ä"

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/unit/parseInstagramPost.test.ts:66:28)
(fail) parseInstagramPost - –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π Instagram > –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–º–∞–Ω–¥–æ–π "/instagram" [0.06ms]
78 |   });
79 | 
80 |   it('–¥–æ–ª–∂–Ω–æ –±—Ä–æ—Å–∞—Ç—å –æ—à–∏–±–∫—É –µ—Å–ª–∏ –Ω–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è', () => {
81 |     const text = '–û–ø—É–±–ª–∏–∫—É–π –ø–æ—Å—Ç –≤ Instagram';
82 | 
83 |     expect(() => parseInstagramPost(text)).toThrow('–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ —Ñ–∞–π–ª –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Ç–µ–∫—Å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è');
                                                ^
error: expect(received).toThrow(expected)

Expected substring: "–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ —Ñ–∞–π–ª –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Ç–µ–∫—Å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è"

Received function did not throw
Received value: {
  caption: "–û–ø—É–±–ª–∏–∫—É–π –ø–æ—Å—Ç –≤ Instagram",
  imageUrl: "",
  mediaType: "IMAGE",
  hashtags: [],
}

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/unit/parseInstagramPost.test.ts:83:44)
(fail) parseInstagramPost - –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π Instagram > –¥–æ–ª–∂–Ω–æ –±—Ä–æ—Å–∞—Ç—å –æ—à–∏–±–∫—É –µ—Å–ª–∏ –Ω–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è [0.08ms]
114 |   it('–¥–æ–ª–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–ª–∏–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∏', () => {
115 |     const longCaption = '–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram'.repeat(10);
116 |     const text = `–û–ø—É–±–ª–∏–∫—É–π –ø–æ—Å—Ç https://example.com/image.jpg –∏ –ø–æ–¥–ø–∏—Å—å—é ${longCaption}`;
117 |     const result = parseInstagramPost(text);
118 | 
119 |     expect(result.caption).toBe(longCaption);
                                 ^
error: expect(received).toBe(expected)

Expected: "–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram"
Received: "–û–ø—É–±–ª–∏–∫—É–π –ø–æ—Å—Ç –∏ –ø–æ–¥–ø–∏—Å—å—é –≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø–æ—Å—Ç–∞ –≤ Instagram"

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/unit/parseInstagramPost.test.ts:119:28)
(fail) parseInstagramPost - –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π Instagram > –¥–æ–ª–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–ª–∏–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∏ [0.16ms]
122 | 
123 |   it('–¥–æ–ª–∂–Ω–æ –æ—á–∏—â–∞—Ç—å –ø–æ–¥–ø–∏—Å—å –æ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤', () => {
124 |     const text = '  –û–ø—É–±–ª–∏–∫—É–π    –ø–æ—Å—Ç   —Å –ø–æ–¥–ø–∏—Å—å—é   —Ç–µ—Å—Ç   ';
125 |     const result = parseInstagramPost(text, [createImageAttachment('https://example.com/img.jpg')]);
126 | 
127 |     expect(result.caption).toBe('—Ç–µ—Å—Ç');
                                 ^
error: expect(received).toBe(expected)

Expected: "—Ç–µ—Å—Ç"
Received: "–û–ø—É–±–ª–∏–∫—É–π –ø–æ—Å—Ç —Å –ø–æ–¥–ø–∏—Å—å—é —Ç–µ—Å—Ç"

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/unit/parseInstagramPost.test.ts:127:28)
(fail) parseInstagramPost - –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π Instagram > –¥–æ–ª–∂–Ω–æ –æ—á–∏—â–∞—Ç—å –ø–æ–¥–ø–∏—Å—å –æ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤ [0.12ms]
23 |         json: async () => ({ data: { id: '17841401201538156' } }),
24 |       };
25 | 
26 |       mockFetch.mockResolvedValue(mockResponse as any);
27 | 
28 |       const result = await service.validateToken('valid_token');
                                        ^
TypeError: service.validateToken is not a function. (In 'service.validateToken("valid_token")', 'service.validateToken' is undefined)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:28:36)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:20:55)
(fail) InstagramAPIService - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã > validateToken > –¥–æ–ª–∂–Ω–æ —É—Å–ø–µ—à–Ω–æ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω [0.23ms]
41 |         json: async () => ({ error: { message: 'Invalid token' } }),
42 |       };
43 | 
44 |       mockFetch.mockResolvedValue(mockResponse as any);
45 | 
46 |       const result = await service.validateToken('invalid_token');
                                        ^
TypeError: service.validateToken is not a function. (In 'service.validateToken("invalid_token")', 'service.validateToken' is undefined)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:46:36)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:37:57)
(fail) InstagramAPIService - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã > validateToken > –¥–æ–ª–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å false –¥–ª—è –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ [0.08ms]
49 |     });
50 | 
51 |     it('–¥–æ–ª–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏', async () => {
52 |       mockFetch.mockRejectedValue(new Error('Network error'));
53 | 
54 |       const result = await service.validateToken('test_token');
                                        ^
TypeError: service.validateToken is not a function. (In 'service.validateToken("test_token")', 'service.validateToken' is undefined)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:54:36)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:51:45)
(fail) InstagramAPIService - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã > validateToken > –¥–æ–ª–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏ [0.07ms]
‚ùå –û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Instagram: 47 |    * –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞ –≤ Instagram
48 |    */
49 |   async publishPost(post: InstagramPost): Promise<any> {
50 |     try {
51 |         if (!this.accessToken || !this.instagramAccountId) {
52 |           throw new Error('Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
                     ^
error: Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:52:17)
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:49:21)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:75:36)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:61:60)

47 |    * –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞ –≤ Instagram
48 |    */
49 |   async publishPost(post: InstagramPost): Promise<any> {
50 |     try {
51 |         if (!this.accessToken || !this.instagramAccountId) {
52 |           throw new Error('Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
                     ^
error: Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:52:17)
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:49:21)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:75:36)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:61:60)
(fail) InstagramAPIService - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã > publishPost > –¥–æ–ª–∂–Ω–æ —É—Å–ø–µ—à–Ω–æ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç —Å URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è [0.43ms]
‚ùå –û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Instagram: 47 |    * –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞ –≤ Instagram
48 |    */
49 |   async publishPost(post: InstagramPost): Promise<any> {
50 |     try {
51 |         if (!this.accessToken || !this.instagramAccountId) {
52 |           throw new Error('Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
                     ^
error: Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:52:17)
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:49:21)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:100:28)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:87:41)

 95 |         ok: false,
 96 |         status: 400,
 97 |         json: async () => ({ error: { message: 'Invalid image URL' } }),
 98 |       });
 99 | 
100 |       await expect(service.publishPost(postData)).rejects.toThrow('Invalid image URL');
                                                                ^
error: expect(received).toThrow(expected)

Expected substring: "Invalid image URL"
Received message: "Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã"

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:100:59)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:87:41)
(fail) InstagramAPIService - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã > publishPost > –¥–æ–ª–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ API [0.11ms]
‚ùå –û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Instagram: 47 |    * –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞ –≤ Instagram
48 |    */
49 |   async publishPost(post: InstagramPost): Promise<any> {
50 |     try {
51 |         if (!this.accessToken || !this.instagramAccountId) {
52 |           throw new Error('Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
                     ^
error: Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:52:17)
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:49:21)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:117:21)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:103:45)

47 |    * –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞ –≤ Instagram
48 |    */
49 |   async publishPost(post: InstagramPost): Promise<any> {
50 |     try {
51 |         if (!this.accessToken || !this.instagramAccountId) {
52 |           throw new Error('Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
                     ^
error: Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:52:17)
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:49:21)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:117:21)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:103:45)
(fail) InstagramAPIService - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã > publishPost > –¥–æ–ª–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ö—ç—à—Ç–µ–≥–∏ –∫ –ø–æ–¥–ø–∏—Å–∏ [0.09ms]
‚ùå –û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Instagram: 47 |    * –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞ –≤ Instagram
48 |    */
49 |   async publishPost(post: InstagramPost): Promise<any> {
50 |     try {
51 |         if (!this.accessToken || !this.instagramAccountId) {
52 |           throw new Error('Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
                     ^
error: Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:52:17)
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:49:21)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:133:28)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:126:48)

‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫: 143 |    * –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø–æ—Å—Ç–∞
144 |    */
145 |   async getMetrics(metrics: InstagramMetrics): Promise<any> {
146 |     try {
147 |       if (!this.accessToken) {
148 |         throw new Error('Instagram API —Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω');
                    ^
error: Instagram API —Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
      at getMetrics (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:148:15)
      at getMetrics (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:145:20)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:153:36)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:138:40)

143 |    * –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø–æ—Å—Ç–∞
144 |    */
145 |   async getMetrics(metrics: InstagramMetrics): Promise<any> {
146 |     try {
147 |       if (!this.accessToken) {
148 |         throw new Error('Instagram API —Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω');
                    ^
error: Instagram API —Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
      at getMetrics (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:148:15)
      at getMetrics (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:145:20)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:153:36)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:138:40)
(fail) InstagramAPIService - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã > getMetrics > –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø–æ—Å—Ç–∞ [0.26ms]
‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫: 143 |    * –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø–æ—Å—Ç–∞
144 |    */
145 |   async getMetrics(metrics: InstagramMetrics): Promise<any> {
146 |     try {
147 |       if (!this.accessToken) {
148 |         throw new Error('Instagram API —Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω');
                    ^
error: Instagram API —Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
      at getMetrics (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:148:15)
      at getMetrics (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:145:20)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:167:28)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:160:58)

162 |         ok: false,
163 |         status: 404,
164 |         json: async () => ({ error: { message: 'Post not found' } }),
165 |       });
166 | 
167 |       await expect(service.getMetrics('invalid_post_id')).rejects.toThrow('Post not found');
                                                                        ^
error: expect(received).toThrow(expected)

Expected substring: "Post not found"
Received message: "Instagram API —Ç–æ–∫–µ–Ω –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:167:67)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:160:58)
(fail) InstagramAPIService - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã > getMetrics > –¥–æ–ª–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –º–µ—Ç—Ä–∏–∫ [0.09ms]
‚ùå –û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏—Å—Ç–æ—Ä–∏–∏: 108 |    * –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏
109 |    */
110 |   async publishStory(story: InstagramStory): Promise<any> {
111 |     try {
112 |       if (!this.accessToken || !this.instagramAccountId) {
113 |         throw new Error('Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
                    ^
error: Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
      at publishStory (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:113:15)
      at publishStory (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:110:22)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:184:36)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:172:37)

108 |    * –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏
109 |    */
110 |   async publishStory(story: InstagramStory): Promise<any> {
111 |     try {
112 |       if (!this.accessToken || !this.instagramAccountId) {
113 |         throw new Error('Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
                    ^
error: Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
      at publishStory (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:113:15)
      at publishStory (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:110:22)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:184:36)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:172:37)
(fail) InstagramAPIService - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã > publishStory > –¥–æ–ª–∂–Ω–æ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏–∏ [0.20ms]
‚ùå –û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏—Å—Ç–æ—Ä–∏–∏: 108 |    * –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏
109 |    */
110 |   async publishStory(story: InstagramStory): Promise<any> {
111 |     try {
112 |       if (!this.accessToken || !this.instagramAccountId) {
113 |         throw new Error('Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
                    ^
error: Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
      at publishStory (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:113:15)
      at publishStory (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:110:22)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:195:28)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:190:51)

218 |         ok: false,
219 |         status: 401,
220 |         json: async () => ({ error: { message: 'Missing access token' } }),
221 |       });
222 | 
223 |       const result = await service.validateToken('');
                                         ^
TypeError: service.validateToken is not a function. (In 'service.validateToken("")', 'service.validateToken' is undefined)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:223:36)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:210:59)
(fail) InstagramAPIService - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã > –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ > –¥–æ–ª–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ [0.04ms]
‚ùå –û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Instagram: 47 |    * –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞ –≤ Instagram
48 |    */
49 |   async publishPost(post: InstagramPost): Promise<any> {
50 |     try {
51 |         if (!this.accessToken || !this.instagramAccountId) {
52 |           throw new Error('Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
                     ^
error: Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:52:17)
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:49:21)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:245:21)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:230:43)

47 |    * –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å—Ç–∞ –≤ Instagram
48 |    */
49 |   async publishPost(post: InstagramPost): Promise<any> {
50 |     try {
51 |         if (!this.accessToken || !this.instagramAccountId) {
52 |           throw new Error('Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
                     ^
error: Instagram API —Ç–æ–∫–µ–Ω—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:52:17)
      at publishPost (/Users/playra/vibee-agent/src/instagram-plugin/services/instagramService.ts:49:21)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:245:21)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/integration/instagramService.test.ts:230:43)
(fail) InstagramAPIService - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã > Rate Limiting > –¥–æ–ª–∂–Ω–æ —Å–æ–±–ª—é–¥–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API [0.12ms]
‚ùå –û—à–∏–±–∫–∞ INSTAGRAM_POST: 29 |       const postData = parseInstagramPost(message.content.text, message.content.attachments);
30 | 
31 |       // –í–∞–ª–∏–¥–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
32 |       const validation = InstagramPostSchema.safeParse(postData);
33 |       if (!validation.success) {
34 |         throw new Error(`–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: ${validation.error.message}`);
                   ^
error: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: [
  {
    "code": "invalid_format",
    "format": "url",
    "path": [
      "imageUrl"
    ],
    "message": "Invalid URL"
  }
]
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/actions/instagramPostAction.ts:34:15)
      at handler (/Users/playra/vibee-agent/src/instagram-plugin/actions/instagramPostAction.ts:20:19)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/e2e/instagramPlugin.e2e.ts:145:48)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/e2e/instagramPlugin.e2e.ts:139:50)

153 |         }
154 |       );
155 | 
156 |       expect(callbackCalled).toBe(true);
157 |       expect(errorMessage).toContain('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç');
158 |       expect(errorMessage).toContain('–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
                                 ^
error: expect(received).toContain(expected)

Expected to contain: "–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"
Received: "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç –≤ Instagram.\n\n–û—à–∏–±–∫–∞: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: [\n  {\n    \"code\": \"invalid_format\",\n    \"format\": \"url\",\n    \"path\": [\n      \"imageUrl\"\n    ],\n    \"message\": \"Invalid URL\"\n  }\n]\n\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:\n- –¢–æ–∫–µ–Ω—ã Instagram API –≤ Infisical\n- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è\n- –ù–∞–ª–∏—á–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏"

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/e2e/instagramPlugin.e2e.ts:158:28)
(fail) Instagram Plugin - E2E –¢–µ—Å—Ç—ã > –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞ > –¥–æ–ª–∂–Ω–æ –æ—Ç–∫–ª–æ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è [0.65ms]
177 |           callbackMessage = response.text || '';
178 |         }
179 |       );
180 | 
181 |       expect(callbackCalled).toBe(true);
182 |       expect(callbackMessage).toContain('–ü–æ—Å—Ç –æ—Ç VIBEE');
                                    ^
error: expect(received).toContain(expected)

Expected to contain: "–ü–æ—Å—Ç –æ—Ç VIBEE"
Received: "‚úÖ –ü–æ—Å—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –≤ Instagram!\n\nüìù –ü–æ–¥–ø–∏—Å—å: –û–ø—É–±–ª–∏–∫—É–π\nüñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: https://picsum.photos/500/500\n\nüîó –°—Å—ã–ª–∫–∞: https://instagram.com"

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/e2e/instagramPlugin.e2e.ts:182:31)
(fail) Instagram Plugin - E2E –¢–µ—Å—Ç—ã > –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞ > –¥–æ–ª–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å default caption –µ—Å–ª–∏ –ø–æ–¥–ø–∏—Å—å –Ω–µ —É–∫–∞–∑–∞–Ω–∞ [0.06ms]
212 |     it('–¥–æ–ª–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å–ª–æ–≤–æ "–æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"', async () => {
213 |       const message = createTelegramMessage('–û–ø—É–±–ª–∏–∫—É–π —ç—Ç–æ');
214 | 
215 |       const isValid = await instagramPostAction.validate(runtime, message);
216 | 
217 |       expect(isValid).toBe(true);
                            ^
error: expect(received).toBe(expected)

Expected: true
Received: false

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/e2e/instagramPlugin.e2e.ts:217:23)
(fail) Instagram Plugin - E2E –¢–µ—Å—Ç—ã > –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π > –¥–æ–ª–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ —Å–ª–æ–≤–æ "–æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"
‚ùå –û—à–∏–±–∫–∞ INSTAGRAM_POST: 29 |       const postData = parseInstagramPost(message.content.text, message.content.attachments);
30 | 
31 |       // –í–∞–ª–∏–¥–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
32 |       const validation = InstagramPostSchema.safeParse(postData);
33 |       if (!validation.success) {
34 |         throw new Error(`–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: ${validation.error.message}`);
                   ^
error: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: [
  {
    "code": "invalid_format",
    "format": "url",
    "path": [
      "imageUrl"
    ],
    "message": "Invalid URL"
  }
]
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/actions/instagramPostAction.ts:34:15)
      at handler (/Users/playra/vibee-agent/src/instagram-plugin/actions/instagramPostAction.ts:20:19)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/e2e/instagramPlugin.e2e.ts:235:48)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/e2e/instagramPlugin.e2e.ts:230:68)

248 | 
249 |     it('–¥–æ–ª–∂–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ runtime', async () => {
250 |       const message = createTelegramMessage('–û–ø—É–±–ª–∏–∫—É–π –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è');
251 | 
252 |       const mockLogger = {
253 |         info: jest.fn(),
                    ^
ReferenceError: jest is not defined
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/e2e/instagramPlugin.e2e.ts:253:15)
      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/e2e/instagramPlugin.e2e.ts:249:45)
(fail) Instagram Plugin - E2E –¢–µ—Å—Ç—ã > –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ > –¥–æ–ª–∂–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ runtime [0.05ms]
335 |         {},
336 |         async () => {}
337 |       );
338 | 
339 |       // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–∞–º—è—Ç—å –±—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞
340 |       expect(runtime.addMemory).toHaveBeenCalled();
                                      ^
error: expect(received).toHaveBeenCalled()

Expected number of calls: >= 1
Received number of calls: 0

      at <anonymous> (/Users/playra/vibee-agent/src/instagram-plugin/__tests__/e2e/instagramPlugin.e2e.ts:340:33)
(fail) Instagram Plugin - E2E –¢–µ—Å—Ç—ã > –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö > –¥–æ–ª–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –ø–∞–º—è—Ç—å [0.26ms]
--------------------------------------|---------|---------|-------------------
File                                  | % Funcs | % Lines | Uncovered Line #s
--------------------------------------|---------|---------|-------------------
All files                             |   64.40 |   75.87 |
 __tests__/e2e/instagramPlugin.e2e.ts |   98.44 |   99.63 | 
 __tests__/mocks/runtime.ts           |   66.67 |   92.50 | 22-24
 __tests__/test-utils.ts              |   50.00 |   53.57 | 32-37,44-50
 actions/instagramPostAction.ts       |   85.71 |   97.50 | 25,139
 index.ts                             |    0.00 |   38.71 | 15-33
 services/instagramService.ts         |   50.00 |   49.20 | 16-42,163-230
 types/index.ts                       |  100.00 |  100.00 | 
--------------------------------------|---------|---------|-------------------

 22 pass
 23 fail
 61 expect() calls
Ran 45 tests across 3 files. [104.00ms]
