#!/bin/bash

# =============================================================================
# 📡 VIBEE WATCH MESSAGES - Унифицированный просмотр сообщений
# =============================================================================
# УСТАРЕЛ - используйте новую систему:
#   ./scripts/log-viewer.sh messages
#
# Этот скрипт теперь перенаправляет на унифицированный log-viewer
# =============================================================================

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
LOG_VIEWER="$SCRIPT_DIR/scripts/log-viewer.sh"

if [ -f "$LOG_VIEWER" ]; then
    # Используем новую унифицированную систему
    exec "$LOG_VIEWER" messages
else
    echo "❌ [ERROR] $LOG_VIEWER не найден"
    echo ""
    echo "📋 ВРУЧНУЮ просмотр сообщений:"
    echo "   tail -f agent.log | grep --line-buffered '🔔\|📝\|⚠️\|📨\|🎯'"
    echo ""
    echo "📖 Подробности в LOGS-MANAGEMENT.md"
    echo ""

    # Fallback на старую команду
    echo "📡 ПРОСМОТР СООБЩЕНИЙ В РЕАЛЬНОМ ВРЕМЕНИ"
    echo "═══════════════════════════════════════════════════════"
    echo ""
    echo "✅ Telegram listener уже работает и получает сообщения!"
    echo "✅ Сейчас вы увидите все входящие сообщения из ваших групп"
    echo ""
    echo "💡 Отправьте сообщение 'Молодчик!' в любую группу Telegram"
    echo "   где вы участник - оно появится здесь!"
    echo ""
    echo "Нажмите Ctrl+C чтобы остановить просмотр"
    echo "═══════════════════════════════════════════════════════"
    echo ""

    tail -f agent.log | grep --line-buffered "🔔\|📝\|⚠️\|📨\|🎯"
fi
